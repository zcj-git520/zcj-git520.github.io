<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Golang on Chengji Zhao&#39;s blog</title>
    <link>https://zcj-git520.github.io/categories/golang/</link>
    <description>Recent content in Golang on Chengji Zhao&#39;s blog</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>zh-cn</language>
    <lastBuildDate>Sun, 24 Oct 2021 22:00:08 +0800</lastBuildDate><atom:link href="https://zcj-git520.github.io/categories/golang/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>Goå®‰å…¨æŒ‡å—</title>
      <link>https://zcj-git520.github.io/p/go%E5%AE%89%E5%85%A8%E6%8C%87%E5%8D%97/</link>
      <pubDate>Sun, 24 Oct 2021 22:00:08 +0800</pubDate>
      
      <guid>https://zcj-git520.github.io/p/go%E5%AE%89%E5%85%A8%E6%8C%87%E5%8D%97/</guid>
      <description>æ–‡ç« æ¥æº é¹…å‚(è…¾è®¯)ä»£ç å®‰å…¨æŒ‡å—
é€šç”¨ å†…å­˜ç®¡ç† ã€å¿…é¡»ã€‘åˆ‡ç‰‡é•¿åº¦æ ¡éªŒ  åœ¨å¯¹sliceè¿›è¡Œæ“ä½œæ—¶ï¼Œå¿…é¡»åˆ¤æ–­é•¿åº¦æ˜¯å¦åˆæ³•ï¼Œé˜²æ­¢ç¨‹åºpanic  // bad: æœªåˆ¤æ–­dataçš„é•¿åº¦ï¼Œå¯å¯¼è‡´ index out of range func decode(data []byte) bool { if data[0] == &#39;F&#39; &amp;amp;&amp;amp; data[1] == &#39;U&#39; &amp;amp;&amp;amp; data[2] == &#39;Z&#39; &amp;amp;&amp;amp; data[3] == &#39;Z&#39; &amp;amp;&amp;amp; data[4] == &#39;E&#39; &amp;amp;&amp;amp; data[5] == &#39;R&#39; { fmt.Println(&amp;quot;Bad&amp;quot;) return true } return false } // bad: slice bounds out of range func foo() { var slice = []int{0, 1, 2, 3, 4, 5, 6} fmt.</description>
    </item>
    
    <item>
      <title>Uber go è¯­è¨€ç¼–ç è§„èŒƒ</title>
      <link>https://zcj-git520.github.io/p/uber-go-%E8%AF%AD%E8%A8%80%E7%BC%96%E7%A0%81%E8%A7%84%E8%8C%83/</link>
      <pubDate>Wed, 20 Oct 2021 22:00:08 +0800</pubDate>
      
      <guid>https://zcj-git520.github.io/p/uber-go-%E8%AF%AD%E8%A8%80%E7%BC%96%E7%A0%81%E8%A7%84%E8%8C%83/</guid>
      <description>uber-go/guide çš„ä¸­æ–‡ç¿»è¯‘ English Uber go è¯­è¨€ç¼–ç è§„èŒƒ Uber æ˜¯ä¸€å®¶ç¾å›½ç¡…è°·çš„ç§‘æŠ€å…¬å¸ï¼Œä¹Ÿæ˜¯ go è¯­è¨€çš„æ—©æœŸ adopterã€‚å…¶å¼€æºäº†å¾ˆå¤š golang é¡¹ç›®ï¼Œè¯¸å¦‚è¢« gopher åœˆç†ŸçŸ¥çš„ zapã€jaeger ç­‰ã€‚2018 å¹´å¹´æœ« Uber å°†å†…éƒ¨çš„ go é£æ ¼è§„èŒƒ å¼€æºåˆ° GitHubï¼Œç»è¿‡ä¸€å¹´çš„ç§¯ç´¯å’Œæ›´æ–°ï¼Œè¯¥è§„èŒƒå·²ç»åˆå…·è§„æ¨¡ï¼Œå¹¶å—åˆ°å¹¿å¤§ gopher çš„å…³æ³¨ã€‚æœ¬æ–‡æ˜¯è¯¥è§„èŒƒçš„ä¸­æ–‡ç‰ˆæœ¬ã€‚æœ¬ç‰ˆæœ¬ä¼šæ ¹æ®åŸç‰ˆå®æ—¶æ›´æ–°ã€‚
ç›®å½•  uber- go/guide çš„ä¸­æ–‡ç¿»è¯‘ English Uber go è¯­è¨€ç¼–ç è§„èŒƒ ç‰ˆæœ¬ ç›®å½• ä»‹ç» æŒ‡å¯¼åŸåˆ™  æŒ‡å‘ interface çš„æŒ‡é’ˆ Interface åˆç†æ€§éªŒè¯ æ¥æ”¶å™¨ (receiver) ä¸æ¥å£ é›¶å€¼ Mutex æ˜¯æœ‰æ•ˆçš„ åœ¨è¾¹ç•Œå¤„æ‹·è´ Slices å’Œ Maps  æ¥æ”¶ Slices å’Œ Maps è¿”å› slices æˆ– maps   ä½¿ç”¨ defer é‡Šæ”¾èµ„æº Channel çš„ size è¦ä¹ˆæ˜¯ 1ï¼Œè¦ä¹ˆæ˜¯æ— ç¼“å†²çš„ æšä¸¾ä» 1 å¼€å§‹ ä½¿ç”¨ time å¤„ç†æ—¶é—´  ä½¿ç”¨ time.</description>
    </item>
    
    <item>
      <title>Go Channelçš„æ·±å…¥ç†è§£</title>
      <link>https://zcj-git520.github.io/p/go-channel%E7%9A%84%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3/</link>
      <pubDate>Fri, 15 Oct 2021 22:00:38 +0800</pubDate>
      
      <guid>https://zcj-git520.github.io/p/go-channel%E7%9A%84%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3/</guid>
      <description>go Channel  ï¼ˆDo not communicate by sharing memory; instead, share memory by communicatingï¼‰  CSPå¹¶å‘æ¨¡å‹  CSP å³é€šä¿¡é¡ºåºè¿›ç¨‹ã€äº¤è°ˆå¾ªåºç¨‹åºï¼Œåˆè¢«è¯‘ä¸ºäº¤æ¢æ¶ˆæ¯çš„å¾ªåºç¨‹åº(communicating sequential processes)ï¼Œå®ƒæ˜¯ä¸€ç§ç”¨æ¥æè¿°å¹¶å‘æ€§ç³»ç»Ÿä¹‹é—´è¿›è¡Œäº¤äº’çš„æ¨¡å‹ã€‚ go Channeæ˜¯ä¸€ç§ç‰¹æ®Šçš„ç±»å‹ï¼Œæ˜¯æœ‰ç‰¹å®šç±»å‹çš„é˜Ÿåˆ—ã€‚æ˜¯é“¾æ¥goroutine(åç¨‹)çš„é€šä¿¡æœºåˆ¶ï¼Œé€šè¿‡é€šä¿¡å…±äº«å†…å­˜è€Œä¸æ˜¯é€šè¿‡å…±äº«å†…å­˜è€Œå®ç°é€šä¿¡. Channel æ”¶å‘æ“ä½œå‡éµå¾ªäº†å…ˆè¿›å…ˆå‡ºçš„è®¾è®¡ï¼Œå…·ä½“è§„åˆ™å¦‚ä¸‹ï¼š  å…ˆä» Channel è¯»å–æ•°æ®çš„ Goroutine ä¼šå…ˆæ¥æ”¶åˆ°æ•°æ®ï¼› å…ˆå‘ Channel å‘é€æ•°æ®çš„ Goroutine ä¼šå¾—åˆ°å…ˆå‘é€æ•°æ®çš„æƒåˆ©ï¼›    
channel æ•°æ®ç»“æ„å®šä¹‰ï¼š type hchan struct { // é˜Ÿåˆ—ä¸­å­˜å‚¨çš„æ•°é‡ qcount uint // total data in the queue //ç¯å½¢é˜Ÿåˆ—çš„å¤§å°(æœ€å¤§å­˜å‚¨æ•°é‡ ) dataqsiz uint // size of the circular queue // å­˜æ”¾ç¯å½¢é˜Ÿåˆ—çš„æ•°æ®ï¼Œæ•°ç»„ buf unsafe.</description>
    </item>
    
    <item>
      <title>go errorç±»å‹è½¬json</title>
      <link>https://zcj-git520.github.io/p/golang/</link>
      <pubDate>Sat, 09 Oct 2021 22:00:38 +0800</pubDate>
      
      <guid>https://zcj-git520.github.io/p/golang/</guid>
      <description>é—®é¢˜  åœ¨æ”¶é›†æœåŠ¡çš„è®¿é—®è®°å½•æ—¶ï¼Œéœ€è¦å°†è®¿é—®è®°å½•ä¿å­˜ï¼Œå®šä¹‰ç»“æ„ä½“å¦‚ä¸‹    type accessData struct { RemoteAddr string // è¿œç¨‹è®¿é—®ä¸»æœºåœ°å€ RequestURI string //è®¿é—®çš„è·¯ç”± ServerName string // è®¿é—®çš„æœåŠ¡åç§° AccessDate string //è®¿é—®çš„æ—¶é—´ RunStatus bool //æœåŠ¡æ˜¯å¦æ­£å¸¸è¿è¡Œ RunError error //è¿è¡ŒæŠ¥é”™ï¼šæŠ¥é”™ä¿¡æ¯. ServerParam interface{} // è®¿é—®æœåŠ¡çš„å‚æ•° }   é€šè¿‡ç»“æ„ä½“è½¬jsonï¼ŒåŒæ—¶é€šè¿‡getè¯·æ±‚å¾—åˆ°å›¾ä¸‹ç»“æœ 
  &amp;ldquo;RunError&amp;rdquo;: {},è¢«jsonè½¬ä¸º{}çš„å­—ç¬¦ï¼Œ æ‰“å°ç»“æ„ä½“ï¼Œå‘ç°é”™è¯¯ä¿¡æ¯æ˜¯æœ‰çš„ï¼š{192.168.1.101:53364 /v1/alarms/out/d GetOutAlarms 2021-10-12 10:09:42 false æ²¡æœ‰è¿™ä¸ªæŠ¥è­¦ğŸ†”id },è¯´æ˜æ˜¯error è½¬jsoné—®é¢˜
é—®é¢˜åˆ†æä¸è§£å†³  é—®é¢˜åˆ†ææŸ¥çœ‹errorç±»å‹å®šä¹‰å‘ç°ï¼šerrorç±»å‹åªæ˜¯ä¸€ä¸ªæ¥å£ã€‚å®ƒå¯ä»¥åŒ…å«ä»»ä½•å®ç°å®ƒçš„å…·ä½“ç±»å‹çš„å€¼ è§£å†³ï¼šå°†ç»“æ„ä½“ä¸­é”™è¯¯è½¬åŒ–ä¸ºå­—ç¬¦ä¸²ç±»å‹ï¼ŒåŒæ—¶ç”¨err.Error()è¿”å›æ˜¯é”™è¯¯çš„å­—ç¬¦ä¸²  type accessData struct { RemoteAddr string // è¿œç¨‹è®¿é—®ä¸»æœºåœ°å€ RequestURI string //è®¿é—®çš„è·¯ç”± ServerName string // è®¿é—®çš„æœåŠ¡åç§° AccessDate string //è®¿é—®çš„æ—¶é—´ RunStatus bool //æœåŠ¡æ˜¯å¦æ­£å¸¸è¿è¡Œ RunError string //è¿è¡ŒæŠ¥é”™ï¼šæŠ¥é”™ä¿¡æ¯.</description>
    </item>
    
    <item>
      <title>go goroutineä¸gmpæ¨¡å‹çš„æ·±å…¥ç†è§£</title>
      <link>https://zcj-git520.github.io/p/go-goroutine%E4%B8%8Egmp%E6%A8%A1%E5%9E%8B%E7%9A%84%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3/</link>
      <pubDate>Wed, 06 Oct 2021 22:00:38 +0800</pubDate>
      
      <guid>https://zcj-git520.github.io/p/go-goroutine%E4%B8%8Egmp%E6%A8%A1%E5%9E%8B%E7%9A%84%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3/</guid>
      <description>go åç¨‹goroutine  åç¨‹æ˜¯ç”¨æˆ·çº§çš„çº¿ç¨‹ï¼Œæœ‰ç”¨æˆ·è‡ªå·±è°ƒåº¦ï¼Œä½¿ç”¨åç¨‹ä½¿å¾—ç¨‹åºè°ƒåº¦æ›´åŠ çµæ´»ã€‚åŒæ—¶æ¯”çº¿ç¨‹æ›´è½»é‡ï¼Œå ç”¨çš„æ ˆå†…å­˜æ›´å°‘ã€‚goè¯­è¨€å¤©ç”Ÿæ”¯æŒé«˜å¹¶å‘ï¼Œgoä½¿ç”¨åç¨‹goroutineçš„è°ƒåº¦å™¨ã€‚goroutine çš„æ ˆå†…å­˜æœ€å°å€¼ä¸º2kb(_StackMin = 2048),å®ƒä¸æ˜¯å›ºå®šä¸å˜çš„ï¼Œå¯ä»¥éšéœ€æ±‚å¢å¤§å’Œç¼©å°ã€‚goroutine ç»´æŠ¤ç€å¾ˆå¤§çš„å†…å­˜ï¼Œæ— éœ€é¢‘ç¹å¼€è¾Ÿå†…å­˜ï¼Œgoroutineæ˜¯ä½¿ç”¨M:næ¨¡å‹ï¼Œåœ¨ç”¨æˆ·æ€åˆ‡æ¢åç¨‹ï¼ŒåŠ ä¸Šåˆ›å»ºåç¨‹ä»£ä»·ä½ï¼Œä½¿å¾—cpuçš„åˆ©ç”¨ç‡å¤§å¤§æå‡ï¼Œcupçš„æ€§èƒ½å¤§å¹…åº¦çš„è¢«åˆ©ç”¨ã€‚  goroutine è°ƒåº¦å™¨GPMæ¨¡å‹ G  G å°±æ˜¯goroutineåç¨‹  type g struct { // Stack parameters. // stack describes the actual stack memory: [stack.lo, stack.hi). // stackguard0 is the stack pointer compared in the Go stack growth prologue. // It is stack.lo+StackGuard normally, but can be StackPreempt to trigger a preemption. // stackguard1 is the stack pointer compared in the C stack growth prologue.</description>
    </item>
    
    <item>
      <title>go mapçš„æ·±å…¥ç†è§£</title>
      <link>https://zcj-git520.github.io/p/go-map%E7%9A%84%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3/</link>
      <pubDate>Mon, 20 Sep 2021 22:00:38 +0800</pubDate>
      
      <guid>https://zcj-git520.github.io/p/go-map%E7%9A%84%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3/</guid>
      <description>goland åŸºç¡€ä¹‹map mapçš„å†…éƒ¨ç»“æ„  go mapæ˜¯ä½¿ç”¨çš„å“ˆå¸Œè¡¨æ„å»ºçš„ mapçš„ç»“æ„å¯åˆ†ä¸ºï¼šhmapçš„ç»“æ„ä½“å’Œbmap(æ¡¶)ï¼Œhmapç»“æ„ä½“è®°å½•è¿™mapçš„åŸºç¡€ä¿¡æ¯(åŒ…æ‹¬mapå­˜å‚¨ä¸ªæ•°ï¼Œ æ¡¶çš„ä¸ªæ•°ï¼Œhashç§å­ï¼Œæ¡¶çš„æ•°æ®ï¼Œæ‰©å®¹æ—¶æ—§æ¡¶çš„æ•°æ®ä»¥åŠè¿ç§»ä¸ªæ•°ï¼ˆmapæ‰©å®¹ä¸æ˜¯ä¸€æ¬¡æ€§è¿ç§»å®Œï¼‰) æºç å¦‚ä¸‹    å®šä¹‰hmapçš„ç»“æ„ï¼š type hmap struct { // Note: the format of the hmap is also encoded in cmd/compile/internal/gc/reflect.go. // Make sure this stays in sync with the compiler&#39;s definition. // map å­˜å‚¨å…ƒç´ çš„è®¡æ•° count int // # live cells == size of map. Must be first (used by len() builtin) flags uint8 // mapçš„çŠ¶æ€æ ‡è¯†ï¼Œæ¡¶æ˜¯å¦åœ¨å¢æ”¹ï¼Œæ‰©å®¹æˆ–è€…ç¼©å®¹ //æ¡¶çš„ä¸ªæ•°/é‡‡ç”¨çš„ä¸è¿ç®—æ³•è®¡ç®—æ¡¶çš„ä¸ªæ•°ï¼Œæ¡¶çš„ä¸ªæ•°ä¸º2çš„æ•´æ•°æ¬¡å¹‚ B uint8 // log_2 of # of buckets (can hold up to loadFactor * 2^B items) //æº¢å‡ºçš„æ¡¶çš„æ•°é‡çš„è¿‘ä¼¼å€¼ noverflow uint16 // approximate number of overflow buckets; see incrnoverflow for details hash0 uint32 // hash seed //æŒ‡å‘æ¡¶æ•°æ®çš„æŒ‡é’ˆ buckets unsafe.</description>
    </item>
    
    <item>
      <title>go åˆ‡ç‰‡çš„æ·±å…¥ç†è§£</title>
      <link>https://zcj-git520.github.io/p/go-%E5%88%87%E7%89%87%E7%9A%84%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3/</link>
      <pubDate>Wed, 15 Sep 2021 22:00:38 +0800</pubDate>
      
      <guid>https://zcj-git520.github.io/p/go-%E5%88%87%E7%89%87%E7%9A%84%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3/</guid>
      <description>åˆ‡ç‰‡çš„å†…éƒ¨ç»“æ„  åˆ‡ç‰‡çš„ç»“æ„å¯åˆ†ä¸ºï¼šæ•°ç»„ï¼Œæ•°æ®ï¼ˆå…ƒç´ ï¼‰çš„åœ°å€&amp;amp;dataã€ä¹Ÿå­˜å…ƒç´ ä¸ªæ•°lenã€å¯ä»¥å­˜å‚¨å¤šå°‘å…ƒç´ cap æºç å¦‚ä¸‹    å®šä¹‰åˆ‡ç‰‡çš„ç»“æ„ï¼š type slice struct { array unsafe.Pointer len int cap int }  å¦‚å›¾æ‰€ç¤º  avatar
 var data [] int å£°æ˜ä¸€ä¸ªåˆ‡ç‰‡ï¼Œç›¸å½“äºç”Ÿæˆåˆ‡ç‰‡çš„ç»“æ„ï¼Œdataåœ°å€æŒ‡é’ˆä¸ºnil, lenå’Œcapéƒ½ä¸º0ã€‚è¿™å°±å¾ˆæ¸…æ¥šä¸ºä»€ä¹ˆï¼Œnilåˆ‡ç‰‡ä¸å¯ä»¥ç›´æ¥ä½¿ç”¨äº†ğŸ˜„ ç»“æ„å¦‚å›¾  avatar
 ä½¿ç”¨åˆ‡ç‰‡æ—¶éœ€è¦make([]type,len,cap)æˆ–è€…åˆå§‹åŒ–[]type{}æ‰èƒ½ä½¿ç”¨ï¼Œè¿™æ˜¯å› ä¸ºåœ¨åœ¨ç”Ÿæˆåˆ‡ç‰‡çš„ç»“æ„æ—¶ï¼ŒåŒæ—¶ä¹Ÿå¼€è¾Ÿäº†ä¸€æ®µæ–°çš„å†…å­˜ï¼Œç±»å‹ä¸ºtype, ç»“æ„é•¿åº¦ä¸ºcap,åŒæ—¶å€¼è¿›è¡Œåˆå§‹åŒ–ã€‚ make æºç å¦‚ä¸‹ï¼š    func makeslice(et *_type, len, cap int) unsafe.Pointer { mem, overflow := math.MulUintptr(et.size, uintptr(cap)) // åˆ¤æ–­æ˜¯å¦è¶Šç•Œ if overflow || mem &amp;gt; maxAlloc || len &amp;lt; 0 || len &amp;gt; cap { // NOTE: Produce a &#39;len out of range&#39; error instead of a // &#39;cap out of range&#39; error when someone does make([]T, bignumber).</description>
    </item>
    
  </channel>
</rss>
