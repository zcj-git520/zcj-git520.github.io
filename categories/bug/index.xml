<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Bugä¿®å¤ on Chengji Zhao&#39;s blog</title>
    <link>https://zcj-git520.github.io/categories/bug/</link>
    <description>Recent content in Bugä¿®å¤ on Chengji Zhao&#39;s blog</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>zh-cn</language>
    <lastBuildDate>Mon, 20 Dec 2021 22:00:08 +0800</lastBuildDate><atom:link href="https://zcj-git520.github.io/categories/bug/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>è¶…æ—¶é‡è¯•æœºåˆ¶-host_try</title>
      <link>https://zcj-git520.github.io/p/%E8%B6%85%E6%97%B6%E9%87%8D%E8%AF%95%E6%9C%BA%E5%88%B6-host_try/</link>
      <pubDate>Mon, 20 Dec 2021 22:00:08 +0800</pubDate>
      
      <guid>https://zcj-git520.github.io/p/%E8%B6%85%E6%97%B6%E9%87%8D%E8%AF%95%E6%9C%BA%E5%88%B6-host_try/</guid>
      <description>host_try  host_tryï¼šä¸»è¦æ˜¯ç›®çš„æ˜¯åœ¨å•ä¸ªæˆ–è€…å¤šä¸ªhostçš„ä¸‹ï¼Œè¿æ¥è¶…æ—¶æˆ–è€…è¿æ¥å¤±è´¥ä¸‹çš„é‡è¯•æœºåˆ¶ host_try: æä¾›ä¸‰ç§é€€é¿ç­–ç•¥ï¼š1. å°è¯•ç­‰å¾…æ—¶é—´æŒ‡æ•°å¢é•¿ 2. ä»¥ç›¸åŒæ—¶é—´è¿›è¡Œå°è¯• 3.éšæœºæ—¶é—´è¿›è¡Œå°è¯• ä¸‰ç§å°è¯•ç­–ç•¥å¯ä¸€èµ·ä½¿ç”¨ host_try: æä¾›ä¸‰ç§é‡è¯•æ–¹å¼ï¼š1. è½®è¯¢hostè¿›è¡Œé‡è¿, é‡è¿æ¬¡æ•°è¾¾åˆ°å,åœ¨å°†æ¢ä¸‹ä¸€host, ç›´åˆ°é‡æ–°è¿æ¥æˆåŠŸæˆ–æ‰€æœ‰çš„hostéƒ½é‡è¿å®Œæˆç»“æŸ 2.æ¯ä¸€ä¸ªhostè¿›è¡Œé‡è¿, åœ¨å°†æ¢ä¸‹ä¸€host, æ‰€æœ‰çš„hostå¤±è´¥äº†,åœ¨è¿›è¡Œä¸‹ä¸€æ¬¡é‡è¿ã€‚ç›´åˆ°é‡æ–°è¿æ¥æˆåŠŸæˆ–é‡è¿æ¬¡æ•°è¾¾åˆ°åç»“æŸ 3. é‡è¯•ç›´åˆ°æˆåŠŸ host_try åªæ˜¯æä¾›é‡è¯•è¿æ¥çš„æ¥å£ï¼Œå…·ä½“è¯·æ±‚çš„æ–¹æ³•éœ€è¦è‡ªå·±å†™  host_tryçš„å·¥ä½œåŸç†  å­˜åœ¨å¤šä¸ªhostçš„è¯·æ±‚æä¾›ç›¸åŒçš„æœåŠ¡å¦‚(ntp)ï¼Œå­˜åœ¨è¿æ¥è¶…æ—¶çš„æƒ…å†µï¼Œéœ€è¦ä¸æ–­çš„å°è¯•è¿æ¥ï¼Œ åªè¦ä¸€ä¸ªhostè¿æ¥è¯·æ±‚æˆåŠŸå°±è¿”å›  host_tryçš„é…ç½®ç»“æ„ type tryConfig struct {attemptNum uint // å°è¯•çš„é‡è¿çš„æ¬¡æ•°nowAttempt uint // ç°åœ¨ç¬¬å‡ æ¬¡é‡è¿hosts []string // è¿æ¥çš„hostç»„successHost string // è¿æ¥æˆåŠŸçš„hosterrorHost map[string]string // è¿æ¥å¤±è´¥çš„hostå’Œé”™è¯¯åŸå› attemptType string // é‡è¿æ–¹å¼attemptStatus bool // æœ€ç»ˆé‡è¿çš„çŠ¶æ€delay time.Duration // å»¶æ—¶æ—¶é—´maxDelay time.Duration // æœ€å¤§å»¶æ—¶æ—¶é—´maxJitter time.</description>
    </item>
    
    <item>
      <title>timerTask å®šæ—¶ä»»åŠ¡åŒ…</title>
      <link>https://zcj-git520.github.io/p/timertask-%E5%AE%9A%E6%97%B6%E4%BB%BB%E5%8A%A1%E5%8C%85/</link>
      <pubDate>Wed, 15 Dec 2021 22:00:08 +0800</pubDate>
      
      <guid>https://zcj-git520.github.io/p/timertask-%E5%AE%9A%E6%97%B6%E4%BB%BB%E5%8A%A1%E5%8C%85/</guid>
      <description>timerTask å®šæ—¶ä»»åŠ¡ï¼šå¯ä»¥å®šæ—¶æ‰§è¡Œå•ä¸ªæˆ–è€…å¯¹ä¸ªä»»åŠ¡ï¼š
 å®šæ—¶å®šæ—¶ä»»åŠ¡ åœæ­¢å®šæ—¶ä»»åŠ¡ é‡ç½®å®šæ—¶æ—¶é—´ï¼Œå¹¶æ‰§è¡Œå®šæ—¶ä»»åŠ¡ å®šæ—¶å¼€å¯å®šæ—¶ä»»åŠ¡ å®šæ—¶ç»“æŸå®šæ—¶ä»»åŠ¡  timerTaskç»“æ„ type timerConfig struct {timing time.Duration // å®šæ—¶æ—¶é—´startTiming time.Duration // å®šæ—¶å¼€å¯å®šæ—¶ä»»åŠ¡æ—¶é—´stopTiming time.Duration // å®šæ—¶åœæ­¢å®šæ—¶ä»»åŠ¡æ—¶é—´running bool // å®šæ—¶å™¨è¿è¡Œçš„çŠ¶æ€,è¿ä½œä¸­ä¸ºtrue/æ²¡æœ‰è¿è¡Œä¸ºfalsetasks []func() // å®šæ—¶ä»»åŠ¡stopChan chan struct{} // åœæ­¢å®šæ—¶å™¨æ—¥ä»»åŠ¡runningMu sync.MutexWaiter sync.WaitGroup}å®šæ—¶ä»»åŠ¡çš„å¼€å§‹å’Œç»“æŸ å‡½æ•°åŸå‹ï¼šNewTimerTask(d time.Duration, tasks []func(), opts ... Option) *timerConfigå‚æ•°ä¸ºï¼šç»Ÿä¸€çš„å®šæ—¶ä»»åŠ¡æ—¶é—´,å®šæ—¶ä»»åŠ¡é›†, å¯é€‰å‚æ•°ã€å®šæ—¶å¼€å¯å®šæ—¶ä»»åŠ¡æ—¶é—´(SetTimerStart(d time.Duration)), å®šæ—¶åœæ­¢å®šæ—¶ä»»åŠ¡æ—¶é—´(SetTimerStop(d time.Duration))ã€‘Start()å¼€å§‹å®šæ—¶ä»»åŠ¡, Stop()ç»“æŸå®šæ—¶ä»»åŠ¡ ä½¿ç”¨
t1 := 1 * time.Secondtasks := []func(){printTest1, printTest2, printTest3, printTest4, printTest5}timer := NewTimerTask(t1, tasks)timer.</description>
    </item>
    
    <item>
      <title>go errorç±»å‹è½¬json</title>
      <link>https://zcj-git520.github.io/p/golang/</link>
      <pubDate>Sat, 09 Oct 2021 22:00:38 +0800</pubDate>
      
      <guid>https://zcj-git520.github.io/p/golang/</guid>
      <description>é—®é¢˜  åœ¨æ”¶é›†æœåŠ¡çš„è®¿é—®è®°å½•æ—¶ï¼Œéœ€è¦å°†è®¿é—®è®°å½•ä¿å­˜ï¼Œå®šä¹‰ç»“æ„ä½“å¦‚ä¸‹    type accessData struct { RemoteAddr string // è¿œç¨‹è®¿é—®ä¸»æœºåœ°å€ RequestURI string //è®¿é—®çš„è·¯ç”± ServerName string // è®¿é—®çš„æœåŠ¡åç§° AccessDate string //è®¿é—®çš„æ—¶é—´ RunStatus bool //æœåŠ¡æ˜¯å¦æ­£å¸¸è¿è¡Œ RunError error //è¿è¡ŒæŠ¥é”™ï¼šæŠ¥é”™ä¿¡æ¯. ServerParam interface{} // è®¿é—®æœåŠ¡çš„å‚æ•° }   é€šè¿‡ç»“æ„ä½“è½¬jsonï¼ŒåŒæ—¶é€šè¿‡getè¯·æ±‚å¾—åˆ°å›¾ä¸‹ç»“æœ 
  &amp;ldquo;RunError&amp;rdquo;: {},è¢«jsonè½¬ä¸º{}çš„å­—ç¬¦ï¼Œ æ‰“å°ç»“æ„ä½“ï¼Œå‘ç°é”™è¯¯ä¿¡æ¯æ˜¯æœ‰çš„ï¼š{192.168.1.101:53364 /v1/alarms/out/d GetOutAlarms 2021-10-12 10:09:42 false æ²¡æœ‰è¿™ä¸ªæŠ¥è­¦ğŸ†”id },è¯´æ˜æ˜¯error è½¬jsoné—®é¢˜
é—®é¢˜åˆ†æä¸è§£å†³  é—®é¢˜åˆ†ææŸ¥çœ‹errorç±»å‹å®šä¹‰å‘ç°ï¼šerrorç±»å‹åªæ˜¯ä¸€ä¸ªæ¥å£ã€‚å®ƒå¯ä»¥åŒ…å«ä»»ä½•å®ç°å®ƒçš„å…·ä½“ç±»å‹çš„å€¼ è§£å†³ï¼šå°†ç»“æ„ä½“ä¸­é”™è¯¯è½¬åŒ–ä¸ºå­—ç¬¦ä¸²ç±»å‹ï¼ŒåŒæ—¶ç”¨err.Error()è¿”å›æ˜¯é”™è¯¯çš„å­—ç¬¦ä¸²  type accessData struct { RemoteAddr string // è¿œç¨‹è®¿é—®ä¸»æœºåœ°å€ RequestURI string //è®¿é—®çš„è·¯ç”± ServerName string // è®¿é—®çš„æœåŠ¡åç§° AccessDate string //è®¿é—®çš„æ—¶é—´ RunStatus bool //æœåŠ¡æ˜¯å¦æ­£å¸¸è¿è¡Œ RunError string //è¿è¡ŒæŠ¥é”™ï¼šæŠ¥é”™ä¿¡æ¯.</description>
    </item>
    
  </channel>
</rss>
