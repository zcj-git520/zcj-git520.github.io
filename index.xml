<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
    <channel>
        <title>Chengji Zhao&#39;s blog</title>
        <link>https://zcj-git520.github.io/</link>
        <description>Recent content on Chengji Zhao&#39;s blog</description>
        <generator>Hugo -- gohugo.io</generator>
        <language>zh-cn</language>
        <lastBuildDate>Mon, 18 Oct 2021 22:00:38 +0800</lastBuildDate><atom:link href="https://zcj-git520.github.io/index.xml" rel="self" type="application/rss+xml" /><item>
        <title>å†…å­˜ç®¡ç†</title>
        <link>https://zcj-git520.github.io/p/%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86/</link>
        <pubDate>Mon, 18 Oct 2021 22:00:38 +0800</pubDate>
        
        <guid>https://zcj-git520.github.io/p/%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86/</guid>
        <description>&lt;img src="https://zcj-git520.github.io/p/%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86/6.png" alt="Featured image of post å†…å­˜ç®¡ç†" /&gt;&lt;h2 id=&#34;è™šæ‹Ÿåœ°å€ç©ºé—´å¸ƒå±€&#34;&gt;è™šæ‹Ÿåœ°å€ç©ºé—´å¸ƒå±€&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;ç¨‹åºé€šè¿‡ç¼–è¯‘æˆä¸ºä¸€å †çš„æœºå™¨æŒ‡ä»¤å†™å…¥å¯æ‰§è¡Œæ–‡ä»¶ï¼Œç¨‹åºåœ¨è¿è¡Œæ˜¯ä¼šå°†å¯æ‰§è¡Œæ–‡ä»¶åŠ è½½åœ¨è®¡ç®—æœºçš„å†…å­˜ä¸­
åœ¨è™šæ‹Ÿåœ°å€ç©ºé—´åˆ†å¸ƒä¸­å¤„äºä»£ç æ®µã€‚&lt;/li&gt;
&lt;li&gt;ç¨‹åºä¸­çš„å±€éƒ¨å˜é‡ã€å‡½æ•°çš„å‚æ•°ã€å‡½æ•°çš„è¿”å›å€¼ç­‰æ•°æ®ä¼šä¿å­˜åœ¨è™šæ‹Ÿåœ°å€çš„æ ˆä¸­(æ ˆæ˜¯å…ˆè¿›åå‡ºçš„æ•°æ®ç»“æ„)
æ ˆç©ºé—´çš„ç¼–è¯‘å™¨åˆ†é…å’Œé‡Šæ”¾ã€‚&lt;/li&gt;
&lt;li&gt;ç¨‹åºçš„å…¨å±€å˜é‡å’Œé™æ€å˜é‡ä¼šä¿å­˜åœ¨è™šæ‹Ÿåœ°å€çš„æ•°æ®æ®µ&lt;/li&gt;
&lt;li&gt;åŠ¨æ€åˆ†é…å†…å­˜çš„åœ°å€ä¼šä¿å­˜åœ¨è™šæ‹Ÿåœ°å€ç©ºé—´çš„å †ä¸Šã€‚å †ç©ºé—´æ˜¯åŠ¨æ€å¼€è¾Ÿçš„å†…å­˜ç©ºé—´ï¼Œéœ€è¦ä¸»åŠ¨å¼€è¾Ÿå’Œé‡Šæ”¾ã€‚æˆ–è€…
è°ƒç”¨GCé‡Šæ”¾  &lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 68; 
			flex-basis: 165px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86/1.png&#34; data-size=&#34;547x795&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86/1.png&#34;
			width=&#34;547&#34;
			height=&#34;795&#34;
			srcset=&#34;https://zcj-git520.github.io/p/%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86/1_hu86f620222550b5f6f6b08ef9da75c8f9_105109_480x0_resize_box_3.png 480w, https://zcj-git520.github.io/p/%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86/1_hu86f620222550b5f6f6b08ef9da75c8f9_105109_1024x0_resize_box_3.png 1024w&#34;
			loading=&#34;lazy&#34;
			&gt;
	&lt;/a&gt;
	
&lt;/figure&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;å †å†…å­˜ç®¡ç†&#34;&gt;å †å†…å­˜ç®¡ç†&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;å †å†…å­˜ç©ºé—´ä¸æ˜¯ç¼–è¯‘å™¨åˆ†é…ï¼Œè€Œæ˜¯æœ‰ç¨‹åºåŠ¨æ€åˆ†é…çš„å†…å­˜ç©ºé—´ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;æ‰‹åŠ¨åƒåœ¾å›æ”¶&#34;&gt;æ‰‹åŠ¨åƒåœ¾å›æ”¶&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;éœ€è¦ç¨‹åºä¸»åŠ¨é‡Šæ”¾æ²¡æœ‰ç”¨çš„æ•°æ®æ‰€åœ¨çš„å †ç©ºé—´ã€‚å¦‚ï¼šc++ä¸­è°ƒç”¨new()å‡½æ•°å‘è®¡ç®—æœºç”³è¯·å¼€è¾Ÿå†…å­˜ç©ºé—´åï¼Œä½¿ç”¨deleteæˆ–delete[]é‡Šæ”¾ä¸éœ€è¦çš„
å †å†…å­˜ç©ºé—´ã€‚è¿™ä¸€ç±»æ˜¯æ‰‹åŠ¨å†…å­˜åˆ†é…å’Œé‡Šæ”¾ã€‚æ‰‹åŠ¨å†…å­˜åˆ†é…ä½¿ç”¨ä¸æ°å½“ä¹Ÿä¼šé€ æˆï¼šå†…å­˜æ³„éœ²
æ‚¬æŒ‚æŒ‡é’ˆçš„é—®é¢˜&lt;/li&gt;
&lt;/ul&gt;
&lt;ol&gt;
&lt;li&gt;è¿‡æ—©é‡Šæ”¾ä¼šé€ æˆæ‚¬æŒ‚æŒ‡é’ˆï¼ˆé‡æŒ‡é’ˆï¼‰ï¼šæå‰é‡Šæ”¾äº†åŠ¨æ€çš„å †å†…å­˜çš„ç©ºé—´ï¼Œå½“ç¨‹åºè®¿é—®è¿™æ®µåœ°å€æ—¶ä¼šæŠ¥é”™ã€‚å› ä¸ºè¿™æ®µæå‰é‡Šæ”¾çš„å†…å­˜ç©ºé—´è¢«æ¸…ç©ºã€
é‡æ–°åˆ†é…æˆ–è€…è¢«æ“ä½œç³»ç»Ÿå›æ”¶ã€‚é‡Šæ”¾æŒ‡é’ˆæ—¶å°†æŒ‡é’ˆèµ‹å€¼ä¸ºNULLï¼Œåœ¨è®¿é—®æ—¶å¯¹æŒ‡é’ˆè¿›è¡Œåˆ¤æ–­æ˜¯å¦ä¸ºNULL&lt;/li&gt;
&lt;li&gt;ä¸é‡Šæ”¾å†…å­˜ä¼šé€ æˆå†…å­˜æ³„æ¼ï¼šå †å†…å­˜éœ€è¦æ‰‹åŠ¨é‡Šæ”¾ï¼Œå½“ç¨‹åºè¿è¡Œç»“æŸä¸é‡Šæ”¾ï¼Œè¿™æ®µå†…å­˜å°±ä¼šè¢«ä¸€ç›´å ç”¨ã€‚å¦‚æœ
ä¸€ç›´åœ¨åˆ†é…ä¸é‡Šæ”¾ä¼šä¸€ç›´å ç”¨è®¡ç®—æœºçš„å†…å­˜ï¼Œç›´åˆ°å†…å­˜è¢«å å®Œã€‚å°†newä¸deleteé…å¥—ä½¿ç”¨ï¼Œä½¿ç”¨å·¥å…·æ£€æµ‹æˆ–è€…æ‰“å°å‡ºå †ä¿¡æ¯&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;è‡ªåŠ¨åƒåœ¾å›æ”¶gc&#34;&gt;è‡ªåŠ¨åƒåœ¾å›æ”¶ï¼ˆGCï¼‰&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;åœ¨ç¨‹åºè¿è¡Œè¿‡ç¨‹ä¸­è‡ªåŠ¨é‡Šæ”¾æ²¡æœ‰ç”¨çš„æ•°æ®æ‰€åœ¨çš„å †ç©ºé—´ï¼ˆåƒåœ¾å›æ”¶).åœ¨è™šæ‹Ÿå†…å­˜ç©ºé—´ä¸­èƒ½ä»æ ˆæˆ–è€…æ•°æ®æ®µçš„æ ¹èŠ‚ç‚¹è¿½è¸ªä¸åˆ°çš„æ•°æ®ä¸ºæ²¡ç”¨çš„æ•°æ®
ï¼ˆå†…å­˜åƒåœ¾ï¼‰ï¼Œå¸¸ç”¨çš„ç®—æ³•ï¼šæ ‡è®°æ³•, è®¡æ•°æ³•&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;æ ‡è®°æ³•å›æ”¶&#34;&gt;æ ‡è®°æ³•å›æ”¶&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;æ ‡è®°æ³•ï¼šå°†æ ˆæˆ–è€…æ•°æ®æ®µä½œä¸ºæ ¹ï¼ˆrootï¼‰è¿›è¡Œè¿½è¸ª,å°†èƒ½è¿½è¸ªå¾—çš„æ•°æ®ï¼ˆå †ç©ºé—´ï¼‰è¿›è¡Œæ ‡è®°ã€‚æ²¡æœ‰è¢«æ ‡è®°çš„æ•°æ®
ï¼ˆå †ç©ºé—´ï¼‰å°±æ˜¯åƒåœ¾ï¼Œå°†è¿™éƒ¨åˆ†åƒåœ¾è¿›è¡Œå›æ”¶ã€‚ä¸‰è‰²æŠ½è±¡ï¼š&lt;/li&gt;
&lt;/ul&gt;
&lt;ol&gt;
&lt;li&gt;åƒåœ¾å›æ”¶å¼€å§‹æ—¶ï¼Œå°†æ‰€æœ‰æ•°æ®ä¸ºç™½è‰²&lt;/li&gt;
&lt;li&gt;åƒåœ¾å›æ”¶å¼€å§‹æ—¶ï¼Œå°†æ‰€æœ‰çš„æ ˆæˆ–è€…æ•°æ®æ®µçš„æ ¹èŠ‚ç‚¹è®¾ç½®ä¸ºç°è‰²&lt;/li&gt;
&lt;li&gt;åœ¨æ ¹æ®æ ¹èŠ‚ç‚¹è¿›è¡Œè¿½è¸ªï¼Œç›´åˆ°æ‰€æœ‰çš„æ•°æ®èŠ‚ç‚¹è¿½è¸ªç»“æŸåå°†æ ¹èŠ‚ç‚¹ç½®ä¸ºé»‘è‰²ï¼Œåœ¨å°†æ ¹èŠ‚ç‚¹çš„ä¸‹ä¸€èŠ‚ç‚¹ä½œä¸ºæ ¹èŠ‚ç‚¹è¿›è¡Œè¿½è¸ª&lt;/li&gt;
&lt;li&gt;æ‰€æœ‰çš„æ•°æ®èŠ‚ç‚¹éƒ½è¿½è¸ªå®Œåï¼Œä¼šå‰©ä¸‹é»‘è‰²å’Œç™½è‰²çš„æ•°æ®èŠ‚ç‚¹ã€‚é»‘è‰²è¡¨ç¤ºæœ‰ç”¨çš„æ•°æ®ã€‚ç™½è‰²ä¸ºæ— ç”¨çš„æ•°æ®ã€‚å°†ç™½è‰²çš„æ•°æ®è¿›è¡Œå›æ”¶ï¼ˆå †ç©ºé—´çš„é‡Šæ”¾ï¼‰
&lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 106; 
			flex-basis: 256px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86/2.png&#34; data-size=&#34;739x692&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86/2.png&#34;
			width=&#34;739&#34;
			height=&#34;692&#34;
			srcset=&#34;https://zcj-git520.github.io/p/%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86/2_hue8f862e9d9f89ba7caf7892b05f14474_215690_480x0_resize_box_3.png 480w, https://zcj-git520.github.io/p/%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86/2_hue8f862e9d9f89ba7caf7892b05f14474_215690_1024x0_resize_box_3.png 1024w&#34;
			loading=&#34;lazy&#34;
			&gt;
	&lt;/a&gt;
	
&lt;/figure&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;ul&gt;
&lt;li&gt;æ ‡è®°æ³•å®ç°ç®€å•ï¼Œä½†æ˜¯ä¼šé€ æˆå†…å­˜çš„ç¢ç‰‡åŒ–(å†…å­˜å—ä¸­æ˜¯å¯ä½¿ç”¨å°å†…å­˜å—ï¼Œé€ æˆå¤§å†…å­˜å—ä¸èƒ½ä½¿ç”¨è¿™å—å†…å­˜ï¼Œè¿™äº›å°å°å†…å­˜å—ä¹Ÿä¸èƒ½ä½¿ç”¨)&lt;/li&gt;
&lt;li&gt;å› ä¸ºå†…å­˜ç¢ç‰‡åŒ–çš„é—®é¢˜è¯ç”Ÿäº†&lt;/li&gt;
&lt;/ul&gt;
&lt;ol&gt;
&lt;li&gt;æ ‡è®°æ•´ç†æ³•ï¼Œå°±æ˜¯æ ‡è®°æ³•ä¹‹åï¼Œå°†æœ‰ç”¨çš„æ•°æ®å †å†…å­˜ç©ºé—´ç§»åŠ¨åœ¨ä¸€èµ·ï¼Œé‡Šæ”¾æ›´å¤šè¿ç»­çš„å †ç©ºé—´,ä½†æ˜¯è¿™ç§åšæ³•å¸¦æ¥
å¾ˆå¤§çš„å¼€é”€ï¼Œå› ä¸ºéœ€è¦ä¸æ–­çš„æ‰«æå†…å­˜å’Œç§»åŠ¨å†…å­˜&lt;/li&gt;
&lt;li&gt;å¤åˆ¶å›æ”¶æ³•ã€‚å°†å †å†…å­˜åˆ†ä¸ºfromå’ŒToä¸¤ä¸ªç›¸åŒçš„å †å†…å­˜ç©ºé—´ã€‚ç¨‹åºæ‰§è¡Œæ—¶ï¼Œä½¿ç”¨fromçš„å †ç©ºé—´ã€‚åƒåœ¾å›æ”¶æ—¶ä¼šæ‰«æfrom
çš„å †å†…å­˜ç©ºé—´ï¼Œå°†æœ‰ç”¨çš„æ•°æ®å¤åˆ¶åˆ°Toçš„å †ç©ºé—´ä¸Šã€‚åƒåœ¾å›æ”¶ç»“æŸæ—¶ï¼Œå°†Toå †ç©ºé—´è®¾ç½®ä¸ºFromå †ç©ºé—´ã€‚å°†åŸæ¥çš„from
å †ç©ºé—´å…¨éƒ¨å›æ”¶åç½®ä¸ºTonå †ç©ºé—´ã€‚ä½†æ˜¯å¤åˆ¶å›æ”¶æ³•åªä¼šä½¿ç”¨ä¸€èˆ¬çš„å †å†…å­˜ç©ºé—´ï¼Œé€ æˆå †å†…å­˜ç©ºé—´åˆ©ç”¨ç‡ä¸é«˜  &lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 190; 
			flex-basis: 456px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86/3.png&#34; data-size=&#34;746x392&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86/3.png&#34;
			width=&#34;746&#34;
			height=&#34;392&#34;
			srcset=&#34;https://zcj-git520.github.io/p/%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86/3_hu871100705c5f0bb9545d50108b3adbcf_40782_480x0_resize_box_3.png 480w, https://zcj-git520.github.io/p/%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86/3_hu871100705c5f0bb9545d50108b3adbcf_40782_1024x0_resize_box_3.png 1024w&#34;
			loading=&#34;lazy&#34;
			&gt;
	&lt;/a&gt;
	
&lt;/figure&gt;&lt;/li&gt;
&lt;li&gt;åˆ†ä»£æ³•å›æ”¶ï¼šå¤§éƒ¨åˆ†å¯¹è±¡éƒ½ä¼šåœ¨å¹´è½»æ—¶å€™æ­»äº¡ï¼ˆå¼±åˆ†ä»£å‡è¯´ï¼‰æŠŠæ–°å»ºçš„å¯¹è±¡ç§°ä¹‹ä¸ºæ–°ç”Ÿä»£å¯¹è±¡ã€‚ç»è¿‡ç‰¹å®šæ¬¡æ•°çš„GC(åƒåœ¾å›æ”¶)æ•°æ®ä¾ç„¶æœ‰ç”¨çš„å¯¹è±¡ç§°ä¸º
è€å¹´ä»£å¯¹è±¡ã€‚è€Œå¤§éƒ¨åˆ†ä¼šåœ¨æ–°ç”Ÿä»£å¯¹è±¡å°±ä¼šåƒåœ¾å›æ”¶äº†ï¼Œåœ¨ç»“åˆå¤åˆ¶å›æ”¶æ³•ä½¿ç”¨  &lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 165; 
			flex-basis: 397px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86/4.png&#34; data-size=&#34;1202x725&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86/4.png&#34;
			width=&#34;1202&#34;
			height=&#34;725&#34;
			srcset=&#34;https://zcj-git520.github.io/p/%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86/4_hude966255b53ebc705801aec78916c5d7_175139_480x0_resize_box_3.png 480w, https://zcj-git520.github.io/p/%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86/4_hude966255b53ebc705801aec78916c5d7_175139_1024x0_resize_box_3.png 1024w&#34;
			loading=&#34;lazy&#34;
			&gt;
	&lt;/a&gt;
	
&lt;/figure&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;h4 id=&#34;è®¡æ•°æ³•å›æ”¶&#34;&gt;è®¡æ•°æ³•å›æ”¶&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;å¼•ç”¨è®¡æ•°æŒ‡çš„æ˜¯å¯¹è±¡è¢«å¼•ç”¨çš„æ¬¡æ•°ï¼Œç¨‹åºåœ¨è¿è¡Œè¿‡ç¨‹ä¸­ä¼šæ›´æ–°å¼•ç”¨æ¬¡æ•°ã€‚å¯¹è±¡å¼•ç”¨è¶Šå¤šï¼Œè®¡æ•°è¶Šå¤§ï¼Œå½“è®¡æ•°ä¸º0æ—¶ï¼Œå›æ”¶è¯¥å¯¹è±¡ï¼ˆå †å†…å­˜ç©ºé—´ï¼‰
å¼•ç”¨è®¡æ•°æ³•å¯ä»¥åœ¨è¿è¡Œä¸­æ›´æ–°å¯¹è±¡çš„è®¡æ•°ï¼Œå¯ä»¥åŠæ—¶åˆ¤æ–­è®¡æ•°ä¸º 0çš„å¯¹è±¡ï¼Œç„¶åå¯¹å…¶åŠæ—¶å›æ”¶ï¼Œ ä½†æ˜¯é¢‘ç¹çš„æ›´æ–°å¼•ç”¨è®¡æ•°ä¹Ÿä¼šå¸¦æ¥èµ„æºæ¶ˆè€—  &lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 103; 
			flex-basis: 248px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86/5.png&#34; data-size=&#34;712x688&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86/5.png&#34;
			width=&#34;712&#34;
			height=&#34;688&#34;
			srcset=&#34;https://zcj-git520.github.io/p/%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86/5_hu5f49777c171d0884056300bcd3c13161_71471_480x0_resize_box_3.png 480w, https://zcj-git520.github.io/p/%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86/5_hu5f49777c171d0884056300bcd3c13161_71471_1024x0_resize_box_3.png 1024w&#34;
			loading=&#34;lazy&#34;
			&gt;
	&lt;/a&gt;
	
&lt;/figure&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;åƒåœ¾å›æ”¶æ¨¡å¼&#34;&gt;åƒåœ¾å›æ”¶æ¨¡å¼&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;å¢é‡å¼çš„åƒåœ¾å›æ”¶æ¨¡å¼ï¼šSWTæ˜¯ç”¨æˆ·æ‰¿ç¨‹åºåœä¸‹å·¥ä½œå¤„ç†åƒåœ¾å›æ”¶ï¼Œä½†æ˜¯ä¸ºäº†æé«˜cpuæ‰§è¡Œæ•ˆç‡ï¼Œä¼šå‡å°‘SWTçš„æ—¶é—´ï¼Œç»åƒåœ¾å›æ”¶å·¥ä½œåˆ†å¤šæ¬¡è¿›è¡Œï¼ˆç”¨æˆ·ç¨‹åºä¸åƒåœ¾å›æ”¶äº¤æ›¿æ‰§è¡Œï¼‰&lt;/li&gt;
&lt;li&gt;ä¸‰è‰²ä¸å˜å¼ï¼šåœ¨å¢é‡å¼åƒåœ¾å›æ”¶æ¨¡å¼åœ¨è¿›è¡Œåƒåœ¾å›æ”¶æ—¶ï¼Œä¼šé€ æˆç”¨æˆ·ç¨‹åºå¯¹æ ‡è‰²çš„æ•°æ®è¿›è¡Œæ›´æ”¹ï¼Œå½“åœ¨æ¬¡æ‰§è¡Œåƒåœ¾å›æ”¶æ—¶ï¼Œå¯èƒ½ä¼šå°†æœ‰ç”¨çš„æ•°æ®å½“ä½œåƒåœ¾å›æ”¶äº†ï¼Œåœ¨æ ‡è‰²æ³•ä¸­ï¼Œå½“é»‘è‰²æ•°æ®èŠ‚ç‚¹å¯ä»¥å¼•ç”¨ç™½è‰²çš„æ•°æ®èŠ‚ç‚¹ï¼Œä½†æ˜¯æ²¡æœ‰ç°è‰²èŠ‚ç‚¹èƒ½å¼•ç”¨è¿™ä¸ªç™½è‰²èŠ‚ç‚¹ï¼Œç™½è‰²æ•°æ®èŠ‚ç‚¹å°±è¢«å½“ä½œåƒåœ¾è¢«å›æ”¶
é¿å…è¿™æ ·çš„å‘ç”Ÿï¼Œåœ¨åƒåœ¾å›æ”¶æ—¶å»ºç«‹è¯»å†™å±éšœã€‚åœ¨ä¸‰è‰²ä¸­ç¡®ä¿é»‘è‰²çš„æ•°æ®èŠ‚ç‚¹ä¸å¼•ç”¨ç™½è‰²çš„æ•°æ®èŠ‚ç‚¹ï¼Œå°±ä¸ä¼šè¯¯åˆ¤æœ‰ç”¨çš„æ•°æ®å½“ä½œåƒåœ¾å›æ”¶äº†ï¼Œè¿™ç§å«åšï¼šå¼ºä¸‰è‰²ä¸å˜å¼
å¦‚æœå½“é»‘è‰²çš„æ•°æ®èŠ‚ç‚¹èƒ½å¼•ç”¨ç™½è‰²æ•°æ®èŠ‚ç‚¹ï¼ŒåŒæ—¶ç¡®ä¿å›æ”¶èŠ‚ç‚¹ä¹Ÿèƒ½å¼•ç”¨ç™½è‰²èŠ‚ç‚¹ï¼Œä¹Ÿèƒ½é¿å…æœ‰ç”¨çš„æ•°æ®è¢«å½“ä½œåƒåœ¾å›æ”¶ï¼Œè¿™å«ï¼šå¼±ä¸‰è‰²ä¸å˜å¼  &lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 177; 
			flex-basis: 425px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86/6.png&#34; data-size=&#34;1302x734&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86/6.png&#34;
			width=&#34;1302&#34;
			height=&#34;734&#34;
			srcset=&#34;https://zcj-git520.github.io/p/%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86/6_hu61bd622d583377d86db238f2ea3bdaa9_262966_480x0_resize_box_3.png 480w, https://zcj-git520.github.io/p/%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86/6_hu61bd622d583377d86db238f2ea3bdaa9_262966_1024x0_resize_box_3.png 1024w&#34;
			loading=&#34;lazy&#34;
			&gt;
	&lt;/a&gt;
	
&lt;/figure&gt;&lt;/li&gt;
&lt;li&gt;å¹¶è¡Œåƒåœ¾å›æ”¶ï¼šåœ¨å¤šæ ¸ä¸‹ï¼Œä½¿ç”¨å¤šçº¿ç¨‹å¯¹åƒåœ¾å›æ”¶ï¼Œéœ€è¦åšå¥½çš„è´Ÿè½½å‡è¡¡å’Œè§„é¿æ•°é‡å¤å¤„ç†å¸¦æ¥çš„é—®é¢˜ï¼Œå¦‚åœ¨å¤åˆ¶å›æ”¶ä¸­ï¼Œå¯èƒ½å°†åŒæ ·çš„æ•°æ®ä»fromå¤åˆ¶åˆ°to&lt;/li&gt;
&lt;li&gt;å¹¶å‘åƒåœ¾å›æ”¶ï¼šåƒåœ¾å›æ”¶ä¸ç”¨æˆ·ç¨‹åºå¹¶å‘æ‰§è¡Œï¼Œå¯èƒ½ä¼šé€ æˆåƒåœ¾å›æ”¶ä¸ç”¨æˆ·ç¨‹åºçš„èµ„æºç«äº‰ç­‰é—®é¢˜ç­‰&lt;/li&gt;
&lt;li&gt;ä¸»ä½“å¹¶å‘å›æ”¶ï¼šåœ¨æ—¶åˆ»ä½¿ç”¨swtå›æ”¶ï¼Œåœ¨è«æ—¶åˆ»åˆä½¿ç”¨å¹¶å‘åƒåœ¾å›æ”¶&lt;/li&gt;
&lt;li&gt;ä¸»ä½“å¹¶å‘å¢é‡å¼å›æ”¶: æ˜¯èåˆäº†å¢é‡å¼çš„åƒåœ¾å›æ”¶æ¨¡å¼å’Œä¸»ä½“å¹¶å‘å›æ”¶æ¨¡å¼  &lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 67; 
			flex-basis: 161px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86/7.png&#34; data-size=&#34;549x817&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86/7.png&#34;
			width=&#34;549&#34;
			height=&#34;817&#34;
			srcset=&#34;https://zcj-git520.github.io/p/%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86/7_hu9a89830b3bbfb2c96296aa9cbf536ee0_141902_480x0_resize_box_3.png 480w, https://zcj-git520.github.io/p/%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86/7_hu9a89830b3bbfb2c96296aa9cbf536ee0_141902_1024x0_resize_box_3.png 1024w&#34;
			loading=&#34;lazy&#34;
			&gt;
	&lt;/a&gt;
	
&lt;/figure&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;å‚è€ƒæ–‡çŒ®&#34;&gt;å‚è€ƒæ–‡çŒ®&lt;/h2&gt;
&lt;p&gt;1.&lt;a class=&#34;link&#34; href=&#34;https://www.zhihu.com/people/kylin-lab&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://www.zhihu.com/people/kylin-lab&lt;/a&gt;&lt;/p&gt;
</description>
        </item>
        <item>
        <title>Go Channelçš„æ·±å…¥ç†è§£</title>
        <link>https://zcj-git520.github.io/p/go-channel%E7%9A%84%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3/</link>
        <pubDate>Fri, 15 Oct 2021 22:00:38 +0800</pubDate>
        
        <guid>https://zcj-git520.github.io/p/go-channel%E7%9A%84%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3/</guid>
        <description>&lt;img src="https://zcj-git520.github.io/p/go-channel%E7%9A%84%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3/3.png" alt="Featured image of post Go Channelçš„æ·±å…¥ç†è§£" /&gt;&lt;h1 id=&#34;go-channel&#34;&gt;go Channel&lt;/h1&gt;
&lt;ul&gt;
&lt;li&gt;ï¼ˆ&lt;strong&gt;Do not communicate by sharing memory; instead, share memory by communicating&lt;/strong&gt;ï¼‰&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;cspå¹¶å‘æ¨¡å‹&#34;&gt;CSPå¹¶å‘æ¨¡å‹&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;CSP&lt;/strong&gt; å³&lt;strong&gt;é€šä¿¡é¡ºåºè¿›ç¨‹&lt;/strong&gt;ã€&lt;strong&gt;äº¤è°ˆå¾ªåºç¨‹åº&lt;/strong&gt;ï¼Œåˆè¢«è¯‘ä¸º&lt;strong&gt;äº¤æ¢æ¶ˆæ¯çš„å¾ªåºç¨‹åº&lt;/strong&gt;(communicating sequential processes)ï¼Œå®ƒæ˜¯ä¸€ç§ç”¨æ¥æè¿°å¹¶å‘æ€§ç³»ç»Ÿä¹‹é—´è¿›è¡Œäº¤äº’çš„æ¨¡å‹ã€‚&lt;/li&gt;
&lt;li&gt;go  Channeæ˜¯ä¸€ç§ç‰¹æ®Šçš„ç±»å‹ï¼Œæ˜¯æœ‰ç‰¹å®šç±»å‹çš„é˜Ÿåˆ—ã€‚æ˜¯é“¾æ¥goroutine(åç¨‹)çš„é€šä¿¡æœºåˆ¶ï¼Œé€šè¿‡é€šä¿¡å…±äº«å†…å­˜è€Œä¸æ˜¯é€šè¿‡å…±äº«å†…å­˜è€Œå®ç°é€šä¿¡.&lt;/li&gt;
&lt;li&gt;Channel æ”¶å‘æ“ä½œå‡éµå¾ªäº†å…ˆè¿›å…ˆå‡ºçš„è®¾è®¡ï¼Œå…·ä½“è§„åˆ™å¦‚ä¸‹ï¼š
&lt;ol&gt;
&lt;li&gt;å…ˆä» Channel è¯»å–æ•°æ®çš„ Goroutine ä¼šå…ˆæ¥æ”¶åˆ°æ•°æ®ï¼›&lt;/li&gt;
&lt;li&gt;å…ˆå‘ Channel å‘é€æ•°æ®çš„ Goroutine ä¼šå¾—åˆ°å…ˆå‘é€æ•°æ®çš„æƒåˆ©ï¼›&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 324; 
			flex-basis: 779px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/go-channel%E7%9A%84%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3/1.png&#34; data-size=&#34;646x199&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/go-channel%E7%9A%84%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3/1.png&#34;
			width=&#34;646&#34;
			height=&#34;199&#34;
			srcset=&#34;https://zcj-git520.github.io/p/go-channel%E7%9A%84%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3/1_hu9f71752e01ad0714d9e001d394dc9e2e_27512_480x0_resize_box_3.png 480w, https://zcj-git520.github.io/p/go-channel%E7%9A%84%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3/1_hu9f71752e01ad0714d9e001d394dc9e2e_27512_1024x0_resize_box_3.png 1024w&#34;
			loading=&#34;lazy&#34;
			&gt;
	&lt;/a&gt;
	
&lt;/figure&gt;&lt;/p&gt;
&lt;h2 id=&#34;channel-æ•°æ®ç»“æ„å®šä¹‰&#34;&gt;channel æ•°æ®ç»“æ„å®šä¹‰ï¼š&lt;/h2&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;type hchan struct {
	// é˜Ÿåˆ—ä¸­å­˜å‚¨çš„æ•°é‡
	qcount   uint           // total data in the queue
	//ç¯å½¢é˜Ÿåˆ—çš„å¤§å°(æœ€å¤§å­˜å‚¨æ•°é‡ )
	dataqsiz uint           // size of the circular queue
	// å­˜æ”¾ç¯å½¢é˜Ÿåˆ—çš„æ•°æ®ï¼Œæ•°ç»„
	buf      unsafe.Pointer // points to an array of dataqsiz elements
	// å…ƒç´ çš„å¤§å°
	elemsize uint16
	// æ˜¯å¦å…³é—­çš„æ ‡è¯†
	closed   uint32
	// å…ƒç´ çš„ç±»å‹(æŒ‡å‘ç±»å‹çš„å…ƒæ•°æ® )
	elemtype *_type // element type
	// å½“å‰å‘é€æ•°æ®åœ¨ç¯å½¢é˜Ÿåˆ—çš„ç´¢å¼•
	sendx    uint   // send index
	// å½“å‰æ¥å—æ•°æ®åœ¨ç¯å½¢é˜Ÿåˆ—çš„ç´¢å¼• 
	recvx    uint   // receive index
	// æ¥æ”¶è€…ç­‰å¾…é˜Ÿåˆ—ï¼ˆ&amp;lt;-chï¼‰é˜»å¡åœ¨channelçš„åç¨‹é˜Ÿåˆ—
	recvq    waitq  // list of recv waiters
	// å‘é€è€…ç­‰å¾…é˜Ÿåˆ—ï¼ˆch&amp;lt;- dataï¼‰é˜»å¡åœ¨channelçš„åç¨‹é˜Ÿåˆ—
	sendq    waitq  // list of send waiters
	//é”ä¿æŠ¤hchanä¸­çš„æ‰€æœ‰å­—æ®µï¼Œä»¥åŠå‡ ä¸ª
	//åœ¨è¿™ä¸ªé€šé“ä¸Šé˜»å¡sudogsä¸­çš„å­—æ®µ
	//ä¿æŒè¿™ä¸ªé”æ—¶ä¸è¦æ”¹å˜å¦ä¸€ä¸ªGçš„çŠ¶æ€
	//(ç‰¹åˆ«æ˜¯ï¼Œä¸è¦å‡†å¤‡ä¸€ä¸ªG)ï¼Œå› ä¸ºè¿™å¯èƒ½ä¼šæ­»é”
	//æ ˆæ”¶ç¼©ã€‚
	lock mutex  // ä¿æŠ¤hchanä¸­çš„æ‰€æœ‰å­—æ®µï¼Œä¿æŒåç¨‹çš„çŠ¶æ€ä¸è¢«æ›´æ”¹ï¼Œé¿å…é€ æˆæ ˆæ”¶ç¼©å¼•èµ·çš„æ­»é”ï¼Œä½¿ç”¨äº’æ–¥é”è§£å†³ç¨‹åºä¸­å¯èƒ½å­˜åœ¨çš„çº¿ç¨‹ç«äº‰é—®é¢˜æ˜¯å¾ˆå¸¸è§çš„
}
&lt;/code&gt;&lt;/pre&gt;&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;å‘é€è€…/æ¥æ”¶è€…ç­‰å¾…é˜Ÿåˆ—çš„ç»“æ„ï¼šä¸€ä¸ªåŒå‘é“¾è¡¨
type waitq struct {
	first *sudog
	last  *sudog
}
&lt;/code&gt;&lt;/pre&gt;&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;channel  sudog(ç­‰å¾…é˜Ÿåˆ—)ç»“æ„å¦‚ä¸‹
type sudog struct {
	// The following fields are protected by the hchan.lock of the
	// channel this sudog is blocking on. shrinkstack depends on
	// this for sudogs involved in channel ops.
	//ä»¥ä¸‹å­—æ®µå—hchanä¿æŠ¤ã€‚é”çš„
  	//è¿™ä¸ªsudogæ­£åœ¨é˜»å¡ã€‚shrinkstackå–å†³äº
	//è¿™æ˜¯ä¸ºæ¶‰åŠé€šé“æ“ä½œçš„sudogsã€‚

	g *g  // ç­‰å¾…çš„åç¨‹åç¨‹
	next *sudog
	prev *sudog
	// æ•°æ®å…ƒç´ (å¯ä»¥æŒ‡å‘å †æ ˆ)ï¼Œç­‰å¾…å‘é€/æ¥æ”¶çš„æ•°æ®
	elem unsafe.Pointer // data element (may point to stack)

	// The following fields are never accessed concurrently.
	// For channels, waitlink is only accessed by g.
	// For semaphores, all fields (including the ones above)
	// are only accessed when holding a semaRoot lock.
	//ä¸‹é¢çš„å­—æ®µæ°¸è¿œä¸ä¼šå¹¶å‘è®¿é—®ã€‚
   	//å¯¹äºé€šé“ï¼Œwaitlinkåªè¢«gè®¿é—®ã€‚
	//å¯¹äºä¿¡å·é‡ï¼Œæ‰€æœ‰çš„å­—æ®µ(åŒ…æ‹¬ä¸Šé¢çš„å­—æ®µ)
	//åªåœ¨æŒæœ‰semaRooté”æ—¶è®¿é—®ã€‚
	acquiretime int64
	releasetime int64
	ticket      uint32

	// isSelect indicates g is participating in a select, so
	// g.selectDone must be CAS&#39;d to win the wake-up race.
	// è¡¨ç¤ºgè¢«é€‰æ‹©
	isSelect bool

	// success indicates whether communication over channel c
	// succeeded. It is true if the goroutine was awoken because a
	// value was delivered over channel c, and false if awoken
	// because c was closed.
	//æˆåŠŸè¡¨ç¤ºæ˜¯å¦é€šè¿‡é€šé“cé€šä¿¡
	// æˆåŠŸäº†ã€‚ å¦‚æœ goroutine è¢«å”¤é†’æ˜¯å› ä¸ºä¸€ä¸ª
	// å€¼é€šè¿‡é€šé“ c ä¼ é€’ï¼Œå¦‚æœè¢«å”¤é†’åˆ™è¿”å› false
	// å› ä¸º c è¢«å…³é—­äº†
	success bool  // c å› å…³é—­è€Œå”¤é†’

	parent   *sudog // semaRoot binary tree
	waitlink *sudog // g.waiting list or semaRoot
	waittail *sudog // semaRoot
    // ç­‰å¾…çš„channelè¢«å”¤é†’
	c        *hchan // channel
}
&lt;/code&gt;&lt;/pre&gt;&lt;ul&gt;
&lt;li&gt;ç»“æ„å¦‚å›¾æ‰€ç¤º
&lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 188; 
			flex-basis: 451px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/go-channel%E7%9A%84%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3/3.png&#34; data-size=&#34;1618x860&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/go-channel%E7%9A%84%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3/3.png&#34;
			width=&#34;1618&#34;
			height=&#34;860&#34;
			srcset=&#34;https://zcj-git520.github.io/p/go-channel%E7%9A%84%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3/3_huc32f323c0433538c753e80bb5a9a01bb_276268_480x0_resize_box_3.png 480w, https://zcj-git520.github.io/p/go-channel%E7%9A%84%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3/3_huc32f323c0433538c753e80bb5a9a01bb_276268_1024x0_resize_box_3.png 1024w&#34;
			loading=&#34;lazy&#34;
			&gt;
	&lt;/a&gt;
	
&lt;/figure&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;channel-åˆ›å»º&#34;&gt;channel åˆ›å»º&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;channel å’Œ åˆ‡ç‰‡ã€mapä¸€æ ·ï¼Œéœ€è¦ä½¿ç”¨make(chan type, int )æ‰èƒ½ä½¿ç”¨,åº”ä¸ºmake()ä¼šè°ƒç”¨makeChan()åˆå§‹åŒ–&lt;/li&gt;
&lt;/ul&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;makechå‡½æ•°æºç å¦‚ä¸‹:
// å‚æ•°ç±»å‹ï¼šåˆ›å»ºchançš„ç±»å‹å’Œç¯å‹ç¼“å†²åŒºçš„æ•°é‡
func makechan(t *chantype, size int) *hchan {
	elem := t.elem

	// compiler checks this but be safe.
	if elem.size &amp;gt;= 1&amp;lt;&amp;lt;16 {
		throw(&amp;quot;makechan: invalid channel element type&amp;quot;)
	}
	if hchanSize%maxAlign != 0 || elem.align &amp;gt; maxAlign {
		throw(&amp;quot;makechan: bad alignment&amp;quot;)
	}
	//åˆ¤æ–­ç¯å‹ç¼“å†²åŒºæ˜¯å¦æº¢å‡º
	mem, overflow := math.MulUintptr(elem.size, uintptr(size))
	if overflow || mem &amp;gt; maxAlloc-hchanSize || size &amp;lt; 0 {
		panic(plainError(&amp;quot;makechan: size out of range&amp;quot;))
	}

	// Hchan does not contain pointers interesting for GC when elements stored in buf do not contain pointers.
	// buf points into the same allocation, elemtype is persistent.
	// SudoG&#39;s are referenced from their owning thread so they can&#39;t be collected.
	// TODO(dvyukov,rlh): Rethink when collector can move allocated objects.
	var c *hchan
	switch {
	case mem == 0:
		// Queue or element size is zero.
		// å½“é˜Ÿåˆ—æˆ–è€…å…ƒç´ å¤§å°ä¸º0æ—¶ï¼Œå®šä¹‰æ— ç¼“å†²chanï¼ˆåŒæ­¥chanï¼‰
		c = (*hchan)(mallocgc(hchanSize, nil, true))
		// Race detector uses this location for synchronization.
        // Race ç«äº‰æ£€æŸ¥åˆ©ç”¨è¿™ä¸ªåœ°å€æ¥è¿›è¡ŒåŒæ­¥æ“ä½œ
		c.buf = c.raceaddr()
	case elem.ptrdata == 0:
		// Elements do not contain pointers.
		// Allocate hchan and buf in one call.
        // å…ƒç´ ä¸åŒ…å«æŒ‡é’ˆæ—¶ã€‚ä¸€æ¬¡åˆ†é… hchan å’Œ buf çš„å†…å­˜ã€‚
		c = (*hchan)(mallocgc(hchanSize+mem, nil, true))
		c.buf = add(unsafe.Pointer(c), hchanSize)
	default:
		// Elements contain pointers.
        // å®šä¹‰å¸¦ç¼“å­˜çš„chanæˆ–è€…å¼‚æ­¥çš„chan
		c = new(hchan)
		c.buf = mallocgc(mem, elem, true)
	}

	c.elemsize = uint16(elem.size)  // chanå…ƒç´ çš„å¤§å°
	c.elemtype = elem               // chanå…ƒç´ çš„ç±»å‹
	c.dataqsiz = uint(size)        //  chanç¼“å­˜åŒºå¤§å°
	lockInit(&amp;amp;c.lock, lockRankHchan)  //åˆå§‹åŒ–äº’æ–¥é”

	if debugChan {
		print(&amp;quot;makechan: chan=&amp;quot;, c, &amp;quot;; elemsize=&amp;quot;, elem.size, &amp;quot;; dataqsiz=&amp;quot;, size, &amp;quot;\n&amp;quot;)
	}
	return c
}
&lt;/code&gt;&lt;/pre&gt;&lt;ul&gt;
&lt;li&gt;channelåˆ›å»ºè¿‡ç¨‹ï¼š&lt;/li&gt;
&lt;/ul&gt;
&lt;ol&gt;
&lt;li&gt;ç¼–è¯‘æ£€æŸ¥ã€ç¼“å†²åŒºå¤§å°æ£€æŸ¥ï¼Œåˆ¤æ–­æ˜¯å¦æº¢å‡º&lt;/li&gt;
&lt;li&gt;åˆ¤æ–­chançš„ç±»å‹&lt;br&gt;
1ã€å½“åˆ›å»ºæ— ç¼“å†²chanæ—¶,è°ƒç”¨mallocgc()åœ¨å †ä¸Šä¸ºchanå¼€è¾ŸhchanSizeçš„bufç¼“å­˜å†…å­˜ç©ºé—´&lt;br&gt;
2ã€åˆ›å»ºå¸¦ç¼“å†²çš„chanæ—¶,åˆ¤æ–­å…ƒç´ çš„ç±»å‹æ˜¯å¦ä¸ºæŒ‡é’ˆç±»å‹ï¼Œè‹¥ä¸æ˜¯ï¼Œåˆ™mallocgc()åœ¨å †ä¸Šä¸ºchanå’Œbufç¼“å†²åŒºæ•°ç»„å¼€è¾Ÿä¸€æ®µå¤§å°ä¸º hchanSize+memè¿ç»­çš„å†…å­˜ç©ºé—´ã€‚è‹¥æ˜¯åˆ™è°ƒç”¨mallocgc()åœ¨å †ä¸Šåˆ†åˆ«ä¸ºchanå’Œbufç¼“å†²åŒºåˆ†é…è¿ç»­å†…å­˜ç©ºé—´ã€‚
&lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 187; 
			flex-basis: 450px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/go-channel%E7%9A%84%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3/4.png&#34; data-size=&#34;1601x852&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/go-channel%E7%9A%84%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3/4.png&#34;
			width=&#34;1601&#34;
			height=&#34;852&#34;
			srcset=&#34;https://zcj-git520.github.io/p/go-channel%E7%9A%84%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3/4_hua8215d19cb3bccd8709e0a6c6f7245c2_228324_480x0_resize_box_3.png 480w, https://zcj-git520.github.io/p/go-channel%E7%9A%84%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3/4_hua8215d19cb3bccd8709e0a6c6f7245c2_228324_1024x0_resize_box_3.png 1024w&#34;
			loading=&#34;lazy&#34;
			&gt;
	&lt;/a&gt;
	
&lt;/figure&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&#34;channel-å‘é€æ•°æ®ä¸æ¥æ”¶æ•°æ®&#34;&gt;channel å‘é€æ•°æ®ä¸æ¥æ”¶æ•°æ®&lt;/h2&gt;
&lt;h3 id=&#34;channel-å‘é€æ•°æ®&#34;&gt;channel å‘é€æ•°æ®&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;chan &amp;lt;- data&lt;/li&gt;
&lt;/ul&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;chanå‘é€æ•°æ®æºç å¦‚ä¸‹:
func chansend(c *hchan, ep unsafe.Pointer, block bool, callerpc uintptr) bool {
    // åˆ¤æ–­chanæ˜¯å¦è¢«åˆå§‹åŒ–ï¼Œå‘chanä¸ºnilçš„chanå‘é€æ•°æ®å°†ä¼šæ°¸ä¹…é˜»å¡
	if c == nil {
		if !block {
			return false
		}
        // ä½¿å½“å‰çš„groutineä¼‘çœ 
		gopark(nil, nil, waitReasonChanSendNilChan, traceEvGoStop, 2)
		throw(&amp;quot;unreachable&amp;quot;)
	}

	if debugChan {
		print(&amp;quot;chansend: chan=&amp;quot;, c, &amp;quot;\n&amp;quot;)
	}
     // æ£€æŸ¥åœ¨æ²¡æœ‰è·å–é”çš„æƒ…å†µä¸‹ä¼šå¯¼è‡´å‘é€å¤±è´¥çš„éé˜»å¡æ“ä½œ
	if raceenabled {
		racereadpc(c.raceaddr(), callerpc, funcPC(chansend))
	}

	// Fast path: check for failed non-blocking operation without acquiring the lock.
	//
	// After observing that the channel is not closed, we observe that the channel is
	// not ready for sending. Each of these observations is a single word-sized read
	// (first c.closed and second full()).
	// Because a closed channel cannot transition from &#39;ready for sending&#39; to
	// &#39;not ready for sending&#39;, even if the channel is closed between the two observations,
	// they imply a moment between the two when the channel was both not yet closed
	// and not ready for sending. We behave as if we observed the channel at that moment,
	// and report that the send cannot proceed.
	//
	// It is okay if the reads are reordered here: if we observe that the channel is not
	// ready for sending and then observe that it is not closed, that implies that the
	// channel wasn&#39;t closed during the first observation. However, nothing here
	// guarantees forward progress. We rely on the side effects of lock release in
	// chanrecv() and closechan() to update this thread&#39;s view of c.closed and full().
	if !block &amp;amp;&amp;amp; c.closed == 0 &amp;amp;&amp;amp; full(c) {
		return false
	}

	var t0 int64
	if blockprofilerate &amp;gt; 0 {
		t0 = cputicks()
	}
    // è·å¾—åŒæ­¥é”
	lock(&amp;amp;c.lock)
    // å½“chanå…³é—­æ—¶,é‡Šæ”¾é”ï¼Œå¹¶panic
    // å‘ä¹Ÿå…³é—­çš„chanå‘é€æ¶ˆæ¯,ä¼šå¼•å‘panic
	if c.closed != 0 {
		unlock(&amp;amp;c.lock)
		panic(plainError(&amp;quot;send on closed channel&amp;quot;))
	}
    // å¦‚æœæ¥æ”¶é˜Ÿåˆ—ä¸­æœ‰ç­‰å¾…çš„æ¥æ”¶è€…ï¼Œç›´æ¥å‘é€ç»™æ¥æ”¶è€…ï¼ˆæœ‰ç¼“å­˜åŒºæ—¶ï¼Œä¼šç»•è¿‡ç¼“å­˜åŒºï¼‰
	if sg := c.recvq.dequeue(); sg != nil {
		// Found a waiting receiver. We pass the value we want to send
		// directly to the receiver, bypassing the channel buffer (if any).
		send(c, sg, ep, func() { unlock(&amp;amp;c.lock) }, 3)
		return true
	}

	if c.qcount &amp;lt; c.dataqsiz {
        // æ²¡æœ‰æ¥æ”¶è€…ï¼Œå½“æœ‰ç¼“å­˜åŒºæ—¶ï¼Œå°†è¦å‘é€çš„å…ƒç´ æ”¾å…¥é˜Ÿåˆ—ä¸­
		// Space is available in the channel buffer. Enqueue the element to send.
		qp := chanbuf(c, c.sendx)  // è·å–ç¼“å­˜åœ°å€
		if raceenabled {
			racenotify(c, c.sendx, nil)
		}
		typedmemmove(c.elemtype, qp, ep)
		c.sendx++ // æŒ‡å‘ä¸‹ä¸€ä¸ªå­˜å‚¨çš„ä½ç½®
		if c.sendx == c.dataqsiz {
			c.sendx = 0
		}
		c.qcount++ // ç¼“å­˜æ•°é‡ç›¸åŠ 
		unlock(&amp;amp;c.lock)
		return true
	}

	if !block {
		unlock(&amp;amp;c.lock)
		return false
	}
    // ç¼“å­˜åŒºæ»¡äº†ï¼Œå°†å½“å‰å‘é€åç¨‹åŠ å…¥åˆ°ç­‰å¾…sendé˜Ÿåˆ—
	// Block on the channel. Some receiver will complete our operation for us.
	gp := getg() // è·å–å½“å‰çš„gå‘é€åç¨‹
	mysg := acquireSudog()// åˆ›å»ºsudogç­‰å¾…é˜Ÿåˆ—
	mysg.releasetime = 0
	if t0 != 0 {
		mysg.releasetime = -1
	}
	// No stack splits between assigning elem and enqueuing mysg
	// on gp.waiting where copystack can find it.
	mysg.elem = ep
	mysg.waitlink = nil
    // æŠŠå½“å‰çš„å‘é€åç¨‹ä¸ç­‰å¾…é˜Ÿåˆ—ç»‘å®š
	mysg.g = gp 
	mysg.isSelect = false
	mysg.c = c
	gp.waiting = mysg
	gp.param = nil
    // åŠ å…¥åˆ°å‘é€ç­‰å¾…é˜Ÿåˆ—ä¸­
	c.sendq.enqueue(mysg)
	// Signal to anyone trying to shrink our stack that we&#39;re about
	// to park on a channel. The window between when this G&#39;s status
	// changes and when we set gp.activeStackChans is not safe for
	// stack shrinking.
	atomic.Store8(&amp;amp;gp.parkingOnChan, 1)
	gopark(chanparkcommit, unsafe.Pointer(&amp;amp;c.lock), waitReasonChanSend, traceEvGoBlockSend, 2)
	// Ensure the value being sent is kept alive until the
	// receiver copies it out. The sudog has a pointer to the
	// stack object, but sudogs aren&#39;t considered as roots of the
	// stack tracer.
	KeepAlive(ep)

	// someone woke us up.
    // å‘é€åç¨‹è¢«å”¤é†’ï¼Œè§£é™¤ç­‰å¾…é˜Ÿåˆ—çš„é˜»å¡çŠ¶æ€
    // åˆ¤æ–­çš„ç­‰å¾…é˜Ÿåˆ—æ˜¯å¦åœ¨ä¼‘çœ 
	if mysg != gp.waiting {
		throw(&amp;quot;G waiting list is corrupted&amp;quot;)
	}
	gp.waiting = nil
	gp.activeStackChans = false
	closed := !mysg.success
	gp.param = nil
	if mysg.releasetime &amp;gt; 0 {
		blockevent(mysg.releasetime-t0, 2)
	}
	mysg.c = nil
	releaseSudog(mysg) // é‡Šæ”¾ç­‰å¾…é˜Ÿåˆ—
	if closed {
		if c.closed == 0 {
			throw(&amp;quot;chansend: spurious wakeup&amp;quot;)
		}
		panic(plainError(&amp;quot;send on closed channel&amp;quot;))
	}
	return true
}
&lt;/code&gt;&lt;/pre&gt;&lt;ul&gt;
&lt;li&gt;channel å‘é€æ•°æ®æ€»ç»“&lt;/li&gt;
&lt;/ul&gt;
&lt;ol&gt;
&lt;li&gt;åˆ¤æ–­chanæ˜¯å¦è¢«åˆå§‹åŒ–ï¼Œå‘chanä¸ºnilçš„chanå‘é€æ•°æ®å°†ä¼šæ°¸ä¹…é˜»å¡&lt;/li&gt;
&lt;li&gt;æ£€æŸ¥åœ¨æ²¡æœ‰è·å–é”ï¼Œ åœ¨æ²¡æœ‰è·å–é”çš„æƒ…å†µä¸‹ä¼šå¯¼è‡´å‘é€å¤±è´¥çš„éé˜»å¡æ“ä½œ&lt;/li&gt;
&lt;li&gt;æ£€æŸ¥chanæ˜¯å¦å…³é—­ï¼Œå‘ä¹Ÿå…³é—­çš„chanå‘é€æ¶ˆæ¯,ä¼šå¼•å‘panic&lt;/li&gt;
&lt;li&gt;å¦‚æœæ¥æ”¶é˜Ÿåˆ—ä¸­æœ‰ç­‰å¾…çš„æ¥æ”¶è€…ï¼Œç›´æ¥å‘é€ç»™æ¥æ”¶è€…ï¼ˆæœ‰ç¼“å­˜åŒºæ—¶ï¼Œä¼šç»•è¿‡ç¼“å­˜åŒºï¼‰&lt;/li&gt;
&lt;li&gt;æ²¡æœ‰æ¥æ”¶è€…ï¼Œå½“æœ‰ç¼“å­˜åŒºæ—¶ï¼Œå°†è¦å‘é€çš„å…ƒç´ æ”¾å…¥é˜Ÿåˆ—ä¸­&lt;/li&gt;
&lt;li&gt;ç¼“å­˜åŒºæ»¡äº†ï¼Œå°†å½“å‰åç¨‹åŠ å…¥åˆ°sendç­‰å¾…é˜Ÿåˆ—ï¼Œå¹¶é˜»å¡&lt;/li&gt;
&lt;li&gt;å½“å‘é€åç¨‹è¢«å”¤é†’ï¼Œè§£é™¤ç­‰å¾…é˜Ÿåˆ—çš„é˜»å¡çŠ¶æ€ï¼Œé‡Šæ”¾ç­‰å¾…é˜Ÿåˆ—
&lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 163; 
			flex-basis: 392px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/go-channel%E7%9A%84%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3/5.png&#34; data-size=&#34;1338x819&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/go-channel%E7%9A%84%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3/5.png&#34;
			width=&#34;1338&#34;
			height=&#34;819&#34;
			srcset=&#34;https://zcj-git520.github.io/p/go-channel%E7%9A%84%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3/5_huac78e02842841011bb19217a58ea5d43_197926_480x0_resize_box_3.png 480w, https://zcj-git520.github.io/p/go-channel%E7%9A%84%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3/5_huac78e02842841011bb19217a58ea5d43_197926_1024x0_resize_box_3.png 1024w&#34;
			loading=&#34;lazy&#34;
			&gt;
	&lt;/a&gt;
	
&lt;/figure&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;channel-æ¥æ”¶æ•°æ®&#34;&gt;channel æ¥æ”¶æ•°æ®&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&amp;lt;- data&lt;/li&gt;
&lt;/ul&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;chan æ¥æ”¶æ•°æ®æºç å¦‚ä¸‹:
func chanrecv(c *hchan, ep unsafe.Pointer, block bool) (selected, received bool) {
	// raceenabled: don&#39;t need to check ep, as it is always on the stack
	// or is new memory allocated by reflect.

	if debugChan {
		print(&amp;quot;chanrecv: chan=&amp;quot;, c, &amp;quot;\n&amp;quot;)
	}
    // åˆ¤æ–­chanæ˜¯å¦åˆå§‹åŒ–ï¼Œè‹¥æ²¡æœ‰åˆå§‹åŒ–ï¼Œæ¥æ”¶channelæ•°æ®å°†é˜»å¡
	if c == nil {
		if !block {
			return
		}
		gopark(nil, nil, waitReasonChanReceiveNilChan, traceEvGoStop, 2)
		throw(&amp;quot;unreachable&amp;quot;)
	}
    // æ£€æŸ¥chanæ˜¯å¦ä¸ºç©ºï¼Œæ˜¯å¦å…³é—­
	// Fast path: check for failed non-blocking operation without acquiring the lock.
	if !block &amp;amp;&amp;amp; empty(c) {
		// After observing that the channel is not ready for receiving, we observe whether the
		// channel is closed.
		//
		// Reordering of these checks could lead to incorrect behavior when racing with a close.
		// For example, if the channel was open and not empty, was closed, and then drained,
		// reordered reads could incorrectly indicate &amp;quot;open and empty&amp;quot;. To prevent reordering,
		// we use atomic loads for both checks, and rely on emptying and closing to happen in
		// separate critical sections under the same lock.  This assumption fails when closing
		// an unbuffered channel with a blocked send, but that is an error condition anyway.
		if atomic.Load(&amp;amp;c.closed) == 0 {  // chanå…³é—­ï¼Œå°±è¿”å›
			// Because a channel cannot be reopened, the later observation of the channel
			// being not closed implies that it was also not closed at the moment of the
			// first observation. We behave as if we observed the channel at that moment
			// and report that the receive cannot proceed.
			return
		}
		// The channel is irreversibly closed. Re-check whether the channel has any pending data
		// to receive, which could have arrived between the empty and closed checks above.
		// Sequential consistency is also required here, when racing with such a send.
		if empty(c) { // å¦‚æœchanä¸ºç©º
			// The channel is irreversibly closed and empty.
            // // channel ä¸å¯é€†çš„å…³é—­äº†ä¸”ä¸ºç©º
			if raceenabled {
				raceacquire(c.raceaddr())
			}
			if ep != nil {
				typedmemclr(c.elemtype, ep)
			}
			return true, false
		}
	}

	var t0 int64
	if blockprofilerate &amp;gt; 0 {
		t0 = cputicks()
	}

	lock(&amp;amp;c.lock)
    // chan å…³é—­äº†ï¼Œæ¸…ç†ç¼“å†²åŒº
	if c.closed != 0 &amp;amp;&amp;amp; c.qcount == 0 {
		if raceenabled {
			raceacquire(c.raceaddr())
		}
		unlock(&amp;amp;c.lock)
		if ep != nil {
			typedmemclr(c.elemtype, ep)
		}
		return true, false
	}
    //  æ‰¾åˆ°ä¸€ä¸ªç­‰å¾…çš„å‘ä»¶äººã€‚å¦‚æœç¼“å†²åŒºå¤§å°ä¸º 0ï¼Œåˆ™ç›´æ¥ä»å‘é€æ–¹æ¥æ”¶å€¼ã€‚å¦åˆ™ï¼Œä»é˜Ÿåˆ—çš„å¤´éƒ¨æ¥æ”¶ 
    // å¹¶å°†å‘é€è€…çš„å€¼æ·»åŠ åˆ°é˜Ÿåˆ—çš„å°¾éƒ¨ï¼ˆä¸¤è€…éƒ½æ˜ å°„åˆ° 
    // ç›¸åŒçš„ç¼“å†²åŒºæ§½ï¼Œå› ä¸ºé˜Ÿåˆ—å·²æ»¡ï¼‰
      // å¦‚æœæ˜¯æ— ç¼“å†²é˜Ÿåˆ—ï¼Œç›´æ¥ä»å‘é€æ–¹å–å€¼
      // å¦‚æœæ˜¯å¾…ç¼“å†²çš„åŒºï¼Œå°±ä»ç¼“å†²åŒºå¤´éƒ¨è·å–å€¼ï¼Œå¹¶å°†å‘é€ç€çš„å€¼ä¿å­˜åœ¨ç¼“å†²åŒºå
	if sg := c.sendq.dequeue(); sg != nil {
		// Found a waiting sender. If buffer is size 0, receive value
		// directly from sender. Otherwise, receive from head of queue
		// and add sender&#39;s value to the tail of the queue (both map to
		// the same buffer slot because the queue is full).
		recv(c, sg, ep, func() { unlock(&amp;amp;c.lock) }, 3)
		return true, true
	}
    // æ²¡æœ‰å‘é€çš„åç¨‹ï¼Œä½†æ˜¯ç¼“å†²åŒºæœ‰å…ƒç´ ï¼Œç›´æ¥è·å–ç¼“å†²åŒºå¤´éƒ¨çš„å€¼
	if c.qcount &amp;gt; 0 {
		// Receive directly from queue
		qp := chanbuf(c, c.recvx)
		if raceenabled {
			racenotify(c, c.recvx, nil)
		}
		if ep != nil {
			typedmemmove(c.elemtype, ep, qp)
		}
		typedmemclr(c.elemtype, qp)
		c.recvx++
		if c.recvx == c.dataqsiz {
			c.recvx = 0
		}
		c.qcount--
		unlock(&amp;amp;c.lock)
		return true, true
	}

	if !block {
		unlock(&amp;amp;c.lock)
		return false, false
	}
    // å½“æ²¡æœ‰å‘é€æ•°æ®çš„çš„åç¨‹ï¼Œä¸”ç¼“å†²åŒºå€¼ï¼Œå°±å°†æ¥æ”¶çš„åç¨‹æ”¾å…¥ç­‰å¾…é˜Ÿåˆ—ä¸­
	// no sender available: block on this channel.
	gp := getg()  // è·å–å½“å‰æ¥æ”¶åç¨‹
	mysg := acquireSudog() // åˆ›å»ºç­‰å¾…é˜Ÿåˆ—
	mysg.releasetime = 0
	if t0 != 0 {
		mysg.releasetime = -1
	}
	// No stack splits between assigning elem and enqueuing mysg
	// on gp.waiting where copystack can find it.
	mysg.elem = ep
	mysg.waitlink = nil
	gp.waiting = mysg 
    // å°†æ¥é€å†™åç¨‹ä¸ç­‰å¾…é˜Ÿåˆ—ç»‘å®š
	mysg.g = gp
	mysg.isSelect = false
	mysg.c = c
	gp.param = nil
    // æ”¾å…¥åœ¨åç¨‹çš„ç­‰å¾…é˜Ÿåˆ—ä¸­
	c.recvq.enqueue(mysg)
	// Signal to anyone trying to shrink our stack that we&#39;re about
	// to park on a channel. The window between when this G&#39;s status
	// changes and when we set gp.activeStackChans is not safe for
	// stack shrinking.
	atomic.Store8(&amp;amp;gp.parkingOnChan, 1)
	gopark(chanparkcommit, unsafe.Pointer(&amp;amp;c.lock), waitReasonChanReceive, traceEvGoBlockRecv, 2)
    //å½“æ¥æ”¶åç¨‹è¢«å”¤é†’æ—¶ï¼Œè§£é™¤é˜»å¡çŠ¶æ€
	// someone woke us up
	if mysg != gp.waiting {
		throw(&amp;quot;G waiting list is corrupted&amp;quot;)
	}
	gp.waiting = nil
	gp.activeStackChans = false
	if mysg.releasetime &amp;gt; 0 {
		blockevent(mysg.releasetime-t0, 2)
	}
	success := mysg.success
	gp.param = nil
	mysg.c = nil
	releaseSudog(mysg) // é‡Šæ”¾ç­‰å¾…é˜Ÿåˆ—å†…å­˜
	return true, success
}

&lt;/code&gt;&lt;/pre&gt;&lt;ul&gt;
&lt;li&gt;channel å‘é€æ•°æ®æ€»ç»“&lt;/li&gt;
&lt;/ul&gt;
&lt;ol&gt;
&lt;li&gt;åˆ¤æ–­chanæ˜¯å¦åˆå§‹åŒ–ï¼Œè‹¥æ²¡æœ‰åˆå§‹åŒ–ï¼Œæ¥æ”¶channelæ•°æ®å°†é˜»å¡&lt;/li&gt;
&lt;li&gt;æ£€æŸ¥chanæ˜¯å¦ä¸ºç©ºï¼Œæ˜¯å¦å…³é—­&lt;/li&gt;
&lt;li&gt;å½“æœ‰å‘é€åç¨‹ï¼Œå¦‚æœæ˜¯æ— ç¼“å†²é˜Ÿåˆ—ï¼Œç›´æ¥ä»å‘é€æ–¹å–å€¼,å¦‚æœæ˜¯å¾…ç¼“å†²çš„åŒºï¼Œå°±ä»ç¼“å†²åŒºå¤´éƒ¨è·å–å€¼ï¼Œå¹¶å°†å‘é€ç€çš„å€¼ä¿å­˜åœ¨ç¼“å†²åŒºå&lt;/li&gt;
&lt;li&gt;å½“æ²¡æœ‰å‘é€åç¨‹ï¼Œä½†æ˜¯æœ‰ç¼“å†²åŒºæœ‰å…ƒç´ ï¼Œç›´æ¥è·å–ç¼“å†²åŒºå¤´éƒ¨çš„å€¼&lt;/li&gt;
&lt;li&gt;å½“æ²¡æœ‰å‘é€æ•°æ®çš„çš„åç¨‹ï¼Œä¸”ç¼“å†²åŒºå€¼ï¼Œå°±å°†æ¥æ”¶çš„åç¨‹æ”¾å…¥ç­‰å¾…é˜Ÿåˆ—ä¸­&lt;/li&gt;
&lt;li&gt;å½“æ¥æ”¶åç¨‹è¢«å”¤é†’æ—¶ï¼Œè§£é™¤é˜»å¡çŠ¶æ€ï¼Œé‡Šæ”¾ç­‰å¾…é˜Ÿåˆ—å†…å­˜
&lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 177; 
			flex-basis: 426px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/go-channel%E7%9A%84%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3/6.png&#34; data-size=&#34;1488x837&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/go-channel%E7%9A%84%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3/6.png&#34;
			width=&#34;1488&#34;
			height=&#34;837&#34;
			srcset=&#34;https://zcj-git520.github.io/p/go-channel%E7%9A%84%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3/6_hudbd79ce6f9ecebda132de055b60a9928_209658_480x0_resize_box_3.png 480w, https://zcj-git520.github.io/p/go-channel%E7%9A%84%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3/6_hudbd79ce6f9ecebda132de055b60a9928_209658_1024x0_resize_box_3.png 1024w&#34;
			loading=&#34;lazy&#34;
			&gt;
	&lt;/a&gt;
	
&lt;/figure&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&#34;channel-å…³é—­&#34;&gt;channel å…³é—­&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;close(chan)&lt;/li&gt;
&lt;/ul&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;chan å…³é—­æºç å¦‚ä¸‹:
    func closechan(c *hchan) {
        // åˆ¤æ–­chanæ˜¯å¦åˆå§‹åŒ–ï¼Œæ²¡æœ‰åˆå§‹åŒ–ï¼Œå…³é—­æ²¡æœ‰åˆå§‹åŒ–çš„chan,ç›´æ¥panic
    	if c == nil {
    		panic(plainError(&amp;quot;close of nil channel&amp;quot;))
    	}
        // åˆ¤æ–­chanæ˜¯å¦ä¹Ÿè¢«å…³é—­ï¼Œå…³é—­ä¹Ÿå…³é—­çš„chan,ä¹Ÿä¼šå‘é€panic
    	lock(&amp;amp;c.lock)
    	if c.closed != 0 {
    		unlock(&amp;amp;c.lock)
    		panic(plainError(&amp;quot;close of closed channel&amp;quot;))
    	}
    
    	if raceenabled {
    		callerpc := getcallerpc()
    		racewritepc(c.raceaddr(), callerpc, funcPC(closechan))
    		racerelease(c.raceaddr())
    	}
    
    	c.closed = 1
    
    	var glist gList
        // é‡Šæ”¾æ‰€æœ‰çš„æ¥æ”¶chanï¼Œå¹¶å°†æ‰€æœ‰çš„æ¥æ”¶é˜Ÿåˆ—åŠ å…¥åˆ°å¾…æ¸…é™¤é˜Ÿåˆ— glist ä¸­
    	// release all readers
    	for {
    		sg := c.recvq.dequeue()
    		if sg == nil {
    			break
    		}
    		if sg.elem != nil {
    			typedmemclr(c.elemtype, sg.elem)
    			sg.elem = nil
    		}
    		if sg.releasetime != 0 {
    			sg.releasetime = cputicks()
    		}
    		gp := sg.g
    		gp.param = unsafe.Pointer(sg)
    		sg.success = false
    		if raceenabled {
    			raceacquireg(gp, c.raceaddr())
    		}
    		glist.push(gp)
    	}
        // é‡Šæ”¾æ‰€æœ‰çš„å‘é€chan,å‘é€è€…çš„ç­‰å¾…é˜Ÿåˆ— sendq ä¸­çš„ sudog æ”¾å…¥å¾…æ¸…é™¤é˜Ÿåˆ— glist ä¸­
    	// release all writers (they will panic)
    	for {
    		sg := c.sendq.dequeue()
    		if sg == nil {
    			break
    		}
    		sg.elem = nil
    		if sg.releasetime != 0 {
    			sg.releasetime = cputicks()
    		}
    		gp := sg.g
    		gp.param = unsafe.Pointer(sg)
    		sg.success = false
    		if raceenabled {
    			raceacquireg(gp, c.raceaddr())
    		}
    		glist.push(gp)
    	}
    	unlock(&amp;amp;c.lock)
    æœ€åä¼šä¸ºæ‰€æœ‰è¢«é˜»å¡çš„ goroutine è°ƒç”¨ goready è§¦å‘è°ƒåº¦ã€‚å°†æ‰€æœ‰ glist ä¸­çš„ 
    goroutine çŠ¶æ€ä» _Gwaiting è®¾ç½®ä¸º _Grunnable çŠ¶æ€ï¼Œç­‰å¾…è°ƒåº¦å™¨çš„è°ƒåº¦ã€‚
    	// Ready all Gs now that we&#39;ve dropped the channel lock.
    	for !glist.empty() {
    		gp := glist.pop()
    		gp.schedlink = 0
    		goready(gp, 3)
    	}
    }
&lt;/code&gt;&lt;/pre&gt;&lt;ul&gt;
&lt;li&gt;channel å…³é—­æ€»ç»“&lt;/li&gt;
&lt;/ul&gt;
&lt;ol&gt;
&lt;li&gt;åˆ¤æ–­chanæ˜¯å¦åˆå§‹åŒ–ï¼Œæ²¡æœ‰åˆå§‹åŒ–ï¼Œå…³é—­æ²¡æœ‰åˆå§‹åŒ–çš„chan,ç›´æ¥panic&lt;/li&gt;
&lt;li&gt;åˆ¤æ–­chanæ˜¯å¦ä¹Ÿè¢«å…³é—­ï¼Œå…³é—­ä¹Ÿå…³é—­çš„chan,ä¹Ÿä¼šå‘é€panic&lt;/li&gt;
&lt;li&gt;å…ˆé‡Šæ”¾æ‰€æœ‰çš„æ¥æ”¶chanï¼Œå¹¶å°†æ‰€æœ‰çš„æ¥æ”¶é˜Ÿåˆ—åŠ å…¥åˆ°å¾…æ¸…é™¤é˜Ÿåˆ— glist ä¸­&lt;/li&gt;
&lt;li&gt;é‡Šæ”¾æ‰€æœ‰çš„å‘é€chan,å‘é€è€…çš„ç­‰å¾…é˜Ÿåˆ— sendq ä¸­çš„ sudog æ”¾å…¥å¾…æ¸…é™¤é˜Ÿåˆ— glist ä¸­&lt;/li&gt;
&lt;li&gt;æœ€åä¼šä¸ºæ‰€æœ‰è¢«é˜»å¡çš„ goroutine è°ƒç”¨ goready è§¦å‘è°ƒåº¦ã€‚å°†æ‰€æœ‰ glist ä¸­çš„goroutine çŠ¶æ€ä» _Gwaiting è®¾ç½®ä¸º _Grunnable çŠ¶æ€ï¼Œç­‰å¾…è°ƒåº¦å™¨çš„è°ƒåº¦ã€‚&lt;/li&gt;
&lt;/ol&gt;
</description>
        </item>
        <item>
        <title>go errorç±»å‹è½¬json</title>
        <link>https://zcj-git520.github.io/p/golang/</link>
        <pubDate>Sat, 09 Oct 2021 22:00:38 +0800</pubDate>
        
        <guid>https://zcj-git520.github.io/p/golang/</guid>
        <description>&lt;img src="https://zcj-git520.github.io/p/golang/2.png" alt="Featured image of post go errorç±»å‹è½¬json" /&gt;&lt;h2 id=&#34;é—®é¢˜&#34;&gt;é—®é¢˜&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;åœ¨æ”¶é›†æœåŠ¡çš„è®¿é—®è®°å½•æ—¶ï¼Œéœ€è¦å°†è®¿é—®è®°å½•ä¿å­˜ï¼Œå®šä¹‰ç»“æ„ä½“å¦‚ä¸‹&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;/blockquote&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;type accessData struct {
	RemoteAddr string    // è¿œç¨‹è®¿é—®ä¸»æœºåœ°å€
	RequestURI string    //è®¿é—®çš„è·¯ç”±
	ServerName string    // è®¿é—®çš„æœåŠ¡åç§°
	AccessDate string    //è®¿é—®çš„æ—¶é—´
	RunStatus bool       //æœåŠ¡æ˜¯å¦æ­£å¸¸è¿è¡Œ
	RunError error       //è¿è¡ŒæŠ¥é”™ï¼šæŠ¥é”™ä¿¡æ¯.
	ServerParam interface{} // è®¿é—®æœåŠ¡çš„å‚æ•°
}
&lt;/code&gt;&lt;/pre&gt;&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;é€šè¿‡ç»“æ„ä½“è½¬jsonï¼ŒåŒæ—¶é€šè¿‡getè¯·æ±‚å¾—åˆ°å›¾ä¸‹ç»“æœ
&lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 135; 
			flex-basis: 325px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/golang/1.png&#34; data-size=&#34;630x464&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/golang/1.png&#34;
			width=&#34;630&#34;
			height=&#34;464&#34;
			srcset=&#34;https://zcj-git520.github.io/p/golang/1_hu0cd8407e48b8e284b5fa50d7a8dedae6_33030_480x0_resize_box_3.png 480w, https://zcj-git520.github.io/p/golang/1_hu0cd8407e48b8e284b5fa50d7a8dedae6_33030_1024x0_resize_box_3.png 1024w&#34;
			loading=&#34;lazy&#34;
			&gt;
	&lt;/a&gt;
	
&lt;/figure&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&amp;ldquo;RunError&amp;rdquo;: {},è¢«jsonè½¬ä¸º{}çš„å­—ç¬¦ï¼Œ æ‰“å°ç»“æ„ä½“ï¼Œå‘ç°é”™è¯¯ä¿¡æ¯æ˜¯æœ‰çš„ï¼š{192.168.1.101:53364 /v1/alarms/out/d GetOutAlarms 2021-10-12 10:09:42 false æ²¡æœ‰è¿™ä¸ªæŠ¥è­¦ğŸ†”id &lt;!-- raw HTML omitted --&gt;},è¯´æ˜æ˜¯error è½¬jsoné—®é¢˜&lt;/p&gt;
&lt;h2 id=&#34;é—®é¢˜åˆ†æä¸è§£å†³&#34;&gt;é—®é¢˜åˆ†æä¸è§£å†³&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;é—®é¢˜åˆ†ææŸ¥çœ‹errorç±»å‹å®šä¹‰å‘ç°ï¼šerrorç±»å‹åªæ˜¯ä¸€ä¸ªæ¥å£ã€‚å®ƒå¯ä»¥åŒ…å«ä»»ä½•å®ç°å®ƒçš„å…·ä½“ç±»å‹çš„å€¼&lt;/li&gt;
&lt;li&gt;è§£å†³ï¼šå°†ç»“æ„ä½“ä¸­é”™è¯¯è½¬åŒ–ä¸ºå­—ç¬¦ä¸²ç±»å‹ï¼ŒåŒæ—¶ç”¨err.Error()è¿”å›æ˜¯é”™è¯¯çš„å­—ç¬¦ä¸²&lt;/li&gt;
&lt;/ul&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;type accessData struct {
  RemoteAddr string    // è¿œç¨‹è®¿é—®ä¸»æœºåœ°å€
  RequestURI string    //è®¿é—®çš„è·¯ç”±
  ServerName string    // è®¿é—®çš„æœåŠ¡åç§°
  AccessDate string    //è®¿é—®çš„æ—¶é—´
  RunStatus bool       //æœåŠ¡æ˜¯å¦æ­£å¸¸è¿è¡Œ
  RunError string       //è¿è¡ŒæŠ¥é”™ï¼šæŠ¥é”™ä¿¡æ¯.
  ServerParam interface{} // è®¿é—®æœåŠ¡çš„å‚æ•°
  }
  type error interface {
  Error() string
  }
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ç»“æœå¦‚å›¾&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 88; 
			flex-basis: 212px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/golang/2.png&#34; data-size=&#34;492x556&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/golang/2.png&#34;
			width=&#34;492&#34;
			height=&#34;556&#34;
			srcset=&#34;https://zcj-git520.github.io/p/golang/2_hu3607656af67f333528ae9e7b0ed06a62_30106_480x0_resize_box_3.png 480w, https://zcj-git520.github.io/p/golang/2_hu3607656af67f333528ae9e7b0ed06a62_30106_1024x0_resize_box_3.png 1024w&#34;
			loading=&#34;lazy&#34;
			&gt;
	&lt;/a&gt;
	
&lt;/figure&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
</description>
        </item>
        <item>
        <title>go goroutineä¸gmpæ¨¡å‹çš„æ·±å…¥ç†è§£</title>
        <link>https://zcj-git520.github.io/p/go-goroutine%E4%B8%8Egmp%E6%A8%A1%E5%9E%8B%E7%9A%84%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3/</link>
        <pubDate>Wed, 06 Oct 2021 22:00:38 +0800</pubDate>
        
        <guid>https://zcj-git520.github.io/p/go-goroutine%E4%B8%8Egmp%E6%A8%A1%E5%9E%8B%E7%9A%84%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3/</guid>
        <description>&lt;img src="https://zcj-git520.github.io/p/go-goroutine%E4%B8%8Egmp%E6%A8%A1%E5%9E%8B%E7%9A%84%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3/1.png" alt="Featured image of post go goroutineä¸gmpæ¨¡å‹çš„æ·±å…¥ç†è§£" /&gt;&lt;h2 id=&#34;go-åç¨‹goroutine&#34;&gt;go åç¨‹goroutine&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;åç¨‹æ˜¯ç”¨æˆ·çº§çš„çº¿ç¨‹ï¼Œæœ‰ç”¨æˆ·è‡ªå·±è°ƒåº¦ï¼Œä½¿ç”¨åç¨‹ä½¿å¾—ç¨‹åºè°ƒåº¦æ›´åŠ çµæ´»ã€‚åŒæ—¶æ¯”çº¿ç¨‹æ›´è½»é‡ï¼Œå ç”¨çš„æ ˆå†…å­˜æ›´å°‘ã€‚goè¯­è¨€å¤©ç”Ÿæ”¯æŒé«˜å¹¶å‘ï¼Œgoä½¿ç”¨åç¨‹goroutineçš„è°ƒåº¦å™¨ã€‚goroutine çš„æ ˆå†…å­˜æœ€å°å€¼ä¸º2kb(_StackMin = 2048),å®ƒä¸æ˜¯å›ºå®šä¸å˜çš„ï¼Œå¯ä»¥éšéœ€æ±‚å¢å¤§å’Œç¼©å°ã€‚goroutine ç»´æŠ¤ç€å¾ˆå¤§çš„å†…å­˜ï¼Œæ— éœ€é¢‘ç¹å¼€è¾Ÿå†…å­˜ï¼Œgoroutineæ˜¯ä½¿ç”¨M:næ¨¡å‹ï¼Œåœ¨ç”¨æˆ·æ€åˆ‡æ¢åç¨‹ï¼ŒåŠ ä¸Šåˆ›å»ºåç¨‹ä»£ä»·ä½ï¼Œä½¿å¾—cpuçš„åˆ©ç”¨ç‡å¤§å¤§æå‡ï¼Œcupçš„æ€§èƒ½å¤§å¹…åº¦çš„è¢«åˆ©ç”¨ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;goroutine-è°ƒåº¦å™¨gpmæ¨¡å‹&#34;&gt;goroutine è°ƒåº¦å™¨GPMæ¨¡å‹&lt;/h2&gt;
&lt;h3 id=&#34;g&#34;&gt;G&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;G å°±æ˜¯goroutineåç¨‹&lt;/li&gt;
&lt;/ul&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;type g struct {
	// Stack parameters.
	// stack describes the actual stack memory: [stack.lo, stack.hi).
	// stackguard0 is the stack pointer compared in the Go stack growth prologue.
	// It is stack.lo+StackGuard normally, but can be StackPreempt to trigger a preemption.
	// stackguard1 is the stack pointer compared in the C stack growth prologue.
	// It is stack.lo+StackGuard on g0 and gsignal stacks.
	// It is ~0 on other goroutine stacks, to trigger a call to morestackc (and crash).
	// è®°å½•è¯¥goroutineä½¿ç”¨çš„æ ˆ
    stack       stack   // offset known to runtime/cgo
    
	//ä¸‹é¢ä¸¤ä¸ªæˆå‘˜ç”¨äºæ ˆæº¢å‡ºæ£€æŸ¥ï¼Œå®ç°æ ˆçš„è‡ªåŠ¨ä¼¸ç¼©ï¼ŒæŠ¢å è°ƒåº¦ä¹Ÿä¼šç”¨åˆ°stackguard0
    stackguard0 uintptr // offset known to liblink
	stackguard1 uintptr // offset known to liblink

	_panic         *_panic // innermost panic - offset known to liblink
	_defer         *_defer // innermost defer
    
    // æ­¤goroutineæ­£åœ¨è¢«å“ªä¸ªå·¥ä½œçº¿ç¨‹æ‰§è¡Œ
	m              *m      // current m; offset known to arm liblink
    //è¿™ä¸ªå­—æ®µè·Ÿè°ƒåº¦åˆ‡æ¢æœ‰å…³ï¼ŒGåˆ‡æ¢æ—¶ç”¨æ¥ä¿å­˜ä¸Šä¸‹æ–‡ï¼Œä¿å­˜ä»€ä¹ˆï¼Œçœ‹ä¸‹é¢gobufç»“æ„ä½“
	sched          gobuf
	syscallsp      uintptr        // if status==Gsyscall, syscallsp = sched.sp to use during gc
	syscallpc      uintptr        // if status==Gsyscall, syscallpc = sched.pc to use during gc
	stktopsp       uintptr        // expected sp at top of stack, to check in traceback
	param          unsafe.Pointer // passed parameter on wakeupï¼Œwakeupå”¤é†’æ—¶ä¼ é€’çš„å‚æ•°
	// çŠ¶æ€Gidle,Grunnable,Grunning,Gsyscall,Gwaiting,Gdead
    atomicstatus   uint32
	stackLock      uint32 // sigprof/scang lock; TODO: fold in to atomicstatus
	goid           int64
    
    //schedlinkå­—æ®µæŒ‡å‘å…¨å±€è¿è¡Œé˜Ÿåˆ—ä¸­çš„ä¸‹ä¸€ä¸ªgï¼Œ
    //æ‰€æœ‰ä½äºå…¨å±€è¿è¡Œé˜Ÿåˆ—ä¸­çš„gå½¢æˆä¸€ä¸ªé“¾è¡¨
	schedlink      guintptr
	waitsince      int64      // approx time when the g become blocked
	waitreason     waitReason // if status==Gwaitingï¼Œgè¢«é˜»å¡çš„åŸå› 
    //æŠ¢å ä¿¡å·ï¼Œstackguard0 = stackpreemptï¼Œå¦‚æœéœ€è¦æŠ¢å è°ƒåº¦ï¼Œè®¾ç½®preemptä¸ºtrue
	preempt        bool       // preemption signal, duplicates stackguard0 = stackpreempt
	paniconfault   bool       // panic (instead of crash) on unexpected fault address
	preemptscan    bool       // preempted g does scan for gc
	gcscandone     bool       // g has scanned stack; protected by _Gscan bit in status
	gcscanvalid    bool       // false at start of gc cycle, true if G has not run since last scan; TODO: remove?
	throwsplit     bool       // must not split stack
	raceignore     int8       // ignore race detection events
	sysblocktraced bool       // StartTrace has emitted EvGoInSyscall about this goroutine
	sysexitticks   int64      // cputicks when syscall has returned (for tracing)
	traceseq       uint64     // trace event sequencer
	tracelastp     puintptr   // last P emitted an event for this goroutine
	// å¦‚æœè°ƒç”¨äº† LockOsThreadï¼Œé‚£ä¹ˆè¿™ä¸ª g ä¼šç»‘å®šåˆ°æŸä¸ª m ä¸Š
    lockedm        muintptr
	sig            uint32
	writebuf       []byte
	sigcode0       uintptr
	sigcode1       uintptr
	sigpc          uintptr
    // åˆ›å»ºè¿™ä¸ªgoroutineçš„goè¡¨è¾¾å¼çš„pc
	gopc           uintptr         // pc of go statement that created this goroutine
	ancestors      *[]ancestorInfo // ancestor information goroutine(s) that created this goroutine (only used if debug.tracebackancestors)
	startpc        uintptr         // pc of goroutine function
	racectx        uintptr
	waiting        *sudog         // sudog structures this g is waiting on (that have a valid elem ptr); in lock order
	cgoCtxt        []uintptr      // cgo traceback context
	labels         unsafe.Pointer // profiler labels
	timer          *timer         // cached timer for time.Sleep,ä¸º time.Sleep ç¼“å­˜çš„è®¡æ—¶å™¨
	selectDone     uint32         // are we participating in a select and did someone win the race?

	// Per-G GC state

	// gcAssistBytes is this G&#39;s GC assist credit in terms of
	// bytes allocated. If this is positive, then the G has credit
	// to allocate gcAssistBytes bytes without assisting. If this
	// is negative, then the G must correct this by performing
	// scan work. We track this in bytes to make it fast to update
	// and check for debt in the malloc hot path. The assist ratio
	// determines how this corresponds to scan work debt.
	gcAssistBytes int64
}
&lt;/code&gt;&lt;/pre&gt;&lt;ul&gt;
&lt;li&gt;ä¿å­˜ç€goroutineæ‰€æœ‰ä¿¡æ¯ä»¥åŠæ ˆä¿¡æ¯ï¼Œgobufç»“æ„ä½“ï¼šcpué‡Œçš„å¯„å­˜å™¨ä¿¡æ¯&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;p-processorå¤„ç†å™¨&#34;&gt;P processorå¤„ç†å™¨&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;è°ƒåº¦åç¨‹Gå’Œçº¿ç¨‹Mçš„å…³è”&lt;/li&gt;
&lt;/ul&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;P çš„ç»“æ„ä½“å¦‚ä¸‹ï¼š
type p struct {
    //allpä¸­çš„ç´¢å¼•
	id          int32
    //pçš„çŠ¶æ€
	status      uint32 // one of pidle/prunning/...
	link        puintptr
	schedtick   uint32     // incremented on every scheduler call-&amp;gt;æ¯æ¬¡schedulerè°ƒç”¨+1
	syscalltick uint32     // incremented on every system call-&amp;gt;æ¯æ¬¡ç³»ç»Ÿè°ƒç”¨+1
	sysmontick  sysmontick // last tick observed by sysmon
    //æŒ‡å‘ç»‘å®šçš„ mï¼Œå¦‚æœ p æ˜¯ idle çš„è¯ï¼Œé‚£è¿™ä¸ªæŒ‡é’ˆæ˜¯ nil
	m           muintptr   // back-link to associated m (nil if idle)
	mcache      *mcache
	raceprocctx uintptr

    //ä¸åŒå¤§å°å¯ç”¨deferç»“æ„æ± 
	deferpool    [5][]*_defer // pool of available defer structs of different sizes (see panic.go)
	deferpoolbuf [5][32]*_defer

	// Cache of goroutine ids, amortizes accesses to runtimeÂ·sched.goidgen.
	goidcache    uint64
	goidcacheend uint64

    //æœ¬åœ°è¿è¡Œé˜Ÿåˆ—ï¼Œå¯ä»¥æ— é”è®¿é—®
	// Queue of runnable goroutines. Accessed without lock.
	runqhead uint32  //é˜Ÿåˆ—å¤´
	runqtail uint32   //é˜Ÿåˆ—å°¾
    //æ•°ç»„å®ç°çš„å¾ªç¯é˜Ÿåˆ—
	runq     [256]guintptr
    
	// runnext, if non-nil, is a runnable G that was ready&#39;d by
	// the current G and should be run next instead of what&#39;s in
	// runq if there&#39;s time remaining in the running G&#39;s time
	// slice. It will inherit the time left in the current time
	// slice. If a set of goroutines is locked in a
	// communicate-and-wait pattern, this schedules that set as a
	// unit and eliminates the (potentially large) scheduling
	// latency that otherwise arises from adding the ready&#39;d
	// goroutines to the end of the run queue.
    // runnext éç©ºæ—¶ï¼Œä»£è¡¨çš„æ˜¯ä¸€ä¸ª runnable çŠ¶æ€çš„ Gï¼Œ
    //è¿™ä¸ª G è¢« å½“å‰ G ä¿®æ”¹ä¸º ready çŠ¶æ€ï¼Œç›¸æ¯” runq ä¸­çš„ G æœ‰æ›´é«˜çš„ä¼˜å…ˆçº§ã€‚
    //å¦‚æœå½“å‰ G è¿˜æœ‰å‰©ä½™çš„å¯ç”¨æ—¶é—´ï¼Œé‚£ä¹ˆå°±åº”è¯¥è¿è¡Œè¿™ä¸ª G
    //è¿è¡Œä¹‹åï¼Œè¯¥ G ä¼šç»§æ‰¿å½“å‰ G çš„å‰©ä½™æ—¶é—´
	runnext guintptr

	// Available G&#39;s (status == Gdead)
    //ç©ºé—²çš„g
	gFree struct {
		gList
		n int32
	}

	sudogcache []*sudog
	sudogbuf   [128]*sudog

	tracebuf traceBufPtr

	// traceSweep indicates the sweep events should be traced.
	// This is used to defer the sweep start event until a span
	// has actually been swept.
	traceSweep bool
	// traceSwept and traceReclaimed track the number of bytes
	// swept and reclaimed by sweeping in the current sweep loop.
	traceSwept, traceReclaimed uintptr

	palloc persistentAlloc // per-P to avoid mutex

	_ uint32 // Alignment for atomic fields below

	// Per-P GC state
	gcAssistTime         int64    // Nanoseconds in assistAlloc
	gcFractionalMarkTime int64    // Nanoseconds in fractional mark worker (atomic)
	gcBgMarkWorker       guintptr // (atomic)
	gcMarkWorkerMode     gcMarkWorkerMode

	// gcMarkWorkerStartTime is the nanotime() at which this mark
	// worker started.
	gcMarkWorkerStartTime int64

	// gcw is this P&#39;s GC work buffer cache. The work buffer is
	// filled by write barriers, drained by mutator assists, and
	// disposed on certain GC state transitions.
	gcw gcWork

	// wbBuf is this P&#39;s GC write barrier buffer.
	//
	// TODO: Consider caching this in the running G.
	wbBuf wbBuf

	runSafePointFn uint32 // if 1, run sched.safePointFn at next safe point

	pad cpu.CacheLinePad
}
&lt;/code&gt;&lt;/pre&gt;&lt;ul&gt;
&lt;li&gt;è®°å½•ç€Pçš„ä¿¡æ¯ï¼Œä»¥åŠGçš„çŠ¶æ€ç­‰ã€‚åŒæ—¶Pæ˜¯æœ‰ç€æœ¬åœ°é˜Ÿåˆ—ï¼Œå­˜æ”¾ç€å¸¦å¾…è¿è¡Œçš„G,æœ¬åœ°é˜Ÿåˆ—ä¸èƒ½è¶…è¿‡256ä¸ªã€‚&lt;/li&gt;
&lt;li&gt;Pçš„æ•°é‡ï¼šæ˜¯ç”±ç¯å¢ƒå˜é‡ $GOMAXPROCS æˆ–è€…æ˜¯ç”± runtime çš„æ–¹æ³• GOMAXPROCS() å†³å®šã€‚åœ¨ç¨‹åºå¯åŠ¨å¼åˆ›å»ºï¼Œå¹¶ä¿å­˜åœ¨æ•°ç»„ä¸­ï¼Œæœ€å¤šæœ‰ GOMAXPROCS(å¯é…ç½®) ä¸ª&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;m-æ˜¯å†…æ ¸æ€çº¿ç¨‹çš„æŠ½è±¡&#34;&gt;M æ˜¯å†…æ ¸æ€çº¿ç¨‹çš„æŠ½è±¡&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;ä¸»è¦çš„å·¥ä½œæ‰§è¡Œåç¨‹Gæˆ–è€…åœ¨è°ƒåº¦Gåˆ°Pä¸­&lt;/li&gt;
&lt;/ul&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;Mçš„ç»“æ„ä½“å¦‚ä¸‹ï¼š
type m struct {
    // ç³»ç»Ÿç®¡ç†çš„ä¸€ä¸ªgï¼Œæ‰§è¡Œè°ƒåº¦ä»£ç æ—¶ä½¿ç”¨çš„ã€‚æ¯”å¦‚æ‰§è¡Œç”¨æˆ·çš„goroutineæ—¶ï¼Œå°±éœ€è¦æŠŠæŠŠç”¨æˆ·
    // çš„æ ˆä¿¡æ¯æ¢åˆ°å†…æ ¸çº¿ç¨‹çš„æ ˆï¼Œä»¥ä¾¿èƒ½å¤Ÿæ‰§è¡Œç”¨æˆ·goroutine
	g0      *g     // goroutine with scheduling stack
	morebuf gobuf  // gobuf arg to morestack
	divmod  uint32 // div/mod denominator for arm - known to liblink

	// Fields not known to debuggers.
	procid        uint64       // for debuggers, but offset not hard-coded
    //å¤„ç†signalçš„ g
	gsignal       *g           // signal-handling g
	goSigStack    gsignalStack // Go-allocated signal handling stack
	sigmask       sigset       // storage for saved signal mask
    //çº¿ç¨‹çš„æœ¬åœ°å­˜å‚¨TLSï¼Œè¿™é‡Œå°±æ˜¯ä¸ºä»€ä¹ˆOSçº¿ç¨‹èƒ½è¿è¡ŒMå…³é”®åœ°æ–¹
	tls           [6]uintptr   // thread-local storage (for x86 extern register)
	//go å…³é”®å­—è¿è¡Œçš„å‡½æ•°
    mstartfn      func()
    //å½“å‰è¿è¡Œçš„ç”¨æˆ·goroutineçš„gç»“æ„ä½“å¯¹è±¡
	curg          *g       // current running goroutine
	caughtsig     guintptr // goroutine running during fatal signal
    
    //å½“å‰å·¥ä½œçº¿ç¨‹ç»‘å®šçš„Pï¼Œå¦‚æœæ²¡æœ‰å°±ä¸ºnil
	p             puintptr // attached p for executing go code (nil if not executing go code)
	//æš‚å­˜ä¸å½“å‰Mæ½œåœ¨å…³è”çš„P
    nextp         puintptr
    //Mä¹‹å‰è°ƒç”¨çš„P
	oldp          puintptr // the p that was attached before executing a syscall
	id            int64
	mallocing     int32
	throwing      int32
    //å½“å‰Mæ˜¯å¦å…³é—­æŠ¢å å¼è°ƒåº¦
	preemptoff    string // if != &amp;quot;&amp;quot;, keep curg running on this m
	locks         int32
	dying         int32
	profilehz     int32
    //Mçš„è‡ªæ—‹çŠ¶æ€ï¼Œä¸ºtrueæ—¶Må¤„äºè‡ªæ—‹çŠ¶æ€ï¼Œæ­£åœ¨ä»å…¶ä»–çº¿ç¨‹å·G; ä¸ºfalseï¼Œä¼‘çœ çŠ¶æ€
	spinning      bool // m is out of work and is actively looking for work
	blocked       bool // m is blocked on a note
	newSigstack   bool // minit on C thread called sigaltstack
	printlock     int8
	incgo         bool   // m is executing a cgo call
	freeWait      uint32 // if == 0, safe to free g0 and delete m (atomic)
	fastrand      [2]uint32
	needextram    bool
	traceback     uint8
	ncgocall      uint64      // number of cgo calls in total
	ncgo          int32       // number of cgo calls currently in progress
	cgoCallersUse uint32      // if non-zero, cgoCallers in use temporarily
	cgoCallers    *cgoCallers // cgo traceback if crashing in cgo call
	//æ²¡æœ‰goroutineè¿è¡Œæ—¶ï¼Œå·¥ä½œçº¿ç¨‹ç¡çœ 
    //é€šè¿‡è¿™ä¸ªæ¥å”¤é†’å·¥ä½œçº¿ç¨‹
    park          note // ä¼‘çœ é”
    //è®°å½•æ‰€æœ‰å·¥ä½œçº¿ç¨‹çš„é“¾è¡¨
	alllink       *m // on allm
	schedlink     muintptr
    //å½“å‰çº¿ç¨‹å†…å­˜åˆ†é…çš„æœ¬åœ°ç¼“å­˜
	mcache        *mcache
    //å½“å‰Mé”å®šçš„Gï¼Œ
	lockedg       guintptr
	createstack   [32]uintptr // stack that created this thread.
	lockedExt     uint32      // tracking for external LockOSThread
	lockedInt     uint32      // tracking for internal lockOSThread
	nextwaitm     muintptr    // next m waiting for lock
	waitunlockf   func(*g, unsafe.Pointer) bool
	waitlock      unsafe.Pointer
	waittraceev   byte
	waittraceskip int
	startingtrace bool
	syscalltick   uint32
    //æ“ä½œç³»ç»Ÿçº¿ç¨‹id
	thread        uintptr // thread handle
	freelink      *m      // on sched.freem

	// these are here because they are too large to be on the stack
	// of low-level NOSPLIT functions.
	libcall   libcall
	libcallpc uintptr // for cpu profiler
	libcallsp uintptr
	libcallg  guintptr
	syscall   libcall // stores syscall parameters on windows

	vdsoSP uintptr // SP for traceback while in VDSO call (0 if not in call)
	vdsoPC uintptr // PC for traceback while in VDSO call

	dlogPerM

	mOS
}
&lt;/code&gt;&lt;/pre&gt;&lt;ul&gt;
&lt;li&gt;è®°å½•ç€Mçš„çº¿ç¨‹çš„ä¿¡æ¯ï¼ŒåŒ…æ‹¬ä¸€äº›P,Gä»¥åŠä¿¡å·å’Œè‡ªæ—‹é”ç­‰ä¿¡æ¯&lt;/li&gt;
&lt;li&gt;m æ•°é‡ï¼šå¯ä»¥é€šè¿‡SetMaxThreadså‡½æ•°ï¼Œè®¾ç½® M çš„æœ€å¤§æ•°é‡ï¼Œé»˜è®¤ä¸º10000(sched.maxmcount = 10000)ï¼Œå’ŒPä¸€æ ·åœ¨ç¨‹åºå¯åŠ¨æ—¶åˆ›å»ºã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;å…¨å±€é˜Ÿåˆ—gqueue&#34;&gt;å…¨å±€é˜Ÿåˆ—ï¼ˆgQueueï¼‰&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Pçš„æœ¬åœ°é˜Ÿåˆ—å¯ä»¥å­˜æ”¾ç€ä¸è¶…è¿‡256ä¸ªå¾…æ‰§è¡Œçš„G,Pæ˜¯æœ‰é™çš„ï¼Œå½“Gè¿‡å¤šæ—¶ï¼Œå³å½“Pæœ¬åœ°é˜Ÿåˆ—å­˜æ”¾ä¸ä¸‹æ—¶ï¼Œå°±éœ€è¦å°†Gå­˜æ”¾åœ¨å…¨å±€é˜Ÿåˆ—ä¸­ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;å…¨å±€é˜Ÿåˆ—ç»“æ„å¦‚ä¸‹ï¼š
type gQueue struct {
	head guintptr //é˜Ÿåˆ—å¤´
	tail guintptr //é˜Ÿåˆ—å°¾
}
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&#34;gpmgqueueå…³ç³»&#34;&gt;Gã€Pã€Mã€gQueueå…³ç³»&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Pä¸Mæ²¡æœ‰æ•°é‡å…³ç³»ï¼Œå½“ä¸€ä¸ªMå¤„äºé˜»å¡æ—¶ï¼ŒPå…ˆæ‰¾ç©ºé—²M,æ²¡æœ‰ç©ºé—²çš„Må°±åˆ›å»ºæ–°çš„M&lt;/li&gt;
&lt;li&gt;Gä¼˜å…ˆå­˜æ”¾åœ¨Pæœ¬åœ°é˜Ÿåˆ—ä¸­ï¼Œå½“Pä¸­Gæ»¡æ—¶ï¼Œä¼šå°†Pä¸­å‰ä¸€åŠGå­˜æ”¾åœ¨å…¨å±€ä¸­ã€‚å½“Pç©ºé—²æ—¶æ—¶ï¼Œä¼šä»å…¨å±€ä¸­æ‹¿å–Gæ”¾åœ¨æœ¬åœ°é˜Ÿåˆ—ã€‚å…¨å±€æ²¡æœ‰Gæ—¶ï¼Œä¼šä»å…¶Pçš„æœ¬åœ°é˜Ÿåˆ—ä¸­æ‹¿å–ä¸€åŠåˆ°æœ¬åœ°é˜Ÿåˆ—ã€‚&lt;/li&gt;
&lt;li&gt;å…³ç³»å¦‚å›¾æ‰€ç¤ºï¼š&lt;br&gt;
&lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 90; 
			flex-basis: 218px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/go-goroutine%E4%B8%8Egmp%E6%A8%A1%E5%9E%8B%E7%9A%84%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3/1.png&#34; data-size=&#34;662x728&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/go-goroutine%E4%B8%8Egmp%E6%A8%A1%E5%9E%8B%E7%9A%84%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3/1.png&#34;
			width=&#34;662&#34;
			height=&#34;728&#34;
			srcset=&#34;https://zcj-git520.github.io/p/go-goroutine%E4%B8%8Egmp%E6%A8%A1%E5%9E%8B%E7%9A%84%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3/1_huda718813a1636432ee91da972c85e460_240629_480x0_resize_box_3.png 480w, https://zcj-git520.github.io/p/go-goroutine%E4%B8%8Egmp%E6%A8%A1%E5%9E%8B%E7%9A%84%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3/1_huda718813a1636432ee91da972c85e460_240629_1024x0_resize_box_3.png 1024w&#34;
			loading=&#34;lazy&#34;
			&gt;
	&lt;/a&gt;
	
&lt;/figure&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;åˆ›å»ºgoroutine&#34;&gt;åˆ›å»ºgoroutine&lt;/h2&gt;
&lt;h3 id=&#34;newprocå‡½æ•°&#34;&gt;newproc()å‡½æ•°&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;goroutine æ˜¯ç”±å‡½æ•°newprocå‡½æ•°è¿›è¡Œåˆ›å»ºçš„ï¼Œnewprocæºç å¦‚ä¸‹&lt;/li&gt;
&lt;/ul&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;// å‚æ•°ï¼šåç¨‹å‡½æ•°çš„å‚æ•°å çš„å­—èŠ‚æ•°å’Œåç¨‹å…¥å£å‡½æ•°çš„funcvalæŒ‡é’ˆ
func newproc(siz int32, fn *funcval) {
    // è·å¾—åç¨‹å‚æ•°çš„åœ°å€= fnå‡½æ•°åœ°å€+åç§»å€¼
	argp := add(unsafe.Pointer(&amp;amp;fn), sys.PtrSize)
	gp := getg() // è·å¾—å½“å‰Gçš„æŒ‡é’ˆ
    //è°ƒç”¨è€…çš„pcï¼Œä¹Ÿå°±æ˜¯æ‰§è¡Œå®Œæ­¤å‡½æ•°è¿”å›è°ƒç”¨è€…æ—¶çš„ä¸‹ä¸€æ¡æŒ‡ä»¤åœ°å€
	pc := getcallerpc() 
    // åˆ‡æ¢åˆ°ï¼ˆç³»ç»Ÿæ ˆï¼‰g0æ ˆä¸­
	systemstack(func() {
    //æ‰§è¡Œè°ƒç”¨newproc1()å‡½æ•°æ‰§è¡Œåˆ›å»ºåç¨‹
		newg := newproc1(fn, argp, siz, gp, pc)
		_p_ := getg().m.p.ptr()
        // æŠŠå½“å‰çš„Gå­˜æ”¾åœ¨runqé˜Ÿåˆ—ä¸­
		runqput(_p_, newg, true) 
        // å¦‚æœå½“å‰ç”±ç©ºé—²çš„P,æ²¡æœ‰ç¡çœ çš„M,ä¸»åç¨‹å¼€å§‹è¿è¡Œæ—¶
		if mainStarted {
			wakep() // åˆ›å»ºm,å¹¶è®¾ç½®ä¸ºæ´»è·ƒçŠ¶æ€
		}
	})
}
&lt;/code&gt;&lt;/pre&gt;&lt;ul&gt;
&lt;li&gt;åœ¨newprocå‡½æ•°ä¸­ä¸ºä»€ä¹ˆè¦åˆ‡æ¢åœ¨g0æ ˆä¸­æ‰§è¡Œå‘¢ï¼Ÿæ˜¯å› ä¸ºnewproc1()å‡½æ•°ä¸æ”¯æŒæ ˆå¢é•¿ï¼Œåç¨‹çš„æ ˆç©ºé—´å°(å‡ KB)ï¼Œä¸ºäº†é˜²æ­¢è¿è¡Œåç¨‹å‡½æ•°æ—¶æ ˆæº¢å‡ºï¼Œéœ€è¦åœ¨g0çš„æ ˆä¸Šè¿è¡Œï¼Œg0æ˜¯åˆ†é…åœ¨çº¿ç¨‹çš„æ ˆç©ºé—´(4MB)ä¸Šã€‚g0çš„æ ˆç©ºé—´å¾ˆå¤§ï¼Œè¿è¡Œåç¨‹å‡½æ•°æ—¶æ ˆä¸æº¢å‡ºã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;newproc1å‡½æ•°&#34;&gt;newproc1()å‡½æ•°&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;newproc1()æ˜¯åˆ›å»ºåç¨‹ æºç å¦‚ä¸‹ï¼š&lt;/li&gt;
&lt;/ul&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;å‚æ•°ï¼šåç¨‹å…¥å£ã€å‚æ•°é¦–åœ°å€ã€å‚æ•°å¤§å°ã€çˆ¶åç¨‹æŒ‡é’ˆã€è¿”å›åœ°å€
func newproc1(fn *funcval, argp unsafe.Pointer, narg int32, callergp *g, callerpc uintptr) *g {
	_g_ := getg()  // è·å¾—å½“å‰çš„G

	if fn == nil {
		_g_.m.throwing = -1 // do not dump full stacks
		throw(&amp;quot;go of nil func value&amp;quot;)
	}
     // ä¸ºäº†ä¿è¯æ•°æ®ä¸€è‡´æ€§ä¼šç¦æ­¢å½“å‰mè¢«æŠ¢å 
	acquirem() // disable preemption because it can be holding p in a local var
	siz := narg
	siz = (siz + 7) &amp;amp;^ 7

	// We could allocate a larger initial stack if necessary.
	// Not worth it: this is almost always an error.
	// 4*sizeof(uintreg): extra space added below
	// sizeof(uintreg): caller&#39;s LR (arm) or return address (x86, in gostartcall).
	if siz &amp;gt;= _StackMin-4*sys.RegSize-sys.RegSize {
		throw(&amp;quot;newproc: function arguments too large for new goroutine&amp;quot;)
	}

	_p_ := _g_.m.p.ptr()
    // å°è¯•è·å–ä¸€ä¸ªç©ºé—²çš„G,å¦‚æœæ²¡æœ‰ç©ºé—²çš„G,å°±ä¼šåˆ›å»ºæ–°çš„G,åˆ†é…æ ˆç©ºé—´,å¹¶æ·»åŠ åˆ°å…¨å±€allgsä¸­
	newg := gfget(_p_)
    // å¦‚æœæ²¡æœ‰ç©ºé—²çš„G
	if newg == nil {
    // å°±ä¼šåˆ›å»ºæ–°çš„G,åˆ†é…æ ˆç©ºé—´å¤§å°ä¸ºæœ€å°çš„2KB
		newg = malg(_StackMin)
        // è®¾ç½®çŠ¶æ€ä¸ºç­‰å¾…
		casgstatus(newg, _Gidle, _Gdead)
        //å¹¶æ·»åŠ åˆ°å…¨å±€allgsä¸­
		allgadd(newg) // publishes with a g-&amp;gt;status of Gdead so GC scanner doesn&#39;t look at uninitialized stack.
	}
	if newg.stack.hi == 0 {
		throw(&amp;quot;newproc1: newg missing stack&amp;quot;)
	}

	if readgstatus(newg) != _Gdead {
		throw(&amp;quot;newproc1: new g is not Gdead&amp;quot;)
	}

	totalSize := 4*sys.RegSize + uintptr(siz) + sys.MinFrameSize // extra space in case of reads slightly beyond frame
	totalSize += -totalSize &amp;amp; (sys.SpAlign - 1)                  // align to spAlign
	sp := newg.stack.hi - totalSize
	spArg := sp
	if usesLR {
		// caller&#39;s LR
		*(*uintptr)(unsafe.Pointer(sp)) = 0
		prepGoExitFrame(sp)
		spArg += sys.MinFrameSize
	}
	if narg &amp;gt; 0 {
        // å¦‚æœåç¨‹å…¥å£å‡½æ•°ç”±å‚æ•°ï¼Œä¼šå°†å‚æ•°ç§»åŠ¨åœ¨åç¨‹æ ˆä¸­ 
		memmove(unsafe.Pointer(spArg), argp, uintptr(narg))
		// This is a stack-to-stack copy. If write barriers
		// are enabled and the source stack is grey (the
		// destination is always black), then perform a
		// barrier copy. We do this *after* the memmove
		// because the destination stack may have garbage on
		// it.
		if writeBarrier.needed &amp;amp;&amp;amp; !_g_.m.curg.gcscandone {
			f := findfunc(fn.fn)
			stkmap := (*stackmap)(funcdata(f, _FUNCDATA_ArgsPointerMaps))
			if stkmap.nbit &amp;gt; 0 {
				// We&#39;re in the prologue, so it&#39;s always stack map index 0.
				bv := stackmapdata(stkmap, 0)
				bulkBarrierBitmap(spArg, spArg, uintptr(bv.n)*sys.PtrSize, 0, bv.bytedata)
			}
		}
	}
    // åˆå§‹åŒ–newg.schedè°ƒåº¦ç›¸å…³çš„ä¿¡æ¯
	memclrNoHeapPointers(unsafe.Pointer(&amp;amp;newg.sched), unsafe.Sizeof(newg.sched))
	newg.sched.sp = sp //è®¾ç½®ä¸ºåç¨‹æ ˆæŒ‡é’ˆ
	newg.stktopsp = sp
    // è®¾ç½®ä¸ºæŒ‡å‘åç¨‹å…¥å£å‡½æ•°çš„å…¥å£ï¼Œå½“åç¨‹è°ƒåº¦æ‰§è¡Œæ—¶ï¼Œè¿è¡Œåç¨‹å‡½æ•°
	newg.sched.pc = funcPC(goexit) + sys.PCQuantum // +PCQuantum so that previous instruction is in same function
	newg.sched.g = guintptr(unsafe.Pointer(newg))
	gostartcallfn(&amp;amp;newg.sched, fn)
    // è®¾ç½®ä¸ºçˆ¶åç¨‹è°ƒç”¨newprocå‡½æ•°ç»“æŸåçš„è¿”å›åœ°å€
	newg.gopc = callerpc
	newg.ancestors = saveAncestors(callergp)
    // è®¾ç½®startpcä¸ºåç¨‹å…¥å­”å‡½æ•°çš„èµ·å§‹åœ°å€
	newg.startpc = fn.fn 
	if _g_.m.curg != nil {
		newg.labels = _g_.m.curg.labels
	}
	if isSystemGoroutine(newg, false) {
		atomic.Xadd(&amp;amp;sched.ngsys, +1)
	}
    // è®¾ç½®åç¨‹ä¸ºè¿è¡ŒçŠ¶æ€
	casgstatus(newg, _Gdead, _Grunnable)

	if _p_.goidcache == _p_.goidcacheend {
		// Sched.goidgen is the last allocated id,
		// this batch must be [sched.goidgen+1, sched.goidgen+GoidCacheBatch].
		// At startup sched.goidgen=0, so main goroutine receives goid=1.
		_p_.goidcache = atomic.Xadd64(&amp;amp;sched.goidgen, _GoidCacheBatch)
		_p_.goidcache -= _GoidCacheBatch - 1
		_p_.goidcacheend = _p_.goidcache + _GoidCacheBatch
	}
    // ç»™åç¨‹èµ‹äºˆä¸€ä¸ªå”¯ä¸€çš„goid
	newg.goid = int64(_p_.goidcache)
	_p_.goidcache++
	if raceenabled {
		newg.racectx = racegostart(callerpc)
	}
	if trace.enabled {
		traceGoCreate(newg, newg.startpc)
	}
    // å…è®¸å½“å‰mè¢«æŠ¢å 
	releasem(_g_.m)

	return newg
}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;å›¾ç¤ºå¦‚ä¸‹&lt;br&gt;
&lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 214; 
			flex-basis: 514px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/go-goroutine%E4%B8%8Egmp%E6%A8%A1%E5%9E%8B%E7%9A%84%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3/2.png&#34; data-size=&#34;1903x887&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/go-goroutine%E4%B8%8Egmp%E6%A8%A1%E5%9E%8B%E7%9A%84%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3/2.png&#34;
			width=&#34;1903&#34;
			height=&#34;887&#34;
			srcset=&#34;https://zcj-git520.github.io/p/go-goroutine%E4%B8%8Egmp%E6%A8%A1%E5%9E%8B%E7%9A%84%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3/2_hu005dba7d92ca61057a969757b05a2c3b_575926_480x0_resize_box_3.png 480w, https://zcj-git520.github.io/p/go-goroutine%E4%B8%8Egmp%E6%A8%A1%E5%9E%8B%E7%9A%84%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3/2_hu005dba7d92ca61057a969757b05a2c3b_575926_1024x0_resize_box_3.png 1024w&#34;
			loading=&#34;lazy&#34;
			&gt;
	&lt;/a&gt;
	
&lt;/figure&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æ€»ç»“goroutineåˆ›å»ºè¿‡ç¨‹&lt;/li&gt;
&lt;/ul&gt;
&lt;ol&gt;
&lt;li&gt;ä¸ºäº†ä¿è¯æ•°æ®ä¸€è‡´æ€§ä¼šç¦æ­¢å½“å‰mè¢«æŠ¢å &lt;/li&gt;
&lt;li&gt;å°è¯•è·å–ä¸€ä¸ªç©ºé—²çš„G,å¦‚æœæ²¡æœ‰ç©ºé—²çš„G,å°±ä¼šåˆ›å»ºæ–°çš„G,åˆ†é…æ ˆç©ºé—´,çŠ¶æ€ä¸ºç­‰å¾…å¹¶æ·»åŠ åˆ°å…¨å±€allgsä¸­&lt;/li&gt;
&lt;li&gt;å¦‚æœåç¨‹å…¥å£å‡½æ•°ç”±å‚æ•°ï¼Œä¼šå°†å‚æ•°ç§»åŠ¨åœ¨åç¨‹æ ˆä¸­&lt;/li&gt;
&lt;li&gt;åˆå§‹åŒ–newg.schedè°ƒåº¦ç›¸å…³çš„ä¿¡æ¯ï¼Œè®¾ç½®çŠ¶æ€è¿è¡Œ&lt;/li&gt;
&lt;li&gt;å¾—åˆ°å”¯ä¸€çš„goid, å¹¶æ·»åŠ åˆ°runqé˜Ÿåˆ—ä¸­&lt;/li&gt;
&lt;li&gt;å¦‚æœå½“å‰æœ‰ç©ºé—²çš„P,æ²¡æœ‰ç¡çœ çš„M,å¹¶ä¸”ä¸»åç¨‹å¼€å§‹è¿è¡Œæ—¶ï¼Œå°±ä¼šåˆ›å»ºæ–°çš„æ´»è·ƒçš„M&lt;/li&gt;
&lt;li&gt;å½“gè¿è¡Œç»“æŸåï¼Œè®¾ç½®å…è®¸å½“å‰mè¢«æŠ¢å &lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&#34;goroutineçš„è®©å‡ºä¸æ¢å¤è°ƒåº¦æŠ¢å ç›‘æ§&#34;&gt;goroutineçš„è®©å‡ºä¸æ¢å¤ã€è°ƒåº¦ã€æŠ¢å ã€ç›‘æ§&lt;/h2&gt;
&lt;h3 id=&#34;goroutine-è®©å‡ºä¸æ¢å¤&#34;&gt;goroutine è®©å‡ºä¸æ¢å¤&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;åç¨‹çš„è®©å‡ºæ˜¯ç”±å‡½æ•°gopark()æ‰§è¡Œçš„&lt;/li&gt;
&lt;/ul&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;æºç å¦‚ä¸‹ï¼š
func gopark(unlockf func(*g, unsafe.Pointer) bool, lock unsafe.Pointer, reason waitReason, traceEv byte, traceskip int) {
	if reason != waitReasonSleep {
		checkTimeouts() // timeouts may expire while two goroutines keep the scheduler busy
	}
    // ç¦æ­¢å½“å‰mè¢«æŠ¢å 
	mp := acquirem()
	gp := mp.curg
	status := readgstatus(gp)
    // åˆ¤æ–­åç¨‹çš„æ˜¯å¦åœ¨è¿è¡ŒçŠ¶æ€
	if status != _Grunning &amp;amp;&amp;amp; status != _Gscanrunning {
		throw(&amp;quot;gopark: bad g status&amp;quot;)
	}
	mp.waitlock = lock
	mp.waitunlockf = unlockf
	gp.waitreason = reason
	mp.waittraceev = traceEv
	mp.waittraceskip = traceskip
    // è§£é™¤å¯¹mçš„æŠ¢å 
	releasem(mp)
	// can&#39;t do anything that might move the G between Ms here.
    // ä¸èƒ½åšä»»ä½•å¯èƒ½åœ¨ Ms ä¹‹é—´ç§»åŠ¨ G çš„äº‹æƒ…ã€‚
    // ä¿å­˜åç¨‹ï¼Œåˆ‡æ¢åœ¨go
	mcall(park_m)
}
func park_m(gp *g) {
	_g_ := getg()

	if trace.enabled {
		traceGoPark(_g_.m.waittraceev, _g_.m.waittraceskip)
	}
    //æ›´æ”¹åç¨‹ç”±è¿è¡ŒçŠ¶æ€åˆ°ç­‰å¾…çŠ¶æ€
	casgstatus(gp, _Grunning, _Gwaiting)
	dropg()
    &amp;quot;&amp;quot;&amp;quot;
    func dropg() {
    	_g_ := getg()
        // æŠŠmå½“å‰æ‰§è¡Œçš„ç½®ä¸ºnil(mä¸åœ¨è¿è¡Œè¿™ä¸ªå½“å‰å†™åç¨‹ï¼Œåç¨‹å°±æŒ‚èµ·äº†)
    	setMNoWB(&amp;amp;_g_.m.curg.m, nil)
    	setGNoWB(&amp;amp;_g_.m.curg, nil)
    }
    &amp;quot;&amp;quot;&amp;quot;

	if fn := _g_.m.waitunlockf; fn != nil {
		ok := fn(gp, _g_.m.waitlock)
		_g_.m.waitunlockf = nil
		_g_.m.waitlock = nil
		if !ok {
			if trace.enabled {
				traceGoUnpark(gp, 2)
			}
			casgstatus(gp, _Gwaiting, _Grunnable)
			execute(gp, true) // Schedule it back, never returns.
		}
	}
	schedule() // å¯»æ‰¾ä¸‹ä¸€ä¸ªG
}
//åœ¨Gä¸­ç”±å®šæ—¶è°ƒç”¨å›è°ƒå‡½æ•°f 
type timer struct {
	// If this timer is on a heap, which P&#39;s heap it is on.
	// puintptr rather than *p to match uintptr in the versions
	// of this struct defined in other packages.
	pp puintptr

	// Timer wakes up at when, and then at when+period, ... (period &amp;gt; 0 only)
	// each time calling f(arg, now) in the timer goroutine, so f must be
	// a well-behaved function and not block.
	//
	// when must be positive on an active timer.
	when   int64
	period int64
	f      func(interface{}, uintptr)
	arg    interface{}
	seq    uintptr

	// What to set the when field to in timerModifiedXX status.
	nextwhen int64

	// The status field holds one of the values below.
	status uint32
}
// Mark gp ready to run.
// å°†ç­‰å¾…åç¨‹çŠ¶æ€ç½®ä¸ºè¿è¡Œçš„çŠ¶æ€
func ready(gp *g, traceskip int, next bool) {
	if trace.enabled {
		traceGoUnpark(gp, traceskip)
	}

	status := readgstatus(gp)

	// Mark runnable.
	_g_ := getg()
    //// ç¦æ­¢å½“å‰mè¢«æŠ¢å 
	mp := acquirem() // disable preemption because it can be holding p in a local var
	if status&amp;amp;^_Gscan != _Gwaiting {
		dumpgstatus(gp)
		throw(&amp;quot;bad g-&amp;gt;status in ready&amp;quot;)
	}

	// status is Gwaiting or Gscanwaiting, make Grunnable and put on runq
	casgstatus(gp, _Gwaiting, _Grunnable) // æŠŠåç¨‹ç­‰å¾…çš„è½¬æ€ç½®ä¸ºå¯è¿è¡ŒçŠ¶æ€
	runqput(_g_.m.p.ptr(), gp, next)  // æ·»åŠ åœ¨è¿è¡Œé˜Ÿåˆ—ä¸­
	wakep()// å¦‚æœæ²¡æœ‰å¯æ‰§è¡Œçš„M,å°±åˆ›å»ºæ–°çš„m
	releasem(mp)  // é‡Šæ”¾å½“å‰çš„m
}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;å¦‚å›¾æ‰€ç¤º  &lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 93; 
			flex-basis: 224px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/go-goroutine%E4%B8%8Egmp%E6%A8%A1%E5%9E%8B%E7%9A%84%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3/4.png&#34; data-size=&#34;616x659&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/go-goroutine%E4%B8%8Egmp%E6%A8%A1%E5%9E%8B%E7%9A%84%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3/4.png&#34;
			width=&#34;616&#34;
			height=&#34;659&#34;
			srcset=&#34;https://zcj-git520.github.io/p/go-goroutine%E4%B8%8Egmp%E6%A8%A1%E5%9E%8B%E7%9A%84%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3/4_hu5613a8da5b016601d36fb944722fdf94_151142_480x0_resize_box_3.png 480w, https://zcj-git520.github.io/p/go-goroutine%E4%B8%8Egmp%E6%A8%A1%E5%9E%8B%E7%9A%84%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3/4_hu5613a8da5b016601d36fb944722fdf94_151142_1024x0_resize_box_3.png 1024w&#34;
			loading=&#34;lazy&#34;
			&gt;
	&lt;/a&gt;
	
&lt;/figure&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æ€»ç»“&lt;/li&gt;
&lt;/ul&gt;
&lt;ol&gt;
&lt;li&gt;gopark()æ˜¯è®©å‡ºå‡½æ•°ï¼Œç¦æ­¢å½“å‰mè¢«æŠ¢å ï¼Œåˆ¤æ–­å½“å‰çš„åç¨‹çŠ¶æ€æ˜¯å¦ä¸ºè¿è¡ŒçŠ¶æ€ã€‚&lt;/li&gt;
&lt;li&gt;dropg()è®©å½“å‰çš„mä¸åœ¨æ‰§è¡Œå½“å‰çš„G,ä¿®æ”¹å½“å‰gçš„çŠ¶æ€ä¸ºç­‰å¾…(åç¨‹æŒ‚èµ·)ï¼Œè°ƒç”¨schedule() å¯»æ‰¾ä¸‹ä¸€ä¸ªå¯æ‰§è¡ŒG&lt;/li&gt;
&lt;li&gt;timers ç­‰å¾…çš„gä¸­æ•°æ®ç»“æ„ï¼Œå®šæ—¶è°ƒç”¨å›è°ƒå‡½æ•°fï¼Œå°†gç½®ä¸ºäº†è¿è¡ŒçŠ¶æ€&lt;/li&gt;
&lt;li&gt;ready()å‡½æ•°æ˜¯å°†å”¤é†’ç­‰å¾…G,å°†Gçš„çŠ¶æ€æ›´æ”¹ä¸ºå¯è¿è¡ŒçŠ¶æ€ï¼Œå¹¶æ·»åŠ åœ¨è¿è¡Œçš„é˜Ÿåˆ—ä¸­mï¼Œå¦‚æœæ²¡æœ‰å¯æ‰§è¡Œçš„M,å°±åˆ›å»ºæ–°çš„m&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;goroutine-ç›‘æ§&#34;&gt;goroutine ç›‘æ§&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;ä½¿ç”¨checkTimers()æ£€æŸ¥åˆ°æ—¶é—´è¿è¡Œçš„å”¤é†’g&lt;/li&gt;
&lt;/ul&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;æºç å¦‚ä¸‹
checkTimers(pp *p, now int64) (rnow, pollUntil int64, ran bool) {
  	// If it&#39;s not yet time for the first timer, or the first adjusted
  	// timer, then there is nothing to do.
  	next := int64(atomic.Load64(&amp;amp;pp.timer0When))
  	nextAdj := int64(atomic.Load64(&amp;amp;pp.timerModifiedEarliest))
  	if next == 0 || (nextAdj != 0 &amp;amp;&amp;amp; nextAdj &amp;lt; next) {
  		next = nextAdj
  	}
  
  	if next == 0 {
  		// No timers to run or adjust.
  		return now, 0, false
  	}
  
  	if now == 0 {
  		now = nanotime()
  	}
  	if now &amp;lt; next {
  		// Next timer is not ready to run, but keep going
  		// if we would clear deleted timers.
  		// This corresponds to the condition below where
  		// we decide whether to call clearDeletedTimers.
  		if pp != getg().m.p.ptr() || int(atomic.Load(&amp;amp;pp.deletedTimers)) &amp;lt;= int(atomic.Load(&amp;amp;pp.numTimers)/4) {
  			return now, next, false
  		}
  	}
  
  	lock(&amp;amp;pp.timersLock)
  
  	if len(pp.timers) &amp;gt; 0 {
  		adjusttimers(pp, now)
  		for len(pp.timers) &amp;gt; 0 {
  			// Note that runtimer may temporarily unlock
  			// pp.timersLock.
  			if tw := runtimer(pp, now); tw != 0 {
  				if tw &amp;gt; 0 {
  					pollUntil = tw
  				}
  				break
  			}
  			ran = true
  		}
  	}
  
  	// If this is the local P, and there are a lot of deleted timers,
  	// clear them out. We only do this for the local P to reduce
  	// lock contention on timersLock.
  	if pp == getg().m.p.ptr() &amp;amp;&amp;amp; int(atomic.Load(&amp;amp;pp.deletedTimers)) &amp;gt; len(pp.timers)/4 {
  		clearDeletedTimers(pp)
  	}
  
  	unlock(&amp;amp;pp.timersLock)
  
  	return now, pollUntil, ran
  }
&lt;/code&gt;&lt;/pre&gt;&lt;ul&gt;
&lt;li&gt;åç¨‹çš„ç›‘æ§æ˜¯ç”±ä¸“é—¨çš„ç›‘æ§åç¨‹ç¨‹æ¥è¿è¡Œï¼Œç›‘æ§åç¨‹æ˜¯ç”±ä¸»åç¨‹åˆ›å»ºè€Œæ¥
ï¼Œç›‘æ§åç¨‹ä¸gpmä¸­çš„åç¨‹ä¸ä¸€æ ·ï¼Œå®ƒä¸æ˜¯ç”±gpmè¿›è¡Œè°ƒåº¦ï¼Œå½“ç„¶äº†ä¹Ÿä¸éœ€è¦P,
ç›‘æ§timerï¼Œå¹¶æŒ‰éœ€è°ƒæ•´gçš„ä¼‘çœ æ—¶é—´ï¼Œå¦‚æœæ²¡æœ‰å¯æ‰§è¡Œçš„M,å°±åˆ›å»ºæ–°çš„mæ‰§è¡Œè¢«å”¤é†’çš„G,
ç¡®ä¿è¢«å”¤é†’gè¢«æ‰§è¡Œã€‚
å¦‚å›¾  &lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 153; 
			flex-basis: 368px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/go-goroutine%E4%B8%8Egmp%E6%A8%A1%E5%9E%8B%E7%9A%84%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3/5.png&#34; data-size=&#34;1256x819&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/go-goroutine%E4%B8%8Egmp%E6%A8%A1%E5%9E%8B%E7%9A%84%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3/5.png&#34;
			width=&#34;1256&#34;
			height=&#34;819&#34;
			srcset=&#34;https://zcj-git520.github.io/p/go-goroutine%E4%B8%8Egmp%E6%A8%A1%E5%9E%8B%E7%9A%84%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3/5_hu682cbf00a0aebc2341d65e28e3999df2_184463_480x0_resize_box_3.png 480w, https://zcj-git520.github.io/p/go-goroutine%E4%B8%8Egmp%E6%A8%A1%E5%9E%8B%E7%9A%84%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3/5_hu682cbf00a0aebc2341d65e28e3999df2_184463_1024x0_resize_box_3.png 1024w&#34;
			loading=&#34;lazy&#34;
			&gt;
	&lt;/a&gt;
	
&lt;/figure&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;goroutine-æŠ¢å &#34;&gt;goroutine æŠ¢å &lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;å¯¹è¿è¡Œè¿‡é•¿çš„gè¿›è¡ŒæŠ¢å ï¼Œå³å½“gè¿è¡Œæ—¶é—´è¶…è¿‡è¿è¡Œé˜ˆå€¼çš„gå¼ºåˆ¶è®©å‡ºm
è¿è¡Œæ—¶é—´æ˜¯ç”±Pçš„ç»“æ„syscalltickã€schedtickã€timer0Whenç­‰è®°å½•ã€‚&lt;/li&gt;
&lt;li&gt;é€šè¿‡æ ˆå¢é•¿æ—¶ï¼šå½“stackguard = stackPreempt,ä¸æ‰§è¡Œæ ˆå¢é•¿ï¼Œè€Œæ˜¯æ‰§è¡Œåç¨‹è°ƒåº¦,
è¿™æ ·å°±è®©åç¨‹è®©å‡ºæ ˆã€‚&lt;/li&gt;
&lt;li&gt;è¿™ç§æŠ¢å ä¾èµ–æ ˆå¢é•¿ï¼Œæœ‰ç¼ºé™·ã€‚æ‰€ä»¥æœ‰asyncPreempté€šè¿‡ä¿¡å·æ–¹å¼è¿›è¡Œå¼‚æ­¥æŠ¢å &lt;br&gt;
å¦‚å›¾æ‰€ç¤º  &lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 135; 
			flex-basis: 325px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/go-goroutine%E4%B8%8Egmp%E6%A8%A1%E5%9E%8B%E7%9A%84%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3/6.png&#34; data-size=&#34;1157x853&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/go-goroutine%E4%B8%8Egmp%E6%A8%A1%E5%9E%8B%E7%9A%84%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3/6.png&#34;
			width=&#34;1157&#34;
			height=&#34;853&#34;
			srcset=&#34;https://zcj-git520.github.io/p/go-goroutine%E4%B8%8Egmp%E6%A8%A1%E5%9E%8B%E7%9A%84%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3/6_huc14b31ec4abc9db0f402c5310d9f9d21_373269_480x0_resize_box_3.png 480w, https://zcj-git520.github.io/p/go-goroutine%E4%B8%8Egmp%E6%A8%A1%E5%9E%8B%E7%9A%84%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3/6_huc14b31ec4abc9db0f402c5310d9f9d21_373269_1024x0_resize_box_3.png 1024w&#34;
			loading=&#34;lazy&#34;
			&gt;
	&lt;/a&gt;
	
&lt;/figure&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;goroutine-è°ƒåº¦&#34;&gt;goroutine è°ƒåº¦&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;è°ƒç”¨schedule()å‡½æ•°è¿›è¡Œåç¨‹çš„è°ƒåº¦&lt;/li&gt;
&lt;/ul&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;æºç å¦‚ä¸‹ï¼š
func schedule() {
	_g_ := getg() // è·å¾—å½“å‰çš„G

	if _g_.m.locks != 0 {
		throw(&amp;quot;schedule: holding locks&amp;quot;)
	}
    // åˆ¤æ–­å½“å‰çš„Må’Œå½“å‰çš„Gæ˜¯å¦ç»‘å®š
	if _g_.m.lockedg != 0 {
        // å¦‚æœå½“å‰çš„Mç»‘å®šG,å°±é˜»å¡m(ä¼‘çœ M)
		stoplockedm()
		execute(_g_.m.lockedg.ptr(), false) // Never returns.
	}

	// We should not schedule away from a g that is executing a cgo call,
	// since the cgo call is using the m&#39;s g0 stack.
	if _g_.m.incgo {
		throw(&amp;quot;schedule: in cgo&amp;quot;)
	}

top:
	pp := _g_.m.p.ptr()
	pp.preempt = false
    // åˆ¤æ–­Gcæ˜¯å¦åœ¨ç­‰å¾…æ‰§è¡Œ
	if sched.gcwaiting != 0 {
        //æ˜¯åœ¨ç­‰å¾…æ‰§è¡Œï¼Œå…ˆæ‰§è¡Œgcï¼Œæ‰§è¡Œå®Œåœ¨æ‰§è¡Œåç»­æ“ä½œ
		gcstopm() 
		goto top
	}
	if pp.runSafePointFn != 0 {
		runSafePointFn()
	}

	// Sanity check: if we are spinning, the run queue should be empty.
	// Check this before calling checkTimers, as that might call
	// goready to put a ready goroutine on the local run queue.
	if _g_.m.spinning &amp;amp;&amp;amp; (pp.runnext != 0 || pp.runqhead != pp.runqtail) {
		throw(&amp;quot;schedule: spinning with local work&amp;quot;)
	}
    //æ£€æŸ¥æ˜¯å¦æœ‰è¦è¢«æ‰§è¡Œçš„Timer
	checkTimers(pp, 0)

	var gp *g
	var inheritTime bool

	// Normal goroutines will check for need to wakeP in ready,
	// but GCworkers and tracereaders will not, so the check must
	// be done here instead.
    // æ™®é€šçš„ goroutine ä¼šæ£€æŸ¥æ˜¯å¦éœ€è¦åœ¨å‡†å¤‡å¥½æ—¶å”¤é†’ï¼Œ 
    // ä½† GCworkers å’Œè·Ÿè¸ªè¯»å–å™¨ä¸ä¼šï¼Œæ‰€ä»¥æ£€æŸ¥å¿…é¡» 
    // åœ¨è¿™é‡Œå®Œæˆã€‚
	tryWakeP := false
	if trace.enabled || trace.shutdown {
		gp = traceReader()
		if gp != nil {
			casgstatus(gp, _Gwaiting, _Grunnable)
			traceGoUnpark(gp, 0)
			tryWakeP = true
		}
	}
	if gp == nil &amp;amp;&amp;amp; gcBlackenEnabled != 0 {
		gp = gcController.findRunnableGCWorker(_g_.m.p.ptr())
		tryWakeP = tryWakeP || gp != nil
	}
	if gp == nil {
		// Check the global runnable queue once in a while to ensure fairness.
		// Otherwise two goroutines can completely occupy the local runqueue
		// by constantly respawning each other.
        / æ¯éš”ä¸€æ®µæ—¶é—´æ£€æŸ¥ä¸€ä¸‹å…¨å±€å¯è¿è¡Œé˜Ÿåˆ—ä»¥ç¡®ä¿å…¬å¹³ã€‚ 
        // å¦åˆ™ä¸¤ä¸ª goroutine å¯ä»¥å®Œå…¨å ç”¨æœ¬åœ°è¿è¡Œé˜Ÿåˆ—
        // é€šè¿‡ä¸æ–­ç›¸äº’é‡ç”Ÿã€‚
        // æœ‰%61çš„æ¦‚ç‡æŠŠGä»å…¨å±€è¿è¡Œé˜Ÿåˆ—ä¸­æ¬ç§»åˆ°æœ¬åœ°å¯è¿è¡Œé˜Ÿåˆ—ï¼Œä¿éšœæœ¬åœ°å¯è¿è¡Œé˜Ÿåˆ—
            æœ‰Gè¿è¡Œï¼Œå…¨å±€é˜Ÿåˆ—ä¹Ÿèƒ½æ”¾åœ¨æœ¬éƒ½é˜Ÿåˆ—ä¸­
		if _g_.m.p.ptr().schedtick%61 == 0 &amp;amp;&amp;amp; sched.runqsize &amp;gt; 0 {
			lock(&amp;amp;sched.lock)
			gp = globrunqget(_g_.m.p.ptr(), 1)
			unlock(&amp;amp;sched.lock)
		}
	}
	if gp == nil {
        // æ²¡æœ‰å¾…è¿è¡Œçš„G å°±ç°åœ¨æœ¬åœ°å¯è¿è¡Œé˜Ÿåˆ—æŸ¥æ‰¾
		gp, inheritTime = runqget(_g_.m.p.ptr())
		// We can see gp != nil here even if the M is spinning,
		// if checkTimers added a local goroutine via goready.
	}
	if gp == nil {
        // æœ¬åœ°é˜Ÿåˆ—æ²¡æœ‰ï¼Œå°±è°ƒç”¨findrunnable()ï¼Œç›´åˆ°æœ‰å¾…æ‰§è¡Œçš„gæ‰è¿”å›(å…ˆåœ¨æœ¬åœ°
            è¿è¡Œé˜Ÿåˆ—ï¼Œå…¨å±€é˜Ÿåˆ—ã€ç­‰å¾…çš„io, å…¶ä»–çš„P)
		gp, inheritTime = findrunnable() // blocks until work is available
	}

	// This thread is going to run a goroutine and is not spinning anymore,
	// so if it was marked as spinning we need to reset it now and potentially
	// start a new spinning M.
	if _g_.m.spinning {
		resetspinning()
	}

	if sched.disable.user &amp;amp;&amp;amp; !schedEnabled(gp) {
		// Scheduling of this goroutine is disabled. Put it on
		// the list of pending runnable goroutines for when we
		// re-enable user scheduling and look again.
		lock(&amp;amp;sched.lock)
		if schedEnabled(gp) {
			// Something re-enabled scheduling while we
			// were acquiring the lock.
			unlock(&amp;amp;sched.lock)
		} else {
			sched.disable.runnable.pushBack(gp)
			sched.disable.n++
			unlock(&amp;amp;sched.lock)
			goto top
		}
	}

	// If about to schedule a not-normal goroutine (a GCworker or tracereader),
	// wake a P if there is one.
	if tryWakeP {
		wakep()
	}
    // åˆ¤æ–­è·å¾—çš„Gæœ‰æ²¡æœ‰ç»‘å®šçš„M,æœ‰å°±é˜»å¡g, å†æ¬¡è¿›è¡Œè°ƒåº¦
	if gp.lockedm != 0 {
		// Hands off own p to the locked m,
		// then blocks waiting for a new p.
		startlockedm(gp)
		goto top
	}
    // ä½¿ç”¨executeå‡½æ•°è®©mæ‰§è¡Œg
	execute(gp, inheritTime)
}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;å¦‚å›¾æ‰€ç¤º  &lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 103; 
			flex-basis: 248px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/go-goroutine%E4%B8%8Egmp%E6%A8%A1%E5%9E%8B%E7%9A%84%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3/7.png&#34; data-size=&#34;896x865&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/go-goroutine%E4%B8%8Egmp%E6%A8%A1%E5%9E%8B%E7%9A%84%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3/7.png&#34;
			width=&#34;896&#34;
			height=&#34;865&#34;
			srcset=&#34;https://zcj-git520.github.io/p/go-goroutine%E4%B8%8Egmp%E6%A8%A1%E5%9E%8B%E7%9A%84%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3/7_huebf4099418eefb5d5e40ab8835dd1ae1_193577_480x0_resize_box_3.png 480w, https://zcj-git520.github.io/p/go-goroutine%E4%B8%8Egmp%E6%A8%A1%E5%9E%8B%E7%9A%84%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3/7_huebf4099418eefb5d5e40ab8835dd1ae1_193577_1024x0_resize_box_3.png 1024w&#34;
			loading=&#34;lazy&#34;
			&gt;
	&lt;/a&gt;
	
&lt;/figure&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æ€»ç»“&lt;/li&gt;
&lt;/ul&gt;
&lt;ol&gt;
&lt;li&gt;åˆ¤æ–­å½“å‰çš„Må’Œå½“å‰çš„Gæ˜¯å¦ç»‘å®šï¼Œå¦‚æœå½“å‰çš„Mç»‘å®šG,å°±é˜»å¡m(ä¼‘çœ M)&lt;/li&gt;
&lt;li&gt;åˆ¤æ–­Gcæ˜¯å¦åœ¨ç­‰å¾…æ‰§è¡Œï¼Œæ˜¯åœ¨ç­‰å¾…æ‰§è¡Œï¼Œå…ˆæ‰§è¡Œgcï¼Œæ‰§è¡Œå®Œåœ¨æ‰§è¡Œåç»­æ“ä½œ&lt;/li&gt;
&lt;li&gt;æ£€æŸ¥æ˜¯å¦æœ‰è¦è¢«æ‰§è¡Œçš„Timer&lt;/li&gt;
&lt;li&gt;æ™®é€šçš„ goroutine ä¼šæ£€æŸ¥æ˜¯å¦éœ€è¦åœ¨å‡†å¤‡å¥½æ—¶å”¤é†’ï¼Œä½† GCworkers å’Œè·Ÿè¸ªè¯»å–å™¨ä¸ä¼šï¼Œæ‰€ä»¥æ£€æŸ¥å¿…é¡»&lt;/li&gt;
&lt;li&gt;æœ‰%61çš„æ¦‚ç‡æŠŠGä»å…¨å±€è¿è¡Œé˜Ÿåˆ—ä¸­æ¬ç§»åˆ°æœ¬åœ°å¯è¿è¡Œé˜Ÿåˆ—ï¼Œä¿éšœæœ¬åœ°å¯è¿è¡Œé˜Ÿåˆ—æœ‰Gè¿è¡Œï¼Œå…¨å±€é˜Ÿåˆ—ä¹Ÿèƒ½æ”¾åœ¨æœ¬éƒ½é˜Ÿåˆ—ä¸­&lt;/li&gt;
&lt;li&gt;æ²¡æœ‰å¾…è¿è¡Œçš„Gå°±ç°åœ¨æœ¬åœ°å¯è¿è¡Œé˜Ÿåˆ—æŸ¥æ‰¾ï¼Œæœ¬åœ°é˜Ÿåˆ—æ²¡æœ‰ï¼Œå°±è°ƒç”¨findrunnable()ï¼Œç›´åˆ°æœ‰å¾…æ‰§è¡Œçš„gæ‰è¿”å›(å…ˆåœ¨æœ¬åœ°
è¿è¡Œé˜Ÿåˆ—ï¼Œå…¨å±€é˜Ÿåˆ—ã€ç­‰å¾…çš„io, å…¶ä»–çš„Pä¸­åˆ†é…G)&lt;/li&gt;
&lt;li&gt;åˆ¤æ–­è·å¾—çš„Gæœ‰æ²¡æœ‰ç»‘å®šçš„M,æœ‰å°±é˜»å¡g, å†æ¬¡è¿›è¡Œè°ƒåº¦&lt;/li&gt;
&lt;li&gt;ä½¿ç”¨executeå‡½æ•°è®©mæ‰§è¡Œg,å¾…è¿è¡Œgç»‘å®šm,è°ƒç”¨gogo(&amp;amp;gp.sched)åç¨‹çš„ç°åœºæ¢å¤ç­‰&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&#34;è°ƒåº¦å™¨çš„è®¾è®¡ç­–ç•¥&#34;&gt;è°ƒåº¦å™¨çš„è®¾è®¡ç­–ç•¥&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;å‡å°‘çº¿ç¨‹çš„åˆ›å»ºä¸é”€æ¯cupçš„å¼€é”€ï¼ŒGPMæ˜¯çº¿ç¨‹çš„å¤ç”¨ã€‚å³å½“æ²¡æœ‰ å¯è¿è¡Œçš„Gæ—¶ï¼Œå°†Mä¼‘çœ ,Pç©ºé—²ã€‚å½“æœ‰å¯æ‰§è¡ŒGæ˜¯æ‰¾ç©ºé—²çš„Pï¼Œåœ¨å°†Må”¤é†’ï¼Œæ‰§è¡ŒGï¼Œç›´åˆ° main.main é€€å‡ºï¼Œruntime.main æ‰§è¡Œ Defer å’Œ Panic å¤„ç†ï¼Œæˆ–è°ƒç”¨ runtime.exit é€€å‡ºç¨‹åº&lt;/li&gt;
&lt;li&gt;work stealing æœºåˆ¶ï¼šå½“æœ¬çº¿ç¨‹æ— å¯è¿è¡Œçš„ G æ—¶ï¼Œå°è¯•ä»å…¶ä»–çº¿ç¨‹ç»‘å®šçš„ P å·å– Gï¼Œè€Œä¸æ˜¯é”€æ¯çº¿ç¨‹ã€‚&lt;/li&gt;
&lt;li&gt;hand off æœºåˆ¶ï¼š&lt;br&gt;
1.å½“æœ¬çº¿ç¨‹å› ä¸º G è¿›è¡Œç³»ç»Ÿè°ƒç”¨é˜»å¡æ—¶ï¼Œçº¿ç¨‹é‡Šæ”¾ç»‘å®šçš„ Pï¼ŒæŠŠ P è½¬ç§»ç»™å…¶ä»–ç©ºé—²çš„çº¿ç¨‹æ‰§è¡Œã€‚&lt;br&gt;
2.åˆ©ç”¨å¹¶è¡Œï¼šGOMAXPROCS è®¾ç½® P çš„æ•°é‡ï¼Œæœ€å¤šæœ‰ GOMAXPROCS ä¸ªçº¿ç¨‹åˆ†å¸ƒåœ¨å¤šä¸ª CPU ä¸ŠåŒæ—¶è¿è¡Œã€‚GOMAXPROCS ä¹Ÿé™åˆ¶äº†å¹¶å‘çš„ç¨‹åº¦ï¼Œæ¯”å¦‚ GOMAXPROCS = æ ¸æ•°/2ï¼Œåˆ™æœ€å¤šåˆ©ç”¨äº†ä¸€åŠçš„ CPU æ ¸è¿›è¡Œå¹¶è¡Œã€‚ &lt;br&gt;
3.æŠ¢å ï¼šåœ¨ coroutine ä¸­è¦ç­‰å¾…ä¸€ä¸ªåç¨‹ä¸»åŠ¨è®©å‡º CPU æ‰æ‰§è¡Œä¸‹ä¸€ä¸ªåç¨‹ï¼Œåœ¨ Go ä¸­ï¼Œä¸€ä¸ª goroutine æœ€å¤šå ç”¨ CPU 10msï¼Œé˜²æ­¢å…¶ä»– goroutine è¢«é¥¿æ­»ï¼Œè¿™å°±æ˜¯ goroutine ä¸åŒäº coroutine çš„ä¸€ä¸ªåœ°æ–¹ã€‚&lt;br&gt;
4.å…¨å±€ G é˜Ÿåˆ—ï¼šåœ¨æ–°çš„è°ƒåº¦å™¨ä¸­ä¾ç„¶æœ‰å…¨å±€ G é˜Ÿåˆ—ï¼Œä½†åŠŸèƒ½å·²ç»è¢«å¼±åŒ–äº†ï¼Œå½“ M æ‰§è¡Œ work stealing ä»å…¶ä»– P å·ä¸åˆ° G æ—¶ï¼Œå®ƒå¯ä»¥ä»å…¨å±€ G é˜Ÿåˆ—è·å– Gã€‚&lt;/li&gt;
&lt;li&gt;è°ƒåº¦å¦‚å›¾æ‰€ç¤º&lt;br&gt;
&lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 179; 
			flex-basis: 431px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/go-goroutine%E4%B8%8Egmp%E6%A8%A1%E5%9E%8B%E7%9A%84%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3/3.png&#34; data-size=&#34;970x540&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/go-goroutine%E4%B8%8Egmp%E6%A8%A1%E5%9E%8B%E7%9A%84%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3/3.png&#34;
			width=&#34;970&#34;
			height=&#34;540&#34;
			srcset=&#34;https://zcj-git520.github.io/p/go-goroutine%E4%B8%8Egmp%E6%A8%A1%E5%9E%8B%E7%9A%84%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3/3_hu6b3ed4c0e6c5dd3549ade2aca3a75bc3_223170_480x0_resize_box_3.png 480w, https://zcj-git520.github.io/p/go-goroutine%E4%B8%8Egmp%E6%A8%A1%E5%9E%8B%E7%9A%84%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3/3_hu6b3ed4c0e6c5dd3549ade2aca3a75bc3_223170_1024x0_resize_box_3.png 1024w&#34;
			loading=&#34;lazy&#34;
			&gt;
	&lt;/a&gt;
	
&lt;/figure&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;å‚è€ƒæ–‡çŒ®&#34;&gt;å‚è€ƒæ–‡çŒ®&lt;/h2&gt;
&lt;p&gt;1ã€&lt;a class=&#34;link&#34; href=&#34;https://www.jianshu.com/p/fa696563c38a&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://www.jianshu.com/p/fa696563c38a&lt;/a&gt;
2.&lt;a class=&#34;link&#34; href=&#34;https://www.zhihu.com/people/kylin-lab&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://www.zhihu.com/people/kylin-lab&lt;/a&gt;&lt;/p&gt;
</description>
        </item>
        <item>
        <title>è¿›ç¨‹ã€çº¿ç¨‹ã€åç¨‹</title>
        <link>https://zcj-git520.github.io/p/c/c-/</link>
        <pubDate>Tue, 28 Sep 2021 22:00:38 +0800</pubDate>
        
        <guid>https://zcj-git520.github.io/p/c/c-/</guid>
        <description>&lt;img src="https://zcj-git520.github.io/p/c/c/10.png" alt="Featured image of post è¿›ç¨‹ã€çº¿ç¨‹ã€åç¨‹" /&gt;&lt;h2 id=&#34;ç†è§£è¿›ç¨‹ä¸çº¿ç¨‹&#34;&gt;ç†è§£è¿›ç¨‹ä¸çº¿ç¨‹&lt;/h2&gt;
&lt;h3 id=&#34;è¿›ç¨‹&#34;&gt;è¿›ç¨‹&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;è¿›ç¨‹æ˜¯ç¨‹åºä¸€æ¬¡åŠ¨æ€æ‰§è¡Œè¿‡ç¨‹ã€è¿›ç¨‹æ˜¯æ“ä½œç³»ç»Ÿåˆ†é…èµ„æº(å†…å­˜ã€ioèµ„æºã€cpuç­‰)å’Œèµ„æºè°ƒåº¦çš„åŸºæœ¬å•ä½ã€‚ç¨‹åºæ˜¯æŒ‡ä»¤ã€æ•°æ®åŠå…¶ç»„ç»‡å½¢å¼çš„æè¿°ï¼Œè¿›ç¨‹æ˜¯ç¨‹åºçš„å®ä½“ã€‚&lt;/li&gt;
&lt;li&gt;è¿›ç¨‹æ˜¯ç”± è¿›ç¨‹æ§åˆ¶å—PCBã€ç›¸å…³ç¨‹åºæ®µå’Œè¯¥ç¨‹åºæ®µè¿›è¡Œæ“ä½œçš„æ•°æ®ç»“æ„é›†ä¸‰ä¸ªéƒ¨åˆ†ç»„æˆã€‚&lt;/li&gt;
&lt;li&gt;è¿›ç¨‹çš„äº”ä¸­çŠ¶æ€ï¼šåˆ›å»ºã€å°±ç»ªã€è¿è¡Œã€é˜»å¡ã€ç»ˆæ­¢&lt;/li&gt;
&lt;li&gt;äº”ç§çŠ¶æ€è½¬æ¢å¦‚å›¾æ‰€ç¤ºï¼š
&lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 396; 
			flex-basis: 950px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/c/c/1.png&#34; data-size=&#34;697x176&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/c/c/1.png&#34;
			width=&#34;697&#34;
			height=&#34;176&#34;
			srcset=&#34;https://zcj-git520.github.io/p/c/c/1_hu867c95a79e12df8701fb93f07d38202e_22636_480x0_resize_box_3.png 480w, https://zcj-git520.github.io/p/c/c/1_hu867c95a79e12df8701fb93f07d38202e_22636_1024x0_resize_box_3.png 1024w&#34;
			loading=&#34;lazy&#34;
			&gt;
	&lt;/a&gt;
	
&lt;/figure&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;çº¿ç¨‹&#34;&gt;çº¿ç¨‹&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;çº¿ç¨‹æ˜¯cupè°ƒåº¦å’Œåˆ†é…çš„åŸºæœ¬å•ä½ä¹Ÿæ˜¯cupæ‰§è¡Œçš„æœ€å°å•ä½, æœ‰ç‹¬ç«‹çš„æ ˆç©ºé—´ï¼Œå…±äº«å †ç©ºé—´ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;è¿›ç¨‹ä¸çº¿ç¨‹çš„å…³ç³»&#34;&gt;è¿›ç¨‹ä¸çº¿ç¨‹çš„å…³ç³»&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;ä¸€ä¸ªè¿›ç¨‹å¯ä»¥åˆ›å»ºå’Œæ’¤é”€å¤šä¸ªçº¿ç¨‹ï¼Œ ä¸€ä¸ªè¿›ç¨‹å¿…é¡»æœ‰ä¸€ä¸ªçº¿ç¨‹(ä¸»çº¿ç¨‹), çº¿ç¨‹å…±äº«è¿›ç¨‹æ‰€æœ‰èµ„æºï¼Œè¿›ç¨‹æ˜¯çº¿ç¨‹çš„å®¹å™¨ï¼Œå…³ç³»å¦‚å›¾æ‰€ç¤ºï¼š&lt;br&gt;
&lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 282; 
			flex-basis: 677px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/c/c/2.png&#34; data-size=&#34;491x174&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/c/c/2.png&#34;
			width=&#34;491&#34;
			height=&#34;174&#34;
			srcset=&#34;https://zcj-git520.github.io/p/c/c/2_hu53069a5ffbb3f88620ec70a2a20f56ba_161705_480x0_resize_box_3.png 480w, https://zcj-git520.github.io/p/c/c/2_hu53069a5ffbb3f88620ec70a2a20f56ba_161705_1024x0_resize_box_3.png 1024w&#34;
			loading=&#34;lazy&#34;
			&gt;
	&lt;/a&gt;
	
&lt;/figure&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;å¹¶å‘ä¸å¹¶è¡Œ&#34;&gt;å¹¶å‘ä¸å¹¶è¡Œ&lt;/h2&gt;
&lt;h3 id=&#34;å¹¶å‘&#34;&gt;å¹¶å‘&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;å¹¶å‘ï¼šå¤šè¿›ç¨‹(çº¿ç¨‹)ç¨‹åºåœ¨ä¸€ä¸ªæ ¸cupä¸²è¡Œè¿è¡Œï¼Œå½“ä¸€ä¸ªè¿›ç¨‹(çº¿ç¨‹)é˜»å¡çš„æ—¶å€™ï¼Œåˆ‡æ¢åˆ°å¦å¤–ç­‰å¾…æ‰§è¡Œçš„è¿›ç¨‹(çº¿ç¨‹) å¦‚å›¾&lt;br&gt;
&lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 176; 
			flex-basis: 424px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/c/c/3.png&#34; data-size=&#34;470x266&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/c/c/3.png&#34;
			width=&#34;470&#34;
			height=&#34;266&#34;
			srcset=&#34;https://zcj-git520.github.io/p/c/c/3_huf7020f04dcb48d893cde63f717a76dfc_28449_480x0_resize_box_3.png 480w, https://zcj-git520.github.io/p/c/c/3_huf7020f04dcb48d893cde63f717a76dfc_28449_1024x0_resize_box_3.png 1024w&#34;
			loading=&#34;lazy&#34;
			&gt;
	&lt;/a&gt;
	
&lt;/figure&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;å¹¶è¡Œ&#34;&gt;å¹¶è¡Œ&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;å¹¶è¡Œï¼šå¤šçº¿ç¨‹ç¨‹åºåœ¨å¤šæ ¸cupå¹¶è¡Œè¿è¡Œï¼Œå¦‚å›¾&lt;br&gt;
&lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 193; 
			flex-basis: 463px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/c/c/4.png&#34; data-size=&#34;535x277&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/c/c/4.png&#34;
			width=&#34;535&#34;
			height=&#34;277&#34;
			srcset=&#34;https://zcj-git520.github.io/p/c/c/4_hu785964094345562635a27d3f581c929f_23668_480x0_resize_box_3.png 480w, https://zcj-git520.github.io/p/c/c/4_hu785964094345562635a27d3f581c929f_23668_1024x0_resize_box_3.png 1024w&#34;
			loading=&#34;lazy&#34;
			&gt;
	&lt;/a&gt;
	
&lt;/figure&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;ç”¨æˆ·æ€å’Œå†…æ ¸æ€ç”¨æˆ·ç©ºé—´å’Œå†…æ ¸ç©ºé—´&#34;&gt;ç”¨æˆ·æ€å’Œå†…æ ¸æ€(ç”¨æˆ·ç©ºé—´å’Œå†…æ ¸ç©ºé—´)&lt;/h2&gt;
&lt;h3 id=&#34;ç‰¹æƒçº§åˆ’åˆ†&#34;&gt;ç‰¹æƒçº§åˆ’åˆ†&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;cpuä¸€å…±æœ‰0ï½4å››ä¸ªç‰¹æƒçº§ï¼ŒR0çº§æœ€é«˜ï¼ŒR3çº§æœ€ä½ã€‚ç”¨æˆ·æ€æŒ‡çš„æ˜¯ï¼šç¨‹åºè¿è¡Œåœ¨R3çº§ä»¥ä¸Šï¼Œé€šå¸¸åœ¨åº”ç”¨ç¨‹åºä¸­è¿è¡Œï¼Œå†…æ ¸æ€æ˜¯æŒ‡ï¼šç¨‹åºè¿è¡Œåœ¨R0çº§ä»¥ä¸Šï¼Œé€šå¸¸åœ¨å†…æ ¸ä¸­è¿è¡Œã€‚ä¸€èˆ¬æ¥è¯´ï¼Œæˆ‘ä»¬å†™çš„åº”ç”¨ç¨‹åºå°±æ˜¯è¿è¡Œåœ¨R3çº§è¡£ä»¥ä¸Šã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;3ä¸­ç§ç”¨æˆ·æ€ä¸å†…æ ¸æ€çš„åˆ‡æ¢&#34;&gt;3ä¸­ç§ç”¨æˆ·æ€ä¸å†…æ ¸æ€çš„åˆ‡æ¢&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;ç³»ç»Ÿè°ƒç”¨ï¼šç”¨æˆ·æ€è¿›ç¨‹é€šè¿‡ç³»ç»Ÿè°ƒç”¨ç”³è¯·ä½¿ç”¨æ“ä½œç³»ç»Ÿæä¾›çš„æœåŠ¡ç¨‹åºå®Œæˆå·¥ä½œï¼Œæ¯”å¦‚å‰ä¾‹ä¸­fork()å®é™…ä¸Šå°±æ˜¯æ‰§è¡Œäº†ä¸€ä¸ªåˆ›å»ºæ–°è¿›ç¨‹çš„ç³»ç»Ÿè°ƒç”¨ã€‚è€Œç³»ç»Ÿè°ƒç”¨çš„æœºåˆ¶å…¶æ ¸å¿ƒè¿˜æ˜¯ä½¿ç”¨äº†æ“ä½œç³»ç»Ÿä¸ºç”¨æˆ·ç‰¹åˆ«å¼€æ”¾çš„ä¸€ä¸ªä¸­æ–­æ¥å®ç°ï¼Œä¾‹å¦‚Linuxçš„int 80hä¸­æ–­ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å¼‚å¸¸ï¼šå½“CPUåœ¨æ‰§è¡Œè¿è¡Œåœ¨ç”¨æˆ·æ€ä¸‹çš„ç¨‹åºæ—¶ï¼Œå‘ç”Ÿäº†æŸäº›äº‹å…ˆä¸å¯çŸ¥çš„å¼‚å¸¸ï¼Œè¿™æ—¶ä¼šè§¦å‘ç”±å½“å‰è¿è¡Œè¿›ç¨‹åˆ‡æ¢åˆ°å¤„ç†æ­¤å¼‚å¸¸çš„å†…æ ¸ç›¸å…³ç¨‹åºä¸­ï¼Œä¹Ÿå°±è½¬åˆ°äº†å†…æ ¸æ€ï¼Œæ¯”å¦‚ç¼ºé¡µå¼‚å¸¸ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å¤–å›´è®¾å¤‡çš„ä¸­æ–­ï¼š å½“å¤–å›´è®¾å¤‡å®Œæˆç”¨æˆ·è¯·æ±‚çš„æ“ä½œåï¼Œä¼šå‘CPUå‘å‡ºç›¸åº”çš„ä¸­æ–­ä¿¡å·ï¼Œè¿™æ—¶CPUä¼šæš‚åœæ‰§è¡Œä¸‹ä¸€æ¡å³å°†è¦æ‰§è¡Œçš„æŒ‡ä»¤è½¬è€Œå»æ‰§è¡Œä¸ä¸­æ–­ä¿¡å·å¯¹åº”çš„å¤„ç†ç¨‹åºï¼Œå¦‚æœå…ˆå‰æ‰§è¡Œçš„æŒ‡ä»¤æ˜¯ç”¨æˆ·æ€ä¸‹çš„ç¨‹åºï¼Œé‚£ä¹ˆè¿™ä¸ªè½¬æ¢çš„è¿‡ç¨‹è‡ªç„¶ä¹Ÿå°±å‘ç”Ÿäº†ç”±ç”¨æˆ·æ€åˆ°å†…æ ¸æ€çš„åˆ‡æ¢ã€‚æ¯”å¦‚ç¡¬ç›˜è¯»å†™æ“ä½œçš„å®Œæˆï¼Œç³»ç»Ÿä¼šåˆ‡æ¢åˆ°ç¡¬ç›˜è¯»å†™çš„ä¸­æ–­å¤„ç†ç¨‹åºä¸­æ‰§è¡Œåç»­æ“ä½œç­‰ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ç”¨æˆ·æ€ä¸å†…æ ¸æ€ç»“æ„å¦‚å›¾ï¼š&lt;br&gt;
&lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 121; 
			flex-basis: 291px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/c/c/5.png&#34; data-size=&#34;638x526&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/c/c/5.png&#34;
			width=&#34;638&#34;
			height=&#34;526&#34;
			srcset=&#34;https://zcj-git520.github.io/p/c/c/5_hua341d62eb4441aa20e3670f5a5321e7c_124841_480x0_resize_box_3.png 480w, https://zcj-git520.github.io/p/c/c/5_hua341d62eb4441aa20e3670f5a5321e7c_124841_1024x0_resize_box_3.png 1024w&#34;
			loading=&#34;lazy&#34;
			&gt;
	&lt;/a&gt;
	
&lt;/figure&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ç”¨æˆ·æ€ä¸å†…æ ¸æ€çš„åˆ‡æ¢æ˜¯éœ€è¦å¼€é”€&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;æ¥æºï¼šlinuxç”¨æˆ·æ€å’Œå†…æ ¸æ€ç†è§£(&lt;a class=&#34;link&#34; href=&#34;https://www.cnblogs.com/weifeng1463/p/11660260.html&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://www.cnblogs.com/weifeng1463/p/11660260.html&lt;/a&gt;)&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;è¿›ç¨‹ä¸çº¿ç¨‹ç”¨æˆ·æ€åˆ°å†…æ ¸æ€çš„å¼€é”€&#34;&gt;è¿›ç¨‹ä¸çº¿ç¨‹ç”¨æˆ·æ€åˆ°å†…æ ¸æ€çš„å¼€é”€&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;å¤šè¿›ç¨‹(çº¿ç¨‹)å¯ä»¥æé«˜cpuçš„åˆ©ç”¨ç‡ï¼Œå‡å°‘ç¨‹åºé˜»å¡å¸¦æ¥cpué—²ç½®çš„æƒ…å†µï¼Œä¹Ÿå°±æ˜¯æå‡cpuçš„è¿è¡Œæ—¶é—´ç‰‡ï¼Œä½†æ˜¯è¿‡å¤šçš„åˆ›å»ºè¿›ç¨‹(çº¿ç¨‹)ä¹Ÿä¼šèŠ±è´¹é¢å¤–çš„cpuæ—¶é—´ç‰‡è¿›è¡Œè¿›ç¨‹(çº¿ç¨‹)çš„èŠ±é”€ã€‚è¿›ç¨‹çš„åˆ›å»ºã€å°±ç»ªã€è¿è¡Œã€é˜»å¡ã€ç»ˆæ­¢ï¼Œè¿™äº›éƒ½ä¼šå¸¦æ¥cupèŠ±é”€ã€‚ä¾‹å¦‚åœ¨32ä½çš„æ“ä½œç³»ç»Ÿä¸­åˆ›å»ºä¸€ä¸ªè¿›ç¨‹éœ€è¦å¼€è¾Ÿ4GBçš„è™šæ‹Ÿå†…å­˜ç©ºé—´ï¼Œåˆ›å»ºä¸€ä¸ªçº¿ç¨‹éœ€è¦å ç”¨çº¦4MBçš„å†…å­˜ã€‚&lt;br&gt;
&lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 172; 
			flex-basis: 413px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/c/c/6.png&#34; data-size=&#34;1002x582&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/c/c/6.png&#34;
			width=&#34;1002&#34;
			height=&#34;582&#34;
			srcset=&#34;https://zcj-git520.github.io/p/c/c/6_hud198df65b05650e861fc5dc9032c3d5f_195182_480x0_resize_box_3.png 480w, https://zcj-git520.github.io/p/c/c/6_hud198df65b05650e861fc5dc9032c3d5f_195182_1024x0_resize_box_3.png 1024w&#34;
			loading=&#34;lazy&#34;
			&gt;
	&lt;/a&gt;
	
&lt;/figure&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;è¿›ç¨‹(çº¿ç¨‹)çš„è°ƒåº¦ä¹Ÿä¼šå¸¦æ¥cupçš„èŠ±é”€ã€‚cupè¿›ç¨‹(çº¿ç¨‹)çš„è°ƒåº¦å°±æ˜¯è¿›ç¨‹(çº¿ç¨‹)åˆ‡æ¢ï¼Œè¿›ç¨‹(çº¿ç¨‹)çš„åˆ‡æ¢å°±ä¼šè¿›è¡Œçº¿ç¨‹åœ¨å†…æ ¸æ€çš„è°ƒåº¦ã€‚cupåˆ‡æ¢çš„å†…æ ¸æ€çš„çº¿ç¨‹ï¼Œä¸æ“ä½œç”¨æˆ·æ€çš„çº¿ç¨‹ï¼Œç”¨æˆ·æ€çº¿ç¨‹é€šè¿‡ç³»ç»Ÿè°ƒç”¨è§¦å‘å†…æ ¸çº¿ç¨‹ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ä¸ºå‡å°‘cpuå†…æ ¸æ€çº¿ç¨‹ä¹‹é—´çš„åˆ‡æ¢ï¼Œæ“ä½œç³»ç»Ÿä¸­ä½¿ç”¨(ç”¨æˆ·æ€è¿›ç¨‹(çº¿ç¨‹):å†…æ ¸æ€è¿›ç¨‹(çº¿ç¨‹))1:1ï¼Œç”¨æˆ·æ€ç›´æ¥é€šè¿‡ç³»ç»Ÿï¼Œç›´æ¥ä¸å†…æ ¸æ€çš„çº¿ç¨‹ä¸€ä¸€å¯¹åº”ã€‚å¦‚å›¾&lt;br&gt;
&lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 87; 
			flex-basis: 209px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/c/c/7.png&#34; data-size=&#34;649x742&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/c/c/7.png&#34;
			width=&#34;649&#34;
			height=&#34;742&#34;
			srcset=&#34;https://zcj-git520.github.io/p/c/c/7_hub3d98815bced38b8bc21c868cdbcca3f_129141_480x0_resize_box_3.png 480w, https://zcj-git520.github.io/p/c/c/7_hub3d98815bced38b8bc21c868cdbcca3f_129141_1024x0_resize_box_3.png 1024w&#34;
			loading=&#34;lazy&#34;
			&gt;
	&lt;/a&gt;
	
&lt;/figure&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ç”¨æˆ·æ€ä¸€ä¸ªè¿›ç¨‹(çº¿ç¨‹)å¯¹åº”ä¸€ä¸ªå†…æ ¸æ€çš„è¿›ç¨‹(çº¿ç¨‹)æ˜¯å‡å°‘äº†å†…æ ¸æ€ä¸­è¿›ç¨‹(çº¿ç¨‹)åˆ‡æ¢çš„èŠ±é”€ï¼Œä½†æ˜¯ä¹Ÿå¢åŠ äº†å†…æ ¸æ€ä¸­è¿›ç¨‹(çº¿ç¨‹)åˆ›å»ºçš„å¼€é”€ã€‚å‡å°‘å†…æ ¸æ€ä¸­è¿›ç¨‹(çº¿ç¨‹)åˆ‡æ¢ä¸åˆ›å»ºå¸¦æ¥çš„å¼€é”€ï¼Œæ“ä½œç³»ç»Ÿä¸­ä½¿ç”¨(ç”¨æˆ·æ€è¿›ç¨‹(çº¿ç¨‹):å†…æ ¸æ€è¿›ç¨‹(çº¿ç¨‹))N:1ï¼Œå‡å°‘å†…æ ¸æ€ä¸­è¿›ç¨‹(çº¿ç¨‹)çš„åˆ›å»ºï¼ŒåŒæ—¶åœ¨ç”¨æˆ·æ€è¿›è¡Œçº¿ç¨‹çš„ä¹‹é—´çš„åˆ‡æ¢ï¼Œä¸ç‰µè¿å†…æ ¸æ€çº¿ç¨‹çš„åˆ‡æ¢ï¼Œå‡å°‘cupçš„èŠ±é”€ã€‚
&lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 129; 
			flex-basis: 310px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/c/c/8.png&#34; data-size=&#34;947x733&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/c/c/8.png&#34;
			width=&#34;947&#34;
			height=&#34;733&#34;
			srcset=&#34;https://zcj-git520.github.io/p/c/c/8_huc6701a49375d06381df34c24cc00a698_215784_480x0_resize_box_3.png 480w, https://zcj-git520.github.io/p/c/c/8_huc6701a49375d06381df34c24cc00a698_215784_1024x0_resize_box_3.png 1024w&#34;
			loading=&#34;lazy&#34;
			&gt;
	&lt;/a&gt;
	
&lt;/figure&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;è™½ç„¶N:1å‡å°‘å†…æ ¸æ€ä¸­è¿›ç¨‹(çº¿ç¨‹)åˆ‡æ¢ä¸åˆ›å»ºå¸¦æ¥çš„å¼€é”€ï¼Œä½†æ˜¯å½“ç”¨æˆ·æ€çš„è¿›ç¨‹(çº¿ç¨‹)é˜»å¡æ—¶ï¼Œå…¶ä»–è¿›ç¨‹(çº¿ç¨‹)å°±åªèƒ½ç­‰å¾…ï¼Œè¿™é€ æˆä¸å•çº¿ç¨‹ä¸€æ ·çš„é—®é¢˜ã€‚æ“ä½œç³»ç»Ÿç»“åˆ1:1å’Œn:1æ¨¡å‹çš„æœ‰ç‚¹å½¢æˆn:mæ¨¡å‹ï¼Œå†…æ ¸æ€ä¸­è¿›ç¨‹(çº¿ç¨‹)è¿›å…¥é˜»å¡çŠ¶æ€æ—¶ï¼Œ ç”¨æˆ·æ€çš„è¿›ç¨‹(çº¿ç¨‹)åˆ‡æ¢å¦ä¸€ä¸ªå†…æ ¸æ€ä¸­çš„çº¿ç¨‹ã€‚&lt;br&gt;
&lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 124; 
			flex-basis: 298px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/c/c/9.png&#34; data-size=&#34;832x670&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/c/c/9.png&#34;
			width=&#34;832&#34;
			height=&#34;670&#34;
			srcset=&#34;https://zcj-git520.github.io/p/c/c/9_hud3b7e360612e399d72998f5a6843f71d_181995_480x0_resize_box_3.png 480w, https://zcj-git520.github.io/p/c/c/9_hud3b7e360612e399d72998f5a6843f71d_181995_1024x0_resize_box_3.png 1024w&#34;
			loading=&#34;lazy&#34;
			&gt;
	&lt;/a&gt;
	
&lt;/figure&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;åç¨‹&#34;&gt;åç¨‹&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;åç¨‹å’Œçº¿ç¨‹ä¸€æ ·æœ‰ç‹¬ç«‹çš„æ ˆç©ºé—´ï¼Œå…±äº«å †ç©ºé—´ï¼Œæ˜¯ç”¨æˆ·çº§çš„çº¿ç¨‹ï¼Œæ˜¯æœ‰ç”¨æˆ·è‡ªå·±è°ƒåº¦ã€‚ä¸€ä¸ªçº¿ç¨‹å¯ä»¥åˆ›å»ºå¤šä¸ªåç¨‹ï¼Œåç¨‹æ˜¯è½»é‡çº§çš„çº¿ç¨‹ã€‚åˆ›å»ºä¸€ä¸ªåç¨‹åªéœ€è¦å ç”¨4~5kBçš„è™šæ‹Ÿå†…å­˜ï¼Œåˆ›å»ºåç¨‹çš„å¼€é”€ç›¸æ¯”è¿›ç¨‹ä¸çº¿ç¨‹ä½å¤ªå¤šäº†ã€‚&lt;br&gt;
&lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 231; 
			flex-basis: 555px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/c/c/10.png&#34; data-size=&#34;808x349&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/c/c/10.png&#34;
			width=&#34;808&#34;
			height=&#34;349&#34;
			srcset=&#34;https://zcj-git520.github.io/p/c/c/10_hu5bb3a4baa791897c79c1df91e792ef0e_243913_480x0_resize_box_3.png 480w, https://zcj-git520.github.io/p/c/c/10_hu5bb3a4baa791897c79c1df91e792ef0e_243913_1024x0_resize_box_3.png 1024w&#34;
			loading=&#34;lazy&#34;
			&gt;
	&lt;/a&gt;
	
&lt;/figure&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;å‚è€ƒæ–‡çŒ®&#34;&gt;å‚è€ƒæ–‡çŒ®&lt;/h2&gt;
&lt;p&gt;1ã€&lt;a class=&#34;link&#34; href=&#34;https://zhuanlan.zhihu.com/p/337978321&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://zhuanlan.zhihu.com/p/337978321&lt;/a&gt;
2ã€&lt;a class=&#34;link&#34; href=&#34;https://www.jianshu.com/p/fa696563c38a&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://www.jianshu.com/p/fa696563c38a&lt;/a&gt;&lt;/p&gt;
</description>
        </item>
        <item>
        <title>go mapçš„æ·±å…¥ç†è§£</title>
        <link>https://zcj-git520.github.io/p/go-map%E7%9A%84%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3/</link>
        <pubDate>Mon, 20 Sep 2021 22:00:38 +0800</pubDate>
        
        <guid>https://zcj-git520.github.io/p/go-map%E7%9A%84%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3/</guid>
        <description>&lt;img src="https://zcj-git520.github.io/p/go-map%E7%9A%84%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3/3.png" alt="Featured image of post go mapçš„æ·±å…¥ç†è§£" /&gt;&lt;h1 id=&#34;goland-åŸºç¡€ä¹‹map&#34;&gt;goland åŸºç¡€ä¹‹map&lt;/h1&gt;
&lt;h2 id=&#34;mapçš„å†…éƒ¨ç»“æ„&#34;&gt;mapçš„å†…éƒ¨ç»“æ„&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;go mapæ˜¯ä½¿ç”¨çš„å“ˆå¸Œè¡¨æ„å»ºçš„&lt;/li&gt;
&lt;li&gt;mapçš„ç»“æ„å¯åˆ†ä¸ºï¼šhmapçš„ç»“æ„ä½“å’Œbmap(æ¡¶)ï¼Œhmapç»“æ„ä½“è®°å½•è¿™mapçš„åŸºç¡€ä¿¡æ¯(åŒ…æ‹¬mapå­˜å‚¨ä¸ªæ•°ï¼Œ
æ¡¶çš„ä¸ªæ•°ï¼Œhashç§å­ï¼Œæ¡¶çš„æ•°æ®ï¼Œæ‰©å®¹æ—¶æ—§æ¡¶çš„æ•°æ®ä»¥åŠè¿ç§»ä¸ªæ•°ï¼ˆmapæ‰©å®¹ä¸æ˜¯ä¸€æ¬¡æ€§è¿ç§»å®Œï¼‰)&lt;/li&gt;
&lt;li&gt;æºç å¦‚ä¸‹&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;/blockquote&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;å®šä¹‰hmapçš„ç»“æ„ï¼š
type hmap struct {
	// Note: the format of the hmap is also encoded in cmd/compile/internal/gc/reflect.go.
	// Make sure this stays in sync with the compiler&#39;s definition.
    // map å­˜å‚¨å…ƒç´ çš„è®¡æ•°
	count     int // # live cells == size of map.  Must be first (used by len() builtin)
    flags     uint8 // mapçš„çŠ¶æ€æ ‡è¯†ï¼Œæ¡¶æ˜¯å¦åœ¨å¢æ”¹ï¼Œæ‰©å®¹æˆ–è€…ç¼©å®¹
    //æ¡¶çš„ä¸ªæ•°/é‡‡ç”¨çš„ä¸è¿ç®—æ³•è®¡ç®—æ¡¶çš„ä¸ªæ•°ï¼Œæ¡¶çš„ä¸ªæ•°ä¸º2çš„æ•´æ•°æ¬¡å¹‚
	B         uint8  // log_2 of # of buckets (can hold up to loadFactor * 2^B items)
	//æº¢å‡ºçš„æ¡¶çš„æ•°é‡çš„è¿‘ä¼¼å€¼
    noverflow uint16 // approximate number of overflow buckets; see incrnoverflow for details
	hash0     uint32 // hash seed
    //æŒ‡å‘æ¡¶æ•°æ®çš„æŒ‡é’ˆ
	buckets    unsafe.Pointer // array of 2^B Buckets. may be nil if count==0.
	// æŒ‡å‘æ—§æ¡¶æ•°æ®çš„æŒ‡é’ˆ
    oldbuckets unsafe.Pointer // previous bucket array of half the size, non-nil only when growing
	//æ‰©å®¹è®¡æ•°
    nevacuate  uintptr        // progress counter for evacuation (buckets less than this have been evacuated)
    // ä¿å­˜æº¢å‡ºæ¡¶çš„é“¾è¡¨å’Œæœªä½¿ç”¨çš„æº¢å‡ºæ¡¶æ•°ç»„çš„é¦–åœ°å€
	extra *mapextra // optional fields
}
// æ¡¶çš„å®ç°ç»“æ„
type bmap struct {
	// å½“å‰ç‰ˆæœ¬bucketCntçš„å€¼æ˜¯8ï¼Œä¸€ä¸ªæ¡¶æœ€å¤šå­˜å‚¨8ä¸ªkey-valueå¯¹
	tophash [bucketCnt]uint8
}

&lt;/code&gt;&lt;/pre&gt;&lt;ul&gt;
&lt;li&gt;bmapå­˜å‚¨ç»“æ„å¦‚å›¾æ‰€ç¤º&lt;br&gt;
&lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 142; 
			flex-basis: 341px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/go-map%E7%9A%84%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3/1.png&#34; data-size=&#34;631x444&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/go-map%E7%9A%84%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3/1.png&#34;
			width=&#34;631&#34;
			height=&#34;444&#34;
			srcset=&#34;https://zcj-git520.github.io/p/go-map%E7%9A%84%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3/1_hu1600ca2579a18bcbdc1f1a6cd5b9810d_76803_480x0_resize_box_3.png 480w, https://zcj-git520.github.io/p/go-map%E7%9A%84%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3/1_hu1600ca2579a18bcbdc1f1a6cd5b9810d_76803_1024x0_resize_box_3.png 1024w&#34;
			loading=&#34;lazy&#34;
			&gt;
	&lt;/a&gt;
	
&lt;/figure&gt;&lt;/li&gt;
&lt;li&gt;å‰8ä¸ªæ˜¯hashå€¼ï¼Œ8ä¸ªkeyå’Œ8ä¸ªvalueã€åé¢æ˜¯æº¢å‡ºæ¡¶çš„æŒ‡é’ˆ&lt;/li&gt;
&lt;li&gt;æº¢å‡ºæ¡¶æ˜¯å‡å°‘mapæ‰©å®¹æ¬¡æ•°ï¼Œæº¢å‡ºæ¡¶çš„ç»“æ„ä¸bmapæ¡¶çš„ç»“æ„ä¸€æ ·çš„&lt;/li&gt;
&lt;li&gt;æº¢å‡ºæ¡¶çš„åŸºç¡€ç»“æ„ï¼š&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;/blockquote&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code class=&#34;language-//&#34; data-lang=&#34;//&#34;&gt;  type mapextra struct {
  	// If both key and elem do not contain pointers and are inline, then we mark bucket
  	// type as containing no pointers. This avoids scanning such maps.
  	// However, bmap.overflow is a pointer. In order to keep overflow buckets
  	// alive, we store pointers to all overflow buckets in hmap.extra.overflow and hmap.extra.oldoverflow.
  	// overflow and oldoverflow are only used if key and elem do not contain pointers.
  	// overflow contains overflow buckets for hmap.buckets.
  	// oldoverflow contains overflow buckets for hmap.oldbuckets.
  	// The indirection allows to store a pointer to the slice in hiter.
  	overflow    *[]*bmap  //è®°å½•å·²ç»è¢«ä½¿ç”¨çš„æº¢å‡ºæ¡¶
  	oldoverflow *[]*bmap  // æ‰©å®¹é˜¶æ®µæ—§çš„æº¢å‡ºæ¡¶
  
  	// nextOverflow holds a pointer to a free overflow bucket.
  	nextOverflow *bmap   //æŒ‡å‘ä¸‹ä¸€ä¸ªç©ºé—²çš„æº¢å‡ºæ¡¶
  }
&lt;/code&gt;&lt;/pre&gt;&lt;ul&gt;
&lt;li&gt;å½“æ¡¶çš„ä¸ªæ•°å¤§äº2çš„4æ¬¡æ–¹æ—¶å°±ä¼šä½¿ç”¨æº¢å‡ºæ¡¶æºç å¦‚ä¸‹&lt;/li&gt;
&lt;/ul&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;func makeBucketArray(t *maptype, b uint8, dirtyalloc unsafe.Pointer) (buckets unsafe.Pointer, nextOverflow *bmap) {
	// æ¡¶çš„ä¸ªæ•°
    base := bucketShift(b)
	nbuckets := base
	// For small b, overflow buckets are unlikely.
	// Avoid the overhead of the calculation.
	if b &amp;gt;= 4 {
        // ä½¿ç”¨æº¢å‡ºæ¡¶
		// Add on the estimated number of overflow buckets
		// required to insert the median number of elements
		// used with this value of b.
		nbuckets += bucketShift(b - 4)//è®¡ç®—æº¢å‡ºæ¡¶çš„æ•°é‡å’Œä¸æ˜¯æº¢å‡ºæ¡¶çš„æ•°é‡çš„å’Œ
		sz := t.bucket.size * nbuckets
		up := roundupsize(sz)
		if up != sz {
			nbuckets = up / t.bucket.size //å¾—å‡ºæ¡¶çš„æ•°é‡
		}
	}

	if dirtyalloc == nil {
        // æ²¡æœ‰è¢«åˆ›å»ºæ¡¶ï¼Œç”³è¯·åˆ›å»ºæ¡¶çš„ï¼Œè¿”å›æ¡¶çš„é¦–åœ°å€
		buckets = newarray(t.bucket, int(nbuckets))
	} else {
		// dirtyalloc was previously generated by
		// the above newarray(t.bucket, int(nbuckets))
		// but may not be empty.
		buckets = dirtyalloc
		size := t.bucket.size * nbuckets
		if t.bucket.ptrdata != 0 {
			memclrHasPointers(buckets, size)
		} else {
			memclrNoHeapPointers(buckets, size)
		}
	}

	if base != nbuckets {
		// We preallocated some overflow buckets.
		// To keep the overhead of tracking these overflow buckets to a minimum,
		// we use the convention that if a preallocated overflow bucket&#39;s overflow
		// pointer is nil, then there are more available by bumping the pointer.
		// We need a safe non-nil pointer for the last overflow bucket; just use buckets.
		//ç©ºé—²æ¡¶çš„åœ°å€
        nextOverflow = (*bmap)(add(buckets, base*uintptr(t.bucketsize)))
		last := (*bmap)(add(buckets, (nbuckets-1)*uintptr(t.bucketsize)))
		last.setoverflow(t, (*bmap)(buckets))
	}
	return buckets, nextOverflow
}
&lt;/code&gt;&lt;/pre&gt;&lt;ul&gt;
&lt;li&gt;å¦‚å›¾æ‰€ç¤º&lt;br&gt;
&lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 184; 
			flex-basis: 441px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/go-map%E7%9A%84%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3/2.png&#34; data-size=&#34;1636x889&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/go-map%E7%9A%84%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3/2.png&#34;
			width=&#34;1636&#34;
			height=&#34;889&#34;
			srcset=&#34;https://zcj-git520.github.io/p/go-map%E7%9A%84%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3/2_hu425c8a15ea5dff908d9430989255e351_318909_480x0_resize_box_3.png 480w, https://zcj-git520.github.io/p/go-map%E7%9A%84%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3/2_hu425c8a15ea5dff908d9430989255e351_318909_1024x0_resize_box_3.png 1024w&#34;
			loading=&#34;lazy&#34;
			&gt;
	&lt;/a&gt;
	
&lt;/figure&gt;&lt;/li&gt;
&lt;li&gt;ä½¿ç”¨mapæ—¶éœ€è¦make(map[type]type,len,cap)æ‰èƒ½ä½¿ç”¨ã€‚&lt;/li&gt;
&lt;li&gt;make æºç å¦‚ä¸‹ï¼š&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;/blockquote&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;func makemap(t *maptype, hint int, h *hmap) *hmap {
    // åˆ¤æ–­æ˜¯å¦è¶…è¿‡å†…å­˜çš„é™åˆ¶
	mem, overflow := math.MulUintptr(uintptr(hint), t.bucket.size)
	if overflow || mem &amp;gt; maxAlloc {
		hint = 0
	}

	// initialize Hmap
	if h == nil {
		h = new(hmap)
	}
	h.hash0 = fastrand()// è·å–éšæœºçš„hashå€¼

	// Find the size parameter B which will hold the requested # of elements.
	// For hint &amp;lt; 0 overLoadFactor returns false since hint &amp;lt; bucketCnt.
	B := uint8(0)
	for overLoadFactor(hint, B) {
		B++
	}
	h.B = B

	// allocate initial hash table
	// if B == 0, the buckets field is allocated lazily later (in mapassign)
	// If hint is large zeroing this memory could take a while.
	if h.B != 0 {
		var nextOverflow *bmap
        // åˆ›å»ºmapçš„å­˜å‚¨æ•°æ®ï¼Œè¿”å›çš„æ¡¶çš„æ•°æ®çš„åœ°å€ï¼Œä¸‹ä¸€ä¸ªæº¢å‡ºæ¡¶çš„åœ°å€
		h.buckets, nextOverflow = makeBucketArray(t, h.B, nil)
		if nextOverflow != nil {
			h.extra = new(mapextra)
			h.extra.nextOverflow = nextOverflow
		}
	}

	return h
}
&lt;/code&gt;&lt;/pre&gt;&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;mapçš„å®Œæ•´ç»“æ„å¦‚å›¾ï¼š
&lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 259; 
			flex-basis: 623px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/go-map%E7%9A%84%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3/3.png&#34; data-size=&#34;1503x579&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/go-map%E7%9A%84%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3/3.png&#34;
			width=&#34;1503&#34;
			height=&#34;579&#34;
			srcset=&#34;https://zcj-git520.github.io/p/go-map%E7%9A%84%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3/3_hu50c7ad8b87ebb1655f26b2166388bb8a_150234_480x0_resize_box_3.png 480w, https://zcj-git520.github.io/p/go-map%E7%9A%84%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3/3_hu50c7ad8b87ebb1655f26b2166388bb8a_150234_1024x0_resize_box_3.png 1024w&#34;
			loading=&#34;lazy&#34;
			&gt;
	&lt;/a&gt;
	
&lt;/figure&gt;&lt;/p&gt;
&lt;h2 id=&#34;mapæ‰©å®¹&#34;&gt;mapæ‰©å®¹&lt;/h2&gt;
&lt;h3 id=&#34;æ‰©å®¹æ¡ä»¶&#34;&gt;æ‰©å®¹æ¡ä»¶&lt;/h3&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;å½“è´Ÿè½½å› å­(loadFactorNum*(bucketShift(B)/loadFactorDen&amp;gt;6.5  -&amp;gt; ç¿»å€æ‰©å®¹&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å½“è´Ÿè½½å› å­å°äº6.5ï¼Œä½†æ˜¯æº¢å‡ºæ¡¶çš„æ•°é‡å¤§äº2çš„15æ¬¡æ–¹  -&amp;gt; ç­‰é‡æ‰©å®¹&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;æºä»£ç å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;blockquote&gt;
&lt;/blockquote&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;// overLoadFactor reports whether count items placed in 1&amp;lt;&amp;lt;B buckets is over loadFactor.
// è´Ÿè½½å› å­å¤§äº6.5
func overLoadFactor(count int, B uint8) bool {
	return count &amp;gt; bucketCnt &amp;amp;&amp;amp; uintptr(count) &amp;gt; loadFactorNum*(bucketShift(B)/loadFactorDen)
}
// æº¢å‡ºæ¡¶è¿‡å¤šæ—¶
func tooManyOverflowBuckets(noverflow uint16, B uint8) bool {
	// If the threshold is too low, we do extraneous work.
	// If the threshold is too high, maps that grow and shrink can hold on to lots of unused memory.
	// &amp;quot;too many&amp;quot; means (approximately) as many overflow buckets as regular buckets.
	// See incrnoverflow for more details.
	if B &amp;gt; 15 {
		B = 15
	}
	// The compiler doesn&#39;t see here that B &amp;lt; 16; mask B to generate shorter shift code.
	return noverflow &amp;gt;= uint16(1)&amp;lt;&amp;lt;(B&amp;amp;15)
}
// æ‰©å®¹æºç 

func hashGrow(t *maptype, h *hmap) {
	// If we&#39;ve hit the load factor, get bigger.
	// Otherwise, there are too many overflow buckets,
	// so keep the same number of buckets and &amp;quot;grow&amp;quot; laterally.
	bigger := uint8(1)
	if !overLoadFactor(h.count+1, h.B) {
        //ç­‰é‡æ‰©å®¹
		bigger = 0
		h.flags |= sameSizeGrow
	}
	oldbuckets := h.buckets
	newbuckets, nextOverflow := makeBucketArray(t, h.B+bigger, nil)// ä»æ–°åˆ†é…æ•°æ®åœ°å€

	flags := h.flags &amp;amp;^ (iterator | oldIterator)
	if h.flags&amp;amp;iterator != 0 {
        // è¿­ä»£çš„æ—¶å€™æ¬è¿æ—§æ¡¶
		flags |= oldIterator
	}
	// commit the grow (atomic wrt gc)
	h.B += bigger  // æ¡¶çš„ä¸ªæ•°
	h.flags = flags
	h.oldbuckets = oldbuckets
	h.buckets = newbuckets
	h.nevacuate = 0
	h.noverflow = 0
    // æº¢å‡ºæ¡¶é’»ä¾¿ä¸ºæ—§æº¢å‡ºæ¡¶
	if h.extra != nil &amp;amp;&amp;amp; h.extra.overflow != nil {
		// Promote current overflow buckets to the old generation.
		if h.extra.oldoverflow != nil {
			throw(&amp;quot;oldoverflow is not nil&amp;quot;)
		}
		h.extra.oldoverflow = h.extra.overflow
		h.extra.overflow = nil
	}
	if nextOverflow != nil {
		if h.extra == nil {
			h.extra = new(mapextra)
		}
		h.extra.nextOverflow = nextOverflow
	}

	// the actual copying of the hash table data is done incrementally
	// by growWork() and evacuate().
}
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&#34;å‚è€ƒæ–‡çŒ®&#34;&gt;å‚è€ƒæ–‡çŒ®&lt;/h2&gt;
&lt;p&gt;1.&lt;a class=&#34;link&#34; href=&#34;https://www.zhihu.com/people/kylin-lab&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://www.zhihu.com/people/kylin-lab&lt;/a&gt;&lt;/p&gt;
</description>
        </item>
        <item>
        <title>syslogæ—¥å¿—è½¬å‘é…ç½®</title>
        <link>https://zcj-git520.github.io/p/syslog%E6%97%A5%E5%BF%97%E8%BD%AC%E5%8F%91%E9%85%8D%E7%BD%AE/</link>
        <pubDate>Mon, 20 Sep 2021 22:00:38 +0800</pubDate>
        
        <guid>https://zcj-git520.github.io/p/syslog%E6%97%A5%E5%BF%97%E8%BD%AC%E5%8F%91%E9%85%8D%E7%BD%AE/</guid>
        <description>&lt;img src="https://zcj-git520.github.io/p/syslog%E6%97%A5%E5%BF%97%E8%BD%AC%E5%8F%91%E9%85%8D%E7%BD%AE/8.png" alt="Featured image of post syslogæ—¥å¿—è½¬å‘é…ç½®" /&gt;&lt;h2 id=&#34;æœåŠ¡å™¨é…ç½®æœåŠ¡å™¨å¹³å°x86&#34;&gt;æœåŠ¡å™¨é…ç½®(æœåŠ¡å™¨å¹³å°ï¼šx86)&lt;/h2&gt;
&lt;h3 id=&#34;rsyslogç®€ä»‹&#34;&gt;Rsyslogç®€ä»‹&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Rsyslogæ˜¯ä¸€ä¸ª syslogd çš„å¤šçº¿ç¨‹å¢å¼ºç‰ˆï¼Œåœ¨syslogçš„åŸºç¡€ä¸Šæ‰©å±•äº†å¾ˆå¤šå…¶ä»–åŠŸèƒ½ï¼Œå¦‚æ•°æ®åº“æ”¯æŒ(MySQL, PostgreSQLã€Oracleç­‰)ã€æ—¥å¿—å†…å®¹ç­›é€‰ã€å®šä¹‰æ—¥å¿—æ ¼å¼æ¨¡æ¿ç­‰ã€‚é™¤äº†é»˜è®¤çš„udpåè®®å¤–ï¼Œrsyslogè¿˜æ”¯æŒtcpåè®®æ¥æ¥æ”¶æ—¥å¿—ã€‚&lt;/li&gt;
&lt;li&gt;ç›®å‰çš„linuxçš„å‘è¡Œç‰ˆéƒ½åˆ‡æ¢ä¸ºrsyslog&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;å®‰è£…rsyslog&#34;&gt;å®‰è£…Rsyslog&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Linuxçš„å‘è¡Œç‰ˆä¸­é¢„å…ˆå®‰è£…äº†Rsyslog,æ— éœ€å®‰è£…ï¼Œrsyslogd â€“v æŸ¥çœ‹ç‰ˆæœ¬&lt;/li&gt;
&lt;li&gt;è‹¥æœªå®‰è£…ï¼Œä»¥ä¸‹æ˜¯å®‰è£…æ­¥éª¤ï¼š
1.ubuntuï¼šsudo apt install rsyslog
2.CentOSï¼šyum install rsyslog&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;rsyslogconfé…ç½®æ–‡ä»¶è¯¦è§£&#34;&gt;Rsyslog.confé…ç½®æ–‡ä»¶è¯¦è§£&lt;/h3&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;é…ç½®æ–‡ä»¶ä½ç½®ï¼š/etc/rsyslog.conf
#### MODULES ####               #å®šä¹‰æ—¥å¿—çš„æ¨¡å—ã€‚
$ModLoad imuxsock             #imuxsockä¸ºæ¨¡å—åï¼Œæ”¯æŒæœ¬åœ°ç³»ç»Ÿæ—¥å¿—çš„æ¨¡å—ã€‚
$ModLoad imjournal            #imjournalä¸ºæ¨¡å—åï¼Œæ”¯æŒå¯¹ç³»ç»Ÿæ—¥å¿—çš„è®¿é—®ã€‚
#$ModLoad imklog               #imklogä¸ºæ¨¡å—åï¼Œæ”¯æŒå†…æ ¸æ—¥å¿—çš„æ¨¡å—ã€‚
#$ModLoad immark               #immarkä¸ºæ¨¡å—åï¼Œæ”¯æŒæ—¥å¿—æ ‡è®°ã€‚
# Provides UDP syslog reception   #æä¾›udp syslogçš„æ¥æ”¶ã€‚
#$ModLoad imudp               #imudpä¸ºæ¨¡å—åï¼Œæ”¯æŒudpåè®®ã€‚
#$UDPServerRun 514               #å…è®¸514ç«¯å£æ¥æ”¶ä½¿ç”¨udpå’Œtcpè½¬å‘æ¥çš„æ—¥å¿—ã€‚
# Provides TCP syslog reception       #æä¾›tcp syslogçš„æ¥æ”¶ã€‚
#$ModLoad imtcp              #imtcpä¸ºæ¨¡å—åï¼Œæ”¯æŒtcpåè®®ã€‚
#$InputTCPServerRun 514

#### GLOBAL DIRECTIVES ####    #å®šä¹‰å…¨å±€æ—¥å¿—æ ¼å¼çš„æŒ‡ä»¤ã€‚
# Where to place auxiliary files
$WorkDirectory /var/lib/rsyslog       #å·¥ä½œç›®å½•ã€‚
# Use default timestamp format
$ActionFileDefaultTemplate RSYSLOG_TraditionalFileFormat  #å®šä¹‰æ—¥å¿—æ ¼å¼é»˜è®¤æ¨¡æ¿ã€‚
$IncludeConfig /etc/rsyslog.d/*.conf                     #æ‰€æœ‰é…ç½®æ–‡ä»¶è·¯å¾„ã€‚
$OmitLocalLogging on                                      #çœç•¥æœ¬åœ°ç™»å½•ã€‚
# File to store the position in the journal
$IMJournalStateFile imjournal.state

#### RULES ####
#kern.*                                  /dev/console
#è®°å½•æ‰€æœ‰æ—¥å¿—ç±»å‹çš„infoçº§åˆ«ä»¥åŠå¤§äºinfoçº§åˆ«çš„ä¿¡æ¯åˆ°messagesæ–‡ä»¶ï¼Œä½†æ˜¯mailé‚®ä»¶ä¿¡æ¯ï¼ŒauthprivéªŒè¯æ–¹é¢çš„ä¿¡æ¯å’Œcornæ—¶é—´å’Œä»»åŠ¡ç›¸å…³ä¿¡æ¯é™¤å¤–ã€‚
*.info;mail.none;authpriv.none;cron.none      /var/log/messages

# authprivéªŒè¯ç›¸å…³çš„æ‰€æœ‰ä¿¡æ¯å­˜æ”¾åœ¨/var/log/secureã€‚
authpriv.*                                /var/log/secure

#é‚®ä»¶çš„æ‰€æœ‰ä¿¡æ¯å­˜åœ¨/var/log/maillogï¼›è¿™é‡Œæœ‰ä¸€ä¸ªâ€œ-â€ç¬¦å·è¡¨ç¤ºæ˜¯ä½¿ç”¨å¼‚æ­¥çš„æ–¹å¼è®°å½•
mail.*                                   -/var/log/maillog

#ä»»åŠ¡è®¡åˆ’æœ‰å…³çš„ä¿¡æ¯å­˜æ”¾åœ¨/var/log/cronã€‚
cron.*                                   /var/log/cron

#è®°å½•æ‰€æœ‰çš„â‰¥emergçº§åˆ«ä¿¡æ¯ï¼Œå‘é€ç»™æ¯ä¸ªç™»å½•åˆ°ç³»ç»Ÿçš„æ—¥å¿—ã€‚
*.emerg                                 :omusrmsg:*

#è®°å½•uucpï¼Œnews.critç­‰å­˜æ”¾åœ¨/var/log/spooler
uucp,news.crit                            /var/log/spooler

#æœ¬åœ°æœåŠ¡å™¨çš„å¯åŠ¨çš„æ‰€æœ‰æ—¥å¿—å­˜æ”¾åœ¨/var/log/boot.log
local7.*                                  /var/log/boot.log

ä»¥ä¸‹ä¸ºï¼šrsyslog å®¢æœç«¯çš„é…ç½®
#å‘é€æ—¥å¿—ï¼Œ@è¡¨ç¤ºä¼ è¾“åè®®ï¼ˆ@è¡¨ç¤ºudpï¼Œ@@è¡¨ç¤ºtcpï¼‰ï¼Œåé¢æ˜¯ipå’Œç«¯å£ã€‚
#*.* @@remote-host:514
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&#34;é…ç½®æœåŠ¡å™¨&#34;&gt;é…ç½®æœåŠ¡å™¨&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;ä½¿ç”¨sudo vi /etc/rsyslog.conf æ‰“å¼€é…ç½®æ–‡ä»¶&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;é€‰æ‹©ä¼ è¾“çš„åè®®&#34;&gt;é€‰æ‹©ä¼ è¾“çš„åè®®&lt;/h4&gt;
&lt;p&gt;1.ä½¿ç”¨udpä¼ è¾“æ—¥å¿—ï¼Œé…ç½®æ—¶å°†å‰é¢çš„#å»æ‰å³å¯&lt;br&gt;
$ModLoad imudp&lt;br&gt;
$UDPServerRun 514&lt;br&gt;
2.ä½¿ç”¨tcpä¼ è¾“åè®®, å°†#å»ç‚¹å³å¯&lt;br&gt;
$ModLoad imtcp&lt;br&gt;
$InputTCPServerRun 514&lt;br&gt;
é…ç½®å¦‚å›¾ï¼š&lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 359; 
			flex-basis: 863px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/syslog%E6%97%A5%E5%BF%97%E8%BD%AC%E5%8F%91%E9%85%8D%E7%BD%AE/1.png&#34; data-size=&#34;554x154&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/syslog%E6%97%A5%E5%BF%97%E8%BD%AC%E5%8F%91%E9%85%8D%E7%BD%AE/1.png&#34;
			width=&#34;554&#34;
			height=&#34;154&#34;
			srcset=&#34;https://zcj-git520.github.io/p/syslog%E6%97%A5%E5%BF%97%E8%BD%AC%E5%8F%91%E9%85%8D%E7%BD%AE/1_hu77084371b4080a34a3de211f1d39cdb3_32949_480x0_resize_box_3.png 480w, https://zcj-git520.github.io/p/syslog%E6%97%A5%E5%BF%97%E8%BD%AC%E5%8F%91%E9%85%8D%E7%BD%AE/1_hu77084371b4080a34a3de211f1d39cdb3_32949_1024x0_resize_box_3.png 1024w&#34;
			loading=&#34;lazy&#34;
			&gt;
	&lt;/a&gt;
	
&lt;/figure&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æ³¨æ˜ï¼š&lt;br&gt;
514/5014ç«¯å£å·å¯ä»¥è‡ªå·±é…ç½®ï¼Œé»˜è®¤ä¸º514.&lt;br&gt;
rsyslogåå°è¿›ç¨‹æ˜¯å¯ä»¥åŒæ—¶ç›‘å¬TCP/UDPè¿æ¥çš„&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;é…ç½®æ¥æ”¶æ—¥å¿—æ¨¡æ¿&#34;&gt;é…ç½®æ¥æ”¶æ—¥å¿—æ¨¡æ¿&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;åœ¨GLOBAL DIRECTIVESå†…å®¹å—çš„å‰é¢å¢åŠ æ¥æ”¶æ—¥å¿—æ¨¡æ¿
æ¨¡æ¿å¦‚ä¸‹ï¼š&lt;br&gt;
$template RemoteLogs,&amp;quot;/var/log/%HOSTNAME%/%PROGRAMNAME%.log&amp;quot;&lt;br&gt;
*.* ?RemoteLogs&lt;br&gt;
&amp;amp; ~&lt;/li&gt;
&lt;li&gt;æ³¨æ˜ï¼š&lt;br&gt;
1ã€$template RemoteLogsæŒ‡ä»¤ï¼ˆâ€œRemoteLogsâ€ å¯ä»¥ä¸ºå…¶å®ƒçš„æè¿°çš„åå­—ï¼‰è¿«ä½¿rsyslogåå°è¿›ç¨‹éš”å¼€æœ¬åœ°/var/log/ä¸‹æ–‡ä»¶å»å†™æ—¥å¿—ä¿¡æ¯ã€‚è€Œæ—¥å¿—æ–‡ä»¶ååˆ™ä¾æ®å‘é€è¿œç¨‹æ—¥å¿—çš„æœºå™¨ååŠåº”ç”¨ç¨‹åºåæ¥å®šä¹‰ã€‚&lt;br&gt;
2ã€*.*  ?RemoteLogsï¼‰æš—å«è¿è¡Œç”¨æ¨¡æ¿RemoteLogsäºæ‰€æœ‰çš„æ¥æ”¶æ—¥å¿—ã€‚&lt;br&gt;
3ã€&amp;amp; ~åˆ™å‘Šè¯‰rsyslogåå°è¿›ç¨‹åœæ­¢è¿›ä¸€æ­¥çš„å»å¤„ç†æ—¥å¿—ä¿¡æ¯,å³ä¸å¯¹å®ƒä»¬è¿›è¡Œæœ¬åœ°åŒ–å†™å…¥ï¼Œå®ƒæ˜¯ä»£è¡¨ä¸€ä¸ªé‡å®šå‘è§„åˆ™ã€‚å¦‚æœæ²¡æœ‰è¿™ä¸€è¡Œï¼Œåˆ™æ„å‘³ç€æ¥æ”¶åˆ°çš„æ—¥å¿—ä¼šå†™å…¥ä¸¤æ¬¡ï¼Œä¸€æ¬¡å¦‚å‰ä¸¤è¡Œå†™çš„æ–¹å¼å†™ï¼Œç¬¬äºŒæ¬¡åˆ™ä»¥æœ¬åœ°æ—¥å¿—è®°å½•çš„æ–¹å¼å†™å…¥ã€‚è¿è¡Œè¿™ä¸ªè§„åˆ™çš„å¦ä¸€ä¸ªç»“è®ºåˆ™æ˜¯æ—¥å¿—æœåŠ¡å™¨è‡ªå·±çš„æ—¥å¿—ä¿¡æ¯åªä¼šå†™å…¥åˆ°ä¾ç…§æœºå™¨ä¸»æœºåå‘½åçš„æ–‡ä»¶ä¸­ã€‚
&lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 426; 
			flex-basis: 1022px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/syslog%E6%97%A5%E5%BF%97%E8%BD%AC%E5%8F%91%E9%85%8D%E7%BD%AE/2.png&#34; data-size=&#34;554x130&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/syslog%E6%97%A5%E5%BF%97%E8%BD%AC%E5%8F%91%E9%85%8D%E7%BD%AE/2.png&#34;
			width=&#34;554&#34;
			height=&#34;130&#34;
			srcset=&#34;https://zcj-git520.github.io/p/syslog%E6%97%A5%E5%BF%97%E8%BD%AC%E5%8F%91%E9%85%8D%E7%BD%AE/2_hu3baee738422c39b2b8b3a15300ae6fe7_26443_480x0_resize_box_3.png 480w, https://zcj-git520.github.io/p/syslog%E6%97%A5%E5%BF%97%E8%BD%AC%E5%8F%91%E9%85%8D%E7%BD%AE/2_hu3baee738422c39b2b8b3a15300ae6fe7_26443_1024x0_resize_box_3.png 1024w&#34;
			loading=&#34;lazy&#34;
			&gt;
	&lt;/a&gt;
	
&lt;/figure&gt;&lt;/li&gt;
&lt;li&gt;è®¾ç½®åï¼Œä¼šæŒ‰ç…§æ¨¡æ¿æ ¼å¼ä¿å­˜æ—¥å¿—
&lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 1065; 
			flex-basis: 2556px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/syslog%E6%97%A5%E5%BF%97%E8%BD%AC%E5%8F%91%E9%85%8D%E7%BD%AE/3.png&#34; data-size=&#34;554x52&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/syslog%E6%97%A5%E5%BF%97%E8%BD%AC%E5%8F%91%E9%85%8D%E7%BD%AE/3.png&#34;
			width=&#34;554&#34;
			height=&#34;52&#34;
			srcset=&#34;https://zcj-git520.github.io/p/syslog%E6%97%A5%E5%BF%97%E8%BD%AC%E5%8F%91%E9%85%8D%E7%BD%AE/3_hu8eaabc720939b9f1b459055b1ef23fcf_21246_480x0_resize_box_3.png 480w, https://zcj-git520.github.io/p/syslog%E6%97%A5%E5%BF%97%E8%BD%AC%E5%8F%91%E9%85%8D%E7%BD%AE/3_hu8eaabc720939b9f1b459055b1ef23fcf_21246_1024x0_resize_box_3.png 1024w&#34;
			loading=&#34;lazy&#34;
			&gt;
	&lt;/a&gt;
	
&lt;/figure&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;è®¾ç½®å®Œæˆä¿å­˜&#34;&gt;è®¾ç½®å®Œæˆï¼Œä¿å­˜&lt;/h4&gt;
&lt;h3 id=&#34;æ£€æŸ¥rsyslogé…ç½®&#34;&gt;æ£€æŸ¥Rsyslogé…ç½®&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;ä½¿ç”¨å‘½ä»¤ï¼šrsyslogd -f /etc/rsyslog.conf -N1&lt;/li&gt;
&lt;li&gt;é…ç½®ä¿¡æ¯æ­£ç¡®æœ‰å¦‚ä¸‹æç¤º:
&lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 1259; 
			flex-basis: 3021px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/syslog%E6%97%A5%E5%BF%97%E8%BD%AC%E5%8F%91%E9%85%8D%E7%BD%AE/4.png&#34; data-size=&#34;554x44&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/syslog%E6%97%A5%E5%BF%97%E8%BD%AC%E5%8F%91%E9%85%8D%E7%BD%AE/4.png&#34;
			width=&#34;554&#34;
			height=&#34;44&#34;
			srcset=&#34;https://zcj-git520.github.io/p/syslog%E6%97%A5%E5%BF%97%E8%BD%AC%E5%8F%91%E9%85%8D%E7%BD%AE/4_hu7b39900913f27882a0ae7c07277316b2_23299_480x0_resize_box_3.png 480w, https://zcj-git520.github.io/p/syslog%E6%97%A5%E5%BF%97%E8%BD%AC%E5%8F%91%E9%85%8D%E7%BD%AE/4_hu7b39900913f27882a0ae7c07277316b2_23299_1024x0_resize_box_3.png 1024w&#34;
			loading=&#34;lazy&#34;
			&gt;
	&lt;/a&gt;
	
&lt;/figure&gt;&lt;/li&gt;
&lt;li&gt;è‹¥é…ç½®ä¿¡æ¯æœ‰è¯¯ï¼Œåˆ™éœ€è¦åœ¨æ›´æ”¹é…ç½®æ–‡ä»¶&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;é‡å¯rsyslogæœåŠ¡&#34;&gt;é‡å¯RSyslogæœåŠ¡&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Debian,Ubuntuæˆ–CentOS/RHEL 6ä½¿ç”¨:sudo service rsyslog restart&lt;/li&gt;
&lt;li&gt;Fedora æˆ– CentOS/RHEL 7ä½¿ç”¨ï¼šsudo systemctl restart rsyslog&lt;/li&gt;
&lt;li&gt;ä½¿ç”¨ï¼šsudo lsof -i :[ç«¯å£å·]ï¼ŒæŸ¥çœ‹æœåŠ¡æ˜¯å¦å¼€å¯å’Œtcp/udpè¿æ¥æƒ…å†µ
&lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 548; 
			flex-basis: 1316px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/syslog%E6%97%A5%E5%BF%97%E8%BD%AC%E5%8F%91%E9%85%8D%E7%BD%AE/5.png&#34; data-size=&#34;554x101&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/syslog%E6%97%A5%E5%BF%97%E8%BD%AC%E5%8F%91%E9%85%8D%E7%BD%AE/5.png&#34;
			width=&#34;554&#34;
			height=&#34;101&#34;
			srcset=&#34;https://zcj-git520.github.io/p/syslog%E6%97%A5%E5%BF%97%E8%BD%AC%E5%8F%91%E9%85%8D%E7%BD%AE/5_hub384d36617421245c9364162c8094a34_49314_480x0_resize_box_3.png 480w, https://zcj-git520.github.io/p/syslog%E6%97%A5%E5%BF%97%E8%BD%AC%E5%8F%91%E9%85%8D%E7%BD%AE/5_hub384d36617421245c9364162c8094a34_49314_1024x0_resize_box_3.png 1024w&#34;
			loading=&#34;lazy&#34;
			&gt;
	&lt;/a&gt;
	
&lt;/figure&gt;&lt;/li&gt;
&lt;li&gt;æˆ–ä½¿ç”¨sudo netstat -pantu | grep rsyslog
&lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 748; 
			flex-basis: 1796px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/syslog%E6%97%A5%E5%BF%97%E8%BD%AC%E5%8F%91%E9%85%8D%E7%BD%AE/6.png&#34; data-size=&#34;554x74&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/syslog%E6%97%A5%E5%BF%97%E8%BD%AC%E5%8F%91%E9%85%8D%E7%BD%AE/6.png&#34;
			width=&#34;554&#34;
			height=&#34;74&#34;
			srcset=&#34;https://zcj-git520.github.io/p/syslog%E6%97%A5%E5%BF%97%E8%BD%AC%E5%8F%91%E9%85%8D%E7%BD%AE/6_hud96afeb39ab29624ebbfb8d879fa92f8_35198_480x0_resize_box_3.png 480w, https://zcj-git520.github.io/p/syslog%E6%97%A5%E5%BF%97%E8%BD%AC%E5%8F%91%E9%85%8D%E7%BD%AE/6_hud96afeb39ab29624ebbfb8d879fa92f8_35198_1024x0_resize_box_3.png 1024w&#34;
			loading=&#34;lazy&#34;
			&gt;
	&lt;/a&gt;
	
&lt;/figure&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;æŸ¥çœ‹æ—¥å¿—&#34;&gt;æŸ¥çœ‹æ—¥å¿—&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;å¯åŠ¨å®¢æˆ·ç«¯ï¼Œè¿›å…¥é…ç½®æ–‡ä»¶æ¨¡æ¿ä¸­æ—¥å¿—ä¿å­˜çš„ä½ç½®ï¼š&lt;br&gt;
&lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 971; 
			flex-basis: 2332px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/syslog%E6%97%A5%E5%BF%97%E8%BD%AC%E5%8F%91%E9%85%8D%E7%BD%AE/7.png&#34; data-size=&#34;554x57&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/syslog%E6%97%A5%E5%BF%97%E8%BD%AC%E5%8F%91%E9%85%8D%E7%BD%AE/7.png&#34;
			width=&#34;554&#34;
			height=&#34;57&#34;
			srcset=&#34;https://zcj-git520.github.io/p/syslog%E6%97%A5%E5%BF%97%E8%BD%AC%E5%8F%91%E9%85%8D%E7%BD%AE/7_hu31450327525b5e8e578d50ab58e1813e_22403_480x0_resize_box_3.png 480w, https://zcj-git520.github.io/p/syslog%E6%97%A5%E5%BF%97%E8%BD%AC%E5%8F%91%E9%85%8D%E7%BD%AE/7_hu31450327525b5e8e578d50ab58e1813e_22403_1024x0_resize_box_3.png 1024w&#34;
			loading=&#34;lazy&#34;
			&gt;
	&lt;/a&gt;
	
&lt;/figure&gt;&lt;br&gt;
&lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 371; 
			flex-basis: 892px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/syslog%E6%97%A5%E5%BF%97%E8%BD%AC%E5%8F%91%E9%85%8D%E7%BD%AE/8.png&#34; data-size=&#34;554x149&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/syslog%E6%97%A5%E5%BF%97%E8%BD%AC%E5%8F%91%E9%85%8D%E7%BD%AE/8.png&#34;
			width=&#34;554&#34;
			height=&#34;149&#34;
			srcset=&#34;https://zcj-git520.github.io/p/syslog%E6%97%A5%E5%BF%97%E8%BD%AC%E5%8F%91%E9%85%8D%E7%BD%AE/8_hu442c80cfdca83249146ebd0d5822289f_88346_480x0_resize_box_3.png 480w, https://zcj-git520.github.io/p/syslog%E6%97%A5%E5%BF%97%E8%BD%AC%E5%8F%91%E9%85%8D%E7%BD%AE/8_hu442c80cfdca83249146ebd0d5822289f_88346_1024x0_resize_box_3.png 1024w&#34;
			loading=&#34;lazy&#34;
			&gt;
	&lt;/a&gt;
	
&lt;/figure&gt;&lt;/li&gt;
&lt;li&gt;è‹¥æ²¡æœ‰ç”Ÿæˆæ—¥å¿—æ–‡ä»¶ï¼Œéœ€è¦ä½¿ç”¨ï¼šsudo tcpdump host å®¢æˆ·ç«¯ip æŸ¥çœ‹æ˜¯å¦è½¬å‘æ—¥å¿—ï¼Œæœ‰åˆ™æ˜¯ä¿å­˜æ¨¡æ¿å‡ºé—®é¢˜ï¼Œæ²¡æœ‰å¯èƒ½çš„æœåŠ¡ç«¯é…ç½®æˆ–è€…å®¢æˆ·ç«¯é…ç½®å‡ºé—®é¢˜&lt;br&gt;
&lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 415; 
			flex-basis: 997px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/syslog%E6%97%A5%E5%BF%97%E8%BD%AC%E5%8F%91%E9%85%8D%E7%BD%AE/9.png&#34; data-size=&#34;553x133&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/syslog%E6%97%A5%E5%BF%97%E8%BD%AC%E5%8F%91%E9%85%8D%E7%BD%AE/9.png&#34;
			width=&#34;553&#34;
			height=&#34;133&#34;
			srcset=&#34;https://zcj-git520.github.io/p/syslog%E6%97%A5%E5%BF%97%E8%BD%AC%E5%8F%91%E9%85%8D%E7%BD%AE/9_hud06aeafa785a175b3e704d37bde11243_109835_480x0_resize_box_3.png 480w, https://zcj-git520.github.io/p/syslog%E6%97%A5%E5%BF%97%E8%BD%AC%E5%8F%91%E9%85%8D%E7%BD%AE/9_hud06aeafa785a175b3e704d37bde11243_109835_1024x0_resize_box_3.png 1024w&#34;
			loading=&#34;lazy&#34;
			&gt;
	&lt;/a&gt;
	
&lt;/figure&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;å®¢æˆ·ç«¯é…ç½®&#34;&gt;å®¢æˆ·ç«¯é…ç½®&lt;/h2&gt;
&lt;h3 id=&#34;å¹³å°x86&#34;&gt;å¹³å°ï¼šx86&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;å¹³å°æ˜¯ä½¿ç”¨çš„rsyslog&lt;/li&gt;
&lt;li&gt;ä½¿ç”¨sudo vi /etc/rsyslog.conf æ‰“å¼€é…ç½®æ–‡ä»¶&lt;/li&gt;
&lt;li&gt;é…ç½®ï¼š&lt;br&gt;
å‘é€æ—¥å¿—ï¼Œ@è¡¨ç¤ºä¼ è¾“åè®®ï¼ˆ@è¡¨ç¤ºudpï¼Œ@@è¡¨ç¤ºtcpï¼‰ï¼Œåé¢æ˜¯ipå’Œç«¯å£ã€‚&lt;br&gt;
*.* @@remote-host:514&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 769; 
			flex-basis: 1846px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/syslog%E6%97%A5%E5%BF%97%E8%BD%AC%E5%8F%91%E9%85%8D%E7%BD%AE/10.png&#34; data-size=&#34;554x72&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/syslog%E6%97%A5%E5%BF%97%E8%BD%AC%E5%8F%91%E9%85%8D%E7%BD%AE/10.png&#34;
			width=&#34;554&#34;
			height=&#34;72&#34;
			srcset=&#34;https://zcj-git520.github.io/p/syslog%E6%97%A5%E5%BF%97%E8%BD%AC%E5%8F%91%E9%85%8D%E7%BD%AE/10_hu121ce9beda989ac489d36785534a4c07_11404_480x0_resize_box_3.png 480w, https://zcj-git520.github.io/p/syslog%E6%97%A5%E5%BF%97%E8%BD%AC%E5%8F%91%E9%85%8D%E7%BD%AE/10_hu121ce9beda989ac489d36785534a4c07_11404_1024x0_resize_box_3.png 1024w&#34;
			loading=&#34;lazy&#34;
			&gt;
	&lt;/a&gt;
	
&lt;/figure&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æ£€æŸ¥ä¸é‡å¯æœåŠ¡å’Œx86æœåŠ¡å™¨å¹³å°ä¸€æ ·&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;å¹³å°å¼€å‘æ¿&#34;&gt;å¹³å°å¼€å‘æ¿&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;æ¿å­æ˜¯ä½¿ç”¨çš„syslog ä½¿ç”¨å‘½ä»¤ï¼špsè¿›è¡ŒæŸ¥çœ‹è¿›ç¨‹&lt;br&gt;
&lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 266; 
			flex-basis: 639px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/syslog%E6%97%A5%E5%BF%97%E8%BD%AC%E5%8F%91%E9%85%8D%E7%BD%AE/11.png&#34; data-size=&#34;554x208&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/syslog%E6%97%A5%E5%BF%97%E8%BD%AC%E5%8F%91%E9%85%8D%E7%BD%AE/11.png&#34;
			width=&#34;554&#34;
			height=&#34;208&#34;
			srcset=&#34;https://zcj-git520.github.io/p/syslog%E6%97%A5%E5%BF%97%E8%BD%AC%E5%8F%91%E9%85%8D%E7%BD%AE/11_hu4e6e3e2c799b4a539a43c7ac3ef0cfea_64168_480x0_resize_box_3.png 480w, https://zcj-git520.github.io/p/syslog%E6%97%A5%E5%BF%97%E8%BD%AC%E5%8F%91%E9%85%8D%E7%BD%AE/11_hu4e6e3e2c799b4a539a43c7ac3ef0cfea_64168_1024x0_resize_box_3.png 1024w&#34;
			loading=&#34;lazy&#34;
			&gt;
	&lt;/a&gt;
	
&lt;/figure&gt;&lt;/li&gt;
&lt;li&gt;æ‰¾åˆ°syslogdæœåŠ¡ï¼Œè‹¥æœªæ‰¾åˆ°ï¼Œå¯èƒ½ä¸æ”¯æŒsyslogæœåŠ¡
ä½¿ç”¨å‘½ä»¤ï¼šsyslogd â€“h æŸ¥çœ‹syslogdæ”¯æŒçš„æœåŠ¡&lt;br&gt;
&lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 271; 
			flex-basis: 651px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/syslog%E6%97%A5%E5%BF%97%E8%BD%AC%E5%8F%91%E9%85%8D%E7%BD%AE/12.png&#34; data-size=&#34;554x204&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/syslog%E6%97%A5%E5%BF%97%E8%BD%AC%E5%8F%91%E9%85%8D%E7%BD%AE/12.png&#34;
			width=&#34;554&#34;
			height=&#34;204&#34;
			srcset=&#34;https://zcj-git520.github.io/p/syslog%E6%97%A5%E5%BF%97%E8%BD%AC%E5%8F%91%E9%85%8D%E7%BD%AE/12_hu303331932f04e72e99ec8f8ee7478f8d_60851_480x0_resize_box_3.png 480w, https://zcj-git520.github.io/p/syslog%E6%97%A5%E5%BF%97%E8%BD%AC%E5%8F%91%E9%85%8D%E7%BD%AE/12_hu303331932f04e72e99ec8f8ee7478f8d_60851_1024x0_resize_box_3.png 1024w&#34;
			loading=&#34;lazy&#34;
			&gt;
	&lt;/a&gt;
	
&lt;/figure&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;é…ç½®å®¢æˆ·ç«¯&#34;&gt;é…ç½®å®¢æˆ·ç«¯&lt;/h3&gt;
&lt;p&gt;1.ç»“æŸä¹‹å‰çš„syslogdæœåŠ¡ï¼Œé€šè¿‡ä½¿ç”¨kill è¿›ç¨‹å· ç»“æŸè¿›ç¨‹&lt;br&gt;
&lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 537; 
			flex-basis: 1290px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/syslog%E6%97%A5%E5%BF%97%E8%BD%AC%E5%8F%91%E9%85%8D%E7%BD%AE/13.png&#34; data-size=&#34;554x103&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/syslog%E6%97%A5%E5%BF%97%E8%BD%AC%E5%8F%91%E9%85%8D%E7%BD%AE/13.png&#34;
			width=&#34;554&#34;
			height=&#34;103&#34;
			srcset=&#34;https://zcj-git520.github.io/p/syslog%E6%97%A5%E5%BF%97%E8%BD%AC%E5%8F%91%E9%85%8D%E7%BD%AE/13_hu9fb7ecb2769d8f203208712c5df5625e_31804_480x0_resize_box_3.png 480w, https://zcj-git520.github.io/p/syslog%E6%97%A5%E5%BF%97%E8%BD%AC%E5%8F%91%E9%85%8D%E7%BD%AE/13_hu9fb7ecb2769d8f203208712c5df5625e_31804_1024x0_resize_box_3.png 1024w&#34;
			loading=&#34;lazy&#34;
			&gt;
	&lt;/a&gt;
	
&lt;/figure&gt;
2.é€šè¿‡syslogdæä¾›çš„æœåŠ¡æ˜¯é€šè¿‡ -L  â€“R æœåŠ¡å™¨çš„ip:port&lt;br&gt;
æ³¨æ˜ï¼šé»˜è®¤ç«¯å£ä¸ºï¼š514,ç«¯å£å·åº”è¯¥ä¸æœåŠ¡å™¨é…ç½®çš„ç«¯å£å·ä¸€è‡´&lt;br&gt;
3.å¯åŠ¨syslogdæœåŠ¡ï¼š/sbin/syslogd -f /etc/syslog.conf -L -R 172.16.193.204:514
4.é€šè¿‡tcpdump host 172.16.193.204 æŸ¥çœ‹æ—¥å¿—æ˜¯å¦è¢«è½¬å‘åˆ°æœåŠ¡å™¨&lt;br&gt;
&lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 537; 
			flex-basis: 1290px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/syslog%E6%97%A5%E5%BF%97%E8%BD%AC%E5%8F%91%E9%85%8D%E7%BD%AE/13.png&#34; data-size=&#34;554x103&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/syslog%E6%97%A5%E5%BF%97%E8%BD%AC%E5%8F%91%E9%85%8D%E7%BD%AE/13.png&#34;
			width=&#34;554&#34;
			height=&#34;103&#34;
			srcset=&#34;https://zcj-git520.github.io/p/syslog%E6%97%A5%E5%BF%97%E8%BD%AC%E5%8F%91%E9%85%8D%E7%BD%AE/13_hu9fb7ecb2769d8f203208712c5df5625e_31804_480x0_resize_box_3.png 480w, https://zcj-git520.github.io/p/syslog%E6%97%A5%E5%BF%97%E8%BD%AC%E5%8F%91%E9%85%8D%E7%BD%AE/13_hu9fb7ecb2769d8f203208712c5df5625e_31804_1024x0_resize_box_3.png 1024w&#34;
			loading=&#34;lazy&#34;
			&gt;
	&lt;/a&gt;
	
&lt;/figure&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æ³¨æ˜ï¼šå¼€å‘æ¿çš„syslogæ”¯æŒUDPä¼ è¾“ï¼Œéœ€è¦å¼€å‘æ¿çš„æ—¥å¿—æ–‡ä»¶éœ€è¦åœ¨æœåŠ¡å™¨æ‰“å¼€UDP&lt;/li&gt;
&lt;/ul&gt;
</description>
        </item>
        <item>
        <title>go åˆ‡ç‰‡çš„æ·±å…¥ç†è§£</title>
        <link>https://zcj-git520.github.io/p/go-%E5%88%87%E7%89%87%E7%9A%84%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3/</link>
        <pubDate>Wed, 15 Sep 2021 22:00:38 +0800</pubDate>
        
        <guid>https://zcj-git520.github.io/p/go-%E5%88%87%E7%89%87%E7%9A%84%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3/</guid>
        <description>&lt;img src="https://zcj-git520.github.io/p/go-%E5%88%87%E7%89%87%E7%9A%84%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3/s4.png" alt="Featured image of post go åˆ‡ç‰‡çš„æ·±å…¥ç†è§£" /&gt;&lt;h2 id=&#34;åˆ‡ç‰‡çš„å†…éƒ¨ç»“æ„&#34;&gt;åˆ‡ç‰‡çš„å†…éƒ¨ç»“æ„&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;åˆ‡ç‰‡çš„ç»“æ„å¯åˆ†ä¸ºï¼šæ•°ç»„ï¼Œæ•°æ®ï¼ˆå…ƒç´ ï¼‰çš„åœ°å€&amp;amp;dataã€ä¹Ÿå­˜å…ƒç´ ä¸ªæ•°lenã€å¯ä»¥å­˜å‚¨å¤šå°‘å…ƒç´ cap&lt;/li&gt;
&lt;li&gt;æºç å¦‚ä¸‹&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;/blockquote&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;å®šä¹‰åˆ‡ç‰‡çš„ç»“æ„ï¼š
type slice struct {
	array unsafe.Pointer   
	len   int
	cap   int
}
&lt;/code&gt;&lt;/pre&gt;&lt;ul&gt;
&lt;li&gt;å¦‚å›¾æ‰€ç¤º&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 447; 
			flex-basis: 1075px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/go-%E5%88%87%E7%89%87%E7%9A%84%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3/s1.png&#34; data-size=&#34;327x73&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/go-%E5%88%87%E7%89%87%E7%9A%84%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3/s1.png&#34;
			width=&#34;327&#34;
			height=&#34;73&#34;
			srcset=&#34;https://zcj-git520.github.io/p/go-%E5%88%87%E7%89%87%E7%9A%84%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3/s1_hufa230f30ea970ac155f1510029c77fa1_16064_480x0_resize_box_3.png 480w, https://zcj-git520.github.io/p/go-%E5%88%87%E7%89%87%E7%9A%84%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3/s1_hufa230f30ea970ac155f1510029c77fa1_16064_1024x0_resize_box_3.png 1024w&#34;
			loading=&#34;lazy&#34;
			alt=&#34;avatar&#34;&gt;
	&lt;/a&gt;
	
	&lt;figcaption&gt;avatar&lt;/figcaption&gt;
	
&lt;/figure&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;var data [] int å£°æ˜ä¸€ä¸ªåˆ‡ç‰‡ï¼Œç›¸å½“äºç”Ÿæˆåˆ‡ç‰‡çš„ç»“æ„ï¼Œdataåœ°å€æŒ‡é’ˆä¸ºnil, lenå’Œcapéƒ½ä¸º0ã€‚è¿™å°±å¾ˆæ¸…æ¥šä¸ºä»€ä¹ˆï¼Œnilåˆ‡ç‰‡ä¸å¯ä»¥ç›´æ¥ä½¿ç”¨äº†ğŸ˜„ ç»“æ„å¦‚å›¾&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 425; 
			flex-basis: 1020px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/go-%E5%88%87%E7%89%87%E7%9A%84%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3/s2.png&#34; data-size=&#34;357x84&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/go-%E5%88%87%E7%89%87%E7%9A%84%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3/s2.png&#34;
			width=&#34;357&#34;
			height=&#34;84&#34;
			srcset=&#34;https://zcj-git520.github.io/p/go-%E5%88%87%E7%89%87%E7%9A%84%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3/s2_hu3ecbacb1008bd2eb98e4b57b029321b8_19806_480x0_resize_box_3.png 480w, https://zcj-git520.github.io/p/go-%E5%88%87%E7%89%87%E7%9A%84%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3/s2_hu3ecbacb1008bd2eb98e4b57b029321b8_19806_1024x0_resize_box_3.png 1024w&#34;
			loading=&#34;lazy&#34;
			alt=&#34;avatar&#34;&gt;
	&lt;/a&gt;
	
	&lt;figcaption&gt;avatar&lt;/figcaption&gt;
	
&lt;/figure&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ä½¿ç”¨åˆ‡ç‰‡æ—¶éœ€è¦make([]type,len,cap)æˆ–è€…åˆå§‹åŒ–[]type{}æ‰èƒ½ä½¿ç”¨ï¼Œè¿™æ˜¯å› ä¸ºåœ¨åœ¨ç”Ÿæˆåˆ‡ç‰‡çš„ç»“æ„æ—¶ï¼ŒåŒæ—¶ä¹Ÿå¼€è¾Ÿäº†ä¸€æ®µæ–°çš„å†…å­˜ï¼Œç±»å‹ä¸ºtype, ç»“æ„é•¿åº¦ä¸ºcap,åŒæ—¶å€¼è¿›è¡Œåˆå§‹åŒ–ã€‚&lt;/li&gt;
&lt;li&gt;make æºç å¦‚ä¸‹ï¼š&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;/blockquote&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;func makeslice(et *_type, len, cap int) unsafe.Pointer {
	mem, overflow := math.MulUintptr(et.size, uintptr(cap))    // åˆ¤æ–­æ˜¯å¦è¶Šç•Œ
	if overflow || mem &amp;gt; maxAlloc || len &amp;lt; 0 || len &amp;gt; cap {
		// NOTE: Produce a &#39;len out of range&#39; error instead of a
		// &#39;cap out of range&#39; error when someone does make([]T, bignumber).
		// &#39;cap out of range&#39; is true too, but since the cap is only being
		// supplied implicitly, saying len is clearer.
		// See golang.org/issue/4085.
		mem, overflow := math.MulUintptr(et.size, uintptr(len))
		if overflow || mem &amp;gt; maxAlloc || len &amp;lt; 0 {
			panicmakeslicelen()       // è¶Šç•Œç›´æ¥ panic
		}
		panicmakeslicecap()    // è¶Šç•Œç›´æ¥ panic
	}

	return mallocgc(mem, et, true)  //å¼€è¾Ÿå†…å­˜
}
&lt;/code&gt;&lt;/pre&gt;&lt;blockquote&gt;
&lt;p&gt;&lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 318; 
			flex-basis: 763px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/go-%E5%88%87%E7%89%87%E7%9A%84%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3/s3.png&#34; data-size=&#34;525x165&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/go-%E5%88%87%E7%89%87%E7%9A%84%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3/s3.png&#34;
			width=&#34;525&#34;
			height=&#34;165&#34;
			srcset=&#34;https://zcj-git520.github.io/p/go-%E5%88%87%E7%89%87%E7%9A%84%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3/s3_hu288b58219022501a33ccafd08b91cbd7_40298_480x0_resize_box_3.png 480w, https://zcj-git520.github.io/p/go-%E5%88%87%E7%89%87%E7%9A%84%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3/s3_hu288b58219022501a33ccafd08b91cbd7_40298_1024x0_resize_box_3.png 1024w&#34;
			loading=&#34;lazy&#34;
			alt=&#34;avatar&#34;&gt;
	&lt;/a&gt;
	
	&lt;figcaption&gt;avatar&lt;/figcaption&gt;
	
&lt;/figure&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;ä¹Ÿå¯ä»¥é€šè¿‡åº•å±‚æ•°ç»„åˆå§‹åŒ–ï¼Œåˆ‡ç‰‡çš„dataæŒ‡é’ˆæŒ‡å‘å°±æ˜¯ç›¸åŒç±»å‹çš„åº•å±‚æ•°ç»„ï¼›é€šè¿‡slince := array[n:m],è¡¨ç¤ºå®šä¹‰äº†ä¸€ä¸ªç±»å‹å’Œarrayç›¸åŒï¼Œlenä¸ºm-n,capé»˜è®¤ä¸ºarrayçš„é•¿åº¦çš„åˆ‡ç‰‡ã€‚åˆ‡ç‰‡å’Œæ•°ç»„éƒ½æŒ‡å‘äº†ç›¸åŒçš„åœ°å€ã€‚å¤šä¸ªåˆ‡ç‰‡å¯ä»¥å…±ç”¨åŒä¸€ä¸ªåº•å±‚æ•°ç»„ã€‚
&lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 195; 
			flex-basis: 468px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/go-%E5%88%87%E7%89%87%E7%9A%84%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3/s4.png&#34; data-size=&#34;531x272&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/go-%E5%88%87%E7%89%87%E7%9A%84%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3/s4.png&#34;
			width=&#34;531&#34;
			height=&#34;272&#34;
			srcset=&#34;https://zcj-git520.github.io/p/go-%E5%88%87%E7%89%87%E7%9A%84%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3/s4_hu1fce009c184102799b4a69d72efc8ec2_68940_480x0_resize_box_3.png 480w, https://zcj-git520.github.io/p/go-%E5%88%87%E7%89%87%E7%9A%84%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3/s4_hu1fce009c184102799b4a69d72efc8ec2_68940_1024x0_resize_box_3.png 1024w&#34;
			loading=&#34;lazy&#34;
			alt=&#34;avatar&#34;&gt;
	&lt;/a&gt;
	
	&lt;figcaption&gt;avatar&lt;/figcaption&gt;
	
&lt;/figure&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;é€šè¿‡append å‡½æ•°å‘åˆ‡ç‰‡å¢åŠ åˆ‡ç‰‡çš„å…ƒç´ ï¼Œå¢åŠ äº†len, cap ä¸å˜ã€‚&lt;/p&gt;
&lt;h2 id=&#34;åˆ‡ç‰‡æ‰©å®¹&#34;&gt;åˆ‡ç‰‡æ‰©å®¹&lt;/h2&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;åœ¨èµ„æºå……è£•çš„æ¡ä»¶ä¸‹ï¼Œåˆ‡ç‰‡æ˜¯å¯ä»¥é€šè¿‡appendä¸æ–­å¢åŠ å…ƒç´ ï¼Œå½“lenä¸ªæ•°å¢åŠ åˆ°capä¸€æ ·æ—¶ï¼Œåœ¨å¢åŠ å…ƒç´ æ—¶ï¼Œå°±éœ€è¦å¢åŠ åˆ‡ç‰‡çš„å®¹é‡capï¼Œé‚£é—®é¢˜æ¥äº†ï¼Œåˆ‡ç‰‡æ˜¯æ€ä¹ˆæ‰©å®¹çš„å‘¢ï¼Ÿ&lt;/p&gt;
&lt;h3 id=&#34;æ‰©å®¹è§„åˆ™é¢„ä¼°è§„åˆ™&#34;&gt;æ‰©å®¹è§„åˆ™ï¼ˆé¢„ä¼°è§„åˆ™ï¼‰&lt;/h3&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;å½“éœ€è¦æ‰©å®¹çš„æ•°é‡æ¯”ä¹‹å‰capçš„ä¸¤å€éƒ½å¤§ï¼Œåˆ™æ‰©å®¹ä¸ºéœ€è¦æ‰©å®¹çš„æ•°é‡&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å½“éœ€è¦æ‰©å®¹çš„æ•°é‡æ¯”ä¹‹å‰capçš„ä¸¤å€éƒ½å¤§å°ï¼Œä¹‹å‰çš„capå°äº1024 ç›´æ¥æ‰©å¤§ä¹‹å‰çš„2å€&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å½“éœ€è¦æ‰©å®¹çš„æ•°é‡æ¯”ä¹‹å‰capçš„ä¸¤å€éƒ½å¤§å°ï¼Œä¹‹å‰çš„capå¤§äº1024 ç›´æ¥æ‰©å¤§ä¹‹å‰çš„1.25å€&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ä¼ªä»£ç å¦‚ä¸‹&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;if oldcap&lt;em&gt;2  &amp;lt; newcap æ—¶ï¼Œ æ‰©å®¹ä¸ºnewcap
else{ if oldcap &amp;lt; 1024     newcap = 2&lt;/em&gt;oldcap     ;  else           newcap = 1.25*oldcap }&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;æºä»£ç å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;blockquote&gt;
&lt;/blockquote&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;newcap := old.cap
	doublecap := newcap + newcap     //ä¸¤å€çš„oldcap
	if cap &amp;gt; doublecap {
//å½“éœ€è¦æ‰©å®¹çš„æ•°é‡æ¯”ä¹‹å‰capçš„ä¸¤å€éƒ½å¤§ï¼Œåˆ™æ‰©å®¹ä¸ºéœ€è¦æ‰©å®¹çš„æ•°é‡
		newcap = cap   
	} else {
//å½“éœ€è¦æ‰©å®¹çš„æ•°é‡æ¯”ä¹‹å‰capçš„ä¸¤å€éƒ½å¤§å°ï¼Œä¹‹å‰çš„capå°äº1024 ç›´æ¥æ‰©å¤§ä¹‹å‰çš„2å€
		if old.cap &amp;lt; 1024 {   
			newcap = doublecap
		} else {
			// Check 0 &amp;lt; newcap to detect overflow
			// and prevent an infinite loop.
å½“éœ€è¦æ‰©å®¹çš„æ•°é‡æ¯”ä¹‹å‰capçš„ä¸¤å€éƒ½å¤§å°ï¼Œä¹‹å‰çš„capå¤§äº1024 ç›´æ¥æ‰©å¤§ä¹‹å‰çš„1.25å€
			for 0 &amp;lt; newcap &amp;amp;&amp;amp; newcap &amp;lt; cap {
				newcap += newcap / 4
			}
			// Set newcap to the requested cap when
			// the newcap calculation overflowed.
			if newcap &amp;lt;= 0 {
				newcap = cap
			}
		}
	}
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&#34;æ‰©å®¹è°ƒæ•´&#34;&gt;æ‰©å®¹è°ƒæ•´&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;åœ¨é¢„ä¼°æ‰©å®¹åï¼Œä¼šæ ¹æ®å†…å­˜å¯¹é½ï¼ˆå‡å°‘å†…å­˜æµªè´¹ï¼‰åœ¨è¿›è¡Œè°ƒæ•´ï¼Œä»£ç ï¼šcapmem := roundupsize(uintptr(newcap) * uintptr(et.size))newcapå°±æ˜¯å‰æ–‡ä¸­è®¡ç®—å‡ºçš„newcapï¼Œet.sizeä»£è¡¨sliceä¸­ä¸€ä¸ªå…ƒç´ çš„å¤§å°ï¼Œcapmemè®¡ç®—å‡ºæ¥çš„å°±æ˜¯æ­¤æ¬¡æ‰©å®¹éœ€è¦ç”³è¯·çš„å†…å­˜å¤§å°ã€‚roundupsizeå‡½æ•°å°±æ˜¯å¤„ç†å†…å­˜å¯¹é½çš„å‡½æ•°&lt;/li&gt;
&lt;li&gt;æºç å¦‚ä¸‹&lt;/li&gt;
&lt;/ul&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt; var overflow bool
 	var lenmem, newlenmem, capmem uintptr
 	switch {
 	case et.size == 1:    //ä¾‹å¦‚byte å¤§å°ä¸º1ï¼Œ æ‰©å®¹çš„å¤§å°ä¸ºå‘ä¸Šå–æ•´çš„æ•°å€¼
 		lenmem = uintptr(old.len)
 		newlenmem = uintptr(cap)
 		capmem = roundupsize(uintptr(newcap)) 
 		overflow = uintptr(newcap) &amp;gt; maxAlloc
 		newcap = int(capmem)
 	case et.size == sys.PtrSize:
 		lenmem = uintptr(old.len) * sys.PtrSize
 		newlenmem = uintptr(cap) * sys.PtrSize
 		capmem = roundupsize(uintptr(newcap) * sys.PtrSize)
 		overflow = uintptr(newcap) &amp;gt; maxAlloc/sys.PtrSize
 		newcap = int(capmem / sys.PtrSize)
 	case isPowerOfTwo(et.size):  //å¤„ç†2çš„å€æ•°
 		var shift uintptr
 		if sys.PtrSize == 8 {
 			// Mask shift for better code generation.
 			shift = uintptr(sys.Ctz64(uint64(et.size))) &amp;amp; 63
 		} else {
 			shift = uintptr(sys.Ctz32(uint32(et.size))) &amp;amp; 31
 		}
 		lenmem = uintptr(old.len) &amp;lt;&amp;lt; shift
 		newlenmem = uintptr(cap) &amp;lt;&amp;lt; shift
 		capmem = roundupsize(uintptr(newcap) &amp;lt;&amp;lt; shift)
 		overflow = uintptr(newcap) &amp;gt; (maxAlloc &amp;gt;&amp;gt; shift)
 		newcap = int(capmem &amp;gt;&amp;gt; shift)
 	default:
 		lenmem = uintptr(old.len) * et.size
 		newlenmem = uintptr(cap) * et.size
 		capmem, overflow = math.MulUintptr(et.size, uintptr(newcap))
 		capmem = roundupsize(capmem)
 		newcap = int(capmem / et.size)
 	}
 
 	// The check of overflow in addition to capmem &amp;gt; maxAlloc is needed
 	// to prevent an overflow which can be used to trigger a segfault
 	// on 32bit architectures with this example program:
 	//
 	// type T [1&amp;lt;&amp;lt;27 + 1]int64
 	//
 	// var d T
 	// var s []T
 	//
 	// func main() {
 	//   s = append(s, d, d, d, d)
 	//   print(len(s), &amp;quot;\n&amp;quot;)
 	// }
 	if overflow || capmem &amp;gt; maxAlloc {
 		panic(errorString(&amp;quot;growslice: cap out of range&amp;quot;))
 	}

### æ‰©å®¹åå†…å­˜åˆ†é…

* åˆ†é… å¤§äºcapçš„å†…å­˜ï¼Œæ²¡æœ‰æ•°æ®æŒ‡é’ˆï¼ŒmemclrNoHeapPointersåˆ›å»º
* æºç å¦‚ä¸‹ï¼š
  &amp;gt; 
	var p unsafe.Pointer
	if et.ptrdata == 0 {
		p = mallocgc(capmem, nil, false)
		// The append() that calls growslice is going to overwrite from old.len to cap (which will be the new length).
		// Only clear the part that will not be overwritten.
		memclrNoHeapPointers(add(p, newlenmem), capmem-newlenmem)
	} else {
		// Note: can&#39;t use rawmem (which avoids zeroing of memory), because then GC can scan uninitialized memory.
		p = mallocgc(capmem, et, true)  //åˆ†é…å†…å­˜åœ°å€
		if lenmem &amp;gt; 0 &amp;amp;&amp;amp; writeBarrier.enabled {
			// Only shade the pointers in old.array since we know the destination slice p
			// only contains nil pointers because it has been cleared during alloc.
			bulkBarrierPreWriteSrcOnly(uintptr(p), uintptr(old.array), lenmem-et.size+et.ptrdata)
		}
	}
	memmove(p, old.array, lenmem)  //æ•°æ®è¿ç§»

	return slice{p, old.len, newcap}  
}
&lt;/code&gt;&lt;/pre&gt;</description>
        </item>
        <item>
        <title>æˆ‘çš„ç¬¬ä¸€ä»½åšå®¢</title>
        <link>https://zcj-git520.github.io/p/%E6%88%91%E7%9A%84%E7%AC%AC%E4%B8%80%E4%BB%BD%E5%8D%9A%E5%AE%A2/</link>
        <pubDate>Sat, 04 Sep 2021 10:05:40 +0800</pubDate>
        
        <guid>https://zcj-git520.github.io/p/%E6%88%91%E7%9A%84%E7%AC%AC%E4%B8%80%E4%BB%BD%E5%8D%9A%E5%AE%A2/</guid>
        <description>&lt;h3 id=&#34;ä¸ºä»€ä¹ˆå†™åšå®¢&#34;&gt;ä¸ºä»€ä¹ˆå†™åšå®¢&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;æ€»ç»“å¼€å‘ä¸­é‡åˆ°çš„é—®é¢˜ã€‚å·¥ä½œè¿‡åå‘ç°è‡ªå·±å¹¶ä¸æ“…é•¿å¯¹çŸ¥è¯†ç‚¹çš„æ€»ç»“ï¼Œå¯¼è‡´æ€»æ˜¯é‡åˆ°ç›¸åŒçš„é—®é¢˜ï¼Œè¿‡æ®µæ—¶é—´éœ€è¦é‡æ–°æŸ¥æ‰¾è§£å†³æ–¹æ¡ˆ&lt;/li&gt;
&lt;li&gt;è®°å½•å­¦ä¹ çš„çŸ¥è¯†ï¼Œä¸æ–­çš„æ¸©ä¹ ã€‚å­¦çš„ä¸œè¥¿è¿‡äºç¢ç‰‡åŒ–ï¼Œå¯¼è‡´çŸ¥è¯†ä¸æˆä½“ç³»ã€‚æ—¶é—´é•¿äº†ï¼Œç¢ç‰‡çš„çŸ¥è¯†ä¹Ÿå¿˜è®°äº†&lt;/li&gt;
&lt;li&gt;æå‡è‡ªå·±çš„ä¸“ä¸šæŠ€èƒ½ã€‚é€šè¿‡å†™åšå®¢æå‡è‡ªå·±çš„èƒ½åŠ›&lt;/li&gt;
&lt;li&gt;å½¢æˆè‡ªå·±çš„æŠ€æœ¯æ ˆï¼Œé‡åˆ°çš„å¿—åŒé“åˆçš„æœ‹å‹&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;ä¸ºä»€ä¹ˆé€‰æ‹©hugoæ¥æ­å»ºè‡ªå·±çš„åšå®¢&#34;&gt;ä¸ºä»€ä¹ˆé€‰æ‹©hugoæ¥æ­å»ºè‡ªå·±çš„åšå®¢&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Hugoæ˜¯ç”±Goè¯­è¨€å®ç°çš„é™æ€ç½‘ç«™ç”Ÿæˆå™¨ã€‚ç®€å•ã€æ˜“ç”¨ã€é«˜æ•ˆã€æ˜“æ‰©å±•ã€å¿«é€Ÿéƒ¨ç½²ã€‚&lt;/li&gt;
&lt;li&gt;æ“ä½œç®€å•ï¼Œä½¿ç”¨Markdownç›´æ¥ç”Ÿæˆé™æ€ç½‘é¡µ&lt;/li&gt;
&lt;li&gt;å…è´¹ä¸”ä»¥ç»´æŠ¤, åœ¨githubä¸Šå°±å¯ä¾›ä»–äººè®¿é—®ï¼Œæ— éœ€è´­ä¹°æœåŠ¡å™¨ï¼Œç»´æŠ¤ç®€å•&lt;/li&gt;
&lt;li&gt;å‘è¡¨æ–‡ç« ç›´æ¥pushåˆ°è‡ªå·±ä»“åº“å³å¯&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;ä¸‹è½½hogoçš„æºç &#34;&gt;ä¸‹è½½hogoçš„æºç &lt;/h3&gt;
&lt;blockquote&gt;
&lt;p&gt;git clone  &lt;a class=&#34;link&#34; href=&#34;https://github.com/gohugoio/hugo.git&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://github.com/gohugoio/hugo.git&lt;/a&gt;&lt;br&gt;
git branch æŸ¥çœ‹å•å‰ä»£ç çš„åˆ†æ”¯&lt;br&gt;
git branch -a æŸ¥çœ‹å…¨éƒ¨åˆ†æ”¯&lt;br&gt;
git checkout branch åˆ‡æ¢åˆ†æ”¯&lt;br&gt;
git branch åˆ†æ”¯å  åˆ›å»ºè‡ªå·±çš„æœ¬åœ°åˆ†å­&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&#34;ç¼–è¯‘æºç &#34;&gt;ç¼–è¯‘æºç &lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;åœ¨masteråˆ†æ”¯ä¸‹ï¼Œåœ¨main.go çš„ç›®å½•ä¸‹ä½¿ç”¨å‘½ä»¤: go build  åœ¨ç›®å½•ä¸‹ç”Ÿæˆhugo.exe&lt;/li&gt;
&lt;li&gt;åœ¨cmdä¸‹ä½¿ç”¨hugo æŸ¥çœ‹æ˜¯å¦ç¼–è¯‘æˆåŠŸ ç¼–è¯‘æˆåŠŸ ä¼šæ‰“å°hugoçš„ç‰ˆæœ¬&lt;/li&gt;
&lt;li&gt;å®‰è£…æˆåŠŸ&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;ç”Ÿæˆç«™ç‚¹&#34;&gt;ç”Ÿæˆç«™ç‚¹&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;ä½¿ç”¨å‘½ä»¤ï¼šhugo new site /ç›®å½•&lt;/li&gt;
&lt;li&gt;cd /ç›®å½• æŸ¥çœ‹åˆ°&lt;/li&gt;
&lt;li&gt;
&lt;pre&gt;&lt;code&gt;            â–¸ archetypes/  
            â–¸ content/  
            â–¸ layouts/  
            â–¸ static/  
            config.toml
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;li&gt;åˆ›å»ºç«™ç‚¹æˆåŠŸ&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;åˆ›å»ºmdæ–‡ç« &#34;&gt;åˆ›å»ºmdæ–‡ç« &lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;ä½¿ç”¨å‘½ä»¤: hugo  new æ–‡ç« å.md  åœ¨content/ ä¸‹ç”Ÿæˆè¯¥mdæ–‡ä»¶&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;é€‰æ‹©åšå®¢ä¸»é¢˜æ¨¡æ¿&#34;&gt;é€‰æ‹©åšå®¢ä¸»é¢˜æ¨¡æ¿&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;hugo æä¾›å¾ˆå¤šçš„ä¸»é¢˜åšå®¢æ¨¡æ¿ï¼šhttps://themes.gohugo.io/&lt;/li&gt;
&lt;li&gt;åˆ›å»ºthemeæ–‡ä»¶å¤¹ï¼Œå°†ä¸»é¢˜æ¨¡æ¿æ”¾åœ¨é‡Œé¢ ï¼šmkdir themes&lt;/li&gt;
&lt;li&gt;è¿›å…¥è¯¥æ–‡ä»¶å¤¹ï¼šcd themes&lt;/li&gt;
&lt;li&gt;ä¸‹è½½ä¸»é¢˜ï¼Œä½¿ç”¨git clone ä¸»é¢˜æ¨¡æ¿ ï¼šgit clone &lt;a class=&#34;link&#34; href=&#34;https://github.com/spf13/hyde.git&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://github.com/spf13/hyde.git&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;é…ç½®configtomlæ–‡ä»¶&#34;&gt;é…ç½®config.tomlæ–‡ä»¶&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;config.toul æ–‡ä»¶hugo çš„é…ç½®æ–‡ä»¶ï¼Œå¯ä»¥é…ç½®ä¸»é¢˜æ¨¡æ¿ï¼Œä¸ªäººä¿¡æ¯ç­‰(ä¸»é¢˜æ¨¡æ¿ä¸­ç›¸åº”çš„é…ç½®æ–‡ä»¶)å¦‚&lt;/li&gt;
&lt;li&gt;
&lt;pre&gt;&lt;code&gt; baseurl = &amp;quot;http://****.com/&amp;quot;  //å‘å¸ƒçš„ç½‘ç«™
 languageCode = &amp;quot;ja&amp;quot;           //ä½¿ç”¨çš„è¯­è¨€
 title = &amp;quot;xxxx.COM&amp;quot;      //ç½‘ç«™åç§°ç­‰
  [Params]
  subtitle = &amp;quot;I would like to be a layer 3 switch.&amp;quot;
  facebook = &amp;quot;https://facebook.com/foobar&amp;quot;
  twitter = &amp;quot;https://twitter.com/foobar&amp;quot;
  github = &amp;quot;https://github.com/foobar&amp;quot;
  profile = &amp;quot;/images/profile.png&amp;quot;
  copyright = &amp;quot;Written by Asuka Suzuki&amp;quot;
  analytics = &amp;quot;UA-XXXXXXXX-X&amp;quot;
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;è¿è¡Œ&#34;&gt;è¿è¡Œ&lt;/h3&gt;
&lt;h4 id=&#34;æœ¬åœ°è¿è¡Œ&#34;&gt;æœ¬åœ°è¿è¡Œ&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;ä½¿ç”¨å‘½ä»¤ï¼šhugo server &amp;ndash;buildDrafts é…ç½®æ­£ç¡®åˆ™ä¼šå‡ºç°ï¼š http://localhost:1313/ (bind address 127.0.0.1) ç‚¹å‡»åœ¨æµè§ˆå™¨ä¸­è¿è¡Œ&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;æ¨é€åˆ°gitgub&#34;&gt;æ¨é€åˆ°gitgub&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;é¦–å…ˆåœ¨GitHubä¸Šåˆ›å»ºä¸€ä¸ªRepositoryï¼Œå‘½åä¸ºï¼šgithubç”¨æˆ·å.github.io&lt;/li&gt;
&lt;li&gt;ä¿®æ”¹config.toml é…ç½®æ–‡ä»¶ï¼šå°†baseurl = &amp;ldquo;http://githubç”¨æˆ·å.github.io&amp;rdquo;&lt;/li&gt;
&lt;li&gt;ä½¿ç”¨å‘½ä»¤ï¼šhugo  &amp;ndash;buildDrafts åœ¨æœ¬åœ°ç”Ÿæˆpublicçš„æ–‡ä»¶å¤¹&lt;/li&gt;
&lt;li&gt;&amp;ndash;buildDrafts å‚æ•°çš„ä¸»ç”¨æ˜¯å°†ä½ çš„æ–‡ç« åœ¨ä¸»é¢˜ä¸­å‡ºç°&lt;/li&gt;
&lt;li&gt;
&lt;pre&gt;&lt;code&gt;  cd public è¿›å…¥åˆ°publicæ–‡ä»¶å¤¹
  $ git init  åˆå§‹åŒ–æœ¬åœ°ä»“åº“
  $ git remote add origin https://github.com/githubç”¨æˆ·å/githubç”¨æˆ·å.github.io //æ·»åŠ åŸåˆ›ä»“åº“
 æˆ–è€…ç›´æ¥ git clone 
  $ git add -A
  $ git commit -m &amp;quot;first commit&amp;quot;
  $ git push -u origin master  //æ¨åˆ°è¿œç«¯
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;li&gt;ä½¿ç”¨ &amp;ldquo;http://githubç”¨æˆ·å.github.io&amp;quot;å°±å¯è®¿é—®&lt;/li&gt;
&lt;/ul&gt;
</description>
        </item>
        
    </channel>
</rss>
