<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
    <channel>
        <title>Chengji Zhao&#39;s blog</title>
        <link>https://zcj-git520.github.io/</link>
        <description>Recent content on Chengji Zhao&#39;s blog</description>
        <generator>Hugo -- gohugo.io</generator>
        <language>zh-cn</language>
        <lastBuildDate>Mon, 30 Jun 2025 22:00:38 +0800</lastBuildDate><atom:link href="https://zcj-git520.github.io/index.xml" rel="self" type="application/rss+xml" /><item>
        <title>æ·±å…¥æ¢ç´¢ LangGraph</title>
        <link>https://zcj-git520.github.io/p/%E6%B7%B1%E5%85%A5%E6%8E%A2%E7%B4%A2-langgraph/</link>
        <pubDate>Mon, 30 Jun 2025 22:00:38 +0800</pubDate>
        
        <guid>https://zcj-git520.github.io/p/%E6%B7%B1%E5%85%A5%E6%8E%A2%E7%B4%A2-langgraph/</guid>
        <description>&lt;img src="https://zcj-git520.github.io/p/%E6%B7%B1%E5%85%A5%E6%8E%A2%E7%B4%A2-langgraph/1.png" alt="Featured image of post æ·±å…¥æ¢ç´¢ LangGraph" /&gt;&lt;h1 id=&#34;æ·±å…¥æ¢ç´¢-langgraph&#34;&gt;æ·±å…¥æ¢ç´¢ LangGraph&lt;/h1&gt;
&lt;p&gt;åœ¨äººå·¥æ™ºèƒ½å¿«é€Ÿå‘å±•çš„ä»Šå¤©ï¼Œæ„å»ºèƒ½å¤Ÿè‡ªä¸»å†³ç­–ã€çµæ´»è°ƒç”¨å·¥å…·çš„æ™ºèƒ½ä»£ç†æˆä¸ºäº†è®¸å¤šå¼€å‘è€…çš„ç›®æ ‡ã€‚LangGraph ä½œä¸ºä¸€ä¸ªå¼ºå¤§çš„æ¡†æ¶ï¼Œä¸ºæˆ‘ä»¬æä¾›äº†æ„å»ºè¿™ç±»ä»£ç†çš„ç†æƒ³å·¥å…·ã€‚æœ¬æ–‡å°†æ·±å…¥æ¢è®¨ LangGraph çš„æ ¸å¿ƒæ¦‚å¿µã€æ¶æ„è®¾è®¡ä»¥åŠå®é™…åº”ç”¨ï¼Œå¸®åŠ©ä½ å¿«é€ŸæŒæ¡è¿™ä¸€æ¡†æ¶çš„ä½¿ç”¨ã€‚&lt;/p&gt;
&lt;h2 id=&#34;ä»€ä¹ˆæ˜¯-langgraph&#34;&gt;ä»€ä¹ˆæ˜¯ LangGraphï¼Ÿ&lt;/h2&gt;
&lt;p&gt;LangGraph æ˜¯ä¸€ä¸ªåŸºäºå›¾è®ºçš„æ¡†æ¶ï¼Œç”¨äºæ„å»ºå…·æœ‰å¤æ‚å†³ç­–èƒ½åŠ›çš„æ™ºèƒ½ä»£ç†ã€‚å®ƒå…è®¸å¼€å‘è€…å°†ä»£ç†çš„è¡Œä¸ºå»ºæ¨¡ä¸ºä¸€ä¸ªçŠ¶æ€å›¾ï¼Œå…¶ä¸­åŒ…å«èŠ‚ç‚¹ï¼ˆä»£è¡¨è®¡ç®—æ­¥éª¤ï¼‰å’Œè¾¹ï¼ˆä»£è¡¨èŠ‚ç‚¹é—´çš„è¿æ¥ï¼‰ã€‚è¿™ç§ç»“æ„ä½¿å¾—ä»£ç†èƒ½å¤Ÿæ ¹æ®å½“å‰çŠ¶æ€åšå‡ºå†³ç­–ï¼Œé€‰æ‹©åˆé€‚çš„å·¥å…·ï¼Œå¹¶åœ¨å¿…è¦æ—¶è°ƒæ•´å…¶è¡Œä¸ºã€‚&lt;/p&gt;
&lt;p&gt;ä¸ä¼ ç»Ÿçš„çº¿æ€§å·¥ä½œæµä¸åŒï¼ŒLangGraph æä¾›çš„å›¾ç»“æ„èµ‹äºˆäº†ä»£ç†æ›´å¼ºçš„çµæ´»æ€§å’Œè‡ªä¸»æ€§ã€‚ä»£ç†å¯ä»¥æ ¹æ®è¾“å…¥åŠ¨æ€é€‰æ‹©æ‰§è¡Œè·¯å¾„ï¼Œå¤šæ¬¡è°ƒç”¨ä¸åŒå·¥å…·ï¼Œå¹¶åœ¨è·å¾—æ–°ä¿¡æ¯æ—¶è°ƒæ•´å…¶ç­–ç•¥ã€‚&lt;/p&gt;
&lt;h2 id=&#34;langgraph-çš„æ ¸å¿ƒæ¦‚å¿µ&#34;&gt;LangGraph çš„æ ¸å¿ƒæ¦‚å¿µ&lt;/h2&gt;
&lt;h3 id=&#34;çŠ¶æ€state&#34;&gt;çŠ¶æ€ï¼ˆStateï¼‰&lt;/h3&gt;
&lt;p&gt;çŠ¶æ€æ˜¯ LangGraph ä¸­æœ€åŸºç¡€çš„æ¦‚å¿µï¼Œå®ƒè¡¨ç¤ºåº”ç”¨ç¨‹åºåœ¨æŸä¸€æ—¶åˆ»çš„å¿«ç…§ã€‚çŠ¶æ€é€šå¸¸å®šä¹‰ä¸ºä¸€ä¸ª TypedDict æˆ– Pydantic æ¨¡å‹ï¼ŒåŒ…å«ä»£ç†åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­éœ€è¦è·Ÿè¸ªçš„æ‰€æœ‰ä¿¡æ¯ã€‚&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;class State(TypedDict):
    messages: Annotated[list, add_messages]
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªç®€å•çš„çŠ¶æ€ï¼ŒåªåŒ…å«ä¸€ä¸ª messages å­—æ®µï¼Œç”¨äºå­˜å‚¨å¯¹è¯å†å²ã€‚Annotated[list, add_messages] è¡¨ç¤ºè¿™ä¸ªå­—æ®µå°†ä½¿ç”¨ add_messages å½’çº¦å™¨ï¼Œè¿™æ„å‘³ç€æ–°æ¶ˆæ¯ä¼šè¢«æ·»åŠ åˆ°åˆ—è¡¨ä¸­ï¼Œè€Œä¸æ˜¯æ›¿æ¢æ•´ä¸ªåˆ—è¡¨ã€‚&lt;/p&gt;
&lt;h3 id=&#34;èŠ‚ç‚¹nodes&#34;&gt;èŠ‚ç‚¹ï¼ˆNodesï¼‰&lt;/h3&gt;
&lt;p&gt;èŠ‚ç‚¹æ˜¯å›¾ä¸­çš„åŸºæœ¬å•ä½ï¼Œä»£è¡¨ä¸€ä¸ªè®¡ç®—æ­¥éª¤æˆ–çŠ¶æ€è½¬æ¢ã€‚æ¯ä¸ªèŠ‚ç‚¹éƒ½æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œæ¥æ”¶å½“å‰çŠ¶æ€ä½œä¸ºè¾“å…¥ï¼Œæ‰§è¡ŒæŸäº›æ“ä½œï¼Œå¹¶è¿”å›æ›´æ–°åçš„çŠ¶æ€ã€‚&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;def node(state: State):
    messages = state[&amp;quot;messages&amp;quot;]
    response = model.qwen_llm().invoke(messages)
    return {&amp;quot;messages&amp;quot;: [response]}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;è¿™ä¸ªç¤ºä¾‹å±•ç¤ºäº†ä¸€ä¸ªç®€å•çš„èŠ‚ç‚¹ï¼Œå®ƒæ¥æ”¶å½“å‰çŠ¶æ€ä¸­çš„æ¶ˆæ¯ï¼Œè°ƒç”¨è¯­è¨€æ¨¡å‹ç”Ÿæˆå“åº”ï¼Œå¹¶å°†å“åº”æ·»åŠ åˆ°æ¶ˆæ¯åˆ—è¡¨ä¸­ã€‚&lt;/p&gt;
&lt;p&gt;LangGraph æ”¯æŒå¤šç§ç±»å‹çš„èŠ‚ç‚¹ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;è®¡ç®—èŠ‚ç‚¹ï¼šæ‰§è¡Œè®¡ç®—æˆ–è½¬æ¢æ“ä½œ&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;æ¡ä»¶èŠ‚ç‚¹ï¼šæ ¹æ®çŠ¶æ€æ¡ä»¶æ‰§è¡Œä¸åŒè·¯å¾„&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å·¥å…·èŠ‚ç‚¹ï¼šè°ƒç”¨å¤–éƒ¨å·¥å…·ï¼ˆå¦‚ APIã€æ•°æ®åº“ç­‰ï¼‰&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;è¾¹edges&#34;&gt;è¾¹ï¼ˆEdgesï¼‰&lt;/h3&gt;
&lt;p&gt;è¾¹å®šä¹‰äº†å›¾ä¸­èŠ‚ç‚¹ä¹‹é—´çš„è¿æ¥å…³ç³»ï¼Œæ§åˆ¶ç€ç¨‹åºçš„æ‰§è¡Œæµç¨‹ã€‚LangGraph æä¾›äº†å¤šç§ç±»å‹çš„è¾¹ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;æ™®é€šè¾¹&lt;/strong&gt;ï¼šç›´æ¥ä»ä¸€ä¸ªèŠ‚ç‚¹è¿æ¥åˆ°å¦ä¸€ä¸ªèŠ‚ç‚¹&lt;/li&gt;
&lt;/ol&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;graph_builder.add_edge(&amp;quot;node_a&amp;quot;, &amp;quot;node_b&amp;quot;)
&lt;/code&gt;&lt;/pre&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;æ¡ä»¶è¾¹&lt;/strong&gt;ï¼šæ ¹æ®çŠ¶æ€åŠ¨æ€å†³å®šä¸‹ä¸€ä¸ªèŠ‚ç‚¹&lt;/li&gt;
&lt;/ol&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;graph_builder.add_conditional_edges(
    &amp;quot;chatbot&amp;quot;,
    tools_condition,
)
&lt;/code&gt;&lt;/pre&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;å…¥å£ç‚¹&lt;/strong&gt;ï¼šæŒ‡å®šå›¾çš„èµ·å§‹èŠ‚ç‚¹&lt;/li&gt;
&lt;/ol&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;graph_builder.add_edge(START, &amp;quot;chatbot&amp;quot;)
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&#34;å½’çº¦å™¨reducers&#34;&gt;å½’çº¦å™¨ï¼ˆReducersï¼‰&lt;/h3&gt;
&lt;p&gt;å½’çº¦å™¨å†³å®šäº†å¦‚ä½•å°†èŠ‚ç‚¹è¿”å›çš„éƒ¨åˆ†çŠ¶æ€æ›´æ–°åˆå¹¶åˆ°æ•´ä½“çŠ¶æ€ä¸­ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œå½’çº¦å™¨ä¼šè¦†ç›–ç°æœ‰çŠ¶æ€ï¼Œä½†æˆ‘ä»¬å¯ä»¥è‡ªå®šä¹‰å½’çº¦å™¨ä»¥å®ç°æ›´å¤æ‚çš„è¡Œä¸ºã€‚&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;class State(TypedDict):
    foo: int
    bar: Annotated[list[str], add]  # ä½¿ç”¨addå½’çº¦å™¨ï¼Œå°†æ–°å…ƒç´ æ·»åŠ åˆ°åˆ—è¡¨
    baz: Annotated[str, replace]    # ä½¿ç”¨replaceå½’çº¦å™¨ï¼Œæ›¿æ¢ç°æœ‰å€¼
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&#34;æ„å»ºä½ çš„ç¬¬ä¸€ä¸ª-langgraph-åº”ç”¨&#34;&gt;æ„å»ºä½ çš„ç¬¬ä¸€ä¸ª LangGraph åº”ç”¨&lt;/h2&gt;
&lt;p&gt;è®©æˆ‘ä»¬é€šè¿‡ä¸€ä¸ªå®é™…çš„ä¾‹å­æ¥äº†è§£å¦‚ä½•ä½¿ç”¨ LangGraph æ„å»ºä¸€ä¸ªç®€å•çš„æ™ºèƒ½ä»£ç†ã€‚è¿™ä¸ªä»£ç†èƒ½å¤Ÿè¿›è¡Œå¯¹è¯ï¼Œå¹¶åœ¨éœ€è¦æ—¶è°ƒç”¨ç»´åŸºç™¾ç§‘å’Œ IP åœ°å€è§£æå·¥å…·ã€‚&lt;/p&gt;
&lt;h3 id=&#34;æ­¥éª¤-1å¯¼å…¥å¿…è¦çš„åº“&#34;&gt;æ­¥éª¤ 1ï¼šå¯¼å…¥å¿…è¦çš„åº“&lt;/h3&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;from langchain_community.tools import WikipediaQueryRun
from langchain_community.utilities import WikipediaAPIWrapper
from langchain_core.messages import HumanMessage
from langgraph.checkpoint.memory import MemorySaver
from langgraph.constants import START
from langgraph.graph import StateGraph
from langgraph.graph.message import add_messages
from langgraph.prebuilt import ToolNode, tools_condition
from sqlalchemy.sql.annotation import Annotated
from typing_extensions import TypedDict
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&#34;æ­¥éª¤-2å®šä¹‰çŠ¶æ€&#34;&gt;æ­¥éª¤ 2ï¼šå®šä¹‰çŠ¶æ€&lt;/h3&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;class State(TypedDict):
    messages: Annotated[list, add_messages]
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&#34;æ­¥éª¤-3å®šä¹‰èŠ‚ç‚¹&#34;&gt;æ­¥éª¤ 3ï¼šå®šä¹‰èŠ‚ç‚¹&lt;/h3&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;def node(state: State):
    messages = state[&amp;quot;messages&amp;quot;]
    response = model.qwen_llm().invoke(messages)
    return {&amp;quot;messages&amp;quot;: [response]}
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&#34;æ­¥éª¤-4å®šä¹‰å·¥å…·&#34;&gt;æ­¥éª¤ 4ï¼šå®šä¹‰å·¥å…·&lt;/h3&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;def tools():
    api_wrapper = WikipediaAPIWrapper(top_k_results=1, doc_content_chars_max=100)
    tool = WikipediaQueryRun(api_wrapper=api_wrapper)
    return [tool, ip_to_city_tool]
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&#34;æ­¥éª¤-5æ„å»ºå›¾&#34;&gt;æ­¥éª¤ 5ï¼šæ„å»ºå›¾&lt;/h3&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;def buildGraph():
    graph_builder = StateGraph(State)
    memory = MemorySaver()
    
    graph_builder.add_node(&amp;quot;chatbot&amp;quot;, node)
    tool_node = ToolNode(tools=tools())
    graph_builder.add_conditional_edges(
        &amp;quot;chatbot&amp;quot;,
        tools_condition,
    )
    graph_builder.add_node(&amp;quot;tools&amp;quot;, tool_node)
    graph_builder.add_edge(START, &amp;quot;chatbot&amp;quot;)

    graph = graph_builder.compile(checkpointer=memory)
    try:
        graph.get_graph().draw_mermaid_png(output_file_path=&amp;quot;graph.png&amp;quot;, max_retries=5, retry_delay=2.0)
    except Exception as e:
        print(f&amp;quot;æ¸²æŸ“å›¾è¡¨å¤±è´¥: {e}&amp;quot;)
    return graph
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&#34;æ­¥éª¤-6è¿è¡Œå¯¹è¯&#34;&gt;æ­¥éª¤ 6ï¼šè¿è¡Œå¯¹è¯&lt;/h3&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;def chat(graph, msg):
    message = {&amp;quot;messages&amp;quot;: [HumanMessage(content=msg)]}
    for event in graph.stream(message):
        for value in event.values():
            print(&amp;quot;Assistant:&amp;quot;, value[&amp;quot;messages&amp;quot;][-1].content)
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&#34;ä»£ç†æ¶æ„è¶…è¶Šç®€å•è·¯ç”±&#34;&gt;ä»£ç†æ¶æ„ï¼šè¶…è¶Šç®€å•è·¯ç”±&lt;/h2&gt;
&lt;p&gt;LangGraph å…è®¸æˆ‘ä»¬æ„å»ºçœŸæ­£çš„æ™ºèƒ½ä»£ç†ï¼Œè¿™äº›ä»£ç†èƒ½å¤Ÿï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;åœ¨å¤šæ¡æ½œåœ¨è·¯å¾„ä¹‹é—´è¿›è¡Œè·¯ç”±&lt;/strong&gt;ï¼šæ ¹æ®è¾“å…¥å’Œå½“å‰çŠ¶æ€é€‰æ‹©æœ€ä½³æ‰§è¡Œè·¯å¾„&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å†³å®šè°ƒç”¨ä¼—å¤šå·¥å…·ä¸­çš„å“ªä¸€ä¸ª&lt;/strong&gt;ï¼šæ ¹æ®ä»»åŠ¡éœ€æ±‚é€‰æ‹©åˆé€‚çš„å·¥å…·&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;åˆ¤æ–­ç”Ÿæˆçš„ç­”æ¡ˆæ˜¯å¦è¶³å¤Ÿ&lt;/strong&gt;ï¼šå†³å®šæ˜¯ç›´æ¥å›ç­”è¿˜æ˜¯éœ€è¦è¿›ä¸€æ­¥çš„ä¿¡æ¯æ”¶é›†&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;è¿™ç§æ¶æ„è¶…è¶Šäº†ç®€å•çš„è·¯ç”±æœºåˆ¶ï¼Œå®ç°äº†çœŸæ­£çš„è‡ªä¸»å†³ç­–èƒ½åŠ›ã€‚&lt;/p&gt;
&lt;h3 id=&#34;react-æ¶æ„&#34;&gt;ReAct æ¶æ„&lt;/h3&gt;
&lt;p&gt;ReAct æ˜¯ä¸€ç§æµè¡Œçš„ä»£ç†æ¶æ„ï¼Œå®ƒç»“åˆäº†ä¸‰ä¸ªæ ¸å¿ƒæ¦‚å¿µï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å·¥å…·è°ƒç”¨&lt;/strong&gt;ï¼šå…è®¸ LLM æ ¹æ®éœ€è¦é€‰æ‹©å’Œä½¿ç”¨å„ç§å·¥å…·&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;è®°å¿†&lt;/strong&gt;ï¼šä½¿ä»£ç†èƒ½å¤Ÿä¿ç•™å’Œä½¿ç”¨æ¥è‡ªå…ˆå‰æ­¥éª¤çš„ä¿¡æ¯&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;è§„åˆ’&lt;/strong&gt;ï¼šä½¿ LLM èƒ½å¤Ÿåˆ›å»ºå¹¶éµå¾ªå¤šæ­¥è®¡åˆ’ä»¥å®ç°ç›®æ ‡&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;LangGraph å®Œç¾æ”¯æŒ ReAct æ¶æ„ï¼Œé€šè¿‡çŠ¶æ€ç®¡ç†å®ç°è®°å¿†ï¼Œé€šè¿‡æ¡ä»¶è¾¹å®ç°å·¥å…·é€‰æ‹©å’Œè§„åˆ’ã€‚&lt;/p&gt;
&lt;h2 id=&#34;é«˜çº§ç‰¹æ€§&#34;&gt;é«˜çº§ç‰¹æ€§&lt;/h2&gt;
&lt;h3 id=&#34;å¹¶è¡Œæ‰§è¡Œ&#34;&gt;å¹¶è¡Œæ‰§è¡Œ&lt;/h3&gt;
&lt;p&gt;LangGraph æ”¯æŒèŠ‚ç‚¹çš„å¹¶è¡Œæ‰§è¡Œï¼Œè¿™å¯ä»¥æ˜¾è‘—æé«˜å¤æ‚å·¥ä½œæµçš„æ•ˆç‡ã€‚é€šè¿‡ä»ä¸€ä¸ªèŠ‚ç‚¹æ‰‡å‡ºåˆ°å¤šä¸ªèŠ‚ç‚¹ï¼Œç„¶åå†æ‰‡å…¥åˆ°ä¸€ä¸ªèŠ‚ç‚¹ï¼Œæˆ‘ä»¬å¯ä»¥åŒæ—¶æ‰§è¡Œå¤šä¸ªä»»åŠ¡ã€‚&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;# æ‰‡å‡ºåˆ°èŠ‚ç‚¹Bå’ŒCï¼Œç„¶åæ‰‡å…¥åˆ°èŠ‚ç‚¹D
graph_builder.add_edge(&amp;quot;A&amp;quot;, &amp;quot;B&amp;quot;)
graph_builder.add_edge(&amp;quot;A&amp;quot;, &amp;quot;C&amp;quot;)
graph_builder.add_edge(&amp;quot;B&amp;quot;, &amp;quot;D&amp;quot;)
graph_builder.add_edge(&amp;quot;C&amp;quot;, &amp;quot;D&amp;quot;)
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&#34;èŠ‚ç‚¹ç¼“å­˜&#34;&gt;èŠ‚ç‚¹ç¼“å­˜&lt;/h3&gt;
&lt;p&gt;å¯¹äºè®¡ç®—å¯†é›†å‹èŠ‚ç‚¹ï¼ŒLangGraph æä¾›äº†ç¼“å­˜åŠŸèƒ½ï¼Œå¯ä»¥é¿å…é‡å¤è®¡ç®—ï¼š&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;from langgraph.pregel import CachePolicy

builder.add_node(&amp;quot;expensive_node&amp;quot;, expensive_node, cache_policy=CachePolicy(ttl=300))  # ç¼“å­˜5åˆ†é’Ÿ
graph = builder.compile(cache=InMemoryCache())
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&#34;é€’å½’é™åˆ¶&#34;&gt;é€’å½’é™åˆ¶&lt;/h3&gt;
&lt;p&gt;ä¸ºäº†é˜²æ­¢æ— é™å¾ªç¯ï¼ŒLangGraph æä¾›äº†é€’å½’é™åˆ¶åŠŸèƒ½ï¼Œå¯ä»¥è®¾ç½®å›¾åœ¨å•æ¬¡æ‰§è¡ŒæœŸé—´å¯ä»¥æ‰§è¡Œçš„æœ€å¤§æ­¥éª¤æ•°ï¼š&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;graph.invoke(inputs, config={&amp;quot;recursion_limit&amp;quot;: 10})  # é™åˆ¶ä¸º10æ­¥
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&#34;è¿è¡Œæ—¶é…ç½®&#34;&gt;è¿è¡Œæ—¶é…ç½®&lt;/h3&gt;
&lt;p&gt;LangGraph å…è®¸åœ¨è¿è¡Œæ—¶é…ç½®å›¾çš„è¡Œä¸ºï¼Œä¾‹å¦‚æŒ‡å®šä½¿ç”¨å“ªä¸ªè¯­è¨€æ¨¡å‹ï¼š&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;class ConfigSchema(TypedDict):
    llm: str

graph = StateGraph(State, config_schema=ConfigSchema)

# è°ƒç”¨æ—¶æŒ‡å®šé…ç½®
graph.invoke(inputs, config={&amp;quot;configurable&amp;quot;: {&amp;quot;llm&amp;quot;: &amp;quot;gpt-4&amp;quot;}})
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&#34;æ€»ç»“&#34;&gt;æ€»ç»“&lt;/h2&gt;
&lt;p&gt;LangGraph ä¸ºæ„å»ºå¤æ‚çš„æ™ºèƒ½ä»£ç†æä¾›äº†å¼ºå¤§è€Œçµæ´»çš„æ¡†æ¶ã€‚é€šè¿‡å°†ä»£ç†è¡Œä¸ºå»ºæ¨¡ä¸ºçŠ¶æ€å›¾ï¼Œæˆ‘ä»¬å¯ä»¥åˆ›å»ºèƒ½å¤Ÿè‡ªä¸»å†³ç­–ã€çµæ´»è°ƒç”¨å·¥å…·çš„æ™ºèƒ½ç³»ç»Ÿã€‚æ— è®ºæ˜¯ç®€å•çš„å¯¹è¯ä»£ç†è¿˜æ˜¯å¤æ‚çš„å¤šæ­¥éª¤å·¥ä½œæµï¼ŒLangGraph éƒ½èƒ½æä¾›æ¸…æ™°çš„ç»“æ„å’Œå¼ºå¤§çš„åŠŸèƒ½æ”¯æŒã€‚&lt;/p&gt;
&lt;p&gt;é€šè¿‡æœ¬æ–‡çš„ä»‹ç»ï¼Œä½ åº”è¯¥å¯¹ LangGraph çš„æ ¸å¿ƒæ¦‚å¿µå’Œä½¿ç”¨æ–¹æ³•æœ‰äº†åŸºæœ¬çš„äº†è§£ã€‚æ¥ä¸‹æ¥ï¼Œä¸å¦¨å°è¯•ä½¿ç”¨ LangGraph æ„å»ºä¸€ä¸ªå±äºä½ è‡ªå·±çš„æ™ºèƒ½ä»£ç†ï¼Œæ¢ç´¢æ›´å¤šé«˜çº§ç‰¹æ€§å’Œåº”ç”¨åœºæ™¯ã€‚&lt;/p&gt;
&lt;h2 id=&#34;ä»£ç ä»“åº“è·¯å¾„&#34;&gt;ä»£ç ä»“åº“è·¯å¾„&lt;/h2&gt;
&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;https://github.com/zcj-git520/AiLargeModel&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;zcj-git520/AiLargeModel: å¤§æ¨¡å‹åº”ç”¨å¼€å‘å­¦ä¹ &lt;/a&gt;&lt;/p&gt;
</description>
        </item>
        <item>
        <title>LangGraphé¢„æ„å»ºAgent</title>
        <link>https://zcj-git520.github.io/p/langgraph%E9%A2%84%E6%9E%84%E5%BB%BAagent/</link>
        <pubDate>Wed, 25 Jun 2025 22:00:38 +0800</pubDate>
        
        <guid>https://zcj-git520.github.io/p/langgraph%E9%A2%84%E6%9E%84%E5%BB%BAagent/</guid>
        <description>&lt;img src="https://zcj-git520.github.io/p/langgraph%E9%A2%84%E6%9E%84%E5%BB%BAagent/1.png" alt="Featured image of post LangGraphé¢„æ„å»ºAgent" /&gt;&lt;h1 id=&#34;langgraph-é¢„æ„å»º-agent&#34;&gt;LangGraph é¢„æ„å»º Agent&lt;/h1&gt;
&lt;p&gt;æ™ºèƒ½ä»£ç†ï¼ˆAgentï¼‰ç³»ç»Ÿå·²æˆä¸ºè¿æ¥ç”¨æˆ·ä¸å¤æ‚åŠŸèƒ½çš„é‡è¦æ¡¥æ¢ã€‚LangGraph ä½œä¸ºä¸€ä¸ªå¼ºå¤§çš„æ¡†æ¶ï¼Œä¸ºå¼€å‘è€…æä¾›äº†æ„å»ºå¥å£®ã€å¯æŠ•å…¥ç”Ÿäº§çš„ä»£ç†ç³»ç»Ÿçš„ä¸°å¯Œå·¥å…·ã€‚&lt;/p&gt;
&lt;h2 id=&#34;ä¸€agent-æ ¸å¿ƒç»„ä»¶è§£æ&#34;&gt;ä¸€ã€Agent æ ¸å¿ƒç»„ä»¶è§£æ&lt;/h2&gt;
&lt;p&gt;LangGraph é¢„æ„å»ºçš„ Agent ç”±ä¸‰ä¸ªæ ¸å¿ƒéƒ¨åˆ†æ„æˆï¼Œå®ƒä»¬ååŒå·¥ä½œï¼Œä½¿ Agent èƒ½å¤Ÿç†è§£ç”¨æˆ·éœ€æ±‚ã€æ‰§è¡Œä»»åŠ¡å¹¶è¿”å›ç»“æœï¼š&lt;/p&gt;
&lt;p&gt;1.&lt;strong&gt;å¤§å‹è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;è¿™æ˜¯ Agent çš„ &amp;ldquo;å¤§è„‘&amp;rdquo;ï¼Œè´Ÿè´£ç†è§£æ–‡æœ¬ã€ç”Ÿæˆå“åº”å¹¶å†³å®šä¸‹ä¸€æ­¥è¡ŒåŠ¨ã€‚LLM åœ¨ä¸€ä¸ªå¾ªç¯ä¸­è¿è¡Œï¼šæ¯æ¬¡è¿­ä»£ä¸­é€‰æ‹©å·¥å…·ã€æä¾›è¾“å…¥ã€æ¥æ”¶ç»“æœï¼ˆè§‚å¯Ÿï¼‰ï¼Œå¹¶æ ¹æ®è§‚å¯ŸæŒ‡å¯¼ä¸‹ä¸€ä¸ªåŠ¨ä½œï¼Œç›´åˆ°æ”¶é›†åˆ°è¶³å¤Ÿä¿¡æ¯å“åº”ç”¨æˆ·ã€‚&lt;/p&gt;
&lt;p&gt;2.&lt;strong&gt;å·¥å…·ï¼ˆToolsï¼‰&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;å·¥å…·æ˜¯ Agent å¯ä»¥è°ƒç”¨çš„å‡½æ•°æˆ– APIï¼Œç”¨äºæ‰§è¡Œç‰¹å®šä»»åŠ¡ã€‚ä¾‹å¦‚ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;ç½‘ç»œæœç´¢å·¥å…·&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;æ•°æ®åº“æŸ¥è¯¢å·¥å…·&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ç¬¬ä¸‰æ–¹æœåŠ¡è°ƒç”¨å·¥å…·ï¼ˆå¦‚å¤©æ°”æŸ¥è¯¢ã€IP è§£æç­‰ï¼‰&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å·¥å…·ä½¿ Agent èƒ½å¤Ÿçªç ´è‡ªèº«çŸ¥è¯†å±€é™ï¼Œè·å–å®æ—¶ä¿¡æ¯æˆ–æ‰§è¡Œå¤æ‚æ“ä½œã€‚&lt;/p&gt;
&lt;p&gt;3.&lt;strong&gt;æç¤ºï¼ˆPromptï¼‰&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;æç¤ºæ˜¯æŒ‡å¯¼ LLM è¡Œä¸ºçš„æ–‡æœ¬æŒ‡ä»¤ã€‚å®ƒå®šä¹‰äº† Agent çš„è§’è‰²ã€ç›®æ ‡å’Œè¡Œä¸ºå‡†åˆ™ã€‚ä¾‹å¦‚ï¼š&amp;ldquo;ä½ æ˜¯ä¸€ä¸ªæ™ºèƒ½å°åŠ©æ‰‹ï¼Œèƒ½å¤Ÿä½¿ç”¨å·¥å…·å¸®åŠ©ç”¨æˆ·æŸ¥è¯¢å¤©æ°”å’ŒåŸå¸‚ä¿¡æ¯&amp;rdquo;ã€‚&lt;/p&gt;
&lt;h2 id=&#34;äºŒlanggraph-çš„æ ¸å¿ƒä¼˜åŠ¿&#34;&gt;äºŒã€LangGraph çš„æ ¸å¿ƒä¼˜åŠ¿&lt;/h2&gt;
&lt;p&gt;LangGraph ä¸ºæ„å»º Agent ç³»ç»Ÿæä¾›äº†å¤šé¡¹å…³é”®åŠŸèƒ½ï¼Œä½¿å…¶åœ¨å®é™…ç”Ÿäº§ç¯å¢ƒä¸­è¡¨ç°å‡ºè‰²ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å†…å­˜é›†æˆ&lt;/strong&gt;ï¼šåŒæ—¶æ”¯æŒçŸ­æœŸï¼ˆä¼šè¯å†…ï¼‰å’Œé•¿æœŸï¼ˆè·¨ä¼šè¯ï¼‰å†…å­˜ï¼Œå®ç°æœ‰çŠ¶æ€è¡Œä¸ºï¼Œè®© Agent èƒ½å¤Ÿè®°ä½å†å²å¯¹è¯å’Œç”¨æˆ·åå¥½ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;äººåœ¨å›è·¯æ§åˆ¶&lt;/strong&gt;ï¼šå…è®¸æ‰§è¡Œè¿‡ç¨‹åœ¨ä»»ä½•ç‚¹æš‚åœï¼Œç­‰å¾…äººå·¥åé¦ˆæˆ–å®¡æ‰¹ï¼Œæ”¯æŒå¼‚æ­¥å¹²é¢„ï¼Œè¿™å¯¹äºéœ€è¦äººå·¥ç¡®è®¤çš„æ•æ„Ÿæ“ä½œè‡³å…³é‡è¦ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æµå¼ä¼ è¾“æ”¯æŒ&lt;/strong&gt;ï¼šèƒ½å¤Ÿå®æ—¶æµå¼ä¼ è¾“ Agent çŠ¶æ€ã€æ¨¡å‹è¾“å‡ºå’Œå·¥å…·ç»“æœï¼Œæå‡ç”¨æˆ·ä½“éªŒã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;éƒ¨ç½²å·¥å…·&lt;/strong&gt;ï¼šæä¾›å®Œæ•´çš„æµ‹è¯•ã€è°ƒè¯•å’Œéƒ¨ç½²å·¥å…·é“¾ï¼Œç®€åŒ–ä»å¼€å‘åˆ°ç”Ÿäº§çš„æµç¨‹ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;ä¸‰åˆ›å»ºå’Œé…ç½®-agent&#34;&gt;ä¸‰ã€åˆ›å»ºå’Œé…ç½® Agent&lt;/h2&gt;
&lt;p&gt;ä½¿ç”¨ LangGraph åˆ›å»ºé¢„æ„å»º Agent éå¸¸ç®€å•ï¼Œä»¥ä¸‹æ˜¯åŸºæœ¬æ­¥éª¤ï¼š&lt;/p&gt;
&lt;h3 id=&#34;1-å®šä¹‰å·¥å…·&#34;&gt;1. å®šä¹‰å·¥å…·&lt;/h3&gt;
&lt;p&gt;é¦–å…ˆï¼Œéœ€è¦å®šä¹‰ Agent å¯ä»¥ä½¿ç”¨çš„å·¥å…·ã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥åˆ›å»º IP è§£æã€å¤©æ°”æŸ¥è¯¢å’ŒåŸå¸‚æœç´¢å·¥å…·ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span class=&#34;n&#34;&gt;tools&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;ip_to_city_tool&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;  &lt;span class=&#34;c1&#34;&gt;# è§£æIPè·å–åŸå¸‚&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;search_weather_tool&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;  &lt;span class=&#34;c1&#34;&gt;# æŸ¥è¯¢å¤©æ°”&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;search_city_tool&lt;/span&gt;  &lt;span class=&#34;c1&#34;&gt;# æœç´¢åŸå¸‚ä¿¡æ¯&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;2-åˆ›å»ºæç¤º&#34;&gt;2. åˆ›å»ºæç¤º&lt;/h3&gt;
&lt;p&gt;å®šä¹‰æŒ‡å¯¼ Agent è¡Œä¸ºçš„æç¤ºï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span class=&#34;kn&#34;&gt;from&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;langchain_core.prompts&lt;/span&gt; &lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;PromptTemplate&lt;/span&gt;

&lt;span class=&#34;n&#34;&gt;prompt&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;PromptTemplate&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;input_variables&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[],&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;template&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;ä½ æ˜¯ä¸€ä¸ªæ™ºèƒ½å°åŠ©æ‰‹ï¼Œèƒ½å¤Ÿå¸®åŠ©ç”¨æˆ·æŸ¥è¯¢IPå¯¹åº”çš„åŸå¸‚ä»¥åŠåŸå¸‚çš„å¤©æ°”ä¿¡æ¯&amp;#34;&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;3-åˆå§‹åŒ–-agent&#34;&gt;3. åˆå§‹åŒ– Agent&lt;/h3&gt;
&lt;p&gt;ä½¿ç”¨ create_react_agent å‡½æ•°åˆ›å»º Agentï¼š&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;from langgraph.prebuilt import create_react_agent

agent = create_react_agent(
    model=model.qwen_llm(),  # é…ç½®çš„è¯­è¨€æ¨¡å‹
    tools=tools,  # ä¸Šé¢å®šä¹‰çš„å·¥å…·é›†
    prompt=prompt,  # æç¤ºæ¨¡æ¿
    parallel_tool_calls=False  # ç¦ç”¨å¹¶è¡Œå·¥å…·è°ƒç”¨
)
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&#34;å››è¿è¡Œ-agent-çš„ä¸¤ç§æ¨¡å¼&#34;&gt;å››ã€è¿è¡Œ Agent çš„ä¸¤ç§æ¨¡å¼&lt;/h2&gt;
&lt;p&gt;LangGraph Agent æ”¯æŒåŒæ­¥å’Œå¼‚æ­¥ä¸¤ç§è¿è¡Œæ¨¡å¼ï¼Œä»¥é€‚åº”ä¸åŒçš„åº”ç”¨åœºæ™¯ï¼š&lt;/p&gt;
&lt;h3 id=&#34;1-åŒæ­¥æ¨¡å¼&#34;&gt;1. åŒæ­¥æ¨¡å¼&lt;/h3&gt;
&lt;p&gt;ä½¿ç”¨ .invoke() æˆ– .stream() æ–¹æ³•ï¼š&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;# åŒæ­¥è°ƒç”¨
result = agent.invoke({
    &amp;quot;messages&amp;quot;: [HumanMessage(content=&amp;quot;ä½ å¥½ï¼Œè¯·é—®æ­å·çš„å¤©æ°”å¦‚ä½•ï¼Ÿ&amp;quot;)]
})
print(result)
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&#34;2-å¼‚æ­¥æ¨¡å¼&#34;&gt;2. å¼‚æ­¥æ¨¡å¼&lt;/h3&gt;
&lt;p&gt;ä½¿ç”¨ await .ainvoke() æˆ– async for ä¸ .astream()ï¼š&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;# å¼‚æ­¥è°ƒç”¨
async for event in agent.astream({
    &amp;quot;messages&amp;quot;: [HumanMessage(content=&amp;quot;ä½ å¥½ï¼Œè¯·é—®æ­å·çš„å¤©æ°”å¦‚ä½•ï¼Ÿ&amp;quot;)]
}):
    print(event)
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&#34;äº”è¾“å…¥ä¸è¾“å‡ºæ ¼å¼&#34;&gt;äº”ã€è¾“å…¥ä¸è¾“å‡ºæ ¼å¼&lt;/h2&gt;
&lt;h3 id=&#34;è¾“å…¥æ ¼å¼&#34;&gt;è¾“å…¥æ ¼å¼&lt;/h3&gt;
&lt;p&gt;LangGraph Agent æ”¯æŒå¤šç§è¾“å…¥æ ¼å¼ï¼Œæä¾›çµæ´»æ€§ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;å­—ç¬¦ä¸²ï¼š{&amp;ldquo;messages&amp;rdquo;: &amp;ldquo;Hello&amp;rdquo;}ï¼ˆè§£é‡Šä¸ºç”¨æˆ·æ¶ˆæ¯ï¼‰&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;æ¶ˆæ¯å­—å…¸ï¼š{&amp;ldquo;messages&amp;rdquo;: {&amp;ldquo;role&amp;rdquo;: &amp;ldquo;user&amp;rdquo;, &amp;ldquo;content&amp;rdquo;: &amp;ldquo;Hello&amp;rdquo;}}&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;æ¶ˆæ¯åˆ—è¡¨ï¼š{&amp;ldquo;messages&amp;rdquo;: [{&amp;ldquo;role&amp;rdquo;: &amp;ldquo;user&amp;rdquo;, &amp;ldquo;content&amp;rdquo;: &amp;ldquo;Hello&amp;rdquo;}]}&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å¸¦è‡ªå®šä¹‰çŠ¶æ€ï¼š{&amp;ldquo;messages&amp;rdquo;: [&amp;hellip;], &amp;ldquo;user_name&amp;rdquo;: &amp;ldquo;Alice&amp;rdquo;}ï¼ˆé€‚ç”¨äºè‡ªå®šä¹‰çŠ¶æ€ï¼‰&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;è¾“å‡ºæ ¼å¼&#34;&gt;è¾“å‡ºæ ¼å¼&lt;/h3&gt;
&lt;p&gt;Agent çš„è¾“å‡ºæ˜¯ä¸€ä¸ªåŒ…å«ä»¥ä¸‹é”®çš„å­—å…¸ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;messagesï¼šæ‰§è¡ŒæœŸé—´çš„æ‰€æœ‰æ¶ˆæ¯ï¼ˆç”¨æˆ·è¾“å…¥ã€åŠ©æ‰‹å›å¤ã€å·¥å…·è°ƒç”¨ï¼‰&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;structured_responseï¼ˆå¯é€‰ï¼‰ï¼šå¦‚æœé…ç½®äº†ç»“æ„åŒ–è¾“å‡º&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;è‡ªå®šä¹‰å­—æ®µï¼ˆå¯é€‰ï¼‰ï¼šåŸºäºè‡ªå®šä¹‰çŠ¶æ€ schema å®šä¹‰çš„é¢å¤–é”®&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;å…­æ§åˆ¶-agent-æ‰§è¡Œæµç¨‹&#34;&gt;å…­ã€æ§åˆ¶ Agent æ‰§è¡Œæµç¨‹&lt;/h2&gt;
&lt;p&gt;ä¸ºé¿å…æ— é™å¾ªç¯æˆ–å¤±æ§æ‰§è¡Œï¼ŒLangGraph æä¾›äº†å¤šç§æ§åˆ¶æœºåˆ¶ï¼š&lt;/p&gt;
&lt;h3 id=&#34;1-è®¾ç½®æœ€å¤§è¿­ä»£æ¬¡æ•°&#34;&gt;1. è®¾ç½®æœ€å¤§è¿­ä»£æ¬¡æ•°&lt;/h3&gt;
&lt;p&gt;é€šè¿‡é…ç½®é€’å½’é™åˆ¶ï¼Œå®šä¹‰ Agent å¯æ‰§è¡Œçš„æœ€å¤§æ­¥éª¤æ•°ï¼š&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;# è¿è¡Œæ—¶é…ç½®
max_iterations = 3
recursion_limit = 2 * max_iterations + 1

result = agent.invoke(
    {&amp;quot;messages&amp;quot;: [HumanMessage(content=&amp;quot;Hello&amp;quot;)]},
    {&amp;quot;recursion_limit&amp;quot;: recursion_limit}
)
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;æˆ–åœ¨åˆ›å»ºæ—¶é…ç½®ï¼š&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;agent = create_react_agent(
    llm=model.qwen_llm(), 
    tools=tools, 
    prompt=prompt
).with_config(recursion_limit=recursion_limit)
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&#34;2-å·¥å…·è°ƒç”¨æ§åˆ¶&#34;&gt;2. å·¥å…·è°ƒç”¨æ§åˆ¶&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ç¦ç”¨å¹¶è¡Œå·¥å…·è°ƒç”¨&lt;/strong&gt;ï¼šparallel_tool_calls=False&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ç›´æ¥è¿”å›å·¥å…·ç»“æœ&lt;/strong&gt;ï¼šåœ¨å·¥å…·å®šä¹‰ä¸­ä½¿ç”¨ return_direct=Trueï¼Œä½¿ Agent åœ¨å·¥å…·æ‰§è¡Œåç«‹å³åœæ­¢&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å¼ºåˆ¶ä½¿ç”¨å·¥å…·&lt;/strong&gt;ï¼šforce_tool=Trueï¼Œç¡®ä¿ Agent å¿…é¡»è°ƒç”¨å·¥å…·æ‰èƒ½å“åº”ï¼ˆéœ€é…åˆé˜²æŠ¤æªæ–½é¿å…æ— é™å¾ªç¯ï¼‰&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;ä¸ƒæµå¼ä¼ è¾“åŠŸèƒ½&#34;&gt;ä¸ƒã€æµå¼ä¼ è¾“åŠŸèƒ½&lt;/h2&gt;
&lt;p&gt;æµå¼ä¼ è¾“æ˜¯æ„å»ºå“åº”å¼åº”ç”¨çš„å…³é”®ï¼ŒLangGraph æ”¯æŒå¤šç§æµå¼ä¼ è¾“ç±»å‹ï¼š&lt;/p&gt;
&lt;h3 id=&#34;1-agent-è¿›åº¦æµ&#34;&gt;1. Agent è¿›åº¦æµ&lt;/h3&gt;
&lt;p&gt;è·å–æ¯ä¸ªèŠ‚ç‚¹æ‰§è¡Œåçš„æ›´æ–°ï¼š&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;for event in agent.stream(
    {&amp;quot;messages&amp;quot;: [HumanMessage(content=&amp;quot;ä½ å¥½&amp;quot;)]}, 
    stream_mode=&amp;quot;updates&amp;quot;
):
    print(event)
    print(&amp;quot;=&amp;quot;*20)
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&#34;2-llm-ä»¤ç‰Œæµ&#34;&gt;2. LLM ä»¤ç‰Œæµ&lt;/h3&gt;
&lt;p&gt;å®æ—¶è·å–è¯­è¨€æ¨¡å‹ç”Ÿæˆçš„ä»¤ç‰Œï¼š&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;for token, metadata in agent.stream(
    {&amp;quot;messages&amp;quot;: [HumanMessage(content=&amp;quot;è·å–è¿™ä¸ªipï¼š115.239.210.27çš„åŸå¸‚ä¿¡æ¯&amp;quot;)]}, 
    stream_mode=&amp;quot;messages&amp;quot;
):
    print(&amp;quot;Token&amp;quot;, token)
    print(&amp;quot;Metadata&amp;quot;, metadata)
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&#34;å…«ä¸Šä¸‹æ–‡ç®¡ç†&#34;&gt;å…«ã€ä¸Šä¸‹æ–‡ç®¡ç†&lt;/h2&gt;
&lt;p&gt;Agent é€šå¸¸éœ€è¦é™¤æ¶ˆæ¯ä¹‹å¤–çš„æ›´å¤šä¿¡æ¯æ‰èƒ½æœ‰æ•ˆå·¥ä½œï¼ŒLangGraph æä¾›äº†ä¸‰ç§ä¸Šä¸‹æ–‡ç®¡ç†æ–¹å¼ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç±»å‹&lt;/th&gt;
&lt;th&gt;æè¿°&lt;/th&gt;
&lt;th&gt;å¯å˜æ€§&lt;/th&gt;
&lt;th&gt;ç”Ÿå‘½å‘¨æœŸ&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;é…ç½®&lt;/td&gt;
&lt;td&gt;è¿è¡Œå¼€å§‹æ—¶ä¼ å…¥çš„é™æ€æ•°æ®&lt;/td&gt;
&lt;td&gt;âŒ&lt;/td&gt;
&lt;td&gt;æ¯æ¬¡è¿è¡Œ&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;çŠ¶æ€&lt;/td&gt;
&lt;td&gt;æ‰§è¡Œä¸­å¯æ›´æ”¹çš„åŠ¨æ€æ•°æ®&lt;/td&gt;
&lt;td&gt;âœ…&lt;/td&gt;
&lt;td&gt;æ¯æ¬¡è¿è¡Œæˆ–å¯¹è¯&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;é•¿æœŸè®°å¿†&lt;/td&gt;
&lt;td&gt;è·¨å¯¹è¯å…±äº«çš„æ•°æ®&lt;/td&gt;
&lt;td&gt;âœ…&lt;/td&gt;
&lt;td&gt;è·¨å¯¹è¯&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id=&#34;1-é…ç½®é™æ€ä¸Šä¸‹æ–‡&#34;&gt;1. é…ç½®ï¼ˆé™æ€ä¸Šä¸‹æ–‡ï¼‰&lt;/h3&gt;
&lt;p&gt;åœ¨è¿è¡Œæ—¶ä¼ å…¥ä¸å¯å˜æ•°æ®ï¼š&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;data = agent.invoke(
    {&amp;quot;messages&amp;quot;:  [HumanMessage(content=&amp;quot;è·å–è¿™ä¸ªåŸå¸‚ä¿¡æ¯&amp;quot;)]},
    config={&amp;quot;configurable&amp;quot;: {&amp;quot;ip&amp;quot;: &amp;quot;115.239.210.27&amp;quot;}}
)
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&#34;2-çŠ¶æ€åŠ¨æ€ä¸Šä¸‹æ–‡&#34;&gt;2. çŠ¶æ€ï¼ˆåŠ¨æ€ä¸Šä¸‹æ–‡ï¼‰&lt;/h3&gt;
&lt;p&gt;å®šä¹‰è‡ªå®šä¹‰çŠ¶æ€è·Ÿè¸ªé¢å¤–ä¿¡æ¯ï¼š&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;class CustomState(AgentState):
    user_name: str  # è·Ÿè¸ªç”¨æˆ·å

agent = create_react_agent(
    # å…¶ä»–å‚æ•°...
    state_schema=CustomState,
)
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&#34;3-é•¿æœŸè®°å¿†å­˜å‚¨&#34;&gt;3. é•¿æœŸè®°å¿†ï¼ˆå­˜å‚¨ï¼‰&lt;/h3&gt;
&lt;p&gt;åœ¨å¯¹è¯ä¹‹é—´æŒä¹…åŒ–æ•°æ®ï¼š&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;from langgraph.store.memory import InMemoryStore

# åˆå§‹åŒ–å­˜å‚¨
store = InMemoryStore()

# å­˜å‚¨ç”¨æˆ·ä¿¡æ¯
store.put(
    (&amp;quot;users&amp;quot;,),
    &amp;quot;user_123&amp;quot;,
    {
        &amp;quot;name&amp;quot;: &amp;quot;John Smith&amp;quot;,
        &amp;quot;language&amp;quot;: &amp;quot;English&amp;quot;,
    }
)

# åˆ›å»ºä½¿ç”¨å­˜å‚¨çš„Agent
agent = create_react_agent(
    model=model.qwen_llm(),
    tools=tools,
    store=store
)
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&#34;ä¹äººæœºåä½œ&#34;&gt;ä¹ã€äººæœºåä½œ&lt;/h2&gt;
&lt;p&gt;LangGraph å†…ç½®äº†äººæœºåä½œï¼ˆHILï¼‰åŠŸèƒ½ï¼Œå…è®¸åœ¨ Agent æ‰§è¡Œè¿‡ç¨‹ä¸­åŠ å…¥äººå·¥å®¡æŸ¥æ­¥éª¤ï¼š&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;def book_hotel(hotel_name: str):
    # æš‚åœæ‰§è¡Œï¼Œç­‰å¾…äººå·¥å®¡æ‰¹
    response = interrupt(
        f&amp;quot;å°è¯•è°ƒç”¨ `book_hotel`ï¼Œå‚æ•°ä¸º {{&#39;hotel_name&#39;: {hotel_name}}}ã€‚è¯·æ‰¹å‡†æˆ–å»ºè®®ä¿®æ”¹ã€‚&amp;quot;
    )
    
    # æ ¹æ®äººå·¥åé¦ˆç»§ç»­æ‰§è¡Œ
    if response[&amp;quot;type&amp;quot;] == &amp;quot;accept&amp;quot;:
        pass  # æ‰§è¡Œé¢„è®¢
    elif response[&amp;quot;type&amp;quot;] == &amp;quot;edit&amp;quot;:
        hotel_name = response[&amp;quot;args&amp;quot;][&amp;quot;hotel_name&amp;quot;]  # ä½¿ç”¨ä¿®æ”¹åçš„å‚æ•°
    else:
        raise ValueError(f&amp;quot;æœªçŸ¥å“åº”ç±»å‹: {response[&#39;type&#39;]}&amp;quot;)
        
    return f&amp;quot;æˆåŠŸé¢„è®¢ {hotel_name} çš„ä½å®¿ã€‚&amp;quot;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;è¿™ç§æœºåˆ¶ä½¿ Agent èƒ½å¤Ÿåœ¨å…³é”®æ“ä½œå¤„æš‚åœï¼Œç­‰å¾…äººå·¥ç¡®è®¤ï¼Œå¤§å¤§æé«˜äº†ç³»ç»Ÿçš„å¯é æ€§å’Œå®‰å…¨æ€§ã€‚&lt;/p&gt;
&lt;h2 id=&#34;åå¤šæ™ºèƒ½ä½“ç³»ç»Ÿ&#34;&gt;åã€å¤šæ™ºèƒ½ä½“ç³»ç»Ÿ&lt;/h2&gt;
&lt;p&gt;å¯¹äºå¤æ‚ä»»åŠ¡ï¼Œå•ä¸ª Agent å¯èƒ½éš¾ä»¥åº”å¯¹ï¼Œæ­¤æ—¶å¯ä»¥æ„å»ºå¤šæ™ºèƒ½ä½“ç³»ç»Ÿã€‚LangGraph æ”¯æŒä¸¤ç§ä¸»è¦æ¶æ„ï¼š&lt;/p&gt;
&lt;h3 id=&#34;1-ä¸»ç®¡æ¶æ„&#34;&gt;1. ä¸»ç®¡æ¶æ„&lt;/h3&gt;
&lt;p&gt;ç”±ä¸€ä¸ªä¸­å¤®ä¸»ç®¡ Agent åè°ƒå¤šä¸ªä¸“ä¸š Agentï¼š&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;from langgraph_supervisor import create_supervisor

# åˆ›å»ºä¸“ä¸šAgent
search_city_agent = create_react_agent(...)
weather_agent = create_react_agent(...)
ip_agent = create_react_agent(...)

# åˆ›å»ºä¸»ç®¡Agent
supervisor = create_supervisor(
    model=model.qwen_llm(),
    agents=[search_city_agent, weather_agent, ip_agent],
    prompt=&amp;quot;ä½ æ˜¯ä¸€ä¸ªæ™ºèƒ½ä½“åè°ƒå™¨ï¼Œæ ¹æ®ç”¨æˆ·é—®é¢˜è°ƒç”¨åˆé€‚çš„æ™ºèƒ½ä½“&amp;quot;
).compile()
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&#34;2-ç¾¤ç»„æ¶æ„&#34;&gt;2. ç¾¤ç»„æ¶æ„&lt;/h3&gt;
&lt;p&gt;Agent ä¹‹é—´æ ¹æ®ä¸“ä¸šæ€§åŠ¨æ€ç§»äº¤æ§åˆ¶æƒï¼š&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;from langgraph.prebuilt import create_swarm

# åˆ›å»ºå¤šä¸ªAgent
agent1 = create_react_agent(...)
agent2 = create_react_agent(...)
agent3 = create_react_agent(...)

# åˆ›å»ºç¾¤ç»„
swarm = create_swarm(
    agents=[agent1, agent2, agent3],
    default_active_agent=&amp;quot;agent1&amp;quot;  # é»˜è®¤æ¿€æ´»çš„Agent
).compile()
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;å¤šæ™ºèƒ½ä½“ç³»ç»Ÿé€šè¿‡&lt;strong&gt;ç§»äº¤ï¼ˆhandoffsï¼‰&lt;/strong&gt; æœºåˆ¶å®ç°é€šä¿¡ï¼Œä¸€ä¸ª Agent å¯ä»¥å°†æ§åˆ¶æƒç§»äº¤ç»™å¦ä¸€ä¸ª Agentï¼Œå¹¶ä¼ é€’å¿…è¦çš„ä¿¡æ¯ã€‚&lt;/p&gt;
&lt;h2 id=&#34;æ€»ç»“&#34;&gt;æ€»ç»“&lt;/h2&gt;
&lt;p&gt;LangGraph é¢„æ„å»º Agent ä¸ºå¼€å‘è€…æä¾›äº†æ„å»ºå¼ºå¤§æ™ºèƒ½ä»£ç†ç³»ç»Ÿçš„ä¾¿æ·é€”å¾„ã€‚é€šè¿‡å…¶ä¸°å¯Œçš„åŠŸèƒ½ç‰¹æ€§ â€”â€” åŒ…æ‹¬çµæ´»çš„å·¥å…·é›†æˆã€å®Œå–„çš„ä¸Šä¸‹æ–‡ç®¡ç†ã€å¯é çš„æ‰§è¡Œæ§åˆ¶å’Œå¤šæ™ºèƒ½ä½“åä½œèƒ½åŠ› â€”â€” å¼€å‘è€…å¯ä»¥å¿«é€Ÿæ„å»ºå‡ºé€‚åº”å„ç§åœºæ™¯çš„æ™ºèƒ½åº”ç”¨ã€‚&lt;/p&gt;
&lt;p&gt;æ— è®ºæ˜¯ç®€å•çš„ä¿¡æ¯æŸ¥è¯¢è¿˜æ˜¯å¤æ‚çš„å¤šæ­¥éª¤ä»»åŠ¡å¤„ç†ï¼ŒLangGraph éƒ½èƒ½æä¾›åšå®çš„æŠ€æœ¯æ”¯æŒï¼Œå¸®åŠ©ä½ æ‰“é€ é«˜æ•ˆã€å¯é ä¸”ç”¨æˆ·å‹å¥½çš„æ™ºèƒ½ç³»ç»Ÿã€‚&lt;/p&gt;
&lt;p&gt;æƒ³è¦äº†è§£æ›´å¤šç»†èŠ‚ï¼Œå¯ä»¥è®¿é—® &lt;a class=&#34;link&#34; href=&#34;https://langgraph.com.cn/agents/overview.1.html&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;LangGraph å®˜æ–¹æ–‡æ¡£&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;h2 id=&#34;ä»£ç ä»“åº“è·¯å¾„&#34;&gt;ä»£ç ä»“åº“è·¯å¾„&lt;/h2&gt;
&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;https://github.com/zcj-git520/AiLargeModel&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;zcj-git520/AiLargeModel: å¤§æ¨¡å‹åº”ç”¨å¼€å‘å­¦ä¹ &lt;/a&gt;&lt;/p&gt;
</description>
        </item>
        <item>
        <title>æ™ºèƒ½çŸ¥è¯†æ£€ç´¢ç³»ç»Ÿ</title>
        <link>https://zcj-git520.github.io/p/%E6%99%BA%E8%83%BD%E7%9F%A5%E8%AF%86%E6%A3%80%E7%B4%A2%E7%B3%BB%E7%BB%9F/</link>
        <pubDate>Mon, 02 Jun 2025 22:00:38 +0800</pubDate>
        
        <guid>https://zcj-git520.github.io/p/%E6%99%BA%E8%83%BD%E7%9F%A5%E8%AF%86%E6%A3%80%E7%B4%A2%E7%B3%BB%E7%BB%9F/</guid>
        <description>&lt;img src="https://zcj-git520.github.io/p/%E6%99%BA%E8%83%BD%E7%9F%A5%E8%AF%86%E6%A3%80%E7%B4%A2%E7%B3%BB%E7%BB%9F/img.png" alt="Featured image of post æ™ºèƒ½çŸ¥è¯†æ£€ç´¢ç³»ç»Ÿ" /&gt;&lt;h1 id=&#34;æ„å»ºæ™ºèƒ½çŸ¥è¯†æ£€ç´¢ç³»ç»ŸåŸºäº-streamlit-ä¸-langchain-çš„å®ç°æ–¹æ¡ˆ&#34;&gt;æ„å»ºæ™ºèƒ½çŸ¥è¯†æ£€ç´¢ç³»ç»Ÿï¼šåŸºäº Streamlit ä¸ LangChain çš„å®ç°æ–¹æ¡ˆ&lt;/h1&gt;
&lt;p&gt;åœ¨ä¿¡æ¯çˆ†ç‚¸çš„æ—¶ä»£ï¼Œå¦‚ä½•é«˜æ•ˆç®¡ç†å’Œæ£€ç´¢æ–‡æ¡£ä¸­çš„çŸ¥è¯†æˆä¸ºä¸€é¡¹é‡è¦éœ€æ±‚ã€‚æœ¬æ–‡å°†ä»‹ç»ä¸€ä¸ªåŸºäº Streamlit å’Œ LangChain æ„å»ºçš„æ™ºèƒ½çŸ¥è¯†æ£€ç´¢ç³»ç»Ÿï¼Œè¯¥ç³»ç»Ÿæ”¯æŒå¤šç§æ ¼å¼æ–‡æ¡£çš„ä¸Šä¼ ã€è§£æä¸æ£€ç´¢ï¼Œèƒ½å¤Ÿé€šè¿‡è‡ªç„¶è¯­è¨€äº¤äº’ä¸ºç”¨æˆ·æä¾›ç²¾å‡†çš„çŸ¥è¯†é—®ç­”æœåŠ¡ã€‚&lt;/p&gt;
&lt;h2 id=&#34;ç³»ç»Ÿæ¶æ„æ¦‚è§ˆ&#34;&gt;ç³»ç»Ÿæ¶æ„æ¦‚è§ˆ&lt;/h2&gt;
&lt;p&gt;è¯¥æ™ºèƒ½çŸ¥è¯†æ£€ç´¢ç³»ç»Ÿä¸»è¦ç”±ä»¥ä¸‹å‡ ä¸ªæ ¸å¿ƒæ¨¡å—æ„æˆï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ç”¨æˆ·ç•Œé¢å±‚&lt;/strong&gt;ï¼šåŸºäº Streamlit æ„å»ºçš„ Web äº¤äº’ç•Œé¢&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ–‡æ¡£å¤„ç†å±‚&lt;/strong&gt;ï¼šè´Ÿè´£è§£æå¤šç§æ ¼å¼çš„æ–‡æ¡£å†…å®¹&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å‘é‡æ•°æ®åº“å±‚&lt;/strong&gt;ï¼šä½¿ç”¨ ChromaDB å­˜å‚¨æ–‡æ¡£å‘é‡ï¼Œæ”¯æŒé«˜æ•ˆæ£€ç´¢&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ™ºèƒ½é—®ç­”å±‚&lt;/strong&gt;ï¼šåŸºäº LangChain çš„ Agent æœºåˆ¶å®ç°é—®ç­”é€»è¾‘&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ç³»ç»Ÿçš„æ ¸å¿ƒæµç¨‹æ˜¯ï¼šç”¨æˆ·ä¸Šä¼ æ–‡æ¡£ â†’ ç³»ç»Ÿè§£æå¹¶å­˜å‚¨æ–‡æ¡£å‘é‡ â†’ ç”¨æˆ·æé—® â†’ ç³»ç»Ÿæ£€ç´¢ç›¸å…³æ–‡æ¡£ â†’ ç”Ÿæˆå›ç­”ã€‚&lt;/p&gt;
&lt;p&gt;&lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 203; 
			flex-basis: 488px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/%E6%99%BA%E8%83%BD%E7%9F%A5%E8%AF%86%E6%A3%80%E7%B4%A2%E7%B3%BB%E7%BB%9F/img_2.png&#34; data-size=&#34;1886x926&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/%E6%99%BA%E8%83%BD%E7%9F%A5%E8%AF%86%E6%A3%80%E7%B4%A2%E7%B3%BB%E7%BB%9F/img_2.png&#34;
			width=&#34;1886&#34;
			height=&#34;926&#34;
			srcset=&#34;https://zcj-git520.github.io/p/%E6%99%BA%E8%83%BD%E7%9F%A5%E8%AF%86%E6%A3%80%E7%B4%A2%E7%B3%BB%E7%BB%9F/img_2_hu8bdab7a95e98847ca0168e3a687a34f6_103467_480x0_resize_box_3.png 480w, https://zcj-git520.github.io/p/%E6%99%BA%E8%83%BD%E7%9F%A5%E8%AF%86%E6%A3%80%E7%B4%A2%E7%B3%BB%E7%BB%9F/img_2_hu8bdab7a95e98847ca0168e3a687a34f6_103467_1024x0_resize_box_3.png 1024w&#34;
			loading=&#34;lazy&#34;
			&gt;
	&lt;/a&gt;
	
&lt;/figure&gt;&lt;/p&gt;
&lt;h2 id=&#34;æ ¸å¿ƒä»£ç è§£æ&#34;&gt;æ ¸å¿ƒä»£ç è§£æ&lt;/h2&gt;
&lt;h3 id=&#34;ç±»ç»“æ„è®¾è®¡&#34;&gt;ç±»ç»“æ„è®¾è®¡&lt;/h3&gt;
&lt;p&gt;ç³»ç»Ÿçš„æ ¸å¿ƒåŠŸèƒ½å°è£…åœ¨&lt;code&gt;KnowledgeBaseSystem&lt;/code&gt;ç±»ä¸­ï¼Œè¯¥ç±»é€šè¿‡ç»„åˆæ¨¡å¼æ•´åˆäº†æ¨¡å‹ã€æ•°æ®åº“å’Œæ–‡æ¡£å¤„ç†å™¨ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span class=&#34;k&#34;&gt;class&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;KnowledgeBaseSystem&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;def&lt;/span&gt; &lt;span class=&#34;fm&#34;&gt;__init__&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;model&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;chromadb&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ChromaDB&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;document_processor&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Knowledge&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt;
        &lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;chromadb&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;chromadb&lt;/span&gt;
        &lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;model&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;model&lt;/span&gt;
        &lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;document_processor&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;document_processor&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;é¡µé¢é…ç½®ä¸åˆå§‹åŒ–&#34;&gt;é¡µé¢é…ç½®ä¸åˆå§‹åŒ–&lt;/h3&gt;
&lt;p&gt;&lt;code&gt;setup_page_config&lt;/code&gt;æ–¹æ³•è´Ÿè´£åˆå§‹åŒ– Streamlit é¡µé¢é…ç½®å’Œä¼šè¯çŠ¶æ€ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span class=&#34;k&#34;&gt;def&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;setup_page_config&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt;
    &lt;span class=&#34;s2&#34;&gt;&amp;#34;&amp;#34;&amp;#34;è®¾ç½®é¡µé¢é…ç½®&amp;#34;&amp;#34;&amp;#34;&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;st&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;set_page_config&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;page_title&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;æ™ºèƒ½çŸ¥è¯†æ£€ç´¢ç³»ç»Ÿ&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;layout&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;wide&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;page_icon&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;ğŸ“š&amp;#34;&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;st&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;title&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;ğŸ“š æ™ºèƒ½çŸ¥è¯†æ£€ç´¢ç³»ç»Ÿ&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;st&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;sidebar&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;header&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;æ–‡æ¡£ä¸Šä¼ &amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    &lt;span class=&#34;c1&#34;&gt;# åˆå§‹åŒ–æˆ–é‡ç½®èŠå¤©è®°å½•&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;messages&amp;#34;&lt;/span&gt; &lt;span class=&#34;ow&#34;&gt;not&lt;/span&gt; &lt;span class=&#34;ow&#34;&gt;in&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;st&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;session_state&lt;/span&gt; &lt;span class=&#34;ow&#34;&gt;or&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;st&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;sidebar&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;button&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;æ¸…ç©ºèŠå¤©è®°å½•&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;st&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;session_state&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;messages&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;
            &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
                &lt;span class=&#34;s2&#34;&gt;&amp;#34;role&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;assistant&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
                &lt;span class=&#34;s2&#34;&gt;&amp;#34;content&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;æ‚¨å¥½ï¼Œæˆ‘æ˜¯æ‚¨çš„çŸ¥è¯†æ£€ç´¢åŠ©æ‰‹ï¼Œè¯·é—®æœ‰ä»€ä¹ˆå¯ä»¥å¸®åŠ©æ‚¨çš„ï¼Ÿ&amp;#34;&lt;/span&gt;
            &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
        &lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;æ–‡æ¡£ä¸Šä¼ ä¸å¤„ç†&#34;&gt;æ–‡æ¡£ä¸Šä¼ ä¸å¤„ç†&lt;/h3&gt;
&lt;p&gt;&lt;code&gt;handle_file_upload&lt;/code&gt;æ–¹æ³•å®ç°äº†å¤šæ ¼å¼æ–‡æ¡£çš„ä¸Šä¼ ä¸å¤„ç†åŠŸèƒ½ï¼Œæ”¯æŒ TXTã€PDFã€Wordã€Excelã€PPT å’Œå›¾ç‰‡ç­‰å¤šç§æ ¼å¼ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span class=&#34;k&#34;&gt;def&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;handle_file_upload&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt;
    &lt;span class=&#34;s2&#34;&gt;&amp;#34;&amp;#34;&amp;#34;å¤„ç†æ–‡ä»¶ä¸Šä¼ &amp;#34;&amp;#34;&amp;#34;&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;files&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;st&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;sidebar&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;file_uploader&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;label&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;æ”¯æŒä¸Šä¼ TXTã€PDFã€Wordã€Excelã€PPTå’Œå›¾ç‰‡æ–‡ä»¶ï¼Œå•ä¸ªæ–‡ä»¶æœ€å¤§200MB&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
        &lt;span class=&#34;nb&#34;&gt;type&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;txt&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;pdf&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;docx&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;xlsx&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;pptx&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;png&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;jpg&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;jpeg&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;],&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;accept_multiple_files&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;kc&#34;&gt;True&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;

    &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;ow&#34;&gt;not&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;files&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt;

    &lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;file&lt;/span&gt; &lt;span class=&#34;ow&#34;&gt;in&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;files&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;try&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
            &lt;span class=&#34;c1&#34;&gt;# å¤„ç†æ–‡ä»¶å¹¶å­˜å‚¨åˆ°å‘é‡æ•°æ®åº“&lt;/span&gt;
            &lt;span class=&#34;n&#34;&gt;file_type&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;file&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;split&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;.&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)[&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;lower&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
            &lt;span class=&#34;k&#34;&gt;with&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;tempfile&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;NamedTemporaryFile&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;delete&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;kc&#34;&gt;False&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;suffix&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;sa&#34;&gt;f&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;.&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;file_type&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;as&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;tmp_file&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
                &lt;span class=&#34;n&#34;&gt;tmp_file&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;write&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;file&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;getvalue&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;())&lt;/span&gt;
                &lt;span class=&#34;n&#34;&gt;tmp_file_path&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;tmp_file&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;name&lt;/span&gt;

            &lt;span class=&#34;k&#34;&gt;with&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;st&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;spinner&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;sa&#34;&gt;f&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;æ­£åœ¨å¤„ç† &lt;/span&gt;&lt;span class=&#34;si&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;file&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;...&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt;
                &lt;span class=&#34;n&#34;&gt;documents&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;document_processor&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;load_files&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;([&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;tmp_file_path&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;],&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;file_type&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
                &lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;chromadb&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;add&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;documents&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
                &lt;span class=&#34;n&#34;&gt;st&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;sidebar&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;success&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;sa&#34;&gt;f&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;file&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt; ä¸Šä¼ æˆåŠŸ&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;except&lt;/span&gt; &lt;span class=&#34;ne&#34;&gt;Exception&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;as&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;e&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
            &lt;span class=&#34;n&#34;&gt;st&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;sidebar&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;error&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;sa&#34;&gt;f&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;å¤„ç† &lt;/span&gt;&lt;span class=&#34;si&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;file&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt; æ—¶å‡ºé”™: &lt;/span&gt;&lt;span class=&#34;si&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;str&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;e&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;finally&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
            &lt;span class=&#34;c1&#34;&gt;# æ¸…ç†ä¸´æ—¶æ–‡ä»¶&lt;/span&gt;
            &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;os&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;path&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;exists&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;tmp_file_path&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt;
                &lt;span class=&#34;n&#34;&gt;os&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;remove&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;tmp_file_path&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;è¿™æ®µä»£ç çš„å…³é”®åœ¨äºï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ä½¿ç”¨ä¸´æ—¶æ–‡ä»¶å¤„ç†ä¸Šä¼ çš„æ–‡æ¡£&lt;/li&gt;
&lt;li&gt;é€šè¿‡æ–‡æ¡£å¤„ç†å™¨è§£æä¸åŒæ ¼å¼çš„æ–‡ä»¶&lt;/li&gt;
&lt;li&gt;å°†è§£æåçš„æ–‡æ¡£å†…å®¹æ·»åŠ åˆ°å‘é‡æ•°æ®åº“&lt;/li&gt;
&lt;li&gt;å®Œå–„çš„å¼‚å¸¸å¤„ç†å’Œèµ„æºæ¸…ç†&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 154; 
			flex-basis: 371px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/%E6%99%BA%E8%83%BD%E7%9F%A5%E8%AF%86%E6%A3%80%E7%B4%A2%E7%B3%BB%E7%BB%9F/img_1.png&#34; data-size=&#34;948x612&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/%E6%99%BA%E8%83%BD%E7%9F%A5%E8%AF%86%E6%A3%80%E7%B4%A2%E7%B3%BB%E7%BB%9F/img_1.png&#34;
			width=&#34;948&#34;
			height=&#34;612&#34;
			srcset=&#34;https://zcj-git520.github.io/p/%E6%99%BA%E8%83%BD%E7%9F%A5%E8%AF%86%E6%A3%80%E7%B4%A2%E7%B3%BB%E7%BB%9F/img_1_hu0dcf70a1bfc9e344716068c8a51bbedf_39184_480x0_resize_box_3.png 480w, https://zcj-git520.github.io/p/%E6%99%BA%E8%83%BD%E7%9F%A5%E8%AF%86%E6%A3%80%E7%B4%A2%E7%B3%BB%E7%BB%9F/img_1_hu0dcf70a1bfc9e344716068c8a51bbedf_39184_1024x0_resize_box_3.png 1024w&#34;
			loading=&#34;lazy&#34;
			&gt;
	&lt;/a&gt;
	
&lt;/figure&gt;&lt;/p&gt;
&lt;h3 id=&#34;æ™ºèƒ½é—®ç­”ä»£ç†çš„åˆ›å»º&#34;&gt;æ™ºèƒ½é—®ç­”ä»£ç†çš„åˆ›å»º&lt;/h3&gt;
&lt;p&gt;ç³»ç»Ÿçš„æ ¸å¿ƒæ™ºèƒ½é—®ç­”åŠŸèƒ½é€šè¿‡&lt;code&gt;create_agent&lt;/code&gt;æ–¹æ³•å®ç°ï¼Œè¯¥æ–¹æ³•åˆ©ç”¨ LangChain æ„å»ºäº†ä¸€ä¸ªå…·æœ‰æ£€ç´¢èƒ½åŠ›çš„æ™ºèƒ½ä»£ç†ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span class=&#34;k&#34;&gt;def&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;create_agent&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;AgentExecutor&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
    &lt;span class=&#34;s2&#34;&gt;&amp;#34;&amp;#34;&amp;#34;åˆ›å»ºä»£ç†æ‰§è¡Œå™¨&amp;#34;&amp;#34;&amp;#34;&lt;/span&gt;
    &lt;span class=&#34;c1&#34;&gt;# åˆ›å»ºæ£€ç´¢å™¨ï¼Œè®¾ç½®è¿”å›3ä¸ªæœ€ç›¸å…³çš„ç»“æœ&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;retriever&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;chromadb&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;as_retriever&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;search_kwargs&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;k&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;3&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;})&lt;/span&gt;

    &lt;span class=&#34;c1&#34;&gt;# åˆ›å»ºæ£€ç´¢å·¥å…·&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;tool&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;create_retriever_tool&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;retriever&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;çŸ¥è¯†åº“æ£€ç´¢&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;description&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;ä»çŸ¥è¯†åº“ä¸­æ£€ç´¢ç›¸å…³ä¿¡æ¯æ¥å›ç­”é—®é¢˜&amp;#34;&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;

    &lt;span class=&#34;c1&#34;&gt;# è®¾ç½®èŠå¤©å†å²å­˜å‚¨&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;msgs&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;StreamlitChatMessageHistory&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;memory&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ConversationBufferMemory&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;chat_memory&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;msgs&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;return_messages&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;kc&#34;&gt;True&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;memory_key&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;chat_history&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;output_key&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;output&amp;#34;&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;

    &lt;span class=&#34;c1&#34;&gt;# å®šä¹‰ä»£ç†çš„æŒ‡ä»¤å’Œæç¤ºæ¨¡æ¿&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;instructions&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;&amp;#34;&amp;#34;
&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;       æ‚¨æ˜¯ä¸€ä¸ªè®¾è®¡ç”¨äºæŸ¥è¯¢æ£€ç´¢çŸ¥è¯†åº“å¹¶å›ç­”é—®é¢˜çš„ä»£ç†;
&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;       æ‚¨å¯ä»¥ä½¿ç”¨æ£€ç´¢å·¥å…·ï¼Œå¹¶åŸºäºæ£€ç´¢å†…å®¹æ¥å›ç­”é—®é¢˜;
&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;       æ‚¨å¯ä»¥é€šè¿‡ä¸æŸ¥è¯¢æ–‡æ¡£å°±çŸ¥é“ç­”æ¡ˆï¼Œä½†æ‚¨ä»ç„¶éœ€è¦é€šè¿‡æŸ¥è¯¢æ–‡æ¡£æ¥è·å–ç­”æ¡ˆ;
&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;       å¦‚æœæ‚¨ä»æ–‡æ¡£ä¸­æ‰¾ä¸åˆ°ä»»ä½•ä¿¡æ¯ç”¨äºå›ç­”é—®é¢˜ï¼Œåˆ™åªéœ€è¿”å›â€œæŠ±æ­‰ï¼Œè¿™ä¸ªé—®é¢˜æˆ‘è¿˜ä¸çŸ¥é“â€ä½œä¸ºç­”æ¡ˆã€‚
&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;       &amp;#34;&amp;#34;&amp;#34;&lt;/span&gt;
    
    &lt;span class=&#34;c1&#34;&gt;# åˆ›å»ºæç¤ºæ¨¡æ¿&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;base_prompt_template&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;&amp;#34;&amp;#34;
&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;       &lt;/span&gt;&lt;span class=&#34;si&#34;&gt;{instructions}&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;       TOOLS:
&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;       ------
&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;       You have access to the following tools:
&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;       &lt;/span&gt;&lt;span class=&#34;si&#34;&gt;{tools}&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;       To use a tool,please use the following format:
&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;       Thought: Do I need to use a tool? Yes
&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;       Action: the action to take,should be one of [&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;{tool_names}&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;]
&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;       Action Input: &lt;/span&gt;&lt;span class=&#34;si&#34;&gt;{input}&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;       Observations: the result of the action
&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;       When you have a response to say to the Human,or if you do not need to use a tool,you MUST use the format:
&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;       Thought: Do I need to use a tool: No
&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;       Final Answer:[your response here]
&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;       Begin!
&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;       Previous conversation history:
&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;       &lt;/span&gt;&lt;span class=&#34;si&#34;&gt;{chat_history}&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;       New input:&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;{input}&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;       &lt;/span&gt;&lt;span class=&#34;si&#34;&gt;{agent_scratchpad}&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;       &amp;#34;&amp;#34;&amp;#34;&lt;/span&gt;
    
    &lt;span class=&#34;n&#34;&gt;base_prompt&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;PromptTemplate&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;from_template&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;template&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;base_prompt_template&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;prompt&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;base_prompt&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;partial&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;instructions&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;instructions&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    
    &lt;span class=&#34;c1&#34;&gt;# åˆ›å»ºREACTä»£ç†&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;agent&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;create_react_agent&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;
        &lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;model&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
        &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;tool&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;],&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;prompt&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;

    &lt;span class=&#34;c1&#34;&gt;# è¿”å›ä»£ç†æ‰§è¡Œå™¨&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;AgentExecutor&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;agent&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;agent&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;tools&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;tool&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;],&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;memory&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;memory&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;verbose&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;kc&#34;&gt;True&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;handle_parsing_errors&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;kc&#34;&gt;True&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;max_iterations&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;5&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;è¿™æ®µä»£ç çš„æ ¸å¿ƒæ˜¯æ„å»ºäº†ä¸€ä¸ªåŸºäº REACT æ€ç»´é“¾çš„æ™ºèƒ½ä»£ç†ï¼Œå®ƒèƒ½å¤Ÿï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ä½¿ç”¨æ£€ç´¢å·¥å…·ä»çŸ¥è¯†åº“è·å–ç›¸å…³ä¿¡æ¯&lt;/li&gt;
&lt;li&gt;ç»´æŠ¤å¯¹è¯å†å²ï¼Œæ”¯æŒä¸Šä¸‹æ–‡æ„ŸçŸ¥&lt;/li&gt;
&lt;li&gt;éµå¾ªç‰¹å®šçš„æ€è€ƒå’Œè¡ŒåŠ¨æ ¼å¼&lt;/li&gt;
&lt;li&gt;å¤„ç†è§£æé”™è¯¯å¹¶é™åˆ¶æœ€å¤§è¿­ä»£æ¬¡æ•°&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;èŠå¤©äº¤äº’å¤„ç†&#34;&gt;èŠå¤©äº¤äº’å¤„ç†&lt;/h3&gt;
&lt;p&gt;&lt;code&gt;handle_user_query&lt;/code&gt;æ–¹æ³•å®ç°äº†ç”¨æˆ·è¾“å…¥çš„å¤„ç†å’Œå›ç­”çš„ç”Ÿæˆï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span class=&#34;k&#34;&gt;def&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;handle_user_query&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;agent_executor&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;AgentExecutor&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt;
    &lt;span class=&#34;s2&#34;&gt;&amp;#34;&amp;#34;&amp;#34;å¤„ç†ç”¨æˆ·æŸ¥è¯¢&amp;#34;&amp;#34;&amp;#34;&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;user_query&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;st&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;chat_input&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;placeholder&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;è¯·è¾“å…¥æ‚¨çš„é—®é¢˜...&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;

    &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;ow&#34;&gt;not&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;user_query&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt;

    &lt;span class=&#34;c1&#34;&gt;# æ·»åŠ ç”¨æˆ·æ¶ˆæ¯åˆ°ä¼šè¯çŠ¶æ€å¹¶æ˜¾ç¤º&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;st&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;session_state&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;messages&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;append&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;({&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;role&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;user&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;content&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;user_query&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;})&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;st&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;chat_message&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;user&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;write&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;user_query&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;

    &lt;span class=&#34;c1&#34;&gt;# ç”Ÿæˆå¹¶æ˜¾ç¤ºå›ç­”&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;with&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;st&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;chat_message&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;assistant&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;st_cb&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;StreamlitCallbackHandler&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;st&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;container&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;())&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;response&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;agent_executor&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;invoke&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;
            &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;input&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;user_query&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;},&lt;/span&gt;
            &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;callbacks&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;st_cb&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]}&lt;/span&gt;
        &lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;

        &lt;span class=&#34;n&#34;&gt;answer&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;response&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;get&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;output&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;æŠ±æ­‰ï¼Œæˆ‘æ— æ³•å›ç­”è¿™ä¸ªé—®é¢˜ã€‚&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;st&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;session_state&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;messages&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;append&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;({&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;role&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;assistant&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;content&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;answer&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;})&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;st&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;write&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;answer&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 177; 
			flex-basis: 427px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/%E6%99%BA%E8%83%BD%E7%9F%A5%E8%AF%86%E6%A3%80%E7%B4%A2%E7%B3%BB%E7%BB%9F/img_3.png&#34; data-size=&#34;1507x847&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/%E6%99%BA%E8%83%BD%E7%9F%A5%E8%AF%86%E6%A3%80%E7%B4%A2%E7%B3%BB%E7%BB%9F/img_3.png&#34;
			width=&#34;1507&#34;
			height=&#34;847&#34;
			srcset=&#34;https://zcj-git520.github.io/p/%E6%99%BA%E8%83%BD%E7%9F%A5%E8%AF%86%E6%A3%80%E7%B4%A2%E7%B3%BB%E7%BB%9F/img_3_hu0b418cfa9cb70e314746975f0d9372f4_80375_480x0_resize_box_3.png 480w, https://zcj-git520.github.io/p/%E6%99%BA%E8%83%BD%E7%9F%A5%E8%AF%86%E6%A3%80%E7%B4%A2%E7%B3%BB%E7%BB%9F/img_3_hu0b418cfa9cb70e314746975f0d9372f4_80375_1024x0_resize_box_3.png 1024w&#34;
			loading=&#34;lazy&#34;
			&gt;
	&lt;/a&gt;
	
&lt;/figure&gt;&lt;/p&gt;
&lt;h3 id=&#34;ç³»ç»Ÿè¿è¡Œå…¥å£&#34;&gt;ç³»ç»Ÿè¿è¡Œå…¥å£&lt;/h3&gt;
&lt;p&gt;&lt;code&gt;run&lt;/code&gt;æ–¹æ³•ä½œä¸ºç³»ç»Ÿçš„å…¥å£ç‚¹ï¼Œåè°ƒå„ä¸ªæ¨¡å—çš„æ‰§è¡Œï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span class=&#34;k&#34;&gt;def&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;run&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt;
    &lt;span class=&#34;s2&#34;&gt;&amp;#34;&amp;#34;&amp;#34;è¿è¡ŒçŸ¥è¯†æ£€ç´¢ç³»ç»Ÿ&amp;#34;&amp;#34;&amp;#34;&lt;/span&gt;
    &lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;setup_page_config&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
    &lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;display_chat_history&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
    &lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;handle_file_upload&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;

    &lt;span class=&#34;k&#34;&gt;try&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;agent_executor&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;create_agent&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
        &lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;handle_user_query&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;agent_executor&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;except&lt;/span&gt; &lt;span class=&#34;ne&#34;&gt;Exception&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;as&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;e&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;st&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;error&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;sa&#34;&gt;f&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;ç³»ç»Ÿé”™è¯¯: &lt;/span&gt;&lt;span class=&#34;si&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;str&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;e&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;st&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;session_state&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;messages&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;append&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;({&lt;/span&gt;
            &lt;span class=&#34;s2&#34;&gt;&amp;#34;role&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;assistant&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
            &lt;span class=&#34;s2&#34;&gt;&amp;#34;content&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;æŠ±æ­‰ï¼Œç³»ç»Ÿå‡ºç°é”™è¯¯ï¼Œè¯·ç¨åå†è¯•ã€‚&amp;#34;&lt;/span&gt;
        &lt;span class=&#34;p&#34;&gt;})&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;ç³»ç»Ÿå¯åŠ¨ä¸é…ç½®&#34;&gt;ç³»ç»Ÿå¯åŠ¨ä¸é…ç½®&lt;/h3&gt;
&lt;p&gt;ä¸»ç¨‹åºé€šè¿‡ä»¥ä¸‹ä»£ç å¯åŠ¨ç³»ç»Ÿï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;vm&#34;&gt;__name__&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;__main__&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;model_type&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ModelType&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;QWEN&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;config&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Config&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;conf/config.yml&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;model&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Model&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;config&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;chromadb&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ChromaDB&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;config&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;model_type&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;document_processor&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Knowledge&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;system&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;KnowledgeBaseSystem&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;model&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;qwen_llm&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(),&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;chromadb&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;document_processor&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;system&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;run&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;è¿™é‡Œä½¿ç”¨äº† Qwen æ¨¡å‹ä½œä¸ºåŸºç¡€å¤§è¯­è¨€æ¨¡å‹ï¼Œé€šè¿‡é…ç½®æ–‡ä»¶è¿›è¡Œç³»ç»Ÿå‚æ•°çš„ç®¡ç†ï¼Œå¹¶åˆå§‹åŒ–äº†å‘é‡æ•°æ®åº“å’Œæ–‡æ¡£å¤„ç†å™¨ã€‚&lt;/p&gt;
&lt;h2 id=&#34;ä»£ç ç¤ºä¾‹&#34;&gt;ä»£ç ç¤ºä¾‹&lt;/h2&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;os&lt;/span&gt;
&lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;tempfile&lt;/span&gt;

&lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;streamlit&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;as&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;st&lt;/span&gt;
&lt;span class=&#34;kn&#34;&gt;from&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;langchain.agents&lt;/span&gt; &lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;AgentExecutor&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;create_react_agent&lt;/span&gt;
&lt;span class=&#34;kn&#34;&gt;from&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;langchain.memory&lt;/span&gt; &lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ConversationBufferMemory&lt;/span&gt;
&lt;span class=&#34;kn&#34;&gt;from&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;langchain_community.callbacks&lt;/span&gt; &lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;StreamlitCallbackHandler&lt;/span&gt;
&lt;span class=&#34;kn&#34;&gt;from&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;langchain_community.chat_message_histories&lt;/span&gt; &lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;StreamlitChatMessageHistory&lt;/span&gt;
&lt;span class=&#34;kn&#34;&gt;from&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;langchain_core.prompts&lt;/span&gt; &lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;PromptTemplate&lt;/span&gt;
&lt;span class=&#34;kn&#34;&gt;from&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;langchain_core.tools&lt;/span&gt; &lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;create_retriever_tool&lt;/span&gt;

&lt;span class=&#34;kn&#34;&gt;from&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;DB.chroma&lt;/span&gt; &lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ChromaDB&lt;/span&gt;
&lt;span class=&#34;kn&#34;&gt;from&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;common.modeCommon&lt;/span&gt; &lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Model&lt;/span&gt;
&lt;span class=&#34;kn&#34;&gt;from&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;config.config&lt;/span&gt; &lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Config&lt;/span&gt;
&lt;span class=&#34;kn&#34;&gt;from&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;enums.model_enums&lt;/span&gt; &lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ModelType&lt;/span&gt;
&lt;span class=&#34;kn&#34;&gt;from&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;knowledge&lt;/span&gt; &lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Knowledge&lt;/span&gt;


&lt;span class=&#34;k&#34;&gt;class&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;KnowledgeBaseSystem&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;def&lt;/span&gt; &lt;span class=&#34;fm&#34;&gt;__init__&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;model&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;chromadb&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ChromaDB&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;document_processor&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Knowledge&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt;
        &lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;chromadb&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;chromadb&lt;/span&gt;
        &lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;model&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;model&lt;/span&gt;
        &lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;document_processor&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;document_processor&lt;/span&gt;

    &lt;span class=&#34;k&#34;&gt;def&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;setup_page_config&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt;
        &lt;span class=&#34;s2&#34;&gt;&amp;#34;&amp;#34;&amp;#34;è®¾ç½®é¡µé¢é…ç½®&amp;#34;&amp;#34;&amp;#34;&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;st&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;set_page_config&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;
            &lt;span class=&#34;n&#34;&gt;page_title&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;æ™ºèƒ½çŸ¥è¯†æ£€ç´¢ç³»ç»Ÿ&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
            &lt;span class=&#34;n&#34;&gt;layout&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;wide&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
            &lt;span class=&#34;n&#34;&gt;page_icon&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;ğŸ“š&amp;#34;&lt;/span&gt;
        &lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;st&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;title&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;ğŸ“š æ™ºèƒ½çŸ¥è¯†æ£€ç´¢ç³»ç»Ÿ&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;st&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;sidebar&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;header&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;æ–‡æ¡£ä¸Šä¼ &amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;messages&amp;#34;&lt;/span&gt; &lt;span class=&#34;ow&#34;&gt;not&lt;/span&gt; &lt;span class=&#34;ow&#34;&gt;in&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;st&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;session_state&lt;/span&gt; &lt;span class=&#34;ow&#34;&gt;or&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;st&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;sidebar&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;button&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;æ¸…ç©ºèŠå¤©è®°å½•&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt;
            &lt;span class=&#34;n&#34;&gt;st&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;session_state&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;messages&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;
                &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
                    &lt;span class=&#34;s2&#34;&gt;&amp;#34;role&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;assistant&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
                    &lt;span class=&#34;s2&#34;&gt;&amp;#34;content&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;æ‚¨å¥½ï¼Œæˆ‘æ˜¯æ‚¨çš„çŸ¥è¯†æ£€ç´¢åŠ©æ‰‹ï¼Œè¯·é—®æœ‰ä»€ä¹ˆå¯ä»¥å¸®åŠ©æ‚¨çš„ï¼Ÿ&amp;#34;&lt;/span&gt;
                &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
            &lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;


    &lt;span class=&#34;k&#34;&gt;def&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;display_chat_history&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt;
        &lt;span class=&#34;s2&#34;&gt;&amp;#34;&amp;#34;&amp;#34;æ˜¾ç¤ºèŠå¤©å†å²&amp;#34;&amp;#34;&amp;#34;&lt;/span&gt;
        &lt;span class=&#34;c1&#34;&gt;# æ˜¾ç¤ºèŠå¤©å†å²&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;msg&lt;/span&gt; &lt;span class=&#34;ow&#34;&gt;in&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;st&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;session_state&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;messages&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
            &lt;span class=&#34;n&#34;&gt;st&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;chat_message&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;msg&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;role&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;])&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;write&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;msg&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;content&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;])&lt;/span&gt;


    &lt;span class=&#34;k&#34;&gt;def&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;handle_file_upload&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt;
        &lt;span class=&#34;s2&#34;&gt;&amp;#34;&amp;#34;&amp;#34;å¤„ç†æ–‡ä»¶ä¸Šä¼ &amp;#34;&amp;#34;&amp;#34;&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;files&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;st&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;sidebar&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;file_uploader&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;
            &lt;span class=&#34;n&#34;&gt;label&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;æ”¯æŒä¸Šä¼ TXTã€PDFã€Wordã€Excelã€PPTå’Œå›¾ç‰‡æ–‡ä»¶ï¼Œå•ä¸ªæ–‡ä»¶æœ€å¤§200MB&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;  &lt;span class=&#34;c1&#34;&gt;# ä¸»æ ‡ç­¾æ”¹ä¸ºä¸­æ–‡&lt;/span&gt;
            &lt;span class=&#34;nb&#34;&gt;type&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;txt&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;pdf&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;docx&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;xlsx&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;pptx&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;png&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;jpg&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;jpeg&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;],&lt;/span&gt;  &lt;span class=&#34;c1&#34;&gt;# æ”¯æŒçš„æ–‡ä»¶ç±»å‹&lt;/span&gt;
            &lt;span class=&#34;n&#34;&gt;accept_multiple_files&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;kc&#34;&gt;True&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;  &lt;span class=&#34;c1&#34;&gt;# å…è®¸ä¸Šä¼ å¤šä¸ªæ–‡ä»¶&lt;/span&gt;
            &lt;span class=&#34;c1&#34;&gt;# help=&amp;#34;æ”¯æŒä¸Šä¼ TXTã€PDFã€Wordã€Excelã€PPTå’Œå›¾ç‰‡æ–‡ä»¶ï¼Œå•ä¸ªæ–‡ä»¶æœ€å¤§200MB&amp;#34;  # å¸®åŠ©æ–‡æœ¬æ”¹ä¸ºä¸­æ–‡&lt;/span&gt;
        &lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;

        &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;ow&#34;&gt;not&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;files&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
            &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt;

        &lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;file&lt;/span&gt; &lt;span class=&#34;ow&#34;&gt;in&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;files&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
            &lt;span class=&#34;k&#34;&gt;try&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
                &lt;span class=&#34;n&#34;&gt;file_type&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;file&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;split&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;.&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)[&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;lower&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
                &lt;span class=&#34;k&#34;&gt;with&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;tempfile&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;NamedTemporaryFile&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;delete&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;kc&#34;&gt;False&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;suffix&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;sa&#34;&gt;f&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;.&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;file_type&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;as&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;tmp_file&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
                    &lt;span class=&#34;n&#34;&gt;tmp_file&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;write&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;file&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;getvalue&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;())&lt;/span&gt;
                    &lt;span class=&#34;n&#34;&gt;tmp_file_path&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;tmp_file&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;name&lt;/span&gt;

                &lt;span class=&#34;k&#34;&gt;with&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;st&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;spinner&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;sa&#34;&gt;f&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;æ­£åœ¨å¤„ç† &lt;/span&gt;&lt;span class=&#34;si&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;file&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;...&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt;
                    &lt;span class=&#34;n&#34;&gt;documents&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;document_processor&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;load_files&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;([&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;tmp_file_path&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;],&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;file_type&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
                    &lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;chromadb&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;add&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;documents&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
                    &lt;span class=&#34;n&#34;&gt;st&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;sidebar&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;success&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;sa&#34;&gt;f&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;file&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt; ä¸Šä¼ æˆåŠŸ&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
            &lt;span class=&#34;k&#34;&gt;except&lt;/span&gt; &lt;span class=&#34;ne&#34;&gt;Exception&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;as&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;e&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
                &lt;span class=&#34;n&#34;&gt;st&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;sidebar&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;error&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;sa&#34;&gt;f&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;å¤„ç† &lt;/span&gt;&lt;span class=&#34;si&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;file&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt; æ—¶å‡ºé”™: &lt;/span&gt;&lt;span class=&#34;si&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;str&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;e&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
            &lt;span class=&#34;k&#34;&gt;finally&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
                &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;os&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;path&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;exists&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;tmp_file_path&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt;
                    &lt;span class=&#34;n&#34;&gt;os&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;remove&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;tmp_file_path&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;

    &lt;span class=&#34;k&#34;&gt;def&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;create_agent&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;AgentExecutor&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
        &lt;span class=&#34;s2&#34;&gt;&amp;#34;&amp;#34;&amp;#34;åˆ›å»ºä»£ç†æ‰§è¡Œå™¨&amp;#34;&amp;#34;&amp;#34;&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;retriever&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;chromadb&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;as_retriever&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;search_kwargs&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;k&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;3&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;})&lt;/span&gt;

        &lt;span class=&#34;n&#34;&gt;tool&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;create_retriever_tool&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;
            &lt;span class=&#34;n&#34;&gt;retriever&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
            &lt;span class=&#34;n&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;çŸ¥è¯†åº“æ£€ç´¢&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
            &lt;span class=&#34;n&#34;&gt;description&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;ä»çŸ¥è¯†åº“ä¸­æ£€ç´¢ç›¸å…³ä¿¡æ¯æ¥å›ç­”é—®é¢˜&amp;#34;&lt;/span&gt;
        &lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;

        &lt;span class=&#34;n&#34;&gt;msgs&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;StreamlitChatMessageHistory&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;memory&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ConversationBufferMemory&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;
            &lt;span class=&#34;n&#34;&gt;chat_memory&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;msgs&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
            &lt;span class=&#34;n&#34;&gt;return_messages&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;kc&#34;&gt;True&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
            &lt;span class=&#34;n&#34;&gt;memory_key&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;chat_history&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
            &lt;span class=&#34;n&#34;&gt;output_key&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;output&amp;#34;&lt;/span&gt;
        &lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;

        &lt;span class=&#34;n&#34;&gt;instructions&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;&amp;#34;&amp;#34;
&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;           æ‚¨æ˜¯ä¸€ä¸ªè®¾è®¡ç”¨äºæŸ¥è¯¢æ£€ç´¢çŸ¥è¯†åº“å¹¶å›ç­”é—®é¢˜çš„ä»£ç†;
&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;           æ‚¨å¯ä»¥ä½¿ç”¨æ£€ç´¢å·¥å…·ï¼Œå¹¶åŸºäºæ£€ç´¢å†…å®¹æ¥å›ç­”é—®é¢˜;
&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;           æ‚¨å¯ä»¥é€šè¿‡ä¸æŸ¥è¯¢æ–‡æ¡£å°±çŸ¥é“ç­”æ¡ˆï¼Œä½†æ‚¨ä»ç„¶éœ€è¦é€šè¿‡æŸ¥è¯¢æ–‡æ¡£æ¥è·å–ç­”æ¡ˆ;
&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;           å¦‚æœæ‚¨ä»æ–‡æ¡£ä¸­æ‰¾ä¸åˆ°ä»»ä½•ä¿¡æ¯ç”¨äºå›ç­”é—®é¢˜ï¼Œåˆ™åªéœ€è¿”å›â€œæŠ±æ­‰ï¼Œè¿™ä¸ªé—®é¢˜æˆ‘è¿˜ä¸çŸ¥é“â€ä½œä¸ºç­”æ¡ˆã€‚
&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;           &amp;#34;&amp;#34;&amp;#34;&lt;/span&gt;
        &lt;span class=&#34;c1&#34;&gt;# åŸºç¡€æç¤ºæ¨¡æ¿&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;base_prompt_template&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;&amp;#34;&amp;#34;
&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;           &lt;/span&gt;&lt;span class=&#34;si&#34;&gt;{instructions}&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;           TOOLS:
&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;           ------
&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;           You have access to the following tools:
&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;           &lt;/span&gt;&lt;span class=&#34;si&#34;&gt;{tools}&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;           To use a tool,please use the following format:
&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;           Thought: Do I need to use a tool? Yes
&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;           Action: the action to take,should be one of [&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;{tool_names}&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;]
&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;           Action Input: &lt;/span&gt;&lt;span class=&#34;si&#34;&gt;{input}&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;           Observations: the result of the action
&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;           When you have a response to say to the Human,or if you do not need to use a tool,you MUST use the format:
&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;           Thought: Do I need to use a tool: No
&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;           Final Answer:[your response here]
&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;           Begin!
&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;           Previous conversation history:
&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;           &lt;/span&gt;&lt;span class=&#34;si&#34;&gt;{chat_history}&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;           New input:&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;{input}&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;           &lt;/span&gt;&lt;span class=&#34;si&#34;&gt;{agent_scratchpad}&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;           &amp;#34;&amp;#34;&amp;#34;&lt;/span&gt;
        &lt;span class=&#34;c1&#34;&gt;# åˆ›å»ºåŸºç¡€æç¤ºè¯æ¨¡æ¿&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;base_prompt&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;PromptTemplate&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;from_template&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;
            &lt;span class=&#34;n&#34;&gt;template&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;base_prompt_template&lt;/span&gt;
        &lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
        &lt;span class=&#34;c1&#34;&gt;# åˆ›å»ºéƒ¨åˆ†å¡«å……çš„æç¤ºè¯æ¨¡æ¿&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;prompt&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;base_prompt&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;partial&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;
            &lt;span class=&#34;n&#34;&gt;instructions&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;instructions&lt;/span&gt;
        &lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;agent&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;create_react_agent&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;
            &lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;model&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
            &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;tool&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;],&lt;/span&gt;
            &lt;span class=&#34;n&#34;&gt;prompt&lt;/span&gt;
        &lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;

        &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;AgentExecutor&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;
            &lt;span class=&#34;n&#34;&gt;agent&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;agent&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
            &lt;span class=&#34;n&#34;&gt;tools&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;tool&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;],&lt;/span&gt;
            &lt;span class=&#34;n&#34;&gt;memory&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;memory&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
            &lt;span class=&#34;n&#34;&gt;verbose&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;kc&#34;&gt;True&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
            &lt;span class=&#34;n&#34;&gt;handle_parsing_errors&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;kc&#34;&gt;True&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
            &lt;span class=&#34;n&#34;&gt;max_iterations&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;5&lt;/span&gt;
        &lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;

    &lt;span class=&#34;k&#34;&gt;def&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;handle_user_query&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;agent_executor&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;AgentExecutor&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt;
        &lt;span class=&#34;s2&#34;&gt;&amp;#34;&amp;#34;&amp;#34;å¤„ç†ç”¨æˆ·æŸ¥è¯¢&amp;#34;&amp;#34;&amp;#34;&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;user_query&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;st&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;chat_input&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;placeholder&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;è¯·è¾“å…¥æ‚¨çš„é—®é¢˜...&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;

        &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;ow&#34;&gt;not&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;user_query&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
            &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt;

        &lt;span class=&#34;n&#34;&gt;st&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;session_state&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;messages&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;append&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;({&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;role&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;user&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;content&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;user_query&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;})&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;st&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;chat_message&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;user&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;write&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;user_query&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;


        &lt;span class=&#34;k&#34;&gt;with&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;st&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;chat_message&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;assistant&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt;
            &lt;span class=&#34;n&#34;&gt;st_cb&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;StreamlitCallbackHandler&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;st&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;container&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;())&lt;/span&gt;
            &lt;span class=&#34;n&#34;&gt;response&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;agent_executor&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;invoke&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;
                &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;input&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;user_query&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;},&lt;/span&gt;
                &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;callbacks&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;st_cb&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]}&lt;/span&gt;
            &lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;

            &lt;span class=&#34;n&#34;&gt;answer&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;response&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;get&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;output&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;æŠ±æ­‰ï¼Œæˆ‘æ— æ³•å›ç­”è¿™ä¸ªé—®é¢˜ã€‚&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
            &lt;span class=&#34;n&#34;&gt;st&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;session_state&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;messages&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;append&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;({&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;role&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;assistant&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;content&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;answer&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;})&lt;/span&gt;
            &lt;span class=&#34;n&#34;&gt;st&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;write&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;answer&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;

    &lt;span class=&#34;k&#34;&gt;def&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;run&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt;
        &lt;span class=&#34;s2&#34;&gt;&amp;#34;&amp;#34;&amp;#34;è¿è¡ŒçŸ¥è¯†æ£€ç´¢ç³»ç»Ÿ&amp;#34;&amp;#34;&amp;#34;&lt;/span&gt;
        &lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;setup_page_config&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
        &lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;display_chat_history&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
        &lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;handle_file_upload&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;

        &lt;span class=&#34;k&#34;&gt;try&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
            &lt;span class=&#34;n&#34;&gt;agent_executor&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;create_agent&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
            &lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;handle_user_query&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;agent_executor&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;except&lt;/span&gt; &lt;span class=&#34;ne&#34;&gt;Exception&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;as&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;e&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
            &lt;span class=&#34;n&#34;&gt;st&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;error&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;sa&#34;&gt;f&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;ç³»ç»Ÿé”™è¯¯: &lt;/span&gt;&lt;span class=&#34;si&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;str&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;e&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
            &lt;span class=&#34;n&#34;&gt;st&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;session_state&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;messages&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;append&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;({&lt;/span&gt;
                &lt;span class=&#34;s2&#34;&gt;&amp;#34;role&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;assistant&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
                &lt;span class=&#34;s2&#34;&gt;&amp;#34;content&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;æŠ±æ­‰ï¼Œç³»ç»Ÿå‡ºç°é”™è¯¯ï¼Œè¯·ç¨åå†è¯•ã€‚&amp;#34;&lt;/span&gt;
            &lt;span class=&#34;p&#34;&gt;})&lt;/span&gt;


&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;vm&#34;&gt;__name__&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;__main__&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;model_type&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ModelType&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;QWEN&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;config&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Config&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;conf/config.yml&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;model&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Model&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;config&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;chromadb&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ChromaDB&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;config&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;model_type&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;document_processor&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Knowledge&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;system&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;KnowledgeBaseSystem&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;model&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;qwen_llm&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(),&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;chromadb&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;document_processor&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;system&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;run&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;ä»£ç ä»“åº“è·¯å¾„&#34;&gt;ä»£ç ä»“åº“è·¯å¾„&lt;/h2&gt;
&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;https://github.com/zcj-git520/AiLargeModel&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;zcj-git520/AiLargeModel: å¤§æ¨¡å‹åº”ç”¨å¼€å‘å­¦ä¹ &lt;/a&gt;&lt;/p&gt;
</description>
        </item>
        <item>
        <title>æ£€ç´¢å¢å¼ºç”Ÿæˆï¼ˆRAGï¼‰</title>
        <link>https://zcj-git520.github.io/p/%E6%A3%80%E7%B4%A2%E5%A2%9E%E5%BC%BA%E7%94%9F%E6%88%90rag/</link>
        <pubDate>Sun, 25 May 2025 22:00:38 +0800</pubDate>
        
        <guid>https://zcj-git520.github.io/p/%E6%A3%80%E7%B4%A2%E5%A2%9E%E5%BC%BA%E7%94%9F%E6%88%90rag/</guid>
        <description>&lt;img src="https://zcj-git520.github.io/p/%E6%A3%80%E7%B4%A2%E5%A2%9E%E5%BC%BA%E7%94%9F%E6%88%90rag/img.png" alt="Featured image of post æ£€ç´¢å¢å¼ºç”Ÿæˆï¼ˆRAGï¼‰" /&gt;&lt;h1 id=&#34;æ£€ç´¢å¢å¼ºç”Ÿæˆragä»åŸç†åˆ°å·¥ç¨‹å®è·µçš„æ·±åº¦è§£æ&#34;&gt;æ£€ç´¢å¢å¼ºç”Ÿæˆï¼ˆRAGï¼‰ï¼šä»åŸç†åˆ°å·¥ç¨‹å®è·µçš„æ·±åº¦è§£æ&lt;/h1&gt;
&lt;p&gt;åœ¨å¤§è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰å¿«é€Ÿè¿­ä»£çš„ä»Šå¤©ï¼Œå¦‚ä½•è®©æ¨¡å‹æ—¢å…·å¤‡é€šç”¨æ™ºèƒ½ï¼Œåˆèƒ½ç²¾å‡†è°ƒç”¨ç‰¹å®šé¢†åŸŸçŸ¥è¯†ï¼Œæˆä¸ºä¼ä¸šçº§ AI åº”ç”¨çš„æ ¸å¿ƒæŒ‘æˆ˜ã€‚æ£€ç´¢å¢å¼ºç”Ÿæˆï¼ˆRetrieval-Augmented Generationï¼ŒRAGï¼‰æŠ€æœ¯é€šè¿‡ &amp;ldquo;æ£€ç´¢ + ç”Ÿæˆ&amp;rdquo; çš„ååŒæ¨¡å¼ï¼ŒæˆåŠŸè§£å†³äº†çº¯ LLM åœ¨çŸ¥è¯†æ—¶æ•ˆæ€§ã€å‡†ç¡®æ€§å’Œé¢†åŸŸé€‚é…æ€§ä¸Šçš„çŸ­æ¿ï¼Œæˆä¸ºè¿æ¥é€šç”¨ AI ä¸å‚ç›´ä¸šåŠ¡çš„å…³é”®æ¡¥æ¢ã€‚æœ¬æ–‡å°†ä»æŠ€æœ¯åŸç†å‡ºå‘ï¼Œç»“åˆå®æˆ˜ä»£ç ï¼Œå…¨é¢å‰–æ RAG çš„å®ç°è·¯å¾„ä¸å·¥ç¨‹å®è·µã€‚&lt;/p&gt;
&lt;h2 id=&#34;ä¸€rag-çš„åŸºæœ¬æ¦‚å¿µå’ŒåŸç†&#34;&gt;ä¸€ã€RAG çš„åŸºæœ¬æ¦‚å¿µå’ŒåŸç†&lt;/h2&gt;
&lt;p&gt;RAG æŠ€æœ¯çš„æ ¸å¿ƒæ€æƒ³æºäºä¿¡æ¯æ£€ç´¢ä¸è‡ªç„¶è¯­è¨€ç”Ÿæˆçš„èåˆï¼š&lt;strong&gt;åœ¨ç”Ÿæˆå›ç­”å‰ï¼Œå…ˆä»å¤–éƒ¨çŸ¥è¯†åº“ä¸­æ£€ç´¢ä¸é—®é¢˜ç›¸å…³çš„äº‹å®æ€§ä¿¡æ¯ï¼Œå†è®©æ¨¡å‹åŸºäºè¿™äº› &amp;ldquo;è¯æ®&amp;rdquo; è¿›è¡Œæ¨ç†ç”Ÿæˆ&lt;/strong&gt;ã€‚è¿™ç§æœºåˆ¶å°† LLM çš„ &amp;ldquo;é—­å·è€ƒè¯•&amp;rdquo; æ¨¡å¼è½¬å˜ä¸º &amp;ldquo;å¼€å·è€ƒè¯•&amp;rdquo;ï¼Œä»æ ¹æœ¬ä¸Šè§£å†³äº†ä¸‰ä¸ªæ ¸å¿ƒé—®é¢˜ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;çŸ¥è¯†æ—¶æ•ˆæ€§å±€é™&lt;/strong&gt;ï¼šLLM è®­ç»ƒæ•°æ®å­˜åœ¨æˆªæ­¢æ—¥æœŸï¼Œæ— æ³•åº”å¯¹åŠ¨æ€æ›´æ–°çš„ä¸šåŠ¡çŸ¥è¯†ï¼ˆå¦‚ 2025 å¹´çš„æ–°æ³•è§„ã€ä¼ä¸šå†…éƒ¨æ–‡æ¡£æ›´æ–°ï¼‰ï¼›&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¹»è§‰ç”Ÿæˆé£é™©&lt;/strong&gt;ï¼šæ¨¡å‹å¯èƒ½ç¼–é€ ä¸å­˜åœ¨çš„äº‹å®ï¼ˆå¦‚è™šæ„äº§å“å‚æ•°ã€å­¦æœ¯å¼•ç”¨ï¼‰ï¼Œåœ¨åŒ»ç–—ã€æ³•å¾‹ç­‰é¢†åŸŸå¯èƒ½å¼•å‘ä¸¥é‡åæœï¼›&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é¢†åŸŸçŸ¥è¯†å£å’&lt;/strong&gt;ï¼šé€šç”¨æ¨¡å‹å¯¹ä¸“ä¸šé¢†åŸŸï¼ˆå¦‚ç½‘ç»œå®‰å…¨ã€é‡‘èé£æ§ï¼‰çš„æ·±åº¦çŸ¥è¯†æŒæ¡ä¸è¶³ï¼Œéš¾ä»¥ç”Ÿæˆç²¾å‡†å›ç­”ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ä»æŠ€æœ¯æœ¬è´¨çœ‹ï¼ŒRAG æ˜¯ä¸€ç§&lt;strong&gt;æ··åˆå¢å¼ºæ¶æ„&lt;/strong&gt;ï¼šé€šè¿‡æ£€ç´¢æ¨¡å—å°†å¤–éƒ¨çŸ¥è¯†å¼•å…¥ç”Ÿæˆè¿‡ç¨‹ï¼Œå½¢æˆ &amp;ldquo;çŸ¥è¯†è¾“å…¥ - æ¨¡å‹æ¨ç† - ç»“æœè¾“å‡º&amp;rdquo; çš„é—­ç¯ã€‚è¿™ç§æ¶æ„æ—¢ä¿ç•™äº† LLM çš„ä¸Šä¸‹æ–‡ç†è§£ä¸è‡ªç„¶è¯­è¨€ç”Ÿæˆèƒ½åŠ›ï¼Œåˆé€šè¿‡å¤–éƒ¨çŸ¥è¯†åº“å®ç°äº†çŸ¥è¯†çš„å¯æ§æ›´æ–°ä¸ç²¾å‡†è°ƒç”¨ã€‚&lt;/p&gt;
&lt;p&gt;&lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 204; 
			flex-basis: 491px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/%E6%A3%80%E7%B4%A2%E5%A2%9E%E5%BC%BA%E7%94%9F%E6%88%90rag/img_2.png&#34; data-size=&#34;1225x598&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/%E6%A3%80%E7%B4%A2%E5%A2%9E%E5%BC%BA%E7%94%9F%E6%88%90rag/img_2.png&#34;
			width=&#34;1225&#34;
			height=&#34;598&#34;
			srcset=&#34;https://zcj-git520.github.io/p/%E6%A3%80%E7%B4%A2%E5%A2%9E%E5%BC%BA%E7%94%9F%E6%88%90rag/img_2_hu6dfea62baf175810780ae5fe1edf4227_157107_480x0_resize_box_3.png 480w, https://zcj-git520.github.io/p/%E6%A3%80%E7%B4%A2%E5%A2%9E%E5%BC%BA%E7%94%9F%E6%88%90rag/img_2_hu6dfea62baf175810780ae5fe1edf4227_157107_1024x0_resize_box_3.png 1024w&#34;
			loading=&#34;lazy&#34;
			alt=&#34;æµç¨‹å›¾&#34;&gt;
	&lt;/a&gt;
	
	&lt;figcaption&gt;æµç¨‹å›¾&lt;/figcaption&gt;
	
&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;å¯ä»¥åŠ å¯†æ–‡æœ¬å—å’Œå‘é‡ï¼ˆå‘é‡ä¹Ÿå¯èƒ½æ³„éœ²åŸå§‹è¯­ä¹‰ï¼‰ï¼Œä»è€Œä½¿ç”¨å¯†æ–‡è¿›è¡Œå­˜å‚¨ä¸ç½‘ç»œä¼ è¾“ã€‚å¯¹äºå‘é‡åŠ å¯†éœ€é‡‡ç”¨ç‰¹æ®ŠåŠ å¯†ç®—æ³•ä½¿å¾—åŠ å¯†åå‘é‡ä»èƒ½è¿›è¡Œç›¸ä¼¼åº¦æ£€ç´¢ã€‚
&lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 110; 
			flex-basis: 265px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/%E6%A3%80%E7%B4%A2%E5%A2%9E%E5%BC%BA%E7%94%9F%E6%88%90rag/img_1.png&#34; data-size=&#34;579x523&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/%E6%A3%80%E7%B4%A2%E5%A2%9E%E5%BC%BA%E7%94%9F%E6%88%90rag/img_1.png&#34;
			width=&#34;579&#34;
			height=&#34;523&#34;
			srcset=&#34;https://zcj-git520.github.io/p/%E6%A3%80%E7%B4%A2%E5%A2%9E%E5%BC%BA%E7%94%9F%E6%88%90rag/img_1_hu895724358e675c793b11cd7ee5ee299d_34354_480x0_resize_box_3.png 480w, https://zcj-git520.github.io/p/%E6%A3%80%E7%B4%A2%E5%A2%9E%E5%BC%BA%E7%94%9F%E6%88%90rag/img_1_hu895724358e675c793b11cd7ee5ee299d_34354_1024x0_resize_box_3.png 1024w&#34;
			loading=&#34;lazy&#34;
			alt=&#34;åŠ å¯†æµç¨‹å›¾&#34;&gt;
	&lt;/a&gt;
	
	&lt;figcaption&gt;åŠ å¯†æµç¨‹å›¾&lt;/figcaption&gt;
	
&lt;/figure&gt;&lt;/p&gt;
&lt;h2 id=&#34;äºŒrag-çš„å·¥ä½œæµç¨‹&#34;&gt;äºŒã€RAG çš„å·¥ä½œæµç¨‹&lt;/h2&gt;
&lt;p&gt;ä¸€ä¸ªå®Œæ•´çš„ RAG ç³»ç»Ÿå¯åˆ†ä¸º&lt;strong&gt;ç¦»çº¿çŸ¥è¯†åº“æ„å»º&lt;/strong&gt;ä¸&lt;strong&gt;åœ¨çº¿é—®ç­”äº¤äº’&lt;/strong&gt;ä¸¤å¤§é˜¶æ®µï¼ŒåŒ…å«äº”ä¸ªæ ¸å¿ƒæ­¥éª¤ï¼š&lt;/p&gt;
&lt;h3 id=&#34;1-ç¦»çº¿çŸ¥è¯†åº“æ„å»º&#34;&gt;1. ç¦»çº¿çŸ¥è¯†åº“æ„å»º&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ–‡æ¡£é‡‡é›†&lt;/strong&gt;ï¼šæ”¶é›†ç»“æ„åŒ–ï¼ˆå¦‚ Excel è¡¨æ ¼ï¼‰ã€åŠç»“æ„åŒ–ï¼ˆå¦‚ PDF æ‰‹å†Œï¼‰å’Œéç»“æ„åŒ–ï¼ˆå¦‚å›¾ç‰‡ã€éŸ³é¢‘è½¬æ–‡æœ¬ï¼‰æ•°æ®ï¼›&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ–‡æ¡£é¢„å¤„ç†&lt;/strong&gt;ï¼šå¯¹åŸå§‹æ•°æ®è¿›è¡Œæ¸…æ´—ï¼ˆå»å™ªã€æ ¼å¼ç»Ÿä¸€ï¼‰ã€æ‹†åˆ†ï¼ˆæŒ‰è¯­ä¹‰å•å…ƒåˆ‡å‰²é•¿æ–‡æ¡£ï¼‰ï¼›&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å‘é‡ç¼–ç &lt;/strong&gt;ï¼šé€šè¿‡åµŒå…¥æ¨¡å‹ï¼ˆEmbedding Modelï¼‰å°†æ–‡æœ¬ç‰‡æ®µè½¬åŒ–ä¸ºé«˜ç»´å‘é‡ï¼Œæ•æ‰è¯­ä¹‰ç‰¹å¾ï¼›&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å‘é‡å­˜å‚¨&lt;/strong&gt;ï¼šå°†å‘é‡åŠå…³è”æ–‡æœ¬å­˜å…¥å‘é‡æ•°æ®åº“ï¼Œå»ºç«‹å¯æ£€ç´¢çš„çŸ¥è¯†ç´¢å¼•ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 157; 
			flex-basis: 378px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/%E6%A3%80%E7%B4%A2%E5%A2%9E%E5%BC%BA%E7%94%9F%E6%88%90rag/img.png&#34; data-size=&#34;1716x1089&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/%E6%A3%80%E7%B4%A2%E5%A2%9E%E5%BC%BA%E7%94%9F%E6%88%90rag/img.png&#34;
			width=&#34;1716&#34;
			height=&#34;1089&#34;
			srcset=&#34;https://zcj-git520.github.io/p/%E6%A3%80%E7%B4%A2%E5%A2%9E%E5%BC%BA%E7%94%9F%E6%88%90rag/img_hufef087fddda0fa8512a3bf0acfa96939_57649_480x0_resize_box_3.png 480w, https://zcj-git520.github.io/p/%E6%A3%80%E7%B4%A2%E5%A2%9E%E5%BC%BA%E7%94%9F%E6%88%90rag/img_hufef087fddda0fa8512a3bf0acfa96939_57649_1024x0_resize_box_3.png 1024w&#34;
			loading=&#34;lazy&#34;
			&gt;
	&lt;/a&gt;
	
&lt;/figure&gt;&lt;/p&gt;
&lt;h3 id=&#34;2-åœ¨çº¿é—®ç­”äº¤äº’&#34;&gt;2. åœ¨çº¿é—®ç­”äº¤äº’&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æŸ¥è¯¢ç†è§£ä¸æ£€ç´¢&lt;/strong&gt;ï¼šå°†ç”¨æˆ·é—®é¢˜è½¬åŒ–ä¸ºå‘é‡ï¼Œåœ¨å‘é‡æ•°æ®åº“ä¸­æ£€ç´¢æœ€ç›¸ä¼¼çš„æ–‡æœ¬ç‰‡æ®µï¼ˆTop-Kï¼‰ï¼›&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¢å¼ºç”Ÿæˆ&lt;/strong&gt;ï¼šå°†æ£€ç´¢åˆ°çš„æ–‡æœ¬ä½œä¸ºä¸Šä¸‹æ–‡è¾“å…¥ LLMï¼Œç”ŸæˆåŸºäºäº‹å®çš„å›ç­”ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 331; 
			flex-basis: 794px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/%E6%A3%80%E7%B4%A2%E5%A2%9E%E5%BC%BA%E7%94%9F%E6%88%90rag/img_3.png&#34; data-size=&#34;2569x776&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/%E6%A3%80%E7%B4%A2%E5%A2%9E%E5%BC%BA%E7%94%9F%E6%88%90rag/img_3.png&#34;
			width=&#34;2569&#34;
			height=&#34;776&#34;
			srcset=&#34;https://zcj-git520.github.io/p/%E6%A3%80%E7%B4%A2%E5%A2%9E%E5%BC%BA%E7%94%9F%E6%88%90rag/img_3_huf159f99e0fbd1cbcc88aa756d1d430c3_72596_480x0_resize_box_3.png 480w, https://zcj-git520.github.io/p/%E6%A3%80%E7%B4%A2%E5%A2%9E%E5%BC%BA%E7%94%9F%E6%88%90rag/img_3_huf159f99e0fbd1cbcc88aa756d1d430c3_72596_1024x0_resize_box_3.png 1024w&#34;
			loading=&#34;lazy&#34;
			&gt;
	&lt;/a&gt;
	
&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;è¿™ç§ &amp;ldquo;ç¦»çº¿å»ºåº“ + åœ¨çº¿è°ƒç”¨&amp;rdquo; çš„æ¨¡å¼ï¼Œæ—¢ä¿è¯äº†çŸ¥è¯†æ›´æ–°çš„çµæ´»æ€§ï¼ˆæ— éœ€é‡æ–°è®­ç»ƒæ¨¡å‹ï¼‰ï¼Œåˆç¡®ä¿äº†é—®ç­”çš„å®æ—¶æ€§ï¼ˆæ£€ç´¢ä¸ç”Ÿæˆå‡ä¸ºæ¯«ç§’çº§æ“ä½œï¼‰&lt;/p&gt;
&lt;h2 id=&#34;ä¸‰å®ç°-rag-çš„å…³é”®æŠ€æœ¯&#34;&gt;ä¸‰ã€å®ç° RAG çš„å…³é”®æŠ€æœ¯&lt;/h2&gt;
&lt;h3 id=&#34;1-æ–‡æ¡£åŠ è½½å¤šæºæ•°æ®çš„ç»Ÿä¸€æ¥å…¥&#34;&gt;1. æ–‡æ¡£åŠ è½½ï¼šå¤šæºæ•°æ®çš„ç»Ÿä¸€æ¥å…¥&lt;/h3&gt;
&lt;p&gt;æ–‡æ¡£åŠ è½½æ˜¯ RAG çš„å…¥å£ç¯èŠ‚ï¼Œéœ€æ”¯æŒå¤šç§æ ¼å¼æ–‡ä»¶çš„è§£æã€‚ç¤ºä¾‹ä»£ç ä¸­&lt;code&gt;Knowledge&lt;/code&gt;ç±»é€šè¿‡&lt;code&gt;loader_mapping&lt;/code&gt;å®ç°äº†å¤šç±»å‹æ–‡ä»¶çš„é€‚é…ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# æ–‡ä»¶ç±»å‹ä¸åŠ è½½å™¨çš„æ˜ å°„å…³ç³»&lt;/span&gt;
&lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;loader_mapping&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;s2&#34;&gt;&amp;#34;txt&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;TextLoader&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
    &lt;span class=&#34;s2&#34;&gt;&amp;#34;pdf&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;PyMuPDFLoader&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
    &lt;span class=&#34;s2&#34;&gt;&amp;#34;docx&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Docx2txtLoader&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
    &lt;span class=&#34;s2&#34;&gt;&amp;#34;xlsx&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;UnstructuredExcelLoader&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
    &lt;span class=&#34;s2&#34;&gt;&amp;#34;pptx&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;UnstructuredPowerPointLoader&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
    &lt;span class=&#34;s2&#34;&gt;&amp;#34;image&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;UnstructuredImageLoader&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
    &lt;span class=&#34;s2&#34;&gt;&amp;#34;default&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;UnstructuredFileLoader&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;strong&gt;æŠ€æœ¯è¦ç‚¹&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;é’ˆå¯¹ PDF ä¼˜å…ˆé€‰æ‹©&lt;code&gt;PyMuPDFLoader&lt;/code&gt;ï¼Œæ”¯æŒé«˜æ•ˆè§£æå¸¦æ ¼å¼æ–‡æœ¬ï¼›&lt;/li&gt;
&lt;li&gt;å›¾ç‰‡æ–‡ä»¶éœ€é…åˆ OCR æŠ€æœ¯ï¼ˆå¦‚&lt;code&gt;UnstructuredImageLoader&lt;/code&gt;ï¼‰æå–æ–‡å­—ï¼›&lt;/li&gt;
&lt;li&gt;å¤§å‹æ–‡æ¡£ï¼ˆå¦‚æ•°ç™¾é¡µ PDFï¼‰éœ€å®ç°æµå¼åŠ è½½ï¼Œé¿å…å†…å­˜æº¢å‡ºã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;2-æ–‡æœ¬åˆ†å‰²è¯­ä¹‰å®Œæ•´ä¸æ£€ç´¢æ•ˆç‡çš„å¹³è¡¡&#34;&gt;2. æ–‡æœ¬åˆ†å‰²ï¼šè¯­ä¹‰å®Œæ•´ä¸æ£€ç´¢æ•ˆç‡çš„å¹³è¡¡&lt;/h3&gt;
&lt;p&gt;é•¿æ–‡æ¡£ç›´æ¥ç¼–ç ä¼šå¯¼è‡´è¯­ä¹‰ç¨€é‡Šï¼Œéœ€æŒ‰è¯­ä¹‰å•å…ƒæ‹†åˆ†ã€‚ç¤ºä¾‹ä¸­ä½¿ç”¨&lt;code&gt;RecursiveCharacterTextSplitter&lt;/code&gt;ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;text_splitter&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;RecursiveCharacterTextSplitter&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;chunk_size&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;4000&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;  &lt;span class=&#34;c1&#34;&gt;# æ¯å—æœ€å¤§é•¿åº¦&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;chunk_overlap&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;500&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;  &lt;span class=&#34;c1&#34;&gt;# å—é—´é‡å éƒ¨åˆ†ï¼Œä¿è¯è¯­ä¹‰è¿è´¯æ€§&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;length_function&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;len&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;strong&gt;åˆ†å‰²ç­–ç•¥&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ä¼˜å…ˆæŒ‰è‡ªç„¶åˆ†éš”ç¬¦ï¼ˆæ®µè½ã€å¥å­ï¼‰æ‹†åˆ†ï¼Œé¿å…ç ´åè¯­ä¹‰ï¼›&lt;/li&gt;
&lt;li&gt;&lt;code&gt;chunk_size&lt;/code&gt;éœ€æ ¹æ®åµŒå…¥æ¨¡å‹æœ€å¤§è¾“å…¥é•¿åº¦è°ƒæ•´ï¼ˆå¦‚ BERT ç±»æ¨¡å‹é€šå¸¸æ”¯æŒ 512 tokensï¼‰ï¼›&lt;/li&gt;
&lt;li&gt;é‡å éƒ¨åˆ†ï¼ˆ&lt;code&gt;chunk_overlap&lt;/code&gt;ï¼‰å»ºè®®è®¾ç½®ä¸ºæ€»é•¿åº¦çš„ 10%-20%ï¼Œé˜²æ­¢ä¸Šä¸‹æ–‡æ–­è£‚ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;3-å‘é‡æ•°æ®åº“é«˜æ•ˆç›¸ä¼¼æ€§æ£€ç´¢&#34;&gt;3. å‘é‡æ•°æ®åº“ï¼šé«˜æ•ˆç›¸ä¼¼æ€§æ£€ç´¢&lt;/h3&gt;
&lt;p&gt;å‘é‡æ•°æ®åº“æ˜¯ RAG çš„ &amp;ldquo;å¤§è„‘&amp;rdquo;ï¼Œè´Ÿè´£å­˜å‚¨å‘é‡å¹¶æ”¯æŒå¿«é€Ÿè¿‘é‚»æ£€ç´¢ã€‚ç¤ºä¾‹ä¸­&lt;code&gt;ChromaDB&lt;/code&gt;ç±»å®ç°äº†å‘é‡åº“çš„åˆå§‹åŒ–ä¸æ“ä½œï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# åˆå§‹åŒ–Chromaå‘é‡æ•°æ®åº“&lt;/span&gt;
&lt;span class=&#34;n&#34;&gt;db&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Chroma&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;collection_name&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;config&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;chroma_config&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;get&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;collection_name&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;),&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;client&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;HttpClient&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;host&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;host&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;port&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;port&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;),&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;embedding_function&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;DashScopeEmbeddings&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;model&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;embedding_model_name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;dashscope_api_key&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;api_key&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;strong&gt;é€‰å‹è€ƒé‡&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;è½»é‡çº§åœºæ™¯å¯é€‰ Chromaã€FAISSï¼ˆé€‚åˆå•æœºéƒ¨ç½²ï¼‰ï¼›&lt;/li&gt;
&lt;li&gt;å¤§è§„æ¨¡é›†ç¾¤åœºæ™¯æ¨è Milvusã€Weaviateï¼ˆæ”¯æŒåˆ†å¸ƒå¼å­˜å‚¨ä¸æ°´å¹³æ‰©å±•ï¼‰ï¼›&lt;/li&gt;
&lt;li&gt;éœ€å…³æ³¨å‘é‡æ•°æ®åº“çš„ç´¢å¼•ç±»å‹ï¼ˆå¦‚ HNSWã€IVFï¼‰å¯¹æ£€ç´¢é€Ÿåº¦çš„å½±å“ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;4-æ£€ç´¢ä¸ç”Ÿæˆç²¾å‡†æ€§ä¸æµç•…æ€§çš„ååŒ&#34;&gt;4. æ£€ç´¢ä¸ç”Ÿæˆï¼šç²¾å‡†æ€§ä¸æµç•…æ€§çš„ååŒ&lt;/h3&gt;
&lt;p&gt;æ£€ç´¢é˜¶æ®µéœ€å¹³è¡¡å¬å›ç‡ä¸ç²¾ç¡®ç‡ï¼Œç”Ÿæˆé˜¶æ®µéœ€æ§åˆ¶æ¨¡å‹å¯¹æ£€ç´¢ç»“æœçš„ä¾èµ–åº¦ã€‚ç¤ºä¾‹ä¸­é€šè¿‡ä»¥ä¸‹æµç¨‹å®ç°ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;æ£€ç´¢ç¯èŠ‚&lt;/strong&gt;ï¼š&lt;/li&gt;
&lt;/ol&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# åŸºäºç”¨æˆ·æŸ¥è¯¢æ£€ç´¢ç›¸ä¼¼æ–‡æ¡£&lt;/span&gt;
&lt;span class=&#34;n&#34;&gt;query&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;å·²ç›‘å¬ç«¯å£&amp;#34;&lt;/span&gt;
&lt;span class=&#34;n&#34;&gt;docs&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;chromadb&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;query&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;query&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;  &lt;span class=&#34;c1&#34;&gt;# å†…éƒ¨è°ƒç”¨similarity_search&lt;/span&gt;
&lt;span class=&#34;n&#34;&gt;retriever&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;chromadb&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;as_retriever&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;search_kwargs&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;k&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;5&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;})&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;2.&lt;strong&gt;ç”Ÿæˆç¯èŠ‚&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;  &lt;span class=&#34;n&#34;&gt;tool&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;create_retriever_tool&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;
            &lt;span class=&#34;n&#34;&gt;retriever&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
            &lt;span class=&#34;n&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;çŸ¥è¯†åº“æ£€ç´¢&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
            &lt;span class=&#34;n&#34;&gt;description&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;ä»çŸ¥è¯†åº“ä¸­æ£€ç´¢ç›¸å…³ä¿¡æ¯æ¥å›ç­”é—®é¢˜&amp;#34;&lt;/span&gt;
        &lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;

        &lt;span class=&#34;n&#34;&gt;instructions&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;&amp;#34;&amp;#34;
&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;           æ‚¨æ˜¯ä¸€ä¸ªè®¾è®¡ç”¨äºæŸ¥è¯¢æ£€ç´¢çŸ¥è¯†åº“å¹¶å›ç­”é—®é¢˜çš„ä»£ç†;
&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;           æ‚¨å¯ä»¥ä½¿ç”¨æ£€ç´¢å·¥å…·ï¼Œå¹¶åŸºäºæ£€ç´¢å†…å®¹æ¥å›ç­”é—®é¢˜;
&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;           æ‚¨å¯ä»¥é€šè¿‡ä¸æŸ¥è¯¢æ–‡æ¡£å°±çŸ¥é“ç­”æ¡ˆï¼Œä½†æ‚¨ä»ç„¶éœ€è¦é€šè¿‡æŸ¥è¯¢æ–‡æ¡£æ¥è·å–ç­”æ¡ˆ;
&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;           å¦‚æœæ‚¨ä»æ–‡æ¡£ä¸­æ‰¾ä¸åˆ°ä»»ä½•ä¿¡æ¯ç”¨äºå›ç­”é—®é¢˜ï¼Œåˆ™åªéœ€è¿”å›â€œæŠ±æ­‰ï¼Œè¿™ä¸ªé—®é¢˜æˆ‘è¿˜ä¸çŸ¥é“â€ä½œä¸ºç­”æ¡ˆã€‚
&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;           &amp;#34;&amp;#34;&amp;#34;&lt;/span&gt;
        &lt;span class=&#34;c1&#34;&gt;# åŸºç¡€æç¤ºæ¨¡æ¿&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;base_prompt_template&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;&amp;#34;&amp;#34;
&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;           &lt;/span&gt;&lt;span class=&#34;si&#34;&gt;{instructions}&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;           TOOLS:
&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;           ------
&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;           You have access to the following tools:
&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;           &lt;/span&gt;&lt;span class=&#34;si&#34;&gt;{tools}&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;           To use a tool,please use the following format:
&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;           Thought: Do I need to use a tool? Yes
&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;           Action: the action to take,should be one of [&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;{tool_names}&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;]
&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;           Action Input: &lt;/span&gt;&lt;span class=&#34;si&#34;&gt;{input}&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;           Observations: the result of the action
&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;           When you have a response to say to the Human,or if you do not need to use a tool,you MUST use the format:
&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;           Thought: Do I need to use a tool: No
&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;           Final Answer:[your response here]
&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;           Begin!
&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;           Previous conversation history:
&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;           &lt;/span&gt;&lt;span class=&#34;si&#34;&gt;{chat_history}&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;           New input:&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;{input}&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;           &lt;/span&gt;&lt;span class=&#34;si&#34;&gt;{agent_scratchpad}&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;           &amp;#34;&amp;#34;&amp;#34;&lt;/span&gt;
        &lt;span class=&#34;c1&#34;&gt;# åˆ›å»ºåŸºç¡€æç¤ºè¯æ¨¡æ¿&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;base_prompt&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;PromptTemplate&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;from_template&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;
            &lt;span class=&#34;n&#34;&gt;template&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;base_prompt_template&lt;/span&gt;
        &lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
        &lt;span class=&#34;c1&#34;&gt;# åˆ›å»ºéƒ¨åˆ†å¡«å……çš„æç¤ºè¯æ¨¡æ¿&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;prompt&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;base_prompt&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;partial&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;
            &lt;span class=&#34;n&#34;&gt;instructions&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;instructions&lt;/span&gt;
        &lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;agent&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;create_react_agent&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;
            &lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;model&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
            &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;tool&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;],&lt;/span&gt;
            &lt;span class=&#34;n&#34;&gt;prompt&lt;/span&gt;
        &lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;strong&gt;ä¼˜åŒ–æŠ€å·§&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;é‡‡ç”¨æ··åˆæ£€ç´¢ç­–ç•¥ï¼ˆå…³é”®è¯æ£€ç´¢ + å‘é‡æ£€ç´¢ï¼‰æå‡å¬å›ç‡ï¼›&lt;/li&gt;
&lt;li&gt;é€šè¿‡&lt;code&gt;search_kwargs={&amp;quot;k&amp;quot;: 5}&lt;/code&gt;æ§åˆ¶è¿”å›çš„æ–‡æ¡£æ•°é‡ï¼ˆé€šå¸¸ 5-10 ç¯‡ä¸ºå®œï¼‰ï¼›&lt;/li&gt;
&lt;li&gt;ç”Ÿæˆé˜¶æ®µä½¿ç”¨æç¤ºè¯å·¥ç¨‹ï¼ˆå¦‚ &amp;ldquo;ä¸¥æ ¼åŸºäºæä¾›çš„ä¿¡æ¯å›ç­”ï¼Œä¸ç¼–é€ å†…å®¹&amp;rdquo;ï¼‰çº¦æŸæ¨¡å‹è¡Œä¸ºã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;å››å®Œæ•´ä»£ç ç¤ºä¾‹&#34;&gt;å››ã€å®Œæ•´ä»£ç ç¤ºä¾‹&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;ragä»£ç ç¤ºä¾‹&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;&amp;#34;&amp;#34;
&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;çŸ¥è¯†åº“ RAG
&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;&amp;#34;&amp;#34;&lt;/span&gt;
&lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;logging&lt;/span&gt;
&lt;span class=&#34;kn&#34;&gt;from&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;typing&lt;/span&gt; &lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Optional&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;List&lt;/span&gt;

&lt;span class=&#34;kn&#34;&gt;from&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;langchain_community.document_loaders&lt;/span&gt; &lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;PyMuPDFLoader&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;TextLoader&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Docx2txtLoader&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;UnstructuredExcelLoader&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; \
    &lt;span class=&#34;n&#34;&gt;UnstructuredPowerPointLoader&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;UnstructuredImageLoader&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;UnstructuredFileLoader&lt;/span&gt;
&lt;span class=&#34;kn&#34;&gt;from&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;langchain_core.tools&lt;/span&gt; &lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;create_retriever_tool&lt;/span&gt;
&lt;span class=&#34;kn&#34;&gt;from&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;langchain_text_splitters&lt;/span&gt; &lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;RecursiveCharacterTextSplitter&lt;/span&gt;

&lt;span class=&#34;kn&#34;&gt;from&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;DB.chroma&lt;/span&gt; &lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ChromaDB&lt;/span&gt;
&lt;span class=&#34;kn&#34;&gt;from&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;config.config&lt;/span&gt; &lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Config&lt;/span&gt;
&lt;span class=&#34;kn&#34;&gt;from&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;enums.model_enums&lt;/span&gt; &lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ModelType&lt;/span&gt;

&lt;span class=&#34;c1&#34;&gt;# é…ç½®æ—¥å¿—&lt;/span&gt;
&lt;span class=&#34;n&#34;&gt;logging&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;basicConfig&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;level&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;logging&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;INFO&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
    &lt;span class=&#34;nb&#34;&gt;format&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;%(asctime)s&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt; - &lt;/span&gt;&lt;span class=&#34;si&#34;&gt;%(name)s&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt; - &lt;/span&gt;&lt;span class=&#34;si&#34;&gt;%(levelname)s&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt; - &lt;/span&gt;&lt;span class=&#34;si&#34;&gt;%(message)s&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;span class=&#34;n&#34;&gt;logger&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;logging&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;getLogger&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;vm&#34;&gt;__name__&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;span class=&#34;k&#34;&gt;class&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;Knowledge&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
    &lt;span class=&#34;s2&#34;&gt;&amp;#34;&amp;#34;&amp;#34;æ–‡æ¡£å¤„ç†å™¨ï¼Œè´Ÿè´£åŠ è½½å’Œå¤„ç†å„ç§ç±»å‹çš„æ–‡æ¡£&amp;#34;&amp;#34;&amp;#34;&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;def&lt;/span&gt; &lt;span class=&#34;fm&#34;&gt;__init__&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt;
        &lt;span class=&#34;c1&#34;&gt;# åˆå§‹åŒ–æ–‡æœ¬åˆ†å‰²å™¨&lt;/span&gt;
        &lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;text_splitter&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;RecursiveCharacterTextSplitter&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;
            &lt;span class=&#34;n&#34;&gt;chunk_size&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;4000&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;  &lt;span class=&#34;c1&#34;&gt;# æ¯å—æœ€å¤§é•¿åº¦&lt;/span&gt;
            &lt;span class=&#34;n&#34;&gt;chunk_overlap&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;500&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;  &lt;span class=&#34;c1&#34;&gt;# å—ä¹‹é—´çš„é‡å éƒ¨åˆ†&lt;/span&gt;
            &lt;span class=&#34;n&#34;&gt;length_function&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;len&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
            &lt;span class=&#34;n&#34;&gt;is_separator_regex&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;kc&#34;&gt;False&lt;/span&gt;
        &lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;

        &lt;span class=&#34;c1&#34;&gt;# æ–‡ä»¶ç±»å‹ä¸å¯¹åº”åŠ è½½å™¨çš„æ˜ å°„&lt;/span&gt;
        &lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;loader_mapping&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
            &lt;span class=&#34;s2&#34;&gt;&amp;#34;txt&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;TextLoader&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
            &lt;span class=&#34;s2&#34;&gt;&amp;#34;pdf&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;PyMuPDFLoader&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
            &lt;span class=&#34;s2&#34;&gt;&amp;#34;docx&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Docx2txtLoader&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
            &lt;span class=&#34;s2&#34;&gt;&amp;#34;xlsx&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;UnstructuredExcelLoader&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
            &lt;span class=&#34;s2&#34;&gt;&amp;#34;xls&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;UnstructuredExcelLoader&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
            &lt;span class=&#34;s2&#34;&gt;&amp;#34;pptx&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;UnstructuredPowerPointLoader&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
            &lt;span class=&#34;s2&#34;&gt;&amp;#34;ppt&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;UnstructuredPowerPointLoader&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
            &lt;span class=&#34;s2&#34;&gt;&amp;#34;image&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;UnstructuredImageLoader&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
            &lt;span class=&#34;s2&#34;&gt;&amp;#34;png&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;UnstructuredImageLoader&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
            &lt;span class=&#34;s2&#34;&gt;&amp;#34;jpg&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;UnstructuredImageLoader&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
            &lt;span class=&#34;s2&#34;&gt;&amp;#34;jpeg&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;UnstructuredImageLoader&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
            &lt;span class=&#34;s2&#34;&gt;&amp;#34;default&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;UnstructuredFileLoader&lt;/span&gt;  &lt;span class=&#34;c1&#34;&gt;# é»˜è®¤åŠ è½½å™¨&lt;/span&gt;
        &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

    &lt;span class=&#34;k&#34;&gt;def&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;clean_text&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;text&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;str&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;str&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
        &lt;span class=&#34;s2&#34;&gt;&amp;#34;&amp;#34;&amp;#34;æ¸…ç†æ–‡æœ¬å†…å®¹&amp;#34;&amp;#34;&amp;#34;&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;ow&#34;&gt;not&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;text&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
            &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;

        &lt;span class=&#34;c1&#34;&gt;# ç§»é™¤å¤šä½™çš„ç©ºæ ¼å’Œæ¢è¡Œ&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;text&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34; &amp;#34;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;join&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;text&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;split&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;())&lt;/span&gt;
        &lt;span class=&#34;c1&#34;&gt;# æˆªæ–­è¶…é•¿æ–‡æœ¬&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;text&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[:&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;8000&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;len&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;text&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;8000&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;else&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;text&lt;/span&gt;

    &lt;span class=&#34;k&#34;&gt;def&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;load_single_file&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;file_path&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;str&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;file_type&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;str&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Optional&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;List&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]:&lt;/span&gt;
        &lt;span class=&#34;s2&#34;&gt;&amp;#34;&amp;#34;&amp;#34;åŠ è½½å•ä¸ªæ–‡ä»¶&amp;#34;&amp;#34;&amp;#34;&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;try&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
            &lt;span class=&#34;c1&#34;&gt;# è·å–åˆé€‚çš„åŠ è½½å™¨&lt;/span&gt;
            &lt;span class=&#34;n&#34;&gt;loader_class&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;loader_mapping&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;get&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;file_type&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;lower&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(),&lt;/span&gt; &lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;loader_mapping&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;default&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;])&lt;/span&gt;

            &lt;span class=&#34;c1&#34;&gt;# ç‰¹æ®Šå¤„ç†ï¼šæ–‡æœ¬æ–‡ä»¶éœ€è¦æŒ‡å®šç¼–ç &lt;/span&gt;
            &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;file_type&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;lower&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;txt&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
                &lt;span class=&#34;n&#34;&gt;loader&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;loader_class&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;file_path&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;encoding&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;utf-8&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
            &lt;span class=&#34;k&#34;&gt;else&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
                &lt;span class=&#34;n&#34;&gt;loader&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;loader_class&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;file_path&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;

            &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;loader&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;load&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;except&lt;/span&gt; &lt;span class=&#34;ne&#34;&gt;Exception&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;as&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;e&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
            &lt;span class=&#34;n&#34;&gt;logger&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;error&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;sa&#34;&gt;f&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;åŠ è½½æ–‡ä»¶ &lt;/span&gt;&lt;span class=&#34;si&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;file_path&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt; æ—¶å‡ºé”™: &lt;/span&gt;&lt;span class=&#34;si&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;str&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;e&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
            &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;None&lt;/span&gt;

    &lt;span class=&#34;k&#34;&gt;def&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;split_documents&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;documents&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;List&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;List&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
        &lt;span class=&#34;s2&#34;&gt;&amp;#34;&amp;#34;&amp;#34;åˆ†å‰²æ–‡æ¡£&amp;#34;&amp;#34;&amp;#34;&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;ow&#34;&gt;not&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;documents&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
            &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[]&lt;/span&gt;

        &lt;span class=&#34;k&#34;&gt;try&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
            &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;text_splitter&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;split_documents&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;documents&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;except&lt;/span&gt; &lt;span class=&#34;ne&#34;&gt;Exception&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;as&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;e&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
            &lt;span class=&#34;n&#34;&gt;logger&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;error&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;sa&#34;&gt;f&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;åˆ†å‰²æ–‡æ¡£æ—¶å‡ºé”™: &lt;/span&gt;&lt;span class=&#34;si&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;str&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;e&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
            &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;documents&lt;/span&gt;  &lt;span class=&#34;c1&#34;&gt;# å¦‚æœåˆ†å‰²å¤±è´¥ï¼Œè¿”å›åŸå§‹æ–‡æ¡£&lt;/span&gt;


    &lt;span class=&#34;k&#34;&gt;def&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;load_files&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;file_paths&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;List&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;str&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;],&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;file_type&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;str&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;List&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
        &lt;span class=&#34;s2&#34;&gt;&amp;#34;&amp;#34;&amp;#34;åŠ è½½å¹¶å¤„ç†å¤šä¸ªæ–‡ä»¶&amp;#34;&amp;#34;&amp;#34;&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;all_documents&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[]&lt;/span&gt;

        &lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;file_path&lt;/span&gt; &lt;span class=&#34;ow&#34;&gt;in&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;file_paths&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
            &lt;span class=&#34;k&#34;&gt;try&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
                &lt;span class=&#34;n&#34;&gt;logger&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;info&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;sa&#34;&gt;f&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;æ­£åœ¨å¤„ç†æ–‡ä»¶: &lt;/span&gt;&lt;span class=&#34;si&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;file_path&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
                &lt;span class=&#34;n&#34;&gt;documents&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;load_single_file&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;file_path&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;file_type&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
                &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;documents&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
                    &lt;span class=&#34;n&#34;&gt;split_docs&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;split_documents&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;documents&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
                    &lt;span class=&#34;n&#34;&gt;all_documents&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;extend&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;split_docs&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
            &lt;span class=&#34;k&#34;&gt;except&lt;/span&gt; &lt;span class=&#34;ne&#34;&gt;Exception&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;as&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;e&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
                &lt;span class=&#34;n&#34;&gt;logger&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;error&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;sa&#34;&gt;f&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;å¤„ç†æ–‡ä»¶ &lt;/span&gt;&lt;span class=&#34;si&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;file_path&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt; æ—¶å‡ºé”™: &lt;/span&gt;&lt;span class=&#34;si&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;str&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;e&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
                &lt;span class=&#34;k&#34;&gt;continue&lt;/span&gt;

        &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;all_documents&lt;/span&gt;


&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;vm&#34;&gt;__name__&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;__main__&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
    &lt;span class=&#34;c1&#34;&gt;# files = [&amp;#34;D:\work\å®‰æœå·¥ä½œ\å®‰æœèµ„æ–™\ç¬¬2ç¯‡ï¼šLinuxå…¥ä¾µæ’æŸ¥.pdf&amp;#34;,&amp;#34;D:\work\å®‰æœå·¥ä½œ\å®‰æœèµ„æ–™\Webå®‰å…¨å¼€å‘æŒ‡å— ç”µå­ç‰ˆ.pdf&amp;#34;]&lt;/span&gt;
    &lt;span class=&#34;c1&#34;&gt;# document_processor = Knowledge()&lt;/span&gt;
    &lt;span class=&#34;c1&#34;&gt;# documents = document_processor.load_files(files, &amp;#34;pdf&amp;#34;)&lt;/span&gt;
    &lt;span class=&#34;c1&#34;&gt;# print(documents)&lt;/span&gt;
    &lt;span class=&#34;c1&#34;&gt;# #æ‰¹é‡å†™å…¥&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;config&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Config&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;conf/config.yml&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;chromadb&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ChromaDB&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;config&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ModelType&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;QWEN&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    &lt;span class=&#34;c1&#34;&gt;# chromadb.add(documents)&lt;/span&gt;
    &lt;span class=&#34;c1&#34;&gt;# # å‘é‡æ•°æ®åº“æŸ¥è¯¢&lt;/span&gt;
    &lt;span class=&#34;c1&#34;&gt;# query = &amp;#34;å·²ç›‘å¬ç«¯â¼ &amp;#34;&lt;/span&gt;
    &lt;span class=&#34;c1&#34;&gt;# docs = chromadb.query(query)&lt;/span&gt;
    &lt;span class=&#34;c1&#34;&gt;# for doc in docs:&lt;/span&gt;
    &lt;span class=&#34;c1&#34;&gt;#     print(doc)&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;retriever&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;chromadb&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;as_retriever&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;search_kwargs&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;k&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;3&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;})&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;tool&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;create_retriever_tool&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;retriever&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;çŸ¥è¯†åº“æ£€ç´¢&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;description&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;ä»çŸ¥è¯†åº“ä¸­æ£€ç´¢ç›¸å…³ä¿¡æ¯æ¥å›ç­”é—®é¢˜&amp;#34;&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ul&gt;
&lt;li&gt;chromaå‘é‡æ•°æ®åº“ä»£ç ç¤ºä¾‹&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# chromaå‘é‡æ•°æ®åº“&lt;/span&gt;
&lt;span class=&#34;kn&#34;&gt;from&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;chromadb&lt;/span&gt; &lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;HttpClient&lt;/span&gt;
&lt;span class=&#34;kn&#34;&gt;from&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;langchain_chroma&lt;/span&gt; &lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Chroma&lt;/span&gt;
&lt;span class=&#34;kn&#34;&gt;from&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;langchain_community.embeddings&lt;/span&gt; &lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;DashScopeEmbeddings&lt;/span&gt;

&lt;span class=&#34;kn&#34;&gt;from&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;config.config&lt;/span&gt; &lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Config&lt;/span&gt;
&lt;span class=&#34;kn&#34;&gt;from&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;enums.model_enums&lt;/span&gt; &lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ModelType&lt;/span&gt;


&lt;span class=&#34;k&#34;&gt;class&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;ChromaDB&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;def&lt;/span&gt; &lt;span class=&#34;fm&#34;&gt;__init__&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;config&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Config&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;model_type&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ModelType&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt;
        &lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;config&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;config&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;try&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
            &lt;span class=&#34;n&#34;&gt;client&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;HttpClient&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;host&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;config&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;chroma_config&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;get&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;host&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;),&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;port&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;config&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;chroma_config&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;get&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;port&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;))&lt;/span&gt;

            &lt;span class=&#34;n&#34;&gt;embedding&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;DashScopeEmbeddings&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;
                &lt;span class=&#34;n&#34;&gt;model&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;config&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;model_config&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;model_type&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;get&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;embeddingModelName&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;),&lt;/span&gt;
                &lt;span class=&#34;n&#34;&gt;dashscope_api_key&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;config&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;model_config&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;model_type&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;get&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;apiKey&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
            &lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;

            &lt;span class=&#34;n&#34;&gt;db&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Chroma&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;
                &lt;span class=&#34;n&#34;&gt;collection_name&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;config&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;chroma_config&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;get&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;collection_name&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;),&lt;/span&gt;
                &lt;span class=&#34;n&#34;&gt;client&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;client&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
                &lt;span class=&#34;n&#34;&gt;embedding_function&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;embedding&lt;/span&gt;  &lt;span class=&#34;c1&#34;&gt;# ä¼ å…¥åµŒå…¥å‡½æ•°&lt;/span&gt;
            &lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
            &lt;span class=&#34;n&#34;&gt;db&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;get&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;  &lt;span class=&#34;c1&#34;&gt;# å°è¯•è®¿é—®é›†åˆéªŒè¯è¿æ¥&lt;/span&gt;
            &lt;span class=&#34;nb&#34;&gt;print&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;è¿æ¥å‘é‡æ•°æ®åº“æˆåŠŸ..&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
            &lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;db&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;db&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;except&lt;/span&gt; &lt;span class=&#34;ne&#34;&gt;Exception&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;as&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;e&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
            &lt;span class=&#34;c1&#34;&gt;# å¼‚å¸¸å¤„ç†&lt;/span&gt;
            &lt;span class=&#34;k&#34;&gt;raise&lt;/span&gt; &lt;span class=&#34;ne&#34;&gt;Exception&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;sa&#34;&gt;f&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;é“¾æ¥å‘é‡æ•°æ®åº“å¤±è´¥: &lt;/span&gt;&lt;span class=&#34;si&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;str&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;e&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;, è¯·æ£€æŸ¥é…ç½®ä¿¡æ¯&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;kn&#34;&gt;from&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;e&lt;/span&gt;

    &lt;span class=&#34;k&#34;&gt;def&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;add&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;documents&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt;
        &lt;span class=&#34;c1&#34;&gt;# æ–°å¢ï¼šæŒ‰APIé™åˆ¶æ‹†åˆ†æ‰¹æ¬¡ï¼ˆæ¯æ‰¹æœ€å¤š10ä¸ªæ–‡æ¡£ï¼‰&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;batch_size&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;10&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;i&lt;/span&gt; &lt;span class=&#34;ow&#34;&gt;in&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;range&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;len&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;documents&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;),&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;batch_size&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt;
            &lt;span class=&#34;n&#34;&gt;batch&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;documents&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;batch_size&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;  &lt;span class=&#34;c1&#34;&gt;# æˆªå–æ‰¹æ¬¡æ–‡æ¡£&lt;/span&gt;
            &lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;db&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;add_documents&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;batch&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;  &lt;span class=&#34;c1&#34;&gt;# åˆ†æ‰¹æ·»åŠ &lt;/span&gt;
            &lt;span class=&#34;nb&#34;&gt;print&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;sa&#34;&gt;f&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;å·²æ·»åŠ ç¬¬ &lt;/span&gt;&lt;span class=&#34;si&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;//&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;batch_size&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt; æ‰¹æ–‡æ¡£ï¼Œå…± &lt;/span&gt;&lt;span class=&#34;si&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;len&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;batch&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt; ä¸ª&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
            &lt;span class=&#34;c1&#34;&gt;# æ–°å¢ï¼šæ·»åŠ æ–‡æ¡£åï¼Œåˆ·æ–°ç´¢å¼•&lt;/span&gt;

    &lt;span class=&#34;k&#34;&gt;def&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;query&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;query&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt;
        &lt;span class=&#34;c1&#34;&gt;# æŸ¥è¯¢æ–‡æ¡£&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;docs&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;db&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;similarity_search&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;query&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;docs&lt;/span&gt;

    &lt;span class=&#34;k&#34;&gt;def&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;delete&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;document_id&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt;
        &lt;span class=&#34;c1&#34;&gt;# åˆ é™¤æ–‡æ¡£&lt;/span&gt;
        &lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;db&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;delete&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;document_id&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
        &lt;span class=&#34;nb&#34;&gt;print&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;sa&#34;&gt;f&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;å·²åˆ é™¤æ–‡æ¡£ ID: &lt;/span&gt;&lt;span class=&#34;si&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;document_id&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;

    &lt;span class=&#34;k&#34;&gt;def&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;update&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;document_id&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;doc&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt;
        &lt;span class=&#34;c1&#34;&gt;# æ›´æ–°æ–‡æ¡£&lt;/span&gt;
        &lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;db&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;update_document&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;document_id&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;doc&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
        &lt;span class=&#34;nb&#34;&gt;print&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;sa&#34;&gt;f&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;å·²æ›´æ–°æ–‡æ¡£ ID: &lt;/span&gt;&lt;span class=&#34;si&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;document_id&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;

    &lt;span class=&#34;k&#34;&gt;def&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;list&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt;
        &lt;span class=&#34;c1&#34;&gt;# åˆ—å‡ºæ‰€æœ‰æ–‡æ¡£&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;db&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;get&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;

    &lt;span class=&#34;k&#34;&gt;def&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;delete_all&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt;
        &lt;span class=&#34;c1&#34;&gt;# åˆ é™¤æ‰€æœ‰æ–‡æ¡£&lt;/span&gt;
        &lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;db&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;delete_collection&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
        &lt;span class=&#34;nb&#34;&gt;print&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;å·²åˆ é™¤æ‰€æœ‰æ–‡æ¡£&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;

    &lt;span class=&#34;k&#34;&gt;def&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;get_id&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;document_id&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;db&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;get&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;document_id&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;

    &lt;span class=&#34;k&#34;&gt;def&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;as_retriever&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;search_kwargs&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;db&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;as_retriever&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;search_kwargs&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;search_kwargs&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;

    &lt;span class=&#34;c1&#34;&gt;# def db(self):&lt;/span&gt;
    &lt;span class=&#34;c1&#34;&gt;#     return self.db&lt;/span&gt;


&lt;span class=&#34;c1&#34;&gt;# if __name__ == &amp;#39;__main__&amp;#39;:&lt;/span&gt;
&lt;span class=&#34;c1&#34;&gt;#     config = Config(&amp;#39;../conf/config.yml&amp;#39;)&lt;/span&gt;
&lt;span class=&#34;c1&#34;&gt;#     chromadb = ChromaDB(config, ModelType.QWEN)&lt;/span&gt;
&lt;span class=&#34;c1&#34;&gt;#     docs = chromadb.list()&lt;/span&gt;
&lt;span class=&#34;c1&#34;&gt;#     print(docs)&lt;/span&gt;
&lt;span class=&#34;c1&#34;&gt;#     print(chromadb.get_id(&amp;#34;0f506577-1db5-42fb-b70d-fe77fb7fe173&amp;#34;))&lt;/span&gt;


&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;äº”ä»£ç ä»“åº“è·¯å¾„&#34;&gt;äº”ã€ä»£ç ä»“åº“è·¯å¾„&lt;/h2&gt;
&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;https://github.com/zcj-git520/AiLargeModel&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;zcj-git520/AiLargeModel: å¤§æ¨¡å‹åº”ç”¨å¼€å‘å­¦ä¹ &lt;/a&gt;&lt;/p&gt;
</description>
        </item>
        <item>
        <title>LangChain è‡ªå®šä¹‰å·¥å…·</title>
        <link>https://zcj-git520.github.io/p/langchain-%E8%87%AA%E5%AE%9A%E4%B9%89%E5%B7%A5%E5%85%B7/</link>
        <pubDate>Tue, 25 Mar 2025 22:00:38 +0800</pubDate>
        
        <guid>https://zcj-git520.github.io/p/langchain-%E8%87%AA%E5%AE%9A%E4%B9%89%E5%B7%A5%E5%85%B7/</guid>
        <description>&lt;img src="https://zcj-git520.github.io/p/langchain-%E8%87%AA%E5%AE%9A%E4%B9%89%E5%B7%A5%E5%85%B7/1.png" alt="Featured image of post LangChain è‡ªå®šä¹‰å·¥å…·" /&gt;&lt;h1 id=&#34;langchain-è‡ªå®šä¹‰å·¥å…·&#34;&gt;LangChain è‡ªå®šä¹‰å·¥å…·&lt;/h1&gt;
&lt;h2 id=&#34;å¼•è¨€&#34;&gt;å¼•è¨€&lt;/h2&gt;
&lt;p&gt;åœ¨æ„å»º LangChain ä»£ç†æ—¶ï¼Œå·¥å…·(Tools)æ˜¯æ ¸å¿ƒç»„ä»¶ä¹‹ä¸€ã€‚å·¥å…·å…è®¸ä»£ç†ä¸å¤–éƒ¨ä¸–ç•Œäº¤äº’ï¼Œæ‰§è¡Œç‰¹å®šä»»åŠ¡ã€‚æœ¬æ–‡å°†æ·±å…¥æ¢è®¨å¦‚ä½•åœ¨ LangChain ä¸­åˆ›å»ºå’Œä½¿ç”¨è‡ªå®šä¹‰å·¥å…·ï¼ŒåŒ…æ‹¬å†…ç½®å·¥å…·çš„ä½¿ç”¨å’Œè‡ªå®šä¹‰å·¥å…·çš„å¤šç§å®ç°æ–¹å¼ã€‚&lt;/p&gt;
&lt;h2 id=&#34;å·¥å…·çš„åŸºæœ¬ç»„æˆ&#34;&gt;å·¥å…·çš„åŸºæœ¬ç»„æˆ&lt;/h2&gt;
&lt;p&gt;æ¯ä¸ªå·¥å…·éƒ½åŒ…å«å‡ ä¸ªå…³é”®ç»„ä»¶ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;name&lt;/strong&gt; (str): å¿…éœ€ä¸”å¿…é¡»åœ¨å·¥å…·é›†ä¸­å”¯ä¸€&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;description&lt;/strong&gt; (str): å¯é€‰ä½†å»ºè®®æä¾›ï¼Œä»£ç†ç”¨å®ƒæ¥å†³å®šå¦‚ä½•ä½¿ç”¨å·¥å…·&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;return_direct&lt;/strong&gt; (bool): é»˜è®¤ä¸º False&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;args_schema&lt;/strong&gt; (Pydantic BaseModel): å¯é€‰ä½†å»ºè®®æä¾›ï¼Œå¯ç”¨äºéªŒè¯å‚æ•°æˆ–æä¾›few-shotç¤ºä¾‹&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;å†…ç½®å·¥å…·çš„ä½¿ç”¨&#34;&gt;å†…ç½®å·¥å…·çš„ä½¿ç”¨&lt;/h2&gt;
&lt;p&gt;LangChain æä¾›äº†è®¸å¤šå†…ç½®å·¥å…·ï¼Œè¯·è®¿é—®&lt;a class=&#34;link&#34; href=&#34;http://www.aidoczh.com/langchain/v0.2/docs/integrations/tools/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;å·¥å…·é›†æˆ&lt;/a&gt;æŸ¥çœ‹å¯ç”¨å·¥å…·åˆ—è¡¨ï¼Œåœ¨ä½¿ç”¨ç¬¬ä¸‰æ–¹å·¥å…·æ—¶ï¼Œè¯·ç¡®ä¿æ‚¨äº†è§£å·¥å…·çš„å·¥ä½œåŸç†ã€æƒé™æƒ…å†µï¼š&lt;/p&gt;
&lt;h3 id=&#34;ç»´åŸºç™¾ç§‘æŸ¥è¯¢å·¥å…·&#34;&gt;ç»´åŸºç™¾ç§‘æŸ¥è¯¢å·¥å…·&lt;/h3&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span class=&#34;k&#34;&gt;def&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;get_wikipedia&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;query&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;api_wrapper&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;WikipediaAPIWrapper&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;top_k_results&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;doc_content_chars_max&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;100&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;tool&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;WikipediaQueryRun&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;api_wrapper&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;api_wrapper&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;result&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;tool&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;run&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;query&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;result&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;google-æ–‡å­—è½¬è¯­éŸ³å·¥å…·&#34;&gt;Google æ–‡å­—è½¬è¯­éŸ³å·¥å…·&lt;/h3&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span class=&#34;k&#34;&gt;def&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;google_tts&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;text&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;tts&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;GoogleCloudTextToSpeechTool&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;speech_file&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;tts&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;run&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;text&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;speech_file&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;è‡ªå®šä¹‰å·¥å…·çš„å®ç°æ–¹å¼&#34;&gt;è‡ªå®šä¹‰å·¥å…·çš„å®ç°æ–¹å¼&lt;/h2&gt;
&lt;h3 id=&#34;1-ä½¿ç”¨-tool-è£…é¥°å™¨&#34;&gt;1. ä½¿ç”¨ @tool è£…é¥°å™¨&lt;/h3&gt;
&lt;p&gt;è¿™æ˜¯å®šä¹‰è‡ªå®šä¹‰å·¥å…·æœ€ç®€å•çš„æ–¹å¼ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span class=&#34;kn&#34;&gt;from&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;langchain_core.tools&lt;/span&gt; &lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;tool&lt;/span&gt;

&lt;span class=&#34;nd&#34;&gt;@tool&lt;/span&gt;
&lt;span class=&#34;k&#34;&gt;def&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;search_city_tool&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;city&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;str&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;str&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
    &lt;span class=&#34;s2&#34;&gt;&amp;#34;&amp;#34;&amp;#34;æœç´¢åŸå¸‚ä¿¡æ¯&amp;#34;&amp;#34;&amp;#34;&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;url&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;sa&#34;&gt;f&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;https://api.songzixian.com/api/china-city?dataSource=LOCAL_CHINA_CITY&amp;amp;district=&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;city&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;response&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;requests&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;get&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;url&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;response&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;status_code&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;200&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;response&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;json&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;else&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;raise&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ToolException&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;sa&#34;&gt;f&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;é”™è¯¯ï¼š&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;city&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;ä¸å­˜åœ¨ï¼Œè·å–åŸå¸‚æ•°æ®å¤±è´¥&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ä½¿ç”¨è¯´æ˜ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å‡½æ•°æ–‡æ¡£å­—ç¬¦ä¸²å°†è‡ªåŠ¨ç”¨ä½œå·¥å…·æè¿°&lt;/li&gt;
&lt;li&gt;ç±»å‹æç¤ºç”¨äºå‚æ•°éªŒè¯&lt;/li&gt;
&lt;li&gt;å¯ä»¥æŠ›å‡º ToolException æ¥å¤„ç†é”™è¯¯&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;2-ä½¿ç”¨-structuredtoolfrom_function&#34;&gt;2. ä½¿ç”¨ StructuredTool.from_function&lt;/h3&gt;
&lt;p&gt;è¿™ç§æ–¹å¼æä¾›äº†æ›´å¤šé…ç½®é€‰é¡¹ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span class=&#34;kn&#34;&gt;from&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;langchain_core.tools&lt;/span&gt; &lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;StructuredTool&lt;/span&gt;

&lt;span class=&#34;k&#34;&gt;def&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;get_city_by_ip&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ip&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;str&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt;
    &lt;span class=&#34;s2&#34;&gt;&amp;#34;&amp;#34;&amp;#34;æ ¹æ®IPåœ°å€è·å–åŸå¸‚ä¿¡æ¯&amp;#34;&amp;#34;&amp;#34;&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;url&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;sa&#34;&gt;f&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;https://whois.pconline.com.cn/ipJson.jsp?ip=&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ip&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;amp;json=true&amp;#34;&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;response&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;requests&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;get&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;url&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;try&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;response&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;status_code&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;200&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
            &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;response&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;json&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;except&lt;/span&gt; &lt;span class=&#34;ne&#34;&gt;Exception&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;as&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;e&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;raise&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ToolException&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;sa&#34;&gt;f&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;é”™è¯¯ï¼šipè·å–åŸå¸‚æ•°æ®å¤±è´¥ï¼Œ&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ip&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;

&lt;span class=&#34;k&#34;&gt;def&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;ip_to_city_tool&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ip&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;str&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;calculator&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;StructuredTool&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;from_function&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;func&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;get_city_by_ip&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;  
        &lt;span class=&#34;n&#34;&gt;handle_tool_error&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;ipè·å–åŸå¸‚æ•°æ®å¤±è´¥&amp;#34;&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;try&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;calculator&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;invoke&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;({&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;ip&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ip&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;})&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;calculator&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;except&lt;/span&gt; &lt;span class=&#34;ne&#34;&gt;Exception&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;as&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;e&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
        &lt;span class=&#34;nb&#34;&gt;print&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;e&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ä¼˜åŠ¿ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å¯ä»¥è‡ªå®šä¹‰é”™è¯¯å¤„ç†&lt;/li&gt;
&lt;li&gt;æ”¯æŒæ›´å¤æ‚çš„å‚æ•°é…ç½®&lt;/li&gt;
&lt;li&gt;å¯ä»¥æ·»åŠ é¢å¤–çš„å…ƒæ•°æ®&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;å·¥å…·çš„é”™è¯¯å¤„ç†&#34;&gt;å·¥å…·çš„é”™è¯¯å¤„ç†&lt;/h2&gt;
&lt;p&gt;è‰¯å¥½çš„é”™è¯¯å¤„ç†å¯¹å·¥å…·è‡³å…³é‡è¦ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span class=&#34;nd&#34;&gt;@tool&lt;/span&gt;
&lt;span class=&#34;k&#34;&gt;def&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;search_weather_tool&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;city_code&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;str&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;str&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
    &lt;span class=&#34;s2&#34;&gt;&amp;#34;&amp;#34;&amp;#34;æœç´¢å¤©æ°”ä¿¡æ¯&amp;#34;&amp;#34;&amp;#34;&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;url&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;sa&#34;&gt;f&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;http://t.weather.itboy.net/api/weather/city/&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;city_code&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;response&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;requests&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;get&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;url&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;response&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;status_code&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;200&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;response&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;json&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;else&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;raise&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ToolException&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;sa&#34;&gt;f&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;é”™è¯¯ï¼š&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;city_code&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;ä¸å­˜åœ¨ï¼Œè·å–åŸå¸‚å¤©æ°”æ•°æ®æ•°æ®å¤±è´¥&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;æœ€ä½³å®è·µï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ä½¿ç”¨ ToolException æŠ›å‡ºæ˜ç¡®çš„é”™è¯¯&lt;/li&gt;
&lt;li&gt;æä¾›æœ‰ç”¨çš„é”™è¯¯ä¿¡æ¯&lt;/li&gt;
&lt;li&gt;è€ƒè™‘æ·»åŠ é‡è¯•é€»è¾‘&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;å®é™…åº”ç”¨ç¤ºä¾‹&#34;&gt;å®é™…åº”ç”¨ç¤ºä¾‹&lt;/h2&gt;
&lt;h3 id=&#34;åŸå¸‚ä¿¡æ¯æŸ¥è¯¢ç³»ç»Ÿ&#34;&gt;åŸå¸‚ä¿¡æ¯æŸ¥è¯¢ç³»ç»Ÿ&lt;/h3&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# è·å–åŸå¸‚ä»£ç &lt;/span&gt;
&lt;span class=&#34;n&#34;&gt;city_data&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;search_city_tool&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;åŒ—äº¬&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;span class=&#34;n&#34;&gt;city_code&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;city_data&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;code&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;

&lt;span class=&#34;c1&#34;&gt;# è·å–å¤©æ°”ä¿¡æ¯&lt;/span&gt;
&lt;span class=&#34;n&#34;&gt;weather_data&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;search_weather_tool&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;city_code&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;

&lt;span class=&#34;c1&#34;&gt;# è½¬æ¢ä¸ºè¯­éŸ³&lt;/span&gt;
&lt;span class=&#34;n&#34;&gt;speech_file&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;google_tts&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;sa&#34;&gt;f&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;å½“å‰å¤©æ°”ï¼š&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;weather_data&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;weather&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;å·¥å…·çš„é«˜çº§ç”¨æ³•&#34;&gt;å·¥å…·çš„é«˜çº§ç”¨æ³•&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;å‚æ•°éªŒè¯&lt;/strong&gt;ï¼šä½¿ç”¨ Pydantic æ¨¡å‹éªŒè¯è¾“å…¥å‚æ•°&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Few-shot ç¤ºä¾‹&lt;/strong&gt;ï¼šåœ¨ args_schema ä¸­æ·»åŠ ç¤ºä¾‹&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å·¥å…·ç»„åˆ&lt;/strong&gt;ï¼šå°†å¤šä¸ªå·¥å…·ç»„åˆæˆå·¥å…·åŒ…&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¼‚æ­¥æ”¯æŒ&lt;/strong&gt;ï¼šå®ç°å¼‚æ­¥ç‰ˆæœ¬çš„å·¥å…·&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&#34;æ€§èƒ½ä¼˜åŒ–å»ºè®®&#34;&gt;æ€§èƒ½ä¼˜åŒ–å»ºè®®&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;ä¸ºç½‘ç»œè¯·æ±‚æ·»åŠ è¶…æ—¶è®¾ç½®&lt;/li&gt;
&lt;li&gt;å®ç°ç¼“å­˜æœºåˆ¶&lt;/li&gt;
&lt;li&gt;è€ƒè™‘æ‰¹é‡å¤„ç†è¯·æ±‚&lt;/li&gt;
&lt;li&gt;ç›‘æ§å·¥å…·ä½¿ç”¨æƒ…å†µ&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&#34;æ€»ç»“&#34;&gt;æ€»ç»“&lt;/h2&gt;
&lt;p&gt;LangChain çš„å·¥å…·ç³»ç»Ÿæä¾›äº†å¼ºå¤§çš„æ‰©å±•èƒ½åŠ›ï¼Œå…è®¸å¼€å‘è€…ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;è½»æ¾é›†æˆç°æœ‰APIå’ŒæœåŠ¡&lt;/li&gt;
&lt;li&gt;æ„å»ºå¤æ‚çš„ä»£ç†å·¥ä½œæµ&lt;/li&gt;
&lt;li&gt;å®ç°è‡ªå®šä¹‰ä¸šåŠ¡é€»è¾‘&lt;/li&gt;
&lt;li&gt;å¤„ç†å„ç§è¾¹ç¼˜æƒ…å†µ&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;é€šè¿‡åˆç†è®¾è®¡å·¥å…·ï¼Œå¯ä»¥å¤§å¤§å¢å¼ºä»£ç†çš„èƒ½åŠ›å’Œå¯é æ€§&lt;/p&gt;
&lt;h2 id=&#34;ä»£ç ç¤ºä¾‹&#34;&gt;ä»£ç ç¤ºä¾‹&lt;/h2&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# è‡ªå®šä¹‰å·¥å…·è°ƒç”¨&lt;/span&gt;
&lt;span class=&#34;s2&#34;&gt;&amp;#34;&amp;#34;&amp;#34;
&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;å½“æ„å»ºè‡ªå·±çš„ä»£ç†æ—¶ï¼Œæ‚¨éœ€è¦ä¸ºå…¶æä¾›ä¸€ç»„å·¥å…·åˆ—è¡¨ï¼Œä»£ç†å¯ä»¥ä½¿ç”¨è¿™äº›å·¥å…·ã€‚é™¤äº†è°ƒç”¨çš„å®é™…å‡½æ•°ä¹‹å¤–ï¼Œå·¥å…·ç”±å‡ ä¸ªç»„ä»¶ç»„æˆï¼š
&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;nameï¼ˆstrï¼‰ï¼Œæ˜¯å¿…éœ€çš„ï¼Œå¹¶ä¸”åœ¨æä¾›ç»™ä»£ç†çš„å·¥å…·é›†ä¸­å¿…é¡»æ˜¯å”¯ä¸€çš„
&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;descriptionï¼ˆstrï¼‰ï¼Œæ˜¯å¯é€‰çš„ä½†å»ºè®®çš„ï¼Œå› ä¸ºä»£ç†ä½¿ç”¨å®ƒæ¥ç¡®å®šå·¥å…·çš„ä½¿ç”¨æ–¹å¼
&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;return_directï¼ˆboolï¼‰ï¼Œé»˜è®¤ä¸º False
&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;args_schemaï¼ˆPydantic BaseModelï¼‰ï¼Œæ˜¯å¯é€‰çš„ä½†å»ºè®®çš„ï¼Œå¯ä»¥ç”¨äºæä¾›æ›´å¤šä¿¡æ¯ï¼ˆä¾‹å¦‚ï¼Œfew-shot ç¤ºä¾‹ï¼‰æˆ–ç”¨äºéªŒè¯é¢„æœŸå‚æ•°ã€‚
&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;&amp;#34;&amp;#34;&lt;/span&gt;
&lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;requests&lt;/span&gt;
&lt;span class=&#34;kn&#34;&gt;from&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;charset_normalizer.api&lt;/span&gt; &lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;handler&lt;/span&gt;
&lt;span class=&#34;kn&#34;&gt;from&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;langchain_community.tools&lt;/span&gt; &lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;WikipediaQueryRun&lt;/span&gt;
&lt;span class=&#34;kn&#34;&gt;from&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;langchain_community.utilities&lt;/span&gt; &lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;WikipediaAPIWrapper&lt;/span&gt;
&lt;span class=&#34;kn&#34;&gt;from&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;langchain_community.tools&lt;/span&gt; &lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;GoogleCloudTextToSpeechTool&lt;/span&gt;
&lt;span class=&#34;kn&#34;&gt;from&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;langchain_core.tools&lt;/span&gt; &lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;tool&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;StructuredTool&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ToolException&lt;/span&gt;

&lt;span class=&#34;s2&#34;&gt;&amp;#34;&amp;#34;&amp;#34;
&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;å†…ç½®å·¥å…·åŒ…
&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;&amp;#34;&amp;#34;&lt;/span&gt;
&lt;span class=&#34;k&#34;&gt;def&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;get_wikipedia&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;query&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;api_wrapper&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;WikipediaAPIWrapper&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;top_k_results&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;doc_content_chars_max&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;100&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;tool&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;WikipediaQueryRun&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;api_wrapper&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;api_wrapper&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;result&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;tool&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;run&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;query&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;result&lt;/span&gt;

&lt;span class=&#34;k&#34;&gt;def&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;google_tts&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;text&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;tts&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;GoogleCloudTextToSpeechTool&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;speech_file&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;tts&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;run&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;text&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;speech_file&lt;/span&gt;

&lt;span class=&#34;s2&#34;&gt;&amp;#34;&amp;#34;&amp;#34;
&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;è‡ªå®šä¹‰å·¥å…·è°ƒç”¨
&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;&amp;#34;&amp;#34;&lt;/span&gt;
&lt;span class=&#34;c1&#34;&gt;# ä½¿ç”¨@toolè£…é¥°å™¨ -- å®šä¹‰è‡ªå®šä¹‰å·¥å…·çš„æœ€ç®€å•æ–¹å¼ã€‚&lt;/span&gt;
&lt;span class=&#34;nd&#34;&gt;@tool&lt;/span&gt;
&lt;span class=&#34;k&#34;&gt;def&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;search_city_tool&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;city&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;str&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;str&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
    &lt;span class=&#34;s2&#34;&gt;&amp;#34;&amp;#34;&amp;#34;æœç´¢åŸå¸‚ä¿¡æ¯&amp;#34;&amp;#34;&amp;#34;&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;url&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;sa&#34;&gt;f&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;https://api.songzixian.com/api/china-city?dataSource=LOCAL_CHINA_CITY&amp;amp;district=&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;city&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;response&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;requests&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;get&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;url&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;response&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;status_code&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;200&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;response&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;json&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;else&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;raise&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ToolException&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;sa&#34;&gt;f&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;é”™è¯¯ï¼š&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;city&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;ä¸å­˜åœ¨ï¼Œè·å–åŸå¸‚æ•°æ®å¤±è´¥&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;

&lt;span class=&#34;nd&#34;&gt;@tool&lt;/span&gt;
&lt;span class=&#34;k&#34;&gt;def&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;search_weather_tool&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;city_code&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;str&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;str&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
    &lt;span class=&#34;s2&#34;&gt;&amp;#34;&amp;#34;&amp;#34;æœç´¢å¤©æ°”ä¿¡æ¯&amp;#34;&amp;#34;&amp;#34;&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;url&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;sa&#34;&gt;f&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;http://t.weather.itboy.net/api/weather/city/&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;city_code&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;response&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;requests&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;get&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;url&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;response&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;status_code&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;200&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;response&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;json&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;else&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;raise&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ToolException&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;sa&#34;&gt;f&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;é”™è¯¯ï¼š&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;city_code&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;ä¸å­˜åœ¨ï¼Œè·å–åŸå¸‚å¤©æ°”æ•°æ®æ•°æ®å¤±è´¥&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
        &lt;span class=&#34;c1&#34;&gt;# return &amp;#34;&amp;#34;&lt;/span&gt;
&lt;span class=&#34;c1&#34;&gt;# StructuredTool.from_function ç±»æ–¹æ³•æä¾›äº†æ¯”@toolè£…é¥°å™¨æ›´å¤šçš„å¯é…ç½®æ€§ï¼Œè€Œæ— éœ€å¤ªå¤šé¢å¤–çš„ä»£ç ã€‚&lt;/span&gt;

&lt;span class=&#34;k&#34;&gt;def&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;get_city_by_ip&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ip&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;str&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt;
    &lt;span class=&#34;s2&#34;&gt;&amp;#34;&amp;#34;&amp;#34;
&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;    æ ¹æ®IPåœ°å€è·å–åŸå¸‚ä¿¡æ¯
&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;    &amp;#34;&amp;#34;&amp;#34;&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;url&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;sa&#34;&gt;f&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;https://whois.pconline.com.cn/ipJson.jsp?ip=&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ip&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;amp;json=true&amp;#34;&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;response&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;requests&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;get&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;url&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;try&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;response&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;status_code&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;200&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
            &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;response&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;json&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;except&lt;/span&gt; &lt;span class=&#34;ne&#34;&gt;Exception&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;as&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;e&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
        &lt;span class=&#34;c1&#34;&gt;# print(e)&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;raise&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ToolException&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;sa&#34;&gt;f&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;é”™è¯¯ï¼šipè·å–åŸå¸‚æ•°æ®å¤±è´¥ï¼Œ&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ip&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;

&lt;span class=&#34;k&#34;&gt;def&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;ip_to_city_tool&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ip&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;str&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;calculator&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;StructuredTool&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;from_function&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;func&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;get_city_by_ip&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;  &lt;span class=&#34;n&#34;&gt;handle_tool_error&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;ipè·å–åŸå¸‚æ•°æ®å¤±è´¥&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;try&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;calculator&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;invoke&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;({&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;ip&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ip&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;})&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;calculator&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;except&lt;/span&gt; &lt;span class=&#34;ne&#34;&gt;Exception&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;as&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;e&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
        &lt;span class=&#34;nb&#34;&gt;print&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;e&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;



&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;vm&#34;&gt;__name__&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;__main__&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
    &lt;span class=&#34;nb&#34;&gt;print&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;search_city_tool&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    &lt;span class=&#34;nb&#34;&gt;print&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;search_city_tool&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;description&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    &lt;span class=&#34;nb&#34;&gt;print&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;search_city_tool&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;args_schema&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    &lt;span class=&#34;nb&#34;&gt;print&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;search_city_tool&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;å°åŒ—11111&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;))&lt;/span&gt;
    &lt;span class=&#34;nb&#34;&gt;print&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;search_weather_tool&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;101260207&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;))&lt;/span&gt;

    &lt;span class=&#34;c1&#34;&gt;# print(ip_to_city_tool(&amp;#34;123.123.123&amp;#34;))&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;ä»£ç ä»“åº“è·¯å¾„&#34;&gt;ä»£ç ä»“åº“è·¯å¾„&lt;/h2&gt;
&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;https://github.com/zcj-git520/AiLargeModel&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;zcj-git520/AiLargeModel: å¤§æ¨¡å‹åº”ç”¨å¼€å‘å­¦ä¹ &lt;/a&gt;&lt;/p&gt;
</description>
        </item>
        <item>
        <title>LangChain å¤šæ¨¡æ€è¾“å…¥å¤„ç†</title>
        <link>https://zcj-git520.github.io/p/langchain-%E5%A4%9A%E6%A8%A1%E6%80%81%E8%BE%93%E5%85%A5%E5%A4%84%E7%90%86/</link>
        <pubDate>Tue, 25 Feb 2025 22:00:38 +0800</pubDate>
        
        <guid>https://zcj-git520.github.io/p/langchain-%E5%A4%9A%E6%A8%A1%E6%80%81%E8%BE%93%E5%85%A5%E5%A4%84%E7%90%86/</guid>
        <description>&lt;img src="https://zcj-git520.github.io/p/langchain-%E5%A4%9A%E6%A8%A1%E6%80%81%E8%BE%93%E5%85%A5%E5%A4%84%E7%90%86/1.png" alt="Featured image of post LangChain å¤šæ¨¡æ€è¾“å…¥å¤„ç†" /&gt;&lt;h1 id=&#34;langchain-å¤šæ¨¡æ€è¾“å…¥å¤„ç†&#34;&gt;LangChain å¤šæ¨¡æ€è¾“å…¥å¤„ç†&lt;/h1&gt;
&lt;h2 id=&#34;å¼•è¨€&#34;&gt;å¼•è¨€&lt;/h2&gt;
&lt;p&gt;éšç€å¤§æ¨¡å‹æŠ€æœ¯çš„å‘å±•ï¼Œå¤šæ¨¡æ€èƒ½åŠ›å·²æˆä¸ºAIåº”ç”¨çš„é‡è¦æ–¹å‘ã€‚LangChainæä¾›äº†å¼ºå¤§çš„å¤šæ¨¡æ€å¤„ç†èƒ½åŠ›ï¼Œå…è®¸å¼€å‘è€…å°†æ–‡æœ¬ã€å›¾åƒã€PDFç­‰å¤šç§è¾“å…¥ç±»å‹ç»“åˆä½¿ç”¨ã€‚æœ¬æ–‡å°†æ·±å…¥æ¢è®¨LangChainä¸­çš„å¤šæ¨¡æ€è¾“å…¥å¤„ç†æœºåˆ¶ã€‚&lt;/p&gt;
&lt;h2 id=&#34;å¤šæ¨¡æ€åŸºç¡€æ¦‚å¿µ&#34;&gt;å¤šæ¨¡æ€åŸºç¡€æ¦‚å¿µ&lt;/h2&gt;
&lt;p&gt;å¤šæ¨¡æ€(Multimodality)æ˜¯æŒ‡æ¨¡å‹èƒ½å¤ŸåŒæ—¶å¤„ç†å’Œç”Ÿæˆå¤šç§ç±»å‹çš„æ•°æ®ï¼ŒåŒ…æ‹¬ä½†ä¸é™äºï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æ–‡æœ¬(Text)&lt;/li&gt;
&lt;li&gt;å›¾åƒ(Image)&lt;/li&gt;
&lt;li&gt;éŸ³é¢‘(Audio)&lt;/li&gt;
&lt;li&gt;è§†é¢‘(Video)&lt;/li&gt;
&lt;li&gt;æ–‡æ¡£(Document)&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;langchainå¤šæ¨¡æ€æ¶æ„&#34;&gt;LangChainå¤šæ¨¡æ€æ¶æ„&lt;/h2&gt;
&lt;p&gt;LangChainçš„å¤šæ¨¡æ€å¤„ç†ä¸»è¦åŸºäºä»¥ä¸‹ç»„ä»¶ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;HumanMessage&lt;/code&gt;: æ‰¿è½½å¤šæ¨¡æ€å†…å®¹çš„æ ¸å¿ƒæ¶ˆæ¯ç±»&lt;/li&gt;
&lt;li&gt;å†…å®¹ç±»å‹æ ‡è¯†(typeå­—æ®µ): æ ‡è¯†ä¸åŒåª’ä½“ç±»å‹&lt;/li&gt;
&lt;li&gt;æ•°æ®æ¥æºæ ‡è¯†(source_typeå­—æ®µ): åŒºåˆ†æœ¬åœ°base64æˆ–URL&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;å¤šæ¨¡æ€è¾“å…¥å®ç°æ–¹å¼&#34;&gt;å¤šæ¨¡æ€è¾“å…¥å®ç°æ–¹å¼&lt;/h2&gt;
&lt;h3 id=&#34;1-åŸºäºbase64çš„æœ¬åœ°æ–‡ä»¶è¾“å…¥&#34;&gt;1. åŸºäºBase64çš„æœ¬åœ°æ–‡ä»¶è¾“å…¥&lt;/h3&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span class=&#34;k&#34;&gt;def&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;input_by_base64&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;prompt_txt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;image_data&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;type&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;try&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;message&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;HumanMessage&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;
            &lt;span class=&#34;n&#34;&gt;content&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;json&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;dumps&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;([&lt;/span&gt;
                &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;type&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;text&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;text&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;prompt_txt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;},&lt;/span&gt;
                &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;type&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;type&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;data&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;image_data&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;source_type&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;base64&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;},&lt;/span&gt;
            &lt;span class=&#34;p&#34;&gt;])&lt;/span&gt;
        &lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;china&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;model&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;qwen_llm&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;china&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;invoke&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;([&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;message&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;])&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;content&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;except&lt;/span&gt; &lt;span class=&#34;ne&#34;&gt;Exception&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;as&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;e&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
        &lt;span class=&#34;nb&#34;&gt;print&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;e&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ä½¿ç”¨åœºæ™¯ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å¤„ç†æœ¬åœ°å­˜å‚¨çš„å›¾ç‰‡ã€PDFç­‰æ–‡ä»¶&lt;/li&gt;
&lt;li&gt;éœ€è¦æ•°æ®éšç§ä¿æŠ¤çš„åœºæ™¯&lt;/li&gt;
&lt;li&gt;ç¦»çº¿åº”ç”¨ç¯å¢ƒ&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;2-åŸºäºurlçš„ç½‘ç»œèµ„æºè¾“å…¥&#34;&gt;2. åŸºäºURLçš„ç½‘ç»œèµ„æºè¾“å…¥&lt;/h3&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span class=&#34;k&#34;&gt;def&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;input_by_url&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;prompt_txt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;url&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;type&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;try&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;message&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;HumanMessage&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;
            &lt;span class=&#34;n&#34;&gt;content&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;json&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;dumps&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;([&lt;/span&gt;
                &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;type&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;text&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;text&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;prompt_txt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;},&lt;/span&gt;
                &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;type&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;type&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;data&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;url&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;source_type&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;url&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;},&lt;/span&gt;
            &lt;span class=&#34;p&#34;&gt;])&lt;/span&gt;
        &lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;china&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;model&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;qwen_llm&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;china&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;invoke&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;([&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;message&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;])&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;content&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;except&lt;/span&gt; &lt;span class=&#34;ne&#34;&gt;Exception&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;as&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;e&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
        &lt;span class=&#34;nb&#34;&gt;print&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;e&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ä½¿ç”¨åœºæ™¯ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å¤„ç†ç½‘ç»œä¸Šçš„å…¬å¼€èµ„æº&lt;/li&gt;
&lt;li&gt;éœ€è¦åŠ¨æ€åŠ è½½å†…å®¹çš„åœºæ™¯&lt;/li&gt;
&lt;li&gt;å‡å°‘æœ¬åœ°å­˜å‚¨å‹åŠ›çš„åº”ç”¨&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;æ–‡ä»¶ç±»å‹æ”¯æŒ&#34;&gt;æ–‡ä»¶ç±»å‹æ”¯æŒ&lt;/h2&gt;
&lt;p&gt;LangChainæ”¯æŒå¤šç§æ–‡ä»¶ç±»å‹ï¼Œå¸¸è§çš„æœ‰ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th style=&#34;text-align:left&#34;&gt;ç±»å‹&lt;/th&gt;
&lt;th style=&#34;text-align:left&#34;&gt;MIMEç±»å‹&lt;/th&gt;
&lt;th style=&#34;text-align:left&#34;&gt;æè¿°&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;å›¾ç‰‡&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;image/png, image/jpeg&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;æ”¯æŒå¸¸è§å›¾ç‰‡æ ¼å¼&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;PDF&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;application/pdf&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;æ”¯æŒPDFæ–‡æ¡£è§£æ&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;æ–‡æœ¬æ–‡ä»¶&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;text/plain&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;çº¯æ–‡æœ¬æ–‡ä»¶&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;Wordæ–‡æ¡£&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;application/msword&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;Microsoft Wordæ–‡æ¡£&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h2 id=&#34;å®ç”¨å·¥å…·å‡½æ•°&#34;&gt;å®ç”¨å·¥å…·å‡½æ•°&lt;/h2&gt;
&lt;h3 id=&#34;æœ¬åœ°æ–‡ä»¶è½¬base64&#34;&gt;æœ¬åœ°æ–‡ä»¶è½¬Base64&lt;/h3&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;base64&lt;/span&gt;

&lt;span class=&#34;k&#34;&gt;def&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;file_to_base64_by_local&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;file_path&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;with&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;open&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;file_path&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;rb&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;as&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;file&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;base64&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;b64encode&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;file&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;read&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;())&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;decode&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;utf-8&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;å›¾ç‰‡å¤„ç†å·¥å…·&#34;&gt;å›¾ç‰‡å¤„ç†å·¥å…·&lt;/h3&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span class=&#34;kn&#34;&gt;from&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;PIL&lt;/span&gt; &lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Image&lt;/span&gt;
&lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;io&lt;/span&gt;

&lt;span class=&#34;k&#34;&gt;def&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;process_image&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;image_data&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt;
    &lt;span class=&#34;c1&#34;&gt;# ä»base64è§£ç &lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;image_bytes&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;base64&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;b64decode&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;image_data&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;image&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Image&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;open&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;io&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;BytesIO&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;image_bytes&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;))&lt;/span&gt;
    &lt;span class=&#34;c1&#34;&gt;# è¿›è¡Œå„ç§å›¾åƒå¤„ç†...&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;å®é™…åº”ç”¨æ¡ˆä¾‹&#34;&gt;å®é™…åº”ç”¨æ¡ˆä¾‹&lt;/h2&gt;
&lt;h3 id=&#34;1-å›¾ç‰‡å†…å®¹æè¿°&#34;&gt;1. å›¾ç‰‡å†…å®¹æè¿°&lt;/h3&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span class=&#34;n&#34;&gt;image_path&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;path/to/image.png&amp;#34;&lt;/span&gt;
&lt;span class=&#34;n&#34;&gt;base64_code&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;images_util&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;image_to_base64_by_local&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;image_path&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;span class=&#34;n&#34;&gt;result&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;multimodal&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;input_by_base64&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;
    &lt;span class=&#34;s2&#34;&gt;&amp;#34;è¿™å¼ å›¾ç‰‡æè¿°äº†ä»€ä¹ˆ,ä¸­æ–‡æè¿°&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; 
    &lt;span class=&#34;n&#34;&gt;base64_code&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; 
    &lt;span class=&#34;s2&#34;&gt;&amp;#34;image/png&amp;#34;&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;2-pdfæ–‡æ¡£æ‘˜è¦&#34;&gt;2. PDFæ–‡æ¡£æ‘˜è¦&lt;/h3&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span class=&#34;n&#34;&gt;file_path&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;path/to/document.pdf&amp;#34;&lt;/span&gt;
&lt;span class=&#34;n&#34;&gt;base64_file&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;images_util&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;file_to_base64_by_local&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;file_path&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;span class=&#34;n&#34;&gt;result&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;multimodal&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;input_by_base64&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;
    &lt;span class=&#34;s2&#34;&gt;&amp;#34;æ–‡ä»¶ä¸»è¦è®²äº†ä»€ä¹ˆ&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; 
    &lt;span class=&#34;n&#34;&gt;base64_file&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; 
    &lt;span class=&#34;s2&#34;&gt;&amp;#34;application/pdf&amp;#34;&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;3-ç½‘ç»œå›¾ç‰‡åˆ†æ&#34;&gt;3. ç½‘ç»œå›¾ç‰‡åˆ†æ&lt;/h3&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span class=&#34;n&#34;&gt;result&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;multimodal&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;input_by_url&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;
    &lt;span class=&#34;s2&#34;&gt;&amp;#34;è¿™å¼ å›¾ç‰‡æè¿°äº†ä»€ä¹ˆ,ä¸­æ–‡æè¿°&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; 
    &lt;span class=&#34;s2&#34;&gt;&amp;#34;https://img.shetu66.com/2023/04/25/1682391094827084.png&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; 
    &lt;span class=&#34;s2&#34;&gt;&amp;#34;image&amp;#34;&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h1 id=&#34;ä»£ç ç¤ºä¾‹&#34;&gt;ä»£ç ç¤ºä¾‹&lt;/h1&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# å¤šæ¨¡æ€è¾“å…¥&lt;/span&gt;
&lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;base64&lt;/span&gt;
&lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;json&lt;/span&gt;

&lt;span class=&#34;kn&#34;&gt;from&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;langchain_core.messages&lt;/span&gt; &lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;HumanMessage&lt;/span&gt;

&lt;span class=&#34;kn&#34;&gt;from&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;common.modeCommon&lt;/span&gt; &lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Model&lt;/span&gt;
&lt;span class=&#34;kn&#34;&gt;from&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;config.config&lt;/span&gt; &lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Config&lt;/span&gt;
&lt;span class=&#34;kn&#34;&gt;from&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;utils&lt;/span&gt; &lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;images_util&lt;/span&gt;


&lt;span class=&#34;k&#34;&gt;class&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;Multimodal&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;object&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;def&lt;/span&gt; &lt;span class=&#34;fm&#34;&gt;__init__&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;model&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Model&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt;
        &lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;model&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;model&lt;/span&gt;

    &lt;span class=&#34;k&#34;&gt;def&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;input_by_base64&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;prompt_txt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;image_data&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;type&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;try&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;

            &lt;span class=&#34;n&#34;&gt;message&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;HumanMessage&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;
                &lt;span class=&#34;n&#34;&gt;content&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;json&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;dumps&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;([&lt;/span&gt;
                    &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;type&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;text&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;text&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;prompt_txt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;},&lt;/span&gt;
                    &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;type&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;type&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;data&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;image_data&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;source_type&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;base64&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;},&lt;/span&gt;
                &lt;span class=&#34;p&#34;&gt;])&lt;/span&gt;
            &lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;

            &lt;span class=&#34;n&#34;&gt;china&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;model&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;qwen_llm&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
            &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;china&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;invoke&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;([&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;message&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;])&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;content&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;except&lt;/span&gt; &lt;span class=&#34;ne&#34;&gt;Exception&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;as&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;e&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
            &lt;span class=&#34;nb&#34;&gt;print&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;e&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
            &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;

    &lt;span class=&#34;k&#34;&gt;def&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;input_by_url&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;prompt_txt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;url&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;type&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt;

        &lt;span class=&#34;k&#34;&gt;try&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
            &lt;span class=&#34;n&#34;&gt;message&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;HumanMessage&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;
                &lt;span class=&#34;n&#34;&gt;content&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;json&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;dumps&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;([&lt;/span&gt;
                    &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;type&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;text&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;text&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;prompt_txt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;},&lt;/span&gt;
                    &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;type&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;type&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;data&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;url&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;source_type&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;url&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;},&lt;/span&gt;
                &lt;span class=&#34;p&#34;&gt;])&lt;/span&gt;
            &lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
            &lt;span class=&#34;n&#34;&gt;china&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;model&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;qwen_llm&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
            &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;china&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;invoke&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;([&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;message&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;])&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;content&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;except&lt;/span&gt; &lt;span class=&#34;ne&#34;&gt;Exception&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;as&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;e&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
            &lt;span class=&#34;nb&#34;&gt;print&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;e&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
            &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;

&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;vm&#34;&gt;__name__&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;__main__&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;config&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Config&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;conf/config.yml&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    &lt;span class=&#34;c1&#34;&gt;# åˆå§‹åŒ–æ¨¡å‹&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;model&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Model&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;config&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;multimodal&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Multimodal&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;model&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    &lt;span class=&#34;c1&#34;&gt;# image_path = &amp;#34;C:\\Users\\Administrator\\Desktop\\17536735231103.png&amp;#34;&lt;/span&gt;
    &lt;span class=&#34;c1&#34;&gt;# base64_code = images_util.image_to_base64_by_local(image_path)&lt;/span&gt;

    &lt;span class=&#34;c1&#34;&gt;# result = multimodal.input_by_image_base64(&amp;#34;è¿™å¼ å›¾ç‰‡æè¿°äº†ä»€ä¹ˆ,ä¸­æ–‡æè¿°&amp;#34;, base64_code, &amp;#34;image/png&amp;#34;)&lt;/span&gt;
    &lt;span class=&#34;c1&#34;&gt;# result = multimodal.input_by_url(&amp;#34;è¿™å¼ å›¾ç‰‡æè¿°äº†ä»€ä¹ˆ,ä¸­æ–‡æè¿°&amp;#34;, &amp;#34;https://img.shetu66.com/2023/04/25/1682391094827084.png&amp;#34;, &amp;#34;image&amp;#34;)&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;file_path&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;C:&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\\&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;Users&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\\&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;Administrator&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\\&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;Desktop&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\\&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;1.pdf&amp;#34;&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;base64_file&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;images_util&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;file_to_base64_by_local&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;file_path&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;result&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;multimodal&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;input_by_base64&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;æ–‡ä»¶ä¸»è¦è®²äº†ä»€ä¹ˆ&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;base64_file&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;file&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    &lt;span class=&#34;nb&#34;&gt;print&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;result&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;ä»£ç ä»“åº“è·¯å¾„&#34;&gt;ä»£ç ä»“åº“è·¯å¾„&lt;/h2&gt;
&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;https://github.com/zcj-git520/AiLargeModel&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;zcj-git520/AiLargeModel: å¤§æ¨¡å‹åº”ç”¨å¼€å‘å­¦ä¹ &lt;/a&gt;&lt;/p&gt;
</description>
        </item>
        <item>
        <title>LangServe</title>
        <link>https://zcj-git520.github.io/p/langserve/</link>
        <pubDate>Sat, 25 Jan 2025 22:00:38 +0800</pubDate>
        
        <guid>https://zcj-git520.github.io/p/langserve/</guid>
        <description>&lt;img src="https://zcj-git520.github.io/p/langserve/1.png" alt="Featured image of post LangServe" /&gt;&lt;h1 id=&#34;langserve-å®è·µ&#34;&gt;LangServe å®è·µ&lt;/h1&gt;
&lt;h2 id=&#34;æ ¸å¿ƒåŠŸèƒ½&#34;&gt;æ ¸å¿ƒåŠŸèƒ½&lt;/h2&gt;
&lt;p&gt;LangServe æ˜¯ä¸€ä¸ªä¸“ä¸º LangChain è®¾è®¡çš„éƒ¨ç½²å·¥å…·ï¼Œå¯å°† LangChain å¯è¿è¡Œå¯¹è±¡å’Œé“¾å¿«é€Ÿè½¬åŒ–ä¸º REST APIï¼Œä¸»è¦ç‰¹ç‚¹åŒ…æ‹¬ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;è‡ªåŠ¨åŒ– API ç”Ÿæˆ&lt;/strong&gt;&lt;br&gt;
é€šè¿‡ FastAPI + Pydantic è‡ªåŠ¨æ¨æ–­è¾“å…¥/è¾“å‡ºæ¨¡å‹ï¼Œç”Ÿæˆå¸¦æ•°æ®éªŒè¯çš„ REST ç«¯ç‚¹&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¤šåè®®æ”¯æŒ&lt;/strong&gt;&lt;br&gt;
æä¾› &lt;code&gt;/invoke&lt;/code&gt;ï¼ˆå•æ¬¡è°ƒç”¨ï¼‰ã€&lt;code&gt;/batch&lt;/code&gt;ï¼ˆæ‰¹é‡å¤„ç†ï¼‰ã€&lt;code&gt;/stream&lt;/code&gt;ï¼ˆå®æ—¶æµï¼‰ç­‰æ ‡å‡†åŒ–ç«¯ç‚¹&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è°ƒè¯•å‹å¥½&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;/stream_log&lt;/code&gt; å®æ—¶æµå¼ä¼ è¾“ä¸­é—´æ­¥éª¤&lt;/li&gt;
&lt;li&gt;0.0.40+ ç‰ˆæœ¬æ–°å¢ &lt;code&gt;/stream_events&lt;/code&gt; ç®€åŒ–æµå¼å¤„ç†&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç”Ÿäº§çº§æ¶æ„&lt;/strong&gt;&lt;br&gt;
åŸºäº uvloop å’Œ asyncio å®ç°é«˜å¹¶å‘ï¼Œæ”¯æŒ Swagger è‡ªåŠ¨æ–‡æ¡£&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;æŠ€æœ¯ä¼˜åŠ¿&#34;&gt;æŠ€æœ¯ä¼˜åŠ¿&lt;/h2&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç‰¹æ€§&lt;/th&gt;
&lt;th&gt;è¯´æ˜&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å£°æ˜å¼éªŒè¯&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;é€šè¿‡ Pydantic æ¨¡å‹è‡ªåŠ¨ç”Ÿæˆ JSON Schemaï¼Œæä¾›ç±»å‹æ£€æŸ¥å’Œæ¸…æ™°é”™è¯¯æç¤º&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ— ç¼é›†æˆ&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å†…ç½® LangChain.js å®¢æˆ·ç«¯ï¼Œæ”¯æŒ Python/JavaScript è°ƒç”¨&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;é›¶æ¨¡æ¿ä»£ç &lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;è‡ªåŠ¨ç”Ÿæˆ API æ–‡æ¡£å’Œ Playground è°ƒè¯•ç•Œé¢&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h2 id=&#34;å…¸å‹å·¥ä½œæµ&#34;&gt;å…¸å‹å·¥ä½œæµ&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;å®šä¹‰ LangChain å¯¹è±¡&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span class=&#34;kn&#34;&gt;from&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;langchain.chains&lt;/span&gt; &lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;LLMChain&lt;/span&gt;
&lt;span class=&#34;n&#34;&gt;chain&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;LLMChain&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;...&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;strong&gt;éƒ¨ç½²ä¸º API&lt;/strong&gt;&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;from langserve import add_routes
add_routes(app, chain)
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;strong&gt;å³æ—¶è·å¾—&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;âœ… è‡ªåŠ¨ç”Ÿæˆçš„ Swagger æ–‡æ¡£&lt;/li&gt;
&lt;li&gt;âœ… å¸¦ç±»å‹æ ¡éªŒçš„ &lt;code&gt;/invoke&lt;/code&gt; ç«¯ç‚¹&lt;/li&gt;
&lt;li&gt;âœ… å¯è§†åŒ–è°ƒè¯• Playground&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;é€‚ç”¨åœºæ™¯&#34;&gt;é€‚ç”¨åœºæ™¯&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;ğŸ”§ å¿«é€ŸåŸå‹éªŒè¯&lt;/li&gt;
&lt;li&gt;ğŸš€ ç”Ÿäº§ç¯å¢ƒæœåŠ¡éƒ¨ç½²&lt;/li&gt;
&lt;li&gt;ğŸ”— å¾®æœåŠ¡æ¶æ„é›†æˆ&lt;/li&gt;
&lt;li&gt;ğŸ§ª äº¤äº’å¼è°ƒè¯•æµ‹è¯•&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;ä»£ç ç¤ºä¾‹&#34;&gt;ä»£ç ç¤ºä¾‹&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;æœåŠ¡ç«¯&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;uvicorn&lt;/span&gt;
&lt;span class=&#34;kn&#34;&gt;from&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;fastapi&lt;/span&gt; &lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;FastAPI&lt;/span&gt;
&lt;span class=&#34;kn&#34;&gt;from&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;fastapi.responses&lt;/span&gt; &lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;RedirectResponse&lt;/span&gt;
&lt;span class=&#34;kn&#34;&gt;from&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;langchain_core.runnables&lt;/span&gt; &lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;RunnableLambda&lt;/span&gt;
&lt;span class=&#34;kn&#34;&gt;from&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;langserve&lt;/span&gt; &lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;add_routes&lt;/span&gt;

&lt;span class=&#34;kn&#34;&gt;from&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;Prompt&lt;/span&gt; &lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Prompt&lt;/span&gt;
&lt;span class=&#34;kn&#34;&gt;from&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;common.modeCommon&lt;/span&gt; &lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Model&lt;/span&gt;
&lt;span class=&#34;kn&#34;&gt;from&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;config.config&lt;/span&gt; &lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Config&lt;/span&gt;

&lt;span class=&#34;n&#34;&gt;app&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;FastAPI&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;title&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;LangChain æœåŠ¡å™¨&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
              &lt;span class=&#34;n&#34;&gt;version&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;1.0&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
              &lt;span class=&#34;n&#34;&gt;description&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;ä½¿ç”¨ Langchain çš„ Runnable æ¥å£çš„ç®€å• API æœåŠ¡å™¨&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;


&lt;span class=&#34;nd&#34;&gt;@app&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;get&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;/&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;span class=&#34;k&#34;&gt;async&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;def&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;redirect_root_to_docs&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;():&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;RedirectResponse&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;/docs&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;


&lt;span class=&#34;k&#34;&gt;def&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;base_prompt_routes&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;prompt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;model&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;base_prompt&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;prompt&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;base_prompt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;llm_chain&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;model&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;qwen_llm_china&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;base_prompt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;poetry_func&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;RunnableLambda&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;lambda&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;x&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;llm_chain&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;invoke&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;x&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;))&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;add_routes&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;app&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;poetry_func&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;path&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;/base&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;

&lt;span class=&#34;k&#34;&gt;def&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;chat_prompt_routes&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;prompt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;model&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;chat_prompt&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;prompt&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;chat_prompt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;llm_chain&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;model&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;qwen_llm_china&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;chat_prompt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;poetry_func&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;RunnableLambda&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;lambda&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;x&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;llm_chain&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;invoke&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;x&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;))&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;add_routes&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;app&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;poetry_func&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;path&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;/chat&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;

&lt;span class=&#34;k&#34;&gt;def&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;stream_prompt_routes&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;prompt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;model&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;llm_chain&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;model&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;qwen_llm_stream&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;poetry_func&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;RunnableLambda&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;lambda&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;x&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;llm_chain&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;invoke&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;x&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;))&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;add_routes&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;app&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;poetry_func&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;path&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;/stream&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;

&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;vm&#34;&gt;__name__&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;__main__&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
    &lt;span class=&#34;c1&#34;&gt;# åˆå§‹åŒ–æ¨¡å‹é…ç½®&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;config&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Config&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;conf/config.yml&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    &lt;span class=&#34;c1&#34;&gt;# åˆå§‹åŒ–æ¨¡å‹&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;model&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Model&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;config&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    &lt;span class=&#34;c1&#34;&gt;# # è°ƒç”¨qwenæ¨¡å‹&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;prompt&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Prompt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;base_prompt_routes&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;prompt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;model&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;chat_prompt_routes&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;prompt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;model&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;stream_prompt_routes&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;prompt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;model&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;uvicorn&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;run&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;app&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;host&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;0.0.0.0&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;port&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;8000&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ul&gt;
&lt;li&gt;å®¢æˆ·ç«¯ç¤ºä¾‹&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span class=&#34;kn&#34;&gt;from&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;langserve&lt;/span&gt; &lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;RemoteRunnable&lt;/span&gt;

&lt;span class=&#34;n&#34;&gt;remote_chain&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;RemoteRunnable&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;http://127.0.0.1:8000/base&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;span class=&#34;n&#34;&gt;response&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;remote_chain&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;invoke&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;({&lt;/span&gt;
            &lt;span class=&#34;s2&#34;&gt;&amp;#34;domain&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;é‡‘è&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
            &lt;span class=&#34;s2&#34;&gt;&amp;#34;profession&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;é‡‘èåˆ†æå‘˜&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
            &lt;span class=&#34;s2&#34;&gt;&amp;#34;do&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;è¯„ä¼°æœªæ¥åŠå¹´ä¸­å›½çš„é‡‘èå¸‚åœºæƒ…å†µï¼Œåˆ†æå¸‚åœºè¶‹åŠ¿ï¼Œé¢„æµ‹æœªæ¥çš„å¸‚åœºå˜åŒ–&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
            &lt;span class=&#34;s2&#34;&gt;&amp;#34;material&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;æ— &amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
            &lt;span class=&#34;s2&#34;&gt;&amp;#34;question&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;ä»¥è¡¨æ ¼çš„å½¢å¼è¾“å‡º&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
        &lt;span class=&#34;p&#34;&gt;})&lt;/span&gt;

&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;vm&#34;&gt;__name__&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;__main__&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
    &lt;span class=&#34;nb&#34;&gt;print&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;response&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;ä»£ç ä»“åº“è·¯å¾„&#34;&gt;ä»£ç ä»“åº“è·¯å¾„&lt;/h2&gt;
&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;https://github.com/zcj-git520/AiLargeModel&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;zcj-git520/AiLargeModel: å¤§æ¨¡å‹åº”ç”¨å¼€å‘å­¦ä¹ &lt;/a&gt;&lt;/p&gt;
</description>
        </item>
        <item>
        <title>LCELä¸LangChainæµå¼å¤„ç†æŒ‡å—</title>
        <link>https://zcj-git520.github.io/p/lcel%E4%B8%8Elangchain%E6%B5%81%E5%BC%8F%E5%A4%84%E7%90%86%E6%8C%87%E5%8D%97/</link>
        <pubDate>Sat, 25 Jan 2025 22:00:38 +0800</pubDate>
        
        <guid>https://zcj-git520.github.io/p/lcel%E4%B8%8Elangchain%E6%B5%81%E5%BC%8F%E5%A4%84%E7%90%86%E6%8C%87%E5%8D%97/</guid>
        <description>&lt;img src="https://zcj-git520.github.io/p/lcel%E4%B8%8Elangchain%E6%B5%81%E5%BC%8F%E5%A4%84%E7%90%86%E6%8C%87%E5%8D%97/1.png" alt="Featured image of post LCELä¸LangChainæµå¼å¤„ç†æŒ‡å—" /&gt;&lt;h1 id=&#34;lcelä¸langchainæµå¼å¤„ç†æŒ‡å—&#34;&gt;LCELä¸LangChainæµå¼å¤„ç†æŒ‡å—&lt;/h1&gt;
&lt;h2 id=&#34;ä»€ä¹ˆæ˜¯lcel&#34;&gt;ä»€ä¹ˆæ˜¯LCELï¼Ÿ&lt;/h2&gt;
&lt;p&gt;LCELï¼ˆLangChain Expression Languageï¼‰æ˜¯ä¸€ç§å¼ºå¤§çš„å·¥ä½œæµç¼–æ’å·¥å…·ï¼Œèƒ½å¤Ÿä»åŸºæœ¬ç»„ä»¶æ„å»ºå¤æ‚ä»»åŠ¡é“¾æ¡(chain)ï¼Œå¹¶å…·æœ‰ä»¥ä¸‹ç”Ÿäº§çº§ç‰¹æ€§ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ğŸš€ &lt;strong&gt;ä¸€æµçš„æµå¼æ”¯æŒ&lt;/strong&gt;ï¼šç›´æ¥ä»LLMæµå¼ä¼ è¾“æ ‡è®°åˆ°è¾“å‡ºè§£æå™¨&lt;/li&gt;
&lt;li&gt;âš¡ &lt;strong&gt;å¼‚æ­¥æ”¯æŒ&lt;/strong&gt;ï¼šåŒä¸€ä»£ç å¯åŒæ­¥/å¼‚æ­¥è¿è¡Œï¼Œé€‚åˆåŸå‹åˆ°ç”Ÿäº§&lt;/li&gt;
&lt;li&gt;ğŸ”€ &lt;strong&gt;ä¼˜åŒ–çš„å¹¶è¡Œæ‰§è¡Œ&lt;/strong&gt;ï¼šè‡ªåŠ¨å¹¶è¡Œå¯å¹¶è¡Œæ­¥éª¤&lt;/li&gt;
&lt;li&gt;ğŸ”„ &lt;strong&gt;é‡è¯•å’Œå›é€€&lt;/strong&gt;ï¼šé…ç½®å¯é æ€§æœºåˆ¶&lt;/li&gt;
&lt;li&gt;ğŸ” &lt;strong&gt;ä¸­é—´ç»“æœè®¿é—®&lt;/strong&gt;ï¼šå®æ—¶ç›‘æ§å’Œè°ƒè¯•&lt;/li&gt;
&lt;li&gt;ğŸ“ &lt;strong&gt;è¾“å…¥è¾“å‡ºæ¨¡å¼&lt;/strong&gt;ï¼šè‡ªåŠ¨ç”ŸæˆPydantic/JSONSchemaéªŒè¯&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;runnableæ¥å£æ ‡å‡†&#34;&gt;Runnableæ¥å£æ ‡å‡†&lt;/h2&gt;
&lt;p&gt;LangChainç»„ä»¶é€šè¿‡Runnableåè®®å®ç°æ ‡å‡†åŒ–è°ƒç”¨ï¼š&lt;/p&gt;
&lt;h3 id=&#34;åŒæ­¥æ–¹æ³•&#34;&gt;åŒæ­¥æ–¹æ³•&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;stream()&lt;/code&gt;: æµå¼è¿”å›å“åº”å—&lt;/li&gt;
&lt;li&gt;&lt;code&gt;invoke()&lt;/code&gt;: è°ƒç”¨é“¾å¤„ç†è¾“å…¥&lt;/li&gt;
&lt;li&gt;&lt;code&gt;batch()&lt;/code&gt;: æ‰¹é‡å¤„ç†è¾“å…¥åˆ—è¡¨&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;å¼‚æ­¥æ–¹æ³•&#34;&gt;å¼‚æ­¥æ–¹æ³•&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;astream()&lt;/code&gt;: å¼‚æ­¥æµå¼å“åº”&lt;/li&gt;
&lt;li&gt;&lt;code&gt;ainvoke()&lt;/code&gt;: å¼‚æ­¥è°ƒç”¨&lt;/li&gt;
&lt;li&gt;&lt;code&gt;abatch()&lt;/code&gt;: å¼‚æ­¥æ‰¹é‡å¤„ç†&lt;/li&gt;
&lt;li&gt;&lt;code&gt;astream_log()&lt;/code&gt;: æµå¼ä¸­é—´æ­¥éª¤+æœ€ç»ˆç»“æœ&lt;/li&gt;
&lt;li&gt;&lt;code&gt;astream_events()&lt;/code&gt;: æµå¼é“¾äº‹ä»¶(Beta)&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;ç»„ä»¶ioç±»å‹&#34;&gt;ç»„ä»¶I/Oç±»å‹&lt;/h3&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç»„ä»¶&lt;/th&gt;
&lt;th&gt;è¾“å…¥ç±»å‹&lt;/th&gt;
&lt;th&gt;è¾“å‡ºç±»å‹&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;æç¤º&lt;/td&gt;
&lt;td&gt;å­—å…¸&lt;/td&gt;
&lt;td&gt;æç¤ºå€¼&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;èŠå¤©æ¨¡å‹&lt;/td&gt;
&lt;td&gt;å­—ç¬¦ä¸²/æ¶ˆæ¯åˆ—è¡¨/æç¤ºå€¼&lt;/td&gt;
&lt;td&gt;èŠå¤©æ¶ˆæ¯&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;LLM&lt;/td&gt;
&lt;td&gt;å­—ç¬¦ä¸²/æ¶ˆæ¯åˆ—è¡¨/æç¤ºå€¼&lt;/td&gt;
&lt;td&gt;å­—ç¬¦ä¸²&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;è¾“å‡ºè§£æå™¨&lt;/td&gt;
&lt;td&gt;LLM/èŠå¤©æ¨¡å‹è¾“å‡º&lt;/td&gt;
&lt;td&gt;è§£æå™¨ç‰¹å®š&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;æ£€ç´¢å™¨&lt;/td&gt;
&lt;td&gt;å­—ç¬¦ä¸²&lt;/td&gt;
&lt;td&gt;æ–‡æ¡£åˆ—è¡¨&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;å·¥å…·&lt;/td&gt;
&lt;td&gt;å­—ç¬¦ä¸²/å­—å…¸&lt;/td&gt;
&lt;td&gt;å·¥å…·ç‰¹å®š&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h2 id=&#34;æµå¼å¤„ç†stream&#34;&gt;æµå¼å¤„ç†(Stream)&lt;/h2&gt;
&lt;h3 id=&#34;æ ¸å¿ƒæ–¹æ³•&#34;&gt;æ ¸å¿ƒæ–¹æ³•&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;åŒæ­¥æµå¼&lt;/strong&gt;ï¼š&lt;code&gt;stream()&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¼‚æ­¥æµå¼&lt;/strong&gt;ï¼š&lt;code&gt;astream()&lt;/code&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;å…³é”®ç‰¹æ€§&#34;&gt;å…³é”®ç‰¹æ€§&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;å®æ—¶è¿”å›æ¯ä¸ªå¤„ç†å—&lt;/li&gt;
&lt;li&gt;è¦æ±‚æ‰€æœ‰æ­¥éª¤æ”¯æŒæµå¼å¤„ç†&lt;/li&gt;
&lt;li&gt;å¤æ‚åº¦èŒƒå›´ï¼š
&lt;ul&gt;
&lt;li&gt;ç®€å•ï¼šLLMä»¤ç‰Œæµ&lt;/li&gt;
&lt;li&gt;å¤æ‚ï¼šéƒ¨åˆ†JSONç»“æœæµ&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;æœ€ä½³å®è·µ&#34;&gt;æœ€ä½³å®è·µ&lt;/h3&gt;
&lt;p&gt;å»ºè®®ä»LLMç»„ä»¶å¼€å§‹é€æ­¥æ„å»ºæµå¼å¤„ç†é“¾ã€‚&lt;/p&gt;
&lt;h2 id=&#34;äº‹ä»¶æµstream-events&#34;&gt;äº‹ä»¶æµ(Stream Events)&lt;/h2&gt;
&lt;h3 id=&#34;é«˜çº§æ–¹æ³•&#34;&gt;é«˜çº§æ–¹æ³•&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;astream_events()&lt;/code&gt; (Beta): æµå¼ä¼ è¾“é“¾æ‰§è¡Œè¿‡ç¨‹ä¸­çš„æ‰€æœ‰äº‹ä»¶&lt;/li&gt;
&lt;li&gt;&lt;code&gt;astream_log()&lt;/code&gt;: æµå¼ä¸­é—´æ­¥éª¤+æœ€ç»ˆè¾“å‡º&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;å…¸å‹åº”ç”¨åœºæ™¯&#34;&gt;å…¸å‹åº”ç”¨åœºæ™¯&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;å®æ—¶ç”¨æˆ·åé¦ˆ&lt;/li&gt;
&lt;li&gt;å¤æ‚é“¾è°ƒè¯•&lt;/li&gt;
&lt;li&gt;è¿›åº¦ç›‘æ§&lt;/li&gt;
&lt;li&gt;å¢é‡ç»“æœå±•ç¤º&lt;/li&gt;
&lt;/ol&gt;
&lt;h1 id=&#34;ä»£ç ç¤ºä¾‹&#34;&gt;ä»£ç ç¤ºä¾‹&lt;/h1&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;asyncio&lt;/span&gt;
&lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;logging&lt;/span&gt;

&lt;span class=&#34;kn&#34;&gt;from&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;langchain.chains.llm&lt;/span&gt; &lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;LLMChain&lt;/span&gt;
&lt;span class=&#34;kn&#34;&gt;from&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;langchain_core.output_parsers&lt;/span&gt; &lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;StrOutputParser&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;JsonOutputParser&lt;/span&gt;
&lt;span class=&#34;kn&#34;&gt;from&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;langchain_core.prompts&lt;/span&gt; &lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ChatPromptTemplate&lt;/span&gt;
&lt;span class=&#34;kn&#34;&gt;from&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;langchain_core.tools&lt;/span&gt; &lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;tool&lt;/span&gt;

&lt;span class=&#34;kn&#34;&gt;from&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;langchain.chains&lt;/span&gt; &lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;SimpleSequentialChain&lt;/span&gt;

&lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;PromptStudy&lt;/span&gt;
&lt;span class=&#34;kn&#34;&gt;from&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;common.modeCommon&lt;/span&gt; &lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Model&lt;/span&gt;
&lt;span class=&#34;kn&#34;&gt;from&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;config.config&lt;/span&gt; &lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Config&lt;/span&gt;


&lt;span class=&#34;c1&#34;&gt;# LangChainå·¥ä½œæµç¼–æ’&lt;/span&gt;

&lt;span class=&#34;c1&#34;&gt;# åŒæ­¥Streamè¿è¡Œ&lt;/span&gt;
&lt;span class=&#34;k&#34;&gt;def&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;sync_stream&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;model&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Model&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;constr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ch&lt;/span&gt; &lt;span class=&#34;ow&#34;&gt;in&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;model&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;qwen_llm_stream&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;stream&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;constr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt;
        &lt;span class=&#34;nb&#34;&gt;print&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ch&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;content&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;end&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;|&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;flush&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;kc&#34;&gt;True&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;


&lt;span class=&#34;c1&#34;&gt;# @tool&lt;/span&gt;
&lt;span class=&#34;c1&#34;&gt;# å¼‚æ­¥AStreamè¿è¡Œ&lt;/span&gt;
&lt;span class=&#34;k&#34;&gt;async&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;def&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;async_stream&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;model&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Model&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;constr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;async&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ch&lt;/span&gt; &lt;span class=&#34;ow&#34;&gt;in&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;model&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;qwen_llm_stream&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;astream&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;constr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt;
        &lt;span class=&#34;nb&#34;&gt;print&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ch&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;content&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;end&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;|&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;flush&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;kc&#34;&gt;True&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;


&lt;span class=&#34;c1&#34;&gt;# Chain&lt;/span&gt;
&lt;span class=&#34;k&#34;&gt;async&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;def&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;llm_chain&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;model&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Model&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;prompt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;PromptStudy&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt;
    &lt;span class=&#34;c1&#34;&gt;# åˆ›å»ºä¸€ä¸ªå·¥ä½œé“¾&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;base_prompt&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;prompt&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;base_prompt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;parser&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;StrOutputParser&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;stream_model&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;model&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;qwen_llm_stream&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;chain&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;base_prompt&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;|&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;stream_model&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;|&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;parser&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;# åˆ›å»ºä¸€ä¸ªåˆ›å»ºä¸€ä¸ªå·¥ä½œé“¾ å…ˆæ‰§è¡Œbase_prompt ç„¶åæ‰§è¡Œstream_model æœ€åæ‰§è¡Œparser&lt;/span&gt;
    &lt;span class=&#34;c1&#34;&gt;# è¿è¡Œå·¥ä½œé“¾&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;async&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ch&lt;/span&gt; &lt;span class=&#34;ow&#34;&gt;in&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;chain&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;astream&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;prompt&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;base_prompt_invoke&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;ç³»ç»Ÿè¿ç»´&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;è¿ç»´é«˜çº§å·¥ç¨‹å¸ˆ&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;æƒ³ç†è§£äº¤æ¢æœºåŸç†&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;æ— &amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;ç®€çŸ­æ–‡å­—è¾“å‡º&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)):&lt;/span&gt;
        &lt;span class=&#34;nb&#34;&gt;print&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ch&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;end&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;|&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;flush&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;kc&#34;&gt;True&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;span class=&#34;c1&#34;&gt;# åºåˆ—é“¾ï¼ˆSequential Chainsï¼‰&lt;/span&gt;
&lt;span class=&#34;s2&#34;&gt;&amp;#34;&amp;#34;&amp;#34;
&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;    åºåˆ—é“¾æ˜¯ä¸€ç§å°†å¤šä¸ªé“¾æŒ‰ç…§é¡ºåºè¿æ¥åœ¨ä¸€èµ·çš„å·¥ä½œæµã€‚
&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;    æ¯ä¸ªé“¾éƒ½å¯ä»¥æ¥æ”¶å‰ä¸€ä¸ªé“¾çš„è¾“å‡ºä½œä¸ºè¾“å…¥ï¼Œå¹¶å°†å…¶ä¼ é€’ç»™ä¸‹ä¸€ä¸ªé“¾ã€‚
&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;    åºåˆ—é“¾å¯ä»¥ç”¨äºæ„å»ºå¤æ‚çš„å·¥ä½œæµï¼Œå…¶ä¸­æ¯ä¸ªé“¾éƒ½æœ‰ç‰¹å®šçš„ä»»åŠ¡å’Œé€»è¾‘ã€‚
&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;    åºåˆ—é“¾çš„ä¸»è¦ä¼˜ç‚¹æ˜¯å¯ä»¥å°†å¤šä¸ªé“¾ç»„åˆåœ¨ä¸€èµ·ï¼Œå½¢æˆä¸€ä¸ªå®Œæ•´çš„å·¥ä½œæµã€‚
&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;    åºåˆ—é“¾çš„ä¸»è¦ç¼ºç‚¹æ˜¯æ¯ä¸ªé“¾éƒ½éœ€è¦ç‹¬ç«‹è¿è¡Œï¼Œå› æ­¤å¯èƒ½ä¼šå¯¼è‡´æ€§èƒ½é—®é¢˜ã€‚
&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;&amp;#34;&amp;#34;&lt;/span&gt;
&lt;span class=&#34;k&#34;&gt;def&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;one_chain&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;model&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Model&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;prompt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;PromptStudy&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;base_prompt&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;prompt&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;base_prompt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;parser&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;JsonOutputParser&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;stream_model&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;model&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;qwen_llm_stream&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;chain&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;base_prompt&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;|&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;stream_model&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;|&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;parser&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;chain&lt;/span&gt;
&lt;span class=&#34;k&#34;&gt;def&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;two_chain&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;model&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Model&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;prompt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;PromptStudy&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;base_prompt&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;prompt&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;base_prompt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;parser&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;StrOutputParser&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;stream_model&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;model&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;qwen_llm_stream&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;chain&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;base_prompt&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;|&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;stream_model&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;|&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;parser&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;chain&lt;/span&gt;
&lt;span class=&#34;k&#34;&gt;def&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;llm_chain_sequential&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;model&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Model&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;prompt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;PromptStudy&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;chain_one&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;one_chain&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;model&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;prompt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;chain_two&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;two_chain&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;model&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;prompt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;overall_chain&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;chain_one&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;|&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;chain_two&lt;/span&gt;
    &lt;span class=&#34;c1&#34;&gt;# è¿è¡Œå·¥ä½œé“¾&lt;/span&gt;
    &lt;span class=&#34;c1&#34;&gt;# å°† prompt.base_prompt_invoke çš„è¿”å›å€¼åŒ…è£…æˆå­—å…¸&lt;/span&gt;
    &lt;span class=&#34;c1&#34;&gt;# input_dict =prompt.base_prompt_invoke(&amp;#34;ç³»ç»Ÿè¿ç»´&amp;#34;, &amp;#34;è¿ç»´é«˜çº§å·¥ç¨‹å¸ˆ&amp;#34;, &amp;#34;æƒ³ç†è§£äº¤æ¢æœºåŸç†&amp;#34;, &amp;#34;æ— &amp;#34;, &amp;#34;ç®€çŸ­æ–‡å­—è¾“å‡º&amp;#34;)&lt;/span&gt;
    &lt;span class=&#34;c1&#34;&gt;# è¿è¡Œå·¥ä½œé“¾&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;input_dict&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;s2&#34;&gt;&amp;#34;domain&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;é«˜é“&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
        &lt;span class=&#34;s2&#34;&gt;&amp;#34;profession&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;è‡ªæ„¿è€…&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
        &lt;span class=&#34;s2&#34;&gt;&amp;#34;do&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;å»å“ªé‡Œè´­ä¹°é«˜é“ç¥¨ï¼Œæˆ‘åº”è¯¥å»æ‰¾è°&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
        &lt;span class=&#34;s2&#34;&gt;&amp;#34;material&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;æ— &amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
        &lt;span class=&#34;s2&#34;&gt;&amp;#34;question&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;æŒ‰ç…§ä»¥ä¸‹jsonçš„æ ¼å¼è¾“å‡ºï¼š{&amp;#34;&lt;/span&gt;
                    &lt;span class=&#34;s2&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\&amp;#34;&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;domain&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\&amp;#34;&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;: &lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\&amp;#34;\&amp;#34;&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;,&amp;#34;&lt;/span&gt;
                    &lt;span class=&#34;s2&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\&amp;#34;&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;profession&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\&amp;#34;&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;: &lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\&amp;#34;\&amp;#34;&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;,&amp;#34;&lt;/span&gt;
                    &lt;span class=&#34;s2&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\&amp;#34;&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;do&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\&amp;#34;&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;: &lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\&amp;#34;\&amp;#34;&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;,&amp;#34;&lt;/span&gt;
                    &lt;span class=&#34;s2&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\&amp;#34;&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;material&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\&amp;#34;&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;: &lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\&amp;#34;\&amp;#34;&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;, &amp;#34;&lt;/span&gt;
                    &lt;span class=&#34;s2&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\&amp;#34;&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;question&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\&amp;#34;&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;: &lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\&amp;#34;\&amp;#34;&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;}&amp;#34;&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ch&lt;/span&gt; &lt;span class=&#34;ow&#34;&gt;in&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;overall_chain&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;stream&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;input_dict&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt;
        &lt;span class=&#34;nb&#34;&gt;print&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ch&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;end&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;|&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;flush&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;kc&#34;&gt;True&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;

&lt;span class=&#34;c1&#34;&gt;#è½¬æ¢é“¾ï¼ˆTransform Chainsï¼‰ï¼š å…è®¸ä½ åœ¨ é“¾ çš„ä¸­é—´æ­¥éª¤ä¸­å¯¹æ•°æ®è¿›è¡Œè½¬æ¢&lt;/span&gt;
&lt;span class=&#34;k&#34;&gt;def&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;transform_chain&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;model&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Model&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;first_prompt&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ChatPromptTemplate&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;from_template&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;æè¿°ä¸€å®¶ç”Ÿäº§&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;{äº§å“}&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;çš„å…¬å¸æœ€å¥½çš„åå­—æ˜¯ä»€ä¹ˆï¼Ÿ&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;chain_one&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;model&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;qwen_llm_china&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;first_prompt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;second_prompt&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ChatPromptTemplate&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;from_template&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;ä¸ºä»¥ä¸‹å…¬å¸å†™ä¸€ä¸ª20å­—çš„æè¿°ï¼š&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;{company_name}&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;chain_two&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;model&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;qwen_llm_china&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;second_prompt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;overall_simple_chain&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;SimpleSequentialChain&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;chains&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;chain_one&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;chain_two&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;],&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;verbose&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;kc&#34;&gt;True&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;product&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;å¤–å–å’Œç”µå•†&amp;#34;&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;chain_output&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;overall_simple_chain&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;invoke&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;product&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    &lt;span class=&#34;nb&#34;&gt;print&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;chain_output&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;span class=&#34;c1&#34;&gt;#æ¡ä»¶é“¾ï¼ˆConditional Chainsï¼‰ï¼š å…è®¸ä½ æ ¹æ®æŸäº›æ¡ä»¶é€‰æ‹©ä¸åŒçš„é“¾æ¥æ‰§è¡Œ&lt;/span&gt;
&lt;span class=&#34;c1&#34;&gt;#è·¯ç”±é“¾ï¼ˆRouter Chainsï¼‰ï¼š å…è®¸ä½ æ ¹æ®æŸäº›æ¡ä»¶é€‰æ‹©ä¸åŒçš„é“¾æ¥æ‰§è¡Œ&lt;/span&gt;
&lt;span class=&#34;c1&#34;&gt;#å¤šæ¨¡å‹é“¾ï¼ˆMulti Model Chainsï¼‰ï¼š å…è®¸ä½ åœ¨ä¸åŒçš„æ¨¡å‹ä¹‹é—´åˆ‡æ¢&lt;/span&gt;



&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;vm&#34;&gt;__name__&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;__main__&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;logging&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;basicConfig&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;level&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;logging&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;INFO&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    &lt;span class=&#34;c1&#34;&gt;# åˆå§‹åŒ–æ¨¡å‹é…ç½®&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;config&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Config&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;conf/config.yml&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    &lt;span class=&#34;c1&#34;&gt;# åˆå§‹åŒ–æ¨¡å‹&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;model&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Model&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;config&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    &lt;span class=&#34;c1&#34;&gt;# åˆå§‹åŒ–æ¨¡æ¿&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;prompt&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;PromptStudy&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Prompt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
    &lt;span class=&#34;c1&#34;&gt;# sync_stream(model, &amp;#34;è´µå·çœçš„ç»„æˆ&amp;#34;)&lt;/span&gt;
    &lt;span class=&#34;c1&#34;&gt;# asyncio.run(async_stream(model, &amp;#34;ä¸Šæµ·æ€ä¹ˆæ ·&amp;#34;))&lt;/span&gt;
    &lt;span class=&#34;c1&#34;&gt;# asyncio.run(llm_chain(model, prompt))&lt;/span&gt;
    &lt;span class=&#34;c1&#34;&gt;# llm_chain_sequential(model, prompt)&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;transform_chain&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;model&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;ä»£ç ä»“åº“è·¯å¾„&#34;&gt;ä»£ç ä»“åº“è·¯å¾„&lt;/h2&gt;
&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;https://github.com/zcj-git520/AiLargeModel&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;zcj-git520/AiLargeModel: å¤§æ¨¡å‹åº”ç”¨å¼€å‘å­¦ä¹ &lt;/a&gt;&lt;/p&gt;
</description>
        </item>
        <item>
        <title>LangChain æ¡†æ¶è§£æ</title>
        <link>https://zcj-git520.github.io/p/langchain-%E6%A1%86%E6%9E%B6%E8%A7%A3%E6%9E%90/</link>
        <pubDate>Sat, 18 Jan 2025 22:00:38 +0800</pubDate>
        
        <guid>https://zcj-git520.github.io/p/langchain-%E6%A1%86%E6%9E%B6%E8%A7%A3%E6%9E%90/</guid>
        <description>&lt;img src="https://zcj-git520.github.io/p/langchain-%E6%A1%86%E6%9E%B6%E8%A7%A3%E6%9E%90/5.svg" alt="Featured image of post LangChain æ¡†æ¶è§£æ" /&gt;&lt;h1 id=&#34;langchain-æ¡†æ¶è§£æ&#34;&gt;LangChain æ¡†æ¶è§£æ&lt;/h1&gt;
&lt;h2 id=&#34;ä¸€ç®€ä»‹&#34;&gt;ä¸€ã€ç®€ä»‹&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å®šä¹‰&lt;/strong&gt;ï¼šå¼€æºPython AIåº”ç”¨å¼€å‘æ¡†æ¶&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ ¸å¿ƒä»·å€¼&lt;/strong&gt;ï¼šé™ä½åŸºäºLLMçš„AIåº”ç”¨å¼€å‘é—¨æ§›&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ ¸å¿ƒåŠŸèƒ½&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;LLMé›†æˆï¼ˆæ–‡æœ¬ç”Ÿæˆ/é—®ç­”/ç¿»è¯‘/å¯¹è¯ï¼‰&lt;/li&gt;
&lt;li&gt;åˆ›æ„åº”ç”¨æ„å»º&lt;/li&gt;
&lt;li&gt;æ ‡å‡†åŒ–AIå·¥ä½œæµ&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;äºŒæ ¸å¿ƒç‰¹æ€§&#34;&gt;äºŒã€æ ¸å¿ƒç‰¹æ€§&lt;/h2&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç‰¹æ€§&lt;/th&gt;
&lt;th&gt;åŠŸèƒ½æè¿°&lt;/th&gt;
&lt;th&gt;åº”ç”¨åœºæ™¯&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;LLM &amp;amp; æç¤ºç®¡ç†&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ç»Ÿä¸€APIæŠ½è±¡å±‚ + æç¤ºæ¨¡æ¿&lt;/td&gt;
&lt;td&gt;æ ‡å‡†åŒ–æ¨¡å‹è°ƒç”¨&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;é“¾(Chain)&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;é¢„å°è£…ä»»åŠ¡å·¥ä½œæµ&lt;/td&gt;
&lt;td&gt;é—®ç­”ç³»ç»Ÿ/SQLç”Ÿæˆ&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;LCEL&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;è¡¨è¾¾å¼è¯­è¨€ç¼–æ’ä»»åŠ¡æµ&lt;/td&gt;
&lt;td&gt;è‡ªå®šä¹‰AIæµç¨‹&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;RAG&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å¤–éƒ¨æ•°æ®å¢å¼ºç”Ÿæˆ&lt;/td&gt;
&lt;td&gt;çŸ¥è¯†åº“é—®ç­”&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;Agents&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;LLMå†³ç­–+å¤–éƒ¨ç³»ç»Ÿè°ƒç”¨&lt;/td&gt;
&lt;td&gt;è‡ªåŠ¨åŒ–ä»»åŠ¡æ‰§è¡Œ&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ¨¡å‹è®°å¿†&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å¯¹è¯å†å²è®°å¿†&lt;/td&gt;
&lt;td&gt;å¤šè½®å¯¹è¯ç³»ç»Ÿ&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;LangChain ç‰¹æ€§ï¼š&lt;/p&gt;
&lt;p&gt;â— LLM å’Œæç¤ºï¼ˆPromptï¼‰ï¼šLangChain å¯¹æ‰€æœ‰ LLM å¤§æ¨¡å‹è¿›è¡Œäº† API æŠ½è±¡ï¼Œç»Ÿä¸€äº†å¤§æ¨¡å‹è®¿é—® APIï¼ŒåŒæ—¶æä¾›äº† Prompt æç¤ºæ¨¡æ¿ç®¡ç†æœºåˆ¶ã€‚&lt;/p&gt;
&lt;p&gt;â— é“¾ (Chain)ï¼šLangchain å¯¹ä¸€äº›å¸¸è§çš„åœºæ™¯å°è£…äº†ä¸€äº›ç°æˆçš„æ¨¡å—ï¼Œä¾‹å¦‚ï¼šåŸºäºä¸Šä¸‹æ–‡ä¿¡æ¯çš„é—®ç­”ç³»ç»Ÿï¼Œè‡ªç„¶è¯­è¨€ç”Ÿæˆ SQL æŸ¥è¯¢ç­‰ç­‰ï¼Œå› ä¸ºå®ç°è¿™äº›ä»»åŠ¡çš„è¿‡ç¨‹å°±åƒå·¥ä½œæµä¸€æ ·ï¼Œä¸€æ­¥ä¸€æ­¥çš„æ‰§è¡Œï¼Œæ‰€ä»¥å«é“¾ (chain)ã€‚&lt;/p&gt;
&lt;p&gt;â— LCELï¼šLangChain Expression Language (LCEL)ï¼Œ langchain æ–°ç‰ˆæœ¬çš„æ ¸å¿ƒç‰¹æ€§ï¼Œç”¨äºè§£å†³å·¥ä½œæµç¼–æ’é—®é¢˜ï¼Œé€šè¿‡ LCEL è¡¨è¾¾å¼ï¼Œæˆ‘ä»¬å¯ä»¥çµæ´»çš„è‡ªå®šä¹‰ AI ä»»åŠ¡å¤„ç†æµç¨‹ï¼Œä¹Ÿå°±æ˜¯çµæ´»è‡ªå®šä¹‰é“¾ (Chain)ã€‚&lt;/p&gt;
&lt;p&gt;â— æ•°æ®å¢å¼ºç”Ÿæˆ (RAG)ï¼šå› ä¸ºå¤§æ¨¡å‹ (LLM) ä¸äº†è§£æ–°çš„ä¿¡æ¯ï¼Œæ— æ³•å›ç­”æ–°çš„é—®é¢˜ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥å°†æ–°çš„ä¿¡æ¯å¯¼å…¥åˆ° LLMï¼Œç”¨äºå¢å¼º LLM ç”Ÿæˆå†…å®¹çš„è´¨é‡ï¼Œè¿™ç§æ¨¡å¼å«åš RAG æ¨¡å¼(Retrieval Augmented Generation)ã€‚&lt;/p&gt;
&lt;p&gt;â— Agentsï¼šæ˜¯ä¸€ç§åŸºäºå¤§æ¨¡å‹ï¼ˆLLMï¼‰çš„åº”ç”¨è®¾è®¡æ¨¡å¼ï¼Œåˆ©ç”¨ LLM çš„è‡ªç„¶è¯­è¨€ç†è§£å’Œæ¨ç†èƒ½åŠ›ï¼ˆLLM ä½œä¸ºå¤§è„‘)ï¼‰ï¼Œæ ¹æ®ç”¨æˆ·çš„éœ€æ±‚è‡ªåŠ¨è°ƒç”¨å¤–éƒ¨ç³»ç»Ÿã€è®¾å¤‡å…±åŒå»å®Œæˆä»»åŠ¡ï¼Œä¾‹å¦‚ï¼šç”¨æˆ·è¾“å…¥ â€œæ˜å¤©è¯·å‡ä¸€å¤©â€ï¼Œ å¤§æ¨¡å‹ï¼ˆLLMï¼‰è‡ªåŠ¨è°ƒç”¨è¯·å‡ç³»ç»Ÿï¼Œå‘èµ·ä¸€ä¸ªè¯·å‡ç”³è¯·ã€‚&lt;/p&gt;
&lt;p&gt;â— æ¨¡å‹è®°å¿†ï¼ˆmemoryï¼‰ï¼šè®©å¤§æ¨¡å‹ (llm) è®°ä½ä¹‹å‰çš„å¯¹è¯å†…å®¹ï¼Œè¿™ç§èƒ½åŠ›æˆä¸ºæ¨¡å‹è®°å¿†ï¼ˆmemoryï¼‰ã€‚&lt;/p&gt;
&lt;h2 id=&#34;ä¸‰æ¡†æ¶ç»„æˆ&#34;&gt;ä¸‰ã€æ¡†æ¶ç»„æˆ&lt;/h2&gt;
&lt;h3 id=&#34;1-æ ¸å¿ƒç»„ä»¶&#34;&gt;1. æ ¸å¿ƒç»„ä»¶&lt;/h3&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code class=&#34;language-mermaid&#34; data-lang=&#34;mermaid&#34;&gt;graph TD
A[LangChainç”Ÿæ€] --&amp;gt; B[LangChainåº“]
A --&amp;gt; C[LangChainæ¨¡æ¿]
A --&amp;gt; D[LangServe]
A --&amp;gt; E[LangSmith]
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;figure 
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/langchain-%E6%A1%86%E6%9E%B6%E8%A7%A3%E6%9E%90/5.svg&#34; &gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/langchain-%E6%A1%86%E6%9E%B6%E8%A7%A3%E6%9E%90/5.svg&#34;
			
			
			
			loading=&#34;lazy&#34;
			alt=&#34;å®˜æ–¹æ¡†æ¶å›¾&#34;&gt;
	&lt;/a&gt;
	
	&lt;figcaption&gt;å®˜æ–¹æ¡†æ¶å›¾&lt;/figcaption&gt;
	
&lt;/figure&gt;&lt;/p&gt;
&lt;h3 id=&#34;2-åº“ç»“æ„&#34;&gt;2. åº“ç»“æ„&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;langchain-core&lt;/strong&gt;ï¼šåŸºç¡€æŠ½è±¡/è¡¨è¾¾å¼è¯­è¨€&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;langchain-community&lt;/strong&gt;ï¼šç¬¬ä¸‰æ–¹é›†æˆ&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;langchain&lt;/strong&gt;ï¼šé“¾/ä»£ç†/æ£€ç´¢å®ç°&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;3-æ”¯æŒå·¥å…·&#34;&gt;3. æ”¯æŒå·¥å…·&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;LangServe&lt;/strong&gt;ï¼šå°†é“¾å‘å¸ƒä¸ºREST API&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;LangSmith&lt;/strong&gt;ï¼šäº‘å¹³å°(è°ƒè¯•/ç›‘æ§)&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;å››ä»»åŠ¡å¤„ç†æµç¨‹&#34;&gt;å››ã€ä»»åŠ¡å¤„ç†æµç¨‹&lt;/h2&gt;
&lt;p&gt;&lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 260; 
			flex-basis: 625px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/langchain-%E6%A1%86%E6%9E%B6%E8%A7%A3%E6%9E%90/1.jpeg&#34; data-size=&#34;4000x1536&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/langchain-%E6%A1%86%E6%9E%B6%E8%A7%A3%E6%9E%90/1.jpeg&#34;
			width=&#34;4000&#34;
			height=&#34;1536&#34;
			srcset=&#34;https://zcj-git520.github.io/p/langchain-%E6%A1%86%E6%9E%B6%E8%A7%A3%E6%9E%90/1_hu97073836f6ba778688a6bd5e1d1fbe55_58268_480x0_resize_q75_box.jpeg 480w, https://zcj-git520.github.io/p/langchain-%E6%A1%86%E6%9E%B6%E8%A7%A3%E6%9E%90/1_hu97073836f6ba778688a6bd5e1d1fbe55_58268_1024x0_resize_q75_box.jpeg 1024w&#34;
			loading=&#34;lazy&#34;
			alt=&#34;å®˜æ–¹æµç¨‹å›¾&#34;&gt;
	&lt;/a&gt;
	
	&lt;figcaption&gt;å®˜æ–¹æµç¨‹å›¾&lt;/figcaption&gt;
	
&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;&lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 229; 
			flex-basis: 549px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/langchain-%E6%A1%86%E6%9E%B6%E8%A7%A3%E6%9E%90/2.png&#34; data-size=&#34;2550x1113&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/langchain-%E6%A1%86%E6%9E%B6%E8%A7%A3%E6%9E%90/2.png&#34;
			width=&#34;2550&#34;
			height=&#34;1113&#34;
			srcset=&#34;https://zcj-git520.github.io/p/langchain-%E6%A1%86%E6%9E%B6%E8%A7%A3%E6%9E%90/2_hu5ce32b48f6b0b2a32f0dbe69eefd8b16_144111_480x0_resize_box_3.png 480w, https://zcj-git520.github.io/p/langchain-%E6%A1%86%E6%9E%B6%E8%A7%A3%E6%9E%90/2_hu5ce32b48f6b0b2a32f0dbe69eefd8b16_144111_1024x0_resize_box_3.png 1024w&#34;
			loading=&#34;lazy&#34;
			alt=&#34;æµç¨‹å›¾2&#34;&gt;
	&lt;/a&gt;
	
	&lt;figcaption&gt;æµç¨‹å›¾2&lt;/figcaption&gt;
	
&lt;/figure&gt;&lt;/p&gt;
&lt;h3 id=&#34;æ¨¡å‹å°è£…ç±»å‹&#34;&gt;æ¨¡å‹å°è£…ç±»å‹&lt;/h3&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th style=&#34;text-align:left&#34;&gt;ç±»å‹&lt;/th&gt;
&lt;th style=&#34;text-align:left&#34;&gt;è¾“å…¥&lt;/th&gt;
&lt;th style=&#34;text-align:left&#34;&gt;è¾“å‡º&lt;/th&gt;
&lt;th style=&#34;text-align:left&#34;&gt;å…¸å‹åœºæ™¯&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;strong&gt;LLM&lt;/strong&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;æ–‡æœ¬&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;æ–‡æœ¬&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;åŸºç¡€é—®ç­”&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;strong&gt;Chat Model&lt;/strong&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;æ¶ˆæ¯åˆ—è¡¨&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;æ¶ˆæ¯&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;å¯¹è¯ç³»ç»Ÿ&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h2 id=&#34;äº”æ ¸å¿ƒæ¦‚å¿µ&#34;&gt;äº”ã€æ ¸å¿ƒæ¦‚å¿µ&lt;/h2&gt;
&lt;h3 id=&#34;1-llms-å¤§è¯­è¨€æ¨¡å‹&#34;&gt;1. LLMs (å¤§è¯­è¨€æ¨¡å‹)&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å®šä¹‰&lt;/strong&gt;ï¼šLangChainå°è£…çš„åŸºç¡€æ–‡æœ¬å¤„ç†æ¨¡å‹&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è¾“å…¥/è¾“å‡º&lt;/strong&gt;ï¼šæ¥æ”¶æ–‡æœ¬è¾“å…¥ â†’ è¿”å›æ–‡æœ¬ç»“æœ&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç‰¹ç‚¹&lt;/strong&gt;ï¼šé€šç”¨é—®ç­”æ¨¡å‹ï¼Œé€‚åˆåŸºç¡€æ–‡æœ¬ç”Ÿæˆä»»åŠ¡&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;2-chat-models-å¯¹è¯æ¨¡å‹&#34;&gt;2. Chat Models (å¯¹è¯æ¨¡å‹)&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å®šä¹‰&lt;/strong&gt;ï¼šä¸“ä¸ºå¯¹è¯åœºæ™¯è®¾è®¡çš„æ¨¡å‹&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è¾“å…¥/è¾“å‡º&lt;/strong&gt;ï¼šæ¥æ”¶æ¶ˆæ¯åˆ—è¡¨ â†’ è¿”å›å¯¹è¯æ¶ˆæ¯&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç‰¹ç‚¹&lt;/strong&gt;ï¼šæ”¯æŒå¤šè½®å¯¹è¯ä¸Šä¸‹æ–‡ç†è§£&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;3-æ¶ˆæ¯-message&#34;&gt;3. æ¶ˆæ¯ (Message)&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å®šä¹‰&lt;/strong&gt;ï¼šå¯¹è¯æ¨¡å‹çš„æ¶ˆæ¯å†…å®¹è½½ä½“&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ¶ˆæ¯ç±»å‹&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;HumanMessage&lt;/code&gt;ï¼šç”¨æˆ·è¾“å…¥æ¶ˆæ¯&lt;/li&gt;
&lt;li&gt;&lt;code&gt;AIMessage&lt;/code&gt;ï¼šAIç”Ÿæˆçš„å›å¤æ¶ˆæ¯&lt;/li&gt;
&lt;li&gt;&lt;code&gt;SystemMessage&lt;/code&gt;ï¼šç³»ç»Ÿçº§æŒ‡ä»¤æ¶ˆæ¯&lt;/li&gt;
&lt;li&gt;&lt;code&gt;FunctionMessage&lt;/code&gt;ï¼šå‡½æ•°è°ƒç”¨æ¶ˆæ¯&lt;/li&gt;
&lt;li&gt;&lt;code&gt;ToolMessage&lt;/code&gt;ï¼šå·¥å…·è°ƒç”¨æ¶ˆæ¯&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;4-æç¤º-prompts&#34;&gt;4. æç¤º (Prompts)&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;åŠŸèƒ½&lt;/strong&gt;ï¼šæç¤ºè¯ç®¡ç†å·¥å…·&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ ¸å¿ƒèƒ½åŠ›&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;æç¤ºæ¨¡æ¿åˆ›å»ºä¸ç®¡ç†&lt;/li&gt;
&lt;li&gt;åŠ¨æ€å†…å®¹æ ¼å¼åŒ–&lt;/li&gt;
&lt;li&gt;å¤šå˜é‡æ’å€¼æ”¯æŒ&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;5-è¾“å‡ºè§£æå™¨-output-parsers&#34;&gt;5. è¾“å‡ºè§£æå™¨ (Output Parsers)&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ä½œç”¨&lt;/strong&gt;ï¼šå¤„ç†LLMè¿”å›çš„æ–‡æœ¬å†…å®¹&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è½¬æ¢èƒ½åŠ›&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;æ–‡æœ¬ â†’ JSONæ ¼å¼&lt;/li&gt;
&lt;li&gt;æ–‡æœ¬ â†’ Pythonå¯¹è±¡&lt;/li&gt;
&lt;li&gt;ç»“æ„åŒ–æ•°æ®æå–&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;6-retrievers-æ£€ç´¢å™¨&#34;&gt;6. Retrievers (æ£€ç´¢å™¨)&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ç›®çš„&lt;/strong&gt;ï¼šå¢å¼ºLLMç§æœ‰æ•°æ®å¤„ç†èƒ½åŠ›&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åŠŸèƒ½&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;æ–‡æ¡£æ•°æ®åŠ è½½&lt;/li&gt;
&lt;li&gt;æ–‡æœ¬åˆ‡å‰²åˆ†å—&lt;/li&gt;
&lt;li&gt;æ•°æ®å­˜å‚¨ä¸æ£€ç´¢&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åº”ç”¨åœºæ™¯&lt;/strong&gt;ï¼šRAG(æ£€ç´¢å¢å¼ºç”Ÿæˆ)æ¶æ„æ ¸å¿ƒç»„ä»¶&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;7-å‘é‡å­˜å‚¨-vector-stores&#34;&gt;7. å‘é‡å­˜å‚¨ (Vector Stores)&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ä½œç”¨&lt;/strong&gt;ï¼šæ”¯æŒè¯­ä¹‰ç›¸ä¼¼æœç´¢&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç‰¹ç‚¹&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;å¤šç§å‘é‡æ•°æ®åº“é›†æˆ&lt;/li&gt;
&lt;li&gt;é«˜ç»´å‘é‡ç©ºé—´æ•°æ®ç®¡ç†&lt;/li&gt;
&lt;li&gt;ç›¸ä¼¼å†…å®¹æ£€ç´¢ä¼˜åŒ–&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;8-agents-æ™ºèƒ½ä½“&#34;&gt;8. Agents (æ™ºèƒ½ä½“)&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å®šä¹‰&lt;/strong&gt;ï¼šLLMé©±åŠ¨çš„åº”ç”¨è®¾è®¡æ¨¡å¼&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ ¸å¿ƒæ¶æ„&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å†³ç­–å¼•æ“&lt;/strong&gt;ï¼šLLMä½œä¸º&amp;quot;å¤§è„‘&amp;quot;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ‰§è¡Œç³»ç»Ÿ&lt;/strong&gt;ï¼šè‡ªåŠ¨è°ƒç”¨å¤–éƒ¨è®¾å¤‡/API&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å·¥ä½œæµç¨‹&lt;/strong&gt;ï¼š
&lt;ol&gt;
&lt;li&gt;æ¥æ”¶ç”¨æˆ·ä»»åŠ¡&lt;/li&gt;
&lt;li&gt;LLMåˆ†æå†³ç­–&lt;/li&gt;
&lt;li&gt;è°ƒç”¨å¤–éƒ¨ç³»ç»Ÿæ‰§è¡Œ&lt;/li&gt;
&lt;li&gt;è¿”å›ç»¼åˆç»“æœ&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;å…­åº”ç”¨åœºæ™¯&#34;&gt;å…­ã€åº”ç”¨åœºæ™¯&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å¯¹è¯æœºå™¨äºº&lt;/strong&gt;ï¼šå®¢æœ/èŠå¤©åŠ©æ‰‹&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;çŸ¥è¯†åº“é—®ç­”&lt;/strong&gt;ï¼šå¼€æ”¾åŸŸé—®é¢˜è§£ç­”&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ™ºèƒ½å†™ä½œ&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;åˆ›æ„å†™ä½œ&lt;/li&gt;
&lt;li&gt;æ–‡æœ¬æ‘˜è¦&lt;/li&gt;
&lt;li&gt;å†…å®¹ç”Ÿæˆ&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;ä¸ƒå¿«é€Ÿå…¥é—¨&#34;&gt;ä¸ƒã€å¿«é€Ÿå…¥é—¨&lt;/h2&gt;
&lt;h3 id=&#34;å®‰è£…æ­¥éª¤&#34;&gt;å®‰è£…æ­¥éª¤&lt;/h3&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;# Pipå®‰è£…
pip install langchain-openai

# è®¾ç½®APIå¯†é’¥
export OPENAI_API_KEY=&amp;quot;sk-...&amp;quot;
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&#34;åŸºç¡€ä½¿ç”¨&#34;&gt;åŸºç¡€ä½¿ç”¨&lt;/h3&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;logging&lt;/span&gt;
&lt;span class=&#34;kn&#34;&gt;from&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;langchain.prompts&lt;/span&gt; &lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;PromptTemplate&lt;/span&gt;

&lt;span class=&#34;kn&#34;&gt;from&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;common.modeCommon&lt;/span&gt; &lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Model&lt;/span&gt;
&lt;span class=&#34;kn&#34;&gt;from&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;config.config&lt;/span&gt; &lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Config&lt;/span&gt;

&lt;span class=&#34;s2&#34;&gt;&amp;#34;&amp;#34;&amp;#34;æç¤ºè¯æ¨¡æ¿
&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;æç¤ºè¯æ¨¡æ¿æœ¬è´¨ä¸Šè·Ÿå¹³æ—¶å¤§å®¶ä½¿ç”¨çš„é‚®ä»¶æ¨¡æ¿ã€çŸ­ä¿¡æ¨¡æ¿æ²¡ä»€ä¹ˆåŒºåˆ«ï¼Œå°±æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²æ¨¡æ¿ï¼Œæ¨¡æ¿å¯ä»¥åŒ…å«ä¸€ç»„æ¨¡æ¿å‚æ•°ï¼Œ
&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;é€šè¿‡æ¨¡æ¿å‚æ•°å€¼å¯ä»¥æ›¿æ¢æ¨¡æ¿å¯¹åº”çš„å‚æ•°ã€‚
&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;ä¸€ä¸ªæç¤ºè¯æ¨¡æ¿å¯ä»¥åŒ…å«ä¸‹é¢å†…å®¹ï¼š
&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;1ã€å‘ç»™å¤§è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰çš„æŒ‡ä»¤ã€‚
&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;2ã€ä¸€ç»„é—®ç­”ç¤ºä¾‹ï¼Œä»¥æé†’AIä»¥ä»€ä¹ˆæ ¼å¼è¿”å›è¯·æ±‚ã€‚
&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;3ã€å‘ç»™è¯­è¨€æ¨¡å‹çš„é—®é¢˜ã€‚
&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;&amp;#34;&amp;#34;&lt;/span&gt;


&lt;span class=&#34;k&#34;&gt;class&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;Prompt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;def&lt;/span&gt; &lt;span class=&#34;fm&#34;&gt;__init__&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt;
        &lt;span class=&#34;nb&#34;&gt;super&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Prompt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;fm&#34;&gt;__init__&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;

    &lt;span class=&#34;k&#34;&gt;def&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;create_prompt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;template&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;variables&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;list&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;PromptTemplate&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;PromptTemplate&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;input_variables&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;variables&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;template&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;template&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;

    &lt;span class=&#34;s2&#34;&gt;&amp;#34;&amp;#34;&amp;#34;
&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;    åˆ›å»ºåŸºç¡€çš„æ¨¡æ¿
&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;    1ã€ä½ æ˜¯è°
&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;    2ã€è¦å¹²ä»€ä¹ˆäº‹æƒ…
&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;    3ã€å¹²è¿™ä¸ªäº‹æƒ…éœ€è¦çš„ææ–™æ˜¯ä»€ä¹ˆ
&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;    4ã€æƒ³è¦ä»€ä¹ˆæ ·çš„ç»“æ„
&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;    &amp;#34;&amp;#34;&amp;#34;&lt;/span&gt;

    &lt;span class=&#34;k&#34;&gt;def&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;base_prompt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt;
        &lt;span class=&#34;c1&#34;&gt;# å®šä¹‰æç¤ºæ¨¡æ¿&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;template&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;&amp;#34;&amp;#34;
&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;          ä½ æ˜¯ä¸€ä¸ª&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;{domain}&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;é¢†åŸŸçš„èµ„æ·±&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;{profession}&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;          éœ€è¦åšä¸€ä¸‹äº‹æƒ…:
&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;          &lt;/span&gt;&lt;span class=&#34;si&#34;&gt;{do}&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;          ç»™ä½ ç›¸å…³ææ–™ä»¥ä¸‹:
&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;          &lt;/span&gt;&lt;span class=&#34;si&#34;&gt;{material}&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;          éœ€è¦è¿”å›ä»¥ä¸‹ä¿¡æ¯ï¼š
&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;          &lt;/span&gt;&lt;span class=&#34;si&#34;&gt;{question}&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;          &amp;#34;&amp;#34;&amp;#34;&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;create_prompt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;variables&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;domain&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;profession&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;do&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;material&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;question&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;],&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;template&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;template&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;

    &lt;span class=&#34;k&#34;&gt;def&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;base_prompt_invoke&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;domain&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;profession&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;do&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;material&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;question&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
            &lt;span class=&#34;s2&#34;&gt;&amp;#34;domain&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;domain&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
            &lt;span class=&#34;s2&#34;&gt;&amp;#34;profession&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;profession&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
            &lt;span class=&#34;s2&#34;&gt;&amp;#34;do&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;do&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
            &lt;span class=&#34;s2&#34;&gt;&amp;#34;material&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;material&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
            &lt;span class=&#34;s2&#34;&gt;&amp;#34;question&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;question&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
        &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

    &lt;span class=&#34;s2&#34;&gt;&amp;#34;&amp;#34;&amp;#34;
&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;    èŠå¤©æ¨¡å‹ï¼ˆChat Modelï¼‰ä»¥èŠå¤©æ¶ˆæ¯åˆ—è¡¨ä½œä¸ºè¾“å…¥ï¼Œ
&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;    è¿™ä¸ªèŠå¤©æ¶ˆæ¯åˆ—è¡¨çš„æ¶ˆæ¯å†…å®¹ä¹Ÿå¯ä»¥é€šè¿‡æç¤ºè¯æ¨¡æ¿è¿›è¡Œç®¡ç†ã€‚
&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;    è¿™äº›èŠå¤©æ¶ˆæ¯ä¸åŸå§‹å­—ç¬¦ä¸²ä¸åŒï¼Œå› ä¸ºæ¯ä¸ªæ¶ˆæ¯éƒ½ä¸â€œè§’è‰²(role)â€ç›¸å…³è”ã€‚
&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;    1ã€éœ€è¦ç»™å®šèŠå¤©ä¸­è§’è‰²
&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;    2ã€ç»™å®šçš„èŠå¤©å†…å®¹æ˜¯ä»€ä¹ˆ
&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;    &amp;#34;&amp;#34;&amp;#34;&lt;/span&gt;

    &lt;span class=&#34;k&#34;&gt;def&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;chat_prompt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;template&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;&amp;#34;&amp;#34;&amp;#34;
&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;        è¿™ä¸ªä¸€ä¸ªèŠå¤©çš„åœºæ™¯ï¼š
&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;            (&amp;#34;system&amp;#34;, &amp;#34;ä½ æ˜¯ä¸€ä½&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;{role}&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;),
&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;            (&amp;#34;human&amp;#34;, &amp;#34;æˆ‘æ˜¯&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;{human_role}&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;),
&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;            (&amp;#34;human&amp;#34;, &amp;#34;&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;{user_input}&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;),
&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;        &amp;#34;&amp;#34;&amp;#34;&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;create_prompt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;variables&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;role&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;human_role&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;user_input&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;],&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;template&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;template&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;

    &lt;span class=&#34;k&#34;&gt;def&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;chat_prompt_invoke&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;role&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;human_role&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;user_input&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
            &lt;span class=&#34;s2&#34;&gt;&amp;#34;role&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;role&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
            &lt;span class=&#34;s2&#34;&gt;&amp;#34;human_role&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;human_role&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
            &lt;span class=&#34;s2&#34;&gt;&amp;#34;user_input&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;user_input&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
        &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;


&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;vm&#34;&gt;__name__&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;__main__&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;logging&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;basicConfig&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;level&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;logging&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;INFO&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    &lt;span class=&#34;c1&#34;&gt;# åˆå§‹åŒ–æ¨¡å‹é…ç½®&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;config&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Config&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;conf/config.yml&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    &lt;span class=&#34;c1&#34;&gt;# åˆå§‹åŒ–æ¨¡å‹&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;model&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Model&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;config&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    &lt;span class=&#34;c1&#34;&gt;# # è°ƒç”¨qwenæ¨¡å‹&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;prompt&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Prompt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;base_prompt&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;prompt&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;base_prompt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;chain&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;model&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;qwen_llm_china&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;base_prompt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;result&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;chain&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;invoke&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;prompt&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;base_prompt_invoke&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;ç³»ç»Ÿè¿ç»´&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;è¿ç»´é«˜çº§å·¥ç¨‹å¸ˆ&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;æƒ³ç†è§£äº¤æ¢æœºåŸç†&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
                                                &lt;span class=&#34;s2&#34;&gt;&amp;#34;æ— &amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;ç®€çŸ­æ–‡å­—è¾“å‡º&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)))&lt;/span&gt;
    &lt;span class=&#34;nb&#34;&gt;print&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;result&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;text&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;])&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;chat_prompt&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;prompt&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;chat_prompt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;chain&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;model&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;qwen_llm_china&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;chat_prompt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;result&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;chain&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;invoke&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;prompt&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;chat_prompt_invoke&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;å¿ƒç†å­¦å®¶&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;å¿ƒç†æ‚£è€…&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;æ€ä¹ˆæ‰èƒ½è®©å¿ƒæƒ…å˜å¥½ï¼Œæ‹’ç»æŠ‘éƒå‘¢&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;))&lt;/span&gt;
    &lt;span class=&#34;nb&#34;&gt;print&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;result&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;text&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;])&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;langchain-æ€ç»´å¯¼å›¾&#34;&gt;LangChain æ€ç»´å¯¼å›¾&lt;/h2&gt;
&lt;p&gt;&lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 163; 
			flex-basis: 392px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/langchain-%E6%A1%86%E6%9E%B6%E8%A7%A3%E6%9E%90/3.png&#34; data-size=&#34;3299x2015&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/langchain-%E6%A1%86%E6%9E%B6%E8%A7%A3%E6%9E%90/3.png&#34;
			width=&#34;3299&#34;
			height=&#34;2015&#34;
			srcset=&#34;https://zcj-git520.github.io/p/langchain-%E6%A1%86%E6%9E%B6%E8%A7%A3%E6%9E%90/3_hud2fc26f07bb0da703052ea50948fff98_578884_480x0_resize_box_3.png 480w, https://zcj-git520.github.io/p/langchain-%E6%A1%86%E6%9E%B6%E8%A7%A3%E6%9E%90/3_hud2fc26f07bb0da703052ea50948fff98_578884_1024x0_resize_box_3.png 1024w&#34;
			loading=&#34;lazy&#34;
			alt=&#34;æ•´ä½“æ€ç»´å¯¼å›¾&#34;&gt;
	&lt;/a&gt;
	
	&lt;figcaption&gt;æ•´ä½“æ€ç»´å¯¼å›¾&lt;/figcaption&gt;
	
&lt;/figure&gt;&lt;/p&gt;
&lt;h2 id=&#34;ä»£ç ä»“åº“è·¯å¾„&#34;&gt;ä»£ç ä»“åº“è·¯å¾„&lt;/h2&gt;
&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;https://github.com/zcj-git520/AiLargeModel&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;zcj-git520/AiLargeModel: å¤§æ¨¡å‹åº”ç”¨å¼€å‘å­¦ä¹ &lt;/a&gt;&lt;/p&gt;
</description>
        </item>
        <item>
        <title>Prometheus ç›‘æ§ä½“ç³»</title>
        <link>https://zcj-git520.github.io/p/prometheus-%E7%9B%91%E6%8E%A7%E4%BD%93%E7%B3%BB/</link>
        <pubDate>Sat, 25 Nov 2023 22:00:38 +0800</pubDate>
        
        <guid>https://zcj-git520.github.io/p/prometheus-%E7%9B%91%E6%8E%A7%E4%BD%93%E7%B3%BB/</guid>
        <description>&lt;img src="https://zcj-git520.github.io/p/prometheus-%E7%9B%91%E6%8E%A7%E4%BD%93%E7%B3%BB/1.png" alt="Featured image of post Prometheus ç›‘æ§ä½“ç³»" /&gt;&lt;h1 id=&#34;prometheus-ç›‘æ§ä½“ç³»åŸç†å®è·µé…ç½®ä¸æ‹“å±•&#34;&gt;Prometheus ç›‘æ§ä½“ç³»ï¼šåŸç†ã€å®è·µã€é…ç½®ä¸æ‹“å±•&lt;/h1&gt;
&lt;p&gt;åœ¨ç°ä»£å¤æ‚ç³»ç»Ÿæ¶æ„é‡Œï¼Œç›‘æ§ä½“ç³»æ˜¯ä¿éšœç³»ç»Ÿç¨³å®šè¿è¡Œã€å¿«é€Ÿæ’éšœçš„å…³é”®ã€‚Prometheus å‡­å€Ÿæ ‡å‡†åŒ–æ•°æ®æµç¨‹ã€çµæ´»æ‹“å±•èƒ½åŠ›ï¼Œæˆä¸ºäº‘åŸç”Ÿç›‘æ§çš„æ ¸å¿ƒæ–¹æ¡ˆã€‚æœ¬æ–‡ç»“åˆæ¶æ„è®¾è®¡ï¼Œæ·±åº¦æ‹†è§£å…¶åŸç†ã€å®è·µä¸é…ç½®è¦ç‚¹ï¼Œæ•™ä½ æ­å»ºå…¨é“¾è·¯å¯è§‚æµ‹ä½“ç³»ã€‚&lt;/p&gt;
&lt;h2 id=&#34;ä¸€æ•°æ®æ ¼å¼ç›‘æ§çš„-é€šç”¨è¯­è¨€&#34;&gt;ä¸€ã€æ•°æ®æ ¼å¼ï¼šç›‘æ§çš„ â€œé€šç”¨è¯­è¨€â€&lt;/h2&gt;
&lt;p&gt;Prometheus ç”¨æ ‡å‡†åŒ–æ ¼å¼å®šä¹‰æŒ‡æ ‡ï¼Œè®©ç›‘æ§æ•°æ®æœ‰æ¸…æ™°è¯­ä¹‰ï¼Œæ˜¯åˆ†æçš„åŸºç¡€ã€‚&lt;/p&gt;
&lt;h3 id=&#34;ä¸€æŒ‡æ ‡æ ‡è¯†è§„åˆ™&#34;&gt;ï¼ˆä¸€ï¼‰æŒ‡æ ‡æ ‡è¯†è§„åˆ™&lt;/h3&gt;
&lt;p&gt;æŒ‡æ ‡æ ¼å¼ä¸º &lt;!-- raw HTML omitted --&gt;{&lt;!-- raw HTML omitted --&gt;=&lt;!-- raw HTML omitted --&gt;, &amp;hellip;} ï¼Œæ¯”å¦‚ api_http_requests_total{method=&amp;ldquo;POST&amp;rdquo;, handler=&amp;quot;/messages&amp;quot;} ï¼Œæ‹†è§£æ¥çœ‹ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æŒ‡æ ‡åç§°&lt;/strong&gt;ï¼šè¦èƒ½ç›´è§‚ä½“ç°ç›‘æ§å†…å®¹ï¼Œåƒ http_request_total å°±æ˜¯è®°å½• HTTP è¯·æ±‚æ€»é‡ ã€‚å‘½åå¾—ç¬¦åˆæ­£åˆ™ [a-zA-Z_:][a-zA-Z0-9_:]* ï¼Œç”¨ ASCII å­—ç¬¦ã€æ•°å­—ã€ä¸‹åˆ’çº¿ã€å†’å·ç»„åˆï¼Œåº•å±‚å®é™…å­˜æˆ &lt;strong&gt;name&lt;/strong&gt;=&lt;!-- raw HTML omitted --&gt; ï¼Œæ–¹ä¾¿ç³»ç»Ÿè¯†åˆ«ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ ‡ç­¾ï¼ˆLabelï¼‰&lt;/strong&gt;ï¼šç”¨æ¥æè¿°æ ·æœ¬ç‰¹å¾ï¼Œæ–¹ä¾¿åç»­è¿‡æ»¤ã€èšåˆæ•°æ®ã€‚åç§°å¾—æ˜¯ [a-zA-Z_][a-zA-Z0-9_]* è§„åˆ™çš„ ASCII ç»„åˆï¼Œ__ å¼€å¤´æ˜¯ç³»ç»Ÿä¿ç•™çš„ï¼Œåˆ«ä¹±ç”¨ï¼›å€¼å°±çµæ´»å¤šäº†ï¼Œä»»æ„ Unicode å­—ç¬¦éƒ½è¡Œï¼Œé€‚é…å„ç§ä¸šåŠ¡åœºæ™¯æ‰“æ ‡ç­¾ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;äºŒæ—¶é—´åºåˆ—ä¸æ ·æœ¬æ„æˆ&#34;&gt;ï¼ˆäºŒï¼‰æ—¶é—´åºåˆ—ä¸æ ·æœ¬æ„æˆ&lt;/h3&gt;
&lt;p&gt;Prometheus æŠŠç›‘æ§æ•°æ®å­˜æˆ&lt;strong&gt;æ—¶é—´åºåˆ—ï¼ˆtime-seriesï¼‰&lt;/strong&gt;ï¼Œæ¯ä¸ªåºåˆ—ç”± â€œæŒ‡æ ‡åç§° + æ ‡ç­¾é›†â€ å”¯ä¸€ç¡®å®šã€‚åºåˆ—é‡Œçš„ ** æ ·æœ¬ï¼ˆsampleï¼‰** åŒ…å«ä¸‰éƒ¨åˆ†ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æŒ‡æ ‡ï¼ˆmetricï¼‰&lt;/strong&gt;ï¼šåç§°åŠ æ ‡ç­¾é›†ï¼Œç²¾å‡†æè¿°æ ·æœ¬ç‰¹å¾ï¼›&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ—¶é—´æˆ³ï¼ˆtimestampï¼‰&lt;/strong&gt;ï¼šç²¾ç¡®åˆ°æ¯«ç§’ï¼Œè®°å½•æ•°æ®äº§ç”Ÿçš„æ—¶åˆ»ï¼›&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ ·æœ¬å€¼ï¼ˆvalueï¼‰&lt;/strong&gt;ï¼šç”¨ float64 æµ®ç‚¹å‹ï¼Œå­˜å…·ä½“çš„ç›‘æ§æ•°å€¼ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;ä¸‰å››ç§æ ¸å¿ƒæŒ‡æ ‡ç±»å‹&#34;&gt;ï¼ˆä¸‰ï¼‰å››ç§æ ¸å¿ƒæŒ‡æ ‡ç±»å‹&lt;/h3&gt;
&lt;p&gt;ä¸ºäº†è¦†ç›–ä¸åŒç›‘æ§åœºæ™¯ï¼ŒPrometheus è®¾è®¡äº†å››ç±»æŒ‡æ ‡ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Counterï¼ˆè®¡æ•°å™¨ï¼‰&lt;/strong&gt;ï¼šåªä¼šå•è°ƒé€’å¢ï¼Œé€‚åˆç»Ÿè®¡è¯·æ±‚æ•°ã€ä»»åŠ¡å®Œæˆæ•°ã€é”™è¯¯æ¬¡æ•°è¿™äº›ï¼Œä¸€ç›´å¾€ä¸ŠåŠ ï¼Œä¸ä¼šé™ã€‚æ¯”å¦‚ç»Ÿè®¡ httpè¯·æ±‚æ€»æ•° ï¼Œå°±ç”¨å®ƒã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Gaugeï¼ˆä»ªè¡¨ç›˜ï¼‰&lt;/strong&gt;ï¼šæ•°å€¼å¯å¢å¯å‡ï¼Œåƒå†…å­˜ä½¿ç”¨ç‡ã€å½“å‰å¹¶å‘è¯·æ±‚æ•°è¿™ç§åŠ¨æ€å˜åŒ–çš„ï¼Œå°±ç”¨å®ƒã€‚è¿˜æ”¯æŒåšæ±‚å’Œã€ç®—å‡å€¼ã€æ‰¾æå€¼è¿™äº›è®¡ç®—ï¼Œæ¯”å¦‚ node_memory_MemFree çœ‹ä¸»æœºç©ºé—²å†…å­˜ ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Histogramï¼ˆç›´æ–¹å›¾ï¼‰&lt;/strong&gt;ï¼šä¸»è¦ç”¨æ¥åˆ†æè¯·æ±‚è€—æ—¶ã€å“åº”å¤§å°è¿™ç±»æ•°æ®çš„åˆ†å¸ƒã€‚é€šè¿‡ â€œå­˜å‚¨æ¡¶ï¼ˆbucketï¼‰â€ ç»Ÿè®¡ï¼Œèƒ½è®°å½•æ ·æœ¬æ€»å’Œï¼ˆsumï¼‰ã€æ¬¡æ•°ï¼ˆcountï¼‰è¿˜æœ‰æ¡¶çš„è¾¹ç•Œï¼Œåƒåˆ†æç£ç›˜ä½¿ç”¨ç‡ã€è¯·æ±‚æ€»æ¬¡æ•°åˆ†å¸ƒï¼Œå°±é å®ƒã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Summaryï¼ˆæ‘˜è¦ï¼‰&lt;/strong&gt;ï¼šç›´æ¥å­˜åˆ†ä½æ•°ï¼ˆå®¢æˆ·ç«¯è‡ªå·±ç®—å¥½ï¼‰ï¼Œä¸ç”¨åƒ Histogram é‚£æ ·ä¾èµ–å‡½æ•°ç®—ã€‚è¦æ˜¯æƒ³ç²¾å‡†ç»Ÿè®¡è¯·æ±‚è€—æ—¶ã€å“åº”å¤§å°çš„åˆ†ä½æƒ…å†µï¼Œæ¯”å¦‚ go_gc_duration_seconds_count çœ‹ GC æ€»æ¬¡æ•° ï¼Œç”¨å®ƒå°±å¾ˆæ–¹ä¾¿ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;äºŒä¼ è¾“åè®®ä¸æ–¹å¼æ•°æ®æ€ä¹ˆ-è·‘-èµ·æ¥&#34;&gt;äºŒã€ä¼ è¾“åè®®ä¸æ–¹å¼ï¼šæ•°æ®æ€ä¹ˆ â€œè·‘â€ èµ·æ¥&lt;/h2&gt;
&lt;p&gt;ç›‘æ§æ•°æ®è¦åœ¨æœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯ä¹‹é—´ä¼ è¾“ï¼Œå¾—ç¡®å®šå¥½åè®®å’Œæ–¹å¼ï¼Œä¿è¯é‡‡é›†é«˜æ•ˆã€ç¨³å®šã€‚&lt;/p&gt;
&lt;h3 id=&#34;ä¸€ä¼ è¾“åè®®&#34;&gt;ï¼ˆä¸€ï¼‰ä¼ è¾“åè®®&lt;/h3&gt;
&lt;p&gt;Prometheus æœ€å¸¸ç”¨çš„æ˜¯ &lt;strong&gt;HTTP åè®®&lt;/strong&gt; æ¥æ‹‰æ•°æ®ï¼Œé…ç½®å¥½ agent çš„ HTTP æ¥å£ï¼Œå®šæ—¶å‘ GET è¯·æ±‚å»é‡‡é›†ã€‚å½“ç„¶ï¼Œä¹Ÿæ”¯æŒæœ¬åœ°æ–‡ä»¶ã€RPCã€é˜Ÿåˆ—è¿™äº›æ–¹å¼ï¼Œçµæ´»é€‚é…ä¸åŒéƒ¨ç½²æƒ…å†µã€‚æ¯”å¦‚ç›‘æ§æœåŠ¡å’Œ agent åœ¨åŒä¸€å°æœºå™¨ï¼Œå°±å¯ä»¥æœ¬åœ°è¯»æ–‡ä»¶ï¼›è·¨æœºå™¨éƒ¨ç½²ï¼Œå°±ç”¨ç½‘ç»œåè®®ä¼ è¾“ã€‚&lt;/p&gt;
&lt;h3 id=&#34;äºŒä¼ è¾“æ–¹å¼&#34;&gt;ï¼ˆäºŒï¼‰ä¼ è¾“æ–¹å¼&lt;/h3&gt;
&lt;p&gt;ä»ç›‘æ§æœåŠ¡å™¨çš„è§’åº¦çœ‹ï¼Œæœ‰ä¸¤ç§ä¼ è¾“æ¨¡å¼ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ä¸»åŠ¨æ‹‰å–ï¼ˆPullï¼‰&lt;/strong&gt;ï¼šPrometheus ä¸»åŠ¨å‡ºå‡»ï¼Œå®šæ—¶è°ƒç”¨ agent çš„ HTTP æ¥å£æˆ–è€… RPC æ–¹æ³•ï¼ŒæŠŠæ•°æ®æ‹¿è¿‡æ¥ã€‚åƒç”¨ node_exporter æ‹‰å–ä¸»æœºæŒ‡æ ‡ï¼Œå°±æ˜¯å…¸å‹çš„ä¸»åŠ¨æ‹‰å–ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;è¢«åŠ¨æ¨é€ï¼ˆPushï¼‰&lt;/strong&gt;ï¼šagent ä¸»åŠ¨æŠŠæ•°æ®æ¨åˆ°é˜Ÿåˆ—æˆ–è€…æ•°æ®åº“é‡Œï¼ŒPrometheus å†å®šæ—¶ä»è¿™äº›åœ°æ–¹æŠŠæ•°æ®æå‡ºæ¥ã€‚è¿™ç§é€‚åˆé‚£äº›æ²¡åŠæ³•ä¸»åŠ¨æš´éœ²æ¥å£çš„åœºæ™¯ï¼Œæ¯”å¦‚æœ‰äº›ç¬¬ä¸‰æ–¹æœåŠ¡çš„ç›‘æ§ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;ä¸‰æ‹“å±•ç›‘æ§å¯¹è±¡è®©ç›‘æ§-è§¦è§’-æ›´å…¨&#34;&gt;ä¸‰ã€æ‹“å±•ç›‘æ§å¯¹è±¡ï¼šè®©ç›‘æ§ â€œè§¦è§’â€ æ›´å…¨&lt;/h2&gt;
&lt;p&gt;ç³»ç»Ÿé‡Œçš„ç›‘æ§å¯¹è±¡å¤šç§å¤šæ ·ï¼Œå¾—é’ˆå¯¹æ€§å¤„ç†ï¼Œä¿è¯ç›‘æ§ä½“ç³»èƒ½æ‰©å±•ã€‚&lt;/p&gt;
&lt;h3 id=&#34;ä¸€ä¸¤ç±»ç›‘æ§å¯¹è±¡çš„é€‚é…æ–¹æ³•&#34;&gt;ï¼ˆä¸€ï¼‰ä¸¤ç±»ç›‘æ§å¯¹è±¡çš„é€‚é…æ–¹æ³•&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;èƒ½éƒ¨ç½² agent çš„åœºæ™¯&lt;/strong&gt;ï¼šåƒå¾®æœåŠ¡è¿™ç§ï¼Œç›´æ¥åœ¨è¦ç›‘æ§çš„å¯¹è±¡ä¸Šè£… agentï¼ˆæ¯”å¦‚ exporter ï¼‰ã€‚agent è´Ÿè´£é‡‡é›†è¿è¡Œæ•°æ®ï¼ŒæŒ‰ç…§ Prometheus çš„æ ¼å¼æ‰“åŒ…å¥½ï¼Œå†é€šè¿‡ä¸»åŠ¨æˆ–è€…è¢«åŠ¨çš„æ–¹å¼ï¼ŒæŠŠæ•°æ®ä¼ ç»™æœåŠ¡ç«¯ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å—é™åœºæ™¯ï¼ˆæ²¡æ³•éƒ¨ç½² / æ”¹ä»£ç ï¼‰&lt;/strong&gt;ï¼šåƒ MySQLã€Redis è¿™äº›ä¸­é—´ä»¶ï¼Œæˆ–è€…æ·˜å®ã€ç™¾åº¦è¿™ç±»ç¬¬ä¸‰æ–¹æœåŠ¡ï¼Œå°±å¾—ç”¨ â€œä¸­é—´ agentâ€ã€‚ä¸­é—´ agent å»è¿æ¥ç›®æ ‡æœåŠ¡ï¼ˆæ¯”å¦‚ç”¨ MySQL åè®®ã€è°ƒç”¨ç¬¬ä¸‰æ–¹ API ï¼‰ï¼ŒæŠŠè¿è¡ŒçŠ¶æ€ï¼ˆè¿æ¥æ•°ã€å¥åº·çŠ¶æ€è¿™äº› ï¼‰é‡‡é›†è¿‡æ¥ï¼Œå†æŒ‰ç…§ Prometheus çš„æ ¼å¼å°è£…å¥½ï¼Œæä¾›æ¥å£è®© Prometheus æ‹‰å–ï¼Œæˆ–è€…ç›´æ¥ä¸»åŠ¨æŠŠæ•°æ®æ¨è¿‡å»ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;äºŒæ‹“å±•çš„æ ¸å¿ƒæ¡ä»¶&#34;&gt;ï¼ˆäºŒï¼‰æ‹“å±•çš„æ ¸å¿ƒæ¡ä»¶&lt;/h3&gt;
&lt;p&gt;ä¸ç®¡ç›‘æ§å•¥å¯¹è±¡ï¼Œæƒ³æ‹“å±•ç›‘æ§ä½“ç³»ï¼Œå¾—æ»¡è¶³è¿™äº›æ¡ä»¶ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;agent ä¾èµ–&lt;/strong&gt;ï¼šç›®æ ‡å¯¹è±¡å¾—èƒ½è¢« agent é‡‡é›†åˆ°ï¼Œè¦ä¹ˆç›´æ¥è£… agentï¼Œè¦ä¹ˆé€šè¿‡ä¸­é—´ agent ä»£ç†ï¼›&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ ¼å¼ç»Ÿä¸€&lt;/strong&gt;ï¼šæ•°æ®å¿…é¡»ä¸¥æ ¼æŒ‰ç…§ Prometheus çš„æŒ‡æ ‡æ ¼å¼æ¥ï¼Œè¿™æ ·æ‰èƒ½è¢«è¯†åˆ«ï¼›&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;åè®®å’Œæ–¹å¼ä¸€è‡´&lt;/strong&gt;ï¼šä¼ è¾“ç”¨çš„åè®®ï¼ˆHTTP/RPC è¿™äº› ï¼‰ã€ä¼ è¾“æ–¹å¼ï¼ˆæ‹‰å–è¿˜æ˜¯æ¨é€ ï¼‰ï¼Œå¾—å’Œæ•´ä¸ªç›‘æ§ä½“ç³»åŒ¹é…ä¸Šï¼›&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æœåŠ¡ç«¯é…ç½®&lt;/strong&gt;ï¼šPrometheus è¿™è¾¹å¾—é…ç½®å¥½å¯¹åº”çš„é‡‡é›†æ¥å£ã€å®šæ—¶ä»»åŠ¡ï¼Œä¿è¯èƒ½æŒç»­æ‹¿åˆ°æ•°æ®ã€‚è¦æ˜¯åŠ¨æ€æ›´æ–°ç›‘æ§å¯¹è±¡ï¼Œè¿˜å¾—é€šè¿‡é…ç½®æœåŠ¡å®ç°çƒ­åŠ è½½ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;å››prometheus-ä¸-grafana-äº¤äº’è®©æ•°æ®-çœ‹å¾—è§&#34;&gt;å››ã€Prometheus ä¸ Grafana äº¤äº’ï¼šè®©æ•°æ® â€œçœ‹å¾—è§â€&lt;/h2&gt;
&lt;p&gt;Grafana æ˜¯å¯è§†åŒ–çš„å¥½å¸®æ‰‹ï¼Œå’Œ Prometheus é…åˆèµ·æ¥ï¼Œèƒ½æŠŠç›‘æ§æ•°æ®å˜æˆç›´è§‚çš„å›¾è¡¨ã€‚ä»¥ç›‘æ§ä¸»æœºä¸ºä¾‹ï¼Œæµç¨‹æ˜¯è¿™æ ·çš„ï¼š&lt;/p&gt;
&lt;h3 id=&#34;ä¸€éƒ¨ç½²-exporter&#34;&gt;ï¼ˆä¸€ï¼‰éƒ¨ç½² exporter&lt;/h3&gt;
&lt;p&gt;åœ¨ä¸»æœºä¸Šè£… node_exporter ï¼Œå®ƒä¼šé‡‡é›†ä¸»æœºçš„å„ç§ä¿¡æ¯ï¼Œåƒ CPUã€å†…å­˜ã€ç£ç›˜è¿™äº›ï¼Œç„¶åæš´éœ²ä¸€ä¸ª HTTP æ¥å£ï¼ŒæŠŠ metrics æ•°æ®æä¾›å‡ºå»ã€‚&lt;/p&gt;
&lt;p&gt;&lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 232; 
			flex-basis: 557px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/prometheus-%E7%9B%91%E6%8E%A7%E4%BD%93%E7%B3%BB/2.jpg&#34; data-size=&#34;1279x551&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/prometheus-%E7%9B%91%E6%8E%A7%E4%BD%93%E7%B3%BB/2.jpg&#34;
			width=&#34;1279&#34;
			height=&#34;551&#34;
			srcset=&#34;https://zcj-git520.github.io/p/prometheus-%E7%9B%91%E6%8E%A7%E4%BD%93%E7%B3%BB/2_hu0beb00594f518ccad4aa81eb1d4d83eb_74848_480x0_resize_q75_box.jpg 480w, https://zcj-git520.github.io/p/prometheus-%E7%9B%91%E6%8E%A7%E4%BD%93%E7%B3%BB/2_hu0beb00594f518ccad4aa81eb1d4d83eb_74848_1024x0_resize_q75_box.jpg 1024w&#34;
			loading=&#34;lazy&#34;
			&gt;
	&lt;/a&gt;
	
&lt;/figure&gt;&lt;/p&gt;
&lt;h3 id=&#34;äºŒprometheus-é…ç½®&#34;&gt;ï¼ˆäºŒï¼‰Prometheus é…ç½®&lt;/h3&gt;
&lt;p&gt;åœ¨ Prometheus æœåŠ¡ç«¯ï¼ŒæŠŠ node_exporter çš„æ¥å£é…ç½®å¥½ï¼Œå®šæ—¶å»æ‹‰å–æ•°æ®ã€‚æ‹‰å›æ¥ä¹‹åï¼Œå…ˆæ ¼å¼åŒ–å¤„ç†ï¼Œå†å­˜åˆ°å†…å­˜æ•°æ®åº“é‡Œï¼ˆä¹Ÿä¼šæŒä¹…åŒ–åˆ°ç¡¬ç›˜ ï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;&lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 322; 
			flex-basis: 774px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/prometheus-%E7%9B%91%E6%8E%A7%E4%BD%93%E7%B3%BB/3.jpg&#34; data-size=&#34;1103x342&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/prometheus-%E7%9B%91%E6%8E%A7%E4%BD%93%E7%B3%BB/3.jpg&#34;
			width=&#34;1103&#34;
			height=&#34;342&#34;
			srcset=&#34;https://zcj-git520.github.io/p/prometheus-%E7%9B%91%E6%8E%A7%E4%BD%93%E7%B3%BB/3_hud64e9824c5fd5b7829117ceff45b030e_37802_480x0_resize_q75_box.jpg 480w, https://zcj-git520.github.io/p/prometheus-%E7%9B%91%E6%8E%A7%E4%BD%93%E7%B3%BB/3_hud64e9824c5fd5b7829117ceff45b030e_37802_1024x0_resize_q75_box.jpg 1024w&#34;
			loading=&#34;lazy&#34;
			&gt;
	&lt;/a&gt;
	
&lt;/figure&gt;&lt;/p&gt;
&lt;h3 id=&#34;ä¸‰grafana-å¯¹æ¥&#34;&gt;ï¼ˆä¸‰ï¼‰Grafana å¯¹æ¥&lt;/h3&gt;
&lt;p&gt;Grafana çš„åç«¯è¦é…ç½® Prometheus ä½œä¸ºæ•°æ®æºï¼Œæ ¹æ®å¯è§†åŒ–çš„éœ€æ±‚ï¼ˆæ¯”å¦‚åšä¸ªå¤§å±æ¨¡æ¿ ï¼‰ï¼Œä» Prometheus é‡ŒæŠŠæŒ‡æ ‡æ•°æ®æ‹‰è¿‡æ¥ã€‚å‰ç«¯å†æŠŠè¿™äº›æ•°æ®æ¸²æŸ“å‡ºæ¥ï¼Œç›´è§‚åœ°å±•ç¤ºåœ¨ç›‘æ§å¤§å±ä¸Šï¼Œå®Œæˆ â€œæ•°æ®é‡‡é›†â†’å­˜å‚¨â†’å¯è§†åŒ–â€ çš„é—­ç¯ã€‚å¦å¤–ï¼ŒPrometheus å’Œ Grafana éƒ½æœ‰ APIï¼Œæ”¯æŒè‡ªå®šä¹‰çš„æ•°æ®äº¤äº’ï¼Œæ¯”å¦‚äºŒæ¬¡å¼€å‘ã€å¯¼å‡ºæ•°æ®å•¥çš„ã€‚&lt;/p&gt;
&lt;p&gt;&lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 230; 
			flex-basis: 552px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/prometheus-%E7%9B%91%E6%8E%A7%E4%BD%93%E7%B3%BB/4.jpg&#34; data-size=&#34;1896x823&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/prometheus-%E7%9B%91%E6%8E%A7%E4%BD%93%E7%B3%BB/4.jpg&#34;
			width=&#34;1896&#34;
			height=&#34;823&#34;
			srcset=&#34;https://zcj-git520.github.io/p/prometheus-%E7%9B%91%E6%8E%A7%E4%BD%93%E7%B3%BB/4_hu702e001a5f65417ca145099069521469_274969_480x0_resize_q75_box.jpg 480w, https://zcj-git520.github.io/p/prometheus-%E7%9B%91%E6%8E%A7%E4%BD%93%E7%B3%BB/4_hu702e001a5f65417ca145099069521469_274969_1024x0_resize_q75_box.jpg 1024w&#34;
			loading=&#34;lazy&#34;
			&gt;
	&lt;/a&gt;
	
&lt;/figure&gt;&lt;/p&gt;
&lt;h2 id=&#34;äº”åŠ¨æ€æ›´æ–°ç›‘æ§å¯¹è±¡è®©ç›‘æ§-æ›´èªæ˜&#34;&gt;äº”ã€åŠ¨æ€æ›´æ–°ç›‘æ§å¯¹è±¡ï¼šè®©ç›‘æ§ â€œæ›´èªæ˜â€&lt;/h2&gt;
&lt;p&gt;Prometheus éœ€è¦åŠ¨æ€é€‚åº”ç›‘æ§å¯¹è±¡çš„å˜åŒ–ï¼Œå®ç°&lt;strong&gt;çƒ­åŠ è½½&lt;/strong&gt;ï¼Œè¿™æ ·ä¸ç”¨é‡å¯æœåŠ¡ï¼Œå°±èƒ½æ›´æ–°ç›‘æ§é…ç½®ã€‚&lt;/p&gt;
&lt;h3 id=&#34;ä¸€é…ç½®æœåŠ¡æ”¯æ’‘&#34;&gt;ï¼ˆä¸€ï¼‰é…ç½®æœåŠ¡æ”¯æ’‘&lt;/h3&gt;
&lt;p&gt;é€šè¿‡é…ç½®æœåŠ¡æš´éœ²ä¸€ä¸ª HTTP æ¥å£ï¼Œè¿™ä¸ªæ¥å£è¿”å›çš„æ˜¯å½“å‰éœ€è¦ç›‘æ§çš„å¯¹è±¡ä¿¡æ¯ã€‚æ¯”å¦‚ç³»ç»Ÿæ–°å¢äº†ä¸€ä¸ªå¾®æœåŠ¡ï¼Œé…ç½®æœåŠ¡é‡Œçš„ç›‘æ§åˆ—è¡¨å°±ä¼šæ›´æ–°ï¼ŒæŠŠæ–°æœåŠ¡çš„ä¿¡æ¯åŠ ä¸Šã€‚&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt; job_name: &amp;quot;ä¸»æœºç›‘æ§&amp;quot;
    http_sd_configs:
     - url: &amp;quot;http://xxxxxx/xxxxxx&amp;quot;
       refresh_interval: 5s
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&#34;äºŒå®šæ—¶æ‹‰å–æ›´æ–°&#34;&gt;ï¼ˆäºŒï¼‰å®šæ—¶æ‹‰å–æ›´æ–°&lt;/h3&gt;
&lt;p&gt;Prometheus ä¼šå®šæ—¶å»è°ƒç”¨è¿™ä¸ªæ¥å£ï¼Œæ‹¿åˆ°æœ€æ–°çš„ç›‘æ§å¯¹è±¡åˆ—è¡¨ï¼Œè‡ªåŠ¨æ›´æ–°è‡ªå·±çš„é‡‡é›†é…ç½®ã€‚è¿™æ ·ä¸ç®¡æ˜¯æ–°å¢ã€åˆ é™¤è¿˜æ˜¯ä¿®æ”¹ç›‘æ§å¯¹è±¡ï¼Œéƒ½èƒ½å®æ—¶è·Ÿä¸Šï¼Œä¿è¯ç›‘æ§ä¸è„±èŠ‚ã€‚&lt;/p&gt;
&lt;h2 id=&#34;å…­é…ç½®è¯´æ˜è®©ç›‘æ§ä½“ç³»-ç¨³å‡†ç‹ &#34;&gt;å…­ã€é…ç½®è¯´æ˜ï¼šè®©ç›‘æ§ä½“ç³» â€œç¨³å‡†ç‹ â€&lt;/h2&gt;
&lt;h3 id=&#34;ä¸€prometheus-é…ç½®è¦ç‚¹&#34;&gt;ï¼ˆä¸€ï¼‰Prometheus é…ç½®è¦ç‚¹&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;é™æ€é…ç½®&lt;/strong&gt;ï¼šåœ¨ prometheus.yml é‡Œï¼Œç›´æ¥å†™æ­»è¦ç›‘æ§çš„ç›®æ ‡ã€‚æ¯”å¦‚ç›‘æ§ä¸»æœºï¼Œå°±é…ç½® node_exporter çš„åœ°å€ï¼š&lt;/li&gt;
&lt;/ul&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;scrape_configs:
  - job_name: &#39;node&#39;
    static_configs:
      - targets: [&#39;localhost:9100&#39;]  # node_exporteré»˜è®¤ç«¯å£
&lt;/code&gt;&lt;/pre&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;åŠ¨æ€å‘ç°é…ç½®&lt;/strong&gt;ï¼šé€‚åˆç›‘æ§å¯¹è±¡ç»å¸¸å˜åŒ–çš„åœºæ™¯ï¼Œæ¯”å¦‚åŸºäºæ–‡ä»¶ã€DNSã€Consul è¿™äº›æ–¹å¼è‡ªåŠ¨å‘ç°ã€‚ä»¥ Consul ä¸ºä¾‹ï¼š&lt;/li&gt;
&lt;/ul&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;scrape_configs:
  - job_name: &#39;consul-services&#39;
    consul_sd_configs:
      - server: &#39;localhost:8500&#39;
        services: []  # å¯æŒ‡å®šæœåŠ¡ï¼Œç©ºåˆ™å‘ç°æ‰€æœ‰
&lt;/code&gt;&lt;/pre&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;é‡‡é›†å‘¨æœŸä¸è¶…æ—¶&lt;/strong&gt;ï¼šè°ƒæ•´ scrape_intervalï¼ˆé‡‡é›†é—´éš” ï¼‰å’Œ scrape_timeoutï¼ˆè¶…æ—¶æ—¶é—´ ï¼‰ï¼Œé€‚é…ä¸åŒç›‘æ§éœ€æ±‚ï¼š&lt;/li&gt;
&lt;/ul&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;global:
  scrape_interval: 15s  # é»˜è®¤15ç§’æ‹‰ä¸€æ¬¡
  scrape_timeout: 10s   # æ‹‰å–è¶…æ—¶æ—¶é—´
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&#34;äºŒgrafana-é…ç½®å…³é”®&#34;&gt;ï¼ˆäºŒï¼‰Grafana é…ç½®å…³é”®&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ•°æ®æºé…ç½®&lt;/strong&gt;ï¼šåœ¨ Grafana é‡Œæ·»åŠ  Prometheus æ•°æ®æºï¼Œå¡«å¥½åœ°å€ï¼ˆæ¯”å¦‚ http://prometheus:9090 ï¼‰ï¼Œä¿å­˜æµ‹è¯•ï¼Œç¡®ä¿èƒ½è¿é€šã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ä»ªè¡¨ç›˜ï¼ˆDashboardï¼‰é…ç½®&lt;/strong&gt;ï¼šå¯ä»¥è‡ªå·±åˆ›å»ºï¼Œä¹Ÿèƒ½å¯¼å…¥ç¤¾åŒºæ¨¡æ¿ï¼ˆæ¯”å¦‚ ID ä¸º 8919 çš„ Node Exporter æ¨¡æ¿ ï¼‰ã€‚é…ç½®çš„æ—¶å€™ï¼Œé€‰å¥½æ•°æ®æºï¼Œå†™ PromQL æŸ¥è¯¢è¯­å¥ï¼ˆæ¯”å¦‚ node_cpu_seconds_total{mode=&amp;ldquo;idle&amp;rdquo;} çœ‹ CPU ç©ºé—²æ—¶é—´ ï¼‰ï¼Œè®¾ç½®å›¾è¡¨ç±»å‹ï¼ˆæŠ˜çº¿å›¾ã€æŸ±çŠ¶å›¾ç­‰ ï¼‰ï¼Œè®©æ•°æ®å¯è§†åŒ–æ›´ç›´è§‚ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;ä¸‰agent-ä¸ä¸­é—´ä»¶é…ç½®&#34;&gt;ï¼ˆä¸‰ï¼‰Agent ä¸ä¸­é—´ä»¶é…ç½®&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;Exporter é…ç½®&lt;/strong&gt;ï¼šä¸åŒçš„ exporter æœ‰ä¸åŒçš„é…ç½®æ–‡ä»¶ã€‚æ¯”å¦‚ node_exporter å¯ä»¥é€šè¿‡å‘½ä»¤è¡Œå‚æ•°è°ƒæ•´é‡‡é›†é¡¹ï¼ˆå¦‚ &amp;ndash;no-collector.diskstats å…³é—­ç£ç›˜ç»Ÿè®¡ ï¼‰ï¼›mysql_exporter éœ€è¦é…ç½®æ•°æ®åº“è¿æ¥ä¿¡æ¯ï¼Œåœ¨é…ç½®æ–‡ä»¶é‡Œå¡«å¥½ç”¨æˆ·åã€å¯†ç ã€åœ°å€ï¼š&lt;/li&gt;
&lt;/ol&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;[client]
user = prometheus
password = yourpassword
host = localhost
port = 3306
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;strong&gt;ä¸­é—´ agent é…ç½®&lt;/strong&gt;ï¼šé’ˆå¯¹ç¬¬ä¸‰æ–¹æœåŠ¡çš„ä¸­é—´ agentï¼Œè¦é…ç½®å¥½è¿æ¥ç›®æ ‡æœåŠ¡çš„å‚æ•°ï¼ˆå¦‚ API å¯†é’¥ã€è®¿é—®åœ°å€ ï¼‰ï¼Œè¿˜æœ‰æ•°æ®è½¬æ¢è§„åˆ™ï¼Œç¡®ä¿é‡‡é›†çš„æ•°æ®ç¬¦åˆ Prometheus æ ¼å¼ã€‚&lt;/p&gt;
</description>
        </item>
        <item>
        <title>åç«¯çš„å®‰å…¨å’ŒåŠ å¯†</title>
        <link>https://zcj-git520.github.io/p/%E5%90%8E%E7%AB%AF%E7%9A%84%E5%AE%89%E5%85%A8%E5%92%8C%E5%8A%A0%E5%AF%86/</link>
        <pubDate>Sun, 15 Jan 2023 22:00:38 +0800</pubDate>
        
        <guid>https://zcj-git520.github.io/p/%E5%90%8E%E7%AB%AF%E7%9A%84%E5%AE%89%E5%85%A8%E5%92%8C%E5%8A%A0%E5%AF%86/</guid>
        <description>&lt;img src="https://zcj-git520.github.io/p/%E5%90%8E%E7%AB%AF%E7%9A%84%E5%AE%89%E5%85%A8%E5%92%8C%E5%8A%A0%E5%AF%86/1.png" alt="Featured image of post åç«¯çš„å®‰å…¨å’ŒåŠ å¯†" /&gt;&lt;h2 id=&#34;åç«¯çš„å®‰å…¨&#34;&gt;åç«¯çš„å®‰å…¨&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;åœ¨åç«¯çš„åº”ç”¨ç¨‹åºä¸­çš„å®‰å…¨é—®é¢˜éƒ½æ˜¯äº²ä¿¡äº†ç¬¬ä¸‰æ–¹æä¾›çš„æ•°æ®é€ æˆçš„ï¼Œä¾‹å¦‚ï¼šå¯¹äºç”¨æˆ·è¾“å…¥çš„æ•°æ®ã€‚åœ¨å¯¹å…¶è¿›è¡ŒéªŒè¯ä¹‹å‰éƒ½åº”è¯¥è§†ä¸ºä¸å®‰å…¨çš„æ•°æ®ï¼ŒæŠŠä¸å®‰å…¨çš„æ•°æ®ç”¨äºæ•°æ®åº“çš„æŸ¥è¯¢å°±å¯èƒ½ä¼šé€ æˆsqlæ³¨å…¥çš„é—®é¢˜&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;é¢„é˜²csrfæ”»å‡»&#34;&gt;é¢„é˜²CSRFæ”»å‡»&lt;/h3&gt;
&lt;p&gt;CSRF(è·¨ç«™è¯·æ±‚ä¼ªé€ )ï¼šæ”»å‡»è€…å¯ä»¥ç›—ç”¨ä½ çš„ç™»å½•ä¿¡æ¯ï¼Œä»¥ä½ çš„èº«ä»½æ¨¡æ‹Ÿå‘é€å„ç§è¯·æ±‚ï¼Œæ‰€ä»¥é‡åˆ°CSRFæ”»å‡»æ—¶ï¼Œå°†å¯¹ç»ˆç«¯ç”¨æˆ·æ•°æ®å’Œæ“ä½œæŒ‡ä»¤æ„æˆä¸¥é‡çš„å¨èƒï¼Œå½“å—æ”»å‡»çš„ç»ˆç«¯å…·å¤‡ç®¡ç†è´¦å·æ—¶ï¼ŒCSRFæ”»å‡»éƒ½ä¼šå±åŠæ•´ä¸ªåç«¯çš„åº”ç”¨&lt;/p&gt;
&lt;p&gt;â€‹	&lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 177; 
			flex-basis: 425px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/%E5%90%8E%E7%AB%AF%E7%9A%84%E5%AE%89%E5%85%A8%E5%92%8C%E5%8A%A0%E5%AF%86/1.png&#34; data-size=&#34;1052x593&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/%E5%90%8E%E7%AB%AF%E7%9A%84%E5%AE%89%E5%85%A8%E5%92%8C%E5%8A%A0%E5%AF%86/1.png&#34;
			width=&#34;1052&#34;
			height=&#34;593&#34;
			srcset=&#34;https://zcj-git520.github.io/p/%E5%90%8E%E7%AB%AF%E7%9A%84%E5%AE%89%E5%85%A8%E5%92%8C%E5%8A%A0%E5%AF%86/1_hu87659f1a5244bdf4eaa7c124361acc46_915216_480x0_resize_box_3.png 480w, https://zcj-git520.github.io/p/%E5%90%8E%E7%AB%AF%E7%9A%84%E5%AE%89%E5%85%A8%E5%92%8C%E5%8A%A0%E5%AF%86/1_hu87659f1a5244bdf4eaa7c124361acc46_915216_1024x0_resize_box_3.png 1024w&#34;
			loading=&#34;lazy&#34;
			&gt;
	&lt;/a&gt;
	
&lt;/figure&gt;&lt;/p&gt;
&lt;h4 id=&#34;csrfçš„å·¥ä½œåŸç†&#34;&gt;CSRFçš„å·¥ä½œåŸç†ï¼š&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;CSRFæ”»å‡»ä¸»è¦æ˜¯å› ä¸ºwebçš„éšå¼èº«ä»½éªŒè¯æœºåˆ¶ï¼Œwebçš„èº«ä»½éªŒè¯æœºåˆ¶å¯ä»¥ä¿è¯ä¸€ä¸ªè¯·æ±‚æ˜¯æ¥è‡ªæŸä¸€ä¸ªæœåŠ¡å™¨ã€‚ä½†å´æ— æ³•ä¿è¯è¯¥è¯·æ±‚æ˜¯ç”¨æˆ·æ‰¹å‡†å‘é€çš„&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;CSRFçš„æ”»å‡»è¿‡ç¨‹å¯åˆ†ä¸ºï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ç™»å½•å—ä¿¡ä»»çš„ç½‘ç«™A,å¹¶åœ¨æœ¬åœ°ç”Ÿæˆcookie&lt;/li&gt;
&lt;li&gt;åœ¨ä¸é€€å‡ºAçš„æƒ…å†µä¸‹ï¼Œè®¿é—®äº†å±é™©çš„ç½‘ç«™B&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;csrfçš„é¢„é˜²&#34;&gt;CSRFçš„é¢„é˜²&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;å¯ä»¥ä»æœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯ä¸¤ä¸ªæ–¹å‘å…¥æ‰‹
&lt;ul&gt;
&lt;li&gt;æœåŠ¡ç«¯çš„é¢„é˜²ï¼š
&lt;ol&gt;
&lt;li&gt;æ­£ç¡®çš„ä½¿ç”¨GET,POST,å’ŒCOOKie&lt;/li&gt;
&lt;li&gt;åœ¨éGETè¯·æ±‚ä¸­å¢åŠ ä¼ªéšæœºæ•°
åœ¨éGETæ–¹å¼çš„è¯·æ±‚ä¸­å¢åŠ ä¼ªéšæœºæ•°æœ‰ä¸‰ç§æ–¹å¼ï¼š&lt;/li&gt;
&lt;li&gt;ä¸ºæ¯ä¸€ä¸ªç”¨æˆ·ç”Ÿæˆå”¯ä¸€çš„cookie tokenï¼Œæ‰€æœ‰çš„è¡¨å•éƒ½åŒ…å«åŒä¸€ä¸ªä¼ªéšæœºæ•°&lt;/li&gt;
&lt;li&gt;æ¯ä¸€ä¸ªè¯·æ±‚ä½¿ç”¨çš„éªŒè¯ç &lt;/li&gt;
&lt;li&gt;åœ¨ä¸åŒè¡¨å•åŒ…å«ä¸€ä¸ªä¸åŒçš„ä¼ªéšæœºæ•°&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;li&gt;ç¡®ä¿è¾“å…¥çš„è¿‡æ»¤ï¼šè¿‡æ»¤ç”¨æˆ·æ•°æ®æ˜¯ååç«¯çš„åŸºç¡€ï¼Œå®ƒæ˜¯éªŒè¯æ•°æ®çš„åˆæ³•æ€§çš„è¿‡ç¨‹ï¼š
&lt;ol&gt;
&lt;li&gt;è¯†åˆ«æ•°æ®ï¼Œå³ç¡®å®šæ•°æ®çš„æ¥æº&lt;/li&gt;
&lt;li&gt;è¿‡æ»¤æ•°æ®ï¼Œå³ç¡®ä¿éœ€è¦çš„æ•°æ®å…¥åº“&lt;/li&gt;
&lt;li&gt;ç¡®å®šæ•°æ®ï¼Œå³ç¡®å®šæ•°æ®çš„å®‰å…¨&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;é¿å…xssçš„æ”»å‡»&#34;&gt;é¿å…XSSçš„æ”»å‡»&lt;/h3&gt;
&lt;p&gt;â€‹	xss(è·¨ç«™è„šæœ¬æ”»å‡»)ï¼šæ˜¯ä¸€ç§å¸¸è§çš„webå®‰å…¨æ¼æ´ï¼Œå®ƒå…è®¸æ”»å‡»è€…å°†æ¶æ„ä»£ç æ¤å…¥åˆ°æä¾›ç»™å…¶ä»–ç”¨æˆ·ä½¿ç”¨çš„é¡µé¢ä¸­ï¼Œä¸åŒäºå¤§å¤šæ•°æ”»å‡»ä¸€èˆ¬åªæ¶‰åŠæ”»å‡»è€…å’Œå—å®³è€…ï¼Œxssæ¶‰åŠåˆ°ä¸‰æ–¹ï¼Œå³æ”»å‡»è€…ï¼Œå®¢æˆ·ç«¯å’Œåç«¯æœåŠ¡å™¨ï¼Œxssæ”»å‡»ç›®æ ‡ä¸ºç›—å–å­˜å‚¨åœ¨å®¢æˆ·ç«¯çš„cookieæˆ–è€…å…¶ä»–ç½‘ç«™ç”¨æˆ·è¯†åˆ«å®¢æˆ·ç«¯èº«ä»½çš„æ•æ„Ÿä¿¡æ¯ï¼Œä¸€æ—¦è·å–åˆ°åˆæ³•çš„ç”¨æˆ·ä¿¡æ¯åï¼Œæ”»å‡»è€…ç”šè‡³å¯ä»¥å‡å†’åˆæ³•äºç½‘ç«™è¿›è¡Œäº¤äº’&lt;/p&gt;
&lt;h4 id=&#34;xss-åˆ†ç±»&#34;&gt;xss åˆ†ç±»&lt;/h4&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;å­˜å‚¨å‹xss:ä¸»è¦æ˜¯å‡ºç°è®©ç”¨æˆ·è¾“å…¥æ•°æ®ï¼Œåº”ç”¨ç¨‹åºä»æ•°æ®åº“æŸ¥æ•°æ®ï¼Œåœ¨é¡µé¢ä¸­æ˜¾ç¤ºï¼Œæ”»å‡»è€…åœ¨ç›¸å…³é¡µé¢ä¸­è¾“å…¥æ¶æ„çš„è„šæœ¬æ•°æ®åï¼Œç”¨æˆ·æµè§ˆæ—¶ï¼Œå°±å¯èƒ½ä¼šå—åˆ°æ”»å‡»&lt;/p&gt;
&lt;p&gt;&lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 132; 
			flex-basis: 317px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/%E5%90%8E%E7%AB%AF%E7%9A%84%E5%AE%89%E5%85%A8%E5%92%8C%E5%8A%A0%E5%AF%86/3.png&#34; data-size=&#34;948x716&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/%E5%90%8E%E7%AB%AF%E7%9A%84%E5%AE%89%E5%85%A8%E5%92%8C%E5%8A%A0%E5%AF%86/3.png&#34;
			width=&#34;948&#34;
			height=&#34;716&#34;
			srcset=&#34;https://zcj-git520.github.io/p/%E5%90%8E%E7%AB%AF%E7%9A%84%E5%AE%89%E5%85%A8%E5%92%8C%E5%8A%A0%E5%AF%86/3_hu1545ed1adfa073e5dd37a25c338c69e2_153820_480x0_resize_box_3.png 480w, https://zcj-git520.github.io/p/%E5%90%8E%E7%AB%AF%E7%9A%84%E5%AE%89%E5%85%A8%E5%92%8C%E5%8A%A0%E5%AF%86/3_hu1545ed1adfa073e5dd37a25c338c69e2_153820_1024x0_resize_box_3.png 1024w&#34;
			loading=&#34;lazy&#34;
			&gt;
	&lt;/a&gt;
	
&lt;/figure&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;åå°„æ€§xss:ä¸»è¦åšæ³•æ˜¯å°†è„šæœ¬ä»£ç åŠ å…¥urlåœ°å€çš„è¯·æ±‚å‚æ•°ä¸­ï¼Œè¯·æ±‚å‚æ•°è¿›å…¥ç¨‹åºååœ¨é¡µé¢ç›´æ¥è¾“å‡ºï¼Œç”¨æˆ·ç‚¹å‡»ç±»ä¼¼é“¾æ¥å¯èƒ½ä¼šå—åˆ°æ”»å‡»&lt;/p&gt;
&lt;p&gt;&lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 128; 
			flex-basis: 309px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/%E5%90%8E%E7%AB%AF%E7%9A%84%E5%AE%89%E5%85%A8%E5%92%8C%E5%8A%A0%E5%AF%86/2.png&#34; data-size=&#34;930x722&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/%E5%90%8E%E7%AB%AF%E7%9A%84%E5%AE%89%E5%85%A8%E5%92%8C%E5%8A%A0%E5%AF%86/2.png&#34;
			width=&#34;930&#34;
			height=&#34;722&#34;
			srcset=&#34;https://zcj-git520.github.io/p/%E5%90%8E%E7%AB%AF%E7%9A%84%E5%AE%89%E5%85%A8%E5%92%8C%E5%8A%A0%E5%AF%86/2_hue5fb697bafb9f1fd607ee96fd66e6ea4_137160_480x0_resize_box_3.png 480w, https://zcj-git520.github.io/p/%E5%90%8E%E7%AB%AF%E7%9A%84%E5%AE%89%E5%85%A8%E5%92%8C%E5%8A%A0%E5%AF%86/2_hue5fb697bafb9f1fd607ee96fd66e6ea4_137160_1024x0_resize_box_3.png 1024w&#34;
			loading=&#34;lazy&#34;
			&gt;
	&lt;/a&gt;
	
&lt;/figure&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h4 id=&#34;xssåŸç†&#34;&gt;xssåŸç†&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;åç«¯åº”ç”¨åœ¨æœªå¯¹ç”¨æˆ·æäº¤è¯·æ±‚çš„æ•°æ®åšå……åˆ†çš„æ£€æŸ¥è¿‡æ»¤ï¼Œå…è®¸ç”¨æˆ·åœ¨æäº¤æ•°æ®ä¸­å‚å…¥htmlä»£ç ï¼Œå¹¶å°†æœªç»è¿‡è½¬ä¹‰çš„æ¶æ„çš„ä»£ç è¾“å‡ºåˆ°ç¬¬ä¸‰æ–¹çš„åº”ç”¨çš„æµè§ˆå™¨è§£é‡Šæ‰§è¡Œï¼Œæ˜¯å¯¼è‡´xssæ¼æ´çš„ä¸»è¦äº§ç”ŸåŸå› &lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;é¢„é˜²xss&#34;&gt;é¢„é˜²xss&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;åšå†³ä¸è¦ç›¸ä¿¡ç”¨æˆ·çš„ä»»ä½•è¾“å…¥å¹¶è¿‡æ»¤è¾“å…¥ä¸­çš„æ‰€æœ‰ç‰¹æ®Šå­—ç¬¦ï¼Œç›®å‰æœ‰ä¸¤ç§æ–¹æ³•ï¼š
&lt;ul&gt;
&lt;li&gt;è¿‡æ»¤ç‰¹æ®Šå­—ç¬¦&lt;/li&gt;
&lt;li&gt;ä½¿ç”¨httpå¤´æŒ‡å®šç±»å‹&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;é¿å…sqlæ³¨å…¥&#34;&gt;é¿å…sqlæ³¨å…¥&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;sqlæ³¨å…¥æ˜¯åç«¯å¼€å‘ä¸­æœ€å¸¸è§çš„ä¸€ç§å®‰å…¨æ¼æ´ï¼Œå¯ä»¥ä½¿ç”¨å®ƒè·å–æ•°æ®åº“ä¸­çš„è·å–æ•æ„Ÿçš„ä¿¡æ¯ï¼Œæˆ–è€…åˆ©ç”¨æ•°æ®åº“çš„çƒ­ç‰¹æ€§æ‰§è¡Œæ·»åŠ ç”¨æˆ·ï¼Œå¯¼å‡ºæ–‡ä»¶ç­‰ä¸€ç³»åˆ—æ¶æ„ï¼Œæ“ä½œç”šè‡³å¯èƒ½è·å–æ•°æ®åº“æˆ–è€…ç³»ç»Ÿçš„ç”¨æˆ·çš„æœ€é«˜æƒé™&lt;/li&gt;
&lt;li&gt;é€ æˆsqlæ³¨å…¥çš„åŸå› æ˜¯å› ä¸ºç¨‹åºæ²¡æœ‰æœ‰æ•ˆçš„è¿‡æ»¤ï¼Œç”¨æˆ·è¾“å…¥æ—¶æ”»å‡»è€…æˆåŠŸå‘æœåŠ¡å™¨æäº¤æ¶æ„ä»£ç çš„sqlæŸ¥è¯¢ä»£ç ï¼Œç¨‹åºåœ¨æ¥æ”¶åˆ°é”™è¯¯åçš„å°†æ”»å‡»è€…çš„è¾“å…¥ä½œä¸ºæŸ¥è¯¢è¯­å¥çš„ä¸€éƒ¨åˆ†ï¼Œå¯¼è‡´åŸå§‹æŸ¥è¯¢é€»è¾‘è¢«è¿«æ”¹å˜ã€‚é¢å¤–æ‰§è¡Œä¾›æ”»å‡»è€…ç²¾å¿ƒæ„é€ çš„æ¶æ„ä»£ç &lt;/li&gt;
&lt;li&gt;sqlæŸ¥è¯¢æ˜¯å¯ä»¥è¢«ä¿®æ”¹ï¼ŒsqlæŸ¥è¯¢æ˜¯å¯ä»¥ç»•å¼€è®¿é—®çš„æ§åˆ¶ï¼Œä»è€Œç»•è¿‡èº«ä»½éªŒè¯å’Œæƒé™æ£€æŸ¥ï¼Œæœ‰å¯èƒ½sqlæŸ¥è¯¢å»ä¸è¿è¡Œä¸»æœºç³»ç»Ÿçº§åˆ«çš„å‘½ä»¤&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;é¢„é˜²sql&#34;&gt;é¢„é˜²sql&lt;/h4&gt;
&lt;ol&gt;
&lt;li&gt;ä¸¥æ ¼é™åˆ¶åç«¯åº”ç”¨çš„æ•°æ®åº“çš„æƒé™ï¼Œç»™ç”¨æˆ·æä¾›æ»¡è¶³åŠŸèƒ½å³å¯&lt;/li&gt;
&lt;li&gt;æ£€æŸ¥è¾“å…¥çš„æ•°æ®æ˜¯å¦å…·æœ‰æ‰€æœ‰çš„æœŸæœ›æ ¼å¼ã€‚ä¸¥æ ¼æ§åˆ¶å˜é‡ç±»å‹&lt;/li&gt;
&lt;li&gt;å¯¹æ•°æ®åº“çš„ç‰¹æ®Šå­—ç¬¦è¿›è¡Œè½¬ä¹‰å¤„ç†ï¼Œæˆ–è€…ç¼–ç è½¬æ¢&lt;/li&gt;
&lt;li&gt;æ‰€æœ‰çš„æŸ¥è¯¢è¯­å¥ï¼Œå»ºè®®ä½¿ç”¨æ•°æ®åº“æä¾›å“¦é‚£ä¸ªçš„å‚æ•°åŒ–çš„æ¥å£ã€‚è€Œä¸æ˜¯å°†è¾“å…¥çš„å˜é‡åµŒå…¥åˆ°sqlè¯­å¥ä¸­ï¼Œå³ä¸è¦æ‹¼æ¥sqlè¯­å¥&lt;/li&gt;
&lt;li&gt;åœ¨åº”ç”¨å‘å¸ƒå‰ï¼Œå»ºè®®ä½¿ç”¨ä¸“ä¸šçš„sqlæ³¨å…¥æ£€æŸ¥å·¥å…·è¿›è¡Œæ£€æµ‹ä»¥åŠæ—¶ä¿®è¡¥å¹¶å‘ç°sqlæ³¨å…¥çš„æ¼æ´&lt;/li&gt;
&lt;li&gt;é¿å…å‰ç«¯æ‰“å°sqlé”™è¯¯ï¼Œæ¯”å¦‚ç±»å‹é”™è¯¯ï¼Œå­æ®µä¸åŒ¹é…ç­‰æš´éœ²sqlè¯­å¥&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&#34;å­˜å‚¨å¯†ç &#34;&gt;å­˜å‚¨å¯†ç &lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;æ™®é€šæ–¹æ¡ˆï¼šå¸¸ç”¨çš„å¯†ç å­˜å‚¨æ–¹æ¡ˆæ˜¯å°†æ˜æ–‡å¯†ç åšå•å‘çš„å“ˆå¸Œåå­˜é”™ï¼Œå•å‘å“ˆå¸Œç®—æ³•æœ‰ä¸€ç‰¹å¾ï¼šæ— æ³•é€šè¿‡å“ˆå¸Œåçš„æ‘˜è¦æ¢å¤å‡ºåŸå§‹æ•°æ®ï¼Œå¸¸ç”¨çš„é¢å•å‘å“ˆå¸Œç®—æ³•åŒ…æ‹¬ï¼šSHA-256,SHA-1
&lt;ul&gt;
&lt;li&gt;å•å‘å“ˆå¸Œçš„ä¸¤å¤§ç‰¹æ€§ï¼š
&lt;ul&gt;
&lt;li&gt;åŒä¸€å¯†ç è¿›è¡Œå“ˆå¸Œåï¼Œå¾—åˆ°çš„å”¯ä¸€ç¡®å®šçš„æ‘˜è¦&lt;/li&gt;
&lt;li&gt;è®¡ç®—é€Ÿåº¦å¿«&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;ç»“åˆå•å‘å“ˆå¸Œçš„ä¸¤å¤§ç‰¹æ€§ï¼šæ”»å‡»è€…å¯ä»¥å°†æ‰€æœ‰çš„å¯†ç å¸¸è§çš„ç»„åˆè¿›è¡Œå•å‘å“ˆå¸Œï¼Œå¾—åˆ°ä¸€ä¸ªæ‘˜è¦ç»„åˆ(rainbow table), ç„¶åäºæ•°æ®åº“ä¸­çš„è¿›è¡Œå¯¹æ¯”å³å¯å¾—åˆ°å¯†ç &lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;è¿›é˜¶æ–¹æ¡ˆï¼šå…ˆå°†ç”¨æˆ·è¾“å…¥çš„å¯†ç è¿›è¡Œå•å‘å“ˆå¸ŒåŠ å¯†ï¼Œåœ¨å°†è·å–çš„æ‘˜è¦çš„å‰ååŠ ä¸Šåªæœ‰ç®¡ç†å‘˜çŸ¥é“çš„éšæœºæ•°ï¼Œåœ¨è¿›è¡Œå•å‘å“ˆå¸Œ&lt;/li&gt;
&lt;li&gt;ä¸“å®¶æ–¹æ¡ˆï¼šæ•…æ„å¢åŠ å¯†ç è®¡ç®—æ‰€æ¶ˆè€—çš„èµ„æºå’Œæ—¶é—´ï¼Œä½¿å¾—ä»»ä½•äººéƒ½ä¸å¯èƒ½è·å–åˆ°ç›¸åŒçš„èµ„æºï¼Œå»ºç«‹æ‰€éœ€è¦çš„(rainbow table)&lt;/li&gt;
&lt;/ul&gt;
</description>
        </item>
        <item>
        <title>mysqlä¹‹æ•°æ®åº“ç´¢å¼•æœºåˆ¶ä¸MVCCæœºåˆ¶</title>
        <link>https://zcj-git520.github.io/p/mysql%E4%B9%8B%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B4%A2%E5%BC%95%E6%9C%BA%E5%88%B6%E4%B8%8Emvcc%E6%9C%BA%E5%88%B6/</link>
        <pubDate>Mon, 10 Oct 2022 22:00:38 +0800</pubDate>
        
        <guid>https://zcj-git520.github.io/p/mysql%E4%B9%8B%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B4%A2%E5%BC%95%E6%9C%BA%E5%88%B6%E4%B8%8Emvcc%E6%9C%BA%E5%88%B6/</guid>
        <description>&lt;img src="https://zcj-git520.github.io/p/mysql%E4%B9%8B%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B4%A2%E5%BC%95%E6%9C%BA%E5%88%B6%E4%B8%8Emvcc%E6%9C%BA%E5%88%B6/3.png" alt="Featured image of post mysqlä¹‹æ•°æ®åº“ç´¢å¼•æœºåˆ¶ä¸MVCCæœºåˆ¶" /&gt;&lt;h2 id=&#34;ç´¢å¼•æœºåˆ¶&#34;&gt;ç´¢å¼•æœºåˆ¶&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;ç´¢å¼•æ˜¯ä¸€ç§æ•°æ®ç»“æ„ï¼Œç´¢å¼•æœºåˆ¶æ˜¯æœ‰å­˜å‚¨å¼•æ“å®ç°ï¼Œåˆ›å»ºç´¢å¼•ä¼šåŸºäºåŸæœ‰è¡¨çš„æ•°æ®ï¼Œä»æ–°åœ¨ç£ç›˜ä¸Šåˆ›å»ºæ–°çš„æœ¬åœ°ç´¢å¼•æ–‡ä»¶&lt;/li&gt;
&lt;li&gt;mysqlç´¢å¼•æœºåˆ¶çš„ä¼˜åŠ¿ï¼š
&lt;ol&gt;
&lt;li&gt;æé«˜äº†æŸ¥è¯¢é€Ÿåº¦ï¼Œæ•°é‡è¶Šå¤§ï¼Œæ•ˆæœè¶Šæ˜æ˜¾&lt;/li&gt;
&lt;li&gt;å»ºç«‹å”¯ä¸€çš„ç´¢å¼•ï¼Œå¯ç¡®ä¿æ•°æ®è¡¨ä¸­çš„æ•°æ®å”¯ä¸€æ€§ï¼Œæ— éœ€é¢å¤–çš„åˆ›å»ºå”¯ä¸€çš„çº¦æŸ&lt;/li&gt;
&lt;li&gt;åœ¨ä½¿ç”¨åˆ†ç»„ä¸æ’åºæ—¶ï¼Œå¯æ˜¾è‘—å‡å°‘æŸ¥è¯¢çš„åˆ†ç»„å’Œæ’åºçš„æ—¶é—´&lt;/li&gt;
&lt;li&gt;åœ¨å¤šè¡¨æŸ¥è¯¢æ—¶ï¼ŒåŸºäºä¸»å¤–é”®å­—æ®µå»ºç«‹ç´¢å¼•ï¼Œå¯å¸¦æ¥ååˆ†æ˜æ˜¾çš„æ€§èƒ½çš„æå‡&lt;/li&gt;
&lt;li&gt;ç´¢å¼•é»˜è®¤æ˜¯B+æ ‘æœ‰åºæœºæ„ï¼Œæ•ˆç‡ä¼šæ˜æ˜¾æé«˜&lt;/li&gt;
&lt;li&gt;å°±æ•´ä¸ªæ•°æ®åº“è€Œè¨€ï¼Œå‡å°‘sqlæ‰§è¡Œæ—¶é—´ï¼Œå¯æé«˜æ•°æ®åº“æ•´ä½“çš„ååé‡&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;li&gt;mysqlç´¢å¼•æœºåˆ¶çš„å¼Šç«¯ï¼š
&lt;ol&gt;
&lt;li&gt;å»ºç«‹ç´¢å¼•ä¼šç”Ÿæˆæœ¬åœ°ç£ç›˜æ–‡ä»¶ï¼Œéœ€è¦é¢å¤–çš„ç©ºé—´å­˜å‚¨ç´¢å¼•æ•°æ®ï¼Œç£ç›˜å ç”¨ç‡ä¼šå˜é«˜&lt;/li&gt;
&lt;li&gt;å†™å…¥æ•°æ®æ—¶ï¼Œéœ€è¦é¢å¤–çš„ç»´æŠ¤ç´¢å¼•ç»“æ„ï¼Œåœ¨å¢åˆ ä¿®æ”¹æ•°æ®æ—¶ï¼Œéƒ½éœ€è¦é¢å¤–çš„æ“ä½œç´¢å¼•&lt;/li&gt;
&lt;li&gt;å†™å…¥æ•°æ®æ—¶ï¼Œç»´æŠ¤ç´¢å¼•éœ€è¦é¢å¤–çš„æ—¶é—´å¼€é”€ï¼Œæ‰§è¡Œsqlæ—¶æ•ˆç‡ä¼šé™ä½ï¼Œæ€§èƒ½ä¼šä¸‹é™&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;li&gt;ä¸»é”®ç´¢å¼•å­˜åœ¨çš„é™·é˜±
&lt;ul&gt;
&lt;li&gt;ä¸»é”®ä¸€èˆ¬ä¼šä½¿ç”¨è‡ªå¢çš„id,å¯ç¡®ä¿ä¸»é”®ä¸é‡å¤ä»¥åŠä¸»é”®çš„å”¯ä¸€æ€§ï¼Œä¸»é”®ç´¢å¼•æ˜¯èšç°‡ç´¢å¼•ï¼Œä½¿ç”¨
b+æ ‘çš„ç´¢å¼•çš„å­˜å‚¨ç»“æ„ä¸»é”®ç´¢å¼•æ˜¯æœ‰åºçš„ï¼Œè‹¥ä¸»é”®é‡‡ç”¨çš„æ˜¯æ— åºæ—¶ï¼Œåœ¨æ’å…¥æ•°æ®å¯èƒ½ä¼šå¯¼è‡´ç´¢å¼•ç»“æ„çš„è°ƒæ•´
å› æ­¤ï¼Œä¸»é”®ç´¢å¼•æœ€å¥½é€‰ç”¨é¡ºåºçš„å€¼ï¼Œè€Œééšæœºå€¼&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;è”åˆç´¢å¼•å­˜åœ¨çš„çŸ›ç›¾
&lt;ul&gt;
&lt;li&gt;åœ¨è”åˆæŸ¥è¯¢æ—¶ï¼ŒæŸ¥è¯¢æ¡ä»¶å¿…é¡»åŒ…å«ç´¢å¼•çš„ç¬¬ä¸€ä¸ªå­—æ®µï¼Œåœ¨å»ºç«‹è”åˆç´¢å¼•æ—¶ï¼Œè¦ç¡®ä¿å»ºç«‹é™¤çš„æ¥è”åˆç´¢å¼•å‘½ä¸­é«˜ï¼Œå³å¿…é¡»åŒ…å«
ç¬¬ä¸€ä¸ªå­—æ®µ&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;å‰ç¼€ç´¢å¼•: å¯ä»¥ä½¿ç”¨ä¸€ä¸ªå­—æ®µçš„å‰Nä¸ªå­—ç¬¦åˆ›å»ºç´¢å¼•ï¼Œå¯ä»¥èŠ‚çœå­˜å‚¨ç©ºé—´ï¼Œä½†ä¸èƒ½ä½¿ç”¨åˆ†ç»„ï¼Œæ’åºå·¥ä½œï¼Œæ— æ³•å®Œæˆè¦†ç›–æ‰«æç­‰å·¥ä½œ&lt;/li&gt;
&lt;li&gt;å…¨æ–‡ç´¢å¼•å­˜åœ¨çš„ç¡¬ä¼¤
&lt;ul&gt;
&lt;li&gt;å…¨æ–‡ç´¢å¼•æ˜¯åŸºäºåˆ†ç»„å®ç°ï¼Œåˆ†è¯ä¹Ÿä¼šè¢«å­˜å‚¨ï¼Œä¼šé€ æˆé¢å¤–çš„æ–‡ä»¶ï¼Œè¿˜å­˜åœ¨åœ¨æ›´æ–°æ•°æ®ä¹‹åï¼Œç´¢å¼•çš„å­˜å‚¨ä¸æ›´æ–°çš„é—®é¢˜&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;å”¯ä¸€ç´¢å¼•å­˜åœ¨çš„å¿«æ…¢çš„é—®é¢˜
&lt;ul&gt;
&lt;li&gt;å”¯ä¸€ç´¢å¼•æŸ¥è¯¢æ•°æ®æ¯”æ™®é€šç´¢å¼•æ•ˆç‡é«˜ï¼Œå› ä¸ºæ™®é€šç´¢å¼•ä¼šæŸ¥è¯¢æ•´ä¸ªç´¢å¼•æ•°ï¼Œå”¯ä¸€ç´¢å¼•ä¼šå¼•èµ·ç«‹é©¬åœæ­¢æ£€ç´¢ï¼Œä½†æ’å…¥æ•°æ®åˆ™ç›¸å&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;ç´¢å¼•æœºåˆ¶ä¸­ç´¢å¼•å¤±æ•ˆçš„åœºæ™¯
&lt;ol&gt;
&lt;li&gt;æŸ¥è¯¢è¯­å¥ä¸­å¸¦æœ‰orä¼šå¯¼è‡´ç´¢å¼•å¤±æ•ˆ&lt;/li&gt;
&lt;li&gt;æ¨¡ç³ŠæŸ¥è¯¢è¯­å¥ä¸­likeä»¥%å¼€å¤´å¯¼è‡´ç´¢å¼•å¤±æ•ˆ&lt;/li&gt;
&lt;li&gt;å­—ç¬¦ç±»å‹æŸ¥è¯¢æ—¶ä¸å¸¦å¼•å·å¯¼è‡´ç´¢å¼•å¤±æ•ˆ&lt;/li&gt;
&lt;li&gt;ç´¢å¼•å­—æ®µå‚ä¸è®¡ç®—å¯¼è‡´ç´¢å¼•å¤±æ•ˆ&lt;/li&gt;
&lt;li&gt;å­—æ®µè¢«ç”¨äºå‡½æ•°è®¡ç®—å¯¼è‡´ç´¢å¼•å¤±æ•ˆ&lt;/li&gt;
&lt;li&gt;è¿èƒŒæœ€å·¦å‰ç¼€åŸåˆ™å¯¼è‡´ç´¢å¼•å¤±æ•ˆ&lt;/li&gt;
&lt;li&gt;ä¸åŒå­—æ®µå€¼å¯¹æ¯”å¯¼è‡´ç´¢å¼•æ˜¯å¤±æ•ˆ&lt;/li&gt;
&lt;li&gt;åå‘èŒƒå›´æ“ä½œå¯¼è‡´ç´¢å¼•å¤±æ•ˆ&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;mvccæœºåˆ¶&#34;&gt;MVCCæœºåˆ¶&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;mvccæœºåˆ¶ï¼Œå³å¤šç‰ˆæœ¬å¹¶å‘æ§åˆ¶æŠ€æœ¯ï¼Œä¸»è¦æé«˜æ•°æ®å¹¶å‘æ€§èƒ½è€Œè®¾è®¡ï¼Œé‡‡ç”¨æ›´å¥½çš„æ–¹å¼å¤„ç†äº†
è¯»å†™å¹¶å‘å†²çªçš„é—®é¢˜ï¼Œåœ¨æœ‰è¯»å†™æ“ä½œæ—¶ï¼Œä¹Ÿä¸åŠ é”ï¼Œç¡®ä¿è¯»æ“ä½œçš„éé˜»å¡çš„&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;mvccå®ç°åŸç†&#34;&gt;mvccå®ç°åŸç†&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;mvcc æ˜¯é€šè¿‡éšè—å­—æ®µã€undo-logã€readViewä¸‰ä¸ªå®ç°
&lt;ol&gt;
&lt;li&gt;éšè—å­—æ®µï¼šä½¿ç”¨innodbå¼•æ“å»ºç«‹ä¸€å¼ è¡¨åï¼Œæ•°æ®åº“é™¤äº†æ„å»ºæ˜¾ç¤ºå­—æ®µå¤–ï¼Œé€šå¸¸è¿˜ä¼šæ„å»ºéšè—å­—æ®µä¸»è¦åŒ…æ‹¬ï¼š
&lt;ol&gt;
&lt;li&gt;DB_ROW_ID: éšè—ä¸»é”®ï¼Œå½“mysqlæœªå®šä¹‰ä¸»é”®æ—¶ï¼Œä¼šä½¿ç”¨ROW_IDæ¥ä½œä¸ºèšç°‡ç´¢å¼•åˆ—&lt;/li&gt;
&lt;li&gt;DB_Deleted_Bitï¼šåˆ é™¤æ ‡è¯†ï¼Œå½“æ‰§è¡Œdeleteè¯­å¥æ—¶ï¼Œä¼šå°†è¿™ä¸ªæ ‡è¯†deleted_Bitè®¾ç½®ä¸ºï¼štrue/1,è‹¥åç»­äº‹åŠ¡å›æ»šæ—¶ï¼Œä¼š
å°†deleted_Bitè®¾ç½®ä¸ºfalse/0,è¿™æ ·å°±èƒ½é¿å…æ ‘ç»“æ„çš„è°ƒæ•´ï¼ŒåŒæ—¶ä¹Ÿä¼šä½¿ç”¨ä¸€ä¸ªçº¿ç¨‹è‡ªåŠ¨æ¸…ç†deleted_Bitä¸ºtrue/1çš„è¡Œæ•°æ®&lt;/li&gt;
&lt;li&gt;DB_TRX_IDï¼šæœ€è¿‘äº‹åŠ¡ID,æ¯åˆ›å»ºäº‹åŠ¡ï¼Œéƒ½ä¼šåˆ†é…ä¸€ä¸ªäº‹åŠ¡ID,éµå¾ªé¡ºåºé€’å¢çš„ç‰¹æ€§ï¼Œä½†åˆ é™¤çš„IDä¸ºï¼š0&lt;/li&gt;
&lt;li&gt;DB_ROLL_PTRï¼šå›æ»šæŒ‡é’ˆï¼ŒæŒ‡å‘undo-logæ—¥å¿—ä¸­æ—§ç‰ˆæœ¬çš„æ•°æ®ï¼Œé€šè¿‡æ­¤æ¥æ‰¾åˆ°æ”¹åŠ¨å‰çš„æ—§ç‰ˆæœ¬çš„æ•°æ®ï¼Œ
mvccå°±æ˜¯åˆ©ç”¨è¿™ä¸€ç‚¹å®ç°è¡Œæ•°æ®çš„å¤šç‰ˆæœ¬&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;li&gt;undo-log: å­˜å‚¨ä¸ä»…ä»…ä¸€æ¡æ—§ç‰ˆæœ¬çš„æ•°æ®ï¼Œè€Œæ˜¯å­˜åœ¨ä¸€ä¸ªç‰ˆæœ¬é“¾
&lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 276; 
			flex-basis: 662px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/mysql%E4%B9%8B%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B4%A2%E5%BC%95%E6%9C%BA%E5%88%B6%E4%B8%8Emvcc%E6%9C%BA%E5%88%B6/2.png&#34; data-size=&#34;831x301&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/mysql%E4%B9%8B%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B4%A2%E5%BC%95%E6%9C%BA%E5%88%B6%E4%B8%8Emvcc%E6%9C%BA%E5%88%B6/2.png&#34;
			width=&#34;831&#34;
			height=&#34;301&#34;
			srcset=&#34;https://zcj-git520.github.io/p/mysql%E4%B9%8B%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B4%A2%E5%BC%95%E6%9C%BA%E5%88%B6%E4%B8%8Emvcc%E6%9C%BA%E5%88%B6/2_huda947b55b7bb06895f6bfcab0be3753f_88131_480x0_resize_box_3.png 480w, https://zcj-git520.github.io/p/mysql%E4%B9%8B%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B4%A2%E5%BC%95%E6%9C%BA%E5%88%B6%E4%B8%8Emvcc%E6%9C%BA%E5%88%B6/2_huda947b55b7bb06895f6bfcab0be3753f_88131_1024x0_resize_box_3.png 1024w&#34;
			loading=&#34;lazy&#34;
			&gt;
	&lt;/a&gt;
	
&lt;/figure&gt;&lt;/li&gt;
&lt;li&gt;readView: å¤šç‰ˆæœ¬çš„å¹¶å‘æ§åˆ¶ï¼Œæ ¹æ®æŸ¥è¯¢æ—¶æœºæ¥é€‰æ‹©ä¸€ä¸ªå½“å‰äº‹åŠ¡å¯è§çš„æ—§ç‰ˆæœ¬æ•°æ®ï¼Œ
é€šå¸¸ä¸€ä¸ªäº‹åŠ¡ä¸ä¸€ä¸ªreadViewå±äºä¸€ä¸€å¯¹åº”çš„å…³ç³»ï¼Œä¸€èˆ¬åŒ…æ‹¬å››ä¸ªæ ¸å¿ƒå†…å®¹ï¼š
&lt;ol&gt;
&lt;li&gt;creator_trx_id: ä»£è¡¨åˆ›å»ºå½“å‰è¿™ä¸ªreadViewçš„äº‹åŠ¡ID&lt;/li&gt;
&lt;li&gt;trx_id: ä»£è¡¨åœ¨ç”Ÿæˆå½“å‰äº‹åŠ¡readViewæ—¶ï¼Œç³»ç»Ÿå†…æ´»åŠ¨çš„äº‹åŠ¡idåˆ—è¡¨&lt;/li&gt;
&lt;li&gt;up_limit_id: æ´»è·ƒçš„äº‹åŠ¡ä¸­æœ€å°çš„ID&lt;/li&gt;
&lt;li&gt;low_limit_id: ç”Ÿæˆå½“å‰readViewæ—¶ï¼Œç³»ç»Ÿç»™ä¸€ä¸ªäº‹åŠ¡åˆ†é…çš„ID
&lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 205; 
			flex-basis: 494px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/mysql%E4%B9%8B%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B4%A2%E5%BC%95%E6%9C%BA%E5%88%B6%E4%B8%8Emvcc%E6%9C%BA%E5%88%B6/1.png&#34; data-size=&#34;805x391&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/mysql%E4%B9%8B%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B4%A2%E5%BC%95%E6%9C%BA%E5%88%B6%E4%B8%8Emvcc%E6%9C%BA%E5%88%B6/1.png&#34;
			width=&#34;805&#34;
			height=&#34;391&#34;
			srcset=&#34;https://zcj-git520.github.io/p/mysql%E4%B9%8B%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B4%A2%E5%BC%95%E6%9C%BA%E5%88%B6%E4%B8%8Emvcc%E6%9C%BA%E5%88%B6/1_huc08695485f439631d2b1581d1a430a22_80201_480x0_resize_box_3.png 480w, https://zcj-git520.github.io/p/mysql%E4%B9%8B%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B4%A2%E5%BC%95%E6%9C%BA%E5%88%B6%E4%B8%8Emvcc%E6%9C%BA%E5%88%B6/1_huc08695485f439631d2b1581d1a430a22_80201_1024x0_resize_box_3.png 1024w&#34;
			loading=&#34;lazy&#34;
			&gt;
	&lt;/a&gt;
	
&lt;/figure&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;li&gt;å®ç°åŸç†å’Œè¿‡ç¨‹
&lt;ul&gt;
&lt;li&gt;å½“ä¸€ä¸ªäº‹åŠ¡å°è¯•æ”¹åŠ¨æŸä¸€æ¡æ•°æ®æ—¶ï¼Œä¼šå°†åŸæœ¬è¡¨ä¸­çš„æ•°æ®æ”¾å…¥undo_logæ—¥å¿—ä¸­&lt;/li&gt;
&lt;li&gt;å½“ä¸€ä¸ªäº‹åŠ¡å°è¯•æŸ¥è¯¢æŸä¸€æ¡æ•°æ®æ—¶ï¼Œmvccä¼šç”Ÿæˆä¸€ä¸ªreadViewå¿«ç…§&lt;/li&gt;
&lt;li&gt;å…·ä½“å®ç°è¿‡ç¨‹ï¼š
&lt;ol&gt;
&lt;li&gt;å½“äº‹åŠ¡ä¸­å‡ºç°selectè¯­å¥æ—¶ï¼Œä¼šæ ¹æ®å½“å‰è¿è¡Œæƒ…å†µç”Ÿæˆä¸€ä¸ªreadView&lt;/li&gt;
&lt;li&gt;åˆ¤æ–­è¡Œæ•°æ®ä¸­çš„éšè—åˆ—tex_idæœ€è¿‘äº‹åŠ¡idä¸readViewä¸­çš„å½“å‰readViewçš„IDæ˜¯å¦ä¸€è‡´
&lt;ul&gt;
&lt;li&gt;è‹¥ç›¸åŒï¼šè¯»å–æœ€æ–°ç‰ˆæœ¬çš„æ•°æ®&lt;/li&gt;
&lt;li&gt;è‹¥ä¸ç›¸åŒï¼šä»£è¡¨ç›®å‰è¦æŸ¥è¯¢çš„æ•°æ®æ˜¯è¢«å…¶ä»–äº‹åŠ¡ä¿®æ”¹è¿‡ï¼Œç»§ç»­å‘ä¸‹æ‰§è¡Œ&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;åˆ¤æ–­æœ€è¿‘äº‹åŠ¡idæ˜¯å¦å°äºreadViewä¸­çš„æœ€æ´»è·ƒçš„Id
&lt;ul&gt;
&lt;li&gt;å°äºï¼š ä»£è¡¨æ”¹åŠ¨çš„æ•°æ®çš„äº‹åŠ¡åœ¨åˆ›å»ºå¿«ç…§å‰å°±ç»“æŸäº†ï¼Œå¯è¯»å–æœ€æ–°æ•°æ®&lt;/li&gt;
&lt;li&gt;ä¸å°äºï¼šè¡¨ç¤ºæ”¹åŠ¨çš„è¡Œæ•°æ®çš„äº‹åŠ¡è¿˜åœ¨æ‰§è¡Œï¼Œç»§ç»­å¾€ä¸‹æ‰§è¡Œ&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;åˆ¤æ–­æœ€è¿‘äº‹åŠ¡idæ˜¯å¦å°äºäº‹åŠ¡readViewä¸­çš„ä¸‹ä¸€ä¸ªäº‹åŠ¡id
&lt;ul&gt;
&lt;li&gt;å¤§äºç­‰äºï¼š ä»£è¡¨æ”¹åŠ¨çš„è¡Œæ•°æ®çš„äº‹åŠ¡æ˜¯ç”Ÿæˆå¿«ç…§ä¹‹ååœ¨å¼€å¯çš„ï¼Œä¸èƒ½è®¿é—®æœ€æ–°æ•°æ®&lt;/li&gt;
&lt;li&gt;å°äºï¼šä»£è¡¨æ”¹åŠ¨çš„è¡Œæ•°æ®çš„äº‹åŠ¡idåœ¨æœ€å°æ´»è·ƒIDå’Œä¸‹ä¸€ä¸ªäº‹åŠ¡çš„IDä¹‹é—´ï¼Œéœ€è¦è¿›ä¸€æ­¥çš„åˆ¤æ–­&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;åˆ¤æ–­å½“å‰å¿«ç…§idæ˜¯å¦åœ¨ç³»ç»Ÿæ´»è·ƒçš„äº‹åŠ¡idåˆ—è¡¨ä¸­
&lt;ul&gt;
&lt;li&gt;æ˜¯ï¼šè¡¨ç¤ºæ”¹åŠ¨çš„è¡Œæ•°æ®çš„äº‹åŠ¡ä¾æ—§åœ¨æ‰§è¡Œï¼Œä¸èƒ½è®¿é—®æ–°æ•°æ®&lt;/li&gt;
&lt;li&gt;ä¸æ˜¯ï¼šè¡¨ç¤ºæ”¹åŠ¨è¡Œæ•°æ®çš„äº‹åŠ¡å·²ç»ç»“æŸï¼Œå¯ä»¥è®¿é—®æœ€å°æ•°æ®&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;ul&gt;
&lt;li&gt;è‹¥ä¸èƒ½è®¿é—®æœ€æ–°ç‰ˆæœ¬æ•°æ®æ—¶ï¼Œåˆ™ä¼šè®¿é—®undo-logè·å–æ—§ç‰ˆæœ¬ä¸­çš„æœ€æ–°æ•°æ®&lt;/li&gt;
&lt;li&gt;è‹¥å­˜åœ¨ç‰ˆæœ¬é“¾ï¼Œé€šè¿‡roll_ptr(å›æ»šæŒ‡é’ˆ)æ‰¾åˆ°ç‰ˆæœ¬é“¾çš„è¡¨å¤´ï¼Œç„¶åéå†é“¾è¡¨ï¼Œé€šè¿‡å°±ç‰ˆæœ¬æ•°æ®ï¼Œå…¶éšè—åˆ—æœ€è¿‘äº‹åŠ¡id
ä¸èƒ½åœ¨å¿«ç…§ç³»ç»Ÿå†…æ´»åŠ¨äº‹åŠ¡çš„idä¸­çš„æ¡ä»¶è¿”å›å°±ç‰ˆæœ¬çš„æ•°æ®
&lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 214; 
			flex-basis: 515px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/mysql%E4%B9%8B%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B4%A2%E5%BC%95%E6%9C%BA%E5%88%B6%E4%B8%8Emvcc%E6%9C%BA%E5%88%B6/3.png&#34; data-size=&#34;967x450&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/mysql%E4%B9%8B%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B4%A2%E5%BC%95%E6%9C%BA%E5%88%B6%E4%B8%8Emvcc%E6%9C%BA%E5%88%B6/3.png&#34;
			width=&#34;967&#34;
			height=&#34;450&#34;
			srcset=&#34;https://zcj-git520.github.io/p/mysql%E4%B9%8B%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B4%A2%E5%BC%95%E6%9C%BA%E5%88%B6%E4%B8%8Emvcc%E6%9C%BA%E5%88%B6/3_hu64a5aef98438ba0332762595f5f39464_60269_480x0_resize_box_3.png 480w, https://zcj-git520.github.io/p/mysql%E4%B9%8B%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B4%A2%E5%BC%95%E6%9C%BA%E5%88%B6%E4%B8%8Emvcc%E6%9C%BA%E5%88%B6/3_hu64a5aef98438ba0332762595f5f39464_60269_1024x0_resize_box_3.png 1024w&#34;
			loading=&#34;lazy&#34;
			&gt;
	&lt;/a&gt;
	
&lt;/figure&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;MVCCåœ¨äº‹åŠ¡éš”ç¦»ä¸­æœºåˆ¶ä¸­çš„ä½œç”¨
&lt;ul&gt;
&lt;li&gt;åœ¨äº‹åŠ¡éš”ç¦»ä¸­åªæœ‰RC(è¯»å·²æäº¤)å’ŒRR(å¯é‡å¤è¯»)ä¸¤ä¸ªçº§åˆ«ä¸­æœ‰è¿ç”¨MVCCæœºåˆ¶
&lt;ol&gt;
&lt;li&gt;åœ¨RCçº§åˆ«ä¸‹ï¼ŒMVCCæœºåˆ¶æ˜¯åœ¨æ¯æ¬¡select(æŸ¥è¯¢è¯­å¥)æ‰§è¡Œå‰ï¼Œéƒ½ä¼šç”Ÿæˆä¸€ä¸ªæœ€æ–°çš„readView,
è§£å†³äº†æ•°æ®åº“ä¸­çš„è„è¯»çš„é—®é¢˜ï¼Œä½†ä¹Ÿå­˜åœ¨ä¸å¯é‡å¤è¯»çš„é—®é¢˜&lt;/li&gt;
&lt;li&gt;åœ¨RRçº§åˆ«ä¸‹ï¼ŒMVCCæœºåˆ¶æ˜¯ä¸€ä¸ªäº‹åŠ¡åªä¼šåœ¨é¦–æ¬¡æ‰§è¡Œselect(æŸ¥è¯¢è¯­å¥)ä¹‹å‰ï¼Œæ‰ä¼šç”Ÿæˆä¸€ä¸ªæ–°çš„readView,
åç»­æ‰€æœ‰æŸ¥è¯¢æ“ä½œéƒ½ä¼šåŸºäºç€ReadViewè¿›è¡Œåˆ¤æ–­ï¼Œè§£å†³äº†ä¸å¯é‡å¤è¯»çš„é—®é¢˜&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
</description>
        </item>
        <item>
        <title>æ•°æ®åº“ä¹‹äº‹åŠ¡æœºåˆ¶åŸç†</title>
        <link>https://zcj-git520.github.io/p/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B9%8B%E4%BA%8B%E5%8A%A1%E6%9C%BA%E5%88%B6%E5%8E%9F%E7%90%86/</link>
        <pubDate>Fri, 30 Sep 2022 22:00:38 +0800</pubDate>
        
        <guid>https://zcj-git520.github.io/p/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B9%8B%E4%BA%8B%E5%8A%A1%E6%9C%BA%E5%88%B6%E5%8E%9F%E7%90%86/</guid>
        <description>&lt;img src="https://zcj-git520.github.io/p/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B9%8B%E4%BA%8B%E5%8A%A1%E6%9C%BA%E5%88%B6%E5%8E%9F%E7%90%86/1.png" alt="Featured image of post æ•°æ®åº“ä¹‹äº‹åŠ¡æœºåˆ¶åŸç†" /&gt;&lt;h2 id=&#34;äº‹åŠ¡çš„acidåŸåˆ™&#34;&gt;äº‹åŠ¡çš„ACIDåŸåˆ™&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;äº‹åŠ¡ä¸€èˆ¬è¦æ»¡è¶³ACIDåŸåˆ™ï¼š
&lt;ol&gt;
&lt;li&gt;A(atomicity): åŸå­æ€§&lt;/li&gt;
&lt;li&gt;C(consistency): ä¸€è‡´æ€§&lt;/li&gt;
&lt;li&gt;I(isolation): ç‹¬ç«‹æ€§/éš”ç¦»æ€§&lt;/li&gt;
&lt;li&gt;D(Durability): æŒä¹…æ€§&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;li&gt;åŸå­æ€§ï¼šæŒ‡ä¸€ä¸ªäº‹åŠ¡ç»„æˆçš„ä¸€ç»„sqlè¦ä¹ˆå…¨éƒ¨æ‰§è¡ŒæˆåŠŸï¼Œè¦ä¹ˆå…¨éƒ¨æ‰§è¡Œå¤±è´¥&lt;/li&gt;
&lt;li&gt;ä¸€è‡´æ€§ï¼šä¸ç®¡äº‹åŠ¡å‘ç”Ÿå‰åï¼ŒåŸæœ¬çš„æ•°æ®å˜åŒ–éƒ½æ˜¯ä¸€è‡´çš„ï¼Œä¹Ÿå°±æ˜¯æ•°æ®åº“ä¸­çš„æ•°æ®åªå…è®¸ä»ä¸€ä¸ªä¸€è‡´æ€§
çŠ¶æ€å˜åŒ–ä¸ºå¦ä¸€ä¸ªä¸€è‡´æ€§çŠ¶æ€ï¼Œå³ä¸€ä¸ªäº‹åŠ¡ä¸­çš„æ‰€æœ‰æ“ä½œï¼Œè¦ä¹ˆä¸€èµ·æ”¹å˜æ•°æ®åº“ä¸­çš„æ•°æ®ï¼Œè¦ä¹ˆéƒ½ä¸å˜ï¼Œå¯¹äºå…¶ä»–äº‹åŠ¡è€Œè¨€ï¼Œæ•°æ®
å˜åŒ–æ˜¯ä¸€è‡´çš„&lt;/li&gt;
&lt;li&gt;ç‹¬ç«‹æ€§/éš”ç¦»æ€§: å¤šä¸ªäº‹åŠ¡ä¹‹é—´éƒ½æ˜¯ç‹¬ç«‹çš„ï¼Œäº’ä¸å½±å“ï¼Œæ˜¯åŸºäºé”çš„æœºåˆ¶å’Œmvccæœºåˆ¶å®ç°çš„&lt;/li&gt;
&lt;li&gt;æŒä¹…æ€§ï¼šæŒ‡ä¸€ä¸ªäº‹åŠ¡ä¸€æ—¦æäº¤ï¼Œå®ƒä¼šä¿æŒæ°¸ä¹…æ€§ï¼Œå³æ‰€æœ‰æ›´æ”¹æ•°æ®åº“ä¸­çš„æ•°æ®éƒ½ä¼šè¢«å†™å…¥ç£ç›˜åšæŒä¹…åŒ–å¤„ç†&lt;/li&gt;
&lt;li&gt;ç›¸å…³å‘½ä»¤ï¼š
&lt;ol&gt;
&lt;li&gt;å¼€å¯ä¸€ä¸ªäº‹åŠ¡ï¼šstart transaction| begin | begin work&lt;/li&gt;
&lt;li&gt;å›æ»šäº‹åŠ¡ï¼šrollback&lt;/li&gt;
&lt;li&gt;æäº¤äº‹åŠ¡ï¼šcommit&lt;/li&gt;
&lt;li&gt;å…³é—­æˆ–å¼€å¯è‡ªåŠ¨æäº¤: SET autocommit = 0|1|ON|OFF&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;li&gt;äº‹åŠ¡å›æ»šç‚¹ï¼šå½“åç»­æ“ä½œå¤±è´¥æ—¶ï¼Œå°±ä¼šå›æ»šåˆ°è¯¥ä½ç½®ï¼ˆå½“å‰æˆåŠŸçš„ä½ç½®ï¼‰
&lt;ul&gt;
&lt;li&gt;ç›¸å…³å‘½ä»¤ï¼š
&lt;ol&gt;
&lt;li&gt;æ·»åŠ äº‹åŠ¡å›æ»šç‚¹: savepoint point_name&lt;/li&gt;
&lt;li&gt;å›æ»šåˆ°æŒ‡å®šçš„å›æ»šç‚¹ï¼šrollback point_name&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;mysqläº‹åŠ¡éš”ç¦»æœºåˆ¶&#34;&gt;mysqläº‹åŠ¡éš”ç¦»æœºåˆ¶&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;äº‹åŠ¡éš”ç¦»æœºåˆ¶å¯åˆ†ä¸ºå››ä¸ªçº§åˆ«ï¼š
&lt;ol&gt;
&lt;li&gt;RU(read uncommitted): è¯»æœªæäº¤&lt;/li&gt;
&lt;li&gt;RC(read committed): è¯»å·²æäº¤&lt;/li&gt;
&lt;li&gt;RR(repeatable read): å¯é‡å¤è¯»&lt;/li&gt;
&lt;li&gt;serializable: åºåˆ—åŒ–/ä¸²è¡ŒåŒ–&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;li&gt;é»˜è®¤éš”ç¦»çº§åˆ«ä¸ºï¼šå¯é‡å¤è¯»
-è„è¯»ã€å¹»è¯»ã€ä¸å¯é‡å¤è¯»ã€è„å†™é—®é¢˜
&lt;ol&gt;
&lt;li&gt;è„è¯»ï¼šè„è¯»æ˜¯æŒ‡ä¸€ä¸ªäº‹åŠ¡è¯»åˆ°å…¶ä»–äº‹åŠ¡è¿˜æ²¡æäº¤çš„æ•°æ®ï¼Œå³å½“å‰äº‹åŠ¡è¯»åˆ°çš„æ•°æ®æ˜¯å…¶ä»–äº‹åŠ¡æœªæäº¤çš„æ•°æ®&lt;/li&gt;
&lt;li&gt;å¹»è¯»ï¼šæŒ‡åŒä¸€ä¸ªäº‹åŠ¡å†…å¤šæ¬¡æŸ¥è¯¢è¿”å›çš„ç»“æœé›†ä¸ä¸€æ ·ã€‚æ¯”å¦‚åŒä¸€ä¸ªäº‹åŠ¡Aï¼Œåœ¨ç¬¬ä¸€æ¬¡æŸ¥è¯¢è¡¨çš„æ•°æ®è¡Œæ•°æ—¶ï¼Œå‘ç°è¡¨ä¸­æœ‰næ¡è¡Œè®°å½•ï¼Œä½†æ˜¯ç¬¬äºŒæ¬¡ä»¥åŒç­‰æ¡ä»¶æŸ¥è¯¢æ—¶ï¼Œå´å‘ç°æœ‰n+1æ¡è®°å½•ï¼Œè¿™å°±å¥½åƒäº§ç”Ÿäº†å¹»è§‰&lt;/li&gt;
&lt;li&gt;ä¸å¯é‡å¤è¯»: æ˜¯æŒ‡ä¸€ä¸ªäº‹åŠ¡ä¸­ï¼Œå¤šæ¬¡è¯»å–åŒä¸€ä¸ªæ•°æ®ï¼Œå…ˆåè¯»å–æ•°æ®ä¸ä¸€è‡´&lt;/li&gt;
&lt;li&gt;è„å†™ï¼šæŒ‡åŒä¸€ä¸ªäº‹åŠ¡åŒæ—¶æ“ä½œåŒä¸€æ¡æ•°æ®&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;li&gt;äº‹åŠ¡éš”ç¦»æœºåˆ¶å®ç°
&lt;ol&gt;
&lt;li&gt;è¯»æœªæäº¤
&lt;ul&gt;
&lt;li&gt;å¤„äºè¯¥çº§åˆ«çš„æ•°æ®åº“ï¼Œè„è¯»ã€å¹»è¯»ã€ä¸å¯é‡å¤è¯»éƒ½å¯èƒ½å‘ç”Ÿ&lt;/li&gt;
&lt;li&gt;å®ç°æœºåˆ¶ï¼šè¯¥çº§åˆ«æ˜¯åŸºäºå†™äº’æ–¥é”å®ç°çš„ï¼Œè¿™ä¸ªçº§åˆ«åœ¨å†™æ•°æ®æ—¶ï¼Œé‡‡ç”¨äº†äº’æ–¥é”ï¼Œè§£å†³è„å†™çš„é—®é¢˜
ä½†æ˜¯è¯»æ“ä½œä¸æ˜¯äº’æ–¥çš„ï¼Œå¯¼è‡´å…¶ä»–äº‹åŠ¡å¯ä»¥è¯»åˆ°è¯¥äº‹åŠ¡æœªæäº¤çš„æ•°æ®ï¼Œä»è€Œå¯¼è‡´äº†è„è¯»ã€å¹»è¯»ã€ä¸å¯é‡å¤è¯»çš„å‘ç”Ÿ&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;è¯»å·²æäº¤
&lt;ul&gt;
&lt;li&gt;å¤„äºè¯¥çº§åˆ«çš„æ•°æ®åº“ï¼Œè§£å†³äº†è„è¯»çš„é—®é¢˜ï¼Œä¸å¯é‡å¤çš„å’Œå¹»è¯»çš„é—®é¢˜åŒæ ·å­˜åœ¨&lt;/li&gt;
&lt;li&gt;å®ç°æœºåˆ¶ï¼šè¯¥çº§åˆ«åœ¨åŸºäºå†™äº’æ–¥é”çš„åŸºç¡€ä¸Šï¼Œæ‰é‡‡ç”¨äº†mvccå¤šç‰ˆæœ¬å¹¶å‘æ§åˆ¶å³ä½¿è¿›è¡Œè¯»æ“ä½œå¤„ç†ï¼Œ
å³mvccç‰ˆæœ¬æ§åˆ¶ä¸ä¼šè®©å¦ä¸€ä¸ªäº‹åŠ¡è¯»å–å¦ä¸€ä¸ªæ­£åœ¨ä¿®æ”¹ï¼ˆæœªæäº¤ï¼‰çš„æ•°æ®ï¼Œè€Œæ˜¯è¿”å›ä¿®æ”¹ä¹‹é—´çš„æ•°æ®ï¼ˆè€ç‰ˆæœ¬çš„æ•°æ®ï¼‰
å³æ²¡æœ‰è¯»å–æ•°æ®çš„æ—¶å€™ï¼Œmvccç‰ˆæœ¬æœºåˆ¶ä¼šæ ¹æ®äº‹åŠ¡ä¸­çš„æŸ¥è¯¢å‘½ä»¤å¿«é€Ÿåˆ›å»ºä¸€ä¸ªæ–°çš„readView,è¯»å–åˆ°çš„æ•°æ®å°±æ˜¯æ–°çš„æ•°æ®&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;å¯é‡è¯»è¯»
&lt;ul&gt;
&lt;li&gt;å¤„äºè¯¥çº§åˆ«çš„æ•°æ®åº“ï¼Œè§£å†³äº†è„è¯»ã€ä¸å¯é‡è¯»è¯»çš„é—®é¢˜ï¼Œå¹»è¯»çš„é—®é¢˜åŒæ ·å­˜åœ¨&lt;/li&gt;
&lt;li&gt;å®ç°æœºåˆ¶ï¼šçº§åˆ«åœ¨åŸºäºè¯»å·²ä½“æäº¤çš„åŸºç¡€ä¸Šï¼Œå¯¹mvccè¿›è¡Œäº†ä¼˜åŒ–ï¼Œå³åœ¨åŒä¸€ä¸ªäº‹åŠ¡ä¸­ä¸ä¼šæ ¹æ®æ¯ä¸€æ¬¡æŸ¥è¯¢éƒ½ç”Ÿæˆä¸€ä¸ªæ–°çš„readView
è€Œæ˜¯åœ¨ä¸€ä¸ªäº‹åŠ¡ä¸­åªæœ‰ç¬¬ä¸€æ¬¡æŸ¥è¯¢æ‰åˆ›å»ºä¸€ä¸ªreadView,åç»­æŸ¥è¯¢éƒ½ä½¿ç”¨è¿™ä¸ªreadViewçš„æ•°æ®,è§£å†³äº†ä¸å¯é‡è¯»è¯»çš„é—®é¢˜&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;åºåˆ—åŒ–/ä¸²è¡ŒåŒ–çº§åˆ«
&lt;ul&gt;
&lt;li&gt;å¤„äºè¯¥çº§åˆ«çš„æ•°æ®åº“ï¼Œè§£å†³äº†è„è¯»ã€ä¸å¯é‡å¤è¯»ã€å¹»è¯»é—®é¢˜&lt;/li&gt;
&lt;li&gt;å®ç°æœºåˆ¶ï¼šåºåˆ—åŒ–æ„æ€æ˜¯å°†æ‰€æœ‰çš„äº‹åŠ¡æŒ‰åºæ’é˜Ÿåä¸²è¡ŒåŒ–å¤„ç†ï¼Œä¹Ÿå°±æ˜¯æ“ä½œåŒä¸€å¼ è¡¨çš„äº‹åŠ¡åªèƒ½ä¸€ä¸ªä¸€ä¸ªæ‰§è¡Œï¼Œäº‹åŠ¡åœ¨æ‰§è¡Œå‰éœ€è¦å…ˆè·å–è¡¨çº§åˆ«çš„é”èµ„æºï¼Œæ‹¿åˆ°é”èµ„æºçš„äº‹åŠ¡æ‰èƒ½æ‰§è¡Œï¼Œå…¶ä½™äº‹åŠ¡åˆ™é™·å…¥é˜»å¡ï¼Œç­‰å¾…å½“å‰äº‹åŠ¡é‡Šæ”¾é”&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;li&gt;äº‹åŠ¡éš”ç¦»æœºåˆ¶çš„å‘½ä»¤
&lt;ol&gt;
&lt;li&gt;æŸ¥è¯¢å½“å‰æ•°æ®åº“çš„éš”ç¦»çº§åˆ«:
&lt;ul&gt;
&lt;li&gt;SELECT @@tx_isolation;&lt;/li&gt;
&lt;li&gt;show variables like &amp;lsquo;%tx_isolation%&#39;;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;è®¾ç½®éš”ç¦»çº§åˆ«ä¸ºRUçº§åˆ«ï¼ˆå½“å‰è¿æ¥ç”Ÿæ•ˆï¼‰
&lt;ul&gt;
&lt;li&gt;set transaction isolation level read uncommitted;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;è®¾ç½®éš”ç¦»çº§åˆ«ä¸ºRCçº§åˆ«ï¼ˆå…¨å±€ç”Ÿæ•ˆï¼‰
&lt;ul&gt;
&lt;li&gt;set global transaction isolation level read committed;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;è®¾ç½®éš”ç¦»çº§åˆ«ä¸ºRRçº§åˆ«ï¼ˆå½“å‰è¿æ¥ç”Ÿæ•ˆï¼‰
&lt;ul&gt;
&lt;li&gt;set tx_isolation = &amp;lsquo;repeatable-read&amp;rsquo;;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;è®¾ç½®éš”ç¦»çº§åˆ«ä¸ºæœ€é«˜çš„serializableçº§åˆ«ï¼ˆå…¨å±€ç”Ÿæ•ˆï¼‰
&lt;ul&gt;
&lt;li&gt;set global.tx_isolation = &amp;lsquo;serializable&amp;rsquo;;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;mysql-æ—¥å¿—&#34;&gt;MySQL æ—¥å¿—&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;å¸¸ç”¨MySQLæ—¥å¿—å¯åˆ†ä¸ºï¼šundo-log,redo-log,bin-log&lt;/li&gt;
&lt;/ul&gt;
&lt;ol&gt;
&lt;li&gt;undo-log
&lt;ul&gt;
&lt;li&gt;undo-logæ˜¯æ’¤é”€æ—¥å¿—ï¼Œä¸»è¦å®ç°åœ¨äº‹åŠ¡å›æ»šå’Œmvccæœºåˆ¶ä¸­&lt;/li&gt;
&lt;li&gt;å½“å†™å…¥ç±»å‹çš„sqlæ‰§è¡Œæ—¶ï¼Œéƒ½ä¼šè®°å½•undo-logæ—¥å¿—ï¼Œä¼šç”Ÿæˆç›¸åº”çš„åsqlæ”¾å…¥undo-logä¸­&lt;/li&gt;
&lt;li&gt;åœ¨mvccæœºåˆ¶ä¸­ï¼Œundo-logä¸­è®°å½•çš„æ—§æ•°æ®å¹¶ä¸æ­¢æ˜¯ä¸€æ¡ï¼Œè€Œæ˜¯å¯èƒ½å­˜åœ¨å¤šæ¡ä¸åŒç‰ˆæœ¬çš„undo-logè®°å½•
ï¼Œå…¶å†…éƒ¨é€šè¿‡roll_prtå›æ»šæŒ‡é’ˆç»„æˆä½†é“¾è¡¨ï¼Œè€Œè¯¥é“¾è¡¨ä¹Ÿç§°ä¸ºç‰ˆæœ¬é“¾&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;redo-log
&lt;ul&gt;
&lt;li&gt;redo-logæ˜¯é‡åšæ—¥å¿—ï¼Œç”¨æ¥å®ç°æ•°æ®çš„æ¢å¤&lt;/li&gt;
&lt;li&gt;redo-logæ˜¯ä¸€ç§é¢„å†™å¼æ—¥å¿—ï¼Œå³åœ¨å‘å†…å­˜å†™æ•°æ®ä¹‹å‰ï¼Œå…ˆå†™å…¥æ—¥å¿—ï¼Œå½“åç»­æ•°æ®æœªè¢«åˆ·åˆ°ç£ç›˜æˆ–
mysqlå´©æºƒæ—¶å¯ä»¥é€šè¿‡æ—¥å¿—æ¥å¿«é€Ÿæ¢å¤æ•°æ®ï¼Œç¡®ä¿æ‰€æœ‰çš„æ•°æ®éƒ½èƒ½è¢«æŒä¹…åŒ–ï¼ˆé‡‡ç”¨åˆ·ç›˜ç­–ç•¥ï¼‰&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;bin-log
&lt;ul&gt;
&lt;li&gt;ç§°ä¸ºäºŒè¿›åˆ¶æ—¥å¿—ï¼Œä¸»è¦è®°å½•æ‰€æœ‰å¯¹æ•°æ®åº“è¡¨ç»“æ„çš„å˜æ›´å’Œè¡¨æ•°æ®çš„ä¿®æ”¹çš„æ“ä½œ&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;ul&gt;
&lt;li&gt;redo-logå’Œbin-logçš„åŒºåˆ«
&lt;ol&gt;
&lt;li&gt;ç”Ÿæ•ˆèŒƒå›´ä¸åŒï¼Œredo-logæ˜¯innodbå¼•æ“ç‹¬æœ‰ï¼Œè€Œbin-logæ˜¯æ‰€æœ‰å¼•æ“éƒ½é€šç”¨&lt;/li&gt;
&lt;li&gt;å†™å…¥æ–¹å¼ä¸åŒï¼Œredo-logæ˜¯é‡‡ç”¨ä¸¤æ–‡ä»¶å¾ªç¯å†™ï¼Œè€Œbin-logæ˜¯ä¸æ–­åˆ›å»ºæ–°æ–‡ä»¶åè¿½åŠ &lt;/li&gt;
&lt;li&gt;æ–‡ä»¶æ ¼å¼ä¸åŒï¼Œredo-logæ˜¯è®°å½•æ‰€æœ‰å˜æ›´åçš„æ•°æ®ï¼Œè€Œbin-logæ˜¯è®°å½•æ˜¯å˜æ›´åçš„sql&lt;/li&gt;
&lt;li&gt;ä½¿ç”¨åœºæ™¯ä¸åŒï¼Œredo-logä¸»è¦å®ç°æ•…éšœæƒ…å†µä¸‹çš„æ•°æ®æ¢å¤ï¼Œè€Œbin-logåˆ™æ˜¯ç”¨äºæ•°æ®ç¾å¤‡åŒæ­¥&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;li&gt;æ—¥å¿—çš„ä¸»è¦ä½¿ç”¨åœºæ™¯ï¼š
&lt;ol&gt;
&lt;li&gt;undo-log: ä¸»è¦å®ç°äº‹åŠ¡çš„ACIDå’Œmvccæœºåˆ¶&lt;/li&gt;
&lt;li&gt;redo-log: ä¸»è¦æ˜¯å®ç°äº‹åŠ¡çš„æŒä¹…æ€§ï¼Œç¡®ä¿äº‹åŠ¡æäº¤åä¸ä¼šä¸¢å¤±&lt;/li&gt;
&lt;li&gt;bin-log: ä¸»è¦ç»“åˆredo-logå®ç°äº‹åŠ¡åŸåˆ™ä¸­çš„ä¸€è‡´æ€§ï¼Œç¡®ä¿äº‹åŠ¡æäº¤åæ•°æ®æ˜¯ä¸€è‡´çš„&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;äº‹åŠ¡æ€»ç»“&#34;&gt;äº‹åŠ¡æ€»ç»“&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;undo-logã€redo-logæ—¥å¿—æ¥çœ‹å¾…ACIDçš„å››å¤§ç‰¹æ€§ï¼šåŸå­æ€§ã€ä¸€è‡´æ€§ã€éš”ç¦»æ€§ã€æŒä¹…æ€§&lt;/li&gt;
&lt;/ul&gt;
&lt;ol&gt;
&lt;li&gt;åŸå­æ€§
&lt;ul&gt;
&lt;li&gt;åŸå­æ€§è¦æ±‚äº‹åŠ¡ä¸­çš„æ‰€æœ‰æ“ä½œè¦ä¹ˆå…¨éƒ¨æˆåŠŸï¼Œè¦ä¹ˆå…¨éƒ¨å¤±è´¥&lt;/li&gt;
&lt;li&gt;å®ç°åŸç†ï¼šåŸºäºundo-logæ¥å®ç°ï¼Œåœ¨è¯¥æ—¥å¿—ä¸­ç”Ÿæˆç›¸åº”çš„åsql,æ‰§è¡Œå¤±è´¥æ—¶ï¼Œåˆ©ç”¨è¯¥æ—¥å¿—å›æ»šæ‰€æœ‰å†™æ“ä½œ&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;æŒä¹…æ€§
&lt;ul&gt;
&lt;li&gt;ä¸€è‡´æ€§è¦æ±‚æ‰€æœ‰çš„æ•°æ®éœ€è¦ä¿å­˜åœ¨ç£ç›˜ä¸­&lt;/li&gt;
&lt;li&gt;å®ç°åŸç†ï¼šè¿™ä¸€ç‚¹æ˜¯åŸºäºredo-logå®ç°&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;éš”ç¦»æ€§
&lt;ul&gt;
&lt;li&gt;éš”ç¦»æ€§è¦æ±‚ä¸€ä¸ªäº‹åŠ¡ä¸ä¼šå—åˆ°å¦ä¸€ä¸ªäº‹åŠ¡çš„å½±å“ä¸€ä¸ªäº‹åŠ¡ä¸ä¼šå—åˆ°å¦ä¸€ä¸ªäº‹åŠ¡çš„å½±å“
-å®ç°åŸç†ï¼šé€šè¿‡é”æœºåˆ¶å’Œmvccæœºåˆ¶å®ç°&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;ä¸€è‡´æ€§
&lt;ul&gt;
&lt;li&gt;æ•°æ®åº“çš„æ•´ä½“æ•°æ®å˜åŒ–ï¼Œåªèƒ½ä»ä¸€ä¸ªä¸€è‡´æ€§çŠ¶æ€å˜ä¸ºå¦ä¸€ä¸ªä¸€è‡´æ€§çŠ¶æ€ï¼Œå…¶å®å‰é¢çš„åŸå­æ€§ã€æŒä¹…æ€§ã€éš”ç¦»æ€§éƒ½æ˜¯ä¸ºäº†ç¡®ä¿è¿™ç‚¹è€Œå­˜åœ¨çš„&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 191; 
			flex-basis: 459px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B9%8B%E4%BA%8B%E5%8A%A1%E6%9C%BA%E5%88%B6%E5%8E%9F%E7%90%86/1.png&#34; data-size=&#34;1094x571&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B9%8B%E4%BA%8B%E5%8A%A1%E6%9C%BA%E5%88%B6%E5%8E%9F%E7%90%86/1.png&#34;
			width=&#34;1094&#34;
			height=&#34;571&#34;
			srcset=&#34;https://zcj-git520.github.io/p/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B9%8B%E4%BA%8B%E5%8A%A1%E6%9C%BA%E5%88%B6%E5%8E%9F%E7%90%86/1_hu0ba8fce09208969ff6b2aee6fef01bdc_192508_480x0_resize_box_3.png 480w, https://zcj-git520.github.io/p/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B9%8B%E4%BA%8B%E5%8A%A1%E6%9C%BA%E5%88%B6%E5%8E%9F%E7%90%86/1_hu0ba8fce09208969ff6b2aee6fef01bdc_192508_1024x0_resize_box_3.png 1024w&#34;
			loading=&#34;lazy&#34;
			&gt;
	&lt;/a&gt;
	
&lt;/figure&gt;&lt;/p&gt;
</description>
        </item>
        <item>
        <title>æ•°æ®åº“ä¹‹åŸºç¡€çŸ¥è¯†</title>
        <link>https://zcj-git520.github.io/p/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B9%8B%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/</link>
        <pubDate>Wed, 21 Sep 2022 22:00:38 +0800</pubDate>
        
        <guid>https://zcj-git520.github.io/p/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B9%8B%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/</guid>
        <description>&lt;img src="https://zcj-git520.github.io/p/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B9%8B%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/5.png" alt="Featured image of post æ•°æ®åº“ä¹‹åŸºç¡€çŸ¥è¯†" /&gt;&lt;h2 id=&#34;å¤šè¡¨æŸ¥è¯¢&#34;&gt;å¤šè¡¨æŸ¥è¯¢&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;å¤šè¡¨ä¸€èˆ¬æ˜¯ä¸»è¡¨ï¼Œä¸»è¦å­˜å‚¨æ•°æ®çš„åœ°æ–¹ï¼Œæ¯ä¸€ä¸ªå­—æ®µéƒ½å¯ä»¥é‡å¤ï¼Œæ²¡æœ‰ä¸»é”®ï¼Œ
æ— æ³•æ ¹æ®æŸä¸ªå­—æ®µå®šä½åˆ°å‡†ç¡®çš„è®°å½•&lt;/li&gt;
&lt;li&gt;ä¸€è¡¨ä¸€èˆ¬æ˜¯ä»è¡¨ï¼Œä¸»è¦å­˜å‚¨è¾…åŠ©æ•°æ®ï¼Œé€šè¿‡ä¸»é”®ä¸ä¸»è¡¨è¿æ¥ï¼Œå­˜å‚¨çš„è®°å½•æ˜¯ä¸å¯é‡å¤çš„ï¼Œå¯ä»¥é€šè¿‡ä¸»é”®å®šä½åˆ°è®°å½•&lt;/li&gt;
&lt;li&gt;å·¦è¿æ¥ï¼šå·¦è¿æ¥æ˜¯ä»¥å·¦è¡¨å–å‡ºæ‰€æœ‰è®°å½•ä¸å³è¡¨åŒ¹é…ï¼Œå¦‚æœæ²¡æœ‰åŒ¹é…ä»¥nullå€¼ä»£è¡¨å³è¾¹çš„åˆ—&lt;/li&gt;
&lt;li&gt;å³è¿æ¥ï¼šå³è¿æ¥æ˜¯ä»¥å³è¡¨å–å‡ºæ‰€æœ‰çš„è®°å½•ï¼Œä¸å·¦è¡¨è¿›è¡ŒåŒ¹é…ï¼Œå¦‚æœæ²¡æœ‰åŒ¹é…ä»¥nullå€¼ä»£è¡¨å·¦è¾¹çš„åˆ—&lt;/li&gt;
&lt;li&gt;å†…è¿æ¥ï¼šç­‰å€¼è¿æ¥ï¼Œæ˜¯å¤šè¡¨çš„äº¤é›†&lt;/li&gt;
&lt;li&gt;äº¤å‰è¿æ¥ï¼šè¿”å›ä¸¤è¡¨çš„ç¬›å¡å°”ä¹˜ç§¯ï¼Œä½œç”¨æ˜¯è®¡ç®—ä¸¤ä¸ªè¡¨ä¹‹é—´å¯èƒ½çš„å­˜åœ¨çš„ç»„åˆï¼Œç»“æœæ˜¯é›†ä¸­çš„è®°å½•ç­‰äºä¸¤å¼ å„è‡ªè®°å½•æ•°çš„ä¹˜ç§¯&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;æ•°æ®åº“èŒƒå¼&#34;&gt;æ•°æ®åº“èŒƒå¼&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;èŒƒå¼ï¼šèŒƒå¼æ˜¯å€¼åœ¨è®¾è®¡æ•°æ®åº“è¡¨æ—¶ï¼Œéœ€è¦éµå¾ªçš„ä¸€äº›åŸåˆ™ï¼Œç›®çš„æ˜¯è®©è®¾è®¡çš„æ•°æ®åº“è¡¨ç»“æ„æ›´ä¸ºåˆç†å’Œä¼˜é›…ï¼Œå¸¸è§çš„æ•°æ®åº“èŒƒå¼ä¸ºï¼šæ•°æ®åº“ä¸‰å¤§èŒƒå¼ï¼ˆ1NFã€2NFã€3NFï¼‰
å’Œå·´æ–¯-ç§‘å¾·èŒƒå¼ï¼ˆBCNFï¼‰&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;æ•°æ®åº“çš„ä¸‰å¤§èŒƒå¼&#34;&gt;æ•°æ®åº“çš„ä¸‰å¤§èŒƒå¼&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;ä¸‰å¤§èŒƒå¼ä¸ºé€’è¿›å…³ç³»ï¼Œå³åç»­èŒƒå¼æ˜¯å‰èŒƒå¼ä¸ºåŸºç¡€ä¸Šä¼˜åŒ–æˆ–è€…åç»­èŒƒå¼æ˜¯å‰èŒƒå¼çš„ä¼˜åŒ–&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;ç¬¬ä¸€èŒƒå¼&#34;&gt;ç¬¬ä¸€èŒƒå¼&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;ç¬¬ä¸€èŒƒå¼ï¼šç¡®ä¿æ•°æ®çš„åŸå­æ€§ï¼Œä¹Ÿå°±æ˜¯å­˜å‚¨çš„æ•°æ®å…·å¤‡ä¸å¯åœ¨åˆ†æ€§&lt;/li&gt;
&lt;li&gt;åŸå­æ€§ï¼šåŸå­æ€§è§„å®šä¸€ä¸ªå­—æ®µæ˜¯åŸå­ï¼Œä¸èƒ½åœ¨è¿›è¡Œæ‹†åˆ†æˆå¤šä¸ªå­—æ®µ&lt;/li&gt;
&lt;li&gt;ç¬¬ä¸€èŒƒå¼é™¤äº†å¯¹åˆ—çº§åˆ«çš„æ•°æ®ç”Ÿæ•ˆå¤–ï¼Œå¯¹è¡Œçº§æ•°æ®å¤„ç†ä¸€æ ·ï¼Œå³è¡Œæ•°æ®ä¹‹é—´ç›¸ä¸å½±å“ï¼Œéƒ½æ˜¯ç‹¬ç«‹çš„æ•´ä½“&lt;/li&gt;
&lt;li&gt;è‹¥æ•°æ®åº“æ»¡è¶³ç¬¬ä¸€èŒƒå¼çš„å½±å“å¦‚ä¸‹ï¼š
&lt;ol&gt;
&lt;li&gt;å®¢æˆ·ç«¯è¯­è¨€ä¸è¡¨ä¹‹é—´æ— æ³•å¾ˆå¥½çš„ç”Ÿæˆæ˜ å°„å…³ç³»&lt;/li&gt;
&lt;li&gt;æŸ¥è¯¢å¾—åˆ°çš„æ•°æ®åœ¨è¿›è¡Œæ•°æ®å¤„ç†æ—¶ï¼Œéœ€è¦å¯¹å­—æ®µæ•°æ®è¿›è¡Œé¢å¤–çš„æ‹†åˆ†&lt;/li&gt;
&lt;li&gt;æ’å…¥æ•°æ®æ—¶ï¼Œéœ€è¦å¯¹å­—æ®µå€¼è¿›è¡Œé¢å¤–æ‹¼æ¥åæ‰èƒ½å†™å…¥åˆ°æ•°æ®åº“
&lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 139; 
			flex-basis: 333px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B9%8B%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/1.png&#34; data-size=&#34;459x330&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B9%8B%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/1.png&#34;
			width=&#34;459&#34;
			height=&#34;330&#34;
			srcset=&#34;https://zcj-git520.github.io/p/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B9%8B%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/1_hufe8748ffa1856cb489830b5bd46884bc_6717_480x0_resize_box_3.png 480w, https://zcj-git520.github.io/p/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B9%8B%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/1_hufe8748ffa1856cb489830b5bd46884bc_6717_1024x0_resize_box_3.png 1024w&#34;
			loading=&#34;lazy&#34;
			&gt;
	&lt;/a&gt;
	
&lt;/figure&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;ç¬¬äºŒèŒƒå¼&#34;&gt;ç¬¬äºŒèŒƒå¼&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;ç¬¬äºŒèŒƒå¼ï¼šåœ¨ç¬¬ä¸€èŒƒå¼çš„åŸºç¡€ä¸Šï¼Œè¦æ±‚æ‰€æœ‰çš„è¡¨ä¸­çš„æ‰€æœ‰åˆ—ï¼Œå…¶æ•°æ®éƒ½éœ€è¦ä¾èµ–äºä¸»é”®ï¼Œä¹Ÿå°±æ˜¯ä¸€å¼ è¡¨åªå­˜å‚¨åŒç±»å‹çš„æ•°æ®ï¼Œä¸èƒ½å­˜åœ¨åŒå¼ è¡¨ä¸­å­˜åœ¨ä¸ä¸»é”®æ²¡æœ‰å…³ç³»çš„æ•°æ®&lt;/li&gt;
&lt;li&gt;ç”±äºæ•°æ®å­˜åœ¨ä¸ä¸»é”®æ•°æ®ä¹‹é—´æ²¡æœ‰å…³è”æ€§ï¼Œå¯¼è‡´è¡¨ä¸­çš„æ•°æ®å­˜åœ¨å†—ä½™çš„æƒ…å†µ&lt;/li&gt;
&lt;li&gt;ç¬¬äºŒèŒƒå¼è¦æ±‚ï¼šæ¯å¼ è¡¨çš„ä¸šåŠ¡å±æ€§å…·å¤‡â€œå”¯ä¸€æ€§â€ï¼Œé¿å…å­˜åœ¨ä¸€å¼ è¡¨å­˜åœ¨å¤šç§ä¸šåŠ¡å±æ€§çš„æƒ…å†µï¼Œå³â€œä¸€å¼ è¡¨åªæè¿°ä¸€ä»¶äº‹æƒ…â€
&lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 223; 
			flex-basis: 535px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B9%8B%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/2.png&#34; data-size=&#34;558x250&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B9%8B%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/2.png&#34;
			width=&#34;558&#34;
			height=&#34;250&#34;
			srcset=&#34;https://zcj-git520.github.io/p/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B9%8B%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/2_hude7d2d1c9cb0f9ab9922058bdc89455a_5246_480x0_resize_box_3.png 480w, https://zcj-git520.github.io/p/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B9%8B%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/2_hude7d2d1c9cb0f9ab9922058bdc89455a_5246_1024x0_resize_box_3.png 1024w&#34;
			loading=&#34;lazy&#34;
			&gt;
	&lt;/a&gt;
	
&lt;/figure&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;ç¬¬ä¸‰èŒƒå¼&#34;&gt;ç¬¬ä¸‰èŒƒå¼&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;ç¬¬ä¸‰èŒƒå¼ï¼šåœ¨ç¬¬ä¸€ï¼Œç¬¬äºŒèŒƒå¼çš„åŸºç¡€ä¸Šï¼Œè¦æ±‚è¡¨ä¸­çš„æ¯ä¸€åˆ—æ•°æ®ä¸èƒ½ä¸ä¸»é”®å¤–çš„å­—æ®µå­˜åœ¨å…³ç³»&lt;/li&gt;
&lt;li&gt;ç¬¬ä¸‰èŒƒå¼æ»¡è¶³ï¼šè¡¨ä¸­çš„æ¯ä¸ªéä¸»é”®å­—æ®µä¸å…¶ä»–éä¸»é”®å­—æ®µä¹‹é—´ï¼Œéƒ½æ˜¯ç›¸äº’ç‹¬ç«‹çš„ï¼Œä¹‹é—´ä¸å­˜åœ¨ç›¸äº’ä¾èµ–çš„å…³ç³»ï¼Œæ‰€æœ‰å­—æ®µéƒ½ä¾èµ–ä¸»é”®&lt;/li&gt;
&lt;li&gt;åœ¨è®¾è®¡è¡¨ç»“æ„ä¸­ï¼Œå¦‚ä¸æ»¡è¶³ç¬¬ä¸‰èŒƒå¼ï¼Œåœ¨æ“ä½œè¡¨æ—¶å°±ä¼šå‡ºç°å¼‚å¸¸ï¼Œä½¿å¾—è¡¨éš¾ä»¥ç»´æŠ¤ï¼Œç›¸åé€šè¿‡ç¬¬ä¸‰èŒƒå¼ä¼˜åŒ–åï¼Œè¡¨ç»“æ„ä¼šæ›´åŠ ä¼˜é›…çµæ´»ï¼Œä¹Ÿå®¹æ˜“
ç»´æŠ¤
&lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 361; 
			flex-basis: 867px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B9%8B%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/3.png&#34; data-size=&#34;571x158&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B9%8B%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/3.png&#34;
			width=&#34;571&#34;
			height=&#34;158&#34;
			srcset=&#34;https://zcj-git520.github.io/p/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B9%8B%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/3_hud5dd100324bab0f865389ce6548614bc_3240_480x0_resize_box_3.png 480w, https://zcj-git520.github.io/p/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B9%8B%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/3_hud5dd100324bab0f865389ce6548614bc_3240_1024x0_resize_box_3.png 1024w&#34;
			loading=&#34;lazy&#34;
			&gt;
	&lt;/a&gt;
	
&lt;/figure&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;å·´æ–¯-ç§‘å¾·èŒƒå¼&#34;&gt;å·´æ–¯-ç§‘å¾·èŒƒå¼&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;åœ¨è¡¨ä¸­é™¤äº†ä¸»é”®å¤–ï¼Œè¿˜æœ‰è”åˆä¸»é”®ï¼Œä¹Ÿå°±æ˜¯æœ‰å¤šä¸ªåˆ—ç»„æˆçš„ä¸»é”®&lt;/li&gt;
&lt;li&gt;å·´æ–¯-ç§‘å¾·èŒƒå¼ä¹Ÿç§°ä¸ºï¼š3.5èŒƒå¼ï¼Œå®ƒæ˜¯ç¬¬ä¸‰èŒƒå¼çš„è¡¥å……ï¼Œç¬¬ä¸‰èŒƒå¼è¦æ±‚æ˜¯ï¼šä»»ä½•éä¸»é”®å­—æ®µä¸å…¶ä»–éä¸»é”®å­—æ®µä¹‹é—´å­˜åœ¨ä¾èµ–å…³ç³»ï¼Œå³
è¦æ±‚éä¸»é”®ä¹‹é—´å…·å¤‡ç‹¬ç«‹æ€§ï¼Œå·´æ–¯-ç§‘å¾·èŒƒå¼è¦æ±‚ï¼šä»»ä½•ä¸»å±æ€§ä¸èƒ½å¯¹å…¶ä»–ä¸»é”®å­é›†å­˜åœ¨å…³ç³»ï¼Œå³è”åˆä¸»é”®ä¸­çš„æŸåˆ—å€¼ï¼Œä¸èƒ½ä¸è”åˆä¸»é”®çš„
å…¶ä»–åˆ—å­˜åœ¨ä¾èµ–å…³ç³»&lt;/li&gt;
&lt;li&gt;å·´æ–¯-ç§‘å¾·èŒƒå¼è§„å®šè”åˆä¸»é”®ä¹‹é—´çš„ä¸å­˜åœ¨ä¾èµ–ï¼Œå³æ»¡è¶³ä¸»é”®çš„ç‹¬ç«‹æ€§&lt;/li&gt;
&lt;li&gt;ä¾‹å¦‚ï¼šä»¥classesç­çº§å­—æ®µã€class_adviserç­ä¸»ä»»å­—æ®µã€nameå­¦ç”Ÿå§“åå­—æ®µï¼Œç»„åˆæˆä¸€ä¸ªè”åˆä¸»é”®ï¼Œå°±ä¸ç¬¦åˆå·´æ–¯-ç§‘å¾·èŒƒå¼
&lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 291; 
			flex-basis: 699px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B9%8B%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/4.png&#34; data-size=&#34;536x184&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B9%8B%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/4.png&#34;
			width=&#34;536&#34;
			height=&#34;184&#34;
			srcset=&#34;https://zcj-git520.github.io/p/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B9%8B%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/4_hu833b201c7f9addeaedfc9666789d465e_4366_480x0_resize_box_3.png 480w, https://zcj-git520.github.io/p/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B9%8B%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/4_hu833b201c7f9addeaedfc9666789d465e_4366_1024x0_resize_box_3.png 1024w&#34;
			loading=&#34;lazy&#34;
			&gt;
	&lt;/a&gt;
	
&lt;/figure&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;èŒƒå¼æ€»ç»“&#34;&gt;èŒƒå¼æ€»ç»“&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;ç¬¬ä¸€èŒƒå¼ï¼šç¡®ä¿åŸå­æ€§ï¼Œå³ä¿è¯è¡¨ä¸­çš„æ¯ä¸€åˆ—æ•°æ®éƒ½æ˜¯ä¸å¯åœ¨åˆ†çš„å­—æ®µ&lt;/li&gt;
&lt;li&gt;ç¬¬äºŒèŒƒå¼ï¼šç¡®ä¿å”¯ä¸€æ€§ï¼Œå³ä¿è¯æ¯å¼ è¡¨åªæè¿°ä¸€ç§ä¹‰åŠ¡ï¼Œä¸€å¼ è¡¨åªæè¿°ä¸€ä»¶äº‹æƒ…&lt;/li&gt;
&lt;li&gt;ç¬¬ä¸‰èŒƒå¼ï¼šç¡®ä¿éä¸»é”®å­—æ®µçš„ç‹¬ç«‹æ€§ï¼Œå³è¡¨ä¸­é™¤ä¸»é”®å¤–ï¼Œæ¯ä¸ªå­—æ®µä¹‹é—´ä¸å­˜åœ¨ä»»ä½•çš„ä¾èµ–æ€§ï¼Œå­—æ®µä¹‹é—´æ˜¯ç‹¬ç«‹çš„&lt;/li&gt;
&lt;li&gt;å·´æ–¯-ç§‘å¾·èŒƒå¼ï¼šç¡®ä¿ä¸»é”®å­—æ®µ(è”åˆå­—æ®µ)çš„ç‹¬ç«‹æ€§,å³ä»»ä½•ä¸»å±æ€§ä¸èƒ½å¯¹å…¶å®ƒä¸»é”®å­˜åœ¨ä¾èµ–å…³ç³»ï¼Œè”åˆä¸»é”®ä¹‹é—´ç›¸äº’ç‹¬ç«‹&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;æ•°æ®åº“é”æœºåˆ¶&#34;&gt;æ•°æ®åº“é”æœºåˆ¶&lt;/h2&gt;
&lt;h2 id=&#34;æ•°æ®åº“é”æœºåˆ¶-1&#34;&gt;æ•°æ®åº“é”æœºåˆ¶&lt;/h2&gt;
&lt;h3 id=&#34;æ•°æ®åº“é”åˆ†ç±»&#34;&gt;æ•°æ®åº“é”åˆ†ç±»&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;æŒ‰ç…§é¢—ç²’åº¦åˆ†ç±»ï¼š
&lt;ol&gt;
&lt;li&gt;è¡¨çº§é”ï¼šå…±äº«è¯»é”å’Œç‹¬å å†™é”&lt;/li&gt;
&lt;li&gt;è¡Œçº§é”ï¼šå…±äº«é”(s)å’Œæ’ä»–é”(x)&lt;/li&gt;
&lt;li&gt;é¡µçº§é”&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;li&gt;æŒ‰ç…§ä½¿ç”¨æ–¹å¼åˆ†ç±»ï¼š
&lt;ol&gt;
&lt;li&gt;ä¹è§‚é”&lt;/li&gt;
&lt;li&gt;æ‚²è§‚é”&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h4 id=&#34;è¡¨çº§é”&#34;&gt;è¡¨çº§é”&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;å¼€é”€å°ï¼ŒåŠ é”å¿«ï¼Œä¸ä¼šå‘ç”Ÿæ­»é”ï¼Œé”å®šé¢—ç²’åº¦å¤§ï¼Œå‘ç”Ÿé”å†²çªæ¦‚ç‡é«˜ï¼Œå¹¶å‘åº¦æœ€ä½ï¼Œmylsamå’ŒinnoDBéƒ½æ˜¯æ”¯æŒçš„ï¼Œ&lt;/li&gt;
&lt;li&gt;è¯»è¯»ä¸é˜»ï¼Œå†™å†™é˜»ï¼Œè¯»å†™äº’æ–¥ï¼Œè¯»å†™é”æ˜¯ä¸²è¡Œçš„ï¼Œå†™é”ä¼˜äºè¯»é”&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;è¡Œçº§é”&#34;&gt;è¡Œçº§é”&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;å¼€é”€å¤§ï¼ŒåŠ é”æ…¢ï¼Œä¼šå‘ç”Ÿæ­»é”ï¼Œé”å®šé¢—ç²’åº¦å°ï¼Œå‘ç”Ÿé”å†²çªæ¦‚ç‡ä½ï¼Œå¹¶å‘åº¦é«˜ã€‚innoDBæ”¯æŒï¼Œå› innodb
çš„è¡Œé”æ˜¯åŸºäºç´¢å¼•çš„&lt;/li&gt;
&lt;li&gt;å…±äº«é”(sé”)ä¹Ÿå«è¯»é”ï¼Œå…è®¸å¤šä¸ªäº‹åŠ¡è¯»å–åŒä¸€ä¸ªèµ„æºï¼Œä¸å…è®¸ä¿®æ”¹&lt;/li&gt;
&lt;li&gt;æ’ä»–é”(xé”)å…è®¸è·å–æ’ä»–é”çš„äº‹åŠ¡æ›´æ–°æ•°æ®ï¼Œé˜»æ­¢å…¶ä»–äº‹åŠ¡è·å–ç›¸åŒæ•°æ®çš„è¯»é”å’Œæ’ä»–é”ï¼›&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;ä¹è§‚é”&#34;&gt;ä¹è§‚é”&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;ä¸é‡‡ç”¨æ•°æ®åº“è‡ªèº«åŠ é”çš„æ–¹å¼ï¼Œé€šè¿‡ç”¨æˆ·ç¨‹åºæ¥å®ç°ï¼Œä¸€èˆ¬é‡‡ç”¨ç‰ˆæœ¬å·æœºåˆ¶æˆ–è€…æ—¶é—´è¹‰çš„æœºåˆ¶&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;æ‚²è§‚é”&#34;&gt;æ‚²è§‚é”&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;å¯¹æ•°æ®è¢«å…¶ä»–äº‹åŠ¡çš„ä¿®æ”¹ä¿æŒä¿å®ˆçŠ¶æ€ï¼Œä¼šé€šè¿‡æ•°æ®åº“è‡ªèº«åŠ é”çš„æœºåˆ¶å®ç°ï¼Œä»è€Œä¿è¯æ•°æ®æ“ä½œçš„æ’ä»–æ€§&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;é—´éš™é”&#34;&gt;é—´éš™é”&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;ä½¿ç”¨èŒƒå›´æŸ¥è¯¢è€Œéç­‰å€¼æŸ¥è¯¢æ—¶ï¼Œå¹¶è¯·æ±‚å…±äº«æˆ–è€…æ’ä»–é”æ—¶ï¼Œä¼šç»™ç¬¦åˆèŒƒå›´æ¡ä»¶çš„å·²æœ‰æ•°æ®è®°å½•çš„ç´¢å¼•åŠ é”ï¼Œå¯¹äºé”®å€¼
åœ¨æ¡ä»¶èŒƒå›´å†…ï¼Œä½†ä¸å­˜åœ¨çš„è®°å½•å«åšé—´éš™é”ï¼ˆpapé”ï¼‰&lt;/li&gt;
&lt;li&gt;é—´éš™é”å¯é˜²æ­¢å¹»è¯»å’Œæ»¡è¶³æ¢å¤å’Œå¤åˆ¶çš„éœ€è¦&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;æ•°æ®åº“æ­»é”&#34;&gt;æ•°æ®åº“æ­»é”&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;æ­»é”ç°è±¡: å¹¶å‘äº‹åŠ¡ï¼Œæœ¬è´¨æ˜¯æ•°æ®åº“å¤šæ¡çº¿ç¨‹å¹¶å‘æ‰§è¡Œï¼Œéœ€è¦å…·å¤‡å®Œå–„çš„é”æœºåˆ¶æ¥é¿å…çº¿ç¨‹çš„ä¸å®‰å…¨
ä½†æ˜¯ä¹Ÿä¼šé€ æˆæ­»é”çš„ç°è±¡&lt;/li&gt;
&lt;li&gt;è§£å†³æ­»é”é—®é¢˜
&lt;ol&gt;
&lt;li&gt;é”è¶…æ—¶æœºåˆ¶ï¼šäº‹åŠ¡/çº¿ç¨‹åœ¨ç­‰å¾…èµ„æºæ—¶ï¼Œè¶…è¿‡ä¸€å®šæ—¶é—´åè‡ªåŠ¨æ”¾å¼ƒç­‰å¾…å¹¶è¿”å›&lt;/li&gt;
&lt;li&gt;å¤–åŠ›ä»‹å…¥ï¼šå¤–éƒ¨æ¥å…¥ï¼Œå°†æ­»é”æƒ…å†µä¸­çš„æŸä¸ªäº‹åŠ¡/çº¿ç¨‹å¼ºåˆ¶ç»“æŸï¼Œè®©å…¶ä»–äº‹åŠ¡ç»§ç»­æ‰§è¡Œ&lt;/li&gt;
&lt;li&gt;mysqlçš„é”è¶…æ—¶æœºåˆ¶ï¼šä¸€ä¸ªäº‹åŠ¡åœ¨é•¿æ—¶é—´å†…æ— æ³•è·å–åˆ°é”æ—¶ï¼Œå°±ä¸»åŠ¨æ”¾å¼ƒç­‰å¾…ï¼Œé»˜è®¤é”è¶…æ—¶æ—¶é—´ä¸º50S&lt;/li&gt;
&lt;li&gt;mysqlæ­»é”æ£€æµ‹ç®—æ³•ï¼š
&lt;ul&gt;
&lt;li&gt;wait-for graph,å¯åŠ¨åä¼šæ”¶é›†ä¸¤ä¸ªä¿¡æ¯ï¼Œä¸€ä¸ªæ˜¯é”çš„ä¿¡æ¯é“¾è¡¨ï¼šç›®å‰æŒæ¯ä¸ªé”çš„äº‹åŠ¡æ˜¯è°ï¼Œ
å¦ä¸€ä¸ªæ˜¯ç­‰å¾…é“¾è¡¨ï¼šé˜»å¡çš„äº‹åŠ¡è¦ç­‰å¾…çš„é”æ˜¯è°&lt;/li&gt;
&lt;li&gt;ç®—æ³•ä¼šä»ä¹‹å‰çš„äº‹åŠ¡ä½œä¸ºèµ·ç‚¹ï¼Œç„¶åä»é”çš„ä¿¡æ¯é“¾è¡¨ä¸­æ‰¾åˆ°å¯¹åº”é”çš„ä¿¡æ¯ï¼Œç„¶åæ ¹æ®é”çš„çš„æŒæœ‰ç€ï¼Œ
åœ¨äº‹åŠ¡ç­‰å¾…é“¾è¡¨ä¸­è¿›è¡ŒæŸ¥æ‰¾ï¼Œçœ‹æŒæœ‰ç€çš„äº‹åŠ¡æ˜¯å¦åœ¨ç­‰å¾…è·å–å…¶ä»–é”ï¼Œå¦‚æœæ˜¯åˆ™çœ‹å¦ä¸€ä¸ªæŒæœ‰é”çš„äº‹åŠ¡æ˜¯å¦åœ¨ç­‰å¾…å…¶ä»–é”â€¦â€¦
ç›´åˆ°é”çš„ä¿¡æ¯é“¾è¡¨ä¸­åï¼Œæ˜¯å¦å­˜åœ¨é—­ç¯ï¼Œè‹¥å‡ºç°åˆ™ä»‹å…¥ï¼ˆå¼ºåˆ¶å›æ»šå…¶ä¸­çš„ä¸€ä¸ªäº‹åŠ¡æ¥è¾¾åˆ°è§£é™¤æ­»é”çš„é—®é¢˜ï¼‰
&lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 363; 
			flex-basis: 872px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B9%8B%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/6.png&#34; data-size=&#34;749x206&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B9%8B%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/6.png&#34;
			width=&#34;749&#34;
			height=&#34;206&#34;
			srcset=&#34;https://zcj-git520.github.io/p/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B9%8B%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/6_huf732841b43d33870f52bb044f37d06d3_83470_480x0_resize_box_3.png 480w, https://zcj-git520.github.io/p/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B9%8B%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/6_huf732841b43d33870f52bb044f37d06d3_83470_1024x0_resize_box_3.png 1024w&#34;
			loading=&#34;lazy&#34;
			&gt;
	&lt;/a&gt;
	
&lt;/figure&gt;&lt;/li&gt;
&lt;li&gt;å›æ»šäº‹åŠ¡æ—¶ï¼Œä¸€èˆ¬ä¼šåœ¨undo-logæ—¥å¿—ä¸­å›æ»šundoé‡å°‘çš„äº‹åŠ¡ï¼Œå›æ»šä»£ä»·å°‘&lt;/li&gt;
&lt;li&gt;é€šè¿‡innodb_deadlock_detect=on/offæ¥æ§åˆ¶æ˜¯å¦å¼€å¯äº†æ­»é”æ£€æµ‹æœºåˆ¶&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;li&gt;é˜²æ­¢æ­»é”
&lt;ol&gt;
&lt;li&gt;ä»¥å›ºå®šçš„é¡ºåºè®¿é—®è¡¨å’Œè¡Œ&lt;/li&gt;
&lt;li&gt;å¤§äº‹åŠ¡è¿›è¡Œæ‹†åˆ†&lt;/li&gt;
&lt;li&gt;åŒä¸€äº‹åŠ¡ï¼Œå°½å¯èƒ½çš„ä¸€æ¬¡é”å®š&lt;/li&gt;
&lt;li&gt;é™ä½éš”ç¦»çº§åˆ«&lt;/li&gt;
&lt;li&gt;ä¸ºè¡¨æ·»åŠ åˆç†çš„ç´¢å¼•
&lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 31; 
			flex-basis: 76px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B9%8B%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/5.png&#34; data-size=&#34;1680x5289&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B9%8B%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/5.png&#34;
			width=&#34;1680&#34;
			height=&#34;5289&#34;
			srcset=&#34;https://zcj-git520.github.io/p/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B9%8B%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/5_hu897c59d3d00f9ccd7837ef1ecd5c493a_1058366_480x0_resize_box_3.png 480w, https://zcj-git520.github.io/p/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B9%8B%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/5_hu897c59d3d00f9ccd7837ef1ecd5c493a_1058366_1024x0_resize_box_3.png 1024w&#34;
			loading=&#34;lazy&#34;
			&gt;
	&lt;/a&gt;
	
&lt;/figure&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;/ul&gt;
</description>
        </item>
        <item>
        <title>linux æ€§èƒ½è°ƒè¯•æŠ€æœ¯</title>
        <link>https://zcj-git520.github.io/p/linux-%E6%80%A7%E8%83%BD%E8%B0%83%E8%AF%95%E6%8A%80%E6%9C%AF/</link>
        <pubDate>Thu, 15 Sep 2022 22:00:38 +0800</pubDate>
        
        <guid>https://zcj-git520.github.io/p/linux-%E6%80%A7%E8%83%BD%E8%B0%83%E8%AF%95%E6%8A%80%E6%9C%AF/</guid>
        <description>&lt;img src="https://zcj-git520.github.io/p/linux-%E6%80%A7%E8%83%BD%E8%B0%83%E8%AF%95%E6%8A%80%E6%9C%AF/3.png" alt="Featured image of post linux æ€§èƒ½è°ƒè¯•æŠ€æœ¯" /&gt;&lt;h2 id=&#34;linux-å¸¸ç”¨æŸ¥çœ‹å¯æ‰§è¡Œå·¥å…·&#34;&gt;linux å¸¸ç”¨æŸ¥çœ‹å¯æ‰§è¡Œå·¥å…·&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;readelfï¼šå¯ä»¥æŸ¥çœ‹å¯æ‰§è¡Œæ–‡ä»¶ç›¸å…³ä¿¡æ¯&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;readif -h æŸ¥çœ‹å¤´ä¿¡æ¯
&lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 175; 
			flex-basis: 420px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/linux-%E6%80%A7%E8%83%BD%E8%B0%83%E8%AF%95%E6%8A%80%E6%9C%AF/1.png&#34; data-size=&#34;1093x624&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/linux-%E6%80%A7%E8%83%BD%E8%B0%83%E8%AF%95%E6%8A%80%E6%9C%AF/1.png&#34;
			width=&#34;1093&#34;
			height=&#34;624&#34;
			srcset=&#34;https://zcj-git520.github.io/p/linux-%E6%80%A7%E8%83%BD%E8%B0%83%E8%AF%95%E6%8A%80%E6%9C%AF/1_hu6c80a05083265fe3bf32ef09c14e5fd7_55575_480x0_resize_box_3.png 480w, https://zcj-git520.github.io/p/linux-%E6%80%A7%E8%83%BD%E8%B0%83%E8%AF%95%E6%8A%80%E6%9C%AF/1_hu6c80a05083265fe3bf32ef09c14e5fd7_55575_1024x0_resize_box_3.png 1024w&#34;
			loading=&#34;lazy&#34;
			&gt;
	&lt;/a&gt;
	
&lt;/figure&gt;&lt;/li&gt;
&lt;li&gt;readelf â€“d æŸ¥çœ‹åŠ¨æ€åº“ä¾èµ–
&lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 142; 
			flex-basis: 340px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/linux-%E6%80%A7%E8%83%BD%E8%B0%83%E8%AF%95%E6%8A%80%E6%9C%AF/2.png&#34; data-size=&#34;1014x714&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/linux-%E6%80%A7%E8%83%BD%E8%B0%83%E8%AF%95%E6%8A%80%E6%9C%AF/2.png&#34;
			width=&#34;1014&#34;
			height=&#34;714&#34;
			srcset=&#34;https://zcj-git520.github.io/p/linux-%E6%80%A7%E8%83%BD%E8%B0%83%E8%AF%95%E6%8A%80%E6%9C%AF/2_hua790ee7389155d85ac51b10348dec754_59067_480x0_resize_box_3.png 480w, https://zcj-git520.github.io/p/linux-%E6%80%A7%E8%83%BD%E8%B0%83%E8%AF%95%E6%8A%80%E6%9C%AF/2_hua790ee7389155d85ac51b10348dec754_59067_1024x0_resize_box_3.png 1024w&#34;
			loading=&#34;lazy&#34;
			&gt;
	&lt;/a&gt;
	
&lt;/figure&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;File:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;file [å¯è¡Œæ”¿æ–‡ä»¶] æ‰§è¡Œæ–‡ä»¶æ¶æ„ä¿¡æ¯ã€åŠ¨æ€ã€é™æ€
&lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 686; 
			flex-basis: 1647px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/linux-%E6%80%A7%E8%83%BD%E8%B0%83%E8%AF%95%E6%8A%80%E6%9C%AF/3.png&#34; data-size=&#34;1661x242&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/linux-%E6%80%A7%E8%83%BD%E8%B0%83%E8%AF%95%E6%8A%80%E6%9C%AF/3.png&#34;
			width=&#34;1661&#34;
			height=&#34;242&#34;
			srcset=&#34;https://zcj-git520.github.io/p/linux-%E6%80%A7%E8%83%BD%E8%B0%83%E8%AF%95%E6%8A%80%E6%9C%AF/3_hu5bc4d06a19d5d5d7b7fe871d036ee380_38629_480x0_resize_box_3.png 480w, https://zcj-git520.github.io/p/linux-%E6%80%A7%E8%83%BD%E8%B0%83%E8%AF%95%E6%8A%80%E6%9C%AF/3_hu5bc4d06a19d5d5d7b7fe871d036ee380_38629_1024x0_resize_box_3.png 1024w&#34;
			loading=&#34;lazy&#34;
			&gt;
	&lt;/a&gt;
	
&lt;/figure&gt;&lt;/li&gt;
&lt;li&gt;ldd æŸ¥çœ‹åŠ¨æ€åº“
&lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 442; 
			flex-basis: 1061px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/linux-%E6%80%A7%E8%83%BD%E8%B0%83%E8%AF%95%E6%8A%80%E6%9C%AF/4.png&#34; data-size=&#34;1314x297&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/linux-%E6%80%A7%E8%83%BD%E8%B0%83%E8%AF%95%E6%8A%80%E6%9C%AF/4.png&#34;
			width=&#34;1314&#34;
			height=&#34;297&#34;
			srcset=&#34;https://zcj-git520.github.io/p/linux-%E6%80%A7%E8%83%BD%E8%B0%83%E8%AF%95%E6%8A%80%E6%9C%AF/4_huff18233e0ef2fb35471161819a03274a_32752_480x0_resize_box_3.png 480w, https://zcj-git520.github.io/p/linux-%E6%80%A7%E8%83%BD%E8%B0%83%E8%AF%95%E6%8A%80%E6%9C%AF/4_huff18233e0ef2fb35471161819a03274a_32752_1024x0_resize_box_3.png 1024w&#34;
			loading=&#34;lazy&#34;
			&gt;
	&lt;/a&gt;
	
&lt;/figure&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Strip&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;-I &amp;ndash;input-target= å‡å®šè¾“å…¥æ–‡ä»¶çš„æ ¼å¼ä¸º&lt;/li&gt;
&lt;li&gt;-O &amp;ndash;output-target= ä»¥æ ¼å¼åˆ›å»ºè¾“å‡ºæ–‡ä»¶&lt;/li&gt;
&lt;li&gt;-F &amp;ndash;target= è®¾ç½®è¾“å…¥ã€è¾“å‡ºçš„æ–‡ä»¶æ ¼å¼ä¸º&lt;/li&gt;
&lt;li&gt;-p &amp;ndash;preserve-dates å¤åˆ¶ä¸Šæ¬¡ä¿®æ”¹æˆ–è€…æ“ä½œçš„æ—¶é—´åˆ°è¾“å‡ºæ–‡ä»¶ä¸­&lt;/li&gt;
&lt;li&gt;-R &amp;ndash;remove-section= åˆ é™¤è¾“å‡ºæ–‡ä»¶ä¸­æ®µä¿¡æ¯&lt;/li&gt;
&lt;li&gt;-s &amp;ndash;strip-all åˆ é™¤æ‰€æœ‰ç¬¦å·ä¿¡æ¯å’Œé‡å®šä½ä¿¡æ¯&lt;/li&gt;
&lt;li&gt;-g -S -d &amp;ndash;strip-debug åˆ é™¤æ‰€æœ‰è°ƒè¯•ä¿¡æ¯å’Œæ®µä¿¡æ¯&lt;/li&gt;
&lt;li&gt;&amp;ndash;strip-unneeded åˆ é™¤æ‰€æœ‰é‡å®šä½ä¸­ä¸éœ€è¦çš„ç¬¦å·ä¿¡æ¯&lt;/li&gt;
&lt;li&gt;&amp;ndash;only-keep-debug åˆ é™¤è°ƒè¯•ä¿¡æ¯ä»¥å¤–çš„å…¶ä»–æ‰€æœ‰ä¿¡æ¯&lt;/li&gt;
&lt;li&gt;-N &amp;ndash;strip-symbol= ä¸æ‹·è´ç¬¦å·ä¿¡æ¯&lt;/li&gt;
&lt;li&gt;-K &amp;ndash;keep-symbol= ä¸å»é™¤ç¬¦å·ä¿¡æ¯&lt;/li&gt;
&lt;li&gt;-w &amp;ndash;wildcard åœ¨ç¬¦å·ä¸­ä½¿ç”¨é€šé…ç¬¦&lt;/li&gt;
&lt;li&gt;-x &amp;ndash;discard-all å»é™¤æ‰€æœ‰éå…¨å±€ç¬¦å·&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;linux-è¿›ç¨‹è°ƒè¯•å·¥å…·&#34;&gt;Linux è¿›ç¨‹è°ƒè¯•å·¥å…·&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;pidof æŸ¥å‘½ä»¤å¯¹åº”çš„è¿›ç¨‹ç¼–å·  (pidof bash)
&lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 847; 
			flex-basis: 2033px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/linux-%E6%80%A7%E8%83%BD%E8%B0%83%E8%AF%95%E6%8A%80%E6%9C%AF/5.png&#34; data-size=&#34;1144x135&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/linux-%E6%80%A7%E8%83%BD%E8%B0%83%E8%AF%95%E6%8A%80%E6%9C%AF/5.png&#34;
			width=&#34;1144&#34;
			height=&#34;135&#34;
			srcset=&#34;https://zcj-git520.github.io/p/linux-%E6%80%A7%E8%83%BD%E8%B0%83%E8%AF%95%E6%8A%80%E6%9C%AF/5_hu45e59e163f3490f8a9d4d6396abaadcf_9365_480x0_resize_box_3.png 480w, https://zcj-git520.github.io/p/linux-%E6%80%A7%E8%83%BD%E8%B0%83%E8%AF%95%E6%8A%80%E6%9C%AF/5_hu45e59e163f3490f8a9d4d6396abaadcf_9365_1024x0_resize_box_3.png 1024w&#34;
			loading=&#34;lazy&#34;
			&gt;
	&lt;/a&gt;
	
&lt;/figure&gt;&lt;/li&gt;
&lt;li&gt;Ps
&lt;ul&gt;
&lt;li&gt;åŸºç¡€å‚æ•°
&lt;ul&gt;
&lt;li&gt;-A, -e     é€‰æ‹©æ‰€æœ‰è¿›ç¨‹&lt;/li&gt;
&lt;li&gt;-a           é€‰æ‹©é™¤äº†ä¼šè¯é¢†å¯¼å’Œä¸ç»ˆç«¯æ— å…³çš„è¿›ç¨‹ä»¥å¤–çš„æ‰€æœ‰è¿›ç¨‹ã€‚&lt;/li&gt;
&lt;li&gt;a            BSDæ ¼å¼ï¼Œé€šå¸¸ä¸xåŒæ—¶å‡ºç°ï¼Œæ˜¾ç¤ºæ‰€æœ‰è¿›ç¨‹&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;é€‰æ‹©æ€§å‚æ•°
&lt;ul&gt;
&lt;li&gt;-C &lt;!-- raw HTML omitted --&gt;      æ ¹æ®cmdlistä¸­çš„å‘½ä»¤ è¾“å‡º&lt;/li&gt;
&lt;li&gt;-p, &amp;ndash;pid &lt;!-- raw HTML omitted --&gt;      æ ¹æ®è¿›ç¨‹idè¿›è¡Œé€‰æ‹©è¾“å‡º&lt;/li&gt;
&lt;li&gt;&amp;ndash;ppid &lt;!-- raw HTML omitted --&gt;     æ ¹æ®çˆ¶è¿›ç¨‹IDé€‰æ‹©è¾“å‡º&lt;/li&gt;
&lt;li&gt;-U, &amp;ndash;User &lt;!-- raw HTML omitted --&gt;    æ ¹æ®çœŸå®ç”¨æˆ·ID(RUID)æˆ–ç”¨æˆ·åé€‰æ‹©&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;æ˜¾ç¤ºçº¿ç¨‹
&lt;ul&gt;
&lt;li&gt;-L                   æ˜¾ç¤ºçº¿ç¨‹ç›¸å…³ä¿¡æ¯&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;æ‚é¡¹
&lt;ul&gt;
&lt;li&gt;L                   åˆ—å‡ºæ‰€ä»¥æ”¯æŒçš„æ ¼å¼ï¼ˆåº”ç”¨ä¸-oä¸­çš„è¾“å‡ºæ ¼å¼ï¼‰&lt;/li&gt;
&lt;li&gt;e                    è¾“å‡ºç¯å¢ƒå˜é‡ï¼ˆåœ¨æŒ‡ä»¤åé¢ï¼‰&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;å¾—åˆ°çº¿ç¨‹ä¿¡æ¯
&lt;ul&gt;
&lt;li&gt;ps -eLf
&lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 206; 
			flex-basis: 495px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/linux-%E6%80%A7%E8%83%BD%E8%B0%83%E8%AF%95%E6%8A%80%E6%9C%AF/6.png&#34; data-size=&#34;1657x802&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/linux-%E6%80%A7%E8%83%BD%E8%B0%83%E8%AF%95%E6%8A%80%E6%9C%AF/6.png&#34;
			width=&#34;1657&#34;
			height=&#34;802&#34;
			srcset=&#34;https://zcj-git520.github.io/p/linux-%E6%80%A7%E8%83%BD%E8%B0%83%E8%AF%95%E6%8A%80%E6%9C%AF/6_hue285c36cce32d1a4b5719aff250ed1b0_102964_480x0_resize_box_3.png 480w, https://zcj-git520.github.io/p/linux-%E6%80%A7%E8%83%BD%E8%B0%83%E8%AF%95%E6%8A%80%E6%9C%AF/6_hue285c36cce32d1a4b5719aff250ed1b0_102964_1024x0_resize_box_3.png 1024w&#34;
			loading=&#34;lazy&#34;
			&gt;
	&lt;/a&gt;
	
&lt;/figure&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Pstree
&lt;ul&gt;
&lt;li&gt;æŸ¥çœ‹è¿›ç¨‹ä¹‹é—´çš„çˆ¶å­å…³ç³»
&lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 159; 
			flex-basis: 382px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/linux-%E6%80%A7%E8%83%BD%E8%B0%83%E8%AF%95%E6%8A%80%E6%9C%AF/7.png&#34; data-size=&#34;1137x713&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/linux-%E6%80%A7%E8%83%BD%E8%B0%83%E8%AF%95%E6%8A%80%E6%9C%AF/7.png&#34;
			width=&#34;1137&#34;
			height=&#34;713&#34;
			srcset=&#34;https://zcj-git520.github.io/p/linux-%E6%80%A7%E8%83%BD%E8%B0%83%E8%AF%95%E6%8A%80%E6%9C%AF/7_huf3dcaafe881598efc7a7598241a5fe12_58043_480x0_resize_box_3.png 480w, https://zcj-git520.github.io/p/linux-%E6%80%A7%E8%83%BD%E8%B0%83%E8%AF%95%E6%8A%80%E6%9C%AF/7_huf3dcaafe881598efc7a7598241a5fe12_58043_1024x0_resize_box_3.png 1024w&#34;
			loading=&#34;lazy&#34;
			&gt;
	&lt;/a&gt;
	
&lt;/figure&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;top
&lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 179; 
			flex-basis: 430px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/linux-%E6%80%A7%E8%83%BD%E8%B0%83%E8%AF%95%E6%8A%80%E6%9C%AF/8.png&#34; data-size=&#34;1536x856&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/linux-%E6%80%A7%E8%83%BD%E8%B0%83%E8%AF%95%E6%8A%80%E6%9C%AF/8.png&#34;
			width=&#34;1536&#34;
			height=&#34;856&#34;
			srcset=&#34;https://zcj-git520.github.io/p/linux-%E6%80%A7%E8%83%BD%E8%B0%83%E8%AF%95%E6%8A%80%E6%9C%AF/8_huae354f519533d2733ded7fd55dde7436_88980_480x0_resize_box_3.png 480w, https://zcj-git520.github.io/p/linux-%E6%80%A7%E8%83%BD%E8%B0%83%E8%AF%95%E6%8A%80%E6%9C%AF/8_huae354f519533d2733ded7fd55dde7436_88980_1024x0_resize_box_3.png 1024w&#34;
			loading=&#34;lazy&#34;
			&gt;
	&lt;/a&gt;
	
&lt;/figure&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;ç¬¬ä¸€è¡Œæ˜¾ç¤ºçš„æ˜¯ç³»ç»Ÿçš„æ¦‚å†µï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å½“å‰æ—¶é—´ã€ç³»ç»Ÿçš„è¿è¡Œæ—¶é—´ã€ç™»å½•çš„ç”¨æˆ·æ•°ä»¥åŠç³»ç»Ÿçš„å¹³å‡è´Ÿè½½ã€‚&lt;/li&gt;
&lt;li&gt;å¹³å‡è´Ÿè½½æœ‰3ä¸ªå€¼ï¼šæœ€è¿‘1åˆ†é’Ÿçš„ï¼Œæœ€è¿‘5åˆ†é’Ÿçš„ï¼Œæœ€è¿‘15åˆ†é’Ÿçš„å¹³å‡è´Ÿè½½ã€‚&lt;/li&gt;
&lt;li&gt;load average æ•°æ®æ¯éš”5ç§’é’Ÿæ£€æŸ¥ä¸€æ¬¡æ´»è·ƒçš„è¿›ç¨‹æ•°ï¼Œå¯ä»¥çœ‹å‡ºç‚¹é—®é¢˜ã€‚
å¤ªé«˜è‚¯å®šä¸è¡Œäº†ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ç¬¬äºŒè¡Œæ˜¾ç¤ºäº†è¿›ç¨‹:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;topå‘½ä»¤çš„è¾“å‡ºä¸­å°†è¿›ç¨‹å«ä½œä»»åŠ¡ï¼ˆtaskï¼‰ï¼š
æ€»è¿›ç¨‹ï¼Œè¿è¡Œã€ä¼‘çœ ã€åœæ­¢æˆ–æ˜¯åƒµåŒ–çŠ¶æ€ï¼ˆåƒµåŒ–çŠ¶æ€æ˜¯æŒ‡è¿›ç¨‹å®Œæˆäº†ï¼Œä½†çˆ¶è¿›ç¨‹æ²¡æœ‰å“åº”ï¼‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ç¬¬ä¸‰è¡Œæ˜¾ç¤ºCPUä¿¡æ¯:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;topæ ¹æ®è¿›ç¨‹çš„å±ä¸»ï¼ˆç”¨æˆ·è¿˜æ˜¯ç³»ç»Ÿï¼‰å’Œè¿›ç¨‹çš„çŠ¶æ€ï¼ˆè¿è¡Œã€ ç©ºé—²è¿˜æ˜¯ç­‰å¾…ï¼‰å°†CPUåˆ©ç”¨ç‡åˆ†æˆå‡ ç±»è¾“å‡ºã€‚&lt;/li&gt;
&lt;li&gt;0.0%usã€user spaceã€‘â€” ç”¨æˆ·ç©ºé—´å ç”¨CPUçš„ç™¾åˆ†æ¯”ã€‚&lt;/li&gt;
&lt;li&gt;1.5%syã€sysctlã€‘â€” å†…æ ¸ç©ºé—´å ç”¨CPUçš„ç™¾åˆ†æ¯”ã€‚&lt;/li&gt;
&lt;li&gt;0.0%niã€ã€‘â€” æ”¹å˜è¿‡ä¼˜å…ˆçº§çš„è¿›ç¨‹å ç”¨CPUçš„ç™¾åˆ†æ¯”&lt;/li&gt;
&lt;li&gt;98.5%idã€idoltã€‘â€” ç©ºé—²CPUç™¾åˆ†æ¯”&lt;/li&gt;
&lt;li&gt;0.0%waã€waitã€‘â€” IOç­‰å¾…å ç”¨CPUçš„ç™¾åˆ†æ¯”&lt;/li&gt;
&lt;li&gt;0.0%hiã€Hardware IRQã€‘â€” ç¡¬ä¸­æ–­å ç”¨CPUçš„ç™¾åˆ†æ¯”&lt;/li&gt;
&lt;li&gt;0.0%siã€Software Interruptsã€‘â€” è½¯ä¸­æ–­å ç”¨CPUçš„ç™¾åˆ†æ¯”&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ç¬¬å››è¡Œæ˜¾ç¤ºå†…å­˜ä¿¡æ¯ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;total æ€»å†…å­˜&lt;/li&gt;
&lt;li&gt;free ç©ºé—²å†…å­˜&lt;/li&gt;
&lt;li&gt;used å·²ä½¿ç”¨&lt;/li&gt;
&lt;li&gt;buff/cache ç¼“å­˜çš„å†…å­˜é‡&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ç¬¬äº”è¡Œæ˜¾ç¤ºswapäº¤æ¢åˆ†åŒºä¿¡æ¯ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;totalæ€»å¤§å°&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;freeç©ºé—²&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;used å·²ä½¿ç”¨&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;avail Mem ç¼“å†²çš„äº¤æ¢åŒºæ€»é‡&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å¯ç”¨å†…å­˜=free + buffer + cached&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;PIDï¼šè¿›ç¨‹çš„IDã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;USERï¼šè¿›ç¨‹å±ä¸»çš„åå­—ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;PRï¼šè¿›ç¨‹çš„ä¼˜å…ˆçº§ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;NIï¼šè¿›ç¨‹çš„è°¦è®©åº¦å€¼ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;VIRTï¼šè¿›ç¨‹å ç”¨çš„è™šæ‹Ÿå†…å­˜æ€»é‡ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;RESï¼šè¿›ç¨‹å ç”¨çš„ç‰©ç†å†…å­˜æ€»é‡ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;SHRï¼šè¿›ç¨‹å’Œå…¶ä»–è¿›ç¨‹å…±äº«çš„å†…å­˜æ€»é‡ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Sï¼šè¿›ç¨‹çš„çŠ¶æ€ï¼ˆDä»£è¡¨å¯ä¸­æ–­çš„ä¼‘çœ çŠ¶æ€ï¼ŒRä»£è¡¨åœ¨è¿è¡ŒçŠ¶æ€ï¼ŒSä»£è¡¨ä¼‘çœ çŠ¶æ€ï¼ŒTä»£è¡¨è·Ÿè¸ªçŠ¶æ€æˆ–åœæ­¢çŠ¶æ€ï¼ŒZä»£è¡¨åƒµåŒ–çŠ¶æ€ï¼‰ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;%CPUï¼šè¿›ç¨‹ä½¿ç”¨çš„CPUæ—¶é—´æ¯”ä¾‹ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;%MEMï¼šè¿›ç¨‹ä½¿ç”¨çš„å†…å­˜å å¯ç”¨å†…å­˜çš„æ¯”ä¾‹ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;TIME+ï¼šè‡ªè¿›ç¨‹å¯åŠ¨åˆ°ç›®å‰ä¸ºæ­¢çš„CPUæ—¶é—´æ€»é‡ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;COMMANDï¼šè¿›ç¨‹æ‰€å¯¹åº”çš„å‘½ä»¤è¡Œåç§°ï¼Œä¹Ÿå°±æ˜¯å¯åŠ¨çš„ç¨‹åºåã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;mï¼šæ˜¾ç¤ºå†…å­˜&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;H: æ˜¾ç¤ºçº¿ç¨‹&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å…¶ä»–&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;M æ ¹æ®é©»ç•™å†…å­˜å¤§å°è¿›è¡Œæ’åº&lt;/li&gt;
&lt;li&gt;P æ ¹æ®CPUä½¿ç”¨ç™¾åˆ†æ¯”å¤§å°è¿›è¡Œæ’åº&lt;/li&gt;
&lt;li&gt;T æ ¹æ®æ—¶é—´/ç´¯è®¡æ—¶é—´è¿›è¡Œæ’åº&lt;/li&gt;
&lt;li&gt;q:é€€å‡º&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;linuxè¿›ç¨‹procè¯¦è§£&#34;&gt;linuxè¿›ç¨‹procè¯¦è§£&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;è¿›ç¨‹çš„å®Œæ•´å‘½ä»¤è¡Œ
&lt;ul&gt;
&lt;li&gt;/proc/[pid]/cmdline&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;è¿›ç¨‹å
&lt;ul&gt;
&lt;li&gt;/proc/[pid]/comm&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;è¿›ç¨‹ç¯å¢ƒå˜é‡
&lt;ul&gt;
&lt;li&gt;/proc/[pid]/environ&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;è¿›ç¨‹å¯æ‰§è¡Œæ–‡ä»¶
&lt;ul&gt;
&lt;li&gt;/proc/[pid]/exe&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;æ‰“å¼€æ–‡ä»¶æè¿°ç¬¦
&lt;ul&gt;
&lt;li&gt;/proc/[pid]/fd&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;æ‰“å¼€æ–‡ä»¶ä¿¡æ¯
&lt;ul&gt;
&lt;li&gt;/proc/pid/fdinfo&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;å†…å­˜æ˜ å°„æ–‡ä»¶
&lt;ul&gt;
&lt;li&gt;/proc/[pid]/map_files/&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;IOæ–‡ä»¶
&lt;ul&gt;
&lt;li&gt;/proc/[pid]/io&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;æ˜“äºé˜…è¯»çš„è¿›ç¨‹çŠ¶æ€ä¿¡æ¯
&lt;ul&gt;
&lt;li&gt;/proc/[pid]/status&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;è¿›ç¨‹çŠ¶æ€ä¿¡æ¯ï¼Œç”¨äºpsæŒ‡ä»¤
&lt;ul&gt;
&lt;li&gt;/proc/[pid]/stat&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;è¿›ç¨‹å†…å­˜ä½¿ç”¨ä¿¡æ¯
&lt;ul&gt;
&lt;li&gt;/proc/pid/statm&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;linux-å†…å­˜æ£€æµ‹å·¥å…·&#34;&gt;linux å†…å­˜æ£€æµ‹å·¥å…·&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Memwatch
&lt;ul&gt;
&lt;li&gt;åŒé‡é‡Šæ”¾&lt;/li&gt;
&lt;li&gt;é”™è¯¯é‡Šæ”¾&lt;/li&gt;
&lt;li&gt;æ²¡æœ‰é‡Šæ”¾çš„å†…å­˜&lt;/li&gt;
&lt;li&gt;æº¢å‡ºå’Œä¸‹æº¢&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Yamd
&lt;ul&gt;
&lt;li&gt;å†…å­˜æ³„æ¼&lt;/li&gt;
&lt;li&gt;åŒé‡é‡Šæ”¾&lt;/li&gt;
&lt;li&gt;é”™è¯¯é‡Šæ”¾&lt;/li&gt;
&lt;li&gt;è¶Šç•Œè®¿é—®&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;linux-æ€§èƒ½æ£€æµ‹å·¥å…·&#34;&gt;linux æ€§èƒ½æ£€æµ‹å·¥å…·&lt;/h2&gt;
&lt;h3 id=&#34;è¿›ç¨‹ç›¸å…³ä¼˜åŒ–å·¥å…·&#34;&gt;è¿›ç¨‹ç›¸å…³ä¼˜åŒ–å·¥å…·&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;ltrace
&lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 126; 
			flex-basis: 303px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/linux-%E6%80%A7%E8%83%BD%E8%B0%83%E8%AF%95%E6%8A%80%E6%9C%AF/10.png&#34; data-size=&#34;799x632&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/linux-%E6%80%A7%E8%83%BD%E8%B0%83%E8%AF%95%E6%8A%80%E6%9C%AF/10.png&#34;
			width=&#34;799&#34;
			height=&#34;632&#34;
			srcset=&#34;https://zcj-git520.github.io/p/linux-%E6%80%A7%E8%83%BD%E8%B0%83%E8%AF%95%E6%8A%80%E6%9C%AF/10_hud9c9b2dadd20040ee0fde8619af7d338_231181_480x0_resize_box_3.png 480w, https://zcj-git520.github.io/p/linux-%E6%80%A7%E8%83%BD%E8%B0%83%E8%AF%95%E6%8A%80%E6%9C%AF/10_hud9c9b2dadd20040ee0fde8619af7d338_231181_1024x0_resize_box_3.png 1024w&#34;
			loading=&#34;lazy&#34;
			&gt;
	&lt;/a&gt;
	
&lt;/figure&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;è™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿç›¸å…³ä¼˜åŒ–å·¥å…·&#34;&gt;è™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿç›¸å…³ä¼˜åŒ–å·¥å…·&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;lsof
&lt;ul&gt;
&lt;li&gt;-a åˆ—å‡ºæ‰“å¼€æ–‡ä»¶å­˜åœ¨çš„è¿›ç¨‹&lt;/li&gt;
&lt;li&gt;-c&amp;lt;è¿›ç¨‹å&amp;gt; åˆ—å‡ºæŒ‡å®šè¿›ç¨‹æ‰€æ‰“å¼€çš„æ–‡ä»¶&lt;/li&gt;
&lt;li&gt;-g åˆ—å‡ºGIDå·è¿›ç¨‹è¯¦æƒ…&lt;/li&gt;
&lt;li&gt;-d&amp;lt;æ–‡ä»¶å·&amp;gt; åˆ—å‡ºå ç”¨è¯¥æ–‡ä»¶å·çš„è¿›ç¨‹&lt;/li&gt;
&lt;li&gt;+d&amp;lt;ç›®å½•&amp;gt; åˆ—å‡ºç›®å½•ä¸‹è¢«æ‰“å¼€çš„æ–‡ä»¶&lt;/li&gt;
&lt;li&gt;+D&amp;lt;ç›®å½•&amp;gt; é€’å½’åˆ—å‡ºç›®å½•ä¸‹è¢«æ‰“å¼€çš„æ–‡ä»¶&lt;/li&gt;
&lt;li&gt;-n&amp;lt;ç›®å½•&amp;gt; åˆ—å‡ºä½¿ç”¨NFSçš„æ–‡ä»¶&lt;/li&gt;
&lt;li&gt;-i&amp;lt;æ¡ä»¶&amp;gt; åˆ—å‡ºç¬¦åˆæ¡ä»¶çš„è¿›ç¨‹ã€‚ï¼ˆ4ã€6ã€åè®®ã€:ç«¯å£ã€ @ip ï¼‰&lt;/li&gt;
&lt;li&gt;-p&amp;lt;è¿›ç¨‹å·&amp;gt; åˆ—å‡ºæŒ‡å®šè¿›ç¨‹å·æ‰€æ‰“å¼€çš„æ–‡ä»¶&lt;/li&gt;
&lt;li&gt;-u åˆ—å‡ºUIDå·è¿›ç¨‹è¯¦æƒ…&lt;/li&gt;
&lt;li&gt;-h æ˜¾ç¤ºå¸®åŠ©ä¿¡æ¯&lt;/li&gt;
&lt;li&gt;-v æ˜¾ç¤ºç‰ˆæœ¬ä¿¡æ¯
&lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 163; 
			flex-basis: 392px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/linux-%E6%80%A7%E8%83%BD%E8%B0%83%E8%AF%95%E6%8A%80%E6%9C%AF/11.png&#34; data-size=&#34;1244x761&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/linux-%E6%80%A7%E8%83%BD%E8%B0%83%E8%AF%95%E6%8A%80%E6%9C%AF/11.png&#34;
			width=&#34;1244&#34;
			height=&#34;761&#34;
			srcset=&#34;https://zcj-git520.github.io/p/linux-%E6%80%A7%E8%83%BD%E8%B0%83%E8%AF%95%E6%8A%80%E6%9C%AF/11_hu169dbe7051ec282808580c97afbe6d1f_86233_480x0_resize_box_3.png 480w, https://zcj-git520.github.io/p/linux-%E6%80%A7%E8%83%BD%E8%B0%83%E8%AF%95%E6%8A%80%E6%9C%AF/11_hu169dbe7051ec282808580c97afbe6d1f_86233_1024x0_resize_box_3.png 1024w&#34;
			loading=&#34;lazy&#34;
			&gt;
	&lt;/a&gt;
	
&lt;/figure&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;ç½‘ç»œç›¸å…³ä¼˜åŒ–å·¥å…·&#34;&gt;ç½‘ç»œç›¸å…³ä¼˜åŒ–å·¥å…·&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;netstat
&lt;ul&gt;
&lt;li&gt;-a æ˜¾ç¤ºæ‰€æœ‰æ´»åŠ¨çš„è¿æ¥ä»¥åŠæœ¬æœºä¾¦å¬çš„TCPã€UDPç«¯å£&lt;/li&gt;
&lt;li&gt;-l æ˜¾ç¤ºç›‘å¬çš„server port&lt;/li&gt;
&lt;li&gt;-n ç›´æ¥ä½¿ç”¨IPåœ°å€ï¼Œä¸é€šè¿‡åŸŸåæœåŠ¡å™¨&lt;/li&gt;
&lt;li&gt;-p æ­£åœ¨ä½¿ç”¨Socketçš„ç¨‹åºPIDå’Œç¨‹åºåç§°&lt;/li&gt;
&lt;li&gt;-r æ˜¾ç¤ºè·¯ç”±è¡¨&lt;/li&gt;
&lt;li&gt;-t æ˜¾ç¤ºTCPä¼ è¾“åè®®çš„è¿çº¿çŠ¶å†µ&lt;/li&gt;
&lt;li&gt;-u æ˜¾ç¤ºUDPä¼ è¾“åè®®çš„è¿çº¿çŠ¶å†µ&lt;/li&gt;
&lt;li&gt;-w æ˜¾ç¤ºRAWä¼ è¾“åè®®çš„è¿çº¿çŠ¶å†µ
&lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 180; 
			flex-basis: 432px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/linux-%E6%80%A7%E8%83%BD%E8%B0%83%E8%AF%95%E6%8A%80%E6%9C%AF/12.png&#34; data-size=&#34;1327x736&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/linux-%E6%80%A7%E8%83%BD%E8%B0%83%E8%AF%95%E6%8A%80%E6%9C%AF/12.png&#34;
			width=&#34;1327&#34;
			height=&#34;736&#34;
			srcset=&#34;https://zcj-git520.github.io/p/linux-%E6%80%A7%E8%83%BD%E8%B0%83%E8%AF%95%E6%8A%80%E6%9C%AF/12_huf2f3c7ced5e06d85c642721fc4f50aa8_92681_480x0_resize_box_3.png 480w, https://zcj-git520.github.io/p/linux-%E6%80%A7%E8%83%BD%E8%B0%83%E8%AF%95%E6%8A%80%E6%9C%AF/12_huf2f3c7ced5e06d85c642721fc4f50aa8_92681_1024x0_resize_box_3.png 1024w&#34;
			loading=&#34;lazy&#34;
			&gt;
	&lt;/a&gt;
	
&lt;/figure&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;ss
&lt;ul&gt;
&lt;li&gt;-aæ˜¾ç¤ºæ‰€æœ‰çš„sockets-læ˜¾ç¤ºæ­£åœ¨ç›‘å¬çš„&lt;/li&gt;
&lt;li&gt;-næ˜¾ç¤ºæ•°å­—IPå’Œç«¯å£ï¼Œä¸é€šè¿‡åŸŸåæœåŠ¡å™¨&lt;/li&gt;
&lt;li&gt;-pæ˜¾ç¤ºä½¿ç”¨socketçš„å¯¹åº”çš„ç¨‹åº&lt;/li&gt;
&lt;li&gt;-tåªæ˜¾ç¤ºTCP sockets-uåªæ˜¾ç¤ºUDP sockets&lt;/li&gt;
&lt;li&gt;-4 -6 åªæ˜¾ç¤ºv4æˆ–v6Vç‰ˆæœ¬çš„sockets&lt;/li&gt;
&lt;li&gt;-sæ‰“å°å‡ºç»Ÿè®¡ä¿¡æ¯ã€‚&lt;/li&gt;
&lt;li&gt;-0 æ˜¾ç¤ºPACKET sockets&lt;/li&gt;
&lt;li&gt;-w åªæ˜¾ç¤ºRAW sockets&lt;/li&gt;
&lt;li&gt;-xåªæ˜¾ç¤ºUNIXåŸŸsockets&lt;/li&gt;
&lt;li&gt;-rå°è¯•è¿›è¡ŒåŸŸåè§£æï¼Œåœ°å€/ç«¯å£
&lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 191; 
			flex-basis: 460px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/linux-%E6%80%A7%E8%83%BD%E8%B0%83%E8%AF%95%E6%8A%80%E6%9C%AF/13.png&#34; data-size=&#34;1683x877&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/linux-%E6%80%A7%E8%83%BD%E8%B0%83%E8%AF%95%E6%8A%80%E6%9C%AF/13.png&#34;
			width=&#34;1683&#34;
			height=&#34;877&#34;
			srcset=&#34;https://zcj-git520.github.io/p/linux-%E6%80%A7%E8%83%BD%E8%B0%83%E8%AF%95%E6%8A%80%E6%9C%AF/13_hu5149288d79730de5ff9a67c7c329d619_111334_480x0_resize_box_3.png 480w, https://zcj-git520.github.io/p/linux-%E6%80%A7%E8%83%BD%E8%B0%83%E8%AF%95%E6%8A%80%E6%9C%AF/13_hu5149288d79730de5ff9a67c7c329d619_111334_1024x0_resize_box_3.png 1024w&#34;
			loading=&#34;lazy&#34;
			&gt;
	&lt;/a&gt;
	
&lt;/figure&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
</description>
        </item>
        <item>
        <title>mysql å¸¸ç”¨å‘½ä»¤ä½¿ç”¨</title>
        <link>https://zcj-git520.github.io/p/mysql-%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4%E4%BD%BF%E7%94%A8/</link>
        <pubDate>Thu, 01 Sep 2022 22:00:38 +0800</pubDate>
        
        <guid>https://zcj-git520.github.io/p/mysql-%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4%E4%BD%BF%E7%94%A8/</guid>
        <description>&lt;img src="https://zcj-git520.github.io/p/mysql-%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4%E4%BD%BF%E7%94%A8/image-20221113154558884.png" alt="Featured image of post mysql å¸¸ç”¨å‘½ä»¤ä½¿ç”¨" /&gt;&lt;h2 id=&#34;æŸ¥è¯¢å‘½ä»¤select&#34;&gt;æŸ¥è¯¢å‘½ä»¤ï¼ˆselectï¼‰&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;æŸ¥çœ‹è¡¨ç»“æ„ï¼šdesc æˆ–åˆ™show columns from tables;&lt;/li&gt;
&lt;li&gt;æŸ¥è¯¢ç‰¹å®šçš„åˆ—ï¼šselect column, another_column,â€¦â€¦ FROM table;&lt;/li&gt;
&lt;li&gt;æŸ¥è¯¢æ‰€æœ‰*ï¼šselect *from table;&lt;/li&gt;
&lt;li&gt;å¸¦çº¦æŸæŸ¥è¯¢ï¼šSELECT column, another_column, â€¦ FROM table WHERE *condition*    AND/OR *another_condition*    AND/OR â€¦**;
&lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 362; 
			flex-basis: 870px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/mysql-%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4%E4%BD%BF%E7%94%A8/image-20221023142018786.png&#34; data-size=&#34;990x273&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/mysql-%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4%E4%BD%BF%E7%94%A8/image-20221023142018786.png&#34;
			width=&#34;990&#34;
			height=&#34;273&#34;
			srcset=&#34;https://zcj-git520.github.io/p/mysql-%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4%E4%BD%BF%E7%94%A8/image-20221023142018786_hu9eeb9cc60318b4b018a1c8e327de9f3c_23097_480x0_resize_box_3.png 480w, https://zcj-git520.github.io/p/mysql-%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4%E4%BD%BF%E7%94%A8/image-20221023142018786_hu9eeb9cc60318b4b018a1c8e327de9f3c_23097_1024x0_resize_box_3.png 1024w&#34;
			loading=&#34;lazy&#34;
			&gt;
	&lt;/a&gt;
	
&lt;/figure&gt;
&lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 200; 
			flex-basis: 480px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/mysql-%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4%E4%BD%BF%E7%94%A8/image-20221023144431347.png&#34; data-size=&#34;992x496&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/mysql-%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4%E4%BD%BF%E7%94%A8/image-20221023144431347.png&#34;
			width=&#34;992&#34;
			height=&#34;496&#34;
			srcset=&#34;https://zcj-git520.github.io/p/mysql-%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4%E4%BD%BF%E7%94%A8/image-20221023144431347_hu66461813d320504eb271cd6668d670f9_42202_480x0_resize_box_3.png 480w, https://zcj-git520.github.io/p/mysql-%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4%E4%BD%BF%E7%94%A8/image-20221023144431347_hu66461813d320504eb271cd6668d670f9_42202_1024x0_resize_box_3.png 1024w&#34;
			loading=&#34;lazy&#34;
			alt=&#34;image-20221023144431347&#34;&gt;
	&lt;/a&gt;
	
	&lt;figcaption&gt;image-20221023144431347&lt;/figcaption&gt;
	
&lt;/figure&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;å¯¹æŸ¥è¯¢ç»“æœè¿›è¡Œç­›é€‰å’Œæ’åº&#34;&gt;å¯¹æŸ¥è¯¢ç»“æœè¿›è¡Œç­›é€‰å’Œæ’åºï¼š&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;SQL æä¾›äº†ä¸€ç§ä½¿ç”¨å…³é”®å­—ä¸¢å¼ƒå…·æœ‰é‡å¤åˆ—å€¼çš„è¡Œçš„ä¾¿æ·æ–¹æ³•(DISTINCT):&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sql&#34; data-lang=&#34;sql&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;SELECT&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;**&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;DISTINCT&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;**&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;column&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;another_column&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;err&#34;&gt;â€¦&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;FROM&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;mytable&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;WHERE&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;condition&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;s&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;SQL æä¾›äº†ä¸€ç§ä½¿ç”¨å­å¥æŒ‰ç»™å®šåˆ—æŒ‰å‡åºæˆ–é™åºå¯¹ç»“æœè¿›è¡Œæ’åºçš„æ–¹æ³•(&lt;code&gt;ORDER BY&lt;/code&gt;):&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sql&#34; data-lang=&#34;sql&#34;&gt;&lt;span class=&#34;k&#34;&gt;SELECT&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;column&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;another_column&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;err&#34;&gt;â€¦&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;FROM&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;mytable&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;WHERE&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;condition&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;s&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;**&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;ORDER&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;BY&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;column&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;ASC&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;DESC&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;**&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å°†ç»“æœé™åˆ¶ä¸ºå­é›†(ORDER BY&lt;code&gt;LIMIT&lt;/code&gt;OFFSET&lt;code&gt;LIMIT&lt;/code&gt;OFFSET):&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sql&#34; data-lang=&#34;sql&#34;&gt;&lt;span class=&#34;k&#34;&gt;SELECT&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;column&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;another_column&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;err&#34;&gt;â€¦&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;FROM&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;mytable&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;WHERE&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;condition&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;s&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;ORDER&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;BY&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;column&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;ASC&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;DESC&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;**&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;LIMIT&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;num_limit&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;OFFSET&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;num_offset&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;**&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ä¿®æ”¹è¡¨åï¼šalter table old_table_name rename to new_name_name;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å¢åŠ è¡¨æ³¨é‡Šï¼šalter table table_name comment &amp;ldquo;æ³¨é‡Š&amp;rdquo;ï¼›&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å¢åŠ è¡¨å­—æ®µæ³¨é‡Šï¼šalter table table_name colunm modify å­—æ®µå ç±»å‹ comment &amp;ldquo;æ³¨é‡Š&amp;rdquo;ï¼›&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ä½¿ç”¨ JOIN çš„å¤šè¡¨æŸ¥è¯¢ï¼šå…±äº«æœ‰å…³å•ä¸ªå®ä½“çš„ä¿¡æ¯çš„è¡¨éœ€è¦å…·æœ‰ä¸€ä¸ªä¸»é”®ï¼Œç”¨äºåœ¨æ•°æ®åº“ä¸­å”¯ä¸€æ ‡è¯†è¯¥å®ä½“ã€‚ä¸€ç§å¸¸è§çš„ä¸»é”®ç±»å‹æ˜¯è‡ªåŠ¨é€’å¢çš„æ•´æ•°ï¼ˆå› ä¸ºå®ƒä»¬èŠ‚çœç©ºé—´ï¼‰ï¼Œä½†å®ƒä¹Ÿå¯ä»¥æ˜¯å­—ç¬¦ä¸²ï¼Œæ•£åˆ—å€¼ï¼Œåªè¦å®ƒæ˜¯å”¯ä¸€çš„ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sql&#34; data-lang=&#34;sql&#34;&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;SELECT&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;column&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;another_table_column&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;err&#34;&gt;â€¦&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;FROM&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;mytable&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;INNER&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;JOIN&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;another_table&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; 
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;   &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;ON&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;mytable&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;id&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;another_table&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;id&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;WHERE&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;condition&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;s&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;ORDER&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;BY&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;column&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;err&#34;&gt;â€¦&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;ASC&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;DESC&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;LIMIT&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;num_limit&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;OFFSET&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;num_offset&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å¤–éƒ¨è¿æ¥ï¼šåœ¨å¤šä¸ªè¡¨ä¸Šä½¿ç”¨å·¦/å³/å…¨è”åé€‰æ‹©æŸ¥è¯¢ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sql&#34; data-lang=&#34;sql&#34;&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;SELECT&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;column&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;another_column&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;err&#34;&gt;â€¦&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;   &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;FROM&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;mytable&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;   &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;INNER&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;LEFT&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;RIGHT&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;FULL&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;JOIN&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;another_table&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; 
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;     &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;ON&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;mytable&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;id&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;another_table&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;matching_id&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;   &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;WHERE&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;condition&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;s&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;   &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;ORDER&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;BY&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;column&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;err&#34;&gt;â€¦&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;ASC&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;DESC&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;   &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;LIMIT&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;num_limit&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;OFFSET&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;num_offset&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ä½¿ç”¨è¡¨è¾¾å¼è¿›è¡ŒæŸ¥è¯¢ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;é™¤äº†ä½¿ç”¨ SQL æŸ¥è¯¢å’Œå¼•ç”¨åŸå§‹åˆ—æ•°æ®å¤–ï¼Œè¿˜å¯ä»¥ä½¿ç”¨&lt;em&gt;è¡¨è¾¾å¼&lt;/em&gt;å¯¹æŸ¥è¯¢ä¸­çš„åˆ—å€¼ç¼–å†™æ›´å¤æ‚çš„é€»è¾‘ã€‚è¿™äº›è¡¨è¾¾å¼å¯ä»¥ä½¿ç”¨æ•°å­¦ å­—ç¬¦ä¸²å‡½æ•°ä»¥åŠåŸºæœ¬ç®—æœ¯ï¼Œç”¨äºåœ¨æ‰§è¡ŒæŸ¥è¯¢æ—¶è½¬æ¢å€¼&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sql&#34; data-lang=&#34;sql&#34;&gt;&lt;span class=&#34;k&#34;&gt;SELECT&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;particle_speed&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;AS&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;half_particle_speed&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;FROM&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;physics_data&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;WHERE&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;ABS&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;particle_position&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;10&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;500&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;	
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;é€‰æ‹©å…·æœ‰è¡¨è¾¾å¼åˆ«åçš„æŸ¥è¯¢&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sql&#34; data-lang=&#34;sql&#34;&gt;&lt;span class=&#34;k&#34;&gt;SELECT&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;col_expression&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;AS&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;expr_description&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;err&#34;&gt;â€¦&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;FROM&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;mytable&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ä½¿ç”¨èšåˆçš„æŸ¥è¯¢ï¼šSQL è¿˜æ”¯æŒä½¿ç”¨ å…è®¸æ‚¨æ±‡æ€»æœ‰å…³ä¸€ç»„è¡Œçš„ä¿¡æ¯çš„èšåˆè¡¨è¾¾å¼ï¼ˆæˆ–å‡½æ•°ï¼‰ çš„æ•°æ®&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sql&#34; data-lang=&#34;sql&#34;&gt;&lt;span class=&#34;k&#34;&gt;SELECT&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;AGG_FUNC&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;column_or_expression&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;AS&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;aggregate_description&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;err&#34;&gt;â€¦&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;FROM&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;mytable&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;WHERE&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;constraint_expression&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 339; 
			flex-basis: 815px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/mysql-%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4%E4%BD%BF%E7%94%A8/image-20221106152937279.png&#34; data-size=&#34;985x290&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/mysql-%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4%E4%BD%BF%E7%94%A8/image-20221106152937279.png&#34;
			width=&#34;985&#34;
			height=&#34;290&#34;
			srcset=&#34;https://zcj-git520.github.io/p/mysql-%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4%E4%BD%BF%E7%94%A8/image-20221106152937279_hu65ecc664107ff7c09bff5498e9922f27_30449_480x0_resize_box_3.png 480w, https://zcj-git520.github.io/p/mysql-%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4%E4%BD%BF%E7%94%A8/image-20221106152937279_hu65ecc664107ff7c09bff5498e9922f27_30449_1024x0_resize_box_3.png 1024w&#34;
			loading=&#34;lazy&#34;
			&gt;
	&lt;/a&gt;
	
&lt;/figure&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;GROUP BYï¼šæŒ‡å®šåˆ—ä¸­å…·æœ‰ç›¸åŒå€¼çš„è¡Œè¿›è¡Œåˆ†ç»„&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sql&#34; data-lang=&#34;sql&#34;&gt;&lt;span class=&#34;w&#34;&gt;   &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;SELECT&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;AGG_FUNC&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;column_or_expression&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;AS&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;aggregate_description&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;err&#34;&gt;â€¦&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;   &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;FROM&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;mytable&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;   &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;WHERE&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;constraint_expression&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;   &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;GROUP&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;BY&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;column&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;HAVING GROUP BY:å­å¥çº¦æŸçš„ç¼–å†™æ–¹å¼ä¸å­å¥çº¦æŸç›¸åŒï¼Œå¹¶ä¸” åº”ç”¨äºåˆ†ç»„è¡Œ&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sql&#34; data-lang=&#34;sql&#34;&gt;&lt;span class=&#34;k&#34;&gt;SELECT&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;group_by_column&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;AGG_FUNC&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;column_expression&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;AS&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;aggregate_result_alias&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;err&#34;&gt;â€¦&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;FROM&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;mytable&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;WHERE&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;condition&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;GROUP&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;BY&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;column&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;HAVING&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;group_condition&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;æ’å…¥æ•°æ®&#34;&gt;æ’å…¥æ•°æ®&lt;/h2&gt;
&lt;p&gt;æ’å…¥æ•°æ®ï¼šå°†æ•°æ®æ’å…¥æ•°æ®åº“æ—¶ï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨ anstatementï¼Œå®ƒå£°æ˜å“ªä¸ªè¡¨ è¦å†™å…¥çš„ï¼Œæˆ‘ä»¬æ­£åœ¨å¡«å……çš„æ•°æ®åˆ—ï¼Œä»¥åŠè¦æ’å…¥çš„ä¸€è¡Œæˆ–å¤šè¡Œæ•°æ®ã€‚åœ¨ é€šå¸¸ï¼Œæ’å…¥çš„æ¯ä¸€è¡Œæ•°æ®éƒ½åº”åŒ…å«è¡¨ä¸­æ¯ä¸ªç›¸åº”åˆ—çš„å€¼ã€‚ æ‚¨å¯ä»¥é€šè¿‡æŒ‰é¡ºåºåˆ—å‡ºæ¥ä¸€æ¬¡æ’å…¥å¤šè¡Œã€‚&lt;code&gt;INSERT&lt;/code&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sql&#34; data-lang=&#34;sql&#34;&gt;&lt;span class=&#34;w&#34;&gt;     &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;INSERT&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;INTO&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;mytable&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;     &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;VALUES&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;value_or_expr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;another_value_or_expr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;err&#34;&gt;â€¦&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;),&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;value_or_expr_2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;another_value_or_expr_2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;err&#34;&gt;â€¦&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;),&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;err&#34;&gt;â€¦&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;     &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;-- æ’å…¥å…·æœ‰ç‰¹å®šåˆ—çš„è¯­å¥
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;     &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;INSERT&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;INTO&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;mytable&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;     &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;column&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;another_column&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;err&#34;&gt;â€¦&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;     &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;VALUES&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;value_or_expr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;another_value_or_expr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;err&#34;&gt;â€¦&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;),&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;         &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;value_or_expr_2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;another_value_or_expr_2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;err&#34;&gt;â€¦&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;),&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;err&#34;&gt;â€¦&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; 
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;æ›´æ–°æ•°æ®update&#34;&gt;æ›´æ–°æ•°æ®ï¼šUPDATE&lt;/h2&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sql&#34; data-lang=&#34;sql&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;UPDATE&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;mytable&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;SET&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;column&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;value_or_expr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; 
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;other_column&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;another_value_or_expr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; 
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;err&#34;&gt;â€¦&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;WHERE&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;condition&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;åˆ é™¤è¡Œdeletewhere&#34;&gt;åˆ é™¤è¡Œ:DELETE,WHERE&lt;/h2&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sql&#34; data-lang=&#34;sql&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;DELETE&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;FROM&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;mytable&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;WHERE&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;condition&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;ä¸»é”®ä¸å¤–é”®&#34;&gt;ä¸»é”®ä¸å¤–é”®&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;ä¸»é”®(primary key)ï¼šè¡¨ä¸­å”¯ä¸€æ ‡è¯†çš„ä¸€æ¡è®°å½•ï¼Œä¸èƒ½é‡å¤ï¼Œä¸èƒ½ä¸ºnull, ç”¨æ¥ä¿è¯æ•°æ®çš„å®Œæ•´æ€§&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å¤–é”®(FOREIGN KEY)ï¼šæ˜¯å¦ä¸€å¼ è¡¨ä¸­çš„ä¸»é”®ï¼Œå¤–é”®å¯ä»¥é‡å¤ï¼Œå¯ä»¥ä¸ºnull,ç”¨æ¥å’Œå…¶ä»–è¡¨å»ºç«‹è”ç³»ï¼Œå­˜å‚¨å¼•æ“ä¸ºï¼šinnodb&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å¤–é”®æ•°æ®ç±»å‹å¿…é¡»è¦ä¸çˆ¶è¡¨ä¸­çš„ä¸»é”®çš„ç±»å‹å®Œå…¨ä¸€è‡´&lt;/li&gt;
&lt;li&gt;ä¸€å¼ è¡¨ä¸­çš„å¤–é”®åå­—ä¸èƒ½é‡å¤&lt;/li&gt;
&lt;li&gt;å¢åŠ å¤–é”®å­—æ®µï¼ˆæ•°æ®å­˜åœ¨ï¼‰ï¼Œå¿…é¡»ä¿è¯æ•°æ®ä¸çˆ¶è¡¨ä¸­çš„ä¸»é”®è¦æ±‚å¯¹åº”&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å¤–é”®çš„ä½œç”¨ï¼šå¯¹å­è¡¨å’Œçˆ¶è¡¨çš„çº¦æŸ&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å¯¹å­è¡¨çš„çº¦æŸï¼šåœ¨å­è¡¨è¿›è¡Œæ’å…¥ï¼ˆå¢å’Œä¿®æ”¹ï¼‰æ“ä½œæ—¶ï¼Œå¦‚æœå¯¹åº”çš„å¤–é”®å­—æ®µåœ¨çˆ¶è¡¨æ‰¾ä¸åˆ°å¯¹åº”çš„åŒ¹é…ï¼Œé‚£ä¹ˆæ’å…¥ä¼šå¤±è´¥&lt;/li&gt;
&lt;li&gt;å¯¹çˆ¶è¡¨çš„çº¦æŸï¼šåœ¨çˆ¶è¡¨ä¸­è¿›è¡Œæ’å…¥(åˆ å’Œä¿®æ”¹ï¼šå¿…é¡»æ˜¯æ¶‰åŠåˆ°ä¸»é”®ï¼‰æ“ä½œæ—¶ï¼Œå¦‚æœå¯¹åº”çš„ä¸»é”®åœ¨å­è¡¨ä¸­ä¹Ÿè¢«æ•°æ®æ‰€å¼•ç”¨ï¼Œé‚£ä¹ˆæ’å…¥æ“ä½œå°±ä¼šå¤±è´¥ï¼›&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å¤–é”®çš„çº¦æŸï¼Œéƒ½æ˜¯é’ˆå¯¹çˆ¶è¡¨ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;distrist:ä¸¥æ ¼æ¨¡å¼ï¼ˆé»˜è®¤ï¼‰ï¼šçˆ¶è¡¨ä¸èƒ½è¿›è¡Œæ’å…¥æ“ä½œæ—¶ï¼ˆå¢åŠ æˆ–ä¿®æ”¹ï¼Œé’ˆå¯¹ç€ä¸»é”®ï¼‰ï¼Œå¯¹åº”ä¸»é”®åœ¨å­è¡¨ä¸­è¢«å¼•ç”¨çš„è®°å½•&lt;/li&gt;
&lt;li&gt;cascade:çº§è”æ¨¡å¼ï¼šçˆ¶è¡¨æ“ä½œåï¼Œå¯¹åº”çš„å­è¡¨ä¹Ÿä¼šè·Ÿç€åˆ é™¤&lt;/li&gt;
&lt;li&gt;set null:ç½®ç©ºæ¨¡å¼ï¼šçˆ¶è¡¨æ“ä½œåï¼Œå¯¹åº”çš„å­è¡¨çš„å¤–é”®å­—æ®µä¹Ÿä¼šè¢«è®¾ç½®ä¸ºç©º&lt;/li&gt;
&lt;li&gt;åˆç†çš„å¤–é”®çº¦æŸæ¨¡å¼ä¸ºï¼šåˆ é™¤æ—¶å­è¡¨è®¾ç½®ä¸ºç©ºï¼ˆç½®ç©ºæ¨¡å¼ï¼‰ï¼Œæ›´æ–°æ—¶å­è¡¨çº§è”æ¨¡å¼&lt;/li&gt;
&lt;li&gt;è¯­æ³•ï¼šforeign key(å¤–é”®å­—æ®µ) references çˆ¶è¡¨ï¼ˆä¸»é”®å­—æ®µï¼‰on delete set null on update cascade;&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;è”åˆæŸ¥è¯¢ä¸å­æŸ¥è¯¢&#34;&gt;è”åˆæŸ¥è¯¢ä¸å­æŸ¥è¯¢&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;è”åˆæŸ¥è¯¢ï¼šå°†å¤šæ¬¡æŸ¥è¯¢ï¼Œåœ¨è®°å½•ä¸Šè¿›è¡Œæ‹¼æ¥ï¼ˆå­—æ®µä¸ä¼šå¢åŠ ï¼‰ï¼Œæ¯ä¸€æ¬¡select è¯­å¥è·å–çš„å­—æ®µæ•°å¿…é¡»ä¸¥æ ¼ä¸€è‡´ï¼ˆä½†æ˜¯å­—æ®µç±»å‹æ— å…³ï¼‰&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;è¯­æ³•ï¼šselect è¯­å¥1 union [union é€‰é¡¹] select è¯­å¥ â€¦â€¦&lt;/li&gt;
&lt;li&gt;union é€‰é¡¹ï¼šselecté€‰é¡¹ä¸€æ ·ï¼š
&lt;ul&gt;
&lt;li&gt;All ä¿ç•™æ‰€æœ‰ï¼ˆä¸ç®¡é‡å¤ï¼‰&lt;/li&gt;
&lt;li&gt;distinct å»é‡ï¼ˆæ•´ä¸ªé‡å¤ï¼‰ï¼Œé»˜è®¤&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;æ„ä¹‰ï¼š
&lt;ul&gt;
&lt;li&gt;å•è¡¨æŸ¥è¯¢ï¼šæŸ¥è¯¢åŒä¸€å¼ è¡¨ï¼Œä½†éœ€æ±‚ä¸åŒ&lt;/li&gt;
&lt;li&gt;å¤šè¡¨æŸ¥è¯¢ï¼šå¤šå¼ è¡¨çš„ç»“æ„å’Œæ•°æ®ï¼ˆç»“æ„ï¼‰å®Œå…¨æ˜¯ä¸€è‡´&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;åœ¨è”åˆæŸ¥è¯¢ä¸­ä½¿ç”¨order by æ—¶ï¼Œéœ€è¦å¯¹æŸ¥è¯¢è¯­å¥ä½¿ç”¨æ‹¬å·ï¼Œä¸”éœ€è¦ä½¿ç”¨limit&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å­æŸ¥è¯¢ï¼šæŸ¥è¯¢çš„ç»“æ„æ˜¯åœ¨æŸä¸€ä¸ªæŸ¥è¯¢ä¹‹ä¸Šï¼ˆä¸€å¤©selectè¯­å¥ä¸­åŒ…å«å¦ä¸€æ¡selectï¼‰&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å­æŸ¥è¯¢åˆ†ç±»ï¼š
&lt;ul&gt;
&lt;li&gt;æŒ‰ä½ç½®åˆ†ç±»ï¼šå­æŸ¥è¯¢è¯­å¥ï¼ˆselectï¼‰åœ¨å¤–éƒ¨æŸ¥è¯¢è¯­å¥ï¼ˆselectï¼‰çš„ä½ç½®ï¼š
&lt;ul&gt;
&lt;li&gt;from å­æŸ¥è¯¢ï¼šå­æŸ¥è¯¢è·Ÿåœ¨fromä¹‹å&lt;/li&gt;
&lt;li&gt;where å­æŸ¥è¯¢ï¼šå­æŸ¥è¯¢è·Ÿåœ¨whereæ¡ä»¶ä¸­&lt;/li&gt;
&lt;li&gt;exists å­æŸ¥è¯¢ï¼šå­æŸ¥è¯¢æ˜¯åœ¨existsä¸­&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;æŒ‰ç…§ç»“æœåˆ†ç±»ï¼šæŒ‰ç…§å­æŸ¥è¯¢çš„æ•°æ®è¿›è¡Œåˆ†ç±»ï¼ˆæŸ¥è¯¢çš„ç»“æ„éƒ½å¯ä»¥ç†è§£ä¸ºäºŒç»´è¡¨ï¼‰
&lt;ul&gt;
&lt;li&gt;æ ‡é‡å­æŸ¥è¯¢ï¼šå­æŸ¥è¯¢æŸ¥è¯¢çš„ç»“æœä¸ºä¸€è¡Œä¸€åˆ—&lt;/li&gt;
&lt;li&gt;åˆ—å­æŸ¥è¯¢ï¼šå­æŸ¥è¯¢æŸ¥è¯¢çš„ç»“æ„ä¸ºä¸€åˆ—å¤šè¡Œ&lt;/li&gt;
&lt;li&gt;è¡Œå­æŸ¥è¯¢ï¼šå­æŸ¥è¯¢æŸ¥è¯¢çš„ç»“æ„ä¸ºä¸€è¡Œå¤šåˆ—ï¼ˆå¤šè¡Œå¤šåˆ—ï¼‰ï¼Œéœ€è¦å¤Ÿç€è¡Œå…ƒç´ ï¼ˆå¤šä¸ªå­—æ®µæ„æˆï¼šeg(id,  name)=(select )ï¼‰ï¼Œ&lt;/li&gt;
&lt;li&gt;ä»¥ä¸Šä½ç½®éƒ½æ˜¯åœ¨whereæ¡ä»¶è¯­å¥ä¸­&lt;/li&gt;
&lt;li&gt;è¡¨å­æŸ¥è¯¢ï¼šå­æŸ¥è¯¢æŸ¥è¯¢çš„ç»“æœä¸ºå¤šè¡Œå¤šåˆ—ï¼ˆä½ç½®åœ¨fromä¹‹åï¼‰&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;è§†å›¾&#34;&gt;è§†å›¾&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;è§†å›¾view ï¼šæ˜¯ä¸€ç§æœ‰ç»“æ„ï¼ˆäºŒç»´è¡¨ï¼‰ä½†æ˜¯æ²¡ç»“æœï¼ˆç»“æ„ä¸­ä¸çœŸå®å­˜æ”¾æ•°æ®ï¼‰çš„è™šæ‹Ÿè¡¨ï¼Œç»“æ„æ¥æºäºå¯¹åº”çš„åŸºè¡¨ï¼ˆè§†å›¾çš„æ•°æ®æ¥æºï¼‰ï¼›&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;åˆ›å»ºè§†å›¾ï¼šcreate view view_name as select è¯­å¥ï¼Œåˆ›å»ºå®Œæˆåå¾ˆç”Ÿæˆå¯¹åº”çš„frmç»“æ„æ–‡ä»¶ï¼›
&lt;ul&gt;
&lt;li&gt;å•è¡¨è§†å›¾ï¼šåŸºè¡¨æ¥æºåªæœ‰ä¸€ä¸ª&lt;/li&gt;
&lt;li&gt;å¤šè¡¨è§†å›¾ï¼šåŸºè¡¨æ¥æºè‡³å°‘ä¸¤ä¸ªï¼Œå­—æ®µåä¸èƒ½é‡å¤ï¼›&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;æŸ¥çœ‹è§†å›¾ï¼šæ‰€æœ‰æŸ¥çœ‹è¡¨çš„æ–¹å¼éƒ½é€‚ç”¨äºè§†å›¾&lt;/li&gt;
&lt;li&gt;ä½¿ç”¨è§†å›¾ï¼šä¸»è¦æ˜¯æŸ¥è¯¢ä½¿ç”¨ï¼Œå°†è§†å›¾å½“ä½œè¡¨ä¸€æ ·æŸ¥è¯¢å³å¯ï¼Œæœ¬è´¨æ˜¯æ‰§è¡Œåˆ†è£…çš„selectè¯­å¥ï¼›&lt;/li&gt;
&lt;li&gt;ä¿®æ”¹è§†å›¾ï¼šè§†å›¾æœ¬èº«ä¸å¯ä¿®æ”¹ï¼Œä½†æ˜¯å¯ä»¥ä¿®æ”¹è§†å›¾çš„æ¥æº(select)ï¼›alter view view_name as æ–°çš„select è¯­å¥ï¼›&lt;/li&gt;
&lt;li&gt;åˆ é™¤è§†å›¾ï¼šdrop view view_name;&lt;/li&gt;
&lt;li&gt;è§†å›¾çš„æ„ä¹‰ï¼š
&lt;ol&gt;
&lt;li&gt;èŠ‚çœsqlè¯­å¥ï¼Œå°†å¤æ‚çš„sqlè¯­å¥ä¿å­˜ä¸ºè§†å›¾ï¼Œå¯ä»¥ç›´æ¥å¯¹è§†å›¾è¿›è¡Œæ“ä½œ&lt;/li&gt;
&lt;li&gt;æ•°æ®å®‰å…¨ï¼ˆç›¸å¯¹ï¼‰ï¼šè§†å›¾æ“ä½œä¸»è¦æ˜¯æŸ¥è¯¢ä½¿ç”¨ï¼Œåˆ é™¤è§†å›¾åªæ˜¯åˆ é™¤ç»“æ„ï¼Œä¸ä¼šå½±å“åŸºè¡¨çš„æ•°æ®ï¼›ï¼Œå¯ä»¥å¯¹å¤–æä¾›æœ‰ç”¨æ•°æ®ï¼Œéšè—æ— ç”¨çš„æ•°æ®&lt;/li&gt;
&lt;li&gt;é€šå¸¸åœ¨å¤§é¡¹ç›®ä¸­ä½¿ç”¨ï¼Œè€Œä¸”æ˜¯åœ¨å¤šç³»ç»Ÿä¸­ä½¿ç”¨ï¼›&lt;/li&gt;
&lt;li&gt;è§†å›¾å¯ä»¥å¯¹å¤–å‹å¥½å‹ï¼Œä¸åŒçš„ç”¨æˆ·ä½¿ç”¨ä¸åŒçš„è§†å›¾,æä¾›ä¸åŒçš„æ•°æ®ï¼›&lt;/li&gt;
&lt;li&gt;è§†å›¾æ›´å®¹æ˜“è¿›è¡Œæƒé™æ§åˆ¶ï¼›&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;li&gt;è§†å›¾æ•°æ®æ“ä½œï¼šè§†å›¾å¯ä»¥è¿›è¡Œå†™æ“ä½œï¼Œä½†æ˜¯å­˜åœ¨é™åˆ¶ï¼Œæ•°æ®åœ¨è§†å›¾ä¸­è¿›è¡Œæ“ä½œ
&lt;ul&gt;
&lt;li&gt;è§†å›¾æ–°å¢æ•°æ®ï¼šç›´æ¥å¯¹è§†å›¾æ•°æ®è¿›è¡Œæ–°å¢
&lt;ul&gt;
&lt;li&gt;å¤šè¡¨è§†å›¾ä¸èƒ½æ–°å¢ï¼Œåˆ é™¤æ•°æ®ï¼Œå¯æ›´æ–°æ•°æ®ï¼›&lt;/li&gt;
&lt;li&gt;å¯ä»¥å‘å•è¡¨ä¸­æ’å…¥ï¼Œæ›´æ–°ï¼Œåˆ é™¤æ•°æ®ï¼Œä½†æ˜¯è¯•å›¾ä¸­åŒ…å«çš„å­—æ®µå¿…é¡»åœ¨åŸºè¡¨ä¸­æ‰€æœ‰ä¸èƒ½ä¸ºnullæˆ–è€…æ²¡æœ‰é»˜è®¤å€¼çš„å­—æ®µ&lt;/li&gt;
&lt;li&gt;æ›´æ–°è§†å›¾é™åˆ¶ï¼šwith check option,å¦‚æœå¯¹è§†å›¾æ›´æ–°çš„æ—¶å€™ï¼Œ é™å®šäº†æŸä¸ªå­—æ®µï¼Œé‚£ä¹ˆåœ¨è§†å›¾æ›´æ–°æ•°æ®çš„æ—¶ï¼Œç³»ç»Ÿä¼šè¿›è¡ŒéªŒè¯ï¼Œä¿è¯æ•°æ®åœ¨æ›´æ–°ä¹‹åï¼Œæ•°æ®ä¾ç„¶èƒ½è¢«å®ä½“æŸ¥è¯¢å‡ºæ¥ï¼Œå¦åˆ™ä¸èƒ½æ›´æ–°&lt;/li&gt;
&lt;li&gt;è§†å›¾ç®—æ³•ï¼šç³»ç»Ÿå¯¹è§†å›¾ä»¥åŠå¤–éƒ¨æŸ¥è¯¢è§†å›¾çš„selectè¯­å¥çš„ä¸€ç§è§£ææ–¹å¼
&lt;ul&gt;
&lt;li&gt;undefinedï¼šæœªå®šä¹‰ï¼ˆé»˜è®¤ï¼‰&lt;/li&gt;
&lt;li&gt;temptable:ä¸´æ—¶è¡¨ç®—æ³•ï¼Œç³»ç»Ÿå…ˆæ‰§è¡Œè§†å›¾çš„select è¯­å¥ï¼Œç„¶ååœ¨æ‰§è¡Œå¤–éƒ¨æŸ¥è¯¢è¯­å¥select&lt;/li&gt;
&lt;li&gt;merge:åˆå¹¶ç®—æ³•ï¼Œç³»ç»Ÿå°†è§†å›¾çš„selectè¯­å¥å’Œå¤–éƒ¨çš„æŸ¥è¯¢è¯­å¥selectåˆå¹¶åœ¨æ‰§è¡Œï¼Œæ•ˆç‡é«˜ï¼›&lt;/li&gt;
&lt;li&gt;ç®—æ³•æŒ‡å®šï¼šåœ¨åˆ›å»ºè§†å›¾çš„æ—¶æŒ‡å®šcreate algorithm=æŒ‡å®šç®—æ³• view view_name as select;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;æ•°æ®çš„å¤‡ä»½ä¸è¿˜åŸ&#34;&gt;æ•°æ®çš„å¤‡ä»½ä¸è¿˜åŸ&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;å•è¡¨å¤‡ä»½ï¼šæ¯æ¬¡åªèƒ½å¤‡ä»½ä¸€å¼ è¡¨ï¼Œåªèƒ½å¤‡ä»½æ•°æ®ï¼ˆä¸èƒ½å¤‡ä»½è¡¨ç»“æ„ï¼‰ï¼Œé€šå¸¸å°†è¡¨æ•°æ®å¯¼å‡ºåˆ°æ–‡ä»¶ï¼›&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;å¤–éƒ¨å¯¼å‡ºï¼šselect å­—æ®µå into outfile è·¯å¾„ï¼ˆæ–‡ä»¶ä¸å­˜åœ¨ï¼‰ from æ•°æ®æº&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;æ•°æ®å¯¼å…¥ï¼šload data infile è·¯å¾„ into table table_nameï¼›&amp;ndash; æ€ä¹ˆå¤‡ä»½æ€ä¹ˆè¿˜åŸ&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;sqlçš„å¤‡ä»½ä¸è¿˜åŸï¼šç³»ç»Ÿä¼šå¯¹è¡¨ç»“æ„å’Œæ•°æ®è¿›è¡Œå¤„ç†æˆsqlè¯­å¥ï¼Œç„¶åè¿›è¡Œå¤‡ä»½ï¼›è¿˜åŸï¼šæ‰§è¡Œsqlè¯­å¥å³å¯ï¼ˆä¸»è¦æ˜¯å¤‡ä»½è¡¨ç»“æ„ï¼‰ï¼›&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;å¤‡ä»½ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;æ²¡æœ‰å¯¹åº”çš„æŒ‡ä»¤ï¼Œéœ€è¦mysqldump.exe;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;mysqldump -hPup æ•°æ®åº“åå­— [æ•°æ®è¡¨åå­— â€¦â€¦] &amp;gt;å¤–éƒ¨æ–‡ä»¶ç›®å½•&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;æ•´ä¸ªåº“å¤‡ä»½ï¼šmysqldump -hPup æ•°æ®åº“åå­—&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;è¿˜åŸï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;mysql -hPup æ•°æ®åº“åå­— &amp;lt;å¤‡ä»½åŸä»¶ï¼›&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ä½¿ç”¨sql æŒ‡ä»¤ï¼›source å¤‡ä»½åŸä»¶;&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ä¼˜ç¼ºç‚¹&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å¯ä»¥å¤‡ä»½ç»“æ„&lt;/li&gt;
&lt;li&gt;æµªè´¹ç©ºé—´&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å¢é‡å¤‡ä»½ï¼šæŒ‡å®šæ—¶é—´æ®µå¼€å§‹å¤‡ä»½ï¼Œå¤‡ä»½æ•°æ®ä¸é‡å¤ï¼Œå¹¶ä¸”æ‰€æœ‰çš„æ“ä½œéƒ½ä¼šè¢«å¤‡ä»½ï¼›&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;äº‹åŠ¡&#34;&gt;äº‹åŠ¡&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;äº‹åŠ¡æ˜¯ä¸€ç³»åˆ—è¦å‘ç”Ÿçš„æ“ä½œ&lt;/li&gt;
&lt;li&gt;äº‹åŠ¡å®‰å…¨æ˜¯ä¿æŠ¤è¿ç»­æ“ä½œåŒæ—¶æ»¡è¶³çš„ä¸€ç§æœºåˆ¶&lt;/li&gt;
&lt;li&gt;äº‹åŠ¡å®‰å…¨çš„æ„ä¹‰ï¼šä¿è¯æ•°æ®å®‰å…¨çš„å®Œæ•´æ€§&lt;/li&gt;
&lt;li&gt;äº‹åŠ¡çš„æ“ä½œï¼š
&lt;ul&gt;
&lt;li&gt;è‡ªåŠ¨äº‹åŠ¡
&lt;ul&gt;
&lt;li&gt;ç”¨æˆ·æ“ä½œå®Œï¼Œä¼šè‡ªåŠ¨åŒæ­¥åˆ°æ•°æ®è¡¨ä¸­ï¼›&lt;/li&gt;
&lt;li&gt;ç³»ç»Ÿé€šè¿‡ï¼šautocommit å˜é‡æ§åˆ¶&lt;/li&gt;
&lt;li&gt;å¼€å¯æˆ–è€…å…³é—­ï¼šset autocommit = on/1 or off /0&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;æ‰‹åŠ¨äº‹åŠ¡
&lt;ul&gt;
&lt;li&gt;å¼€å¯äº‹åŠ¡ï¼š æ‰€æœ‰çš„äº‹åŠ¡æ“ä½œå…ˆä¿å­˜åœ¨æ—¥å¿—ï¼ˆredo.logï¼‰å‘½ä»¤ï¼šstart transaction begin&lt;/li&gt;
&lt;li&gt;æ‰§è¡Œäº‹åŠ¡ï¼šä¸€äº›åˆ—å†™æ“ä½œ&lt;/li&gt;
&lt;li&gt;å…³é—­äº‹åŠ¡ï¼šé€‰æ‹©æ€§çš„å°†æ—¥å¿—æ–‡ä»¶ä¸­çš„ç»“æœåŒæ­¥åˆ°æ•°æ®è¡¨æˆ–è€…æ¸…ç©ºæ—¥å¿—æ–‡ä»¶ä¸­çš„æ“ä½œ
&lt;ul&gt;
&lt;li&gt;åŒæ­¥äº‹åŠ¡ï¼šåŒæ­¥æ•°æ®åˆ°æ•°æ®è¡¨ï¼Œå‘½ä»¤ï¼šcommit;&lt;/li&gt;
&lt;li&gt;å›æ»šäº‹åŠ¡ï¼šç›´æ¥æ¸…ç©ºæ—¥å¿—ï¼Œrollback;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;äº‹åŠ¡åŸç†ï¼šå¼€å¯äº‹åŠ¡ä¹‹åï¼Œæ‰€æœ‰çš„æ“ä½œéƒ½ä¼šä¸´æ—¶ä¿å­˜åœ¨æ—¥å¿—æ–‡ä»¶ä¸­ï¼Œåªæœ‰åœ¨commit ä¹‹åæ‰èƒ½åŒæ­¥åˆ°æ•°æ®è¡¨ï¼Œå…¶ä»–æƒ…å†µä¼šæ¸…ç©ºæ—¥å¿—&lt;/li&gt;
&lt;li&gt;å›æ»šç‚¹ï¼šå½“äº‹åŠ¡å¼€å¯ä¹‹åï¼Œåœ¨æŸä¸€ä¸ªæ“ä½œæˆåŠŸä¹‹åï¼Œå¯ä»¥è®¾ç½®æˆåŠŸçš„ä½ç½®ï¼Œå¯ä»¥æä¾›åç»­æ“ä½œå¤±è´¥åï¼Œè¿”å›è¯¥ä½ç½®ï¼Œè€Œéå…¨éƒ¨å›æ»šï¼Œ
&lt;ul&gt;
&lt;li&gt;è®¾ç½®å›æ»šç‚¹ï¼šsavepoint å›æ»šç‚¹åå­—ï¼›&lt;/li&gt;
&lt;li&gt;å›æ»šåˆ°å›æ»šç‚¹ï¼šrollback å›æ»šç‚¹åå­—ï¼›&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;ç´¢å¼•&#34;&gt;ç´¢å¼•&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;ç´¢å¼•æ˜¯æ•°æ®åº“ä¸­å¸¸ç”¨æ¥æé«˜æŸ¥è¯¢æ€§èƒ½çš„å·¥å…·&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ç´¢å¼•æ˜¯åœ¨å­˜å‚¨å¼•æ“ä¸­å®ç°ï¼Œè€Œä¸æ˜¯åœ¨æœåŠ¡å±‚ä¸­å®ç°ï¼Œæ¯ç§å¼•æ“çš„ç´¢å¼•å¹¶ä¸ç›¸åŒ&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;æ™®é€šç´¢å¼•normal:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ç›´æ¥åˆ›å»ºç´¢å¼•ï¼šcreate index index_name on table_name (åˆ—å[len()]â€¦â€¦)&lt;/li&gt;
&lt;li&gt;ä¿®æ”¹è¡¨æ—¶åˆ›å»ºï¼šalter table table_name add index index_name (åˆ—å[len()â€¦â€¦])&lt;/li&gt;
&lt;li&gt;åˆ›å»ºè¡¨æ—¶åˆ›å»ºï¼šcreate table table_name (â€¦â€¦ï¼Œindex index_name (åˆ—å[(len)]â€¦â€¦)&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å”¯ä¸€ç´¢å¼• unique:åˆ›å»ºæ–¹å¼å’Œä¸Šæ–¹çš„æ™®é€šç´¢å¼•ç±»ä¼¼ã€‚å³ï¼šå°†æ™®é€šç´¢å¼•çš„â€œindexâ€æ”¹ä¸ºâ€œunique index,åŒºåˆ«åœ¨ï¼šç´¢å¼•çš„æ‰€æœ‰åˆ—çš„æ‰€æœ‰å€¼éƒ½å¿…é¡»æ˜¯å”¯ä¸€&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ä¸»é”®ç´¢å¼•ï¼šä¸»é”®æ˜¯ä¸€ç§ç‰¹æ®Šçš„å”¯ä¸€ç´¢å¼•ï¼Œä¸€èˆ¬åœ¨åˆ›å»ºè¡¨çš„æ—¶å€™æŒ‡å®š&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å…¨æ–‡ç´¢å¼•fulltext:åˆ›å»ºæ–¹å¼å’Œä¸Šæ–¹çš„æ™®é€šç´¢å¼•ç±»ä¼¼ã€‚å³ï¼šå°†æ™®é€šç´¢å¼•çš„â€œindexâ€æ”¹ä¸ºâ€œfulltext indexâ€ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;æŸ¥çœ‹ç´¢å¼•ï¼šshow index from table_name;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;åˆ é™¤ç´¢å¼•ï¼šdrop index index_name on table_name æˆ–è€…alter table table_name drop index index_name;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ç¦ç”¨ç´¢å¼•ï¼šalter table table_name disable kyes;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å¯ç”¨ç´¢å¼•ï¼šalter table table_name enable keys;&lt;/p&gt;
&lt;p&gt;&lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 133; 
			flex-basis: 319px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/mysql-%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4%E4%BD%BF%E7%94%A8/image-20221113154139517.png&#34; data-size=&#34;1280x962&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/mysql-%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4%E4%BD%BF%E7%94%A8/image-20221113154139517.png&#34;
			width=&#34;1280&#34;
			height=&#34;962&#34;
			srcset=&#34;https://zcj-git520.github.io/p/mysql-%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4%E4%BD%BF%E7%94%A8/image-20221113154139517_huf11334933f40890e56287cde8fbffbd0_459007_480x0_resize_box_3.png 480w, https://zcj-git520.github.io/p/mysql-%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4%E4%BD%BF%E7%94%A8/image-20221113154139517_huf11334933f40890e56287cde8fbffbd0_459007_1024x0_resize_box_3.png 1024w&#34;
			loading=&#34;lazy&#34;
			alt=&#34;image-20221113154139517&#34;&gt;
	&lt;/a&gt;
	
	&lt;figcaption&gt;image-20221113154139517&lt;/figcaption&gt;
	
&lt;/figure&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 126; 
			flex-basis: 302px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/mysql-%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4%E4%BD%BF%E7%94%A8/image-20221113154151478.png&#34; data-size=&#34;720x571&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/mysql-%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4%E4%BD%BF%E7%94%A8/image-20221113154151478.png&#34;
			width=&#34;720&#34;
			height=&#34;571&#34;
			srcset=&#34;https://zcj-git520.github.io/p/mysql-%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4%E4%BD%BF%E7%94%A8/image-20221113154151478_huf08aa61d8405519a9abe32444fa2018b_211372_480x0_resize_box_3.png 480w, https://zcj-git520.github.io/p/mysql-%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4%E4%BD%BF%E7%94%A8/image-20221113154151478_huf08aa61d8405519a9abe32444fa2018b_211372_1024x0_resize_box_3.png 1024w&#34;
			loading=&#34;lazy&#34;
			alt=&#34;image-20221113154151478&#34;&gt;
	&lt;/a&gt;
	
	&lt;figcaption&gt;image-20221113154151478&lt;/figcaption&gt;
	
&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;&lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 166; 
			flex-basis: 400px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/mysql-%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4%E4%BD%BF%E7%94%A8/image-20221113154538952.png&#34; data-size=&#34;720x432&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/mysql-%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4%E4%BD%BF%E7%94%A8/image-20221113154538952.png&#34;
			width=&#34;720&#34;
			height=&#34;432&#34;
			srcset=&#34;https://zcj-git520.github.io/p/mysql-%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4%E4%BD%BF%E7%94%A8/image-20221113154538952_huea80993641134d80fba52c00d35dcc7d_154109_480x0_resize_box_3.png 480w, https://zcj-git520.github.io/p/mysql-%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4%E4%BD%BF%E7%94%A8/image-20221113154538952_huea80993641134d80fba52c00d35dcc7d_154109_1024x0_resize_box_3.png 1024w&#34;
			loading=&#34;lazy&#34;
			alt=&#34;image-20221113154538952&#34;&gt;
	&lt;/a&gt;
	
	&lt;figcaption&gt;image-20221113154538952&lt;/figcaption&gt;
	
&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;&lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 95; 
			flex-basis: 228px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/mysql-%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4%E4%BD%BF%E7%94%A8/image-20221113154558884.png&#34; data-size=&#34;720x755&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/mysql-%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4%E4%BD%BF%E7%94%A8/image-20221113154558884.png&#34;
			width=&#34;720&#34;
			height=&#34;755&#34;
			srcset=&#34;https://zcj-git520.github.io/p/mysql-%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4%E4%BD%BF%E7%94%A8/image-20221113154558884_hue265424d23ed96ee9701c444ec0fad6e_286244_480x0_resize_box_3.png 480w, https://zcj-git520.github.io/p/mysql-%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4%E4%BD%BF%E7%94%A8/image-20221113154558884_hue265424d23ed96ee9701c444ec0fad6e_286244_1024x0_resize_box_3.png 1024w&#34;
			loading=&#34;lazy&#34;
			alt=&#34;image-20221113154558884&#34;&gt;
	&lt;/a&gt;
	
	&lt;figcaption&gt;image-20221113154558884&lt;/figcaption&gt;
	
&lt;/figure&gt;&lt;/p&gt;
</description>
        </item>
        <item>
        <title>æ•°æ®ç»“æ„-Trie tree goå®ç°</title>
        <link>https://zcj-git520.github.io/p/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84-trie-tree-go%E5%AE%9E%E7%8E%B0/</link>
        <pubDate>Thu, 25 Aug 2022 21:00:08 +0800</pubDate>
        
        <guid>https://zcj-git520.github.io/p/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84-trie-tree-go%E5%AE%9E%E7%8E%B0/</guid>
        <description>&lt;img src="https://zcj-git520.github.io/p/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84-trie-tree-go%E5%AE%9E%E7%8E%B0/1.png" alt="Featured image of post æ•°æ®ç»“æ„-Trie tree goå®ç°" /&gt;&lt;h2 id=&#34;å‰ç¼€æ ‘ä¹Ÿç§°å­—å…¸æ ‘trie-for-go&#34;&gt;å‰ç¼€æ ‘ã€ä¹Ÿç§°å­—å…¸æ ‘ï¼ˆTrieï¼‰ for go&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;å‰ç¼€æ ‘æ˜¯ä¸€ç§å¤šå‰æ ‘ç»“æ„ï¼Œç»å¸¸ç”¨æ¥åšå¿«é€Ÿæ£€ç´¢&lt;/li&gt;
&lt;li&gt;å‰ç¼€æ ‘ï¼ˆTrieæ ‘ï¼‰ï¼Œå³å­—å…¸æ ‘ï¼Œåˆç§°å•è¯æŸ¥æ‰¾æ ‘æˆ–é”®æ ‘ï¼Œ&lt;/li&gt;
&lt;li&gt;å®ƒæ˜¯ä¸€ç§ä¸“é—¨å¤„ç†å­—ç¬¦ä¸²åŒ¹é…çš„æ•°æ®ç»“æ„ã€‚&lt;/li&gt;
&lt;li&gt;å‰ç¼€æ ‘å¯ä»¥æœ€å¤§é™åº¦åœ°å‡å°‘æ— è°“çš„å­—ç¬¦ä¸²æ¯”è¾ƒï¼ˆç©ºé—´æ¢æ—¶é—´ï¼‰ï¼Œæé«˜æŸ¥è¯¢æ•ˆç‡ã€‚&lt;/li&gt;
&lt;li&gt;ç‰¹ç‚¹ï¼š
&lt;ul&gt;
&lt;li&gt;æ ¹èŠ‚ç‚¹ä¸åŒ…å«ä»»ä½•key&lt;/li&gt;
&lt;li&gt;æ¯ä¸ªå­èŠ‚ç‚¹åŒ…å«çš„keyéƒ½ä¸ç›¸åŒ&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;ä»£ç å®ç°å¦‚ä¸‹&#34;&gt;ä»£ç å®ç°å¦‚ä¸‹&lt;/h2&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;    &lt;span class=&#34;kn&#34;&gt;package&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;Trie&lt;/span&gt;
    
    &lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;
    	&lt;span class=&#34;s&#34;&gt;&amp;#34;fmt&amp;#34;&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    
    &lt;span class=&#34;c1&#34;&gt;// å®šä¹‰å‰ç¼€æ ‘çš„èŠ‚ç‚¹ é€šè¿‡map
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;kd&#34;&gt;type&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;trieNode&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;struct&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    	&lt;span class=&#34;nx&#34;&gt;ChildNodes&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;map&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;rune&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;trieNode&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;// å®šä¹‰å­èŠ‚ç‚¹
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    	&lt;span class=&#34;c1&#34;&gt;//CharCount  int                // å­—ç¬¦ç»Ÿè®¡
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    	&lt;span class=&#34;nx&#34;&gt;EndNode&lt;/span&gt;    &lt;span class=&#34;kt&#34;&gt;bool&lt;/span&gt;              &lt;span class=&#34;c1&#34;&gt;// æ˜¯å¦ä¸ºå­èŠ‚ç‚¹
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    	&lt;span class=&#34;nx&#34;&gt;StrData&lt;/span&gt;    &lt;span class=&#34;kt&#34;&gt;string&lt;/span&gt;            &lt;span class=&#34;c1&#34;&gt;// æœ€åèŠ‚ç‚¹æ—¶ï¼Œè¯¥æ•°æ®
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    
    &lt;span class=&#34;c1&#34;&gt;// å‰ç¼€æ ‘çš„å®šä¹‰
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;kd&#34;&gt;type&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;trieTree&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;struct&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    	&lt;span class=&#34;nx&#34;&gt;root&lt;/span&gt;      &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;trieNode&lt;/span&gt;    &lt;span class=&#34;c1&#34;&gt;// æ ¹èŠ‚ç‚¹
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    	&lt;span class=&#34;nx&#34;&gt;WordCount&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;          &lt;span class=&#34;c1&#34;&gt;// è¯æ•°çš„æ•°é‡
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    
    &lt;span class=&#34;c1&#34;&gt;// åˆ›å»ºèŠ‚ç‚¹
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;creatNode&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;trieNode&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    	&lt;span class=&#34;nx&#34;&gt;node&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;make&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kd&#34;&gt;map&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;rune&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;trieNode&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    	&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;trieNode&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    		&lt;span class=&#34;nx&#34;&gt;ChildNodes&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;node&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
    		&lt;span class=&#34;c1&#34;&gt;//CharCount:  0,
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    		&lt;span class=&#34;nx&#34;&gt;EndNode&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;    &lt;span class=&#34;kc&#34;&gt;false&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
    		&lt;span class=&#34;nx&#34;&gt;StrData&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;    &lt;span class=&#34;s&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
    	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    
    &lt;span class=&#34;c1&#34;&gt;// è¯æ•°çš„æ•°é‡
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;t&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;trieTree&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;len&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    	&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;t&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;WordCount&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    
    &lt;span class=&#34;c1&#34;&gt;// æ·»åŠ èŠ‚ç‚¹
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;t&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;trieTree&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;insertData&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;data&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;error&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    	&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;len&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;data&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    		&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;fmt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Errorf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;æ’å…¥æ•°æ®ä¸ºç©º&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    	&lt;span class=&#34;nx&#34;&gt;nodeNext&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;t&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;root&lt;/span&gt;
    	&lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;cha&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;range&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;data&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    		&lt;span class=&#34;nx&#34;&gt;_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;ok&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;nodeNext&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;ChildNodes&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;cha&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;
    		&lt;span class=&#34;c1&#34;&gt;// æ˜¯å¦å­˜åœ¨
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    		&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;!&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;ok&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    			&lt;span class=&#34;c1&#34;&gt;// åˆ›å»ºèŠ‚ç‚¹
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    			&lt;span class=&#34;nx&#34;&gt;nodeNext&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;ChildNodes&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;cha&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;creatNode&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
    		&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    		&lt;span class=&#34;nx&#34;&gt;nodeNext&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;nodeNext&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;ChildNodes&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;cha&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;
    		&lt;span class=&#34;c1&#34;&gt;//nodeNext.CharCount++
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    	&lt;span class=&#34;c1&#34;&gt;// åˆ¤æ–­æ˜¯å¦ä¸ºæœ€åçš„èŠ‚ç‚¹
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    	&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;!&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;nodeNext&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;EndNode&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    		&lt;span class=&#34;nx&#34;&gt;nodeNext&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;EndNode&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;true&lt;/span&gt;
    		&lt;span class=&#34;nx&#34;&gt;nodeNext&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;StrData&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;data&lt;/span&gt;
    		&lt;span class=&#34;nx&#34;&gt;t&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;WordCount&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;++&lt;/span&gt;
    	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    	&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    
    &lt;span class=&#34;c1&#34;&gt;// æŸ¥è¯¢æŸä¸ªå€¼æ˜¯å¦å­˜åœ¨
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;t&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;trieTree&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;FindData&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;data&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;bool&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    	&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;t&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;root&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;||&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;data&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    		&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;false&lt;/span&gt;
    	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    	&lt;span class=&#34;nx&#34;&gt;nodeNext&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;t&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;root&lt;/span&gt;
    	&lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;cha&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;range&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;data&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    		&lt;span class=&#34;nx&#34;&gt;_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;ok&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;nodeNext&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;ChildNodes&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;cha&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;
    		&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;!&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;ok&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    			&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;false&lt;/span&gt;
    		&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    		&lt;span class=&#34;nx&#34;&gt;nodeNext&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;nodeNext&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;ChildNodes&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;cha&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;
    	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    	&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;nodeNext&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;StrData&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;data&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    		&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;false&lt;/span&gt;
    	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    	&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;true&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;c1&#34;&gt;// éå†æ ‘
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;t&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;trieTree&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;traverseData&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;([]&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;error&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;){&lt;/span&gt;
    	&lt;span class=&#34;nx&#34;&gt;returnData&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;make&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;([]&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    	&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;t&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;root&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    		&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;returnData&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;fmt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Errorf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;æ•°æ®ä¸ºç©º&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    	&lt;span class=&#34;nx&#34;&gt;nodeNext&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;t&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;root&lt;/span&gt;
    	&lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;node&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;range&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;nodeNext&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;ChildNodes&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    		&lt;span class=&#34;nx&#34;&gt;t&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;getData&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;node&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;returnData&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    	&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;returnData&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    
    &lt;span class=&#34;c1&#34;&gt;// ä½¿ç”¨é€’å½’éå†
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;t&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;trieTree&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;getData&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;nodeNext&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;trieNode&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;triData&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[]&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    	&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;nodeNext&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;EndNode&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    		&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;triData&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;append&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;triData&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;nodeNext&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;StrData&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    		&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;nodeNext&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;ChildNodes&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    			&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt;
    		&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    
    	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    	&lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;node&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;range&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;nodeNext&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;ChildNodes&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    		 &lt;span class=&#34;nx&#34;&gt;t&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;getData&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;node&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;triData&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    
    &lt;span class=&#34;c1&#34;&gt;// æ¸…ç©ºæ ‘
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;t&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;trieTree&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Clear&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(){&lt;/span&gt;
    	&lt;span class=&#34;nx&#34;&gt;t&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;root&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt;
    	&lt;span class=&#34;nx&#34;&gt;t&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;WordCount&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    
    &lt;span class=&#34;c1&#34;&gt;// åˆ é™¤æ•°æ®
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;t&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;trieTree&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;DeleteData&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;data&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;error&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    	&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;t&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;root&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;||&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;data&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    		&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;fmt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Errorf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;æ•°æ®ä¸ºç©º&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    	&lt;span class=&#34;nx&#34;&gt;ok&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;t&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;FindData&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;data&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    	&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;!&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;ok&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    		&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;fmt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Errorf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;%vï¼šæ•°æ®ä¸å­˜åœ¨&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;data&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    	&lt;span class=&#34;nx&#34;&gt;nextNode&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;t&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;root&lt;/span&gt;
    	&lt;span class=&#34;nx&#34;&gt;t&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;delete&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;nextNode&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;data&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    	&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    
    &lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;t&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;trieTree&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;delete&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;node&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;trieNode&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;data&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;  &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    	&lt;span class=&#34;c1&#34;&gt;// ä»å¤´å¼€å§‹éå†
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    	&lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;cha&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;range&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;data&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    		&lt;span class=&#34;nx&#34;&gt;node&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;node&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;ChildNodes&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;cha&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;
    		&lt;span class=&#34;c1&#34;&gt;// å¦‚æœèŠ‚ç‚¹ä¸ºçš„chaçš„ä¸ªæ•°ä¸º1æ—¶ï¼Œç›´æ¥åˆ é™¤èŠ‚ç‚¹
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    		&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;node&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;ChildNodes&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    			&lt;span class=&#34;nb&#34;&gt;delete&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;node&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;ChildNodes&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;cha&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    			&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt;
    		&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    		&lt;span class=&#34;c1&#34;&gt;// è¿˜å­˜åœ¨åç»­èŠ‚ç‚¹æ—¶ï¼Œåˆ™å°†æ­¤èŠ‚ç‚¹ä¸åœ¨è®¾ç½®ä¸ºå°¾èŠ‚ç‚¹
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    		&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;node&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;EndNode&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    			&lt;span class=&#34;nx&#34;&gt;node&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;EndNode&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;false&lt;/span&gt;
    		&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    
    &lt;span class=&#34;c1&#34;&gt;// æ ¹æ®å‰ç¼€è¿”å›
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;t&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;trieTree&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;TrieData&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;data&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;([]&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;error&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    	&lt;span class=&#34;nx&#34;&gt;returnData&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;make&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;([]&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    	&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;t&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;root&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;||&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;data&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    		&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;returnData&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;fmt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Errorf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;æ•°æ®ä¸ºç©º&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    	&lt;span class=&#34;nx&#34;&gt;nodeNext&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;t&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;root&lt;/span&gt;
    	&lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;cha&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;range&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;data&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    		&lt;span class=&#34;nx&#34;&gt;nodeNext&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;nodeNext&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;ChildNodes&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;cha&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;
    	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    	&lt;span class=&#34;nx&#34;&gt;t&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;getData&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;nodeNext&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;returnData&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    	&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;returnData&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    
    
    &lt;span class=&#34;c1&#34;&gt;// åˆå§‹åŒ–æ ‘
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;InitTrie&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;trieTree&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    	&lt;span class=&#34;nx&#34;&gt;node&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;creatNode&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
    	&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;trieTree&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    		&lt;span class=&#34;nx&#34;&gt;root&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;      &lt;span class=&#34;nx&#34;&gt;node&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
    		&lt;span class=&#34;nx&#34;&gt;WordCount&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
    	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;æµ‹è¯•ä»£ç å¦‚ä¸‹&#34;&gt;æµ‹è¯•ä»£ç å¦‚ä¸‹&lt;/h2&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;    &lt;span class=&#34;kn&#34;&gt;package&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;Trie&lt;/span&gt;
    
    &lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;
    	&lt;span class=&#34;s&#34;&gt;&amp;#34;fmt&amp;#34;&lt;/span&gt;
    	&lt;span class=&#34;s&#34;&gt;&amp;#34;testing&amp;#34;&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    
    &lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;TestInsertData&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;t&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;testing&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;T&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;  &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    	&lt;span class=&#34;nx&#34;&gt;trie&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;InitTrie&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
    	&lt;span class=&#34;kd&#34;&gt;var&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;testStr&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[]&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;zc&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;zzc&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;zcj&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;rr&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;å¥½çš„&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;zdd&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;zcf&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;æ‰¾è½¦ä¼°è®¡&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;å¼ ä¼Ÿ&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    	&lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;str&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;range&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;testStr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    		&lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;trie&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;insertData&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;str&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    		&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    			&lt;span class=&#34;nx&#34;&gt;t&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Error&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    		&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    	&lt;span class=&#34;c1&#34;&gt;//trie.Clear()
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    	&lt;span class=&#34;nx&#34;&gt;dataS&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;trie&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;traverseData&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
    	&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    		&lt;span class=&#34;nx&#34;&gt;t&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Error&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    	&lt;span class=&#34;nx&#34;&gt;fmt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Println&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;dataS&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    	&lt;span class=&#34;nx&#34;&gt;ok&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;trie&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;FindData&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;zcj1&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    	&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;!&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;ok&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    		&lt;span class=&#34;nx&#34;&gt;fmt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Println&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;zcj is not  exist&amp;#34;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;else&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    		&lt;span class=&#34;nx&#34;&gt;fmt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Println&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;zcj is exist&amp;#34;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    	&lt;span class=&#34;c1&#34;&gt;//err = trie.DeleteData(&amp;#34;rr&amp;#34;)
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    	&lt;span class=&#34;c1&#34;&gt;//if err != nil {
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    	&lt;span class=&#34;c1&#34;&gt;//	t.Error(err)
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    	&lt;span class=&#34;c1&#34;&gt;//}
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    	&lt;span class=&#34;nx&#34;&gt;dataS&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;trie&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;traverseData&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
    	&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    		&lt;span class=&#34;nx&#34;&gt;t&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Error&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    	&lt;span class=&#34;nx&#34;&gt;fmt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Println&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;dataS&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    	&lt;span class=&#34;nx&#34;&gt;fmt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Println&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;****************************&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    	&lt;span class=&#34;nx&#34;&gt;dataS&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;trie&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;TrieData&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;z&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    	&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    		&lt;span class=&#34;nx&#34;&gt;t&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Error&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    	&lt;span class=&#34;nx&#34;&gt;fmt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Println&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;dataS&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;æºç &#34;&gt;æºç &lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://github.com/zcj-git520/DataStructuresAlgorithmsForGo/tree/master/tree/Trie&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;æˆ‘çš„github:https://github.com/zcj-git520/DataStructuresAlgorithmsForGo/tree/master/tree/Trie&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
        </item>
        <item>
        <title>RSAåŠ å¯†ç®—æ³•çš„ä½¿ç”¨</title>
        <link>https://zcj-git520.github.io/p/rsa%E5%8A%A0%E5%AF%86%E7%AE%97%E6%B3%95%E7%9A%84%E4%BD%BF%E7%94%A8/</link>
        <pubDate>Mon, 15 Aug 2022 22:00:38 +0800</pubDate>
        
        <guid>https://zcj-git520.github.io/p/rsa%E5%8A%A0%E5%AF%86%E7%AE%97%E6%B3%95%E7%9A%84%E4%BD%BF%E7%94%A8/</guid>
        <description>&lt;img src="https://zcj-git520.github.io/p/rsa%E5%8A%A0%E5%AF%86%E7%AE%97%E6%B3%95%E7%9A%84%E4%BD%BF%E7%94%A8/1.jpg" alt="Featured image of post RSAåŠ å¯†ç®—æ³•çš„ä½¿ç”¨" /&gt;&lt;h2 id=&#34;rsaåŠ å¯†ç®—æ³•çš„ä½¿ç”¨&#34;&gt;RSAåŠ å¯†ç®—æ³•çš„ä½¿ç”¨&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;ç”Ÿæˆå…¬ç§é’¥&lt;/li&gt;
&lt;li&gt;ä¿å­˜æ–‡ä»¶æˆ–è€…ä¿å­˜åœ¨å†…å­˜ä¸­&lt;/li&gt;
&lt;li&gt;è®¾ç½®æ—¶é—´æœ‰æ•ˆæœŸï¼Œé•¿æœŸæœ‰æ•ˆæˆ–è€…è¶…æ—¶é‡åˆ›å»ºå…¬ç§é’¥&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;ä»£ç å¦‚ä¸‹&#34;&gt;ä»£ç å¦‚ä¸‹&lt;/h4&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;    &lt;span class=&#34;kn&#34;&gt;package&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;zcj_rsa&lt;/span&gt;
    
    &lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;
    	&lt;span class=&#34;s&#34;&gt;&amp;#34;crypto/rand&amp;#34;&lt;/span&gt;
    	&lt;span class=&#34;s&#34;&gt;&amp;#34;crypto/rsa&amp;#34;&lt;/span&gt;
    	&lt;span class=&#34;s&#34;&gt;&amp;#34;crypto/x509&amp;#34;&lt;/span&gt;
    	&lt;span class=&#34;s&#34;&gt;&amp;#34;encoding/base64&amp;#34;&lt;/span&gt;
    	&lt;span class=&#34;s&#34;&gt;&amp;#34;encoding/pem&amp;#34;&lt;/span&gt;
    	&lt;span class=&#34;s&#34;&gt;&amp;#34;fmt&amp;#34;&lt;/span&gt;
    	&lt;span class=&#34;s&#34;&gt;&amp;#34;os&amp;#34;&lt;/span&gt;
    	&lt;span class=&#34;s&#34;&gt;&amp;#34;path&amp;#34;&lt;/span&gt;
    	&lt;span class=&#34;s&#34;&gt;&amp;#34;time&amp;#34;&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    
    &lt;span class=&#34;kd&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;
    	&lt;span class=&#34;nx&#34;&gt;BITS&lt;/span&gt;  &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;2048&lt;/span&gt;        &lt;span class=&#34;c1&#34;&gt;// è¯ä¹¦å¤§å°
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    	&lt;span class=&#34;nx&#34;&gt;SAVEKEYPATH&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;./&amp;#34;&lt;/span&gt;  &lt;span class=&#34;c1&#34;&gt;// é»˜è®¤ä¿å­˜å…¬ç§é’¥çš„è·¯å¾„
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    
    &lt;span class=&#34;kd&#34;&gt;type&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;signData&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;struct&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    	&lt;span class=&#34;nx&#34;&gt;publicKey&lt;/span&gt;  		&lt;span class=&#34;kt&#34;&gt;string&lt;/span&gt;    &lt;span class=&#34;c1&#34;&gt;// å…¬é’¥
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    	&lt;span class=&#34;nx&#34;&gt;privateKey&lt;/span&gt; 		&lt;span class=&#34;kt&#34;&gt;string&lt;/span&gt;    &lt;span class=&#34;c1&#34;&gt;// ç§é’¥
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    	&lt;span class=&#34;nx&#34;&gt;generateTime&lt;/span&gt;    &lt;span class=&#34;nx&#34;&gt;time&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Time&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;// ç”Ÿæˆæ—¶é—´
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    	&lt;span class=&#34;nx&#34;&gt;isCreate&lt;/span&gt;        &lt;span class=&#34;kt&#34;&gt;bool&lt;/span&gt;      &lt;span class=&#34;c1&#34;&gt;// æ˜¯å¦åˆ›å»ºå…¬ç§é’¥
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    	&lt;span class=&#34;nx&#34;&gt;Timeout&lt;/span&gt;         &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;       &lt;span class=&#34;c1&#34;&gt;// è¯ä¹¦è¶…æ—¶æ—¶é—´ å•ä½æ—¶é—´ä¸ºåˆ†é’Ÿ &amp;lt;= 0 è¡¨ç¤ºæ°¸ä¹…æœ‰æ•ˆ
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    	&lt;span class=&#34;nx&#34;&gt;SaveMode&lt;/span&gt;        &lt;span class=&#34;kt&#34;&gt;bool&lt;/span&gt;      &lt;span class=&#34;c1&#34;&gt;// true ä¿å­˜ä¸ºæ–‡ä»¶ï¼ŒFalseä¿å­˜åœ¨å†…å­˜ä¸­
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    	&lt;span class=&#34;nx&#34;&gt;PublicKeyPath&lt;/span&gt;   &lt;span class=&#34;kt&#34;&gt;string&lt;/span&gt;    &lt;span class=&#34;c1&#34;&gt;// ä¿å­˜å…¬é’¥çš„è·¯å¾„
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    	&lt;span class=&#34;nx&#34;&gt;PrivateKeyPath&lt;/span&gt;  &lt;span class=&#34;kt&#34;&gt;string&lt;/span&gt;    &lt;span class=&#34;c1&#34;&gt;// ä¿å­˜ç§é’¥çš„è·¯å¾„
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    
    &lt;span class=&#34;c1&#34;&gt;// åˆ›å»ºå…¬ç§é’¥å¯¹
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;s&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;signData&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;creatKey&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;error&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    	&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;s&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;isEffectiveKey&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(){&lt;/span&gt;
    		&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;fmt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Errorf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;å…¬ç§é’¥å·²å­˜åœ¨&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    	&lt;span class=&#34;c1&#34;&gt;// åˆ›å»ºç§é’¥
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    	&lt;span class=&#34;nx&#34;&gt;prvKey&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;rsa&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;GenerateKey&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;rand&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Reader&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;BITS&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    	&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    		&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt;
    	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    	&lt;span class=&#34;c1&#34;&gt;//é€šè¿‡x509æ ‡å‡†å°†å¾—åˆ°çš„rasç§é’¥åºåˆ—åŒ–ä¸ºASN.1 çš„ DERç¼–ç å­—ç¬¦ä¸²
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    	&lt;span class=&#34;nx&#34;&gt;x509PrivateKey&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;x509&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;MarshalPKCS1PrivateKey&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;prvKey&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    	&lt;span class=&#34;nx&#34;&gt;privateKeyBlock&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;pem&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Block&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    		&lt;span class=&#34;nx&#34;&gt;Type&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;RSA Private key&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
    		&lt;span class=&#34;nx&#34;&gt;Bytes&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;x509PrivateKey&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
    	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    	&lt;span class=&#34;c1&#34;&gt;//å¤„ç†å…¬é’¥,å…¬é’¥åŒ…å«åœ¨ç§é’¥ä¸­
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    	&lt;span class=&#34;nx&#34;&gt;pubKey&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;prvKey&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;PublicKey&lt;/span&gt;
    	&lt;span class=&#34;c1&#34;&gt;//é€šè¿‡x509æ ‡å‡†å°†å¾—åˆ°çš„raså…¬é’¥åºåˆ—åŒ–ä¸ºASN.1 çš„ DERç¼–ç å­—ç¬¦ä¸²
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    	&lt;span class=&#34;nx&#34;&gt;x509PublicKey&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;x509&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;MarshalPKIXPublicKey&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;pubKey&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    	&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    		&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt;
    	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    	&lt;span class=&#34;nx&#34;&gt;publicKeyBlock&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;pem&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Block&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    		&lt;span class=&#34;nx&#34;&gt;Type&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;RSA Public key&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
    		&lt;span class=&#34;nx&#34;&gt;Bytes&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;x509PublicKey&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
    	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    	&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;s&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;SaveMode&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    		&lt;span class=&#34;nx&#34;&gt;publicFile&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;os&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Create&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;path&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Join&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;s&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;PublicKeyPath&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;public.pem&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;))&lt;/span&gt;
    		&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt;&lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    			&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt;
    		&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    		&lt;span class=&#34;nx&#34;&gt;privateKeyFile&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;os&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Create&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;path&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Join&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;s&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;PrivateKeyPath&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;privateKey.pem&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;))&lt;/span&gt;
    		&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt;&lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    			&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt;
    		&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    		&lt;span class=&#34;k&#34;&gt;defer&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;publicFile&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Close&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
    		&lt;span class=&#34;k&#34;&gt;defer&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;privateKeyFile&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Close&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
    		&lt;span class=&#34;c1&#34;&gt;//ä¿å­˜åˆ°æ–‡ä»¶
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    		&lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;pem&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Encode&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;privateKeyFile&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;privateKeyBlock&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    		&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt;&lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    			&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt;
    		&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    		&lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;pem&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Encode&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;publicFile&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;publicKeyBlock&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    		&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt;&lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    			&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt;
    		&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;else&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    		&lt;span class=&#34;nx&#34;&gt;s&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;publicKey&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;pem&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;EncodeToMemory&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;publicKeyBlock&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;))&lt;/span&gt;
    		&lt;span class=&#34;nx&#34;&gt;s&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;privateKey&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;pem&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;EncodeToMemory&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;privateKeyBlock&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;))&lt;/span&gt;
    	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    	&lt;span class=&#34;nx&#34;&gt;s&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;generateTime&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;time&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Now&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
    	&lt;span class=&#34;nx&#34;&gt;s&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;isCreate&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;true&lt;/span&gt;
    	&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    
    &lt;span class=&#34;c1&#34;&gt;// åˆ¤æ–­å…¬ç§é’¥æ˜¯å¦æœ‰æ•ˆ
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;s&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;signData&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;isEffectiveKey&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;bool&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    	&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;s&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;isCreate&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    		&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;s&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Timeout&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    			&lt;span class=&#34;c1&#34;&gt;//log.Info(&amp;#34;å…¬ç§é’¥åˆ›å»ºï¼Œä¸”æ°¸ä¹…æœ‰æ•ˆ&amp;#34;)
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    			&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;true&lt;/span&gt;
    		&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    		&lt;span class=&#34;nx&#34;&gt;duration&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;time&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Now&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;().&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Sub&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;s&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;generateTime&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;).&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Minutes&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
    		&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;duration&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;s&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Timeout&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    			&lt;span class=&#34;c1&#34;&gt;//log.Info(&amp;#34;å…¬ç§é’¥åˆ›å»ºï¼Œä¸”åœ¨æœ‰æ•ˆæœŸ&amp;#34;)
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    			&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;true&lt;/span&gt;
    		&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    	&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;false&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    
    &lt;span class=&#34;c1&#34;&gt;// ä½¿ç”¨ç§é’¥è¿›è¡Œè§£å¯†
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;s&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;signData&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;RSADecryption&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;cipherText&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;error&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;){&lt;/span&gt;
    	&lt;span class=&#34;c1&#34;&gt;// ä¿å­˜åœ¨å†…å­˜ä¸­è¿›è¡Œåˆ¤æ–­
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    	&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;!&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;s&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;SaveMode&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;!&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;s&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;isEffectiveKey&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(){&lt;/span&gt;
    		&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;fmt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Errorf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;å…¬ç§é’¥æœªåˆ›å»º&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    	&lt;span class=&#34;nx&#34;&gt;cipherBuf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;base64&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;StdEncoding&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;DecodeString&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;cipherText&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    	&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    		&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt;
    	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    	&lt;span class=&#34;kd&#34;&gt;var&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;buf&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[]&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;byte&lt;/span&gt;
    	&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;s&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;SaveMode&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    		&lt;span class=&#34;nx&#34;&gt;file&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;os&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Open&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;path&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Join&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;s&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;PrivateKeyPath&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;privateKey.pem&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;))&lt;/span&gt;
    		&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt;&lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    			&lt;span class=&#34;nb&#34;&gt;panic&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    		&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    		&lt;span class=&#34;k&#34;&gt;defer&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;file&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Close&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
    		&lt;span class=&#34;c1&#34;&gt;//è¯»å–æ–‡ä»¶çš„å†…å®¹
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    		&lt;span class=&#34;nx&#34;&gt;info&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;_&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;file&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Stat&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
    		&lt;span class=&#34;nx&#34;&gt;buf&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;make&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;([]&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;byte&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;info&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Size&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;())&lt;/span&gt;
    		&lt;span class=&#34;nx&#34;&gt;file&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Read&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;buf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;else&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    		&lt;span class=&#34;nx&#34;&gt;buf&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[]&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;byte&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;s&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;privateKey&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    	&lt;span class=&#34;nx&#34;&gt;block&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;_&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;pem&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Decode&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;buf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    	&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;block&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    		&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;fmt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Errorf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;pem decode fild&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    	&lt;span class=&#34;nx&#34;&gt;privateKey&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;x509&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;ParsePKCS1PrivateKey&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;block&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Bytes&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    	&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    		&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt;
    	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    	&lt;span class=&#34;nx&#34;&gt;plainText&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;rsa&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;DecryptPKCS1v15&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;rand&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Reader&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;privateKey&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;cipherBuf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    	&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    		&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt;
    	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    	&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;plainText&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;),&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    
    &lt;span class=&#34;c1&#34;&gt;// ä½¿ç”¨å…¬é’¥åŠ å¯†
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;s&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;signData&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;RSAEncryption&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;plainText&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;error&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;){&lt;/span&gt;
    	&lt;span class=&#34;c1&#34;&gt;// ä¿å­˜åœ¨å†…å­˜ä¸­è¿›è¡Œåˆ¤æ–­
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    	&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;!&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;s&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;SaveMode&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;!&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;s&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;isEffectiveKey&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(){&lt;/span&gt;
    		&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;fmt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Errorf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;å…¬ç§é’¥æœªåˆ›å»º&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    	&lt;span class=&#34;kd&#34;&gt;var&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;buf&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[]&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;byte&lt;/span&gt;
    	&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;s&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;SaveMode&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    		&lt;span class=&#34;nx&#34;&gt;file&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;os&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Open&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;path&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Join&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;s&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;PrivateKeyPath&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;public.pem&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;))&lt;/span&gt;
    		&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt;&lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    			&lt;span class=&#34;nb&#34;&gt;panic&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    		&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    		&lt;span class=&#34;k&#34;&gt;defer&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;file&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Close&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
    		&lt;span class=&#34;c1&#34;&gt;//è¯»å–æ–‡ä»¶çš„å†…å®¹
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    		&lt;span class=&#34;nx&#34;&gt;info&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;_&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;file&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Stat&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
    		&lt;span class=&#34;nx&#34;&gt;buf&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;make&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;([]&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;byte&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;info&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Size&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;())&lt;/span&gt;
    		&lt;span class=&#34;nx&#34;&gt;file&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Read&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;buf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;else&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    		&lt;span class=&#34;nx&#34;&gt;buf&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[]&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;byte&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;s&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;publicKey&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    	&lt;span class=&#34;nx&#34;&gt;block&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;_&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;pem&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Decode&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;buf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    	&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;block&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    		&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;fmt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Errorf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;pem decode fild&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    	&lt;span class=&#34;c1&#34;&gt;//x509è§£ç 
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    	&lt;span class=&#34;nx&#34;&gt;publicKeyInterface&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;x509&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;ParsePKIXPublicKey&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;block&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Bytes&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    	&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt;&lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    		&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt;
    	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    	&lt;span class=&#34;c1&#34;&gt;//ç±»å‹æ–­è¨€
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    	&lt;span class=&#34;nx&#34;&gt;publicKey&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;publicKeyInterface&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;rsa&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;PublicKey&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    	&lt;span class=&#34;c1&#34;&gt;//å¯¹æ˜æ–‡è¿›è¡ŒåŠ å¯†
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    	&lt;span class=&#34;nx&#34;&gt;cipherText&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;rsa&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;EncryptPKCS1v15&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;rand&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Reader&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;publicKey&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[]&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;byte&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;plainText&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;))&lt;/span&gt;
    	&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt;&lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    		&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt;
    	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    	&lt;span class=&#34;nx&#34;&gt;strCipher&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;base64&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;StdEncoding&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;EncodeToString&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;cipherText&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    	&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;strCipher&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt;
    
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    
    &lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;RsaInit&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;saveMode&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;bool&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;timeOut&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;publicKeyPath&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;privateKeyPath&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;signData&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    	&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;publicKeyPath&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    		&lt;span class=&#34;nx&#34;&gt;publicKeyPath&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;SAVEKEYPATH&lt;/span&gt;
    	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    	&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;privateKeyPath&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    		&lt;span class=&#34;nx&#34;&gt;privateKeyPath&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;SAVEKEYPATH&lt;/span&gt;
    	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    	&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;signData&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    		&lt;span class=&#34;nx&#34;&gt;isCreate&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;		&lt;span class=&#34;kc&#34;&gt;false&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
    		&lt;span class=&#34;nx&#34;&gt;Timeout&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;        &lt;span class=&#34;nx&#34;&gt;timeOut&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
    		&lt;span class=&#34;nx&#34;&gt;SaveMode&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;       &lt;span class=&#34;nx&#34;&gt;saveMode&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
    		&lt;span class=&#34;nx&#34;&gt;PublicKeyPath&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;  &lt;span class=&#34;nx&#34;&gt;publicKeyPath&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
    		&lt;span class=&#34;nx&#34;&gt;PrivateKeyPath&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;privateKeyPath&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
    	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h4 id=&#34;æµ‹è¯•å¦‚ä¸‹&#34;&gt;æµ‹è¯•å¦‚ä¸‹&lt;/h4&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;    &lt;span class=&#34;kn&#34;&gt;package&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;zcj_rsa&lt;/span&gt;
    
    &lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;
    	&lt;span class=&#34;s&#34;&gt;&amp;#34;fmt&amp;#34;&lt;/span&gt;
    	&lt;span class=&#34;s&#34;&gt;&amp;#34;testing&amp;#34;&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    
    &lt;span class=&#34;c1&#34;&gt;// åˆ›å»ºrsaä¿å­˜åœ¨æ–‡ä»¶
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;TestRsaFile&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;t&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;testing&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;T&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    	&lt;span class=&#34;nx&#34;&gt;rsa&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;RsaInit&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kc&#34;&gt;true&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;./&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;./&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    	&lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;rsa&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;creatKey&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
    	&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    		&lt;span class=&#34;nx&#34;&gt;t&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Errorf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;å…¬ç§é’¥åˆ›å»ºå¤±è´¥: %v&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    	&lt;span class=&#34;c1&#34;&gt;// åŠ å¯†
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    	&lt;span class=&#34;nx&#34;&gt;cipherText&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;rsa&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;RSAEncryption&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;zcj&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    	&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    		&lt;span class=&#34;nx&#34;&gt;t&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Errorf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;åŠ å¯†å¤±è´¥ï¼š%v&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    	&lt;span class=&#34;c1&#34;&gt;// è§£å¯†
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    	&lt;span class=&#34;nx&#34;&gt;planinText&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;rsa&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;RSADecryption&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;cipherText&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    	&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    		&lt;span class=&#34;nx&#34;&gt;t&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Errorf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;è§£å¯†å¤±è´¥ï¼š%v&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    	&lt;span class=&#34;nx&#34;&gt;fmt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Printf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;å¯†æ–‡ï¼š%v \n&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;cipherText&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    	&lt;span class=&#34;nx&#34;&gt;fmt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Printf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;åŸç ï¼š%v \n&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;planinText&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    
    &lt;span class=&#34;c1&#34;&gt;// ä¿å­˜rsaåœ¨å†…å­˜
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;TestRsa&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;t&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;testing&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;T&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    	&lt;span class=&#34;nx&#34;&gt;rsa&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;RsaInit&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kc&#34;&gt;false&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    	&lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;rsa&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;creatKey&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
    	&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    		&lt;span class=&#34;nx&#34;&gt;t&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Errorf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;å…¬ç§é’¥åˆ›å»ºå¤±è´¥: %v&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    	&lt;span class=&#34;c1&#34;&gt;// åŠ å¯†
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    	&lt;span class=&#34;nx&#34;&gt;cipherText&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;rsa&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;RSAEncryption&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;zcj&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    	&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    		&lt;span class=&#34;nx&#34;&gt;t&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Errorf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;åŠ å¯†å¤±è´¥ï¼š%v&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    	&lt;span class=&#34;c1&#34;&gt;// è§£å¯†
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    	&lt;span class=&#34;nx&#34;&gt;planinText&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;rsa&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;RSADecryption&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;cipherText&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    	&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    		&lt;span class=&#34;nx&#34;&gt;t&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Errorf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;è§£å¯†å¤±è´¥ï¼š%v&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    	&lt;span class=&#34;nx&#34;&gt;fmt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Printf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;å¯†æ–‡ï¼š%v \n&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;cipherText&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    	&lt;span class=&#34;nx&#34;&gt;fmt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Printf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;åŸç ï¼š%v \n&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;planinText&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h4 id=&#34;æºç ä»“åº“&#34;&gt;æºç ä»“åº“&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://github.com/zcj-git520/zcj_rsa&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;æˆ‘çš„github:https://github.com/zcj-git520/zcj_rsa&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
        </item>
        <item>
        <title>proto3 è¯­æ³•å­¦ä¹ </title>
        <link>https://zcj-git520.github.io/p/proto3-%E8%AF%AD%E6%B3%95%E5%AD%A6%E4%B9%A0/</link>
        <pubDate>Fri, 05 Aug 2022 22:00:38 +0800</pubDate>
        
        <guid>https://zcj-git520.github.io/p/proto3-%E8%AF%AD%E6%B3%95%E5%AD%A6%E4%B9%A0/</guid>
        <description>&lt;img src="https://zcj-git520.github.io/p/proto3-%E8%AF%AD%E6%B3%95%E5%AD%A6%E4%B9%A0/1.png" alt="Featured image of post proto3 è¯­æ³•å­¦ä¹ " /&gt;&lt;h2 id=&#34;proto3-è¯­æ³•å­¦ä¹ &#34;&gt;proto3 è¯­æ³•å­¦ä¹ &lt;/h2&gt;
&lt;h4 id=&#34;åŸºæœ¬è§„èŒƒ&#34;&gt;åŸºæœ¬è§„èŒƒ&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;æ–‡ä»¶ä»¥.protoä¸ºæ–‡ä»¶åç¼€ï¼Œé™¤äº†ç»“æ„ä½“å¤–ï¼Œå…¶ä»–è¯­å¥ä»¥åˆ†å·ç»“æŸ&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ç»“æ„å®šä¹‰å¯ä»¥åŒ…å«ï¼šmessageã€serviceã€enum&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;rpcæ–¹æ³•å®šä¹‰ç»“å°¾çš„åˆ†å·å¯æœ‰å¯æ— &lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Messageå‘½åé‡‡ç”¨é©¼å³°å‘½åæ–¹å¼ï¼Œå­—æ®µå‘½åé‡‡ç”¨å°å†™å­—æ¯åŠ ä¸‹åˆ’çº¿åˆ†éš”æ–¹å¼ï¼›ä¸¾ä¾‹ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-protobuf&#34; data-lang=&#34;protobuf&#34;&gt;&lt;span class=&#34;kd&#34;&gt;message&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;ServerMessage&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;&lt;/span&gt;	&lt;span class=&#34;k&#34;&gt;required&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;string&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;server_name&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;server1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Enumsç±»å‹åé‡‡ç”¨é©¼å³°å‘½åæ–¹å¼ï¼Œå­—æ®µåé‡‡ç”¨å¸¦å¤§å†™å­—æ¯åŠ ä¸‹åˆ’çº¿åˆ†éš”æ–¹å¼ï¼›ä¸¾ä¾‹ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-protobuf&#34; data-lang=&#34;protobuf&#34;&gt;&lt;span class=&#34;kd&#34;&gt;enum&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Sought&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;&lt;/span&gt;	&lt;span class=&#34;n&#34;&gt;FIRST_VALUE&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;100&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;&lt;/span&gt;	&lt;span class=&#34;n&#34;&gt;SECONED_VALUE&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1200&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Serviceç±»å‹é‡‡ç”¨é©¼å³°å‘½åæ–¹å¼ï¼›ä¸¾ä¾‹ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-protobuf&#34; data-lang=&#34;protobuf&#34;&gt;&lt;span class=&#34;kd&#34;&gt;service&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;UserService&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;rpc&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Login&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;LoginRequest&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;return&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;LoginResponse&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h4 id=&#34;å­—æ®µè§„åˆ™&#34;&gt;å­—æ®µè§„åˆ™&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;å­—æ®µæ ¼å¼ï¼šé™å®šä¿®é¥°ç¬¦|æ•°æ®ç±»å‹|å­—æ®µåç§°|=|å­—æ®µç¼–ç å€¼|[å­—æ®µé»˜è®¤å€¼]&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;é™å®šä¿®é¥°ç¬¦å· required\optional\repeated&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;required:è¡¨ç¤ºæ˜¯ä¸€ä¸ªå¿…é¡»çš„å­—æ®µï¼Œå¿…é¡»è¦å‘é€ç»™å¯¹æ–¹ï¼Œåœ¨å‘é€ä¹‹å‰å¿…é¡»è®¾ç½®è¯¥å­—æ®µçš„å€¼ï¼Œå¯¹äºæ¥æ”¶æ–¹ï¼Œå¿…é¡»èƒ½å¤Ÿè¯†åˆ«è¯¥å­—æ®µçš„æ„æ€ï¼Œåœ¨å‘é€ä¹‹å‰æ²¡æœ‰è®¾ç½®requiredå­—æ®µæˆ–è€…æ— æ³•è¯†åˆ«è¯¥å­—æ®µéƒ½ä¼šå¼•èµ·ç¼–ç å¼‚å¸¸ï¼Œå¯¼è‡´æ¶ˆæ¯è¢«ä¸¢å¼ƒ&lt;/li&gt;
&lt;li&gt;optional:è¡¨ç¤ºä¸ºå¯é€‰å­—æ®µï¼Œå¯¹äºå‘é€æ–¹ï¼Œåœ¨å‘é€æ¶ˆæ¯æ—¶ï¼Œå¯ä»¥é€‰æ‹©æ€§è®¾ç½®æˆ–è€…ä¸è®¾ç½®è¯¥å­—æ®µå€¼ï¼Œå¯¹äºæ¥æ”¶æ–¹ï¼Œå¦‚æœèƒ½å¤Ÿè¯†åˆ«å¯é€‰å­—æ®µå°±è¿›è¡Œç›¸åº”çš„å¤„ç†ï¼Œå¦‚æœæ— æ³•è¯†åˆ«ï¼Œåˆ™å°±å¿½ç•¥è¯¥å­—æ®µï¼Œæ¶ˆæ¯ä¸­çš„å…¶ä»–å­—æ®µæ­£å¸¸å¤„ç†ã€‚å› ä¸ºoptionalå­—æ®µçš„ç‰¹æ€§ï¼Œå¾ˆå¤šæ¥å£åœ¨å‡çº§ç‰ˆæœ¬ä¸­æŠŠåé¢æ·»åŠ å¤§çš„å­—æ®µéƒ½ç»Ÿä¸€è®¾ç½®ä¸ºoptionalå­—æ®µï¼Œè¿™æ ·åœ¨è€ç‰ˆæœ¬æ— æ³•å‡çº§çš„æ—¶ï¼Œä¹Ÿèƒ½æ­£å¸¸äºæ–°çš„è½¯ä»¶è¿›è¡Œé€šä¿¡ï¼Œåªä¸è¿‡æ–°çš„å­—æ®µæ— æ³•è¯†åˆ«è€Œå·²ï¼Œå› ä¸ºå¹¶ä¸æ˜¯æ¯ä¸ªèŠ‚ç‚¹éƒ½éœ€è¦æ–°çš„åŠŸèƒ½ï¼Œå› æ­¤å¯ä»¥åšåˆ°æŒ‰éœ€å‡çº§å’Œå¹³æ»‘è¿‡æ¸¡&lt;/li&gt;
&lt;li&gt;repeated:è¡¨ç¤ºè¯¥å­—æ®µå¯ä»¥åŒ…å«0-nä¸ªå…ƒç´ ï¼Œå…¶ç‰¹æ€§å’Œoptionalä¸€æ ·ï¼Œä½†æ˜¯æ¯ä¸€æ¬¡å¯ä»¥åŒ…å«ä¸ªå¤šä¸ªå€¼ï¼Œå¯ä»¥çœ‹ä½œæ˜¯åœ¨ä¼ é€’ä¸€ä¸ªæ•°ç»„çš„å€¼&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;æ•°æ®ç±»å‹ï¼šprotobufå®šä¹‰äº†ä¸€å¥—åŸºæœ¬çš„æ•°æ®ç±»å‹ï¼Œå‡ ä¹å¯ä»¥æ˜ å°„åˆ°c++\javaç­‰è¯­è¨€çš„åŸºç¡€æ•°æ®ç±»å‹&lt;/p&gt;
&lt;p&gt;&lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 118; 
			flex-basis: 284px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/proto3-%E8%AF%AD%E6%B3%95%E5%AD%A6%E4%B9%A0/1.png&#34; data-size=&#34;963x813&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/proto3-%E8%AF%AD%E6%B3%95%E5%AD%A6%E4%B9%A0/1.png&#34;
			width=&#34;963&#34;
			height=&#34;813&#34;
			srcset=&#34;https://zcj-git520.github.io/p/proto3-%E8%AF%AD%E6%B3%95%E5%AD%A6%E4%B9%A0/1_hud944d25af46653be6ac685099ccea094_87560_480x0_resize_box_3.png 480w, https://zcj-git520.github.io/p/proto3-%E8%AF%AD%E6%B3%95%E5%AD%A6%E4%B9%A0/1_hud944d25af46653be6ac685099ccea094_87560_1024x0_resize_box_3.png 1024w&#34;
			loading=&#34;lazy&#34;
			&gt;
	&lt;/a&gt;
	
&lt;/figure&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å­—æ®µåç§°&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å­—æ®µåç§°çš„å‘½åä¸cã€c++ã€javaç­‰è¯­è¨€çš„å˜é‡å‘½åæ–¹å¼å‡ ä¹ç›¸åŒ&lt;/li&gt;
&lt;li&gt;protobufå»ºè®®å­—æ®µçš„å‘½åé‡‡ç”¨é‡‡ç”¨ä¸‹æ»‘çº¿åˆ†å‰²çš„é©¼å³°å¼&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å­—æ®µç¼–ç å€¼&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æœ‰äº†å­—æ®µç¼–ç å€¼ï¼Œé€šä¿¡åŒæ–¹æ‰èƒ½äº’ç›¸è¯†åˆ«å¯¹æ–¹çš„å­—æ®µï¼Œç›¸åŒçš„ç¼–ç å€¼ï¼Œå…¶é™å®šä¿®é¥°ç¬¦å’Œæ•°æ®ç±»å‹å¿…é¡»ç›¸åŒï¼Œç¼–ç å€¼çš„èŒƒå›´ä¸ºï¼š1-2^32&lt;/li&gt;
&lt;li&gt;å…¶ä¸­1-15çš„ç¼–ç æ—¶é—´å’Œç©ºé—´æ•ˆç‡éƒ½å¾ˆé«˜ï¼Œç¼–ç å€¼è¶Šå¤§ï¼Œå…¶ç¼–ç çš„æ˜¯æ—¶é—´å’Œç©ºé—´æ•ˆç‡å°±è¶Šä½ï¼Œæ‰€ä»¥å»ºè®®æŠŠç»å¸¸è¦ä¼ é€’çš„å€¼æŠŠå…¶å­—æ®µç¼–ç è®¾ç½®ä¸º1-15ä¹‹å‰çš„å€¼&lt;/li&gt;
&lt;li&gt;1900-2000ç¼–ç å€¼ä¸ºGoogle protobufç³»ç»Ÿå†…éƒ¨ä¿ç•™å€¼ï¼Œå»ºè®®ä¸è¦ä½¿ç”¨&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å­—æ®µé»˜è®¤å€¼&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å½“åœ¨ä¼ é€’æ•°æ®æ—¶ï¼Œå¯¹äºrequiredæ•°æ®ç±»å‹ï¼Œå¦‚æœç”¨æˆ·æ²¡æœ‰è®¾ç½®å€¼ï¼Œåˆ™ä½¿ç”¨é»˜è®¤å€¼ä¼ é€’åˆ°å¯¹ç«¯&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;serviceå®šä¹‰&#34;&gt;serviceå®šä¹‰&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;å¦‚æœæƒ³è¦å°†æ¶ˆæ¯ç±»å‹ç”¨åœ¨rpcç³»ç»Ÿä¸­ï¼Œå¯ä»¥åœ¨.protoæ–‡ä»¶ä¸­å®šä¹‰ä¸€ä¸ªRPCæœåŠ¡æ¥å£ï¼Œ protocol buffer ç¼–è¯‘å™¨ä¼šæ ¹æ®æ‰€é€‰æ‹©çš„ä¸åŒè¯­è¨€ç”Ÿæˆå¯¹åº”çš„æœåŠ¡å™¨æ¥å£ä»£ç &lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ä¾‹å¦‚ï¼Œæƒ³è¦å®šä¹‰ä¸€ä¸ªRPCæœåŠ¡å¹¶å…·æœ‰ä¸€ä¸ªæ–¹æ³•ï¼Œè¯¥æ–¹æ³•æ¥æ”¶SearchRequestå¹¶è¿”å›ä¸€ä¸ªSearchResponseï¼Œæ­¤æ—¶å¯ä»¥åœ¨.protoæ–‡ä»¶ä¸­è¿›è¡Œå¦‚ä¸‹å®šä¹‰ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-protobuf&#34; data-lang=&#34;protobuf&#34;&gt; &lt;span class=&#34;kd&#34;&gt;service&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;SearchService&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;&lt;/span&gt;        &lt;span class=&#34;k&#34;&gt;rpc&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Search&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;SearchRequest&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;returns&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;SearchResponse&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{}&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ç”Ÿæˆçš„æ¥å£ä»£ç ä½œä¸ºå®¢æˆ·ç«¯ä¸æœåŠ¡å™¨çš„çº¦å®šã€‚æœåŠ¡ç«¯å¿…é¡»å®ç°å®šä¹‰çš„æ‰€æœ‰æ¥å£æ–¹æ³•ï¼Œå®¢æˆ·ç«¯ç›´æ¥è°ƒç”¨åŒåæ–¹æ³•å‘æœåŠ¡ç«¯å‘é€è¯·æ±‚ï¼Œå€¼å¾—ä¸€æçš„æ˜¯ï¼Œå³ä½¿ä¸šåŠ¡ä¸Šä¸éœ€è¦å‚æ•°ä¹Ÿå¿…é¡»æŒ‡å®šä¸€ä¸ªè¯·æ±‚æ¶ˆæ¯ï¼Œä¸€èˆ¬ä¼šå®šä¹‰ç©ºçš„message&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;messageå®šä¹‰&#34;&gt;Messageå®šä¹‰&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;ä¸€ä¸ªmessageç±»å‹å®šä¹‰äº†ä¸€ä¸ªè¯·æ±‚æˆ–è€…å“åº”çš„æ¶ˆæ¯æ ¼å¼ï¼Œå¯ä»¥åŒ…å«å¤šç§ç±»å‹çš„å­—æ®µ&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å­—æ®µåç”¨å°å†™ï¼Œè½¬ä¸ºgoæ–‡ä»¶æ—¶ä¼šè‡ªåŠ¨è½¬ä¸ºå¤§å†™ï¼Œmessageå°±ç›¸å½“äºç»“æ„ä½“&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;é¦–è¡Œå£°æ˜ä½¿ç”¨çš„protobufç‰ˆæœ¬ä¸ºproto3&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-protobuf&#34; data-lang=&#34;protobuf&#34;&gt;&lt;span class=&#34;n&#34;&gt;syntax&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;proto3&amp;#34;&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;massage&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;SearchRequest&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;&lt;/span&gt;      &lt;span class=&#34;kt&#34;&gt;string&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;name&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;zcj&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;  &lt;span class=&#34;c1&#34;&gt;// æŸ¥è¯¢çš„åå­—
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;      &lt;span class=&#34;kt&#34;&gt;int32&lt;/span&gt;  &lt;span class=&#34;n&#34;&gt;pirce&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;600&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;    &lt;span class=&#34;c1&#34;&gt;//ä»·æ ¼
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;      &lt;span class=&#34;kt&#34;&gt;int32&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;producet_num&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;// äº§å“ç¼–å·
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ä¸€ä¸ª.protoæ–‡ä»¶ä¸­å¯ä»¥å®šä¹‰å¤šä¸ªæ¶ˆæ¯ç±»å‹ï¼Œä¸€èˆ¬ç”¨äºåŒæ—¶å®šä¹‰çš„å¤šä¸ªç›¸å…³çš„ä¿¡æ¯&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-protobuf&#34; data-lang=&#34;protobuf&#34;&gt;&lt;span class=&#34;n&#34;&gt;syntax&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;proto3&amp;#34;&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;massage&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;SearchRequest&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;&lt;/span&gt;      &lt;span class=&#34;kt&#34;&gt;string&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;name&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;zcj&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;  &lt;span class=&#34;c1&#34;&gt;// æŸ¥è¯¢çš„åå­—
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;      &lt;span class=&#34;kt&#34;&gt;int32&lt;/span&gt;  &lt;span class=&#34;n&#34;&gt;pirce&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;600&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;    &lt;span class=&#34;c1&#34;&gt;//ä»·æ ¼
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;      &lt;span class=&#34;kt&#34;&gt;int32&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;producet_num&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;// äº§å“ç¼–å·
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// å“åº”
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;kd&#34;&gt;message&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;SearchResponse&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// å“åº”ä¿¡æ¯
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;message æ”¯æŒåµŒå¥—ä½¿ç”¨ï¼Œä½œä¸ºå¦ä¸€ä¸ªmessageä¸­çš„å­—æ®µç±»å‹&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-protobuf&#34; data-lang=&#34;protobuf&#34;&gt;&lt;span class=&#34;kd&#34;&gt;message&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;Result&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;kt&#34;&gt;string&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;name&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;zcj&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;kt&#34;&gt;string&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;title&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;proto3&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;kt&#34;&gt;int32&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;price&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1000&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;&lt;/span&gt;&lt;span class=&#34;kd&#34;&gt;message&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;SearchResponse&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;k&#34;&gt;repeated&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Result&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;result&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;æ”¯æŒåµŒå¥—ä¿¡æ¯ï¼Œæ¶ˆæ¯å¯ä»¥åŒ…å«å¦ä¸€ä¸ªæ¶ˆæ¯ä½œä¸ºå­—æ®µï¼Œä¹Ÿå¯ä»¥åœ¨æ¶ˆæ¯å†…å®šä¹‰ä¸€ä¸ªæ–°çš„æ¶ˆæ¯&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å†…éƒ¨å£°æ˜çš„messageç±»å‹æ˜æ˜¾å¯ä»¥åœ¨å†…éƒ¨ç›´æ¥ä½¿ç”¨&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-protobuf&#34; data-lang=&#34;protobuf&#34;&gt;&lt;span class=&#34;kd&#34;&gt;message&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;SearchReponse&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;kd&#34;&gt;message&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;Resylt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;kt&#34;&gt;string&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;name&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;zcj&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;kt&#34;&gt;string&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;title&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;proto3&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;kt&#34;&gt;int32&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;price&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1000&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;k&#34;&gt;repeated&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Resylt&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;re&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;proto3çš„mapç±»å‹&#34;&gt;proto3çš„Mapç±»å‹&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;proto3æ”¯æŒmapç±»å‹å£°æ˜&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;é”®ã€å€¼ç±»å‹å¯ä»¥æ˜¯å†…ç½®çš„ç±»å‹ï¼Œä¹Ÿå¯ä»¥æ˜¯è‡ªå®šä¹‰çš„messageç±»å‹&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å­—æ®µä¸æ”¯æŒrepeatedå±æ€§&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-protobuf&#34; data-lang=&#34;protobuf&#34;&gt; &lt;span class=&#34;n&#34;&gt;map&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;key_type&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;value_type&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;map_filed&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;N&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;//æ”¯æŒå®šä¹‰çš„ç±»å‹
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;message&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;Produce&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;&lt;/span&gt;   &lt;span class=&#34;kt&#34;&gt;string&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;name&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;zcj&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;map&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Product&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;pro&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h4 id=&#34;proto3æ–‡ä»¶ç¼–è¯‘&#34;&gt;proto3æ–‡ä»¶ç¼–è¯‘&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;é€šè¿‡å®šä¹‰å¥½çš„.protoæ–‡ä»¶ç”Ÿæˆçš„Javaï¼Œpythonï¼Œc/c++ï¼Œ GOç­‰è¯­è¨€çš„ä»£ç ï¼Œéœ€è¦å®‰è£…ç¼–è¯‘å™¨protoc&lt;/li&gt;
&lt;li&gt;å½“ä½¿ç”¨protocol buffer ç¼–è¯‘å™¨å…è®¸.protoæ–‡ä»¶æ—¶ï¼Œç¼–è¯‘å™¨ç”Ÿæˆæ‰€é€‰æ‹©è¯­è¨€çš„ä»£ç ï¼Œç”¨äºä½¿ç”¨åœ¨.protoæ–‡ä»¶ä¸­å®šä¹‰çš„æ¶ˆæ¯ç±»å‹ï¼ŒæœåŠ¡æ¥å£çº¦å®šç­‰ï¼Œä¸åŒçš„è¯­è¨€ç”Ÿæˆä»£ç æ ¼å¼ä¸åŒï¼š
&lt;ul&gt;
&lt;li&gt;c++:æ¯ä¸ª.protoæ–‡ä»¶ç”Ÿæˆä¸€ä¸ª.hå’Œä¸€ä¸ª.ccæ–‡ä»¶ï¼Œæ¯ä¸€ä¸ªæ¶ˆæ¯ç±»å‹å¯¹åº”ä¸€ä¸ªç±»&lt;/li&gt;
&lt;li&gt;Javaï¼šç”Ÿæˆä¸€ä¸ª.Javaæ–‡ä»¶ï¼ŒåŒæ ·æ¯ä¸ªæ¶ˆæ¯å¯¹åº”ä¸€ä¸ªç±»ï¼ŒåŒæ—¶è¿˜æœ‰ä¸€ä¸ªç‰¹æ®Šçš„Builderç±»ç”¨äºåˆ›å»ºä¿¡æ¯æ¥å£&lt;/li&gt;
&lt;li&gt;Goï¼šç”Ÿæˆä¸€ä¸ª.pb.goæ–‡ä»¶ï¼Œæ¯ä¸€ä¸ªæ¶ˆæ¯ç±»å‹å¯¹åº”è¿™ä¸€ä¸ªç»“æ„ä½“&lt;/li&gt;
&lt;li&gt;Python: å§¿åŠ¿ä¸å¤ªä¸€æ ·ï¼Œæ¯ä¸ª.protoæ–‡ä»¶ä¸­çš„æ¶ˆæ¯ç±»å‹ç”Ÿæˆä¸€ä¸ªå«æœ‰é™æ€æè¿°ç¬¦çš„æ¨¡å—ï¼Œè¯¥æ¨¡å—ä¸ä¸€ä¸ªå…ƒç±»metaclassåœ¨è¿è¡Œæ—¶åˆ›å»ºéœ€è¦çš„Pythonæ•°æ®è®¿é—®ç±»&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;importå¯¼å…¥å®šä¹‰&#34;&gt;importå¯¼å…¥å®šä¹‰&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;å¯ä»¥ä½¿ç”¨import æ¥å£è¯­å¥å¯¼å…¥ä½¿ç”¨å…¶ä»–æè¿°æ–‡ä»¶ä¸­çš„å£°æ˜çš„ç±»å‹&lt;/li&gt;
&lt;li&gt;protobuf æ¥å£æ–‡ä»¶å¯ä»¥åƒCè¯­è¨€çš„#includeæˆ–è€…Javaçš„importçš„è¡Œä¸ºå¤§è‡´ä¸€è‡´&lt;/li&gt;
&lt;li&gt;protocol bufferç¼–è¯‘å™¨ä¼šåœ¨-I /&amp;ndash;proto_pathå‚æ•°æŒ‡å®šçš„ç›®å½•ä¸­æŸ¥æ‰¾å¯¼å…¥çš„æ–‡ä»¶ï¼Œå¦‚æœæ²¡æœ‰æŒ‡å®šè¯¥å‚æ•°ï¼Œé»˜è®¤ä½¿ç”¨å½“å‰çš„ç›®å½•æŸ¥æ‰¾&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;åŒ…çš„ä½¿ç”¨&#34;&gt;åŒ…çš„ä½¿ç”¨&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;åœ¨protoæ–‡ä»¶ä¸­ä½¿ç”¨packageå£°æ˜åŒ…ï¼Œé¿å…å‘½åå†²çª&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;åœ¨å…¶ä»–çš„æ¶ˆæ¯æ ¼å¼å®šä¹‰ä¸­å¯ä»¥ä½¿ç”¨åŒ…å+æ¶ˆæ¯åçš„æ–¹å¼ä½¿ç”¨ç±»å‹&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;åœ¨ä¸åŒè¯­è¨€ä¸­ï¼ŒåŒ…å«å®šä¹‰å¯¹ç¼–è¯‘åç”Ÿæˆçš„ä»£ç å½±å“ä¸åŒï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;C++ï¼šå¯¹åº”C++å‘½ä»¤ç©ºé—´&lt;/li&gt;
&lt;li&gt;Java ä¸­ï¼špackageä¼šä½œä¸ºJavaåŒ…åï¼Œé™¤éæŒ‡å®šäº†option jave_packageé€‰é¡¹&lt;/li&gt;
&lt;li&gt;Python ä¸­ï¼špackageè¢«å¿½ç•¥&lt;/li&gt;
&lt;li&gt;Go ä¸­ï¼šé»˜è®¤ä½¿ç”¨packageåä½œä¸ºåŒ…åï¼Œé™¤éæŒ‡å®šäº†option go_packageé€‰é¡¹&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;æµ‹è¯•&#34;&gt;æµ‹è¯•&lt;/h4&gt;
&lt;h5 id=&#34;message-æµ‹è¯•&#34;&gt;message æµ‹è¯•&lt;/h5&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;proto æ–‡ä»¶å†…å®¹&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-protobuf&#34; data-lang=&#34;protobuf&#34;&gt;&lt;span class=&#34;n&#34;&gt;syntax&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;proto3&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;// è¯­æ³•å£°æ˜
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;&lt;/span&gt;&lt;span class=&#34;kn&#34;&gt;package&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;main&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;// é»˜è®¤ä¸goæ–‡ä»¶ä¸­çš„åŒ…åä¸€è‡´
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// option go_package = &amp;#34;zcj_proto&amp;#34;; // ä¸ä¸€è‡´æ—¶ï¼Œå¯ä»¥ä½¿ç”¨go_package
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// æµ‹è¯•message é‡‡ç”¨ä¸ºé©¼å³°çš„å‘½ä»¤æ–¹å¼
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;message&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;TestMessage&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;&lt;/span&gt;     &lt;span class=&#34;kt&#34;&gt;string&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;te_name&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;&lt;/span&gt;     &lt;span class=&#34;kt&#34;&gt;int32&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;te_age&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;&lt;/span&gt;     &lt;span class=&#34;kt&#34;&gt;int32&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;te_count&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;3&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;&lt;/span&gt;     &lt;span class=&#34;kt&#34;&gt;double&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;te_money&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;4&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;&lt;/span&gt;     &lt;span class=&#34;kt&#34;&gt;float&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;te_score&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;5&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;&lt;/span&gt;     &lt;span class=&#34;kt&#34;&gt;bool&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;te_fat&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;6&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;&lt;/span&gt;     &lt;span class=&#34;kt&#34;&gt;bytes&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;te_char&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;7&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;&lt;/span&gt;     &lt;span class=&#34;c1&#34;&gt;// æšä¸¾ç±»å‹
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;     &lt;span class=&#34;kd&#34;&gt;enum&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Status&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;&lt;/span&gt;         &lt;span class=&#34;n&#34;&gt;OK&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;&lt;/span&gt;         &lt;span class=&#34;n&#34;&gt;FAIL&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;&lt;/span&gt;     &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;&lt;/span&gt;     &lt;span class=&#34;kd&#34;&gt;message&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;TeChild&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;&lt;/span&gt;         &lt;span class=&#34;kt&#34;&gt;string&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ch_name&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;&lt;/span&gt;         &lt;span class=&#34;kt&#34;&gt;string&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ch_sex&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;&lt;/span&gt;     &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;&lt;/span&gt;     &lt;span class=&#34;n&#34;&gt;TeChild&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;childs&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;9&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;&lt;/span&gt;     &lt;span class=&#34;c1&#34;&gt;// mapç±»å‹
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;     &lt;span class=&#34;n&#34;&gt;map&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;int32&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;te_map&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;10&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ç”Ÿæˆgo æ–‡ä»¶å†…å®¹&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span class=&#34;c1&#34;&gt;// Code generated by protoc-gen-go. DO NOT EDIT.
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// source: proto3.proto
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;
&lt;span class=&#34;kn&#34;&gt;package&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;test_message&lt;/span&gt;

&lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;
    &lt;span class=&#34;nx&#34;&gt;fmt&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;fmt&amp;#34;&lt;/span&gt;
    &lt;span class=&#34;nx&#34;&gt;proto&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;github.com/golang/protobuf/proto&amp;#34;&lt;/span&gt;
    &lt;span class=&#34;nx&#34;&gt;math&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;math&amp;#34;&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;

&lt;span class=&#34;c1&#34;&gt;// Reference imports to suppress errors if they are not otherwise used.
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;kd&#34;&gt;var&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;_&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;proto&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Marshal&lt;/span&gt;
&lt;span class=&#34;kd&#34;&gt;var&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;_&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;fmt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Errorf&lt;/span&gt;
&lt;span class=&#34;kd&#34;&gt;var&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;_&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;math&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Inf&lt;/span&gt;

&lt;span class=&#34;c1&#34;&gt;// This is a compile-time assertion to ensure that this generated file
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// is compatible with the proto package it is being compiled against.
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// A compilation error at this line likely means your copy of the
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// proto package needs to be updated.
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;kd&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;_&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;proto&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;ProtoPackageIsVersion3&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;// please upgrade the proto package
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;
&lt;span class=&#34;c1&#34;&gt;// æšä¸¾ç±»å‹
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;kd&#34;&gt;type&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;TestMessage_Status&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;int32&lt;/span&gt;

&lt;span class=&#34;kd&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;
    &lt;span class=&#34;nx&#34;&gt;TestMessage_OK&lt;/span&gt;   &lt;span class=&#34;nx&#34;&gt;TestMessage_Status&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;
    &lt;span class=&#34;nx&#34;&gt;TestMessage_FAIL&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;TestMessage_Status&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;

&lt;span class=&#34;kd&#34;&gt;var&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;TestMessage_Status_name&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;map&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int32&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;OK&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
    &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;FAIL&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

&lt;span class=&#34;kd&#34;&gt;var&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;TestMessage_Status_value&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;map&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int32&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;s&#34;&gt;&amp;#34;OK&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;   &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
    &lt;span class=&#34;s&#34;&gt;&amp;#34;FAIL&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;x&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;TestMessage_Status&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;String&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;string&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;proto&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;EnumName&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;TestMessage_Status_name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;int32&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;x&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;))&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;TestMessage_Status&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;EnumDescriptor&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;([]&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;byte&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[]&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;fileDescriptor_4fee6d65e34a64b6&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[]&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

&lt;span class=&#34;c1&#34;&gt;// æµ‹è¯•message é‡‡ç”¨ä¸ºé©¼å³°çš„å‘½ä»¤æ–¹å¼
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;kd&#34;&gt;type&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;TestMessage&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;struct&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;nx&#34;&gt;TeName&lt;/span&gt;  &lt;span class=&#34;kt&#34;&gt;string&lt;/span&gt;               &lt;span class=&#34;s&#34;&gt;`protobuf:&amp;#34;bytes,1,opt,name=te_name,json=teName,proto3&amp;#34; json:&amp;#34;te_name,omitempty&amp;#34;`&lt;/span&gt;
    &lt;span class=&#34;nx&#34;&gt;TeAge&lt;/span&gt;   &lt;span class=&#34;kt&#34;&gt;int32&lt;/span&gt;                &lt;span class=&#34;s&#34;&gt;`protobuf:&amp;#34;varint,2,opt,name=te_age,json=teAge,proto3&amp;#34; json:&amp;#34;te_age,omitempty&amp;#34;`&lt;/span&gt;
    &lt;span class=&#34;nx&#34;&gt;TeCount&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;int32&lt;/span&gt;                &lt;span class=&#34;s&#34;&gt;`protobuf:&amp;#34;varint,3,opt,name=te_count,json=teCount,proto3&amp;#34; json:&amp;#34;te_count,omitempty&amp;#34;`&lt;/span&gt;
    &lt;span class=&#34;nx&#34;&gt;TeMoney&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;float64&lt;/span&gt;              &lt;span class=&#34;s&#34;&gt;`protobuf:&amp;#34;fixed64,4,opt,name=te_money,json=teMoney,proto3&amp;#34; json:&amp;#34;te_money,omitempty&amp;#34;`&lt;/span&gt;
    &lt;span class=&#34;nx&#34;&gt;TeScore&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;float32&lt;/span&gt;              &lt;span class=&#34;s&#34;&gt;`protobuf:&amp;#34;fixed32,5,opt,name=te_score,json=teScore,proto3&amp;#34; json:&amp;#34;te_score,omitempty&amp;#34;`&lt;/span&gt;
    &lt;span class=&#34;nx&#34;&gt;TeFat&lt;/span&gt;   &lt;span class=&#34;kt&#34;&gt;bool&lt;/span&gt;                 &lt;span class=&#34;s&#34;&gt;`protobuf:&amp;#34;varint,6,opt,name=te_fat,json=teFat,proto3&amp;#34; json:&amp;#34;te_fat,omitempty&amp;#34;`&lt;/span&gt;
    &lt;span class=&#34;nx&#34;&gt;TeChar&lt;/span&gt;  &lt;span class=&#34;p&#34;&gt;[]&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;byte&lt;/span&gt;               &lt;span class=&#34;s&#34;&gt;`protobuf:&amp;#34;bytes,7,opt,name=te_char,json=teChar,proto3&amp;#34; json:&amp;#34;te_char,omitempty&amp;#34;`&lt;/span&gt;
    &lt;span class=&#34;nx&#34;&gt;Childs&lt;/span&gt;  &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;TestMessage_TeChild&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;`protobuf:&amp;#34;bytes,9,opt,name=childs,proto3&amp;#34; json:&amp;#34;childs,omitempty&amp;#34;`&lt;/span&gt;
    &lt;span class=&#34;c1&#34;&gt;// mapç±»å‹
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;nx&#34;&gt;TeMap&lt;/span&gt;                &lt;span class=&#34;kd&#34;&gt;map&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int32&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;`protobuf:&amp;#34;bytes,10,rep,name=te_map,json=teMap,proto3&amp;#34; json:&amp;#34;te_map,omitempty&amp;#34; protobuf_key:&amp;#34;bytes,1,opt,name=key,proto3&amp;#34; protobuf_val:&amp;#34;varint,2,opt,name=value,proto3&amp;#34;`&lt;/span&gt;
    &lt;span class=&#34;nx&#34;&gt;XXX_NoUnkeyedLiteral&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;struct&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{}&lt;/span&gt;         &lt;span class=&#34;s&#34;&gt;`json:&amp;#34;-&amp;#34;`&lt;/span&gt;
    &lt;span class=&#34;nx&#34;&gt;XXX_unrecognized&lt;/span&gt;     &lt;span class=&#34;p&#34;&gt;[]&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;byte&lt;/span&gt;           &lt;span class=&#34;s&#34;&gt;`json:&amp;#34;-&amp;#34;`&lt;/span&gt;
    &lt;span class=&#34;nx&#34;&gt;XXX_sizecache&lt;/span&gt;        &lt;span class=&#34;kt&#34;&gt;int32&lt;/span&gt;            &lt;span class=&#34;s&#34;&gt;`json:&amp;#34;-&amp;#34;`&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;m&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;TestMessage&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;Reset&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;         &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;m&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;TestMessage&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{}&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;m&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;TestMessage&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;String&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;string&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;proto&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;CompactTextString&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;m&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;TestMessage&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;ProtoMessage&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;    &lt;span class=&#34;p&#34;&gt;{}&lt;/span&gt;
&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;TestMessage&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;Descriptor&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;([]&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;byte&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[]&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;fileDescriptor_4fee6d65e34a64b6&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[]&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;m&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;TestMessage&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;XXX_Unmarshal&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;b&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[]&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;byte&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;error&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;xxx_messageInfo_TestMessage&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Unmarshal&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;m&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;b&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;m&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;TestMessage&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;XXX_Marshal&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;b&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[]&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;byte&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;deterministic&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;bool&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;([]&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;byte&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;error&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;xxx_messageInfo_TestMessage&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Marshal&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;b&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;m&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;deterministic&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;m&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;TestMessage&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;XXX_Merge&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;src&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;proto&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Message&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;nx&#34;&gt;xxx_messageInfo_TestMessage&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Merge&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;m&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;src&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;m&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;TestMessage&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;XXX_Size&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;xxx_messageInfo_TestMessage&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Size&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;m&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;m&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;TestMessage&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;XXX_DiscardUnknown&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;nx&#34;&gt;xxx_messageInfo_TestMessage&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;DiscardUnknown&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;m&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

&lt;span class=&#34;kd&#34;&gt;var&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;xxx_messageInfo_TestMessage&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;proto&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;InternalMessageInfo&lt;/span&gt;

&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;m&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;TestMessage&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;GetTeName&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;string&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;m&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;m&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;TeName&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;m&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;TestMessage&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;GetTeAge&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;int32&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;m&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;m&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;TeAge&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;m&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;TestMessage&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;GetTeCount&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;int32&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;m&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;m&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;TeCount&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;m&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;TestMessage&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;GetTeMoney&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;float64&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;m&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;m&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;TeMoney&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;m&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;TestMessage&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;GetTeScore&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;float32&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;m&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;m&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;TeScore&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;m&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;TestMessage&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;GetTeFat&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;bool&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;m&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;m&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;TeFat&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;false&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;m&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;TestMessage&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;GetTeChar&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[]&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;byte&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;m&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;m&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;TeChar&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;m&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;TestMessage&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;GetChilds&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;TestMessage_TeChild&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;m&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;m&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Childs&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;m&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;TestMessage&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;GetTeMap&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;map&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int32&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;m&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;m&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;TeMap&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

&lt;span class=&#34;kd&#34;&gt;type&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;TestMessage_TeChild&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;struct&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;nx&#34;&gt;ChName&lt;/span&gt;               &lt;span class=&#34;kt&#34;&gt;string&lt;/span&gt;   &lt;span class=&#34;s&#34;&gt;`protobuf:&amp;#34;bytes,1,opt,name=ch_name,json=chName,proto3&amp;#34; json:&amp;#34;ch_name,omitempty&amp;#34;`&lt;/span&gt;
    &lt;span class=&#34;nx&#34;&gt;ChSex&lt;/span&gt;                &lt;span class=&#34;kt&#34;&gt;string&lt;/span&gt;   &lt;span class=&#34;s&#34;&gt;`protobuf:&amp;#34;bytes,2,opt,name=ch_sex,json=chSex,proto3&amp;#34; json:&amp;#34;ch_sex,omitempty&amp;#34;`&lt;/span&gt;
    &lt;span class=&#34;nx&#34;&gt;XXX_NoUnkeyedLiteral&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;struct&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{}&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;`json:&amp;#34;-&amp;#34;`&lt;/span&gt;
    &lt;span class=&#34;nx&#34;&gt;XXX_unrecognized&lt;/span&gt;     &lt;span class=&#34;p&#34;&gt;[]&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;byte&lt;/span&gt;   &lt;span class=&#34;s&#34;&gt;`json:&amp;#34;-&amp;#34;`&lt;/span&gt;
    &lt;span class=&#34;nx&#34;&gt;XXX_sizecache&lt;/span&gt;        &lt;span class=&#34;kt&#34;&gt;int32&lt;/span&gt;    &lt;span class=&#34;s&#34;&gt;`json:&amp;#34;-&amp;#34;`&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;m&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;TestMessage_TeChild&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;Reset&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;         &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;m&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;TestMessage_TeChild&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{}&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;m&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;TestMessage_TeChild&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;String&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;string&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;proto&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;CompactTextString&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;m&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;TestMessage_TeChild&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;ProtoMessage&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;    &lt;span class=&#34;p&#34;&gt;{}&lt;/span&gt;
&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;TestMessage_TeChild&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;Descriptor&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;([]&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;byte&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[]&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;fileDescriptor_4fee6d65e34a64b6&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[]&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;m&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;TestMessage_TeChild&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;XXX_Unmarshal&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;b&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[]&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;byte&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;error&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;xxx_messageInfo_TestMessage_TeChild&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Unmarshal&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;m&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;b&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;m&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;TestMessage_TeChild&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;XXX_Marshal&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;b&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[]&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;byte&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;deterministic&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;bool&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;([]&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;byte&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;error&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;xxx_messageInfo_TestMessage_TeChild&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Marshal&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;b&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;m&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;deterministic&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;m&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;TestMessage_TeChild&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;XXX_Merge&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;src&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;proto&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Message&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;nx&#34;&gt;xxx_messageInfo_TestMessage_TeChild&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Merge&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;m&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;src&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;m&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;TestMessage_TeChild&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;XXX_Size&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;xxx_messageInfo_TestMessage_TeChild&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Size&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;m&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;m&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;TestMessage_TeChild&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;XXX_DiscardUnknown&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;nx&#34;&gt;xxx_messageInfo_TestMessage_TeChild&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;DiscardUnknown&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;m&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

&lt;span class=&#34;kd&#34;&gt;var&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;xxx_messageInfo_TestMessage_TeChild&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;proto&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;InternalMessageInfo&lt;/span&gt;

&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;m&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;TestMessage_TeChild&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;GetChName&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;string&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;m&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;m&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;ChName&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;m&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;TestMessage_TeChild&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;GetChSex&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;string&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;m&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;m&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;ChSex&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;init&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;nx&#34;&gt;proto&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;RegisterEnum&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;main.TestMessage_Status&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;TestMessage_Status_name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;TestMessage_Status_value&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    &lt;span class=&#34;nx&#34;&gt;proto&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;RegisterType&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;((&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;TestMessage&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)(&lt;/span&gt;&lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;),&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;main.TestMessage&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    &lt;span class=&#34;nx&#34;&gt;proto&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;RegisterMapType&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;((&lt;/span&gt;&lt;span class=&#34;kd&#34;&gt;map&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int32&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)(&lt;/span&gt;&lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;),&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;main.TestMessage.TeMapEntry&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    &lt;span class=&#34;nx&#34;&gt;proto&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;RegisterType&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;((&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;TestMessage_TeChild&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)(&lt;/span&gt;&lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;),&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;main.TestMessage.TeChild&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;init&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;proto&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;RegisterFile&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;proto3.proto&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;fileDescriptor_4fee6d65e34a64b6&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

&lt;span class=&#34;kd&#34;&gt;var&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;fileDescriptor_4fee6d65e34a64b6&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[]&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;byte&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;c1&#34;&gt;// 333 bytes of a gzipped FileDescriptorProto
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;mh&#34;&gt;0x1f&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x8b&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x08&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x00&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x00&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x00&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x00&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x00&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x02&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0xff&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x6c&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x51&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x4d&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x6f&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0xea&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x30&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
    &lt;span class=&#34;mh&#34;&gt;0x10&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x7c&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x4e&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x48&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x02&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x0b&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x07&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x64&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0xbd&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0xa7&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x67&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x50&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x0f&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x16&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x27&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x9f&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
    &lt;span class=&#34;mh&#34;&gt;0x22&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x15&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x2e&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0xb4&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x37&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x84&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x8a&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x54&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0xb5&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x69&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0xa5&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0xc0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x3d&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x72&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0xdd&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x2d&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
    &lt;span class=&#34;mh&#34;&gt;0x41&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x25&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x1f&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x4a&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x96&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x0a&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x7e&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x59&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0xff&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x5e&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0xe5&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x34&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0xfd&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x92&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x7a&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0xb2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
    &lt;span class=&#34;mh&#34;&gt;0x47&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0xb3&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0xbb&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x33&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x3b&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x0b&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x83&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0xb2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x2a&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0xa8&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x98&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x85&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0xcd&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0xc3&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x3b&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x99&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
    &lt;span class=&#34;mh&#34;&gt;0xde&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0xe5&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x93&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x57&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x17&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0xfa&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x1b&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0xac&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x29&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0xc2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0xba&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0xd6&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x5b&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0xe4&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0xff&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x21&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
    &lt;span class=&#34;mh&#34;&gt;0x20&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x4c&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x72&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x9d&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0xa1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x60&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x92&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0xa9&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x5e&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0xec&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x13&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0xde&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0xe9&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x0c&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0xf9&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x3f&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
    &lt;span class=&#34;mh&#34;&gt;0xf0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x09&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x13&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0xbd&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x45&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0xe1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x48&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0xa6&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0xbc&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0xd8&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x23&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x5c&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x6c&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x91&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x8f&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0xa0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
    &lt;span class=&#34;mh&#34;&gt;0x4b&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x98&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x98&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0xe2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x90&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x93&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x70&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x1b&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x22&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x20&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x5c&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x5a&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0xd8&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x52&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x59&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x91&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
    &lt;span class=&#34;mh&#34;&gt;0xe3&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x49&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x74&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x24&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x53&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0xcc&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x52&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x91&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x85&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x2d&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x55&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x9b&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0xa2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x42&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0xe1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x49&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
    &lt;span class=&#34;mh&#34;&gt;0xa6&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x1c&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x4b&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0xad&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x2d&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x6c&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x75&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x9e&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x34&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x09&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x5f&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x32&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0xd5&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0xb5&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x3a&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x2b&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
    &lt;span class=&#34;mh&#34;&gt;0x4d&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0xad&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x2f&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x93&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0xea&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x4a&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x04&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x92&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0xa9&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x81&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0xf5&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0xb5&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x4c&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x75&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0xc5&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0xcf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
    &lt;span class=&#34;mh&#34;&gt;0xc1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x37&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0xe9&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x6e&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0xff&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x58&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x8b&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x9e&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x64&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0xaa&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x3f&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x1d&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x85&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x76&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0xaf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0xf0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
    &lt;span class=&#34;mh&#34;&gt;0xdb&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x4e&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0xe1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x06&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x97&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0xb6&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x22&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x6e&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x0b&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0xf9&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0xac&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x91&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0xc8&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x74&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x29&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x40&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
    &lt;span class=&#34;mh&#34;&gt;0xba&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0xaa&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x3f&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x3d&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0xfb&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0xad&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x25&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0xd2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0xe5&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x55&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x4e&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0xd5&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0xc9&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x1a&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x88&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x74&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
    &lt;span class=&#34;mh&#34;&gt;0x39&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0xbe&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x80&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0xa0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x9d&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x63&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0xbd&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x98&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0xf4&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x47&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x46&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x26&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0xfd&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0xc8&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0xc8&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0xa4&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
    &lt;span class=&#34;mh&#34;&gt;0x49&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x8d&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0xc7&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x26&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0xa3&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x5e&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0xec&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x99&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x74&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x8d&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0xc7&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0xf1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x1c&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0xe0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x6b&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x1e&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
    &lt;span class=&#34;mh&#34;&gt;0x1f&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x82&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0xfb&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x8c&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0xa7&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0xb6&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0xd3&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x7e&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0xf9&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x5f&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0xf0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x5e&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0xf4&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0xfe&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0xf0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x99&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
    &lt;span class=&#34;mh&#34;&gt;0x6c&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x03&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x2e&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x9d&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x39&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x9b&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x8c&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0xc1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x5f&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x93&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0xa6&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x43&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0xcd&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x7d&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x70&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0xee&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
    &lt;span class=&#34;mh&#34;&gt;0x6f&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x86&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x7f&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x78&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x17&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x3a&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0xab&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0xc5&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0xf5&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0xed&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x90&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x3d&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0xf8&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0xef&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0xd7&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x7c&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
    &lt;span class=&#34;mh&#34;&gt;0x0b&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x00&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x00&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0xff&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0xff&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x30&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x6b&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0xfd&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0xd9&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0xd6&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x01&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x00&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x00&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ç”ŸæˆC++ æ–‡ä»¶å†…å®¹&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-c++&#34; data-lang=&#34;c++&#34;&gt;    &lt;span class=&#34;c1&#34;&gt;// Generated by the protocol buffer compiler.  DO NOT EDIT!
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;c1&#34;&gt;// source: proto3.proto
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;
    &lt;span class=&#34;cp&#34;&gt;#ifndef GOOGLE_PROTOBUF_INCLUDED_proto3_2eproto
&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;cp&#34;&gt;#define GOOGLE_PROTOBUF_INCLUDED_proto3_2eproto
&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;&lt;/span&gt;
    &lt;span class=&#34;cp&#34;&gt;#include&lt;/span&gt; &lt;span class=&#34;cpf&#34;&gt;&amp;lt;limits&amp;gt;&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;cp&#34;&gt;#include&lt;/span&gt; &lt;span class=&#34;cpf&#34;&gt;&amp;lt;string&amp;gt;&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;&lt;/span&gt;
    &lt;span class=&#34;cp&#34;&gt;#include&lt;/span&gt; &lt;span class=&#34;cpf&#34;&gt;&amp;lt;google/protobuf/port_def.inc&amp;gt;&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;cp&#34;&gt;#if PROTOBUF_VERSION &amp;lt; 3021000
&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;cp&#34;&gt;#error This file was generated by a newer version of protoc which is
&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;cp&#34;&gt;#error incompatible with your Protocol Buffer headers. Please update
&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;cp&#34;&gt;#error your headers.
&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;cp&#34;&gt;#endif
&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;cp&#34;&gt;#if 3021005 &amp;lt; PROTOBUF_MIN_PROTOC_VERSION
&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;cp&#34;&gt;#error This file was generated by an older version of protoc which is
&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;cp&#34;&gt;#error incompatible with your Protocol Buffer headers. Please
&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;cp&#34;&gt;#error regenerate this file with a newer version of protoc.
&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;cp&#34;&gt;#endif
&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;&lt;/span&gt;
    &lt;span class=&#34;cp&#34;&gt;#include&lt;/span&gt; &lt;span class=&#34;cpf&#34;&gt;&amp;lt;google/protobuf/port_undef.inc&amp;gt;&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;cp&#34;&gt;#include&lt;/span&gt; &lt;span class=&#34;cpf&#34;&gt;&amp;lt;google/protobuf/io/coded_stream.h&amp;gt;&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;cp&#34;&gt;#include&lt;/span&gt; &lt;span class=&#34;cpf&#34;&gt;&amp;lt;google/protobuf/arena.h&amp;gt;&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;cp&#34;&gt;#include&lt;/span&gt; &lt;span class=&#34;cpf&#34;&gt;&amp;lt;google/protobuf/arenastring.h&amp;gt;&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;cp&#34;&gt;#include&lt;/span&gt; &lt;span class=&#34;cpf&#34;&gt;&amp;lt;google/protobuf/generated_message_util.h&amp;gt;&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;cp&#34;&gt;#include&lt;/span&gt; &lt;span class=&#34;cpf&#34;&gt;&amp;lt;google/protobuf/metadata_lite.h&amp;gt;&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;cp&#34;&gt;#include&lt;/span&gt; &lt;span class=&#34;cpf&#34;&gt;&amp;lt;google/protobuf/generated_message_reflection.h&amp;gt;&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;cp&#34;&gt;#include&lt;/span&gt; &lt;span class=&#34;cpf&#34;&gt;&amp;lt;google/protobuf/message.h&amp;gt;&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;cp&#34;&gt;#include&lt;/span&gt; &lt;span class=&#34;cpf&#34;&gt;&amp;lt;google/protobuf/repeated_field.h&amp;gt;  // IWYU pragma: export&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;cp&#34;&gt;#include&lt;/span&gt; &lt;span class=&#34;cpf&#34;&gt;&amp;lt;google/protobuf/extension_set.h&amp;gt;  // IWYU pragma: export&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;cp&#34;&gt;#include&lt;/span&gt; &lt;span class=&#34;cpf&#34;&gt;&amp;lt;google/protobuf/map.h&amp;gt;  // IWYU pragma: export&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;cp&#34;&gt;#include&lt;/span&gt; &lt;span class=&#34;cpf&#34;&gt;&amp;lt;google/protobuf/map_entry.h&amp;gt;&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;cp&#34;&gt;#include&lt;/span&gt; &lt;span class=&#34;cpf&#34;&gt;&amp;lt;google/protobuf/map_field_inl.h&amp;gt;&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;cp&#34;&gt;#include&lt;/span&gt; &lt;span class=&#34;cpf&#34;&gt;&amp;lt;google/protobuf/generated_enum_reflection.h&amp;gt;&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;cp&#34;&gt;#include&lt;/span&gt; &lt;span class=&#34;cpf&#34;&gt;&amp;lt;google/protobuf/unknown_field_set.h&amp;gt;&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;c1&#34;&gt;// @@protoc_insertion_point(includes)
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;cp&#34;&gt;#include&lt;/span&gt; &lt;span class=&#34;cpf&#34;&gt;&amp;lt;google/protobuf/port_def.inc&amp;gt;&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;cp&#34;&gt;#define PROTOBUF_INTERNAL_EXPORT_proto3_2eproto
&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;n&#34;&gt;PROTOBUF_NAMESPACE_OPEN&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;namespace&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;internal&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;class&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;AnyMetadata&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;  &lt;span class=&#34;c1&#34;&gt;// namespace internal
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;n&#34;&gt;PROTOBUF_NAMESPACE_CLOSE&lt;/span&gt;

    &lt;span class=&#34;c1&#34;&gt;// Internal implementation detail -- do not use these members.
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;TableStruct_proto3_2eproto&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;static&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;uint32_t&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;offsets&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[];&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;};&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;extern&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;PROTOBUF_NAMESPACE_ID&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;internal&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;DescriptorTable&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;descriptor_table_proto3_2eproto&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;namespace&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;main&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;class&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;TestMessage&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;TestMessageDefaultTypeInternal&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;extern&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;TestMessageDefaultTypeInternal&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;_TestMessage_default_instance_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;class&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;TestMessage_TeChild&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;TestMessage_TeChildDefaultTypeInternal&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;extern&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;TestMessage_TeChildDefaultTypeInternal&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;_TestMessage_TeChild_default_instance_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;class&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;TestMessage_TeMapEntry_DoNotUse&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;TestMessage_TeMapEntry_DoNotUseDefaultTypeInternal&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;extern&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;TestMessage_TeMapEntry_DoNotUseDefaultTypeInternal&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;_TestMessage_TeMapEntry_DoNotUse_default_instance_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;  &lt;span class=&#34;c1&#34;&gt;// namespace main
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;n&#34;&gt;PROTOBUF_NAMESPACE_OPEN&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;template&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&amp;gt;&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;main&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;TestMessage&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Arena&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;CreateMaybeMessage&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;main&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;TestMessage&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Arena&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;template&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&amp;gt;&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;main&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;TestMessage_TeChild&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Arena&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;CreateMaybeMessage&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;main&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;TestMessage_TeChild&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Arena&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;template&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&amp;gt;&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;main&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;TestMessage_TeMapEntry_DoNotUse&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Arena&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;CreateMaybeMessage&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;main&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;TestMessage_TeMapEntry_DoNotUse&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Arena&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;PROTOBUF_NAMESPACE_CLOSE&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;namespace&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;main&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;

    &lt;span class=&#34;k&#34;&gt;enum&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;TestMessage_Status&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
      &lt;span class=&#34;n&#34;&gt;TestMessage_Status_OK&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
      &lt;span class=&#34;n&#34;&gt;TestMessage_Status_FAIL&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
      &lt;span class=&#34;n&#34;&gt;TestMessage_Status_TestMessage_Status_INT_MIN_SENTINEL_DO_NOT_USE_&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;numeric_limits&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int32_t&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;min&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(),&lt;/span&gt;
      &lt;span class=&#34;n&#34;&gt;TestMessage_Status_TestMessage_Status_INT_MAX_SENTINEL_DO_NOT_USE_&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;numeric_limits&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int32_t&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;max&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;};&lt;/span&gt;
    &lt;span class=&#34;kt&#34;&gt;bool&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;TestMessage_Status_IsValid&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;value&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;constexpr&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;TestMessage_Status&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;TestMessage_Status_Status_MIN&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;TestMessage_Status_OK&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;constexpr&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;TestMessage_Status&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;TestMessage_Status_Status_MAX&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;TestMessage_Status_FAIL&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;constexpr&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;TestMessage_Status_Status_ARRAYSIZE&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;TestMessage_Status_Status_MAX&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;

    &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;PROTOBUF_NAMESPACE_ID&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;EnumDescriptor&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;TestMessage_Status_descriptor&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;template&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;typename&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;T&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt;
    &lt;span class=&#34;kr&#34;&gt;inline&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;TestMessage_Status_Name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;T&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;enum_t_value&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;static_assert&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;is_same&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;T&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;TestMessage_Status&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;value&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;||&lt;/span&gt;
        &lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;is_integral&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;T&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;value&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
        &lt;span class=&#34;s&#34;&gt;&amp;#34;Incorrect type passed to function TestMessage_Status_Name.&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;PROTOBUF_NAMESPACE_ID&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;internal&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;NameOfEnum&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;TestMessage_Status_descriptor&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(),&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;enum_t_value&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;kr&#34;&gt;inline&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;bool&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;TestMessage_Status_Parse&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;
        &lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;PROTOBUF_NAMESPACE_ID&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ConstStringParam&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;TestMessage_Status&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;value&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;PROTOBUF_NAMESPACE_ID&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;internal&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ParseNamedEnum&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;TestMessage_Status&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;TestMessage_Status_descriptor&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(),&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;value&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;c1&#34;&gt;// ===================================================================
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;class&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;TestMessage_TeChild&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;final&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;public&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;PROTOBUF_NAMESPACE_ID&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Message&lt;/span&gt; &lt;span class=&#34;cm&#34;&gt;/* @@protoc_insertion_point(class_definition:main.TestMessage.TeChild) */&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
     &lt;span class=&#34;k&#34;&gt;public&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;
      &lt;span class=&#34;kr&#34;&gt;inline&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;TestMessage_TeChild&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;TestMessage_TeChild&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;nullptr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{}&lt;/span&gt;
      &lt;span class=&#34;o&#34;&gt;~&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;TestMessage_TeChild&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;override&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;explicit&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;PROTOBUF_CONSTEXPR&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;TestMessage_TeChild&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;PROTOBUF_NAMESPACE_ID&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;internal&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ConstantInitialized&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;

      &lt;span class=&#34;n&#34;&gt;TestMessage_TeChild&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;TestMessage_TeChild&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;from&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
      &lt;span class=&#34;n&#34;&gt;TestMessage_TeChild&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;TestMessage_TeChild&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;from&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;noexcept&lt;/span&gt;
        &lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;TestMessage_TeChild&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;this&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;move&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;from&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
      &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

      &lt;span class=&#34;kr&#34;&gt;inline&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;TestMessage_TeChild&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;operator&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;TestMessage_TeChild&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;from&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;CopyFrom&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;from&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;this&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
      &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
      &lt;span class=&#34;kr&#34;&gt;inline&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;TestMessage_TeChild&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;operator&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;TestMessage_TeChild&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;from&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;noexcept&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;this&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;from&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;this&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;GetOwningArena&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;from&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;GetOwningArena&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
      &lt;span class=&#34;cp&#34;&gt;#ifdef PROTOBUF_FORCE_COPY_IN_MOVE
&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;&lt;/span&gt;            &lt;span class=&#34;o&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;GetOwningArena&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;nullptr&lt;/span&gt;
      &lt;span class=&#34;cp&#34;&gt;#endif  &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// !PROTOBUF_FORCE_COPY_IN_MOVE
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;        &lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
          &lt;span class=&#34;n&#34;&gt;InternalSwap&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;from&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
        &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;else&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
          &lt;span class=&#34;n&#34;&gt;CopyFrom&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;from&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
        &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;this&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
      &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

      &lt;span class=&#34;k&#34;&gt;static&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;PROTOBUF_NAMESPACE_ID&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Descriptor&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;descriptor&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;GetDescriptor&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
      &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;static&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;PROTOBUF_NAMESPACE_ID&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Descriptor&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;GetDescriptor&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;default_instance&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;().&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;GetMetadata&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;().&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;descriptor&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
      &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;static&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;PROTOBUF_NAMESPACE_ID&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Reflection&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;GetReflection&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;default_instance&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;().&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;GetMetadata&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;().&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;reflection&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
      &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;static&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;TestMessage_TeChild&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;default_instance&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;internal_default_instance&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
      &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;static&lt;/span&gt; &lt;span class=&#34;kr&#34;&gt;inline&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;TestMessage_TeChild&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;internal_default_instance&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;reinterpret_cast&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;TestMessage_TeChild&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&amp;gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;
                   &lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_TestMessage_TeChild_default_instance_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
      &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;static&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;constexpr&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;kIndexInFileMessages&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;
        &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;

      &lt;span class=&#34;k&#34;&gt;friend&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;swap&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;TestMessage_TeChild&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;a&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;TestMessage_TeChild&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;b&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;a&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Swap&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;b&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
      &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
      &lt;span class=&#34;kr&#34;&gt;inline&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;Swap&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;TestMessage_TeChild&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;other&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;other&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;this&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
      &lt;span class=&#34;cp&#34;&gt;#ifdef PROTOBUF_FORCE_COPY_IN_SWAP
&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;&lt;/span&gt;        &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;GetOwningArena&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;nullptr&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt;
            &lt;span class=&#34;n&#34;&gt;GetOwningArena&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;other&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;GetOwningArena&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;())&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
       &lt;span class=&#34;cp&#34;&gt;#else  &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// PROTOBUF_FORCE_COPY_IN_SWAP
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;        &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;GetOwningArena&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;other&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;GetOwningArena&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;())&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
      &lt;span class=&#34;cp&#34;&gt;#endif  &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// !PROTOBUF_FORCE_COPY_IN_SWAP
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;          &lt;span class=&#34;n&#34;&gt;InternalSwap&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;other&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
        &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;else&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
          &lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;PROTOBUF_NAMESPACE_ID&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;internal&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;GenericSwap&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;this&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;other&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
        &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
      &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
      &lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;UnsafeArenaSwap&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;TestMessage_TeChild&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;other&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;other&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;this&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;GOOGLE_DCHECK&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;GetOwningArena&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;other&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;GetOwningArena&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;());&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;InternalSwap&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;other&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
      &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

      &lt;span class=&#34;c1&#34;&gt;// implements Message ----------------------------------------------
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;
      &lt;span class=&#34;n&#34;&gt;TestMessage_TeChild&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;New&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;PROTOBUF_NAMESPACE_ID&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Arena&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;arena&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;nullptr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;final&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;CreateMaybeMessage&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;TestMessage_TeChild&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;arena&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
      &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;using&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;PROTOBUF_NAMESPACE_ID&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Message&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;CopyFrom&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
      &lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;CopyFrom&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;TestMessage_TeChild&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;from&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;using&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;PROTOBUF_NAMESPACE_ID&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Message&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;MergeFrom&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
      &lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;MergeFrom&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;TestMessage_TeChild&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;from&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;TestMessage_TeChild&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;MergeImpl&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;this&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;from&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
      &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;private&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;static&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;MergeImpl&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;PROTOBUF_NAMESPACE_ID&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Message&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;to_msg&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;PROTOBUF_NAMESPACE_ID&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Message&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;from_msg&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;public&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;
      &lt;span class=&#34;n&#34;&gt;PROTOBUF_ATTRIBUTE_REINITIALIZES&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Clear&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;final&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
      &lt;span class=&#34;kt&#34;&gt;bool&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;IsInitialized&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;final&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;

      &lt;span class=&#34;n&#34;&gt;size_t&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ByteSizeLong&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;final&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;char&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;_InternalParse&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;char&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ptr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;PROTOBUF_NAMESPACE_ID&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;internal&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ParseContext&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ctx&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;final&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
      &lt;span class=&#34;kt&#34;&gt;uint8_t&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;_InternalSerialize&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;
          &lt;span class=&#34;kt&#34;&gt;uint8_t&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;target&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;PROTOBUF_NAMESPACE_ID&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;io&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;EpsCopyOutputStream&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;stream&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;final&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
      &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;GetCachedSize&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;final&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;_impl_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_cached_size_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Get&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

      &lt;span class=&#34;k&#34;&gt;private&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;
      &lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;SharedCtor&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;PROTOBUF_NAMESPACE_ID&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Arena&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;arena&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;bool&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;is_message_owned&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
      &lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;SharedDtor&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
      &lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;SetCachedSize&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;size&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;final&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
      &lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;InternalSwap&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;TestMessage_TeChild&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;other&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;

      &lt;span class=&#34;k&#34;&gt;private&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;friend&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;class&lt;/span&gt; &lt;span class=&#34;err&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;PROTOBUF_NAMESPACE_ID&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;internal&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;AnyMetadata&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;static&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;PROTOBUF_NAMESPACE_ID&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;StringPiece&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;FullMessageName&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;main.TestMessage.TeChild&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
      &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;protected&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;explicit&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;TestMessage_TeChild&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;PROTOBUF_NAMESPACE_ID&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Arena&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;arena&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
                           &lt;span class=&#34;kt&#34;&gt;bool&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;is_message_owned&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;false&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;public&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;

      &lt;span class=&#34;k&#34;&gt;static&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ClassData&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;_class_data_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;PROTOBUF_NAMESPACE_ID&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Message&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ClassData&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;GetClassData&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;final&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;

      &lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;PROTOBUF_NAMESPACE_ID&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Metadata&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;GetMetadata&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;final&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;

      &lt;span class=&#34;c1&#34;&gt;// nested types ----------------------------------------------------
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;
      &lt;span class=&#34;c1&#34;&gt;// accessors -------------------------------------------------------
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;enum&lt;/span&gt; &lt;span class=&#34;err&#34;&gt;: &lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;kChNameFieldNumber&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;kChSexFieldNumber&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
      &lt;span class=&#34;p&#34;&gt;};&lt;/span&gt;
      &lt;span class=&#34;c1&#34;&gt;// string ch_name = 1;
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;      &lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;clear_ch_name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ch_name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;template&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;typename&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ArgT0&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;typename&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;...&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ArgT&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt;
      &lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;set_ch_name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ArgT0&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;arg0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ArgT&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;...&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;args&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
      &lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;mutable_ch_name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
      &lt;span class=&#34;n&#34;&gt;PROTOBUF_NODISCARD&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;release_ch_name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
      &lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;set_allocated_ch_name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ch_name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;private&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;_internal_ch_name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
      &lt;span class=&#34;kr&#34;&gt;inline&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;PROTOBUF_ALWAYS_INLINE&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;_internal_set_ch_name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;value&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
      &lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;_internal_mutable_ch_name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;public&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;

      &lt;span class=&#34;c1&#34;&gt;// string ch_sex = 2;
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;      &lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;clear_ch_sex&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ch_sex&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;template&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;typename&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ArgT0&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;typename&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;...&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ArgT&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt;
      &lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;set_ch_sex&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ArgT0&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;arg0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ArgT&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;...&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;args&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
      &lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;mutable_ch_sex&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
      &lt;span class=&#34;n&#34;&gt;PROTOBUF_NODISCARD&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;release_ch_sex&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
      &lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;set_allocated_ch_sex&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ch_sex&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;private&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;_internal_ch_sex&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
      &lt;span class=&#34;kr&#34;&gt;inline&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;PROTOBUF_ALWAYS_INLINE&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;_internal_set_ch_sex&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;value&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
      &lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;_internal_mutable_ch_sex&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;public&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;

      &lt;span class=&#34;c1&#34;&gt;// @@protoc_insertion_point(class_scope:main.TestMessage.TeChild)
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;     &lt;span class=&#34;k&#34;&gt;private&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;class&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;_Internal&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;

      &lt;span class=&#34;k&#34;&gt;template&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;typename&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;T&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;friend&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;class&lt;/span&gt; &lt;span class=&#34;err&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;PROTOBUF_NAMESPACE_ID&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Arena&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;InternalHelper&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;typedef&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;InternalArenaConstructable_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;typedef&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;DestructorSkippable_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;Impl_&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;PROTOBUF_NAMESPACE_ID&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;internal&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ArenaStringPtr&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ch_name_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
        &lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;PROTOBUF_NAMESPACE_ID&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;internal&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ArenaStringPtr&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ch_sex_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;mutable&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;PROTOBUF_NAMESPACE_ID&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;internal&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;CachedSize&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;_cached_size_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
      &lt;span class=&#34;p&#34;&gt;};&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;union&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Impl_&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;_impl_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;};&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;friend&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt; &lt;span class=&#34;err&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;TableStruct_proto3_2eproto&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;};&lt;/span&gt;
    &lt;span class=&#34;c1&#34;&gt;// -------------------------------------------------------------------
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;class&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;TestMessage_TeMapEntry_DoNotUse&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;public&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;PROTOBUF_NAMESPACE_ID&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;internal&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;MapEntry&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;TestMessage_TeMapEntry_DoNotUse&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; 
        &lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;int32_t&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
        &lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;PROTOBUF_NAMESPACE_ID&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;internal&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;WireFormatLite&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;TYPE_STRING&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
        &lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;PROTOBUF_NAMESPACE_ID&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;internal&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;WireFormatLite&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;TYPE_INT32&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;public&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;typedef&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;PROTOBUF_NAMESPACE_ID&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;internal&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;MapEntry&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;TestMessage_TeMapEntry_DoNotUse&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; 
        &lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;int32_t&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
        &lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;PROTOBUF_NAMESPACE_ID&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;internal&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;WireFormatLite&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;TYPE_STRING&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
        &lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;PROTOBUF_NAMESPACE_ID&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;internal&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;WireFormatLite&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;TYPE_INT32&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;SuperType&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
      &lt;span class=&#34;n&#34;&gt;TestMessage_TeMapEntry_DoNotUse&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;explicit&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;PROTOBUF_CONSTEXPR&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;TestMessage_TeMapEntry_DoNotUse&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;
          &lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;PROTOBUF_NAMESPACE_ID&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;internal&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ConstantInitialized&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;explicit&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;TestMessage_TeMapEntry_DoNotUse&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;PROTOBUF_NAMESPACE_ID&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Arena&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;arena&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
      &lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;MergeFrom&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;TestMessage_TeMapEntry_DoNotUse&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;other&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;static&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;TestMessage_TeMapEntry_DoNotUse&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;internal_default_instance&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;reinterpret_cast&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;TestMessage_TeMapEntry_DoNotUse&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&amp;gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_TestMessage_TeMapEntry_DoNotUse_default_instance_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;static&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;bool&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;ValidateKey&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;s&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;PROTOBUF_NAMESPACE_ID&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;internal&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;WireFormatLite&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;VerifyUtf8String&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;s&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;data&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(),&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;static_cast&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;s&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;size&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()),&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;PROTOBUF_NAMESPACE_ID&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;internal&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;WireFormatLite&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;PARSE&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;main.TestMessage.TeMapEntry.key&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
     &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;static&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;bool&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;ValidateValue&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;true&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;using&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;PROTOBUF_NAMESPACE_ID&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Message&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;MergeFrom&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
      &lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;PROTOBUF_NAMESPACE_ID&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Metadata&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;GetMetadata&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;final&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;friend&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt; &lt;span class=&#34;err&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;TableStruct_proto3_2eproto&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;};&lt;/span&gt;

    &lt;span class=&#34;c1&#34;&gt;// -------------------------------------------------------------------
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;class&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;TestMessage&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;final&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;public&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;PROTOBUF_NAMESPACE_ID&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Message&lt;/span&gt; &lt;span class=&#34;cm&#34;&gt;/* @@protoc_insertion_point(class_definition:main.TestMessage) */&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
     &lt;span class=&#34;k&#34;&gt;public&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;
      &lt;span class=&#34;kr&#34;&gt;inline&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;TestMessage&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;TestMessage&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;nullptr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{}&lt;/span&gt;
      &lt;span class=&#34;o&#34;&gt;~&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;TestMessage&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;override&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;explicit&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;PROTOBUF_CONSTEXPR&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;TestMessage&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;PROTOBUF_NAMESPACE_ID&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;internal&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ConstantInitialized&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;

      &lt;span class=&#34;n&#34;&gt;TestMessage&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;TestMessage&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;from&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
      &lt;span class=&#34;n&#34;&gt;TestMessage&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;TestMessage&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;from&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;noexcept&lt;/span&gt;
        &lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;TestMessage&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;this&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;move&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;from&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
      &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

      &lt;span class=&#34;kr&#34;&gt;inline&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;TestMessage&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;operator&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;TestMessage&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;from&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;CopyFrom&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;from&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;this&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
      &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
      &lt;span class=&#34;kr&#34;&gt;inline&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;TestMessage&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;operator&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;TestMessage&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;from&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;noexcept&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;this&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;from&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;this&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;GetOwningArena&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;from&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;GetOwningArena&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
      &lt;span class=&#34;cp&#34;&gt;#ifdef PROTOBUF_FORCE_COPY_IN_MOVE
&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;&lt;/span&gt;            &lt;span class=&#34;o&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;GetOwningArena&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;nullptr&lt;/span&gt;
      &lt;span class=&#34;cp&#34;&gt;#endif  &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// !PROTOBUF_FORCE_COPY_IN_MOVE
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;        &lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
          &lt;span class=&#34;n&#34;&gt;InternalSwap&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;from&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
        &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;else&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
          &lt;span class=&#34;n&#34;&gt;CopyFrom&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;from&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
        &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;this&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
      &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

      &lt;span class=&#34;k&#34;&gt;static&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;PROTOBUF_NAMESPACE_ID&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Descriptor&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;descriptor&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;GetDescriptor&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
      &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;static&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;PROTOBUF_NAMESPACE_ID&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Descriptor&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;GetDescriptor&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;default_instance&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;().&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;GetMetadata&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;().&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;descriptor&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
      &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;static&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;PROTOBUF_NAMESPACE_ID&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Reflection&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;GetReflection&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;default_instance&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;().&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;GetMetadata&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;().&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;reflection&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
      &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;static&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;TestMessage&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;default_instance&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;internal_default_instance&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
      &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;static&lt;/span&gt; &lt;span class=&#34;kr&#34;&gt;inline&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;TestMessage&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;internal_default_instance&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;reinterpret_cast&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;TestMessage&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&amp;gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;
                   &lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_TestMessage_default_instance_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
      &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;static&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;constexpr&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;kIndexInFileMessages&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;
        &lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;

      &lt;span class=&#34;k&#34;&gt;friend&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;swap&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;TestMessage&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;a&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;TestMessage&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;b&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;a&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Swap&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;b&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
      &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
      &lt;span class=&#34;kr&#34;&gt;inline&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;Swap&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;TestMessage&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;other&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;other&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;this&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
      &lt;span class=&#34;cp&#34;&gt;#ifdef PROTOBUF_FORCE_COPY_IN_SWAP
&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;&lt;/span&gt;        &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;GetOwningArena&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;nullptr&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt;
            &lt;span class=&#34;n&#34;&gt;GetOwningArena&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;other&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;GetOwningArena&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;())&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
       &lt;span class=&#34;cp&#34;&gt;#else  &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// PROTOBUF_FORCE_COPY_IN_SWAP
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;        &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;GetOwningArena&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;other&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;GetOwningArena&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;())&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
      &lt;span class=&#34;cp&#34;&gt;#endif  &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// !PROTOBUF_FORCE_COPY_IN_SWAP
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;          &lt;span class=&#34;n&#34;&gt;InternalSwap&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;other&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
        &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;else&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
          &lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;PROTOBUF_NAMESPACE_ID&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;internal&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;GenericSwap&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;this&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;other&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
        &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
      &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
      &lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;UnsafeArenaSwap&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;TestMessage&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;other&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;other&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;this&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;GOOGLE_DCHECK&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;GetOwningArena&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;other&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;GetOwningArena&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;());&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;InternalSwap&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;other&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
      &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

      &lt;span class=&#34;c1&#34;&gt;// implements Message ----------------------------------------------
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;
      &lt;span class=&#34;n&#34;&gt;TestMessage&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;New&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;PROTOBUF_NAMESPACE_ID&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Arena&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;arena&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;nullptr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;final&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;CreateMaybeMessage&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;TestMessage&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;arena&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
      &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;using&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;PROTOBUF_NAMESPACE_ID&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Message&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;CopyFrom&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
      &lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;CopyFrom&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;TestMessage&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;from&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;using&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;PROTOBUF_NAMESPACE_ID&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Message&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;MergeFrom&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
      &lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;MergeFrom&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;TestMessage&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;from&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;TestMessage&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;MergeImpl&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;this&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;from&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
      &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;private&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;static&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;MergeImpl&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;PROTOBUF_NAMESPACE_ID&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Message&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;to_msg&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;PROTOBUF_NAMESPACE_ID&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Message&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;from_msg&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;public&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;
      &lt;span class=&#34;n&#34;&gt;PROTOBUF_ATTRIBUTE_REINITIALIZES&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Clear&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;final&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
      &lt;span class=&#34;kt&#34;&gt;bool&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;IsInitialized&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;final&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;

      &lt;span class=&#34;n&#34;&gt;size_t&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ByteSizeLong&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;final&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;char&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;_InternalParse&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;char&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ptr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;PROTOBUF_NAMESPACE_ID&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;internal&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ParseContext&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ctx&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;final&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
      &lt;span class=&#34;kt&#34;&gt;uint8_t&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;_InternalSerialize&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;
          &lt;span class=&#34;kt&#34;&gt;uint8_t&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;target&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;PROTOBUF_NAMESPACE_ID&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;io&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;EpsCopyOutputStream&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;stream&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;final&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
      &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;GetCachedSize&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;final&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;_impl_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_cached_size_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Get&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

      &lt;span class=&#34;k&#34;&gt;private&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;
      &lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;SharedCtor&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;PROTOBUF_NAMESPACE_ID&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Arena&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;arena&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;bool&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;is_message_owned&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
      &lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;SharedDtor&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
      &lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;SetCachedSize&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;size&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;final&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
      &lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;InternalSwap&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;TestMessage&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;other&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;

      &lt;span class=&#34;k&#34;&gt;private&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;friend&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;class&lt;/span&gt; &lt;span class=&#34;err&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;PROTOBUF_NAMESPACE_ID&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;internal&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;AnyMetadata&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;static&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;PROTOBUF_NAMESPACE_ID&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;StringPiece&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;FullMessageName&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;main.TestMessage&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
      &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;protected&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;explicit&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;TestMessage&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;PROTOBUF_NAMESPACE_ID&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Arena&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;arena&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
                           &lt;span class=&#34;kt&#34;&gt;bool&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;is_message_owned&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;false&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;private&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;static&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ArenaDtor&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;object&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;public&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;

      &lt;span class=&#34;k&#34;&gt;static&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ClassData&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;_class_data_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;PROTOBUF_NAMESPACE_ID&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Message&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ClassData&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;GetClassData&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;final&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;

      &lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;PROTOBUF_NAMESPACE_ID&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Metadata&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;GetMetadata&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;final&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;

      &lt;span class=&#34;c1&#34;&gt;// nested types ----------------------------------------------------
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;typedef&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;TestMessage_TeChild&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;TeChild&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;

      &lt;span class=&#34;k&#34;&gt;typedef&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;TestMessage_Status&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Status&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;static&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;constexpr&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Status&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;OK&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;TestMessage_Status_OK&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;static&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;constexpr&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Status&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;FAIL&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;TestMessage_Status_FAIL&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;static&lt;/span&gt; &lt;span class=&#34;kr&#34;&gt;inline&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;bool&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Status_IsValid&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;value&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;TestMessage_Status_IsValid&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;value&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
      &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;static&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;constexpr&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Status&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Status_MIN&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;TestMessage_Status_Status_MIN&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;static&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;constexpr&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Status&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Status_MAX&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;TestMessage_Status_Status_MAX&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;static&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;constexpr&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Status_ARRAYSIZE&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;TestMessage_Status_Status_ARRAYSIZE&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;static&lt;/span&gt; &lt;span class=&#34;kr&#34;&gt;inline&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;PROTOBUF_NAMESPACE_ID&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;EnumDescriptor&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;
      &lt;span class=&#34;n&#34;&gt;Status_descriptor&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;TestMessage_Status_descriptor&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
      &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;template&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;typename&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;T&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;static&lt;/span&gt; &lt;span class=&#34;kr&#34;&gt;inline&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Status_Name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;T&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;enum_t_value&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;static_assert&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;is_same&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;T&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Status&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;value&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;||&lt;/span&gt;
          &lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;is_integral&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;T&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;value&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
          &lt;span class=&#34;s&#34;&gt;&amp;#34;Incorrect type passed to function Status_Name.&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;TestMessage_Status_Name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;enum_t_value&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
      &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;static&lt;/span&gt; &lt;span class=&#34;kr&#34;&gt;inline&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;bool&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Status_Parse&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;PROTOBUF_NAMESPACE_ID&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ConstStringParam&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
          &lt;span class=&#34;n&#34;&gt;Status&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;value&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;TestMessage_Status_Parse&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;value&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
      &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

      &lt;span class=&#34;c1&#34;&gt;// accessors -------------------------------------------------------
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;enum&lt;/span&gt; &lt;span class=&#34;err&#34;&gt;: &lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;kTeMapFieldNumber&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;10&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;kTeNameFieldNumber&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;kTeCharFieldNumber&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;7&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;kChildsFieldNumber&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;9&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;kTeAgeFieldNumber&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;kTeCountFieldNumber&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;3&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;kTeMoneyFieldNumber&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;4&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;kTeScoreFieldNumber&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;5&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;kTeFatFieldNumber&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;6&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
      &lt;span class=&#34;p&#34;&gt;};&lt;/span&gt;
      &lt;span class=&#34;c1&#34;&gt;// map&amp;lt;string, int32&amp;gt; te_map = 10;
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;      &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;te_map_size&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;private&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;
      &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;_internal_te_map_size&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;public&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;
      &lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;clear_te_map&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;private&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;PROTOBUF_NAMESPACE_ID&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Map&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;int32_t&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;gt;&amp;amp;&lt;/span&gt;
          &lt;span class=&#34;n&#34;&gt;_internal_te_map&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
      &lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;PROTOBUF_NAMESPACE_ID&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Map&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;int32_t&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;gt;*&lt;/span&gt;
          &lt;span class=&#34;n&#34;&gt;_internal_mutable_te_map&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;public&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;PROTOBUF_NAMESPACE_ID&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Map&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;int32_t&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;gt;&amp;amp;&lt;/span&gt;
          &lt;span class=&#34;n&#34;&gt;te_map&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
      &lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;PROTOBUF_NAMESPACE_ID&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Map&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;int32_t&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;gt;*&lt;/span&gt;
          &lt;span class=&#34;n&#34;&gt;mutable_te_map&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;

      &lt;span class=&#34;c1&#34;&gt;// string te_name = 1;
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;      &lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;clear_te_name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;te_name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;template&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;typename&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ArgT0&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;typename&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;...&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ArgT&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt;
      &lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;set_te_name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ArgT0&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;arg0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ArgT&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;...&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;args&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
      &lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;mutable_te_name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
      &lt;span class=&#34;n&#34;&gt;PROTOBUF_NODISCARD&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;release_te_name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
      &lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;set_allocated_te_name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;te_name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;private&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;_internal_te_name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
      &lt;span class=&#34;kr&#34;&gt;inline&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;PROTOBUF_ALWAYS_INLINE&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;_internal_set_te_name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;value&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
      &lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;_internal_mutable_te_name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;public&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;

      &lt;span class=&#34;c1&#34;&gt;// bytes te_char = 7;
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;      &lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;clear_te_char&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;te_char&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;template&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;typename&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ArgT0&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;typename&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;...&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ArgT&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt;
      &lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;set_te_char&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ArgT0&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;arg0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ArgT&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;...&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;args&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
      &lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;mutable_te_char&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
      &lt;span class=&#34;n&#34;&gt;PROTOBUF_NODISCARD&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;release_te_char&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
      &lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;set_allocated_te_char&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;te_char&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;private&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;_internal_te_char&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
      &lt;span class=&#34;kr&#34;&gt;inline&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;PROTOBUF_ALWAYS_INLINE&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;_internal_set_te_char&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;value&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
      &lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;_internal_mutable_te_char&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;public&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;

      &lt;span class=&#34;c1&#34;&gt;// .main.TestMessage.TeChild childs = 9;
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;      &lt;span class=&#34;kt&#34;&gt;bool&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;has_childs&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;private&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;
      &lt;span class=&#34;kt&#34;&gt;bool&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;_internal_has_childs&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;public&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;
      &lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;clear_childs&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;main&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;TestMessage_TeChild&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;childs&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
      &lt;span class=&#34;n&#34;&gt;PROTOBUF_NODISCARD&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;main&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;TestMessage_TeChild&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;release_childs&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
      &lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;main&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;TestMessage_TeChild&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;mutable_childs&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
      &lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;set_allocated_childs&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;main&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;TestMessage_TeChild&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;childs&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;private&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;main&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;TestMessage_TeChild&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;_internal_childs&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
      &lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;main&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;TestMessage_TeChild&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;_internal_mutable_childs&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;public&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;
      &lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;unsafe_arena_set_allocated_childs&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;
          &lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;main&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;TestMessage_TeChild&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;childs&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
      &lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;main&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;TestMessage_TeChild&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;unsafe_arena_release_childs&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;

      &lt;span class=&#34;c1&#34;&gt;// int32 te_age = 2;
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;      &lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;clear_te_age&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
      &lt;span class=&#34;kt&#34;&gt;int32_t&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;te_age&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
      &lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;set_te_age&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int32_t&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;value&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;private&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;
      &lt;span class=&#34;kt&#34;&gt;int32_t&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;_internal_te_age&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
      &lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;_internal_set_te_age&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int32_t&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;value&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;public&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;

      &lt;span class=&#34;c1&#34;&gt;// int32 te_count = 3;
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;      &lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;clear_te_count&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
      &lt;span class=&#34;kt&#34;&gt;int32_t&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;te_count&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
      &lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;set_te_count&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int32_t&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;value&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;private&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;
      &lt;span class=&#34;kt&#34;&gt;int32_t&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;_internal_te_count&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
      &lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;_internal_set_te_count&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int32_t&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;value&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;public&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;

      &lt;span class=&#34;c1&#34;&gt;// double te_money = 4;
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;      &lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;clear_te_money&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
      &lt;span class=&#34;kt&#34;&gt;double&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;te_money&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
      &lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;set_te_money&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;double&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;value&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;private&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;
      &lt;span class=&#34;kt&#34;&gt;double&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;_internal_te_money&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
      &lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;_internal_set_te_money&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;double&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;value&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;public&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;

      &lt;span class=&#34;c1&#34;&gt;// float te_score = 5;
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;      &lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;clear_te_score&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
      &lt;span class=&#34;kt&#34;&gt;float&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;te_score&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
      &lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;set_te_score&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;float&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;value&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;private&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;
      &lt;span class=&#34;kt&#34;&gt;float&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;_internal_te_score&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
      &lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;_internal_set_te_score&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;float&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;value&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;public&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;

      &lt;span class=&#34;c1&#34;&gt;// bool te_fat = 6;
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;      &lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;clear_te_fat&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
      &lt;span class=&#34;kt&#34;&gt;bool&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;te_fat&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
      &lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;set_te_fat&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;bool&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;value&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;private&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;
      &lt;span class=&#34;kt&#34;&gt;bool&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;_internal_te_fat&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
      &lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;_internal_set_te_fat&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;bool&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;value&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;public&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;

      &lt;span class=&#34;c1&#34;&gt;// @@protoc_insertion_point(class_scope:main.TestMessage)
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;     &lt;span class=&#34;k&#34;&gt;private&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;class&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;_Internal&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;

      &lt;span class=&#34;k&#34;&gt;template&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;typename&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;T&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;friend&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;class&lt;/span&gt; &lt;span class=&#34;err&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;PROTOBUF_NAMESPACE_ID&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Arena&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;InternalHelper&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;typedef&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;InternalArenaConstructable_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;typedef&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;DestructorSkippable_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;Impl_&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;PROTOBUF_NAMESPACE_ID&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;internal&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;MapField&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;
            &lt;span class=&#34;n&#34;&gt;TestMessage_TeMapEntry_DoNotUse&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
            &lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;int32_t&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
            &lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;PROTOBUF_NAMESPACE_ID&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;internal&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;WireFormatLite&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;TYPE_STRING&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
            &lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;PROTOBUF_NAMESPACE_ID&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;internal&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;WireFormatLite&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;TYPE_INT32&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;te_map_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
        &lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;PROTOBUF_NAMESPACE_ID&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;internal&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ArenaStringPtr&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;te_name_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
        &lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;PROTOBUF_NAMESPACE_ID&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;internal&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ArenaStringPtr&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;te_char_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
        &lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;main&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;TestMessage_TeChild&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;childs_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
        &lt;span class=&#34;kt&#34;&gt;int32_t&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;te_age_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
        &lt;span class=&#34;kt&#34;&gt;int32_t&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;te_count_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
        &lt;span class=&#34;kt&#34;&gt;double&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;te_money_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
        &lt;span class=&#34;kt&#34;&gt;float&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;te_score_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
        &lt;span class=&#34;kt&#34;&gt;bool&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;te_fat_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;mutable&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;PROTOBUF_NAMESPACE_ID&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;internal&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;CachedSize&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;_cached_size_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
      &lt;span class=&#34;p&#34;&gt;};&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;union&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Impl_&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;_impl_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;};&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;friend&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt; &lt;span class=&#34;err&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;TableStruct_proto3_2eproto&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;};&lt;/span&gt;
    &lt;span class=&#34;c1&#34;&gt;// ===================================================================
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;

    &lt;span class=&#34;c1&#34;&gt;// ===================================================================
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;
    &lt;span class=&#34;cp&#34;&gt;#ifdef __GNUC__
&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;&lt;/span&gt;      &lt;span class=&#34;cp&#34;&gt;#pragma GCC diagnostic push
&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;&lt;/span&gt;      &lt;span class=&#34;cp&#34;&gt;#pragma GCC diagnostic ignored &amp;#34;-Wstrict-aliasing&amp;#34;
&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;cp&#34;&gt;#endif  &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// __GNUC__
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;c1&#34;&gt;// TestMessage_TeChild
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;
    &lt;span class=&#34;c1&#34;&gt;// string ch_name = 1;
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;kr&#34;&gt;inline&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;TestMessage_TeChild&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;clear_ch_name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
      &lt;span class=&#34;n&#34;&gt;_impl_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ch_name_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ClearToEmpty&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;kr&#34;&gt;inline&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;TestMessage_TeChild&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ch_name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
      &lt;span class=&#34;c1&#34;&gt;// @@protoc_insertion_point(field_get:main.TestMessage.TeChild.ch_name)
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;      &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;_internal_ch_name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;template&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;typename&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ArgT0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;typename&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;...&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ArgT&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt;
    &lt;span class=&#34;kr&#34;&gt;inline&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;PROTOBUF_ALWAYS_INLINE&lt;/span&gt;
    &lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;TestMessage_TeChild&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;set_ch_name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ArgT0&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;arg0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ArgT&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;...&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;args&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;

     &lt;span class=&#34;n&#34;&gt;_impl_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ch_name_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Set&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;static_cast&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ArgT0&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&amp;amp;&amp;gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;arg0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;),&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;args&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;...,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;GetArenaForAllocation&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;());&lt;/span&gt;
      &lt;span class=&#34;c1&#34;&gt;// @@protoc_insertion_point(field_set:main.TestMessage.TeChild.ch_name)
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;kr&#34;&gt;inline&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;TestMessage_TeChild&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;mutable_ch_name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
      &lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;_s&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;_internal_mutable_ch_name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
      &lt;span class=&#34;c1&#34;&gt;// @@protoc_insertion_point(field_mutable:main.TestMessage.TeChild.ch_name)
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;      &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;_s&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;kr&#34;&gt;inline&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;TestMessage_TeChild&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_internal_ch_name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;_impl_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ch_name_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Get&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;kr&#34;&gt;inline&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;TestMessage_TeChild&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_internal_set_ch_name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;value&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;

      &lt;span class=&#34;n&#34;&gt;_impl_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ch_name_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Set&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;value&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;GetArenaForAllocation&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;());&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;kr&#34;&gt;inline&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;TestMessage_TeChild&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_internal_mutable_ch_name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;

      &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;_impl_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ch_name_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Mutable&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;GetArenaForAllocation&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;());&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;kr&#34;&gt;inline&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;TestMessage_TeChild&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;release_ch_name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
      &lt;span class=&#34;c1&#34;&gt;// @@protoc_insertion_point(field_release:main.TestMessage.TeChild.ch_name)
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;      &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;_impl_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ch_name_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Release&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;kr&#34;&gt;inline&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;TestMessage_TeChild&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;set_allocated_ch_name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ch_name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ch_name&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;nullptr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;

      &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;else&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;

      &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
      &lt;span class=&#34;n&#34;&gt;_impl_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ch_name_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;SetAllocated&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ch_name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;GetArenaForAllocation&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;());&lt;/span&gt;
    &lt;span class=&#34;cp&#34;&gt;#ifdef PROTOBUF_FORCE_COPY_DEFAULT_STRING
&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;&lt;/span&gt;      &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_impl_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ch_name_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;IsDefault&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;())&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;_impl_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ch_name_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Set&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;GetArenaForAllocation&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;());&lt;/span&gt;
      &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;cp&#34;&gt;#endif &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// PROTOBUF_FORCE_COPY_DEFAULT_STRING
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;      &lt;span class=&#34;c1&#34;&gt;// @@protoc_insertion_point(field_set_allocated:main.TestMessage.TeChild.ch_name)
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

    &lt;span class=&#34;c1&#34;&gt;// string ch_sex = 2;
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;kr&#34;&gt;inline&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;TestMessage_TeChild&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;clear_ch_sex&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
      &lt;span class=&#34;n&#34;&gt;_impl_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ch_sex_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ClearToEmpty&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;kr&#34;&gt;inline&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;TestMessage_TeChild&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ch_sex&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
      &lt;span class=&#34;c1&#34;&gt;// @@protoc_insertion_point(field_get:main.TestMessage.TeChild.ch_sex)
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;      &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;_internal_ch_sex&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;template&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;typename&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ArgT0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;typename&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;...&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ArgT&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt;
    &lt;span class=&#34;kr&#34;&gt;inline&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;PROTOBUF_ALWAYS_INLINE&lt;/span&gt;
    &lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;TestMessage_TeChild&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;set_ch_sex&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ArgT0&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;arg0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ArgT&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;...&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;args&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;

     &lt;span class=&#34;n&#34;&gt;_impl_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ch_sex_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Set&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;static_cast&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ArgT0&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&amp;amp;&amp;gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;arg0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;),&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;args&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;...,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;GetArenaForAllocation&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;());&lt;/span&gt;
      &lt;span class=&#34;c1&#34;&gt;// @@protoc_insertion_point(field_set:main.TestMessage.TeChild.ch_sex)
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;kr&#34;&gt;inline&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;TestMessage_TeChild&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;mutable_ch_sex&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
      &lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;_s&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;_internal_mutable_ch_sex&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
      &lt;span class=&#34;c1&#34;&gt;// @@protoc_insertion_point(field_mutable:main.TestMessage.TeChild.ch_sex)
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;      &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;_s&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;kr&#34;&gt;inline&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;TestMessage_TeChild&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_internal_ch_sex&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;_impl_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ch_sex_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Get&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;kr&#34;&gt;inline&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;TestMessage_TeChild&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_internal_set_ch_sex&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;value&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;

      &lt;span class=&#34;n&#34;&gt;_impl_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ch_sex_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Set&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;value&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;GetArenaForAllocation&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;());&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;kr&#34;&gt;inline&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;TestMessage_TeChild&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_internal_mutable_ch_sex&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;

      &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;_impl_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ch_sex_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Mutable&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;GetArenaForAllocation&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;());&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;kr&#34;&gt;inline&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;TestMessage_TeChild&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;release_ch_sex&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
      &lt;span class=&#34;c1&#34;&gt;// @@protoc_insertion_point(field_release:main.TestMessage.TeChild.ch_sex)
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;      &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;_impl_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ch_sex_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Release&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;kr&#34;&gt;inline&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;TestMessage_TeChild&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;set_allocated_ch_sex&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ch_sex&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ch_sex&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;nullptr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;

      &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;else&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;

      &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
      &lt;span class=&#34;n&#34;&gt;_impl_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ch_sex_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;SetAllocated&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ch_sex&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;GetArenaForAllocation&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;());&lt;/span&gt;
    &lt;span class=&#34;cp&#34;&gt;#ifdef PROTOBUF_FORCE_COPY_DEFAULT_STRING
&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;&lt;/span&gt;      &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_impl_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ch_sex_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;IsDefault&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;())&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;_impl_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ch_sex_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Set&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;GetArenaForAllocation&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;());&lt;/span&gt;
      &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;cp&#34;&gt;#endif &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// PROTOBUF_FORCE_COPY_DEFAULT_STRING
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;      &lt;span class=&#34;c1&#34;&gt;// @@protoc_insertion_point(field_set_allocated:main.TestMessage.TeChild.ch_sex)
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

    &lt;span class=&#34;c1&#34;&gt;// -------------------------------------------------------------------
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;
    &lt;span class=&#34;c1&#34;&gt;// -------------------------------------------------------------------
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;
    &lt;span class=&#34;c1&#34;&gt;// TestMessage
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;
    &lt;span class=&#34;c1&#34;&gt;// string te_name = 1;
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;kr&#34;&gt;inline&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;TestMessage&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;clear_te_name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
      &lt;span class=&#34;n&#34;&gt;_impl_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;te_name_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ClearToEmpty&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;kr&#34;&gt;inline&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;TestMessage&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;te_name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
      &lt;span class=&#34;c1&#34;&gt;// @@protoc_insertion_point(field_get:main.TestMessage.te_name)
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;      &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;_internal_te_name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;template&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;typename&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ArgT0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;typename&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;...&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ArgT&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt;
    &lt;span class=&#34;kr&#34;&gt;inline&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;PROTOBUF_ALWAYS_INLINE&lt;/span&gt;
    &lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;TestMessage&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;set_te_name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ArgT0&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;arg0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ArgT&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;...&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;args&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;

     &lt;span class=&#34;n&#34;&gt;_impl_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;te_name_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Set&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;static_cast&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ArgT0&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&amp;amp;&amp;gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;arg0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;),&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;args&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;...,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;GetArenaForAllocation&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;());&lt;/span&gt;
      &lt;span class=&#34;c1&#34;&gt;// @@protoc_insertion_point(field_set:main.TestMessage.te_name)
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;kr&#34;&gt;inline&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;TestMessage&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;mutable_te_name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
      &lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;_s&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;_internal_mutable_te_name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
      &lt;span class=&#34;c1&#34;&gt;// @@protoc_insertion_point(field_mutable:main.TestMessage.te_name)
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;      &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;_s&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;kr&#34;&gt;inline&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;TestMessage&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_internal_te_name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;_impl_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;te_name_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Get&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;kr&#34;&gt;inline&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;TestMessage&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_internal_set_te_name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;value&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;

      &lt;span class=&#34;n&#34;&gt;_impl_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;te_name_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Set&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;value&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;GetArenaForAllocation&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;());&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;kr&#34;&gt;inline&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;TestMessage&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_internal_mutable_te_name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;

      &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;_impl_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;te_name_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Mutable&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;GetArenaForAllocation&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;());&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;kr&#34;&gt;inline&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;TestMessage&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;release_te_name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
      &lt;span class=&#34;c1&#34;&gt;// @@protoc_insertion_point(field_release:main.TestMessage.te_name)
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;      &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;_impl_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;te_name_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Release&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;kr&#34;&gt;inline&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;TestMessage&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;set_allocated_te_name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;te_name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;te_name&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;nullptr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;

      &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;else&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;

      &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
      &lt;span class=&#34;n&#34;&gt;_impl_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;te_name_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;SetAllocated&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;te_name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;GetArenaForAllocation&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;());&lt;/span&gt;
    &lt;span class=&#34;cp&#34;&gt;#ifdef PROTOBUF_FORCE_COPY_DEFAULT_STRING
&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;&lt;/span&gt;      &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_impl_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;te_name_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;IsDefault&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;())&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;_impl_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;te_name_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Set&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;GetArenaForAllocation&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;());&lt;/span&gt;
      &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;cp&#34;&gt;#endif &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// PROTOBUF_FORCE_COPY_DEFAULT_STRING
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;      &lt;span class=&#34;c1&#34;&gt;// @@protoc_insertion_point(field_set_allocated:main.TestMessage.te_name)
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

    &lt;span class=&#34;c1&#34;&gt;// int32 te_age = 2;
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;kr&#34;&gt;inline&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;TestMessage&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;clear_te_age&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
      &lt;span class=&#34;n&#34;&gt;_impl_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;te_age_&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;kr&#34;&gt;inline&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;int32_t&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;TestMessage&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_internal_te_age&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;_impl_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;te_age_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;kr&#34;&gt;inline&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;int32_t&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;TestMessage&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;te_age&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
      &lt;span class=&#34;c1&#34;&gt;// @@protoc_insertion_point(field_get:main.TestMessage.te_age)
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;      &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;_internal_te_age&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;kr&#34;&gt;inline&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;TestMessage&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_internal_set_te_age&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int32_t&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;value&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;

      &lt;span class=&#34;n&#34;&gt;_impl_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;te_age_&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;value&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;kr&#34;&gt;inline&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;TestMessage&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;set_te_age&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int32_t&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;value&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
      &lt;span class=&#34;n&#34;&gt;_internal_set_te_age&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;value&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
      &lt;span class=&#34;c1&#34;&gt;// @@protoc_insertion_point(field_set:main.TestMessage.te_age)
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

    &lt;span class=&#34;c1&#34;&gt;// int32 te_count = 3;
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;kr&#34;&gt;inline&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;TestMessage&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;clear_te_count&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
      &lt;span class=&#34;n&#34;&gt;_impl_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;te_count_&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;kr&#34;&gt;inline&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;int32_t&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;TestMessage&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_internal_te_count&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;_impl_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;te_count_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;kr&#34;&gt;inline&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;int32_t&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;TestMessage&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;te_count&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
      &lt;span class=&#34;c1&#34;&gt;// @@protoc_insertion_point(field_get:main.TestMessage.te_count)
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;      &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;_internal_te_count&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;kr&#34;&gt;inline&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;TestMessage&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_internal_set_te_count&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int32_t&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;value&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;

      &lt;span class=&#34;n&#34;&gt;_impl_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;te_count_&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;value&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;kr&#34;&gt;inline&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;TestMessage&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;set_te_count&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int32_t&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;value&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
      &lt;span class=&#34;n&#34;&gt;_internal_set_te_count&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;value&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
      &lt;span class=&#34;c1&#34;&gt;// @@protoc_insertion_point(field_set:main.TestMessage.te_count)
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

    &lt;span class=&#34;c1&#34;&gt;// double te_money = 4;
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;kr&#34;&gt;inline&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;TestMessage&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;clear_te_money&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
      &lt;span class=&#34;n&#34;&gt;_impl_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;te_money_&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;kr&#34;&gt;inline&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;double&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;TestMessage&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_internal_te_money&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;_impl_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;te_money_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;kr&#34;&gt;inline&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;double&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;TestMessage&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;te_money&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
      &lt;span class=&#34;c1&#34;&gt;// @@protoc_insertion_point(field_get:main.TestMessage.te_money)
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;      &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;_internal_te_money&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;kr&#34;&gt;inline&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;TestMessage&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_internal_set_te_money&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;double&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;value&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;

      &lt;span class=&#34;n&#34;&gt;_impl_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;te_money_&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;value&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;kr&#34;&gt;inline&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;TestMessage&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;set_te_money&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;double&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;value&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
      &lt;span class=&#34;n&#34;&gt;_internal_set_te_money&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;value&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
      &lt;span class=&#34;c1&#34;&gt;// @@protoc_insertion_point(field_set:main.TestMessage.te_money)
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

    &lt;span class=&#34;c1&#34;&gt;// float te_score = 5;
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;kr&#34;&gt;inline&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;TestMessage&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;clear_te_score&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
      &lt;span class=&#34;n&#34;&gt;_impl_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;te_score_&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;kr&#34;&gt;inline&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;float&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;TestMessage&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_internal_te_score&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;_impl_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;te_score_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;kr&#34;&gt;inline&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;float&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;TestMessage&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;te_score&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
      &lt;span class=&#34;c1&#34;&gt;// @@protoc_insertion_point(field_get:main.TestMessage.te_score)
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;      &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;_internal_te_score&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;kr&#34;&gt;inline&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;TestMessage&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_internal_set_te_score&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;float&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;value&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;

      &lt;span class=&#34;n&#34;&gt;_impl_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;te_score_&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;value&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;kr&#34;&gt;inline&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;TestMessage&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;set_te_score&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;float&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;value&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
      &lt;span class=&#34;n&#34;&gt;_internal_set_te_score&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;value&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
      &lt;span class=&#34;c1&#34;&gt;// @@protoc_insertion_point(field_set:main.TestMessage.te_score)
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

    &lt;span class=&#34;c1&#34;&gt;// bool te_fat = 6;
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;kr&#34;&gt;inline&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;TestMessage&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;clear_te_fat&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
      &lt;span class=&#34;n&#34;&gt;_impl_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;te_fat_&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;false&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;kr&#34;&gt;inline&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;bool&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;TestMessage&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_internal_te_fat&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;_impl_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;te_fat_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;kr&#34;&gt;inline&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;bool&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;TestMessage&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;te_fat&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
      &lt;span class=&#34;c1&#34;&gt;// @@protoc_insertion_point(field_get:main.TestMessage.te_fat)
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;      &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;_internal_te_fat&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;kr&#34;&gt;inline&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;TestMessage&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_internal_set_te_fat&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;bool&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;value&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;

      &lt;span class=&#34;n&#34;&gt;_impl_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;te_fat_&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;value&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;kr&#34;&gt;inline&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;TestMessage&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;set_te_fat&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;bool&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;value&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
      &lt;span class=&#34;n&#34;&gt;_internal_set_te_fat&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;value&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
      &lt;span class=&#34;c1&#34;&gt;// @@protoc_insertion_point(field_set:main.TestMessage.te_fat)
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

    &lt;span class=&#34;c1&#34;&gt;// bytes te_char = 7;
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;kr&#34;&gt;inline&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;TestMessage&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;clear_te_char&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
      &lt;span class=&#34;n&#34;&gt;_impl_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;te_char_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ClearToEmpty&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;kr&#34;&gt;inline&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;TestMessage&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;te_char&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
      &lt;span class=&#34;c1&#34;&gt;// @@protoc_insertion_point(field_get:main.TestMessage.te_char)
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;      &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;_internal_te_char&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;template&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;typename&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ArgT0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;typename&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;...&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ArgT&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt;
    &lt;span class=&#34;kr&#34;&gt;inline&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;PROTOBUF_ALWAYS_INLINE&lt;/span&gt;
    &lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;TestMessage&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;set_te_char&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ArgT0&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;arg0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ArgT&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;...&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;args&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;

     &lt;span class=&#34;n&#34;&gt;_impl_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;te_char_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;SetBytes&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;static_cast&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ArgT0&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&amp;amp;&amp;gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;arg0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;),&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;args&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;...,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;GetArenaForAllocation&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;());&lt;/span&gt;
      &lt;span class=&#34;c1&#34;&gt;// @@protoc_insertion_point(field_set:main.TestMessage.te_char)
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;kr&#34;&gt;inline&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;TestMessage&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;mutable_te_char&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
      &lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;_s&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;_internal_mutable_te_char&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
      &lt;span class=&#34;c1&#34;&gt;// @@protoc_insertion_point(field_mutable:main.TestMessage.te_char)
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;      &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;_s&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;kr&#34;&gt;inline&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;TestMessage&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_internal_te_char&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;_impl_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;te_char_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Get&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;kr&#34;&gt;inline&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;TestMessage&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_internal_set_te_char&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;value&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;

      &lt;span class=&#34;n&#34;&gt;_impl_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;te_char_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Set&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;value&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;GetArenaForAllocation&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;());&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;kr&#34;&gt;inline&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;TestMessage&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_internal_mutable_te_char&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;

      &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;_impl_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;te_char_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Mutable&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;GetArenaForAllocation&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;());&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;kr&#34;&gt;inline&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;TestMessage&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;release_te_char&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
      &lt;span class=&#34;c1&#34;&gt;// @@protoc_insertion_point(field_release:main.TestMessage.te_char)
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;      &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;_impl_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;te_char_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Release&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;kr&#34;&gt;inline&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;TestMessage&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;set_allocated_te_char&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;te_char&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;te_char&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;nullptr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;

      &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;else&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;

      &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
      &lt;span class=&#34;n&#34;&gt;_impl_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;te_char_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;SetAllocated&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;te_char&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;GetArenaForAllocation&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;());&lt;/span&gt;
    &lt;span class=&#34;cp&#34;&gt;#ifdef PROTOBUF_FORCE_COPY_DEFAULT_STRING
&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;&lt;/span&gt;      &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_impl_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;te_char_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;IsDefault&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;())&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;_impl_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;te_char_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Set&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;GetArenaForAllocation&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;());&lt;/span&gt;
      &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;cp&#34;&gt;#endif &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// PROTOBUF_FORCE_COPY_DEFAULT_STRING
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;      &lt;span class=&#34;c1&#34;&gt;// @@protoc_insertion_point(field_set_allocated:main.TestMessage.te_char)
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

    &lt;span class=&#34;c1&#34;&gt;// .main.TestMessage.TeChild childs = 9;
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;kr&#34;&gt;inline&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;bool&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;TestMessage&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_internal_has_childs&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;this&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;internal_default_instance&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;_impl_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;childs_&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;nullptr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;kr&#34;&gt;inline&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;bool&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;TestMessage&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;has_childs&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;_internal_has_childs&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;kr&#34;&gt;inline&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;TestMessage&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;clear_childs&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;GetArenaForAllocation&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;nullptr&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;_impl_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;childs_&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;nullptr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;delete&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;_impl_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;childs_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
      &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
      &lt;span class=&#34;n&#34;&gt;_impl_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;childs_&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;nullptr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;kr&#34;&gt;inline&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;main&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;TestMessage_TeChild&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;TestMessage&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_internal_childs&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;main&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;TestMessage_TeChild&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;p&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;_impl_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;childs_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;p&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;nullptr&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;?&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nl&#34;&gt;p&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;reinterpret_cast&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;main&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;TestMessage_TeChild&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&amp;gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;
          &lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;main&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_TestMessage_TeChild_default_instance_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;kr&#34;&gt;inline&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;main&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;TestMessage_TeChild&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;TestMessage&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;childs&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
      &lt;span class=&#34;c1&#34;&gt;// @@protoc_insertion_point(field_get:main.TestMessage.childs)
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;      &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;_internal_childs&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;kr&#34;&gt;inline&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;TestMessage&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;unsafe_arena_set_allocated_childs&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;
        &lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;main&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;TestMessage_TeChild&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;childs&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;GetArenaForAllocation&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;nullptr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;delete&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;reinterpret_cast&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;PROTOBUF_NAMESPACE_ID&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;MessageLite&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&amp;gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_impl_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;childs_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
      &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
      &lt;span class=&#34;n&#34;&gt;_impl_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;childs_&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;childs&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;childs&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;

      &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;else&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;

      &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
      &lt;span class=&#34;c1&#34;&gt;// @@protoc_insertion_point(field_unsafe_arena_set_allocated:main.TestMessage.childs)
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;kr&#34;&gt;inline&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;main&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;TestMessage_TeChild&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;TestMessage&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;release_childs&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;

      &lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;main&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;TestMessage_TeChild&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;temp&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;_impl_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;childs_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
      &lt;span class=&#34;n&#34;&gt;_impl_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;childs_&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;nullptr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
    &lt;span class=&#34;cp&#34;&gt;#ifdef PROTOBUF_FORCE_COPY_IN_RELEASE
&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;&lt;/span&gt;      &lt;span class=&#34;k&#34;&gt;auto&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;old&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;  &lt;span class=&#34;k&#34;&gt;reinterpret_cast&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;PROTOBUF_NAMESPACE_ID&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;MessageLite&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&amp;gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;temp&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
      &lt;span class=&#34;n&#34;&gt;temp&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;PROTOBUF_NAMESPACE_ID&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;internal&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;DuplicateIfNonNull&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;temp&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;GetArenaForAllocation&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;nullptr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;delete&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;old&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;cp&#34;&gt;#else  &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// PROTOBUF_FORCE_COPY_IN_RELEASE
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;      &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;GetArenaForAllocation&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;nullptr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;temp&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;PROTOBUF_NAMESPACE_ID&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;internal&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;DuplicateIfNonNull&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;temp&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
      &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;cp&#34;&gt;#endif  &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// !PROTOBUF_FORCE_COPY_IN_RELEASE
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;      &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;temp&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;kr&#34;&gt;inline&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;main&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;TestMessage_TeChild&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;TestMessage&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;unsafe_arena_release_childs&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
      &lt;span class=&#34;c1&#34;&gt;// @@protoc_insertion_point(field_release:main.TestMessage.childs)
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;
      &lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;main&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;TestMessage_TeChild&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;temp&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;_impl_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;childs_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
      &lt;span class=&#34;n&#34;&gt;_impl_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;childs_&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;nullptr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;temp&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;kr&#34;&gt;inline&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;main&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;TestMessage_TeChild&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;TestMessage&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_internal_mutable_childs&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;

      &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_impl_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;childs_&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;nullptr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;auto&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;p&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;CreateMaybeMessage&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;main&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;TestMessage_TeChild&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;GetArenaForAllocation&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;());&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;_impl_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;childs_&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;p&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
      &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;_impl_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;childs_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;kr&#34;&gt;inline&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;main&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;TestMessage_TeChild&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;TestMessage&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;mutable_childs&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
      &lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;main&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;TestMessage_TeChild&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;_msg&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;_internal_mutable_childs&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
      &lt;span class=&#34;c1&#34;&gt;// @@protoc_insertion_point(field_mutable:main.TestMessage.childs)
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;      &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;_msg&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;kr&#34;&gt;inline&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;TestMessage&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;set_allocated_childs&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;main&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;TestMessage_TeChild&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;childs&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
      &lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;PROTOBUF_NAMESPACE_ID&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Arena&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;message_arena&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;GetArenaForAllocation&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;message_arena&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;nullptr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;delete&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;_impl_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;childs_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
      &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;childs&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;PROTOBUF_NAMESPACE_ID&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Arena&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;submessage_arena&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;
            &lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;PROTOBUF_NAMESPACE_ID&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Arena&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;InternalGetOwningArena&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;childs&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;message_arena&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;submessage_arena&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
          &lt;span class=&#34;n&#34;&gt;childs&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;PROTOBUF_NAMESPACE_ID&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;internal&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;GetOwnedMessage&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;
              &lt;span class=&#34;n&#34;&gt;message_arena&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;childs&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;submessage_arena&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
        &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

      &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;else&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;

      &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
      &lt;span class=&#34;n&#34;&gt;_impl_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;childs_&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;childs&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
      &lt;span class=&#34;c1&#34;&gt;// @@protoc_insertion_point(field_set_allocated:main.TestMessage.childs)
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

    &lt;span class=&#34;c1&#34;&gt;// map&amp;lt;string, int32&amp;gt; te_map = 10;
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;kr&#34;&gt;inline&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;TestMessage&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_internal_te_map_size&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;_impl_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;te_map_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;size&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;kr&#34;&gt;inline&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;TestMessage&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;te_map_size&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;_internal_te_map_size&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;kr&#34;&gt;inline&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;TestMessage&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;clear_te_map&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
      &lt;span class=&#34;n&#34;&gt;_impl_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;te_map_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Clear&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;kr&#34;&gt;inline&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;PROTOBUF_NAMESPACE_ID&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Map&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;int32_t&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;gt;&amp;amp;&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;TestMessage&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_internal_te_map&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;_impl_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;te_map_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;GetMap&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;kr&#34;&gt;inline&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;PROTOBUF_NAMESPACE_ID&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Map&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;int32_t&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;gt;&amp;amp;&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;TestMessage&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;te_map&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
      &lt;span class=&#34;c1&#34;&gt;// @@protoc_insertion_point(field_map:main.TestMessage.te_map)
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;      &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;_internal_te_map&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;kr&#34;&gt;inline&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;PROTOBUF_NAMESPACE_ID&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Map&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;int32_t&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;gt;*&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;TestMessage&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_internal_mutable_te_map&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;_impl_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;te_map_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;MutableMap&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;kr&#34;&gt;inline&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;PROTOBUF_NAMESPACE_ID&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Map&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;int32_t&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;gt;*&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;TestMessage&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;mutable_te_map&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
      &lt;span class=&#34;c1&#34;&gt;// @@protoc_insertion_point(field_mutable_map:main.TestMessage.te_map)
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;      &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;_internal_mutable_te_map&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

    &lt;span class=&#34;cp&#34;&gt;#ifdef __GNUC__
&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;&lt;/span&gt;      &lt;span class=&#34;cp&#34;&gt;#pragma GCC diagnostic pop
&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;cp&#34;&gt;#endif  &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// __GNUC__
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;c1&#34;&gt;// -------------------------------------------------------------------
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;
    &lt;span class=&#34;c1&#34;&gt;// -------------------------------------------------------------------
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;

    &lt;span class=&#34;c1&#34;&gt;// @@protoc_insertion_point(namespace_scope)
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;  &lt;span class=&#34;c1&#34;&gt;// namespace main
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;PROTOBUF_NAMESPACE_OPEN&lt;/span&gt;

    &lt;span class=&#34;k&#34;&gt;template&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;&amp;gt;&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;is_proto_enum&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;main&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;TestMessage_Status&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;true_type&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{};&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;template&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;&amp;gt;&lt;/span&gt;
    &lt;span class=&#34;kr&#34;&gt;inline&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;EnumDescriptor&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;GetEnumDescriptor&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;main&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;TestMessage_Status&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;main&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;TestMessage_Status_descriptor&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

    &lt;span class=&#34;n&#34;&gt;PROTOBUF_NAMESPACE_CLOSE&lt;/span&gt;

    &lt;span class=&#34;c1&#34;&gt;// @@protoc_insertion_point(global_scope)
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;
    &lt;span class=&#34;cp&#34;&gt;#include&lt;/span&gt; &lt;span class=&#34;cpf&#34;&gt;&amp;lt;google/protobuf/port_undef.inc&amp;gt;&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;cp&#34;&gt;#endif  &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// GOOGLE_PROTOBUF_INCLUDED_GOOGLE_PROTOBUF_INCLUDED_proto3_2eproto
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ç”Ÿæˆpython æ–‡ä»¶å†…å®¹&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;    &lt;span class=&#34;c1&#34;&gt;# -*- coding: utf-8 -*-&lt;/span&gt;
    &lt;span class=&#34;c1&#34;&gt;# Generated by the protocol buffer compiler.  DO NOT EDIT!&lt;/span&gt;
    &lt;span class=&#34;c1&#34;&gt;# source: proto3.proto&lt;/span&gt;
    &lt;span class=&#34;s2&#34;&gt;&amp;#34;&amp;#34;&amp;#34;Generated protocol buffer code.&amp;#34;&amp;#34;&amp;#34;&lt;/span&gt;
    &lt;span class=&#34;kn&#34;&gt;from&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;google.protobuf.internal&lt;/span&gt; &lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;builder&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;as&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;_builder&lt;/span&gt;
    &lt;span class=&#34;kn&#34;&gt;from&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;google.protobuf&lt;/span&gt; &lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;descriptor&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;as&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;_descriptor&lt;/span&gt;
    &lt;span class=&#34;kn&#34;&gt;from&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;google.protobuf&lt;/span&gt; &lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;descriptor_pool&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;as&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;_descriptor_pool&lt;/span&gt;
    &lt;span class=&#34;kn&#34;&gt;from&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;google.protobuf&lt;/span&gt; &lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;symbol_database&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;as&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;_symbol_database&lt;/span&gt;
    &lt;span class=&#34;c1&#34;&gt;# @@protoc_insertion_point(imports)&lt;/span&gt;

    &lt;span class=&#34;n&#34;&gt;_sym_db&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;_symbol_database&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Default&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;




    &lt;span class=&#34;n&#34;&gt;DESCRIPTOR&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;_descriptor_pool&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Default&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;AddSerializedFile&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;sa&#34;&gt;b&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\n\x0c&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;proto3.proto&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\x12\x04&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;main&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\&amp;#34;\xd4\x02\n\x0b&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;TestMessage&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\x12\x0f\n\x07&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;te_name&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\x18\x01&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt; &lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\x01&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\t\x12\x0e\n\x06&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;te_age&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\x18\x02&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt; &lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\x01&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\x05\x12\x10\n\x08&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;te_count&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\x18\x03&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt; &lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\x01&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\x05\x12\x10\n\x08&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;te_money&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\x18\x04&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt; &lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\x01&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\x01\x12\x10\n\x08&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;te_score&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\x18\x05&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt; &lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\x01&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\x02\x12\x0e\n\x06&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;te_fat&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\x18\x06&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt; &lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\x01&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\x08\x12\x0f\n\x07&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;te_char&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\x18\x07&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt; &lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\x01&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\x0c\x12&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\n\x06\x63&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;hilds&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\x18\t&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt; &lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\x01&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\x0b\x32\x19&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;.main.TestMessage.TeChild&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\x12&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\n\x06&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;te_map&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\x18\n&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt; &lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\x03&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\x0b\x32\x1c&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;.main.TestMessage.TeMapEntry&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\x1a&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\n\x07&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;TeChild&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\x12\x0f\n\x07\x63&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;h_name&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\x18\x01&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt; &lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\x01&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\t\x12\x0e\n\x06\x63&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;h_sex&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\x18\x02&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt; &lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\x01&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\t\x1a&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\n\n&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;TeMapEntry&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\x12\x0b\n\x03&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;key&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\x18\x01&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt; &lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\x01&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\t\x12\r\n\x05&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;value&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\x18\x02&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt; &lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\x01&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\x05&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\x02\x38\x01\&amp;#34;\x1a\n\x06&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;Status&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\x12\x06\n\x02&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;OK&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\x10\x00\x12\x08\n\x04\x46\x41&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;IL&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\x10\x01\x62\x06&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;proto3&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;

    &lt;span class=&#34;n&#34;&gt;_builder&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;BuildMessageAndEnumDescriptors&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;DESCRIPTOR&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;globals&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;())&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;_builder&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;BuildTopDescriptorsAndMessages&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;DESCRIPTOR&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;proto3_pb2&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;globals&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;())&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;_descriptor&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_USE_C_DESCRIPTORS&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;False&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;

      &lt;span class=&#34;n&#34;&gt;DESCRIPTOR&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_options&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;None&lt;/span&gt;
      &lt;span class=&#34;n&#34;&gt;_TESTMESSAGE_TEMAPENTRY&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_options&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;None&lt;/span&gt;
      &lt;span class=&#34;n&#34;&gt;_TESTMESSAGE_TEMAPENTRY&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_serialized_options&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;sa&#34;&gt;b&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;8&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\001&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;&lt;/span&gt;
      &lt;span class=&#34;n&#34;&gt;_TESTMESSAGE&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_serialized_start&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;23&lt;/span&gt;
      &lt;span class=&#34;n&#34;&gt;_TESTMESSAGE&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_serialized_end&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;363&lt;/span&gt;
      &lt;span class=&#34;n&#34;&gt;_TESTMESSAGE_TECHILD&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_serialized_start&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;247&lt;/span&gt;
      &lt;span class=&#34;n&#34;&gt;_TESTMESSAGE_TECHILD&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_serialized_end&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;289&lt;/span&gt;
      &lt;span class=&#34;n&#34;&gt;_TESTMESSAGE_TEMAPENTRY&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_serialized_start&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;291&lt;/span&gt;
      &lt;span class=&#34;n&#34;&gt;_TESTMESSAGE_TEMAPENTRY&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_serialized_end&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;335&lt;/span&gt;
      &lt;span class=&#34;n&#34;&gt;_TESTMESSAGE_STATUS&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_serialized_start&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;337&lt;/span&gt;
      &lt;span class=&#34;n&#34;&gt;_TESTMESSAGE_STATUS&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_serialized_end&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;363&lt;/span&gt;
    &lt;span class=&#34;c1&#34;&gt;# @@protoc_insertion_point(module_scope)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h5 id=&#34;service-æµ‹è¯•&#34;&gt;service æµ‹è¯•&lt;/h5&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;proto æ–‡ä»¶å†…å®¹&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-protobuf&#34; data-lang=&#34;protobuf&#34;&gt;    &lt;span class=&#34;n&#34;&gt;syntax&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;proto3&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;// è¯­æ³•å£°æ˜
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;kn&#34;&gt;package&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;main&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;  &lt;span class=&#34;c1&#34;&gt;// åŒ…å£°æ˜
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;kd&#34;&gt;service&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;TestService&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;&lt;/span&gt;        &lt;span class=&#34;c1&#34;&gt;// æµ‹è¯•æ–¹æ³•
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;        &lt;span class=&#34;k&#34;&gt;rpc&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;TestServer&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Request&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;returns&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Response&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;){}&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;c1&#34;&gt;// request è¯·æ±‚ç»“æ„ä½“
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;kd&#34;&gt;message&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;Request&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;&lt;/span&gt;        &lt;span class=&#34;kt&#34;&gt;string&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;te_name&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;c1&#34;&gt;// response å“åº”ç»“æ„ä½“
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;kd&#34;&gt;message&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;Response&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;&lt;/span&gt;        &lt;span class=&#34;kt&#34;&gt;string&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;message&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ç”Ÿæˆgo æ–‡ä»¶å†…å®¹&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;  &lt;span class=&#34;c1&#34;&gt;// Code generated by protoc-gen-go. DO NOT EDIT.
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;  &lt;span class=&#34;c1&#34;&gt;// source: service.proto
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;
  &lt;span class=&#34;kn&#34;&gt;package&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;main&lt;/span&gt;

  &lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;
    &lt;span class=&#34;nx&#34;&gt;fmt&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;fmt&amp;#34;&lt;/span&gt;
    &lt;span class=&#34;nx&#34;&gt;proto&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;github.com/golang/protobuf/proto&amp;#34;&lt;/span&gt;
    &lt;span class=&#34;nx&#34;&gt;math&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;math&amp;#34;&lt;/span&gt;
  &lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;

  &lt;span class=&#34;c1&#34;&gt;// Reference imports to suppress errors if they are not otherwise used.
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;  &lt;span class=&#34;kd&#34;&gt;var&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;_&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;proto&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Marshal&lt;/span&gt;
  &lt;span class=&#34;kd&#34;&gt;var&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;_&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;fmt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Errorf&lt;/span&gt;
  &lt;span class=&#34;kd&#34;&gt;var&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;_&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;math&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Inf&lt;/span&gt;

  &lt;span class=&#34;c1&#34;&gt;// This is a compile-time assertion to ensure that this generated file
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;  &lt;span class=&#34;c1&#34;&gt;// is compatible with the proto package it is being compiled against.
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;  &lt;span class=&#34;c1&#34;&gt;// A compilation error at this line likely means your copy of the
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;  &lt;span class=&#34;c1&#34;&gt;// proto package needs to be updated.
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;  &lt;span class=&#34;kd&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;_&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;proto&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;ProtoPackageIsVersion3&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;// please upgrade the proto package
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;
  &lt;span class=&#34;c1&#34;&gt;// request è¯·æ±‚ç»“æ„ä½“
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;  &lt;span class=&#34;kd&#34;&gt;type&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;Request&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;struct&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;nx&#34;&gt;TeName&lt;/span&gt;               &lt;span class=&#34;kt&#34;&gt;string&lt;/span&gt;   &lt;span class=&#34;s&#34;&gt;`protobuf:&amp;#34;bytes,1,opt,name=te_name,json=teName,proto3&amp;#34; json:&amp;#34;te_name,omitempty&amp;#34;`&lt;/span&gt;
    &lt;span class=&#34;nx&#34;&gt;XXX_NoUnkeyedLiteral&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;struct&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{}&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;`json:&amp;#34;-&amp;#34;`&lt;/span&gt;
    &lt;span class=&#34;nx&#34;&gt;XXX_unrecognized&lt;/span&gt;     &lt;span class=&#34;p&#34;&gt;[]&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;byte&lt;/span&gt;   &lt;span class=&#34;s&#34;&gt;`json:&amp;#34;-&amp;#34;`&lt;/span&gt;
    &lt;span class=&#34;nx&#34;&gt;XXX_sizecache&lt;/span&gt;        &lt;span class=&#34;kt&#34;&gt;int32&lt;/span&gt;    &lt;span class=&#34;s&#34;&gt;`json:&amp;#34;-&amp;#34;`&lt;/span&gt;
  &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

  &lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;m&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Request&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;Reset&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;         &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;m&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;Request&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{}&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
  &lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;m&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Request&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;String&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;string&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;proto&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;CompactTextString&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;m&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
  &lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Request&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;ProtoMessage&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;    &lt;span class=&#34;p&#34;&gt;{}&lt;/span&gt;
  &lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Request&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;Descriptor&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;([]&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;byte&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[]&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;fileDescriptor_a0b84a42fa06f626&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[]&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
  &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

  &lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;m&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Request&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;XXX_Unmarshal&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;b&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[]&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;byte&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;error&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;xxx_messageInfo_Request&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Unmarshal&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;m&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;b&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
  &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
  &lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;m&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Request&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;XXX_Marshal&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;b&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[]&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;byte&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;deterministic&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;bool&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;([]&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;byte&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;error&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;xxx_messageInfo_Request&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Marshal&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;b&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;m&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;deterministic&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
  &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
  &lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;m&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Request&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;XXX_Merge&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;src&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;proto&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Message&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;nx&#34;&gt;xxx_messageInfo_Request&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Merge&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;m&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;src&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
  &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
  &lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;m&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Request&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;XXX_Size&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;xxx_messageInfo_Request&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Size&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;m&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
  &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
  &lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;m&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Request&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;XXX_DiscardUnknown&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;nx&#34;&gt;xxx_messageInfo_Request&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;DiscardUnknown&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;m&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
  &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

  &lt;span class=&#34;kd&#34;&gt;var&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;xxx_messageInfo_Request&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;proto&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;InternalMessageInfo&lt;/span&gt;

  &lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;m&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Request&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;GetTeName&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;string&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;m&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;m&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;TeName&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;
  &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

  &lt;span class=&#34;c1&#34;&gt;// response å“åº”ç»“æ„ä½“
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;  &lt;span class=&#34;kd&#34;&gt;type&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;Response&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;struct&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;nx&#34;&gt;Message&lt;/span&gt;              &lt;span class=&#34;kt&#34;&gt;string&lt;/span&gt;   &lt;span class=&#34;s&#34;&gt;`protobuf:&amp;#34;bytes,1,opt,name=message,proto3&amp;#34; json:&amp;#34;message,omitempty&amp;#34;`&lt;/span&gt;
    &lt;span class=&#34;nx&#34;&gt;XXX_NoUnkeyedLiteral&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;struct&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{}&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;`json:&amp;#34;-&amp;#34;`&lt;/span&gt;
    &lt;span class=&#34;nx&#34;&gt;XXX_unrecognized&lt;/span&gt;     &lt;span class=&#34;p&#34;&gt;[]&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;byte&lt;/span&gt;   &lt;span class=&#34;s&#34;&gt;`json:&amp;#34;-&amp;#34;`&lt;/span&gt;
    &lt;span class=&#34;nx&#34;&gt;XXX_sizecache&lt;/span&gt;        &lt;span class=&#34;kt&#34;&gt;int32&lt;/span&gt;    &lt;span class=&#34;s&#34;&gt;`json:&amp;#34;-&amp;#34;`&lt;/span&gt;
  &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

  &lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;m&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Response&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;Reset&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;         &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;m&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;Response&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{}&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
  &lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;m&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Response&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;String&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;string&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;proto&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;CompactTextString&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;m&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
  &lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Response&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;ProtoMessage&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;    &lt;span class=&#34;p&#34;&gt;{}&lt;/span&gt;
  &lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Response&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;Descriptor&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;([]&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;byte&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[]&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;fileDescriptor_a0b84a42fa06f626&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[]&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
  &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

  &lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;m&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Response&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;XXX_Unmarshal&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;b&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[]&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;byte&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;error&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;xxx_messageInfo_Response&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Unmarshal&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;m&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;b&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
  &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
  &lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;m&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Response&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;XXX_Marshal&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;b&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[]&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;byte&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;deterministic&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;bool&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;([]&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;byte&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;error&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;xxx_messageInfo_Response&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Marshal&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;b&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;m&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;deterministic&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
  &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
  &lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;m&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Response&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;XXX_Merge&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;src&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;proto&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Message&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;nx&#34;&gt;xxx_messageInfo_Response&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Merge&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;m&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;src&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
  &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
  &lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;m&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Response&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;XXX_Size&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;xxx_messageInfo_Response&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Size&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;m&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
  &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
  &lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;m&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Response&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;XXX_DiscardUnknown&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;nx&#34;&gt;xxx_messageInfo_Response&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;DiscardUnknown&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;m&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
  &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

  &lt;span class=&#34;kd&#34;&gt;var&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;xxx_messageInfo_Response&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;proto&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;InternalMessageInfo&lt;/span&gt;

  &lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;m&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Response&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;GetMessage&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;string&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;m&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;m&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Message&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;
  &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

  &lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;init&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;nx&#34;&gt;proto&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;RegisterType&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;((&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Request&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)(&lt;/span&gt;&lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;),&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;main.Request&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    &lt;span class=&#34;nx&#34;&gt;proto&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;RegisterType&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;((&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Response&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)(&lt;/span&gt;&lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;),&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;main.Response&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
  &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

  &lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;init&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;proto&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;RegisterFile&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;service.proto&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;fileDescriptor_a0b84a42fa06f626&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

  &lt;span class=&#34;kd&#34;&gt;var&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;fileDescriptor_a0b84a42fa06f626&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[]&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;byte&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;c1&#34;&gt;// 147 bytes of a gzipped FileDescriptorProto
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;mh&#34;&gt;0x1f&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x8b&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x08&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x00&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x00&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x00&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x00&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x00&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x02&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0xff&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0xe2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0xe2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x2d&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x4e&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x2d&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x2a&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
    &lt;span class=&#34;mh&#34;&gt;0xcb&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x4c&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x4e&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0xd5&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x2b&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x28&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0xca&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x2f&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0xc9&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x17&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x62&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0xc9&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x4d&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0xcc&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0xcc&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x53&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
    &lt;span class=&#34;mh&#34;&gt;0x52&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0xe2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x62&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x0f&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x4a&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x2d&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x2c&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x4d&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x2d&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x2e&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x11&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x12&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0xe7&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x62&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x2f&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x49&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
    &lt;span class=&#34;mh&#34;&gt;0x8d&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0xcf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x4b&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0xcc&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x4d&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x95&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x60&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x54&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x60&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0xd4&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0xe0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x0c&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x62&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x2b&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x49&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0xf5&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
    &lt;span class=&#34;mh&#34;&gt;0x4b&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0xcc&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x4d&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x55&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x52&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0xe1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0xe2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x08&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x4a&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x2d&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x2e&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0xc8&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0xcf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x2b&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x4e&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x15&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
    &lt;span class=&#34;mh&#34;&gt;0x92&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0xe0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x62&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0xcf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x4d&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x2d&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x2e&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x4e&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x4c&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x87&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x29&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x82&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x71&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x8d&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x6c&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0xb8&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
    &lt;span class=&#34;mh&#34;&gt;0xb8&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x43&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x52&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x8b&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x4b&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x82&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x21&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x96&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x08&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0xe9&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x72&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x71&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0xc1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0xb8&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0xa9&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x45&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
    &lt;span class=&#34;mh&#34;&gt;0x42&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0xbc&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x7a&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x20&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0xdb&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0xf4&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0xa0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x56&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x49&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0xf1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0xc1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0xb8&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x10&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x53&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x95&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x18&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
    &lt;span class=&#34;mh&#34;&gt;0x92&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0xd8&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0xc0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x8e&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x32&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x06&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x04&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x00&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x00&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0xff&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0xff&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0xc6&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x10&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x76&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x3d&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0xa5&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
    &lt;span class=&#34;mh&#34;&gt;0x00&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x00&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x00&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
  &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ç”ŸæˆC++ æ–‡ä»¶å†…å®¹&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-c++&#34; data-lang=&#34;c++&#34;&gt;    &lt;span class=&#34;c1&#34;&gt;// Generated by the protocol buffer compiler.  DO NOT EDIT!
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;c1&#34;&gt;// source: service.proto
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;
    &lt;span class=&#34;cp&#34;&gt;#ifndef GOOGLE_PROTOBUF_INCLUDED_service_2eproto
&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;cp&#34;&gt;#define GOOGLE_PROTOBUF_INCLUDED_service_2eproto
&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;&lt;/span&gt;
    &lt;span class=&#34;cp&#34;&gt;#include&lt;/span&gt; &lt;span class=&#34;cpf&#34;&gt;&amp;lt;limits&amp;gt;&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;cp&#34;&gt;#include&lt;/span&gt; &lt;span class=&#34;cpf&#34;&gt;&amp;lt;string&amp;gt;&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;&lt;/span&gt;
    &lt;span class=&#34;cp&#34;&gt;#include&lt;/span&gt; &lt;span class=&#34;cpf&#34;&gt;&amp;lt;google/protobuf/port_def.inc&amp;gt;&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;cp&#34;&gt;#if PROTOBUF_VERSION &amp;lt; 3021000
&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;cp&#34;&gt;#error This file was generated by a newer version of protoc which is
&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;cp&#34;&gt;#error incompatible with your Protocol Buffer headers. Please update
&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;cp&#34;&gt;#error your headers.
&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;cp&#34;&gt;#endif
&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;cp&#34;&gt;#if 3021005 &amp;lt; PROTOBUF_MIN_PROTOC_VERSION
&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;cp&#34;&gt;#error This file was generated by an older version of protoc which is
&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;cp&#34;&gt;#error incompatible with your Protocol Buffer headers. Please
&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;cp&#34;&gt;#error regenerate this file with a newer version of protoc.
&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;cp&#34;&gt;#endif
&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;&lt;/span&gt;
    &lt;span class=&#34;cp&#34;&gt;#include&lt;/span&gt; &lt;span class=&#34;cpf&#34;&gt;&amp;lt;google/protobuf/port_undef.inc&amp;gt;&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;cp&#34;&gt;#include&lt;/span&gt; &lt;span class=&#34;cpf&#34;&gt;&amp;lt;google/protobuf/io/coded_stream.h&amp;gt;&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;cp&#34;&gt;#include&lt;/span&gt; &lt;span class=&#34;cpf&#34;&gt;&amp;lt;google/protobuf/arena.h&amp;gt;&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;cp&#34;&gt;#include&lt;/span&gt; &lt;span class=&#34;cpf&#34;&gt;&amp;lt;google/protobuf/arenastring.h&amp;gt;&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;cp&#34;&gt;#include&lt;/span&gt; &lt;span class=&#34;cpf&#34;&gt;&amp;lt;google/protobuf/generated_message_util.h&amp;gt;&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;cp&#34;&gt;#include&lt;/span&gt; &lt;span class=&#34;cpf&#34;&gt;&amp;lt;google/protobuf/metadata_lite.h&amp;gt;&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;cp&#34;&gt;#include&lt;/span&gt; &lt;span class=&#34;cpf&#34;&gt;&amp;lt;google/protobuf/generated_message_reflection.h&amp;gt;&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;cp&#34;&gt;#include&lt;/span&gt; &lt;span class=&#34;cpf&#34;&gt;&amp;lt;google/protobuf/message.h&amp;gt;&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;cp&#34;&gt;#include&lt;/span&gt; &lt;span class=&#34;cpf&#34;&gt;&amp;lt;google/protobuf/repeated_field.h&amp;gt;  // IWYU pragma: export&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;cp&#34;&gt;#include&lt;/span&gt; &lt;span class=&#34;cpf&#34;&gt;&amp;lt;google/protobuf/extension_set.h&amp;gt;  // IWYU pragma: export&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;cp&#34;&gt;#include&lt;/span&gt; &lt;span class=&#34;cpf&#34;&gt;&amp;lt;google/protobuf/unknown_field_set.h&amp;gt;&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;c1&#34;&gt;// @@protoc_insertion_point(includes)
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;cp&#34;&gt;#include&lt;/span&gt; &lt;span class=&#34;cpf&#34;&gt;&amp;lt;google/protobuf/port_def.inc&amp;gt;&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;cp&#34;&gt;#define PROTOBUF_INTERNAL_EXPORT_service_2eproto
&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;n&#34;&gt;PROTOBUF_NAMESPACE_OPEN&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;namespace&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;internal&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;class&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;AnyMetadata&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;  &lt;span class=&#34;c1&#34;&gt;// namespace internal
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;n&#34;&gt;PROTOBUF_NAMESPACE_CLOSE&lt;/span&gt;

    &lt;span class=&#34;c1&#34;&gt;// Internal implementation detail -- do not use these members.
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;TableStruct_service_2eproto&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;static&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;uint32_t&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;offsets&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[];&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;};&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;extern&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;PROTOBUF_NAMESPACE_ID&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;internal&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;DescriptorTable&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;descriptor_table_service_2eproto&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;namespace&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;main&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;class&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;Request&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;RequestDefaultTypeInternal&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;extern&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;RequestDefaultTypeInternal&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;_Request_default_instance_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;class&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;Response&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;ResponseDefaultTypeInternal&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;extern&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ResponseDefaultTypeInternal&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;_Response_default_instance_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;  &lt;span class=&#34;c1&#34;&gt;// namespace main
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;n&#34;&gt;PROTOBUF_NAMESPACE_OPEN&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;template&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&amp;gt;&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;main&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Request&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Arena&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;CreateMaybeMessage&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;main&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Request&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Arena&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;template&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&amp;gt;&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;main&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Response&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Arena&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;CreateMaybeMessage&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;main&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Response&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Arena&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;PROTOBUF_NAMESPACE_CLOSE&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;namespace&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;main&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;

    &lt;span class=&#34;c1&#34;&gt;// ===================================================================
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;class&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;Request&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;final&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;public&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;PROTOBUF_NAMESPACE_ID&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Message&lt;/span&gt; &lt;span class=&#34;cm&#34;&gt;/* @@protoc_insertion_point(class_definition:main.Request) */&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
     &lt;span class=&#34;k&#34;&gt;public&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;
      &lt;span class=&#34;kr&#34;&gt;inline&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Request&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Request&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;nullptr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{}&lt;/span&gt;
      &lt;span class=&#34;o&#34;&gt;~&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Request&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;override&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;explicit&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;PROTOBUF_CONSTEXPR&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;Request&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;PROTOBUF_NAMESPACE_ID&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;internal&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ConstantInitialized&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;

      &lt;span class=&#34;n&#34;&gt;Request&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Request&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;from&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
      &lt;span class=&#34;n&#34;&gt;Request&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Request&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;from&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;noexcept&lt;/span&gt;
        &lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Request&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;this&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;move&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;from&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
      &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

      &lt;span class=&#34;kr&#34;&gt;inline&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Request&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;operator&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Request&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;from&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;CopyFrom&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;from&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;this&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
      &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
      &lt;span class=&#34;kr&#34;&gt;inline&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Request&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;operator&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Request&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;from&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;noexcept&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;this&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;from&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;this&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;GetOwningArena&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;from&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;GetOwningArena&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
      &lt;span class=&#34;cp&#34;&gt;#ifdef PROTOBUF_FORCE_COPY_IN_MOVE
&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;&lt;/span&gt;            &lt;span class=&#34;o&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;GetOwningArena&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;nullptr&lt;/span&gt;
      &lt;span class=&#34;cp&#34;&gt;#endif  &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// !PROTOBUF_FORCE_COPY_IN_MOVE
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;        &lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
          &lt;span class=&#34;n&#34;&gt;InternalSwap&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;from&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
        &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;else&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
          &lt;span class=&#34;n&#34;&gt;CopyFrom&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;from&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
        &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;this&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
      &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

      &lt;span class=&#34;k&#34;&gt;static&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;PROTOBUF_NAMESPACE_ID&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Descriptor&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;descriptor&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;GetDescriptor&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
      &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;static&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;PROTOBUF_NAMESPACE_ID&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Descriptor&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;GetDescriptor&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;default_instance&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;().&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;GetMetadata&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;().&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;descriptor&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
      &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;static&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;PROTOBUF_NAMESPACE_ID&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Reflection&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;GetReflection&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;default_instance&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;().&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;GetMetadata&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;().&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;reflection&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
      &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;static&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Request&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;default_instance&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;internal_default_instance&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
      &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;static&lt;/span&gt; &lt;span class=&#34;kr&#34;&gt;inline&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Request&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;internal_default_instance&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;reinterpret_cast&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Request&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&amp;gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;
                   &lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_Request_default_instance_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
      &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;static&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;constexpr&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;kIndexInFileMessages&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;
        &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;

      &lt;span class=&#34;k&#34;&gt;friend&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;swap&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Request&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;a&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Request&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;b&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;a&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Swap&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;b&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
      &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
      &lt;span class=&#34;kr&#34;&gt;inline&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;Swap&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Request&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;other&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;other&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;this&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
      &lt;span class=&#34;cp&#34;&gt;#ifdef PROTOBUF_FORCE_COPY_IN_SWAP
&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;&lt;/span&gt;        &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;GetOwningArena&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;nullptr&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt;
            &lt;span class=&#34;n&#34;&gt;GetOwningArena&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;other&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;GetOwningArena&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;())&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
       &lt;span class=&#34;cp&#34;&gt;#else  &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// PROTOBUF_FORCE_COPY_IN_SWAP
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;        &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;GetOwningArena&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;other&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;GetOwningArena&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;())&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
      &lt;span class=&#34;cp&#34;&gt;#endif  &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// !PROTOBUF_FORCE_COPY_IN_SWAP
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;          &lt;span class=&#34;n&#34;&gt;InternalSwap&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;other&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
        &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;else&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
          &lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;PROTOBUF_NAMESPACE_ID&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;internal&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;GenericSwap&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;this&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;other&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
        &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
      &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
      &lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;UnsafeArenaSwap&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Request&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;other&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;other&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;this&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;GOOGLE_DCHECK&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;GetOwningArena&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;other&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;GetOwningArena&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;());&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;InternalSwap&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;other&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
      &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

      &lt;span class=&#34;c1&#34;&gt;// implements Message ----------------------------------------------
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;
      &lt;span class=&#34;n&#34;&gt;Request&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;New&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;PROTOBUF_NAMESPACE_ID&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Arena&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;arena&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;nullptr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;final&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;CreateMaybeMessage&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Request&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;arena&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
      &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;using&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;PROTOBUF_NAMESPACE_ID&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Message&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;CopyFrom&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
      &lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;CopyFrom&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Request&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;from&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;using&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;PROTOBUF_NAMESPACE_ID&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Message&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;MergeFrom&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
      &lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;MergeFrom&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Request&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;from&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;Request&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;MergeImpl&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;this&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;from&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
      &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;private&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;static&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;MergeImpl&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;PROTOBUF_NAMESPACE_ID&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Message&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;to_msg&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;PROTOBUF_NAMESPACE_ID&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Message&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;from_msg&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;public&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;
      &lt;span class=&#34;n&#34;&gt;PROTOBUF_ATTRIBUTE_REINITIALIZES&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Clear&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;final&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
      &lt;span class=&#34;kt&#34;&gt;bool&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;IsInitialized&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;final&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;

      &lt;span class=&#34;n&#34;&gt;size_t&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ByteSizeLong&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;final&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;char&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;_InternalParse&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;char&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ptr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;PROTOBUF_NAMESPACE_ID&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;internal&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ParseContext&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ctx&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;final&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
      &lt;span class=&#34;kt&#34;&gt;uint8_t&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;_InternalSerialize&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;
          &lt;span class=&#34;kt&#34;&gt;uint8_t&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;target&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;PROTOBUF_NAMESPACE_ID&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;io&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;EpsCopyOutputStream&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;stream&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;final&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
      &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;GetCachedSize&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;final&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;_impl_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_cached_size_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Get&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

      &lt;span class=&#34;k&#34;&gt;private&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;
      &lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;SharedCtor&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;PROTOBUF_NAMESPACE_ID&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Arena&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;arena&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;bool&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;is_message_owned&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
      &lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;SharedDtor&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
      &lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;SetCachedSize&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;size&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;final&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
      &lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;InternalSwap&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Request&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;other&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;

      &lt;span class=&#34;k&#34;&gt;private&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;friend&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;class&lt;/span&gt; &lt;span class=&#34;err&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;PROTOBUF_NAMESPACE_ID&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;internal&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;AnyMetadata&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;static&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;PROTOBUF_NAMESPACE_ID&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;StringPiece&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;FullMessageName&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;main.Request&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
      &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;protected&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;explicit&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Request&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;PROTOBUF_NAMESPACE_ID&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Arena&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;arena&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
                           &lt;span class=&#34;kt&#34;&gt;bool&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;is_message_owned&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;false&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;public&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;

      &lt;span class=&#34;k&#34;&gt;static&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ClassData&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;_class_data_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;PROTOBUF_NAMESPACE_ID&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Message&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ClassData&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;GetClassData&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;final&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;

      &lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;PROTOBUF_NAMESPACE_ID&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Metadata&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;GetMetadata&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;final&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;

      &lt;span class=&#34;c1&#34;&gt;// nested types ----------------------------------------------------
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;
      &lt;span class=&#34;c1&#34;&gt;// accessors -------------------------------------------------------
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;enum&lt;/span&gt; &lt;span class=&#34;err&#34;&gt;: &lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;kTeNameFieldNumber&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
      &lt;span class=&#34;p&#34;&gt;};&lt;/span&gt;
      &lt;span class=&#34;c1&#34;&gt;// string te_name = 1;
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;      &lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;clear_te_name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;te_name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;template&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;typename&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ArgT0&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;typename&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;...&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ArgT&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt;
      &lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;set_te_name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ArgT0&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;arg0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ArgT&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;...&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;args&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
      &lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;mutable_te_name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
      &lt;span class=&#34;n&#34;&gt;PROTOBUF_NODISCARD&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;release_te_name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
      &lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;set_allocated_te_name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;te_name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;private&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;_internal_te_name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
      &lt;span class=&#34;kr&#34;&gt;inline&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;PROTOBUF_ALWAYS_INLINE&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;_internal_set_te_name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;value&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
      &lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;_internal_mutable_te_name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;public&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;

      &lt;span class=&#34;c1&#34;&gt;// @@protoc_insertion_point(class_scope:main.Request)
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;     &lt;span class=&#34;k&#34;&gt;private&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;class&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;_Internal&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;

      &lt;span class=&#34;k&#34;&gt;template&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;typename&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;T&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;friend&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;class&lt;/span&gt; &lt;span class=&#34;err&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;PROTOBUF_NAMESPACE_ID&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Arena&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;InternalHelper&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;typedef&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;InternalArenaConstructable_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;typedef&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;DestructorSkippable_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;Impl_&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;PROTOBUF_NAMESPACE_ID&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;internal&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ArenaStringPtr&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;te_name_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;mutable&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;PROTOBUF_NAMESPACE_ID&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;internal&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;CachedSize&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;_cached_size_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
      &lt;span class=&#34;p&#34;&gt;};&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;union&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Impl_&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;_impl_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;};&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;friend&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt; &lt;span class=&#34;err&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;TableStruct_service_2eproto&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;};&lt;/span&gt;
    &lt;span class=&#34;c1&#34;&gt;// -------------------------------------------------------------------
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;class&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;Response&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;final&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;public&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;PROTOBUF_NAMESPACE_ID&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Message&lt;/span&gt; &lt;span class=&#34;cm&#34;&gt;/* @@protoc_insertion_point(class_definition:main.Response) */&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
     &lt;span class=&#34;k&#34;&gt;public&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;
      &lt;span class=&#34;kr&#34;&gt;inline&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Response&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Response&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;nullptr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{}&lt;/span&gt;
      &lt;span class=&#34;o&#34;&gt;~&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Response&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;override&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;explicit&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;PROTOBUF_CONSTEXPR&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;Response&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;PROTOBUF_NAMESPACE_ID&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;internal&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ConstantInitialized&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;

      &lt;span class=&#34;n&#34;&gt;Response&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Response&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;from&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
      &lt;span class=&#34;n&#34;&gt;Response&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Response&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;from&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;noexcept&lt;/span&gt;
        &lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Response&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;this&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;move&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;from&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
      &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

      &lt;span class=&#34;kr&#34;&gt;inline&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Response&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;operator&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Response&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;from&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;CopyFrom&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;from&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;this&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
      &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
      &lt;span class=&#34;kr&#34;&gt;inline&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Response&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;operator&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Response&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;from&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;noexcept&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;this&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;from&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;this&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;GetOwningArena&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;from&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;GetOwningArena&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
      &lt;span class=&#34;cp&#34;&gt;#ifdef PROTOBUF_FORCE_COPY_IN_MOVE
&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;&lt;/span&gt;            &lt;span class=&#34;o&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;GetOwningArena&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;nullptr&lt;/span&gt;
      &lt;span class=&#34;cp&#34;&gt;#endif  &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// !PROTOBUF_FORCE_COPY_IN_MOVE
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;        &lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
          &lt;span class=&#34;n&#34;&gt;InternalSwap&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;from&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
        &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;else&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
          &lt;span class=&#34;n&#34;&gt;CopyFrom&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;from&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
        &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;this&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
      &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

      &lt;span class=&#34;k&#34;&gt;static&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;PROTOBUF_NAMESPACE_ID&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Descriptor&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;descriptor&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;GetDescriptor&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
      &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;static&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;PROTOBUF_NAMESPACE_ID&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Descriptor&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;GetDescriptor&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;default_instance&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;().&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;GetMetadata&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;().&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;descriptor&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
      &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;static&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;PROTOBUF_NAMESPACE_ID&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Reflection&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;GetReflection&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;default_instance&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;().&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;GetMetadata&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;().&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;reflection&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
      &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;static&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Response&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;default_instance&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;internal_default_instance&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
      &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;static&lt;/span&gt; &lt;span class=&#34;kr&#34;&gt;inline&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Response&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;internal_default_instance&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;reinterpret_cast&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Response&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&amp;gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;
                   &lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_Response_default_instance_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
      &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;static&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;constexpr&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;kIndexInFileMessages&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;
        &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;

      &lt;span class=&#34;k&#34;&gt;friend&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;swap&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Response&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;a&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Response&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;b&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;a&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Swap&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;b&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
      &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
      &lt;span class=&#34;kr&#34;&gt;inline&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;Swap&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Response&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;other&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;other&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;this&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
      &lt;span class=&#34;cp&#34;&gt;#ifdef PROTOBUF_FORCE_COPY_IN_SWAP
&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;&lt;/span&gt;        &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;GetOwningArena&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;nullptr&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt;
            &lt;span class=&#34;n&#34;&gt;GetOwningArena&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;other&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;GetOwningArena&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;())&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
       &lt;span class=&#34;cp&#34;&gt;#else  &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// PROTOBUF_FORCE_COPY_IN_SWAP
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;        &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;GetOwningArena&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;other&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;GetOwningArena&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;())&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
      &lt;span class=&#34;cp&#34;&gt;#endif  &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// !PROTOBUF_FORCE_COPY_IN_SWAP
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;          &lt;span class=&#34;n&#34;&gt;InternalSwap&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;other&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
        &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;else&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
          &lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;PROTOBUF_NAMESPACE_ID&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;internal&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;GenericSwap&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;this&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;other&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
        &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
      &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
      &lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;UnsafeArenaSwap&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Response&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;other&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;other&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;this&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;GOOGLE_DCHECK&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;GetOwningArena&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;other&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;GetOwningArena&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;());&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;InternalSwap&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;other&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
      &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

      &lt;span class=&#34;c1&#34;&gt;// implements Message ----------------------------------------------
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;
      &lt;span class=&#34;n&#34;&gt;Response&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;New&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;PROTOBUF_NAMESPACE_ID&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Arena&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;arena&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;nullptr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;final&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;CreateMaybeMessage&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Response&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;arena&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
      &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;using&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;PROTOBUF_NAMESPACE_ID&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Message&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;CopyFrom&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
      &lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;CopyFrom&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Response&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;from&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;using&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;PROTOBUF_NAMESPACE_ID&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Message&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;MergeFrom&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
      &lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;MergeFrom&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Response&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;from&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;Response&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;MergeImpl&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;this&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;from&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
      &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;private&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;static&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;MergeImpl&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;PROTOBUF_NAMESPACE_ID&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Message&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;to_msg&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;PROTOBUF_NAMESPACE_ID&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Message&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;from_msg&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;public&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;
      &lt;span class=&#34;n&#34;&gt;PROTOBUF_ATTRIBUTE_REINITIALIZES&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Clear&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;final&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
      &lt;span class=&#34;kt&#34;&gt;bool&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;IsInitialized&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;final&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;

      &lt;span class=&#34;n&#34;&gt;size_t&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ByteSizeLong&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;final&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;char&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;_InternalParse&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;char&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ptr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;PROTOBUF_NAMESPACE_ID&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;internal&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ParseContext&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ctx&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;final&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
      &lt;span class=&#34;kt&#34;&gt;uint8_t&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;_InternalSerialize&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;
          &lt;span class=&#34;kt&#34;&gt;uint8_t&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;target&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;PROTOBUF_NAMESPACE_ID&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;io&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;EpsCopyOutputStream&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;stream&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;final&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
      &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;GetCachedSize&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;final&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;_impl_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_cached_size_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Get&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

      &lt;span class=&#34;k&#34;&gt;private&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;
      &lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;SharedCtor&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;PROTOBUF_NAMESPACE_ID&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Arena&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;arena&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;bool&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;is_message_owned&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
      &lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;SharedDtor&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
      &lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;SetCachedSize&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;size&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;final&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
      &lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;InternalSwap&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Response&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;other&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;

      &lt;span class=&#34;k&#34;&gt;private&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;friend&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;class&lt;/span&gt; &lt;span class=&#34;err&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;PROTOBUF_NAMESPACE_ID&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;internal&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;AnyMetadata&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;static&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;PROTOBUF_NAMESPACE_ID&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;StringPiece&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;FullMessageName&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;main.Response&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
      &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;protected&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;explicit&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Response&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;PROTOBUF_NAMESPACE_ID&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Arena&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;arena&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
                           &lt;span class=&#34;kt&#34;&gt;bool&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;is_message_owned&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;false&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;public&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;

      &lt;span class=&#34;k&#34;&gt;static&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ClassData&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;_class_data_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;PROTOBUF_NAMESPACE_ID&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Message&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ClassData&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;GetClassData&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;final&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;

      &lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;PROTOBUF_NAMESPACE_ID&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Metadata&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;GetMetadata&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;final&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;

      &lt;span class=&#34;c1&#34;&gt;// nested types ----------------------------------------------------
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;
      &lt;span class=&#34;c1&#34;&gt;// accessors -------------------------------------------------------
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;enum&lt;/span&gt; &lt;span class=&#34;err&#34;&gt;: &lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;kMessageFieldNumber&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
      &lt;span class=&#34;p&#34;&gt;};&lt;/span&gt;
      &lt;span class=&#34;c1&#34;&gt;// string message = 1;
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;      &lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;clear_message&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;message&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;template&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;typename&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ArgT0&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;typename&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;...&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ArgT&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt;
      &lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;set_message&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ArgT0&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;arg0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ArgT&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;...&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;args&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
      &lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;mutable_message&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
      &lt;span class=&#34;n&#34;&gt;PROTOBUF_NODISCARD&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;release_message&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
      &lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;set_allocated_message&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;message&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;private&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;_internal_message&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
      &lt;span class=&#34;kr&#34;&gt;inline&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;PROTOBUF_ALWAYS_INLINE&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;_internal_set_message&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;value&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
      &lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;_internal_mutable_message&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;public&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;

      &lt;span class=&#34;c1&#34;&gt;// @@protoc_insertion_point(class_scope:main.Response)
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;     &lt;span class=&#34;k&#34;&gt;private&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;class&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;_Internal&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;

      &lt;span class=&#34;k&#34;&gt;template&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;typename&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;T&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;friend&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;class&lt;/span&gt; &lt;span class=&#34;err&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;PROTOBUF_NAMESPACE_ID&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Arena&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;InternalHelper&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;typedef&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;InternalArenaConstructable_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;typedef&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;DestructorSkippable_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;Impl_&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;PROTOBUF_NAMESPACE_ID&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;internal&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ArenaStringPtr&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;message_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;mutable&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;PROTOBUF_NAMESPACE_ID&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;internal&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;CachedSize&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;_cached_size_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
      &lt;span class=&#34;p&#34;&gt;};&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;union&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Impl_&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;_impl_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;};&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;friend&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt; &lt;span class=&#34;err&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;TableStruct_service_2eproto&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;};&lt;/span&gt;
    &lt;span class=&#34;c1&#34;&gt;// ===================================================================
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;

    &lt;span class=&#34;c1&#34;&gt;// ===================================================================
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;
    &lt;span class=&#34;cp&#34;&gt;#ifdef __GNUC__
&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;&lt;/span&gt;      &lt;span class=&#34;cp&#34;&gt;#pragma GCC diagnostic push
&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;&lt;/span&gt;      &lt;span class=&#34;cp&#34;&gt;#pragma GCC diagnostic ignored &amp;#34;-Wstrict-aliasing&amp;#34;
&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;cp&#34;&gt;#endif  &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// __GNUC__
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;c1&#34;&gt;// Request
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;
    &lt;span class=&#34;c1&#34;&gt;// string te_name = 1;
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;kr&#34;&gt;inline&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Request&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;clear_te_name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
      &lt;span class=&#34;n&#34;&gt;_impl_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;te_name_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ClearToEmpty&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;kr&#34;&gt;inline&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Request&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;te_name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
      &lt;span class=&#34;c1&#34;&gt;// @@protoc_insertion_point(field_get:main.Request.te_name)
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;      &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;_internal_te_name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;template&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;typename&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ArgT0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;typename&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;...&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ArgT&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt;
    &lt;span class=&#34;kr&#34;&gt;inline&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;PROTOBUF_ALWAYS_INLINE&lt;/span&gt;
    &lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Request&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;set_te_name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ArgT0&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;arg0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ArgT&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;...&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;args&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;

     &lt;span class=&#34;n&#34;&gt;_impl_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;te_name_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Set&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;static_cast&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ArgT0&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&amp;amp;&amp;gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;arg0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;),&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;args&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;...,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;GetArenaForAllocation&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;());&lt;/span&gt;
      &lt;span class=&#34;c1&#34;&gt;// @@protoc_insertion_point(field_set:main.Request.te_name)
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;kr&#34;&gt;inline&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Request&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;mutable_te_name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
      &lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;_s&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;_internal_mutable_te_name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
      &lt;span class=&#34;c1&#34;&gt;// @@protoc_insertion_point(field_mutable:main.Request.te_name)
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;      &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;_s&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;kr&#34;&gt;inline&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Request&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_internal_te_name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;_impl_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;te_name_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Get&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;kr&#34;&gt;inline&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Request&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_internal_set_te_name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;value&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;

      &lt;span class=&#34;n&#34;&gt;_impl_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;te_name_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Set&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;value&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;GetArenaForAllocation&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;());&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;kr&#34;&gt;inline&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Request&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_internal_mutable_te_name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;

      &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;_impl_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;te_name_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Mutable&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;GetArenaForAllocation&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;());&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;kr&#34;&gt;inline&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Request&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;release_te_name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
      &lt;span class=&#34;c1&#34;&gt;// @@protoc_insertion_point(field_release:main.Request.te_name)
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;      &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;_impl_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;te_name_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Release&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;kr&#34;&gt;inline&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Request&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;set_allocated_te_name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;te_name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;te_name&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;nullptr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;

      &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;else&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;

      &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
      &lt;span class=&#34;n&#34;&gt;_impl_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;te_name_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;SetAllocated&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;te_name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;GetArenaForAllocation&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;());&lt;/span&gt;
    &lt;span class=&#34;cp&#34;&gt;#ifdef PROTOBUF_FORCE_COPY_DEFAULT_STRING
&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;&lt;/span&gt;      &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_impl_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;te_name_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;IsDefault&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;())&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;_impl_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;te_name_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Set&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;GetArenaForAllocation&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;());&lt;/span&gt;
      &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;cp&#34;&gt;#endif &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// PROTOBUF_FORCE_COPY_DEFAULT_STRING
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;      &lt;span class=&#34;c1&#34;&gt;// @@protoc_insertion_point(field_set_allocated:main.Request.te_name)
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

    &lt;span class=&#34;c1&#34;&gt;// -------------------------------------------------------------------
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;
    &lt;span class=&#34;c1&#34;&gt;// Response
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;
    &lt;span class=&#34;c1&#34;&gt;// string message = 1;
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;kr&#34;&gt;inline&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Response&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;clear_message&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
      &lt;span class=&#34;n&#34;&gt;_impl_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;message_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ClearToEmpty&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;kr&#34;&gt;inline&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Response&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;message&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
      &lt;span class=&#34;c1&#34;&gt;// @@protoc_insertion_point(field_get:main.Response.message)
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;      &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;_internal_message&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;template&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;typename&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ArgT0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;typename&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;...&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ArgT&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt;
    &lt;span class=&#34;kr&#34;&gt;inline&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;PROTOBUF_ALWAYS_INLINE&lt;/span&gt;
    &lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Response&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;set_message&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ArgT0&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;arg0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ArgT&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;...&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;args&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;

     &lt;span class=&#34;n&#34;&gt;_impl_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;message_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Set&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;static_cast&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ArgT0&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&amp;amp;&amp;gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;arg0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;),&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;args&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;...,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;GetArenaForAllocation&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;());&lt;/span&gt;
      &lt;span class=&#34;c1&#34;&gt;// @@protoc_insertion_point(field_set:main.Response.message)
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;kr&#34;&gt;inline&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Response&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;mutable_message&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
      &lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;_s&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;_internal_mutable_message&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
      &lt;span class=&#34;c1&#34;&gt;// @@protoc_insertion_point(field_mutable:main.Response.message)
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;      &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;_s&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;kr&#34;&gt;inline&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Response&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_internal_message&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;_impl_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;message_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Get&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;kr&#34;&gt;inline&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Response&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_internal_set_message&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;value&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;

      &lt;span class=&#34;n&#34;&gt;_impl_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;message_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Set&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;value&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;GetArenaForAllocation&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;());&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;kr&#34;&gt;inline&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Response&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_internal_mutable_message&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;

      &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;_impl_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;message_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Mutable&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;GetArenaForAllocation&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;());&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;kr&#34;&gt;inline&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Response&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;release_message&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
      &lt;span class=&#34;c1&#34;&gt;// @@protoc_insertion_point(field_release:main.Response.message)
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;      &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;_impl_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;message_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Release&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;kr&#34;&gt;inline&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Response&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;set_allocated_message&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;message&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;message&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;nullptr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;

      &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;else&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;

      &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
      &lt;span class=&#34;n&#34;&gt;_impl_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;message_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;SetAllocated&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;message&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;GetArenaForAllocation&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;());&lt;/span&gt;
    &lt;span class=&#34;cp&#34;&gt;#ifdef PROTOBUF_FORCE_COPY_DEFAULT_STRING
&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;&lt;/span&gt;      &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_impl_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;message_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;IsDefault&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;())&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;_impl_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;message_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Set&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;GetArenaForAllocation&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;());&lt;/span&gt;
      &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;cp&#34;&gt;#endif &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// PROTOBUF_FORCE_COPY_DEFAULT_STRING
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;      &lt;span class=&#34;c1&#34;&gt;// @@protoc_insertion_point(field_set_allocated:main.Response.message)
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

    &lt;span class=&#34;cp&#34;&gt;#ifdef __GNUC__
&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;&lt;/span&gt;      &lt;span class=&#34;cp&#34;&gt;#pragma GCC diagnostic pop
&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;cp&#34;&gt;#endif  &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// __GNUC__
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;c1&#34;&gt;// -------------------------------------------------------------------
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;

    &lt;span class=&#34;c1&#34;&gt;// @@protoc_insertion_point(namespace_scope)
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;  &lt;span class=&#34;c1&#34;&gt;// namespace main
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;
    &lt;span class=&#34;c1&#34;&gt;// @@protoc_insertion_point(global_scope)
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;
    &lt;span class=&#34;cp&#34;&gt;#include&lt;/span&gt; &lt;span class=&#34;cpf&#34;&gt;&amp;lt;google/protobuf/port_undef.inc&amp;gt;&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;cp&#34;&gt;#endif  &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// GOOGLE_PROTOBUF_INCLUDED_GOOGLE_PROTOBUF_INCLUDED_service_2eproto
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ç”Ÿæˆpython æ–‡ä»¶å†…å®¹&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;    &lt;span class=&#34;c1&#34;&gt;# -*- coding: utf-8 -*-&lt;/span&gt;
    &lt;span class=&#34;c1&#34;&gt;# Generated by the protocol buffer compiler.  DO NOT EDIT!&lt;/span&gt;
    &lt;span class=&#34;c1&#34;&gt;# source: service.proto&lt;/span&gt;
    &lt;span class=&#34;s2&#34;&gt;&amp;#34;&amp;#34;&amp;#34;Generated protocol buffer code.&amp;#34;&amp;#34;&amp;#34;&lt;/span&gt;
    &lt;span class=&#34;kn&#34;&gt;from&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;google.protobuf.internal&lt;/span&gt; &lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;builder&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;as&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;_builder&lt;/span&gt;
    &lt;span class=&#34;kn&#34;&gt;from&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;google.protobuf&lt;/span&gt; &lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;descriptor&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;as&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;_descriptor&lt;/span&gt;
    &lt;span class=&#34;kn&#34;&gt;from&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;google.protobuf&lt;/span&gt; &lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;descriptor_pool&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;as&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;_descriptor_pool&lt;/span&gt;
    &lt;span class=&#34;kn&#34;&gt;from&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;google.protobuf&lt;/span&gt; &lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;symbol_database&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;as&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;_symbol_database&lt;/span&gt;
    &lt;span class=&#34;c1&#34;&gt;# @@protoc_insertion_point(imports)&lt;/span&gt;

    &lt;span class=&#34;n&#34;&gt;_sym_db&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;_symbol_database&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Default&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;




    &lt;span class=&#34;n&#34;&gt;DESCRIPTOR&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;_descriptor_pool&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Default&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;AddSerializedFile&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;sa&#34;&gt;b&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\n\r&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;service.proto&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\x12\x04&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;main&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\&amp;#34;\x1a\n\x07&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;Request&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\x12\x0f\n\x07&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;te_name&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\x18\x01&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt; &lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\x01&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\t\&amp;#34;\x1b\n\x08&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;Response&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\x12\x0f\n\x07&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;message&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\x18\x01&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt; &lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\x01&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\t&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;2&amp;lt;&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\n\x0b&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;TestService&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\x12&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\n\n&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;TestServer&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\x12\r&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;.main.Request&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\x1a\x0e&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;.main.Response&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\&amp;#34;\x00\x62\x06&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;proto3&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;

    &lt;span class=&#34;n&#34;&gt;_builder&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;BuildMessageAndEnumDescriptors&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;DESCRIPTOR&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;globals&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;())&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;_builder&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;BuildTopDescriptorsAndMessages&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;DESCRIPTOR&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;service_pb2&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;globals&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;())&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;_descriptor&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_USE_C_DESCRIPTORS&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;False&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;

      &lt;span class=&#34;n&#34;&gt;DESCRIPTOR&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_options&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;None&lt;/span&gt;
      &lt;span class=&#34;n&#34;&gt;_REQUEST&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_serialized_start&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;23&lt;/span&gt;
      &lt;span class=&#34;n&#34;&gt;_REQUEST&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_serialized_end&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;49&lt;/span&gt;
      &lt;span class=&#34;n&#34;&gt;_RESPONSE&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_serialized_start&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;51&lt;/span&gt;
      &lt;span class=&#34;n&#34;&gt;_RESPONSE&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_serialized_end&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;78&lt;/span&gt;
      &lt;span class=&#34;n&#34;&gt;_TESTSERVICE&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_serialized_start&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;80&lt;/span&gt;
      &lt;span class=&#34;n&#34;&gt;_TESTSERVICE&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_serialized_end&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;140&lt;/span&gt;
    &lt;span class=&#34;c1&#34;&gt;# @@protoc_insertion_point(module_scope)&lt;/span&gt;

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
</description>
        </item>
        <item>
        <title>PRC go è¯­è¨€å®è·µä¸€</title>
        <link>https://zcj-git520.github.io/p/prc-go-%E8%AF%AD%E8%A8%80%E5%AE%9E%E8%B7%B5%E4%B8%80/</link>
        <pubDate>Mon, 01 Aug 2022 22:00:38 +0800</pubDate>
        
        <guid>https://zcj-git520.github.io/p/prc-go-%E8%AF%AD%E8%A8%80%E5%AE%9E%E8%B7%B5%E4%B8%80/</guid>
        <description>&lt;img src="https://zcj-git520.github.io/p/prc-go-%E8%AF%AD%E8%A8%80%E5%AE%9E%E8%B7%B5%E4%B8%80/2.jpg" alt="Featured image of post PRC go è¯­è¨€å®è·µä¸€" /&gt;&lt;h2 id=&#34;go-è¯­è¨€åŸç”Ÿçš„rpcçš„å®è·µ&#34;&gt;go è¯­è¨€åŸç”Ÿçš„rpcçš„å®è·µ&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;go åŸç”Ÿçš„rpcæ˜¯ä½¿ç”¨çš„net/rpcåº“ï¼Œä½¿ç”¨encoding/gobè¿›è¡Œç¼–è§£ç ï¼Œæ”¯æŒtcpå’Œhttpæ•°æ®ä¼ è¾“æ–¹å¼&lt;/li&gt;
&lt;li&gt;æä¾›äº†net/rpc/jsonrpcåº“å®ç°RPCæ–¹æ³•ï¼Œjsonrpcé‡‡ç”¨JSONè¿›è¡Œæ•°æ®ç¼–è§£ç ï¼Œå› è€Œæ”¯æŒè·¨è¯­è¨€è°ƒç”¨ï¼Œ&lt;/li&gt;
&lt;li&gt;ç›®å‰jsonrpcåº“æ˜¯åŸºäºtcpåè®®å®ç°çš„ï¼Œæš‚ä¸æ”¯æŒhttpä¼ è¾“æ–¹å¼&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;æœåŠ¡å™¨ç«¯-å¿…é¡»ç¬¦åˆ4ä¸ªåŸºæœ¬æ¡ä»¶&#34;&gt;æœåŠ¡å™¨ç«¯ å¿…é¡»ç¬¦åˆ4ä¸ªåŸºæœ¬æ¡ä»¶&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;ç»“æ„ä½“å­—æ®µé¦–å­—æ¯è¦å¤§å†™ï¼Œå¯ä»¥åˆ«äººè°ƒç”¨&lt;/li&gt;
&lt;li&gt;å‡½æ•°åå¿…é¡»é¦–å­—æ¯å¤§å†™&lt;/li&gt;
&lt;li&gt;å‡½æ•°ç¬¬ä¸€å‚æ•°æ˜¯æ¥æ”¶å‚æ•°ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯è¿”å›ç»™å®¢æˆ·ç«¯çš„å‚æ•°ï¼Œå¿…é¡»æ˜¯æŒ‡é’ˆç±»å‹&lt;/li&gt;
&lt;li&gt;å‡½æ•°è¿˜å¿…é¡»æœ‰ä¸€ä¸ªè¿”å›å€¼error&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;æœåŠ¡å™¨ä»£ç å¦‚ä¸‹&#34;&gt;æœåŠ¡å™¨ä»£ç å¦‚ä¸‹ï¼š&lt;/h3&gt;
&lt;p&gt;é€šè¿‡åŠ å¯†æ¥å®è·µrpc&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span class=&#34;kn&#34;&gt;package&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;main&lt;/span&gt;

&lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;
	&lt;span class=&#34;s&#34;&gt;&amp;#34;crypto/hmac&amp;#34;&lt;/span&gt;
	&lt;span class=&#34;s&#34;&gt;&amp;#34;crypto/md5&amp;#34;&lt;/span&gt;
	&lt;span class=&#34;s&#34;&gt;&amp;#34;crypto/sha512&amp;#34;&lt;/span&gt;
	&lt;span class=&#34;s&#34;&gt;&amp;#34;encoding/base64&amp;#34;&lt;/span&gt;
	&lt;span class=&#34;s&#34;&gt;&amp;#34;encoding/hex&amp;#34;&lt;/span&gt;
	&lt;span class=&#34;s&#34;&gt;&amp;#34;fmt&amp;#34;&lt;/span&gt;
	&lt;span class=&#34;s&#34;&gt;&amp;#34;golang.org/x/crypto/bcrypt&amp;#34;&lt;/span&gt;
	&lt;span class=&#34;s&#34;&gt;&amp;#34;io&amp;#34;&lt;/span&gt;
	&lt;span class=&#34;s&#34;&gt;&amp;#34;log&amp;#34;&lt;/span&gt;
	&lt;span class=&#34;s&#34;&gt;&amp;#34;net/http&amp;#34;&lt;/span&gt;
	&lt;span class=&#34;s&#34;&gt;&amp;#34;net/rpc&amp;#34;&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;

&lt;span class=&#34;c1&#34;&gt;// å®ä¾‹ å­—ç¬¦ä¸²åŠ å¯†
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// é‡‡ç”¨å“ˆå¸Œ/md5/base64/sha512/hmac
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;kd&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;HMACKEY&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;ZCJ&amp;#34;&lt;/span&gt;

&lt;span class=&#34;kd&#34;&gt;type&lt;/span&gt;  &lt;span class=&#34;nx&#34;&gt;DeEncryptionPram&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;struct&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
	&lt;span class=&#34;nx&#34;&gt;CodeStr&lt;/span&gt;     &lt;span class=&#34;kt&#34;&gt;string&lt;/span&gt;    &lt;span class=&#34;c1&#34;&gt;// å¾…åŠ å¯†/è§£å¯†çš„å­—ç¬¦ä¸²
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;	&lt;span class=&#34;nx&#34;&gt;CodeType&lt;/span&gt;    &lt;span class=&#34;kt&#34;&gt;string&lt;/span&gt;    &lt;span class=&#34;c1&#34;&gt;// åŠ è§£ç çš„ç±»å‹
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

&lt;span class=&#34;kd&#34;&gt;type&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;Encryption&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;struct&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;

&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

&lt;span class=&#34;c1&#34;&gt;// å“ˆå¸ŒåŠ å¯†
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;hasEncryption&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;codeStr&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
	&lt;span class=&#34;nx&#34;&gt;bytes&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;bcrypt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;GenerateFromPassword&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;([]&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;byte&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;codeStr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;),&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;bcrypt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;DefaultCost&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
	&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
		&lt;span class=&#34;nx&#34;&gt;log&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Println&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;has åŠ å¯†å¤±è´¥&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
		&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;
	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
	&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;bytes&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

&lt;span class=&#34;c1&#34;&gt;// MD5åŠ å¯†
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;md5Encryption&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;codeStr&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;string&lt;/span&gt;  &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
	&lt;span class=&#34;nx&#34;&gt;data&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;md5&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Sum&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;([]&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;byte&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;codeStr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;))&lt;/span&gt;
	&lt;span class=&#34;nx&#34;&gt;hexStr&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;fmt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Sprintf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;%x&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;data&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
	&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;hexStr&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

&lt;span class=&#34;c1&#34;&gt;// base64åŠ å¯†
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;base64Encryption&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;codeStr&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;string&lt;/span&gt;  &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
	&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt;  &lt;span class=&#34;nx&#34;&gt;base64&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;StdEncoding&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;EncodeToString&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;([]&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;byte&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;codeStr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;))&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

&lt;span class=&#34;c1&#34;&gt;// base64 è§£å¯†
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;base64Decryption&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;codeStr&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;error&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;){&lt;/span&gt;
	&lt;span class=&#34;nx&#34;&gt;by&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;base64&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;StdEncoding&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;DecodeString&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;codeStr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
	&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
		&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt;
	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
	&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;by&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;),&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

&lt;span class=&#34;c1&#34;&gt;// sha512åŠ å¯†
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;sha512Encryption&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;codeStr&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;string&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
	&lt;span class=&#34;nx&#34;&gt;w&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;sha512&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;New&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
	&lt;span class=&#34;nx&#34;&gt;io&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;WriteString&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;w&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;codeStr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
	&lt;span class=&#34;nx&#34;&gt;bw&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;w&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Sum&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
	&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;hex&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;EncodeToString&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;bw&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

&lt;span class=&#34;c1&#34;&gt;// ä½¿ç”¨hmac è¿›è¡ŒåŠ å¯†
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;hmacEncryption&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;codeStr&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;string&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
	&lt;span class=&#34;nx&#34;&gt;hw&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;hmac&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;New&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;md5&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;New&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[]&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;byte&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;HMACKEY&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;))&lt;/span&gt;
	&lt;span class=&#34;nx&#34;&gt;hw&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Write&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;([]&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;byte&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;codeStr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;))&lt;/span&gt;
	&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;hex&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;EncodeToString&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;hw&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Sum&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;([]&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;byte&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)))&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;e&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Encryption&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;OptEncryption&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;pram&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;DeEncryptionPram&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;returnData&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;error&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
	&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;pram&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;CodeStr&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
		&lt;span class=&#34;nx&#34;&gt;returnData&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt;
		&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;fmt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Errorf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;åŠ å¯†å­—ç¬¦ä¸²ä¸ºç©º&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
	&lt;span class=&#34;k&#34;&gt;switch&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;pram&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;CodeType&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
	&lt;span class=&#34;k&#34;&gt;case&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;HAS&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
		&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;returnData&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;hasEncryption&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;pram&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;CodeStr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
	&lt;span class=&#34;k&#34;&gt;case&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;MD5&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
		&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;returnData&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;md5Encryption&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;pram&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;CodeStr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
	&lt;span class=&#34;k&#34;&gt;case&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;BASE64&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
		&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;returnData&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;base64Encryption&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;pram&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;CodeStr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
	&lt;span class=&#34;k&#34;&gt;case&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;SHA512&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
		&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;returnData&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;sha512Encryption&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;pram&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;CodeStr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
	&lt;span class=&#34;k&#34;&gt;case&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;HMAC&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
		&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;returnData&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;hmacEncryption&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;pram&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;CodeStr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
	&lt;span class=&#34;k&#34;&gt;default&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
		&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;returnData&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;hasEncryption&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;pram&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;CodeStr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
	&lt;span class=&#34;nx&#34;&gt;log&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Printf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;åŠ å¯†ç±»å‹ä¸º%v, åŠ å¯†æ•°æ®ä¸ºï¼š%v, åŠ å¯†ç»“æœä¸ºï¼š%v&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;pram&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;CodeType&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;pram&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;CodeStr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;returnData&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
	&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;e&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Encryption&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;OptDecryption&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;pram&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;DeEncryptionPram&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;returnData&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;error&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
	&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;pram&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;CodeStr&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
		&lt;span class=&#34;nx&#34;&gt;returnData&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt;
		&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;fmt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Errorf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;è§£å¯†å­—ç¬¦ä¸²ä¸ºç©º&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
	&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;pram&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;CodeType&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;BASE64&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
		&lt;span class=&#34;nx&#34;&gt;str&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;base64Decryption&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;pram&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;CodeStr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
		&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
			&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;returnData&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;
			&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt;
		&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
		&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;returnData&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;str&lt;/span&gt;
		&lt;span class=&#34;nx&#34;&gt;log&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Printf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;è§£å¯†ç±»å‹ä¸º%v, è§£å¯†æ•°æ®ä¸ºï¼š%v, è§£å¯†ç»“æœä¸ºï¼š%v&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;pram&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;CodeType&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;pram&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;CodeStr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;returnData&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
		&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt;
	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
	&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;returnData&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;
	&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;fmt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Errorf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;è§£å¯†ç±»å‹åªæ”¯æŒï¼šbase64&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;main&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
	&lt;span class=&#34;nx&#34;&gt;enc&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;new&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Encryption&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
	&lt;span class=&#34;c1&#34;&gt;// æ³¨å†ŒæœåŠ¡
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;	&lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;rpc&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Register&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;enc&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
	&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
		&lt;span class=&#34;nx&#34;&gt;log&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Fatal&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;æœåŠ¡æ³¨å†Œå¤±è´¥&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
	&lt;span class=&#34;c1&#34;&gt;// ä½¿ç”¨http
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;	&lt;span class=&#34;nx&#34;&gt;rpc&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;HandleHTTP&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
	&lt;span class=&#34;c1&#34;&gt;// ç›‘å¬æœåŠ¡
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;	&lt;span class=&#34;nx&#34;&gt;log&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Println&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;ç›‘å¬æœåŠ¡...........&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
	&lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;http&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;ListenAndServe&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;:8000&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
	&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
		&lt;span class=&#34;nx&#34;&gt;log&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Panicln&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;å®¢æˆ·ç«¯ä»£ç å¦‚ä¸‹&#34;&gt;å®¢æˆ·ç«¯ä»£ç å¦‚ä¸‹ï¼š&lt;/h3&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span class=&#34;kn&#34;&gt;package&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;main&lt;/span&gt;

&lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;
	&lt;span class=&#34;s&#34;&gt;&amp;#34;fmt&amp;#34;&lt;/span&gt;
	&lt;span class=&#34;s&#34;&gt;&amp;#34;log&amp;#34;&lt;/span&gt;
	&lt;span class=&#34;s&#34;&gt;&amp;#34;net/rpc&amp;#34;&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;

&lt;span class=&#34;c1&#34;&gt;// å®¢æˆ·ç«¯å¼€å§‹è¯·æ±‚
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;
&lt;span class=&#34;kd&#34;&gt;type&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;DeEncryptionPram&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;struct&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
	&lt;span class=&#34;nx&#34;&gt;CodeStr&lt;/span&gt;     &lt;span class=&#34;kt&#34;&gt;string&lt;/span&gt;    &lt;span class=&#34;c1&#34;&gt;// å¾…åŠ å¯†/è§£å¯†çš„å­—ç¬¦ä¸²
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;	&lt;span class=&#34;nx&#34;&gt;CodeType&lt;/span&gt;    &lt;span class=&#34;kt&#34;&gt;string&lt;/span&gt;    &lt;span class=&#34;c1&#34;&gt;// åŠ è§£ç çš„ç±»å‹
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;main&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
	&lt;span class=&#34;c1&#34;&gt;// è¿æ¥http
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;	&lt;span class=&#34;nx&#34;&gt;conn&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;rpc&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;DialHTTP&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;tcp&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;:8000&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
	&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;

		&lt;span class=&#34;nx&#34;&gt;log&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Panic&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
	&lt;span class=&#34;nx&#34;&gt;pram&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;DeEncryptionPram&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
		&lt;span class=&#34;nx&#34;&gt;CodeStr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;  &lt;span class=&#34;s&#34;&gt;&amp;#34;zcj2565554485&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
		&lt;span class=&#34;nx&#34;&gt;CodeType&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;HAS&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
	&lt;span class=&#34;kd&#34;&gt;var&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;HASData&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;string&lt;/span&gt;
	&lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;conn&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Call&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;Encryption.OptEncryption&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;pram&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;HASData&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
	&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
		&lt;span class=&#34;nx&#34;&gt;log&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Println&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
	&lt;span class=&#34;nx&#34;&gt;fmt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Println&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;Encryption data is :&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;HASData&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;

	&lt;span class=&#34;nx&#34;&gt;pram&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;DeEncryptionPram&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
		&lt;span class=&#34;nx&#34;&gt;CodeStr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;  &lt;span class=&#34;s&#34;&gt;&amp;#34;zcj2565554485&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
		&lt;span class=&#34;nx&#34;&gt;CodeType&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;MD5&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
	&lt;span class=&#34;kd&#34;&gt;var&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;MD5Data&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;string&lt;/span&gt;
	&lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;conn&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Call&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;Encryption.OptEncryption&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;pram&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;MD5Data&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
	&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
		&lt;span class=&#34;nx&#34;&gt;log&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Println&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
	&lt;span class=&#34;nx&#34;&gt;fmt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Println&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;Encryption data is :&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;MD5Data&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;

	&lt;span class=&#34;nx&#34;&gt;pram&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;DeEncryptionPram&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
		&lt;span class=&#34;nx&#34;&gt;CodeStr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;  &lt;span class=&#34;s&#34;&gt;&amp;#34;zcj2565554485&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
		&lt;span class=&#34;nx&#34;&gt;CodeType&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;SHA512&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
	&lt;span class=&#34;kd&#34;&gt;var&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;SHA512Data&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;string&lt;/span&gt;
	&lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;conn&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Call&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;Encryption.OptEncryption&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;pram&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;SHA512Data&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
	&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
		&lt;span class=&#34;nx&#34;&gt;log&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Println&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
	&lt;span class=&#34;nx&#34;&gt;fmt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Println&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;Encryption data is :&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;SHA512Data&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;

	&lt;span class=&#34;nx&#34;&gt;pram&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;DeEncryptionPram&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
		&lt;span class=&#34;nx&#34;&gt;CodeStr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;  &lt;span class=&#34;s&#34;&gt;&amp;#34;zcj2565554485&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
		&lt;span class=&#34;nx&#34;&gt;CodeType&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;HMAC&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
	&lt;span class=&#34;kd&#34;&gt;var&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;HMACData&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;string&lt;/span&gt;
	&lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;conn&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Call&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;Encryption.OptEncryption&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;pram&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;HMACData&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
	&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
		&lt;span class=&#34;nx&#34;&gt;log&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Println&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
	&lt;span class=&#34;nx&#34;&gt;fmt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Println&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;Encryption data is :&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;HMACData&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;

	&lt;span class=&#34;nx&#34;&gt;pram&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;DeEncryptionPram&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
		&lt;span class=&#34;nx&#34;&gt;CodeStr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;  &lt;span class=&#34;s&#34;&gt;&amp;#34;zcj2565554485&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
		&lt;span class=&#34;nx&#34;&gt;CodeType&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;BASE64&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
	&lt;span class=&#34;kd&#34;&gt;var&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;returnData&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;string&lt;/span&gt;
	&lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;conn&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Call&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;Encryption.OptEncryption&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;pram&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;returnData&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
	&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
		&lt;span class=&#34;nx&#34;&gt;log&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Println&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
	&lt;span class=&#34;nx&#34;&gt;fmt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Println&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;Encryption data is :&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;returnData&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
	&lt;span class=&#34;nx&#34;&gt;pram&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;DeEncryptionPram&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
		&lt;span class=&#34;nx&#34;&gt;CodeStr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;  &lt;span class=&#34;nx&#34;&gt;returnData&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
		&lt;span class=&#34;nx&#34;&gt;CodeType&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;BASE64&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
	&lt;span class=&#34;nx&#34;&gt;returnData&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;
	&lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;conn&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Call&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;Encryption.OptDecryption&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;pram&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;returnData&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
	&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
		&lt;span class=&#34;nx&#34;&gt;log&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Println&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
	&lt;span class=&#34;nx&#34;&gt;fmt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Println&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;Decryption data is :&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;returnData&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;

	&lt;span class=&#34;nx&#34;&gt;pram&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;DeEncryptionPram&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
		&lt;span class=&#34;nx&#34;&gt;CodeStr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;  &lt;span class=&#34;nx&#34;&gt;returnData&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
		&lt;span class=&#34;nx&#34;&gt;CodeType&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;HMAC&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
	&lt;span class=&#34;nx&#34;&gt;returnData&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;
	&lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;conn&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Call&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;Encryption.OptDecryption&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;pram&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;returnData&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
	&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
		&lt;span class=&#34;nx&#34;&gt;log&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Println&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
	&lt;span class=&#34;nx&#34;&gt;fmt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Println&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;Decryption data is :&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;returnData&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;æµ‹è¯•ç»“æœ&#34;&gt;æµ‹è¯•ç»“æœ&lt;/h3&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;E:\GO_Rroject\rpc_zcj\go_native_rpc&amp;gt;go run client.go
Encryption data is : $2a$10$IaSoHv0OpVBZNk3zfx1Ct.dKLZJwU5of6qoKf2bABA7aKEQvObYLm
Encryption data is : 2cb48591141c092db41a3edaf2bbbfdb
Encryption data is : 0d7e532c800ee449a5eab309d1916e1f6ff4ffa0738d7e9aa06adae93154842f22896575c50e711f10d1
869b7945377c46ac7211d4aa919a0bed41ef2d806327
Encryption data is : fcba1e90c88b18eb08e59467f36bd202
Encryption data is : emNqMjU2NTU1NDQ4NQ==
Decryption data is : zcj2565554485
2022/08/13 21:58:23 è§£å¯†ç±»å‹åªæ”¯æŒï¼šbase64
Decryption data is :
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 186; 
			flex-basis: 447px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/prc-go-%E8%AF%AD%E8%A8%80%E5%AE%9E%E8%B7%B5%E4%B8%80/2.jpg&#34; data-size=&#34;1902x1019&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/prc-go-%E8%AF%AD%E8%A8%80%E5%AE%9E%E8%B7%B5%E4%B8%80/2.jpg&#34;
			width=&#34;1902&#34;
			height=&#34;1019&#34;
			srcset=&#34;https://zcj-git520.github.io/p/prc-go-%E8%AF%AD%E8%A8%80%E5%AE%9E%E8%B7%B5%E4%B8%80/2_hu9db44f85261860f0cd6b40f5490959f6_304073_480x0_resize_q75_box.jpg 480w, https://zcj-git520.github.io/p/prc-go-%E8%AF%AD%E8%A8%80%E5%AE%9E%E8%B7%B5%E4%B8%80/2_hu9db44f85261860f0cd6b40f5490959f6_304073_1024x0_resize_q75_box.jpg 1024w&#34;
			loading=&#34;lazy&#34;
			&gt;
	&lt;/a&gt;
	
&lt;/figure&gt;&lt;/p&gt;
</description>
        </item>
        <item>
        <title>è®¾ç½®è‡ªå·±çš„ç¼–è¾‘å™¨</title>
        <link>https://zcj-git520.github.io/p/%E8%AE%BE%E7%BD%AE%E8%87%AA%E5%B7%B1%E7%9A%84%E7%BC%96%E8%BE%91%E5%99%A8/</link>
        <pubDate>Sat, 23 Jul 2022 22:00:38 +0800</pubDate>
        
        <guid>https://zcj-git520.github.io/p/%E8%AE%BE%E7%BD%AE%E8%87%AA%E5%B7%B1%E7%9A%84%E7%BC%96%E8%BE%91%E5%99%A8/</guid>
        <description>&lt;img src="https://zcj-git520.github.io/p/%E8%AE%BE%E7%BD%AE%E8%87%AA%E5%B7%B1%E7%9A%84%E7%BC%96%E8%BE%91%E5%99%A8/1.png" alt="Featured image of post è®¾ç½®è‡ªå·±çš„ç¼–è¾‘å™¨" /&gt;&lt;h2 id=&#34;è®¾ç½®è‡ªå·±çš„ç¼–è¾‘å™¨&#34;&gt;è®¾ç½®è‡ªå·±çš„ç¼–è¾‘å™¨&lt;/h2&gt;
&lt;h3 id=&#34;ç®€å•ä»‹ç»&#34;&gt;ç®€å•ä»‹ç»&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;åŸºäºvim è®¾è®¡è‡ªå·±çš„ç¼–è¾‘å™¨&lt;/li&gt;
&lt;li&gt;ä½¿ç”¨vimæ’ä»¶&lt;/li&gt;
&lt;li&gt;ä»¥ä¸‹æ˜¯ç¼–è¾‘å™¨çš„.vimrc&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;é…ç½®å¦‚ä¸‹&#34;&gt;é…ç½®å¦‚ä¸‹&lt;/h3&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;set nocompatible              &amp;quot; be iMproved, required
filetype off                  &amp;quot; required
&amp;quot; set the runtime path to include Vundle and initialize
set rtp+=~/.vim/bundle/Vundle.vim
call vundle#begin()
&amp;quot; alternatively, pass a path where Vundle should install plugins
&amp;quot;call vundle#begin(&#39;~/some/path/here&#39;)
&amp;quot; let Vundle manage Vundle, required
Plugin &#39;VundleVim/Vundle.vim&#39; 
Plugin &#39;dense-analysis/ale&#39;
Plugin &#39;preservim/nerdtree&#39;
Plugin &#39;preservim/nerdcommenter&#39;
Plugin &#39;ludovicchabant/vim-gutentags&#39;
Plugin &#39;Valloric/YouCompleteMe&#39;
Plugin &#39;Shougo/neocomplete.vim&#39;
Plugin &#39;vim-scripts/taglist.vim&#39;
&amp;quot; Plugin &#39;rstacruz/sparkup&#39;, {&#39;rtp&#39;: &#39;vim/&#39;}
call vundle#end()            &amp;quot; required
filetype plugin indent on    &amp;quot; required

set sw=4
set ts=4  
set et
set smarttab
set smartindent
set lbr
set fo+=mB
set sm
set selection=inclusive
set wildmenu
set mousemodel=popup

&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;
&amp;quot;ale
&amp;quot;å§‹ç»ˆå¼€å¯æ ‡å¿—åˆ—
let g:ale_sign_column_always = 1
let g:ale_set_highlights = 0
&amp;quot;è‡ªå®šä¹‰errorå’Œwarningå›¾æ ‡
let g:ale_sign_error = &#39;âœ—&#39;
let g:ale_sign_warning = &#39;âš¡&#39;
&amp;quot;åœ¨vimè‡ªå¸¦çš„çŠ¶æ€æ ä¸­æ•´åˆale
let g:ale_statusline_format = [&#39;âœ— %d&#39;, &#39;âš¡ %d&#39;, &#39;âœ” OK&#39;]
&amp;quot;æ˜¾ç¤ºLinteråç§°,å‡ºé”™æˆ–è­¦å‘Šç­‰ç›¸å…³ä¿¡æ¯
let g:ale_echo_msg_error_str = &#39;E&#39;
let g:ale_echo_msg_warning_str = &#39;W&#39;
let g:ale_echo_msg_format = &#39;[%linter%] %s [%severity%]&#39;
&amp;quot;æ™®é€šæ¨¡å¼ä¸‹ï¼Œspå‰å¾€ä¸Šä¸€ä¸ªé”™è¯¯æˆ–è­¦å‘Šï¼Œsnå‰å¾€ä¸‹ä¸€ä¸ªé”™è¯¯æˆ–è­¦å‘Š
nmap sp (ale_previous_wrap)
nmap sn (ale_next_wrap)
&amp;quot;sè§¦å‘/å…³é—­è¯­æ³•æ£€æŸ¥
nmap s :ALEToggle
&amp;quot;aæŸ¥çœ‹é”™è¯¯æˆ–è­¦å‘Šçš„è¯¦ç»†ä¿¡æ¯
nmap a :ALEDetail
let g:ale_linters = {
\ &#39;c++&#39;: [&#39;clang&#39;],
\ &#39;c&#39;: [&#39;clang&#39;],
\ &#39;python&#39;: [&#39;pylint&#39;],
\ &#39;golang&#39;:[&#39;golangci-lint&#39;],
\}
&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;
&amp;quot;å°†è¯¥é…ç½®å†™è¿›.vimrcæ–‡ä»¶ä¸­&amp;quot;
nnoremap &amp;lt;C-n&amp;gt; :NERDTreeToggle&amp;lt;CR&amp;gt; 
&amp;quot;æ‰“å¼€NERDTree,åœ¨nodeä¸­é€‰ä¸­å½“å‰æ–‡ä»¶&amp;quot;
nnoremap &amp;lt;C-f&amp;gt; :NERDTreeFind&amp;lt;CR&amp;gt; 
&amp;quot;vimæ‰“å¼€æ—¶ï¼Œè‡ªåŠ¨æ‰“å¼€NERDTree,å¹¶ä¸”å°†å…‰æ ‡æ”¾åœ¨æ–‡ä»¶çª—å£&amp;quot;
&amp;quot;autocmd VimEnter * NERDTree | wincmd p 
&amp;quot;å½“NERDTreeæ˜¯å”¯ä¸€çš„çª—å£æ—¶é€€å‡ºvim&amp;quot;
autocmd BufEnter * if tabpagenr(&#39;$&#39;) == 1 &amp;amp;&amp;amp; winnr(&#39;$&#39;) == 1 &amp;amp;&amp;amp; exists(&#39;b:NERDTree&#39;) &amp;amp;&amp;amp; b:NERDTree.isTabTree() | quit | endif  
&amp;quot;åœ¨æ¯ä¸€ä¸ªæ–°çš„new tabæ‰“å¼€å­˜åœ¨çš„NERDTree&amp;quot;
autocmd BufWinEnter * silent NERDTreeMirror

&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;
&amp;quot; Add spaces after comment delimiters by default
let g:NERDSpaceDelims = 1
&amp;quot; Use compact syntax for prettified multi-line comments
let g:NERDCompactSexyComs = 1
&amp;quot; Align line-wise comment delimiters flush left instead of following code indentation
let g:NERDDefaultAlign = &#39;left&#39;
&amp;quot; Set a language to use its alternate delimiters by default
let g:NERDAltDelims_java = 1
&amp;quot; Add your own custom formats or override the defaults
let g:NERDCommentEmptyLines = 1
&amp;quot; Enable trimming of trailing whitespace when uncommenting
let g:NERDTrimTrailingWhitespace = 1
&amp;quot; Enable NERDCommenterToggle to check all selected lines is commented or not
let g:NERDToggleCheckAllLines = 1
&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;
&amp;quot; gutentagsæœç´¢å·¥ç¨‹ç›®å½•çš„æ ‡å¿—ï¼Œç¢°åˆ°è¿™äº›æ–‡ä»¶/ç›®å½•åå°±åœæ­¢å‘ä¸Šä¸€çº§ç›®å½•é€’å½’ &amp;quot;
let g:gutentags_project_root = [&#39;.root&#39;, &#39;.svn&#39;, &#39;.git&#39;, &#39;.project&#39;]

&amp;quot; æ‰€ç”Ÿæˆçš„æ•°æ®æ–‡ä»¶çš„åç§° &amp;quot;
let g:gutentags_ctags_tagfile = &#39;.tags&#39;

&amp;quot; å°†è‡ªåŠ¨ç”Ÿæˆçš„ tags æ–‡ä»¶å…¨éƒ¨æ”¾å…¥ ~/.cache/tags ç›®å½•ä¸­ï¼Œé¿å…æ±¡æŸ“å·¥ç¨‹ç›®å½• &amp;quot;
let s:vim_tags = expand(&#39;~/.cache/tags&#39;)
let g:gutentags_cache_dir = s:vim_tags
&amp;quot; æ£€æµ‹ ~/.cache/tags ä¸å­˜åœ¨å°±æ–°å»º &amp;quot;
if !isdirectory(s:vim_tags)
   silent! call mkdir(s:vim_tags, &#39;p&#39;)
endif

&amp;quot; é…ç½® ctags çš„å‚æ•° &amp;quot;
let g:gutentags_ctags_extra_args = [&#39;--fields=+niazS&#39;, &#39;--extra=+q&#39;]
let g:gutentags_ctags_extra_args += [&#39;--c++-kinds=+pxI&#39;]
let g:gutentags_ctags_extra_args += [&#39;--c-kinds=+px&#39;]
&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;
&amp;quot; Use neocomplete.
let g:neocomplete#enable_at_startup = 1
&amp;quot; Use smartcase.
let g:neocomplete#enable_smart_case = 1
&amp;quot; Set minimum syntax keyword length.
let g:neocomplete#sources#syntax#min_keyword_length = 3
let g:neocomplete#lock_buffer_name_pattern = &#39;\*ku\*&#39;

&amp;quot; Define dictionary.
let g:neocomplete#sources#dictionary#dictionaries = {
    \ &#39;default&#39; : &#39;&#39;,
    \ &#39;vimshell&#39; : $HOME.&#39;/.vimshell_hist&#39;,
    \ &#39;scheme&#39; : $HOME.&#39;/.gosh_completions&#39;
        \ }

&amp;quot; Define keyword.
if !exists(&#39;g:neocomplete#keyword_patterns&#39;)
    let g:neocomplete#keyword_patterns = {}
endif
let g:neocomplete#keyword_patterns[&#39;default&#39;] = &#39;\h\w*&#39;

&amp;quot; Plugin key-mappings.
inoremap &amp;lt;expr&amp;gt;&amp;lt;C-g&amp;gt;     neocomplete#undo_completion()
inoremap &amp;lt;expr&amp;gt;&amp;lt;C-l&amp;gt;     neocomplete#complete_common_string()

&amp;quot; Recommended key-mappings.
&amp;quot; &amp;lt;CR&amp;gt;: close popup and save indent.
inoremap &amp;lt;silent&amp;gt; &amp;lt;CR&amp;gt; &amp;lt;C-r&amp;gt;=&amp;lt;SID&amp;gt;my_cr_function()&amp;lt;CR&amp;gt;
function! s:my_cr_function()
  return neocomplete#close_popup() . &amp;quot;\&amp;lt;CR&amp;gt;&amp;quot;
  &amp;quot; For no inserting &amp;lt;CR&amp;gt; key.
  &amp;quot;return pumvisible() ? neocomplete#close_popup() : &amp;quot;\&amp;lt;CR&amp;gt;&amp;quot;
endfunction
&amp;quot; &amp;lt;TAB&amp;gt;: completion.
inoremap &amp;lt;expr&amp;gt;&amp;lt;TAB&amp;gt;  pumvisible() ? &amp;quot;\&amp;lt;C-n&amp;gt;&amp;quot; : &amp;quot;\&amp;lt;TAB&amp;gt;&amp;quot;
&amp;quot; &amp;lt;C-h&amp;gt;, &amp;lt;BS&amp;gt;: close popup and delete backword char.
inoremap &amp;lt;expr&amp;gt;&amp;lt;C-h&amp;gt; neocomplete#smart_close_popup().&amp;quot;\&amp;lt;C-h&amp;gt;&amp;quot;
inoremap &amp;lt;expr&amp;gt;&amp;lt;BS&amp;gt; neocomplete#smart_close_popup().&amp;quot;\&amp;lt;C-h&amp;gt;&amp;quot;
inoremap &amp;lt;expr&amp;gt;&amp;lt;C-y&amp;gt;  neocomplete#close_popup()
inoremap &amp;lt;expr&amp;gt;&amp;lt;C-e&amp;gt;  neocomplete#cancel_popup()

&amp;quot; Enable omni completion.
autocmd FileType css setlocal omnifunc=csscomplete#CompleteCSS
autocmd FileType html,markdown setlocal omnifunc=htmlcomplete#CompleteTags
autocmd FileType javascript setlocal omnifunc=javascriptcomplete#CompleteJS
autocmd FileType python setlocal omnifunc=pythoncomplete#Complete
autocmd FileType xml setlocal omnifunc=xmlcomplete#CompleteTags

&amp;quot; Enable heavy omni completion.
if !exists(&#39;g:neocomplete#sources#omni#input_patterns&#39;)
  let g:neocomplete#sources#omni#input_patterns = {}
endif

&amp;quot; For perlomni.vim setting.
&amp;quot; https://github.com/c9s/perlomni.vim
let g:neocomplete#sources#omni#input_patterns.perl = &#39;\h\w*-&amp;gt;\h\w*\|\h\w*::&#39;

&amp;quot; æ˜¾ç¤ºç›¸å…³  
&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;
syntax on
set nobackup    &amp;quot;å–æ¶ˆè‡ªåŠ¨å¤‡ä»½ï¼Œç¦æ­¢ç”Ÿæˆä¸´æ—¶æ–‡ä»¶
set noswapfile
set nocompatible &amp;quot;å…³é—­å…¼å®¹æ¨¡å¼
set incsearch &amp;quot;å¼€å¯å®æ—¶æœç´¢åŠŸèƒ½
set ignorecase &amp;quot;æœç´¢å¿½ç•¥å¤§å°å†™
set wildmenu &amp;quot;vimå‘½ä»¤è‡ªåŠ¨è¡¥å…¨
set autoread &amp;quot;æ–‡ä»¶è‡ªåŠ¨æ›´æ–°
set gcr=a:block-blinkon0 &amp;quot;ç¦æ­¢å…³é—­é—ªçƒ
set laststatus=2 &amp;quot;æ€»æ˜¯æ˜¾ç¤ºçŠ¶æ€æ 
set ruler &amp;quot;æ˜¾ç¤ºå…‰æ ‡ä½ç½®
set nu &amp;quot;æ˜¾ç¤ºè¡Œå·
&amp;quot; set relativenumber &amp;quot;æ˜¾ç¤ºç›¸å¯¹è¡Œå·
set cuc &amp;quot;æµ…è‰²æ˜¾ç¤ºå½“å‰è¡Œ
set cul &amp;quot;æµ…è‰²æ˜¾ç¤ºå½“å‰è¡Œ
set showcmd &amp;quot;è¾“å…¥çš„å‘½ä»¤æ˜¾ç¤ºå‡ºæ¥
set cmdheight=2 &amp;quot;å‘½ä»¤è¡Œé«˜åº¦
set nofoldenable
set foldmethod=manual &amp;quot;å…è®¸æ‰‹åŠ¨æŠ˜å 
set cul &amp;quot;é«˜äº®å…‰æ ‡æ‰€åœ¨è¡Œ
set cuc
set shortmess=atI   &amp;quot; å¯åŠ¨çš„æ—¶å€™ä¸æ˜¾ç¤ºé‚£ä¸ªæ´åŠ©ä¹Œå¹²è¾¾å„¿ç«¥çš„æç¤º  
set go=             &amp;quot; ä¸è¦å›¾å½¢æŒ‰é’®  
&amp;quot;color desert     &amp;quot; è®¾ç½®èƒŒæ™¯ä¸»é¢˜  
color ron     &amp;quot; è®¾ç½®èƒŒæ™¯ä¸»é¢˜  
autocmd InsertEnter * se cul    &amp;quot; ç”¨æµ…è‰²é«˜äº®å½“å‰è¡Œ  
set ruler           &amp;quot; æ˜¾ç¤ºæ ‡å°º  
set showcmd         &amp;quot; è¾“å…¥çš„å‘½ä»¤æ˜¾ç¤ºå‡ºæ¥ï¼Œçœ‹çš„æ¸…æ¥šäº›  
set scrolloff=3     &amp;quot; å…‰æ ‡ç§»åŠ¨åˆ°bufferçš„é¡¶éƒ¨å’Œåº•éƒ¨æ—¶ä¿æŒ3è¡Œè·ç¦»  
set statusline=%F%m%r%h%w\ [FORMAT=%{&amp;amp;ff}]\ [TYPE=%Y]\ [POS=%l,%v][%p%%]\ %{strftime(\&amp;quot;%d/%m/%y\ -\ %H:%M\&amp;quot;)}   &amp;quot;çŠ¶æ€è¡Œæ˜¾ç¤ºçš„å†…å®¹  
set laststatus=2    &amp;quot; å¯åŠ¨æ˜¾ç¤ºçŠ¶æ€è¡Œ(1),æ€»æ˜¯æ˜¾ç¤ºçŠ¶æ€è¡Œ(2)  
set nocompatible  &amp;quot;å»æ‰è®¨åŒçš„æœ‰å…³viä¸€è‡´æ€§æ¨¡å¼ï¼Œé¿å…ä»¥å‰ç‰ˆæœ¬çš„ä¸€äº›bugå’Œå±€é™  
&amp;quot; æ˜¾ç¤ºä¸­æ–‡å¸®åŠ©
if version &amp;gt;= 603
        set helplang=cn
        set encoding=utf-8
endif
&amp;quot; è‡ªåŠ¨ç¼©è¿›
set autoindent
set cindent
&amp;quot; Tabé”®çš„å®½åº¦
set tabstop=4
&amp;quot; ç»Ÿä¸€ç¼©è¿›ä¸º4
set softtabstop=4
set shiftwidth=4
&amp;quot; ä½¿ç”¨ç©ºæ ¼ä»£æ›¿åˆ¶è¡¨ç¬¦
set expandtab
&amp;quot; åœ¨è¡Œå’Œæ®µå¼€å§‹å¤„ä½¿ç”¨åˆ¶è¡¨ç¬¦
set smarttab
&amp;quot; æ˜¾ç¤ºè¡Œå·
set number
&amp;quot; å†å²è®°å½•æ•°
set history=1000
&amp;quot;æœç´¢é€å­—ç¬¦é«˜äº®
set hlsearch
set incsearch
&amp;quot;è¯­è¨€è®¾ç½®
set langmenu=zh_CN.UTF-8
set helplang=cn
&amp;quot; æ€»æ˜¯æ˜¾ç¤ºçŠ¶æ€è¡Œ
set cmdheight=2
&amp;quot; ä¾¦æµ‹æ–‡ä»¶ç±»å‹
filetype on
&amp;quot; è½½å…¥æ–‡ä»¶ç±»å‹æ’ä»¶
filetype plugin on
&amp;quot; ä¸ºç‰¹å®šæ–‡ä»¶ç±»å‹è½½å…¥ç›¸å…³ç¼©è¿›æ–‡ä»¶
filetype indent on
&amp;quot; ä¿å­˜å…¨å±€å˜é‡
set viminfo+=!
&amp;quot; å¸¦æœ‰å¦‚ä¸‹ç¬¦å·çš„å•è¯ä¸è¦è¢«æ¢è¡Œåˆ†å‰²
set iskeyword+=_,$,@,%,#,-
&amp;quot; å­—ç¬¦é—´æ’å…¥çš„åƒç´ è¡Œæ•°ç›®

&amp;quot;markdowné…ç½®
au BufRead,BufNewFile *.{md,mdown,mkd,mkdn,markdown,mdwn}   set filetype=mkd
au BufRead,BufNewFile *.{go}   set filetype=go
au BufRead,BufNewFile *.{js}   set filetype=javascript
&amp;quot;rkdown to HTML  
nmap md :!~/.vim/markdown.pl % &amp;gt; %.html &amp;lt;CR&amp;gt;&amp;lt;CR&amp;gt;
nmap fi :!firefox %.html &amp;amp; &amp;lt;CR&amp;gt;&amp;lt;CR&amp;gt;
nmap \ \cc
vmap \ \cc

&amp;quot;å°†tabæ›¿æ¢ä¸ºç©ºæ ¼
nmap tt :%s/\t/    /g&amp;lt;CR&amp;gt;



&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;
&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;æ–°æ–‡ä»¶æ ‡é¢˜
&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;
&amp;quot;æ–°å»º.c,.h,.sh,.javaæ–‡ä»¶ï¼Œè‡ªåŠ¨æ’å…¥æ–‡ä»¶å¤´ 
autocmd BufNewFile *.cpp,*.[ch],*.sh,*.rb,*.java,*.py exec &amp;quot;:call SetTitle()&amp;quot; 
&amp;quot;&amp;quot;å®šä¹‰å‡½æ•°SetTitleï¼Œè‡ªåŠ¨æ’å…¥æ–‡ä»¶å¤´ 
func SetTitle() 
        &amp;quot;å¦‚æœæ–‡ä»¶ç±»å‹ä¸º.shæ–‡ä»¶ 
        if &amp;amp;filetype == &#39;sh&#39; 
                call setline(1,&amp;quot;\#!/bin/bash&amp;quot;) 
                call append(line(&amp;quot;.&amp;quot;), &amp;quot;&amp;quot;) 
    elseif &amp;amp;filetype == &#39;python&#39;
        call setline(1,&amp;quot;#!/usr/bin/env python&amp;quot;)
        call append(line(&amp;quot;.&amp;quot;),&amp;quot;# coding=utf-8&amp;quot;)
            call append(line(&amp;quot;.&amp;quot;)+1, &amp;quot;&amp;quot;) 

    elseif &amp;amp;filetype == &#39;ruby&#39;
        call setline(1,&amp;quot;#!/usr/bin/env ruby&amp;quot;)
        call append(line(&amp;quot;.&amp;quot;),&amp;quot;# encoding: utf-8&amp;quot;)
            call append(line(&amp;quot;.&amp;quot;)+1, &amp;quot;&amp;quot;)

&amp;quot;    elseif &amp;amp;filetype == &#39;mkd&#39;
&amp;quot;        call setline(1,&amp;quot;&amp;lt;head&amp;gt;&amp;lt;meta charset=\&amp;quot;UTF-8\&amp;quot;&amp;gt;&amp;lt;/head&amp;gt;&amp;quot;)
        else 
                call setline(1, &amp;quot;/*************************************************************************&amp;quot;) 
                call append(line(&amp;quot;.&amp;quot;), &amp;quot;        &amp;gt; File Name: &amp;quot;.expand(&amp;quot;%&amp;quot;)) 
                call append(line(&amp;quot;.&amp;quot;)+1, &amp;quot;        &amp;gt; Author: username&amp;quot;) 
                call append(line(&amp;quot;.&amp;quot;)+2, &amp;quot;        &amp;gt; Mail: 111111111@qq.com&amp;quot;) 
                call append(line(&amp;quot;.&amp;quot;)+3, &amp;quot;        &amp;gt; Created Time: &amp;quot;.strftime(&amp;quot;%c&amp;quot;)) 
                call append(line(&amp;quot;.&amp;quot;)+4, &amp;quot; ************************************************************************/&amp;quot;) 
                call append(line(&amp;quot;.&amp;quot;)+5, &amp;quot;&amp;quot;)
        endif
        if expand(&amp;quot;%:e&amp;quot;) == &#39;cpp&#39;
                call append(line(&amp;quot;.&amp;quot;)+6, &amp;quot;#include &amp;lt;iostream&amp;gt;&amp;quot;)
        call append(line(&amp;quot;.&amp;quot;)+7, &amp;quot;using std::cin;&amp;quot;)
        call append(line(&amp;quot;.&amp;quot;)+8, &amp;quot;using std::cout;&amp;quot;)
        call append(line(&amp;quot;.&amp;quot;)+9, &amp;quot;using std::endl;&amp;quot;)
                call append(line(&amp;quot;.&amp;quot;)+10, &amp;quot;using namespace std;&amp;quot;)
                call append(line(&amp;quot;.&amp;quot;)+11, &amp;quot;&amp;quot;)
        endif
        if &amp;amp;filetype == &#39;c&#39;
                call append(line(&amp;quot;.&amp;quot;)+6, &amp;quot;#include &amp;lt;stdio.h&amp;gt;&amp;quot;)
                call append(line(&amp;quot;.&amp;quot;)+7, &amp;quot;&amp;quot;)
        endif
        if expand(&amp;quot;%:e&amp;quot;) == &#39;h&#39;
                call append(line(&amp;quot;.&amp;quot;)+6, &amp;quot;#ifndef _&amp;quot;.toupper(expand(&amp;quot;%:r&amp;quot;)).&amp;quot;_H&amp;quot;)
                call append(line(&amp;quot;.&amp;quot;)+7, &amp;quot;#define _&amp;quot;.toupper(expand(&amp;quot;%:r&amp;quot;)).&amp;quot;_H&amp;quot;)
                call append(line(&amp;quot;.&amp;quot;)+8, &amp;quot;#endif&amp;quot;)
        endif
        if &amp;amp;filetype == &#39;java&#39;
                call append(line(&amp;quot;.&amp;quot;)+6,&amp;quot;public class &amp;quot;.expand(&amp;quot;%:r&amp;quot;))
                call append(line(&amp;quot;.&amp;quot;)+7,&amp;quot;&amp;quot;)
        if &amp;amp;filetype == &#39;go&#39;
                call append(line(&amp;quot;.&amp;quot;)+6,&amp;quot;package main&amp;quot;)
                call append(line(&amp;quot;.&amp;quot;)+7,&amp;quot;&amp;quot;)
                call append(line(&amp;quot;.&amp;quot;)+8,&amp;quot;func main() {&amp;quot;)
                call append(line(&amp;quot;.&amp;quot;)+9,&amp;quot;}&amp;quot;)
        endif
        &amp;quot;æ–°å»ºæ–‡ä»¶åï¼Œè‡ªåŠ¨å®šä½åˆ°æ–‡ä»¶æœ«å°¾
endfunc 
autocmd BufNewFile * normal G
command WQ wq 
command Wq wq 
&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;
&amp;quot;é”®ç›˜å‘½ä»¤
&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;
:nmap &amp;lt;silent&amp;gt; &amp;lt;F9&amp;gt; &amp;lt;ESC&amp;gt;:Tlist&amp;lt;RETURN&amp;gt;
&amp;quot; shift tab pages
map &amp;lt;S-Left&amp;gt; :tabp&amp;lt;CR&amp;gt;
map &amp;lt;S-Right&amp;gt; :tabn&amp;lt;CR&amp;gt;
map! &amp;lt;C-Z&amp;gt; &amp;lt;Esc&amp;gt;zzi
map! &amp;lt;C-O&amp;gt; &amp;lt;C-Y&amp;gt;,
map &amp;lt;C-A&amp;gt; ggVG$&amp;quot;+y
map &amp;lt;Esc&amp;gt;&amp;lt;Esc&amp;gt; :w&amp;lt;CR&amp;gt;
map &amp;lt;F12&amp;gt; gg=G
map &amp;lt;C-w&amp;gt; &amp;lt;C-w&amp;gt;w
imap &amp;lt;C-k&amp;gt; &amp;lt;C-y&amp;gt;,
imap &amp;lt;C-t&amp;gt; &amp;lt;C-q&amp;gt;&amp;lt;TAB&amp;gt;
imap &amp;lt;C-j&amp;gt; &amp;lt;ESC&amp;gt;
&amp;quot; é€‰ä¸­çŠ¶æ€ä¸‹ Ctrl+c å¤åˆ¶
&amp;quot;map &amp;lt;C-v&amp;gt; &amp;quot;*pa
imap &amp;lt;C-v&amp;gt; &amp;lt;Esc&amp;gt;&amp;quot;*pa
imap &amp;lt;C-a&amp;gt; &amp;lt;Esc&amp;gt;^
imap &amp;lt;C-e&amp;gt; &amp;lt;Esc&amp;gt;$
vmap &amp;lt;C-c&amp;gt; &amp;quot;+y
&amp;quot;set mouse=v
&amp;quot;set clipboard=unnamed
&amp;quot;å»æ³¨é‡Š  
nnoremap &amp;lt;F1&amp;gt; :g/^\s*#/d&amp;lt;CR&amp;gt;
&amp;quot;å»ç©ºè¡Œ  
nnoremap &amp;lt;F2&amp;gt; :g/^\s*$/d&amp;lt;CR&amp;gt;
&amp;quot;æ¯”è¾ƒæ–‡ä»¶  
nnoremap &amp;lt;C-F2&amp;gt; :vert diffsplit 
&amp;quot;nnoremap &amp;lt;Leader&amp;gt;fu :CtrlPFunky&amp;lt;Cr&amp;gt;
&amp;quot;nnoremap &amp;lt;C-n&amp;gt; :CtrlPFunky&amp;lt;Cr&amp;gt;
&amp;quot;Cï¼ŒC++ æŒ‰F5ç¼–è¯‘è¿è¡Œ
map &amp;lt;F5&amp;gt; :call CompileRunGcc()&amp;lt;CR&amp;gt;
func! CompileRunGcc()
        exec &amp;quot;w&amp;quot;
        if &amp;amp;filetype == &#39;c&#39;
                exec &amp;quot;!g++ % -o %&amp;lt;&amp;quot;
                exec &amp;quot;!time ./%&amp;lt;&amp;quot;
        elseif &amp;amp;filetype == &#39;cpp&#39;
                exec &amp;quot;!g++ % -std=c++11 -o %&amp;lt;&amp;quot;
                exec &amp;quot;!time ./%&amp;lt;&amp;quot;
        elseif &amp;amp;filetype == &#39;java&#39; 
                exec &amp;quot;!javac %&amp;quot; 
                exec &amp;quot;!time java %&amp;lt;&amp;quot;
        elseif &amp;amp;filetype == &#39;sh&#39;
                :!time bash %
        elseif &amp;amp;filetype == &#39;python&#39;
                exec &amp;quot;!time python2.7 %&amp;quot;
    elseif &amp;amp;filetype == &#39;html&#39;
        exec &amp;quot;!firefox % &amp;amp;&amp;quot;
    elseif &amp;amp;filetype == &#39;go&#39;
&amp;quot;        exec &amp;quot;!go build %&amp;lt;&amp;quot;
        exec &amp;quot;!time go run %&amp;quot;
    elseif &amp;amp;filetype == &#39;mkd&#39;
        exec &amp;quot;!~/.vim/markdown.pl % &amp;gt; %.html &amp;amp;&amp;quot;
        exec &amp;quot;!firefox %.html &amp;amp;&amp;quot;
        endif
endfunc
&amp;quot;C,C++çš„è°ƒè¯•
map &amp;lt;F8&amp;gt; :call Rungdb()&amp;lt;CR&amp;gt;
func! Rungdb()
        exec &amp;quot;w&amp;quot;
        exec &amp;quot;!g++ % -std=c++11 -g -o %&amp;lt;&amp;quot;
        exec &amp;quot;!gdb ./%&amp;lt;&amp;quot;
endfunc


&amp;quot;ä»£ç æ ¼å¼ä¼˜åŒ–åŒ–

map &amp;lt;F6&amp;gt; :call FormartSrc()&amp;lt;CR&amp;gt;&amp;lt;CR&amp;gt;

&amp;quot;å®šä¹‰FormartSrc()
func FormartSrc()
    exec &amp;quot;w&amp;quot;
    if &amp;amp;filetype == &#39;c&#39;
        exec &amp;quot;!astyle --style=ansi -a --suffix=none %&amp;quot;
    elseif &amp;amp;filetype == &#39;cpp&#39; || &amp;amp;filetype == &#39;hpp&#39;
        exec &amp;quot;r !astyle --style=ansi --one-line=keep-statements -a --suffix=none %&amp;gt; /dev/null 2&amp;gt;&amp;amp;1&amp;quot;
    elseif &amp;amp;filetype == &#39;perl&#39;
        exec &amp;quot;!astyle --style=gnu --suffix=none %&amp;quot;
    elseif &amp;amp;filetype == &#39;py&#39;||&amp;amp;filetype == &#39;python&#39;
        exec &amp;quot;r !autopep8 -i --aggressive %&amp;quot;
    elseif &amp;amp;filetype == &#39;java&#39;
        exec &amp;quot;!astyle --style=java --suffix=none %&amp;quot;
    elseif &amp;amp;filetype == &#39;jsp&#39;
        exec &amp;quot;!astyle --style=gnu --suffix=none %&amp;quot;
    elseif &amp;amp;filetype == &#39;xml&#39;
        exec &amp;quot;!astyle --style=gnu --suffix=none %&amp;quot;
    else
        exec &amp;quot;normal gg=G&amp;quot;
        return
    endif
    exec &amp;quot;e! %&amp;quot;
endfunc
&amp;quot;ç»“æŸå®šä¹‰FormartSrc


&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;
&amp;quot;&amp;quot;å®ç”¨è®¾ç½®
&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;
if has(&amp;quot;autocmd&amp;quot;)
      autocmd BufReadPost *
          \ if line(&amp;quot;&#39;\&amp;quot;&amp;quot;) &amp;gt; 0 &amp;amp;&amp;amp; line(&amp;quot;&#39;\&amp;quot;&amp;quot;) &amp;lt;= line(&amp;quot;$&amp;quot;) |
          \   exe &amp;quot;normal g`\&amp;quot;&amp;quot; |
          \ endif
endif
&amp;quot;å½“æ‰“å¼€vimä¸”æ²¡æœ‰æ–‡ä»¶æ—¶è‡ªåŠ¨æ‰“å¼€NERDTree
autocmd vimenter * if !argc() | NERDTree | endif
&amp;quot; åªå‰© NERDTreeæ—¶è‡ªåŠ¨å…³é—­
autocmd bufenter * if (winnr(&amp;quot;$&amp;quot;) == 1 &amp;amp;&amp;amp; exists(&amp;quot;b:NERDTreeType&amp;quot;) &amp;amp;&amp;amp; b:NERDTreeType == &amp;quot;primary&amp;quot;) | q | endif

&amp;quot; è®¾ç½®å½“æ–‡ä»¶è¢«æ”¹åŠ¨æ—¶è‡ªåŠ¨è½½å…¥
set autoread
&amp;quot; quickfixæ¨¡å¼
autocmd FileType c,cpp map &amp;lt;buffer&amp;gt; &amp;lt;leader&amp;gt;&amp;lt;space&amp;gt; :w&amp;lt;cr&amp;gt;:make&amp;lt;cr&amp;gt;
&amp;quot;è‡ªåŠ¨ä¿å­˜
set autowrite
&amp;quot;set ruler                   &amp;quot; æ‰“å¼€çŠ¶æ€æ æ ‡å°º
&amp;quot;set cursorline              &amp;quot; çªå‡ºæ˜¾ç¤ºå½“å‰è¡Œ
set magic                   &amp;quot; è®¾ç½®é­”æœ¯
set guioptions-=T           &amp;quot; éšè—å·¥å…·æ 
set guioptions-=m           &amp;quot; éšè—èœå•æ 
&amp;quot; ä¸è¦ä½¿ç”¨viçš„é”®ç›˜æ¨¡å¼ï¼Œè€Œæ˜¯vimè‡ªå·±çš„
set nocompatible
&amp;quot; å»æ‰è¾“å…¥é”™è¯¯çš„æç¤ºå£°éŸ³
set noeb
&amp;quot; åœ¨å¤„ç†æœªä¿å­˜æˆ–åªè¯»æ–‡ä»¶çš„æ—¶å€™ï¼Œå¼¹å‡ºç¡®è®¤
set confirm
&amp;quot;ç¦æ­¢ç”Ÿæˆä¸´æ—¶æ–‡ä»¶
set nobackup
set noswapfile
&amp;quot;æœç´¢å¿½ç•¥å¤§å°å†™
set ignorecase
set linespace=0
&amp;quot; å¢å¼ºæ¨¡å¼ä¸­çš„å‘½ä»¤è¡Œè‡ªåŠ¨å®Œæˆæ“ä½œ
set wildmenu
&amp;quot; ä½¿å›æ ¼é”®ï¼ˆbackspaceï¼‰æ­£å¸¸å¤„ç†indent, eol, startç­‰
set backspace=2
&amp;quot; å…è®¸backspaceå’Œå…‰æ ‡é”®è·¨è¶Šè¡Œè¾¹ç•Œ
set whichwrap+=&amp;lt;,&amp;gt;,h,l
&amp;quot; å¯ä»¥åœ¨bufferçš„ä»»ä½•åœ°æ–¹ä½¿ç”¨é¼ æ ‡ï¼ˆç±»ä¼¼officeä¸­åœ¨å·¥ä½œåŒºåŒå‡»é¼ æ ‡å®šä½ï¼‰
&amp;quot;set mouse=a
set selection=exclusive
set selectmode=mouse,key
&amp;quot; é€šè¿‡ä½¿ç”¨: commandså‘½ä»¤ï¼Œå‘Šè¯‰æˆ‘ä»¬æ–‡ä»¶çš„å“ªä¸€è¡Œè¢«æ”¹å˜è¿‡
set report=0
&amp;quot; åœ¨è¢«åˆ†å‰²çš„çª—å£é—´æ˜¾ç¤ºç©ºç™½ï¼Œä¾¿äºé˜…è¯»
set fillchars=vert:\ ,stl:\ ,stlnc:\
&amp;quot; é«˜äº®æ˜¾ç¤ºåŒ¹é…çš„æ‹¬å·
set showmatch
&amp;quot; åŒ¹é…æ‹¬å·é«˜äº®çš„æ—¶é—´ï¼ˆå•ä½æ˜¯ååˆ†ä¹‹ä¸€ç§’ï¼‰
set matchtime=1
&amp;quot; å…‰æ ‡ç§»åŠ¨åˆ°bufferçš„é¡¶éƒ¨å’Œåº•éƒ¨æ—¶ä¿æŒ3è¡Œè·ç¦»
set scrolloff=3
filetype plugin indent on 
&amp;quot;æ‰“å¼€æ–‡ä»¶ç±»å‹æ£€æµ‹, åŠ äº†è¿™å¥æ‰å¯ä»¥ç”¨æ™ºèƒ½è¡¥å…¨
set completeopt=longest,menu
&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;
&amp;quot; CTagsçš„è®¾å®š  
&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;
let Tlist_Sort_Type = &amp;quot;name&amp;quot;    &amp;quot; æŒ‰ç…§åç§°æ’åº  
let Tlist_Use_Right_Window = 1  &amp;quot; åœ¨å³ä¾§æ˜¾ç¤ºçª—å£  
let Tlist_Compart_Format = 1    &amp;quot; å‹ç¼©æ–¹å¼  
let Tlist_Exist_OnlyWindow = 1  &amp;quot; å¦‚æœåªæœ‰ä¸€ä¸ªbufferï¼Œkillçª—å£ä¹Ÿkillæ‰buffer  
&amp;quot;&amp;quot;let Tlist_File_Fold_Auto_Close = 0  &amp;quot; ä¸è¦å…³é—­å…¶ä»–æ–‡ä»¶çš„tags  
&amp;quot;&amp;quot;let Tlist_Enable_Fold_Column = 0    &amp;quot; ä¸è¦æ˜¾ç¤ºæŠ˜å æ ‘  
&amp;quot;let Tlist_Show_One_File=1            &amp;quot;ä¸åŒæ—¶æ˜¾ç¤ºå¤šä¸ªæ–‡ä»¶çš„tagï¼Œåªæ˜¾ç¤ºå½“å‰æ–‡ä»¶çš„
&amp;quot;è®¾ç½®tags  
set tags=tags;  
&amp;quot;set autochdir 


&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;
&amp;quot;é»˜è®¤æ‰“å¼€Taglist 
let Tlist_Auto_Open=0 
&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot; 
&amp;quot; Tag list (ctags) 
&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot; 
let Tlist_Ctags_Cmd = &#39;/usr/local/bin/ctags&#39; 
let Tlist_Show_One_File = 1 &amp;quot;ä¸åŒæ—¶æ˜¾ç¤ºå¤šä¸ªæ–‡ä»¶çš„tagï¼Œåªæ˜¾ç¤ºå½“å‰æ–‡ä»¶çš„ 
let Tlist_File_Fold_Auto_Close = 1
let Tlist_Exit_OnlyWindow = 1 &amp;quot;å¦‚æœtaglistçª—å£æ˜¯æœ€åä¸€ä¸ªçª—å£ï¼Œåˆ™é€€å‡ºvim 
let Tlist_Use_Right_Window = 1 &amp;quot;åœ¨å³ä¾§çª—å£ä¸­æ˜¾ç¤ºtaglistçª—å£
&amp;quot; minibufexplæ’ä»¶çš„ä¸€èˆ¬è®¾ç½®
let g:miniBufExplMapWindowNavVim = 1
let g:miniBufExplMapWindowNavArrows = 1
let g:miniBufExplMapCTabSwitchBufs = 1
let g:miniBufExplModSelTarget = 1  
nmap tl :Tlist&amp;lt;cr&amp;gt;
set rtp+=~/.vim/bundle/vundle/
let g:indentLine_char = &#39;â”Š&#39;
&amp;quot;
&amp;quot;ctrlpè®¾ç½®
&amp;quot;
set wildignore+=*/tmp/*,*.so,*.swp,*.zip,*.pyc,*.png,*.jpg,*.gif     &amp;quot; MacOSX/Linux
set wildignore+=*\\tmp\\*,*.swp,*.zip,*.exe,*.pyc,*.png,*.jpg,*.gif  &amp;quot; Windows

let g:ctrlp_custom_ignore = &#39;\v[\/]\.(git|hg|svn)$&#39;
let g:ctrlp_custom_ignore = &#39;\v\.(exe|so|dll)$&#39;
let g:ctrlp_extensions = [&#39;funky&#39;]

let NERDTreeIgnore=[&#39;\.pyc&#39;]

&amp;quot;, &amp;quot;JavaScript&amp;quot;)
}
&lt;/code&gt;&lt;/pre&gt;</description>
        </item>
        <item>
        <title>redis GOè¯­è¨€å®è·µäºŒ</title>
        <link>https://zcj-git520.github.io/p/redis-go%E8%AF%AD%E8%A8%80%E5%AE%9E%E8%B7%B5%E4%BA%8C/</link>
        <pubDate>Fri, 15 Jul 2022 22:00:38 +0800</pubDate>
        
        <guid>https://zcj-git520.github.io/p/redis-go%E8%AF%AD%E8%A8%80%E5%AE%9E%E8%B7%B5%E4%BA%8C/</guid>
        <description>&lt;img src="https://zcj-git520.github.io/p/redis-go%E8%AF%AD%E8%A8%80%E5%AE%9E%E8%B7%B5%E4%BA%8C/1.png" alt="Featured image of post redis GOè¯­è¨€å®è·µäºŒ" /&gt;&lt;h2 id=&#34;redis-goè¯­è¨€å®è·µäºŒ&#34;&gt;redis GOè¯­è¨€å®è·µäºŒ&lt;/h2&gt;
&lt;h3 id=&#34;ç®€å•ä»‹ç»&#34;&gt;ç®€å•ä»‹ç»&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;ä½¿ç”¨go è¯­è¨€æ“ä½œredisæ•°æ®åº“&lt;/li&gt;
&lt;li&gt;ä½¿ç”¨çš„åº“ä¸ºï¼šgo get -u github.com/go-redis/redis&lt;/li&gt;
&lt;li&gt;å¯¹redisæ•°æ®åº“çš„mapï¼Œé›†åˆå’Œæœ‰åºé›†åˆçš„æ“ä½œ&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;ä»£ç å¦‚ä¸‹&#34;&gt;ä»£ç å¦‚ä¸‹&lt;/h3&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span class=&#34;cm&#34;&gt;/*æ“ä½œhash Mapæ•°æ®ç±»å‹*/&lt;/span&gt;
&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;r&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;RedisInfo&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;OperaHashMap&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(){&lt;/span&gt;
	&lt;span class=&#34;c1&#34;&gt;//æ·»åŠ å•ä¸ªæ•°æ®
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;	&lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;r&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;RedisDb&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;HSet&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;hKey&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;filed0&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;value0&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;).&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Err&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
	&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
		&lt;span class=&#34;nx&#34;&gt;fmt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Println&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;æ·»åŠ å•ä¸ªæ•°æ®å¤±è´¥&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
		&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt;
	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
	&lt;span class=&#34;c1&#34;&gt;// æ‰¹é‡æ·»åŠ æ•°æ®
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;	&lt;span class=&#34;nx&#34;&gt;hData&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;make&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kd&#34;&gt;map&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;kd&#34;&gt;interface&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{})&lt;/span&gt;
	&lt;span class=&#34;nx&#34;&gt;hData&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;filed1&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;value1&amp;#34;&lt;/span&gt;
	&lt;span class=&#34;nx&#34;&gt;hData&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;filed2&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;value2&amp;#34;&lt;/span&gt;
	&lt;span class=&#34;nx&#34;&gt;hData&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;filed3&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;value3&amp;#34;&lt;/span&gt;
	&lt;span class=&#34;nx&#34;&gt;hData&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;filed4&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;20&lt;/span&gt;
	&lt;span class=&#34;nx&#34;&gt;hData&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;filed5&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mf&#34;&gt;12.5&lt;/span&gt;
	&lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;r&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;RedisDb&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;HMSet&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;hKey&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;hData&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;).&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Err&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
	&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
		&lt;span class=&#34;nx&#34;&gt;fmt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Println&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;æ‰¹é‡æ·»åŠ æ•°æ®å¤±è´¥&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
		&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt;
	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
	&lt;span class=&#34;c1&#34;&gt;// å•ä¸ªè·å–æ•°æ®
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;	&lt;span class=&#34;nx&#34;&gt;value&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;r&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;RedisDb&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;HGet&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;hKey&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;filed0&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;).&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Result&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
	&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
		&lt;span class=&#34;nx&#34;&gt;fmt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Println&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;å•ä¸ªè·å–æ•°å¤±è´¥&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
		&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt;
	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
	&lt;span class=&#34;nx&#34;&gt;fmt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Println&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;value is &amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;value&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
	&lt;span class=&#34;c1&#34;&gt;// æ•´æ•°æ•°æ®çš„è‡ªå¢
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;	&lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;r&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;RedisDb&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;HIncrBy&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;hKey&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;filed4&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;50&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;).&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Err&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
	&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
		&lt;span class=&#34;nx&#34;&gt;fmt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Println&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;æ•´æ•°æ•°æ®çš„è‡ªå¢å¤±è´¥&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
		&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt;
	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
	&lt;span class=&#34;c1&#34;&gt;// æµ®ç‚¹æ•°æ•°æ®çš„è‡ªå¢
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;	&lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;r&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;RedisDb&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;HIncrByFloat&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;hKey&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;filed5&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mf&#34;&gt;52.64&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;).&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Err&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
	&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
		&lt;span class=&#34;nx&#34;&gt;fmt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Println&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;æµ®ç‚¹æ•°æ•°æ®çš„è‡ªå¢å¤±è´¥&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
		&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt;
	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
	&lt;span class=&#34;c1&#34;&gt;// è·å–æ‰€æœ‰å­—æ®µå
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;	&lt;span class=&#34;nx&#34;&gt;keys&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;_&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;r&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;RedisDb&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;HKeys&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;hKey&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;).&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Result&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
	&lt;span class=&#34;nx&#34;&gt;fmt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Println&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;keys is &amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;keys&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
	&lt;span class=&#34;c1&#34;&gt;// è·å–å­—æ®µæ•°é‡
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;	&lt;span class=&#34;nx&#34;&gt;kLen&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;_&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;r&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;RedisDb&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;HLen&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;hKey&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;).&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Result&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
	&lt;span class=&#34;nx&#34;&gt;fmt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Println&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;kLen is &amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;kLen&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
	&lt;span class=&#34;c1&#34;&gt;// æ‰¹é‡è·å–æ•°æ®
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;	&lt;span class=&#34;nx&#34;&gt;values&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;r&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;RedisDb&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;HMGet&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;hKey&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;filed1&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;filed2&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;filed3&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;).&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Result&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
	&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
		&lt;span class=&#34;nx&#34;&gt;fmt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Println&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;æ‰¹é‡è·å–æ•°æ®å¤±è´¥&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
		&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt;
	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
	&lt;span class=&#34;nx&#34;&gt;fmt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Println&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;values is &amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;values&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
	&lt;span class=&#34;c1&#34;&gt;// åˆ é™¤æ•°æ®
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;	&lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;r&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;RedisDb&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;HDel&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;hKey&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;filed1&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;filed0&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;).&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Err&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
	&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
		&lt;span class=&#34;nx&#34;&gt;fmt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Println&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;åˆ é™¤æ•°æ®å¤±è´¥&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
		&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt;
	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
	&lt;span class=&#34;c1&#34;&gt;// åˆ¤æ–­æ•°æ®æ˜¯å¦å­˜åœ¨
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;	&lt;span class=&#34;nx&#34;&gt;ok&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;_&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;r&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;RedisDb&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;HExists&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;hKey&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;filed1&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;).&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Result&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
	&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;ok&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
		&lt;span class=&#34;nx&#34;&gt;fmt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Println&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;filed1 is å­˜åœ¨çš„&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;else&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
		&lt;span class=&#34;nx&#34;&gt;fmt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Println&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;filed1 is ä¸å­˜åœ¨çš„&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
	&lt;span class=&#34;c1&#34;&gt;// è·å–æ‰€æœ‰æ•°æ®
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;	&lt;span class=&#34;nx&#34;&gt;allValues&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;r&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;RedisDb&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;HGetAll&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;hKey&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;).&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Result&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
	&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
		&lt;span class=&#34;nx&#34;&gt;fmt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Println&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;è·å–æ‰€æœ‰æ•°æ®&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
		&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt;
	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
	&lt;span class=&#34;nx&#34;&gt;fmt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Println&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;allValues is &amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;allValues&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;

&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

&lt;span class=&#34;cm&#34;&gt;/*æ“ä½œseté›†åˆ*/&lt;/span&gt;
&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;r&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;RedisInfo&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;OperaSet&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
	&lt;span class=&#34;c1&#34;&gt;// æ·»åŠ æ•°æ®
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;	&lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;r&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;RedisDb&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;SAdd&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;sKey&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;test1&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;value1&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;10&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;25&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;mf&#34;&gt;3.215&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;).&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Err&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
	&lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;r&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;RedisDb&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;SAdd&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;sKey1&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;value1&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;110&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;25&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;mf&#34;&gt;3.215&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;ff&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;zvj&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;25&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;).&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Err&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
	&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
		&lt;span class=&#34;nx&#34;&gt;fmt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Println&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;æ·»åŠ æ•°æ®å¤±è´¥&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
		&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt;
	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
	&lt;span class=&#34;c1&#34;&gt;// è·å–æ•°æ®ä¸ªæ•°
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;	&lt;span class=&#34;nx&#34;&gt;cLen&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;_&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;r&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;RedisDb&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;SCard&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;sKey&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;).&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Result&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
	&lt;span class=&#34;nx&#34;&gt;fmt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Println&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;cLen is &amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;cLen&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
	&lt;span class=&#34;c1&#34;&gt;// åˆ é™¤ç¬¬ä¸€ä¸ªæ•°æ®
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;	&lt;span class=&#34;nx&#34;&gt;fData&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;_&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;r&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;RedisDb&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;SPop&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;sKey&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;).&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Result&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
	&lt;span class=&#34;nx&#34;&gt;fmt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Println&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;ç¬¬ä¸€ä¸ªæ•°æ®ä¸ºï¼š&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;fData&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
	&lt;span class=&#34;c1&#34;&gt;// åˆ é™¤æŸä¸ªå…ƒç´ ï¼Œå¹¶è¿”å›é›†åˆæ•°é‡
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;	&lt;span class=&#34;nx&#34;&gt;cLen&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;_&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;r&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;RedisDb&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;SRem&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;sKey&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;value1&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;).&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Result&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
	&lt;span class=&#34;nx&#34;&gt;fmt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Println&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;åˆ é™¤åcLen is &amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;cLen&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
	&lt;span class=&#34;c1&#34;&gt;// åˆ¤æ–­æŸä¸ªå…ƒç´ æ˜¯å¦å­˜åœ¨
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;	&lt;span class=&#34;nx&#34;&gt;ok&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;_&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;r&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;RedisDb&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;SIsMember&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;sKey&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;value1&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;).&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Result&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
	&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;ok&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
		&lt;span class=&#34;nx&#34;&gt;fmt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Println&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;value1 is å­˜åœ¨&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;else&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
		&lt;span class=&#34;nx&#34;&gt;fmt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Println&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;value1 is ä¸å­˜åœ¨&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
	&lt;span class=&#34;c1&#34;&gt;// è·å–æ‰€æœ‰é›†åˆæ•°æ®
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;	&lt;span class=&#34;nx&#34;&gt;sDataS&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;_&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;r&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;RedisDb&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;SMembers&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;sKey&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;).&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Result&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
	&lt;span class=&#34;nx&#34;&gt;fmt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Println&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;sDataS is &amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;sDataS&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
	&lt;span class=&#34;c1&#34;&gt;// æ±‚äº¤é›†å¹¶ä¿å­˜åœ¨æŸä¸ªé›†åˆä¸­
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;	&lt;span class=&#34;nx&#34;&gt;dataLen&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;_&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;r&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;RedisDb&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;SInterStore&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;sInterStore&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;sKey&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;sKey1&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;).&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Result&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
	&lt;span class=&#34;nx&#34;&gt;fmt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Println&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;äº¤é›†æ•°æ®ä¸ªæ•°ä¸ºï¼š&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;dataLen&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
	&lt;span class=&#34;c1&#34;&gt;// æ±‚å·®é›†å¹¶ä¿å­˜åœ¨æŸä¸ªé›†åˆä¸­
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;	&lt;span class=&#34;nx&#34;&gt;dataLen&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;_&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;r&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;RedisDb&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;SDiffStore&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;sDiffStore&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;sKey&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;sKey1&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;).&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Result&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
	&lt;span class=&#34;nx&#34;&gt;fmt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Println&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;å·®é›†æ•°æ®ä¸ªæ•°ä¸ºï¼š&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;dataLen&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
	&lt;span class=&#34;c1&#34;&gt;// æ±‚å¹¶é›†å¹¶ä¿å­˜åœ¨æŸä¸ªé›†åˆä¸­
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;	&lt;span class=&#34;nx&#34;&gt;dataLen&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;_&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;r&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;RedisDb&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;SUnionStore&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;sUnionStore&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;sKey&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;sKey1&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;).&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Result&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
	&lt;span class=&#34;nx&#34;&gt;fmt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Println&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;å¹¶é›†æ•°æ®ä¸ªæ•°ä¸ºï¼š&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;dataLen&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;

&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

&lt;span class=&#34;cm&#34;&gt;/*æ“ä½œæœ‰åºé›†åˆ*/&lt;/span&gt;
&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;r&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;RedisInfo&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;OperaSortSet&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
	&lt;span class=&#34;c1&#34;&gt;// æ·»åŠ æ•°æ®
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;	&lt;span class=&#34;nx&#34;&gt;languages&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[]&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;redis&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Z&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
		&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Score&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;mf&#34;&gt;90.0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;Member&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;Golang&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;},&lt;/span&gt;
		&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Score&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;mf&#34;&gt;98.0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;Member&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;Java&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;},&lt;/span&gt;
		&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Score&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;mf&#34;&gt;95.0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;Member&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;Python&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;},&lt;/span&gt;
		&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Score&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;mf&#34;&gt;97.0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;Member&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;JavaScript&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;},&lt;/span&gt;
		&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Score&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;mf&#34;&gt;92.0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;Member&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;C/C++&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;},&lt;/span&gt;
	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
	&lt;span class=&#34;nx&#34;&gt;num&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;r&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;RedisDb&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;ZAdd&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;zKey&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;languages&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;...&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;).&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Result&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
	&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
		&lt;span class=&#34;nx&#34;&gt;fmt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Println&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;æ·»åŠ æ•°æ®&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
		&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt;
	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
	&lt;span class=&#34;nx&#34;&gt;fmt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Println&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;add æ•°æ®ç»™ä¸ªæ•°ä¸º&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;num&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
	&lt;span class=&#34;c1&#34;&gt;// å¢åŠ åˆ†æ—¶
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;	&lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;r&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;RedisDb&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;ZIncrBy&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;zKey&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;3&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;Golang&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;).&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Err&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
	&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
		&lt;span class=&#34;nx&#34;&gt;fmt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Println&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;å¢åˆ†æ•°å¤±è´¥&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
		&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt;
	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
	&lt;span class=&#34;c1&#34;&gt;// è¿”å›æ•°æ®ä¸ªæ•°
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;	&lt;span class=&#34;nx&#34;&gt;zLen&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;_&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;r&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;RedisDb&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;ZCard&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;zKey&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;).&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Result&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
	&lt;span class=&#34;nx&#34;&gt;fmt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Println&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;zLen is &amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;zLen&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
	&lt;span class=&#34;c1&#34;&gt;// ç»Ÿè®¡åˆ†æ•°æ®µçš„å…ƒç´ ä¸ªæ•°
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;	&lt;span class=&#34;nx&#34;&gt;zLen&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;_&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;r&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;RedisDb&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;ZCount&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;zKey&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;0&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;150&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;).&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Result&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
	&lt;span class=&#34;nx&#34;&gt;fmt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Println&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;count zLen is &amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;zLen&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
	&lt;span class=&#34;c1&#34;&gt;// æ’åº
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;	&lt;span class=&#34;nx&#34;&gt;value&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;_&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;r&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;RedisDb&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;ZRange&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;zKey&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;).&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Result&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
	&lt;span class=&#34;nx&#34;&gt;fmt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Println&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;value is &amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;value&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
	&lt;span class=&#34;c1&#34;&gt;// åˆ é™¤æŸä¸ªå…ƒç´ 
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;	&lt;span class=&#34;nx&#34;&gt;r&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;RedisDb&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;ZRem&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;zKey&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;JavaScript&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</description>
        </item>
        <item>
        <title>redis GOè¯­è¨€å®è·µä¸€</title>
        <link>https://zcj-git520.github.io/p/redis-go%E8%AF%AD%E8%A8%80%E5%AE%9E%E8%B7%B5%E4%B8%80/</link>
        <pubDate>Fri, 08 Jul 2022 22:00:38 +0800</pubDate>
        
        <guid>https://zcj-git520.github.io/p/redis-go%E8%AF%AD%E8%A8%80%E5%AE%9E%E8%B7%B5%E4%B8%80/</guid>
        <description>&lt;img src="https://zcj-git520.github.io/p/redis-go%E8%AF%AD%E8%A8%80%E5%AE%9E%E8%B7%B5%E4%B8%80/1.png" alt="Featured image of post redis GOè¯­è¨€å®è·µä¸€" /&gt;&lt;h2 id=&#34;redis-goè¯­è¨€å®è·µä¸€&#34;&gt;redis GOè¯­è¨€å®è·µä¸€&lt;/h2&gt;
&lt;h3 id=&#34;ç®€å•ä»‹ç»&#34;&gt;ç®€å•ä»‹ç»&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;ä½¿ç”¨go è¯­è¨€æ“ä½œredisæ•°æ®åº“&lt;/li&gt;
&lt;li&gt;ä½¿ç”¨çš„åº“ä¸ºï¼šgo get -u github.com/go-redis/redis&lt;/li&gt;
&lt;li&gt;å¯¹redisæ•°æ®åº“çš„è¿æ¥ï¼Œå¯¹å­—ç¬¦ä¸²å’Œåˆ—è¡¨çš„æ“ä½œ&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;ä»£ç å¦‚ä¸‹&#34;&gt;ä»£ç å¦‚ä¸‹&lt;/h3&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span class=&#34;kn&#34;&gt;package&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;main&lt;/span&gt;

&lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;
	&lt;span class=&#34;s&#34;&gt;&amp;#34;fmt&amp;#34;&lt;/span&gt;
	&lt;span class=&#34;s&#34;&gt;&amp;#34;github.com/go-redis/redis&amp;#34;&lt;/span&gt;
	&lt;span class=&#34;s&#34;&gt;&amp;#34;log&amp;#34;&lt;/span&gt;
	&lt;span class=&#34;s&#34;&gt;&amp;#34;time&amp;#34;&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;

&lt;span class=&#34;kd&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;
	&lt;span class=&#34;nx&#34;&gt;ADDR&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;192.168.1.128:6379&amp;#34;&lt;/span&gt;
	&lt;span class=&#34;nx&#34;&gt;PASSWORD&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;
	&lt;span class=&#34;nx&#34;&gt;DB&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;

&lt;span class=&#34;kd&#34;&gt;type&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;RedisInfo&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;struct&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
	&lt;span class=&#34;nx&#34;&gt;Option&lt;/span&gt;    &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;redis&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Options&lt;/span&gt;
	&lt;span class=&#34;nx&#34;&gt;RedisDb&lt;/span&gt;   &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;redis&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Client&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;


&lt;span class=&#34;c1&#34;&gt;// è¿æ¥redisæ•°æ®åº“
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;r&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;RedisInfo&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;ConnRedis&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;error&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
	&lt;span class=&#34;nx&#34;&gt;redisDb&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;redis&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;NewClient&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;r&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Option&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
	&lt;span class=&#34;c1&#34;&gt;// åˆ¤æ–­æ˜¯å¦æˆåŠŸè¿æ¥æ•°æ®åº“
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;	&lt;span class=&#34;nx&#34;&gt;_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;redisDb&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Ping&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;().&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Result&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
	&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
		&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt;
	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
	&lt;span class=&#34;nx&#34;&gt;r&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;RedisDb&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;redisDb&lt;/span&gt;
	&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

&lt;span class=&#34;cm&#34;&gt;/* æ“ä½œå­—ç¬¦ä¸²ç±»å‹ */&lt;/span&gt;
&lt;span class=&#34;c1&#34;&gt;// æ“ä½œset/get
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;r&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;RedisInfo&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;OperaStringSGet&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;  &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
	&lt;span class=&#34;c1&#34;&gt;// æ·»åŠ key/value å¯è®¾ç½®è¿‡æœŸæ—¶é—´
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;	&lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;r&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;RedisDb&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Set&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;Key1&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;value1&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;4&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;time&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Millisecond&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;).&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Err&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
	&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
		&lt;span class=&#34;nx&#34;&gt;fmt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Println&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;æ·»åŠ keyå¤±è´¥&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
		&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt;
	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
	&lt;span class=&#34;nx&#34;&gt;time&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Sleep&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;4&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;time&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Millisecond&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
	&lt;span class=&#34;c1&#34;&gt;// è·å–keyçš„å€¼
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;	&lt;span class=&#34;nx&#34;&gt;value&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;r&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;RedisDb&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Get&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;Key1&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;).&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Result&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
	&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
		&lt;span class=&#34;nx&#34;&gt;fmt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Println&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;è·å–keyçš„å€¼å¤±è´¥&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
		&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt;
	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
	&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;value&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
		&lt;span class=&#34;nx&#34;&gt;fmt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Println&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;key ä¸å­˜åœ¨&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
		&lt;span class=&#34;c1&#34;&gt;// å¦‚æœä¸å­˜åœ¨åˆ™å°±æ·»åŠ , ä¸è®¾ç½®è¿‡æœŸæ—¶é—´
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;		&lt;span class=&#34;nx&#34;&gt;r&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;RedisDb&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;SetNX&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;Key1&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;setnx value&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;else&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
		&lt;span class=&#34;nx&#34;&gt;fmt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Printf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;è·å¾—valueï¼š%v \n&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;value&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

&lt;span class=&#34;c1&#34;&gt;// æ“ä½œmset/mget
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;r&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;RedisInfo&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;OperaStringMSGet&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;  &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
	&lt;span class=&#34;c1&#34;&gt;// æ‰¹é‡æ·»åŠ key-value
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;	&lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;r&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;RedisDb&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;MSet&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;key0&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;value0&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;key2&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;value2&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;key3&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;value3&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;key4&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;value4&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;).&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Err&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
	&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
		&lt;span class=&#34;nx&#34;&gt;fmt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Printf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;æ‰¹é‡æ·»åŠ key-value å¤±è´¥ %v \n&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
		&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt;
	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
	&lt;span class=&#34;c1&#34;&gt;// æ‰¹é‡è·å–value
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;	&lt;span class=&#34;nx&#34;&gt;values&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;r&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;RedisDb&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;MGet&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;key0&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;key1&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;key2&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;key3&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;key4&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;).&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Result&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
	&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
		&lt;span class=&#34;nx&#34;&gt;fmt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Printf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;æ‰¹é‡è·å–value å¤±è´¥ï¼š%v \n&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
		&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt;
	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
	&lt;span class=&#34;nx&#34;&gt;fmt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Printf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;values is : %v\n&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;values&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
	&lt;span class=&#34;c1&#34;&gt;// åˆ é™¤keys
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;	&lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;r&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;RedisDb&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Del&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;key0&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;).&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Err&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
	&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
		&lt;span class=&#34;nx&#34;&gt;fmt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Printf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;åˆ é™¤keys å¤±è´¥ %v\n&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
		&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt;
	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
	&lt;span class=&#34;c1&#34;&gt;// è·å¾—æŒ‡å®šçš„keys
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;	&lt;span class=&#34;nx&#34;&gt;keys&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;r&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;RedisDb&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Keys&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;k*&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;).&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Result&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
	&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
		&lt;span class=&#34;nx&#34;&gt;fmt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Printf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34; è·å¾—æŒ‡å®šçš„keys å¤±è´¥ %v\n&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;else&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
		&lt;span class=&#34;nx&#34;&gt;fmt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Printf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;keys is :%v\n&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;keys&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

&lt;span class=&#34;c1&#34;&gt;// æ“ä½œè‡ªå¢è‡ªå‡
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;r&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;RedisInfo&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;OperaStringNcr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(){&lt;/span&gt;
	&lt;span class=&#34;c1&#34;&gt;// å¢åŠ æ•°æ®
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;	&lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;r&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;RedisDb&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Set&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;score&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;120&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;).&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Err&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
	&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
		&lt;span class=&#34;nx&#34;&gt;fmt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Println&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;å¢åŠ æ•°æ®å¤±è´¥&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
		&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt;
	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
	&lt;span class=&#34;c1&#34;&gt;//è‡ªå¢æ“ä½œ
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;	&lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;r&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;RedisDb&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Incr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;score&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;).&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Err&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
	&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
		&lt;span class=&#34;nx&#34;&gt;fmt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Println&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;è‡ªå¢å¤±è´¥&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
		&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt;
	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
	&lt;span class=&#34;nx&#34;&gt;value&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;_&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;r&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;RedisDb&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Get&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;score&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;).&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Result&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
	&lt;span class=&#34;nx&#34;&gt;fmt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Printf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;æˆç»©ä¸º:%v\n&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;value&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
	&lt;span class=&#34;c1&#34;&gt;// æ­¥é•¿å¢åŠ 
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;	&lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;r&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;RedisDb&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;IncrBy&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;score&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;10&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;).&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Err&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
	&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
		&lt;span class=&#34;nx&#34;&gt;fmt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Println&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;æ­¥é•¿å¢åŠ å¤±è´¥&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
		&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt;
	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
	&lt;span class=&#34;nx&#34;&gt;value&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;_&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;r&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;RedisDb&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Get&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;score&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;).&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Result&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
	&lt;span class=&#34;nx&#34;&gt;fmt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Printf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;æˆç»©ä¸º:%v\n&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;value&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
	&lt;span class=&#34;c1&#34;&gt;// è‡ªå‡
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;	&lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;r&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;RedisDb&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Decr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;score&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;).&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Err&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
	&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
		&lt;span class=&#34;nx&#34;&gt;fmt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Println&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;è‡ªå‡å¤±è´¥&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
		&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt;
	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
	&lt;span class=&#34;nx&#34;&gt;value&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;_&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;r&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;RedisDb&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Get&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;score&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;).&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Result&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
	&lt;span class=&#34;nx&#34;&gt;fmt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Printf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;æˆç»©ä¸º:%v\n&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;value&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
	&lt;span class=&#34;c1&#34;&gt;// æ­¥é•¿å‡å°‘
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;	&lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;r&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;RedisDb&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;DecrBy&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;score&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;20&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;).&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Err&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
	&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
		&lt;span class=&#34;nx&#34;&gt;fmt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Println&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;æ­¥é•¿å‡å°‘å¤±è´¥&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
		&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt;
	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
	&lt;span class=&#34;nx&#34;&gt;value&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;_&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;r&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;RedisDb&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Get&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;score&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;).&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Result&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
	&lt;span class=&#34;nx&#34;&gt;fmt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Printf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;æˆç»©ä¸º:%v\n&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;value&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
	&lt;span class=&#34;c1&#34;&gt;// æµ®ç‚¹æ•°çš„è‡ªå¢/è‡ªå‡
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;	&lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;r&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;RedisDb&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;IncrByFloat&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;score&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;mf&#34;&gt;20.5&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;).&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Err&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
	&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
		&lt;span class=&#34;nx&#34;&gt;fmt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Println&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;æµ®ç‚¹æ•°çš„è‡ªå¢/è‡ªå‡å¤±è´¥&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
		&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt;
	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
	&lt;span class=&#34;nx&#34;&gt;value&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;_&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;r&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;RedisDb&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Get&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;score&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;).&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Result&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
	&lt;span class=&#34;nx&#34;&gt;fmt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Printf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;æˆç»©ä¸º:%v\n&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;value&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

&lt;span class=&#34;cm&#34;&gt;/* listç±»å‹çš„æ“ä½œ*/&lt;/span&gt;
&lt;span class=&#34;c1&#34;&gt;//
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;r&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;RedisInfo&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;OperaListLData&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
	&lt;span class=&#34;c1&#34;&gt;// å·¦è¾¹Pushä»»æ„å¢åŠ key-value
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;	&lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;r&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;RedisDb&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;LPush&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;Lkey1&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;Lvalue1&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;Lvalue2&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;Lvalue3&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;).&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Err&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
	&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
		&lt;span class=&#34;nx&#34;&gt;fmt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Println&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;å·¦è¾¹Pushå¢åŠ keyå¤±è´¥ï¼š&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
		&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt;
	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
	&lt;span class=&#34;c1&#34;&gt;// å·¦è¾¹å¢åŠ æ•°æ®ï¼Œå½“listä¸å­˜åœ¨æ—¶ï¼Œä¸èƒ½å¢åŠ 
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;	&lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;r&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;RedisDb&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;LPushX&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;LXkey&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;LXValue&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;).&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Err&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
	&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
		&lt;span class=&#34;nx&#34;&gt;fmt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Println&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;å·¦è¾¹Pushå¢åŠ keyå¤±è´¥ï¼š&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
		&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt;
	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
	&lt;span class=&#34;c1&#34;&gt;// è·å¾—listé•¿åº¦
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;	&lt;span class=&#34;nx&#34;&gt;LLen&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;r&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;RedisDb&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;LLen&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;Lkey1&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;).&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Result&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
	&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
		&lt;span class=&#34;nx&#34;&gt;fmt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Println&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;è·å¾—listé•¿åº¦å¤±è´¥ï¼š&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
		&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt;
	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
	&lt;span class=&#34;nx&#34;&gt;fmt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Println&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;Lkey1 list len is :&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;LLen&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
	&lt;span class=&#34;c1&#34;&gt;// è·å–åˆ—è¡¨æ•°æ®
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;	&lt;span class=&#34;nx&#34;&gt;LData&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;r&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;RedisDb&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;LRange&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;Lkey1&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;).&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Result&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
	&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
		&lt;span class=&#34;nx&#34;&gt;fmt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Println&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;è·å–åˆ—è¡¨æ•°æ®å¤±è´¥&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
		&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt;
	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
	&lt;span class=&#34;nx&#34;&gt;fmt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Println&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;åˆ—è¡¨æ•°æ®ä¸ºï¼š&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;LData&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
	&lt;span class=&#34;c1&#34;&gt;// ä¿®æ”¹listä¸­å­˜åœ¨çš„value
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;	&lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;r&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;RedisDb&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;LSet&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;Lkey1&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;updateValue&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;).&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Err&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
	&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
		&lt;span class=&#34;nx&#34;&gt;fmt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Println&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;ä¿®æ”¹å€¼å¤±è´¥&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
		&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt;
	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
	&lt;span class=&#34;c1&#34;&gt;// ç§»é™¤å¹¶è¿”å›listå·¦è¾¹ç¬¬ä¸€ä¸ªæ•°æ®
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;	&lt;span class=&#34;nx&#34;&gt;PData&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;r&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;RedisDb&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;LPop&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;Lkey1&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;).&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Result&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
	&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
		&lt;span class=&#34;nx&#34;&gt;fmt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Println&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;ç§»é™¤æ•°æ®å¤±è´¥&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
		&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt;
	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
	&lt;span class=&#34;nx&#34;&gt;fmt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Println&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;PData is :&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;PData&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
	&lt;span class=&#34;c1&#34;&gt;// ç§»é™¤listä¸­é‡å¤çš„value,countä¸º1æ—¶ï¼Œç§»é™¤ä¸€ä¸ª
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;	&lt;span class=&#34;nx&#34;&gt;count&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;r&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;RedisDb&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;LRem&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;Lkey1&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;Lvalue1&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;).&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Result&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
	&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
		&lt;span class=&#34;nx&#34;&gt;fmt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Println&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;ç§»é™¤å¤šä¸ªé‡è¯»çš„valueå€¼å¤±è´¥&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
		&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt;
	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
	&lt;span class=&#34;nx&#34;&gt;fmt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Println&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;count is&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;count&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
	&lt;span class=&#34;c1&#34;&gt;// åˆ—è¡¨ç´¢å¼•è·å¾—æ•°æ®
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;	&lt;span class=&#34;nx&#34;&gt;data&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;r&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;RedisDb&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;LIndex&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;Lkey1&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;).&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Result&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
	&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
		&lt;span class=&#34;nx&#34;&gt;fmt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Println&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;è·å¾—æ•°æ®å¤±è´¥&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
		&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt;
	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
	&lt;span class=&#34;nx&#34;&gt;fmt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Println&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;data is &amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;data&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
	&lt;span class=&#34;c1&#34;&gt;// å°†æŸä¸ªæ•°æ®æ’å…¥åˆ°æŸä¸ªå€¼å‰(before)æ’å…¥åˆ°æŸä¸ªå€¼ä¹‹å(after)
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;	&lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;r&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;RedisDb&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;LInsert&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;Lkey1&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;before&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;updateValue&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;insetData&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;).&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Err&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
	&lt;span class=&#34;c1&#34;&gt;//err := r.RedisDb.LInsertBefore(&amp;#34;Lkey1&amp;#34;, &amp;#34;updateValue&amp;#34;, &amp;#34;insetData&amp;#34;).Err()
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;	&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
		&lt;span class=&#34;nx&#34;&gt;fmt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Println&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;æ’å…¥æ•°æ®å¤±è´¥&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
		&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt;
	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
	&lt;span class=&#34;c1&#34;&gt;// æˆªå–åç§°ä¸ºkeyçš„list
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;	&lt;span class=&#34;nx&#34;&gt;ok&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;r&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;RedisDb&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;LTrim&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;Lkey1&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;3&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;).&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Result&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
	&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
		&lt;span class=&#34;nx&#34;&gt;fmt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Println&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;è·å–æ–°çš„listå¤±è´¥&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
		&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt;
	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
	&lt;span class=&#34;nx&#34;&gt;fmt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Println&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;ok&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
	&lt;span class=&#34;nx&#34;&gt;LData&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;r&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;RedisDb&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;LRange&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;Lkey1&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;).&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Result&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
	&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
		&lt;span class=&#34;nx&#34;&gt;fmt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Println&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;è·å–åˆ—è¡¨æ•°æ®å¤±è´¥&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
		&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt;
	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
	&lt;span class=&#34;nx&#34;&gt;fmt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Println&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;åˆ—è¡¨æ•°æ®ä¸ºï¼š&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;LData&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;main&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
	&lt;span class=&#34;nx&#34;&gt;opt&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;redis&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Options&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
		&lt;span class=&#34;nx&#34;&gt;Network&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;            &lt;span class=&#34;s&#34;&gt;&amp;#34;tcp&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;    &lt;span class=&#34;c1&#34;&gt;// ç½‘ç»œç±»å‹ tcp æˆ–è€… unix.
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;		&lt;span class=&#34;nx&#34;&gt;Addr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;               &lt;span class=&#34;nx&#34;&gt;ADDR&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
		&lt;span class=&#34;nx&#34;&gt;OnConnect&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;          &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;      &lt;span class=&#34;c1&#34;&gt;// æ–°å»ºä¸€ä¸ªredisè¿æ¥çš„æ—¶å€™ï¼Œä¼šå›è°ƒè¿™ä¸ªå‡½æ•°
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;		&lt;span class=&#34;nx&#34;&gt;Password&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;           &lt;span class=&#34;nx&#34;&gt;PASSWORD&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;// redisæ•°æ®åº“è¿æ¥çš„å¯†ç 
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;		&lt;span class=&#34;nx&#34;&gt;DB&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;                 &lt;span class=&#34;nx&#34;&gt;DB&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;       &lt;span class=&#34;c1&#34;&gt;// redisæ•°æ®åº“ï¼Œåºå·ä»0å¼€å§‹ï¼Œé»˜è®¤æ˜¯0ï¼Œå¯ä»¥ä¸ç”¨è®¾ç½®
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;		&lt;span class=&#34;nx&#34;&gt;MaxRetries&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;         &lt;span class=&#34;mi&#34;&gt;5&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;        &lt;span class=&#34;c1&#34;&gt;//  redisæ“ä½œå¤±è´¥æœ€å¤§é‡è¯•æ¬¡æ•°ï¼Œé»˜è®¤ä¸é‡è¯•ã€‚
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;		&lt;span class=&#34;cm&#34;&gt;/*
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt;			MinRetryBackoff:    0,        // æœ€å°é‡è¯•æ—¶é—´é—´éš”  é»˜è®¤æ˜¯ 8ms ; -1 è¡¨ç¤ºå…³é—­
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt;			MaxRetryBackoff:    0,        // æœ€å°é‡è¯•æ—¶é—´é—´éš”  é»˜è®¤æ˜¯ 512ms ; -1 è¡¨ç¤ºå…³é—­
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt;			DialTimeout:        0,        // redisè¿æ¥è¶…æ—¶æ—¶é—´. é»˜è®¤ä¸º5ç§’
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt;			ReadTimeout:        0,        // socketè¯»å–è¶…æ—¶æ—¶é—´ é»˜è®¤æ—¶é—´ä¸º3ç§’
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt;			WriteTimeout:       0,        // socketå†™è¶…æ—¶æ—¶é—´
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt;			PoolSize:           0,        // redisè¿æ¥æ± çš„æœ€å¤§è¿æ¥æ•°.é»˜è®¤è¿æ¥æ± å¤§å°ç­‰äº cpuä¸ªæ•° * 10
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt;			MinIdleConns:       0,        //redisè¿æ¥æ± æœ€å°ç©ºé—²è¿æ¥æ•°.
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt;			MaxConnAge:         0,        // redisè¿æ¥æœ€å¤§çš„å­˜æ´»æ—¶é—´ï¼Œé»˜è®¤ä¸ä¼šå…³é—­è¿‡æ—¶çš„è¿æ¥.
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt;			PoolTimeout:        0,        // å½“ä½ ä»redisè¿æ¥æ± è·å–ä¸€ä¸ªè¿æ¥ä¹‹åï¼Œè¿æ¥æ± æœ€å¤šç­‰å¾…è¿™ä¸ªæ‹¿å‡ºå»çš„è¿æ¥å¤šé•¿æ—¶é—´ã€‚  é»˜è®¤æ˜¯ç­‰å¾… ReadTimeout + 1 ç§’.
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt;			IdleTimeout:        0,        // redisè¿æ¥æ± å¤šä¹…ä¼šå…³é—­ä¸€ä¸ªç©ºé—²è¿æ¥. é»˜è®¤æ˜¯ 5 åˆ†é’Ÿ. -1 åˆ™è¡¨ç¤ºå…³é—­è¿™ä¸ªé…ç½®é¡¹
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt;			IdleCheckFrequency: 0,        // å¤šé•¿æ—¶é—´æ£€æµ‹ä¸€ä¸‹ï¼Œç©ºé—²è¿æ¥  é»˜è®¤æ˜¯ 1 åˆ†é’Ÿ. -1 è¡¨ç¤ºå…³é—­ç©ºé—²è¿æ¥æ£€æµ‹
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt;			TLSConfig:          nil,      // è¦ä½¿ç”¨çš„TLSé…ç½®ã€‚è®¾ç½®TLSæ—¶å°†è¿›è¡Œåå•†
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt;		*/&lt;/span&gt;
	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
	&lt;span class=&#34;nx&#34;&gt;redisClient&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;RedisInfo&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
		&lt;span class=&#34;nx&#34;&gt;Option&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;  &lt;span class=&#34;nx&#34;&gt;opt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
		&lt;span class=&#34;nx&#34;&gt;RedisDb&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
	&lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;redisClient&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;ConnRedis&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
	&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
		&lt;span class=&#34;nx&#34;&gt;log&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Fatal&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;redis æ•°æ®åº“è¿æ¥å¤±è´¥ï¼ï¼ï¼&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
	&lt;span class=&#34;nx&#34;&gt;fmt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Println&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;æ•°æ®åº“è¿æ¥æˆåŠŸ&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
	&lt;span class=&#34;nx&#34;&gt;redisClient&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;OperaStringSGet&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
	&lt;span class=&#34;nx&#34;&gt;redisClient&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;OperaStringMSGet&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
	&lt;span class=&#34;nx&#34;&gt;redisClient&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;OperaStringNcr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
	&lt;span class=&#34;nx&#34;&gt;redisClient&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;OperaListLData&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</description>
        </item>
        <item>
        <title>redis å¸¸ç”¨å‘½ä»¤çš„å®è·µ</title>
        <link>https://zcj-git520.github.io/p/redis-%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4%E7%9A%84%E5%AE%9E%E8%B7%B5/</link>
        <pubDate>Fri, 01 Jul 2022 22:00:38 +0800</pubDate>
        
        <guid>https://zcj-git520.github.io/p/redis-%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4%E7%9A%84%E5%AE%9E%E8%B7%B5/</guid>
        <description>&lt;img src="https://zcj-git520.github.io/p/redis-%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4%E7%9A%84%E5%AE%9E%E8%B7%B5/image-20220703184326525.png" alt="Featured image of post redis å¸¸ç”¨å‘½ä»¤çš„å®è·µ" /&gt;&lt;h2 id=&#34;redis-å¸¸ç”¨å‘½ä»¤çš„å®è·µ&#34;&gt;redis å¸¸ç”¨å‘½ä»¤çš„å®è·µ&lt;/h2&gt;
&lt;h3 id=&#34;ç»“æ„åŒ–ä¸éç»“æ„åŒ–&#34;&gt;ç»“æ„åŒ–ä¸éç»“æ„åŒ–&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;å…³ç³»å‹æ•°æ®åº“&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;ç»“æ„åŒ–&lt;/li&gt;
&lt;li&gt;å…³è”æ€§&lt;/li&gt;
&lt;li&gt;sqlæŸ¥è¯¢&lt;/li&gt;
&lt;li&gt;æ»¡è¶³äº‹åŠ¡çš„ACID&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;![](C:\Users\90953\AppData\Roaming&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;éå…³ç³»å‹æ•°æ®&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;éç»“æ„åŒ–&lt;/li&gt;
&lt;li&gt;æ— å…³è”æ€§&lt;/li&gt;
&lt;li&gt;ésql&lt;/li&gt;
&lt;li&gt;base(åŸºç¡€æ€§çš„äº‹åŠ¡)&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 211; 
			flex-basis: 506px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/redis-%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4%E7%9A%84%E5%AE%9E%E8%B7%B5/image-20220629212003780.png&#34; data-size=&#34;707x335&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/redis-%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4%E7%9A%84%E5%AE%9E%E8%B7%B5/image-20220629212003780.png&#34;
			width=&#34;707&#34;
			height=&#34;335&#34;
			srcset=&#34;https://zcj-git520.github.io/p/redis-%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4%E7%9A%84%E5%AE%9E%E8%B7%B5/image-20220629212003780_hudd6e20394e366a08e69fb4c61c5734f4_96628_480x0_resize_box_3.png 480w, https://zcj-git520.github.io/p/redis-%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4%E7%9A%84%E5%AE%9E%E8%B7%B5/image-20220629212003780_hudd6e20394e366a08e69fb4c61c5734f4_96628_1024x0_resize_box_3.png 1024w&#34;
			loading=&#34;lazy&#34;
			&gt;
	&lt;/a&gt;
	
&lt;/figure&gt;&lt;/p&gt;
&lt;h3 id=&#34;redis-é€šç”¨å‘½ä»¤&#34;&gt;redis é€šç”¨å‘½ä»¤&lt;/h3&gt;
&lt;p&gt;é€šç”¨æŒ‡ä»¤æ˜¯éƒ¨åˆ†æ•°æ®ç±»å‹çš„ï¼Œéƒ½å¯ä»¥ä½¿ç”¨çš„æŒ‡ä»¤ï¼Œå¸¸è§çš„æœ‰ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;KEYS:æŸ¥çœ‹ç¬¦åˆæ¨¡æ¿çš„æ‰€æœ‰key&lt;/li&gt;
&lt;li&gt;delï¼šåˆ é™¤æŒ‡å®šçš„key&lt;/li&gt;
&lt;li&gt;exists:åˆ¤è¯»keyæ˜¯å¦å­˜åœ¨&lt;/li&gt;
&lt;li&gt;expire:ç»™ä¸€ä¸ªå¯ä»¥è®¾ç½®æœ‰æ•ˆæœŸï¼ˆå•ä½æ—¶é—´ä¸ºsï¼‰ï¼Œæœ‰æ•ˆæœŸåˆ°æ—¶ä¼šè‡ªåŠ¨åˆ é™¤key&lt;/li&gt;
&lt;li&gt;ttl:æŸ¥çœ‹keyçš„æœ‰æ•ˆæœŸ&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 81; 
			flex-basis: 195px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/redis-%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4%E7%9A%84%E5%AE%9E%E8%B7%B5/image-20220703171413218.png&#34; data-size=&#34;642x787&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/redis-%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4%E7%9A%84%E5%AE%9E%E8%B7%B5/image-20220703171413218.png&#34;
			width=&#34;642&#34;
			height=&#34;787&#34;
			srcset=&#34;https://zcj-git520.github.io/p/redis-%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4%E7%9A%84%E5%AE%9E%E8%B7%B5/image-20220703171413218_hu13d9b8fc245b7a270dec9132ccbfeff5_88006_480x0_resize_box_3.png 480w, https://zcj-git520.github.io/p/redis-%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4%E7%9A%84%E5%AE%9E%E8%B7%B5/image-20220703171413218_hu13d9b8fc245b7a270dec9132ccbfeff5_88006_1024x0_resize_box_3.png 1024w&#34;
			loading=&#34;lazy&#34;
			&gt;
	&lt;/a&gt;
	
&lt;/figure&gt;&lt;/p&gt;
&lt;h3 id=&#34;string-ç±»å‹å¸¸ç”¨å‘½ä»¤&#34;&gt;string ç±»å‹å¸¸ç”¨å‘½ä»¤&lt;/h3&gt;
&lt;p&gt;stringç±»å‹æ˜¯redisä¸­æœ€ç®€å•çš„å­˜å‚¨ç±»å‹ï¼Œå…¶valueæ˜¯å­—ç¬¦ä¸²ï¼Œå­—ç¬¦ä¸²å¯ä»¥åˆ†ä¸º3ç±»ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;string:æ™®é€šå­—ç¬¦ä¸²&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;intï¼šæ•´æ•°ç±»å‹ï¼Œå¯ä»¥è‡ªå¢æˆ–è‡ªå‡&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;float:æµ®ç‚¹å‹ï¼Œå¯ä»¥è‡ªå¢æˆ–è‡ªå‡&lt;/p&gt;
&lt;p&gt;æ— è®ºæ˜¯å“ªä¸€ç§æ ¼å¼ï¼Œåº•å±‚éƒ½æ˜¯å­—èŠ‚æ•°ç»„å½¢å¼å­˜å‚¨ï¼Œåªä¸è¿‡æ˜¯ç¼–ç ä¸åŒï¼Œå­—ç¬¦ä¸²ç±»å‹çš„æœ€å¤§ç©ºé—´ä¸è¶…è¿‡512M&lt;/p&gt;
&lt;p&gt;&lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 388; 
			flex-basis: 931px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/redis-%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4%E7%9A%84%E5%AE%9E%E8%B7%B5/image-20220703173208349.png&#34; data-size=&#34;582x150&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/redis-%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4%E7%9A%84%E5%AE%9E%E8%B7%B5/image-20220703173208349.png&#34;
			width=&#34;582&#34;
			height=&#34;150&#34;
			srcset=&#34;https://zcj-git520.github.io/p/redis-%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4%E7%9A%84%E5%AE%9E%E8%B7%B5/image-20220703173208349_hu80833848ee1f18d862e144af2d6fb085_18998_480x0_resize_box_3.png 480w, https://zcj-git520.github.io/p/redis-%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4%E7%9A%84%E5%AE%9E%E8%B7%B5/image-20220703173208349_hu80833848ee1f18d862e144af2d6fb085_18998_1024x0_resize_box_3.png 1024w&#34;
			loading=&#34;lazy&#34;
			&gt;
	&lt;/a&gt;
	
&lt;/figure&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h4 id=&#34;å¸¸ç”¨çš„å‘½ä»¤æœ‰&#34;&gt;å¸¸ç”¨çš„å‘½ä»¤æœ‰ï¼š&lt;/h4&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;set:æ·»åŠ æˆ–è€…ä¿®æ”¹ä¹Ÿå­˜åœ¨çš„çš„ä¸€ä¸ªstringç±»å‹çš„é”®å€¼å¯¹&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;get:æ ¹æ®keyè·å–stringç±»å‹çš„value&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;mset:æ‰¹é‡æ·»åŠ å¤šä¸ªstinglç±»å‹çš„é”®å€¼å¯¹&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;mget:æ ¹æ®å¤šä¸ªkeyè·å–å¤šä¸ªstringç±»å‹çš„value&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;incr:è®©ä¸€ä¸ªintçš„keyè‡ªå¢1&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;incrby:è®©ä¸€ä¸ªæ•´å‹çš„keyè‡ªå¢å¹¶æŒ‡å®šæ­¥é•¿&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;incrbyfloat:è®©ä¸€ä¸ªæµ®ç‚¹æ•°çš„æ•°å€¼è‡ªå¢å¹¶æŒ‡å®šæ­¥é•¿&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;setnx:æ·»åŠ ä¸€ä¸ªstringç±»å‹çš„é”®å€¼å¯¹ï¼Œå½“keyå­˜åœ¨æ—¶ï¼Œä¸æ‰§è¡Œ&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;setex:æ·»åŠ ä¸€ä¸ªstringç±»å‹çš„é”®å€¼å¯¹ï¼Œå¹¶ä¸”è®¾ç½®æœ‰æ•ˆæœŸ&lt;/p&gt;
&lt;p&gt;&lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 98; 
			flex-basis: 235px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/redis-%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4%E7%9A%84%E5%AE%9E%E8%B7%B5/image-20220703184326525.png&#34; data-size=&#34;879x894&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/redis-%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4%E7%9A%84%E5%AE%9E%E8%B7%B5/image-20220703184326525.png&#34;
			width=&#34;879&#34;
			height=&#34;894&#34;
			srcset=&#34;https://zcj-git520.github.io/p/redis-%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4%E7%9A%84%E5%AE%9E%E8%B7%B5/image-20220703184326525_hu8f470d54622ce88b90e96a39d1a48252_105753_480x0_resize_box_3.png 480w, https://zcj-git520.github.io/p/redis-%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4%E7%9A%84%E5%AE%9E%E8%B7%B5/image-20220703184326525_hu8f470d54622ce88b90e96a39d1a48252_105753_1024x0_resize_box_3.png 1024w&#34;
			loading=&#34;lazy&#34;
			&gt;
	&lt;/a&gt;
	
&lt;/figure&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h4 id=&#34;keyçš„ç»“æ„&#34;&gt;keyçš„ç»“æ„&lt;/h4&gt;
&lt;p&gt;redisçš„keyå…è®¸æœ‰å¤šä¸ªå•è¯å½¢æˆå±‚çº§ç»“æ„ï¼Œæœ‰å¤šä¸ªå•è¯ä¹‹é—´ç”¨â€œï¼šâ€éš”å¼€;&lt;/p&gt;
&lt;p&gt;æ ¼å¼å¦‚ä¸‹ï¼šé¡¹ç›®åï¼šä¸šåŠ¡åï¼šç±»å‹ï¼šid;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ä¾‹å¦‚ï¼šuserç›¸å…³çš„key:sysd:user:1&lt;/li&gt;
&lt;li&gt;ä¾‹å¦‚ï¼šäº§å“ç›¸ç›¸å…³çš„key:sysd:product:1&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 232; 
			flex-basis: 557px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/redis-%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4%E7%9A%84%E5%AE%9E%E8%B7%B5/image-20220703202738042.png&#34; data-size=&#34;917x395&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/redis-%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4%E7%9A%84%E5%AE%9E%E8%B7%B5/image-20220703202738042.png&#34;
			width=&#34;917&#34;
			height=&#34;395&#34;
			srcset=&#34;https://zcj-git520.github.io/p/redis-%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4%E7%9A%84%E5%AE%9E%E8%B7%B5/image-20220703202738042_hub708a32f854617c34a1527a420b4c843_44022_480x0_resize_box_3.png 480w, https://zcj-git520.github.io/p/redis-%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4%E7%9A%84%E5%AE%9E%E8%B7%B5/image-20220703202738042_hub708a32f854617c34a1527a420b4c843_44022_1024x0_resize_box_3.png 1024w&#34;
			loading=&#34;lazy&#34;
			&gt;
	&lt;/a&gt;
	
&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;&lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 690; 
			flex-basis: 1657px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/redis-%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4%E7%9A%84%E5%AE%9E%E8%B7%B5/image-20220703203305428.png&#34; data-size=&#34;1443x209&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/redis-%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4%E7%9A%84%E5%AE%9E%E8%B7%B5/image-20220703203305428.png&#34;
			width=&#34;1443&#34;
			height=&#34;209&#34;
			srcset=&#34;https://zcj-git520.github.io/p/redis-%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4%E7%9A%84%E5%AE%9E%E8%B7%B5/image-20220703203305428_hu354e0a36754f7c644019efa40cea065e_16638_480x0_resize_box_3.png 480w, https://zcj-git520.github.io/p/redis-%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4%E7%9A%84%E5%AE%9E%E8%B7%B5/image-20220703203305428_hu354e0a36754f7c644019efa40cea065e_16638_1024x0_resize_box_3.png 1024w&#34;
			loading=&#34;lazy&#34;
			&gt;
	&lt;/a&gt;
	
&lt;/figure&gt;&lt;/p&gt;
&lt;h3 id=&#34;hashç±»å‹&#34;&gt;HASHç±»å‹&lt;/h3&gt;
&lt;p&gt;hashç±»å‹æ˜¯å«æ•£åˆ—ï¼Œå…¶valueæ˜¯ä¸€ä¸ªæ— åºçš„å­—å…¸ï¼Œhashçš„ç»“æ„å¯ä»¥å°†å¯¹è±¡çš„æ¯ä¸ªå•ç‹¬çš„å­—æ®µç‹¬ç«‹å­˜å‚¨ï¼Œå¯ä»¥å¯¹æ¯ä¸ªå­—æ®µåšCRUD;&lt;/p&gt;
&lt;h4 id=&#34;å¸¸ç”¨çš„å‘½ä»¤å¦‚ä¸‹&#34;&gt;å¸¸ç”¨çš„å‘½ä»¤å¦‚ä¸‹ï¼š&lt;/h4&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;hset key fileld value :æ·»åŠ æˆ–è€…ä¿®æ”¹hashç±»å‹keyçš„fileldçš„å€¼&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;hget key fileld: è·å–ä¸€ä¸ªhashç±»å‹çš„fileldçš„å€¼&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;hmset: æ‰¹é‡æ·»åŠ å¤šä¸ªhashç±»å‹çš„keyçš„fieldçš„å€¼&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;hmgetï¼šæ‰¹é‡è·å–å¤šä¸ªhashç±»å‹çš„keyde fileldçš„å€¼&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;hgetall:è·å–ä¸€ä¸ªhashç±»å‹çš„keyä¸­çš„æ‰€æœ‰çš„fileldå’Œvalue&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;hkeys:è·å–ä¸€ä¸ªhashç±»å‹çš„keyä¸­çš„æ‰€æœ‰çš„filed&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;hvale:è·å–ä¸€ä¸ªhashç±»å‹ä¸­çš„keyçš„æ‰€æœ‰value&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;hincrby:è®©ä¸€ä¸ªhashç±»å‹keyçš„å­—æ®µå€¼è‡ªå¢å¹¶æŒ‡å®šæ­¥é•¿&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;hseinx:æ·»åŠ ä¸€ä¸ªhashç±»å‹çš„keyçš„fileldå€¼ï¼Œè‹¥å­˜åœ¨åˆ™æ­¥æ·»åŠ &lt;/p&gt;
&lt;p&gt;&lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 104; 
			flex-basis: 249px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/redis-%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4%E7%9A%84%E5%AE%9E%E8%B7%B5/image-20220703213039079.png&#34; data-size=&#34;925x889&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/redis-%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4%E7%9A%84%E5%AE%9E%E8%B7%B5/image-20220703213039079.png&#34;
			width=&#34;925&#34;
			height=&#34;889&#34;
			srcset=&#34;https://zcj-git520.github.io/p/redis-%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4%E7%9A%84%E5%AE%9E%E8%B7%B5/image-20220703213039079_hu6765906d14cf95d3957b4c7ff09aa0f2_112773_480x0_resize_box_3.png 480w, https://zcj-git520.github.io/p/redis-%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4%E7%9A%84%E5%AE%9E%E8%B7%B5/image-20220703213039079_hu6765906d14cf95d3957b4c7ff09aa0f2_112773_1024x0_resize_box_3.png 1024w&#34;
			loading=&#34;lazy&#34;
			&gt;
	&lt;/a&gt;
	
&lt;/figure&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;â€‹		&lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 598; 
			flex-basis: 1436px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/redis-%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4%E7%9A%84%E5%AE%9E%E8%B7%B5/image-20220703213226107.png&#34; data-size=&#34;1724x288&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/redis-%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4%E7%9A%84%E5%AE%9E%E8%B7%B5/image-20220703213226107.png&#34;
			width=&#34;1724&#34;
			height=&#34;288&#34;
			srcset=&#34;https://zcj-git520.github.io/p/redis-%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4%E7%9A%84%E5%AE%9E%E8%B7%B5/image-20220703213226107_huf526acdabf778a619d0264ba73835043_26467_480x0_resize_box_3.png 480w, https://zcj-git520.github.io/p/redis-%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4%E7%9A%84%E5%AE%9E%E8%B7%B5/image-20220703213226107_huf526acdabf778a619d0264ba73835043_26467_1024x0_resize_box_3.png 1024w&#34;
			loading=&#34;lazy&#34;
			&gt;
	&lt;/a&gt;
	
&lt;/figure&gt;&lt;/p&gt;
&lt;h3 id=&#34;listç±»å‹&#34;&gt;LISTç±»å‹&lt;/h3&gt;
&lt;p&gt;redisä¸­çš„listå¯ä»¥çœ‹ä½œæ˜¯ä¸€ä¸ªåŒå‘é“¾è¡¨çš„ç»“æ„ï¼Œæ”¯æŒæ­£å‘ä¸åå‘çš„æ£€ç´¢ï¼Œæœ‰ä»¥ä¸‹ç‰¹å¾ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æœ‰åº&lt;/li&gt;
&lt;li&gt;å…ƒç´ å¯ä»¥é‡å¤&lt;/li&gt;
&lt;li&gt;æ’å…¥ä¸åˆ é™¤å¿«&lt;/li&gt;
&lt;li&gt;æŸ¥è¯¢é€Ÿåº¦ä¸€èˆ¬&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;å¸¸ç”¨çš„å‘½ä»¤&#34;&gt;å¸¸ç”¨çš„å‘½ä»¤&lt;/h4&gt;
&lt;ol&gt;
&lt;li&gt;lpush key valueâ€¦â€¦ ï¼šå‘å·¦æ’å…¥ä¸€ä¸ªæˆ–å¤šä¸ªå…ƒç´ &lt;/li&gt;
&lt;li&gt;lpop key ï¼šç§»é™¤å·¦è¾¹çš„ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œæ²¡æœ‰å°±è¿”å›nil&lt;/li&gt;
&lt;li&gt;rpush key valueâ€¦â€¦ï¼šå‘å³æ’å…¥ä¸€ä¸ªæˆ–è€…å¤šä¸ªå…ƒç´ &lt;/li&gt;
&lt;li&gt;Rrpop key:ç§»é™¤å¹¶è¿”å›å³ä¾§çš„ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œæ²¡æœ‰å°±è¿”å›nil&lt;/li&gt;
&lt;li&gt;lrang key star end:è¿”å›ä¸€æ®µè§’æ ‡èŒƒå›´å†…æ‰€æœ‰å…ƒç´ &lt;/li&gt;
&lt;li&gt;blpopå’Œbrpop:ä¸lpopå’Œrpopç±»ä¼¼ï¼Œåªä¸è¿‡åœ¨æ²¡æœ‰å…ƒç´ æ—¶ç­‰å¾…çš„æ—¶é—´ï¼Œè€Œä¸æ˜¯ç›´æ¥è¿”å›nil&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 113; 
			flex-basis: 272px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/redis-%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4%E7%9A%84%E5%AE%9E%E8%B7%B5/image-20220704203511492.png&#34; data-size=&#34;890x783&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/redis-%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4%E7%9A%84%E5%AE%9E%E8%B7%B5/image-20220704203511492.png&#34;
			width=&#34;890&#34;
			height=&#34;783&#34;
			srcset=&#34;https://zcj-git520.github.io/p/redis-%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4%E7%9A%84%E5%AE%9E%E8%B7%B5/image-20220704203511492_hu7539138712abf7603ef5f7d6f9656ab7_96589_480x0_resize_box_3.png 480w, https://zcj-git520.github.io/p/redis-%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4%E7%9A%84%E5%AE%9E%E8%B7%B5/image-20220704203511492_hu7539138712abf7603ef5f7d6f9656ab7_96589_1024x0_resize_box_3.png 1024w&#34;
			loading=&#34;lazy&#34;
			&gt;
	&lt;/a&gt;
	
&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;&lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 356; 
			flex-basis: 855px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/redis-%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4%E7%9A%84%E5%AE%9E%E8%B7%B5/image-20220704203540306.png&#34; data-size=&#34;831x233&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/redis-%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4%E7%9A%84%E5%AE%9E%E8%B7%B5/image-20220704203540306.png&#34;
			width=&#34;831&#34;
			height=&#34;233&#34;
			srcset=&#34;https://zcj-git520.github.io/p/redis-%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4%E7%9A%84%E5%AE%9E%E8%B7%B5/image-20220704203540306_hu48caa2f4c84bfca2f12f5336df86867f_24159_480x0_resize_box_3.png 480w, https://zcj-git520.github.io/p/redis-%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4%E7%9A%84%E5%AE%9E%E8%B7%B5/image-20220704203540306_hu48caa2f4c84bfca2f12f5336df86867f_24159_1024x0_resize_box_3.png 1024w&#34;
			loading=&#34;lazy&#34;
			&gt;
	&lt;/a&gt;
	
&lt;/figure&gt;&lt;/p&gt;
&lt;h3 id=&#34;setç±»å‹&#34;&gt;setç±»å‹&lt;/h3&gt;
&lt;p&gt;redisä¸­çš„setç»“æ„å¯ä»¥çœ‹ä½œæ˜¯ä¸€ä¸ªvalueä¸ºnilçš„hashmapã€‚å…·å¤‡ä¸€ä¸‹ç‰¹å¾ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æ— åº&lt;/li&gt;
&lt;li&gt;å…ƒç´ ä¸å¯é‡å¤&lt;/li&gt;
&lt;li&gt;æŸ¥æ‰¾å¿«&lt;/li&gt;
&lt;li&gt;æ”¯æŒäº¤é›†/å¹¶é›†/å·®é›†ç­‰åŠŸèƒ½&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;å¸¸ç”¨çš„å‘½ä»¤-1&#34;&gt;å¸¸ç”¨çš„å‘½ä»¤&lt;/h4&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;sadd key number â€¦â€¦ï¼šå‘setä¸­æ·»åŠ ä¸€ä¸ªæˆ–è€…å¤šä¸ªå…ƒç´ &lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;srem key number â€¦â€¦ï¼šç§»é™¤setä¸­æŒ‡å®šçš„å…ƒç´ &lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;scard key:è¿”å›setä¸­çš„å…ƒç´ ä¸ªæ•°&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;sismembre key member:åˆ¤æ–­ä¸€ä¸ªå…ƒç´ æ˜¯å¦å­˜åœ¨ä¸ä¸€ä¸ªsetä¸­&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;smembers:è·å–setä¸­æ‰€æœ‰çš„å…ƒç´ &lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;sinter key1 key2â€¦â€¦ï¼šæ±‚é›†åˆä¹‹é—´çš„äº¤é›†&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;sdiff key1 key2â€¦â€¦ï¼šé›†åˆä¹‹é—´çš„å·®é›†&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;sunion key1 key2â€¦â€¦ï¼šé›†åˆä¹‹é—´çš„å¹¶é›†&lt;/p&gt;
&lt;p&gt;&lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 102; 
			flex-basis: 245px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/redis-%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4%E7%9A%84%E5%AE%9E%E8%B7%B5/image-20220704205647199.png&#34; data-size=&#34;927x906&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/redis-%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4%E7%9A%84%E5%AE%9E%E8%B7%B5/image-20220704205647199.png&#34;
			width=&#34;927&#34;
			height=&#34;906&#34;
			srcset=&#34;https://zcj-git520.github.io/p/redis-%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4%E7%9A%84%E5%AE%9E%E8%B7%B5/image-20220704205647199_hu7908eaa3257c2e5b701111cc6facca2b_108226_480x0_resize_box_3.png 480w, https://zcj-git520.github.io/p/redis-%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4%E7%9A%84%E5%AE%9E%E8%B7%B5/image-20220704205647199_hu7908eaa3257c2e5b701111cc6facca2b_108226_1024x0_resize_box_3.png 1024w&#34;
			loading=&#34;lazy&#34;
			&gt;
	&lt;/a&gt;
	
&lt;/figure&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;â€‹		&lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 549; 
			flex-basis: 1319px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/redis-%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4%E7%9A%84%E5%AE%9E%E8%B7%B5/image-20220704205721995.png&#34; data-size=&#34;1754x319&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/redis-%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4%E7%9A%84%E5%AE%9E%E8%B7%B5/image-20220704205721995.png&#34;
			width=&#34;1754&#34;
			height=&#34;319&#34;
			srcset=&#34;https://zcj-git520.github.io/p/redis-%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4%E7%9A%84%E5%AE%9E%E8%B7%B5/image-20220704205721995_hu175fd1dc6b96d1acd6542edd89d15ae1_33772_480x0_resize_box_3.png 480w, https://zcj-git520.github.io/p/redis-%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4%E7%9A%84%E5%AE%9E%E8%B7%B5/image-20220704205721995_hu175fd1dc6b96d1acd6542edd89d15ae1_33772_1024x0_resize_box_3.png 1024w&#34;
			loading=&#34;lazy&#34;
			&gt;
	&lt;/a&gt;
	
&lt;/figure&gt;&lt;/p&gt;
&lt;h3 id=&#34;sortedsetç±»å‹&#34;&gt;SortedSetç±»å‹&lt;/h3&gt;
&lt;p&gt;redisçš„sortedsetæ˜¯ä¸€ä¸ªæœ‰åºçš„é›†åˆï¼Œæ¯ä¸€ä¸ªå…ƒç´ éƒ½å¸¦æœ‰ä¸€ä¸ªscoreçš„å±æ€§ï¼Œå¯ä»¥åŸºäºscoreå±æ€§å¯¹å…ƒç´ è¿›è¡Œæ’åºï¼Œå…¶åº•å±‚æ˜¯ä¸€ä¸ªç”±ä¸€ä¸ªè·³è·ƒè¡¨å’Œhashè¡¨å®ç°ï¼Œå…¶å…·å¤‡ä¸€ä¸‹ç‰¹æ€§ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å¯æ’åº&lt;/li&gt;
&lt;li&gt;å…ƒç´ ä¸å¯é‡å¤&lt;/li&gt;
&lt;li&gt;æŸ¥è¯¢é€Ÿåº¦å¿«&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;å¸¸ç”¨å‘½ä»¤&#34;&gt;å¸¸ç”¨å‘½ä»¤&lt;/h4&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;zadd key score member: æ·»åŠ ä¸€ä¸ªæˆ–è€…å¤šä¸ªå…ƒç´ åˆ°æœ‰åºé›†åˆä¸­ï¼Œå¦‚æœå­˜åœ¨åˆ™æ›´æ–°å…¶score&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;zrem key member:åˆ é™¤æœ‰åºé›†åˆä¸­çš„ä¸€ä¸ªæŒ‡å®šå…ƒç´ &lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;zscore key member:è·å–æŒ‡å®šå…ƒç´ çš„çš„scoreå€¼&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;zrank key member:è·å–æœ‰åºé›†åˆå…ƒç´ çš„æ’å&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;zcard key:è·å–æœ‰åºé›†åˆä¸­çš„å…ƒç´ ä¸ªæ•°&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;zcount key min max:ç»Ÿè®¡scoreå€¼åœ¨ç»™å®šèŒƒå›´å†…ä¸­çš„æ‰€æœ‰å…ƒç´ å’Œä¸ªæ•°&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;zincrby key increment member:è®©æœ‰åºé›†åˆä¸­çš„æŒ‡å®šå…ƒç´ è‡ªå¢ï¼Œæ­¥é•¿ä¸ºæŒ‡å®šçš„incrementå€¼&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;zrange key min max:æŒ‰ç…§scoreæ’åºåï¼Œè·å–æŒ‡å®šæ’åèŒƒå›´çš„å…ƒç´ &lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;zrangebyscore key min max:æŒ‰ç…§scoreæ’åºåï¼Œè·å–æŒ‡å®šçš„scoreèŒƒå›´çš„å…ƒç´ &lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;zdiff/zinter/zuninon:æ±‚å·®é›†/äº¤é›†/å¹¶é›†&lt;/p&gt;
&lt;p&gt;æ³¨æ˜ï¼šæ’åé»˜è®¤ä¸ºå‡åºï¼Œrevä¸ºé™åº&lt;/p&gt;
&lt;p&gt;&lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 143; 
			flex-basis: 343px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/redis-%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4%E7%9A%84%E5%AE%9E%E8%B7%B5/image-20220704214234155.png&#34; data-size=&#34;927x647&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/redis-%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4%E7%9A%84%E5%AE%9E%E8%B7%B5/image-20220704214234155.png&#34;
			width=&#34;927&#34;
			height=&#34;647&#34;
			srcset=&#34;https://zcj-git520.github.io/p/redis-%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4%E7%9A%84%E5%AE%9E%E8%B7%B5/image-20220704214234155_hu2c3b8a6563b729b225868325472d361d_84870_480x0_resize_box_3.png 480w, https://zcj-git520.github.io/p/redis-%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4%E7%9A%84%E5%AE%9E%E8%B7%B5/image-20220704214234155_hu2c3b8a6563b729b225868325472d361d_84870_1024x0_resize_box_3.png 1024w&#34;
			loading=&#34;lazy&#34;
			&gt;
	&lt;/a&gt;
	
&lt;/figure&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;â€‹		&lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 643; 
			flex-basis: 1543px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/redis-%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4%E7%9A%84%E5%AE%9E%E8%B7%B5/image-20220704214303318.png&#34; data-size=&#34;1679x261&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/redis-%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4%E7%9A%84%E5%AE%9E%E8%B7%B5/image-20220704214303318.png&#34;
			width=&#34;1679&#34;
			height=&#34;261&#34;
			srcset=&#34;https://zcj-git520.github.io/p/redis-%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4%E7%9A%84%E5%AE%9E%E8%B7%B5/image-20220704214303318_hua1377d79c8f2b8737e87df539773ac70_26135_480x0_resize_box_3.png 480w, https://zcj-git520.github.io/p/redis-%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4%E7%9A%84%E5%AE%9E%E8%B7%B5/image-20220704214303318_hua1377d79c8f2b8737e87df539773ac70_26135_1024x0_resize_box_3.png 1024w&#34;
			loading=&#34;lazy&#34;
			&gt;
	&lt;/a&gt;
	
&lt;/figure&gt;&lt;/p&gt;
</description>
        </item>
        <item>
        <title>Disk Test</title>
        <link>https://zcj-git520.github.io/p/disk-test/</link>
        <pubDate>Mon, 20 Jun 2022 22:00:38 +0800</pubDate>
        
        <guid>https://zcj-git520.github.io/p/disk-test/</guid>
        <description>&lt;img src="https://zcj-git520.github.io/p/disk-test/1.png" alt="Featured image of post Disk Test" /&gt;&lt;h3 id=&#34;disktext&#34;&gt;diskText&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;ç›´æ¥è·³è¿‡æ–‡ä»¶ç³»ç»Ÿï¼Œå¯¹ç£ç›˜æ•°æ®è¿›è¡Œè¯»å†™ï¼Œåˆ¤æ–­ç£ç›˜æµ‹è¯•æ•°æ®è¯»å†™æ ¡éªŒæ•°æ®æ˜¯å¦ä¸¢å¤±&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;ç£ç›˜ä¿¡æ¯&#34;&gt;ç£ç›˜ä¿¡æ¯&lt;/h4&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span class=&#34;kd&#34;&gt;type&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;DiskSizeInfo&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;struct&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
	&lt;span class=&#34;nx&#34;&gt;DiskPath&lt;/span&gt;  &lt;span class=&#34;kt&#34;&gt;string&lt;/span&gt;             &lt;span class=&#34;c1&#34;&gt;// ç£ç›˜å
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;	&lt;span class=&#34;nx&#34;&gt;SrcMap&lt;/span&gt;    &lt;span class=&#34;kd&#34;&gt;map&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;string&lt;/span&gt;  &lt;span class=&#34;c1&#34;&gt;// æµ‹è¯•æ•°æ®é›†(æ–‡ä»¶å¤¹/æ ¡éªŒæ•°æ®)
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;	&lt;span class=&#34;nx&#34;&gt;Size&lt;/span&gt;      &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;                &lt;span class=&#34;c1&#34;&gt;// ç£ç›˜åˆ†ç»„å¤§å°
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;	&lt;span class=&#34;nx&#34;&gt;SeekSize&lt;/span&gt;  &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;				 &lt;span class=&#34;c1&#34;&gt;// ç£ç›˜æ•°æ®åç§»
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;	&lt;span class=&#34;nx&#34;&gt;BlockSize&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;                &lt;span class=&#34;c1&#34;&gt;// è¯»å†™ç£ç›˜æ•°æ®çš„å¤§å°
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h4 id=&#34;ä½¿ç”¨ä¸¤ç§æ–¹å¼è·³è¿‡æ–‡ä»¶ç³»ç»Ÿç›´æ¥å¯¹ç£ç›˜è¿›è¡Œè¯»å†™&#34;&gt;ä½¿ç”¨ä¸¤ç§æ–¹å¼è·³è¿‡æ–‡ä»¶ç³»ç»Ÿç›´æ¥å¯¹ç£ç›˜è¿›è¡Œè¯»å†™&lt;/h4&gt;
&lt;ol&gt;
&lt;li&gt;ç›´æ¥è¯»å†™ç£ç›˜&lt;/li&gt;
&lt;/ol&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span class=&#34;c1&#34;&gt;// ç£ç›˜çš„å†™å…¥
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;d&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;DiskSizeInfo&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;DiskWriteByFile&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;src&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;error&lt;/span&gt;
&lt;span class=&#34;c1&#34;&gt;// è¯»å–ç£ç›˜
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;d&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;DiskSizeInfo&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;DiskReadByFile&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;([]&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;byte&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;error&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;â€‹	2.é€šè¿‡ddå‘½ä»¤è¡Œå¯¹ç£ç›˜è¿›è¡Œè¯»è€…&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span class=&#34;c1&#34;&gt;// é€šè¿‡ddå‘½ä»¤å†™äºç£ç›˜
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;d&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;DiskSizeInfo&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;WriteDisk&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;staPos&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;iFile&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;error&lt;/span&gt; 
&lt;span class=&#34;c1&#34;&gt;// é€šè¿‡ddå‘½ä»¤è¯»å–ç£ç›˜æ•°æ®
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;d&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;DiskSizeInfo&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;ReadDisk&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;staPos&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;oFile&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;error&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h4 id=&#34;å¯¹ç£ç›˜å·²æœ‰æ•°æ®è¿›è¡Œæ ¡éªŒ&#34;&gt;å¯¹ç£ç›˜å·²æœ‰æ•°æ®è¿›è¡Œæ ¡éªŒ&lt;/h4&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;d&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;DiskSizeInfo&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;CheckReadDisk&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;src&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;i&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h4 id=&#34;ç£ç›˜æ ¡éªŒæ•°æ®çš„ç±»å‹çš„è¿”å›&#34;&gt;ç£ç›˜æ ¡éªŒæ•°æ®çš„ç±»å‹çš„è¿”å›&lt;/h4&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;d&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;DiskSizeInfo&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;DiskDatatype&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;i&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; 
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h4 id=&#34;å¾ªç¯é€šè¿‡æ•°æ®é›†è¿›è¡Œæ ¡éªŒ&#34;&gt;å¾ªç¯é€šè¿‡æ•°æ®é›†è¿›è¡Œæ ¡éªŒ&lt;/h4&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;d&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;DiskSizeInfo&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Run&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;error&lt;/span&gt; 
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h4 id=&#34;åˆå§‹åŒ–æ ¡éªŒé›†æ•°æ®æ–‡ä»¶&#34;&gt;åˆå§‹åŒ–æ ¡éªŒé›†æ•°æ®æ–‡ä»¶&lt;/h4&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;d&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;DiskSizeInfo&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;initFile&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;error&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h4 id=&#34;ç£ç›˜çš„æŒ‚èµ·æˆ–è€…å¸è½½é’ˆå¯¹ä¸å¸¦æ–‡ä»¶ç³»ç»Ÿå’Œç£ç›˜æ¸…é™¤&#34;&gt;ç£ç›˜çš„æŒ‚èµ·æˆ–è€…å¸è½½ï¼ˆé’ˆå¯¹ä¸å¸¦æ–‡ä»¶ç³»ç»Ÿï¼‰å’Œç£ç›˜æ¸…é™¤&lt;/h4&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;d&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;DiskSizeInfo&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;MountDisk&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;src&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;error&lt;/span&gt;
&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;d&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;DiskSizeInfo&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;ClearDisk&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;src&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;error&lt;/span&gt; 
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h4 id=&#34;åˆå§‹åŒ–æ ¡éªŒé›†æ•°æ®æ–‡ä»¶-1&#34;&gt;åˆå§‹åŒ–æ ¡éªŒé›†æ•°æ®æ–‡ä»¶&lt;/h4&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;d&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;DiskSizeInfo&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;initFile&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h4 id=&#34;å…¶ä»–åŠŸèƒ½&#34;&gt;å…¶ä»–åŠŸèƒ½&lt;/h4&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span class=&#34;nx&#34;&gt;æ–‡ä»¶é€šè¿‡md5æ ¡éªŒæ¯”è¾ƒ&lt;/span&gt;
&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;FileCompare&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;src&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;dst&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;bool&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;error&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;span class=&#34;nx&#34;&gt;ç”Ÿæˆæ–‡ä»¶æ ¡éªŒå’Œå‡½æ•°&lt;/span&gt;
&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;fileCheckSum&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;fileName&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;error&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;span class=&#34;c1&#34;&gt;//PathExists åˆ¤æ–­ä¸€ä¸ªæ–‡ä»¶æˆ–æ–‡ä»¶å¤¹æ˜¯å¦å­˜åœ¨
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;//è¾“å…¥æ–‡ä»¶è·¯å¾„ï¼Œæ ¹æ®è¿”å›çš„boolå€¼æ¥åˆ¤æ–­æ–‡ä»¶æˆ–æ–‡ä»¶å¤¹æ˜¯å¦å­˜åœ¨
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;PathExists&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;path&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;bool&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;error&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;span class=&#34;nx&#34;&gt;æ ¡éªŒæ–‡ä»¶ä¸­æ˜¯å¦å­˜åœ¨æ ¡éªŒå€¼&lt;/span&gt;
&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;CheckFileData&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;data&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[]&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;byte&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;check&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;bool&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;æºç &#34;&gt;æºç &lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://github.com/zcj-git520/diskTest&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;æˆ‘çš„github:https://github.com/zcj-git520/diskTest&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
        </item>
        <item>
        <title>Linux-mdadmå·¥å…·å­¦ä¹ </title>
        <link>https://zcj-git520.github.io/p/linux-mdadm%E5%B7%A5%E5%85%B7%E5%AD%A6%E4%B9%A0/</link>
        <pubDate>Sun, 12 Jun 2022 22:00:38 +0800</pubDate>
        
        <guid>https://zcj-git520.github.io/p/linux-mdadm%E5%B7%A5%E5%85%B7%E5%AD%A6%E4%B9%A0/</guid>
        <description>&lt;img src="https://zcj-git520.github.io/p/linux-mdadm%E5%B7%A5%E5%85%B7%E5%AD%A6%E4%B9%A0/1.png" alt="Featured image of post Linux-mdadmå·¥å…·å­¦ä¹ " /&gt;&lt;h3 id=&#34;mdadm&#34;&gt;mdadm&lt;/h3&gt;
&lt;p&gt;mdadmæ˜¯linuxä¸‹çš„ä¸€æ¬¾æ ‡å‡†çš„RAIDçš„ç®¡ç†å·¥å…·&lt;/p&gt;
&lt;h4 id=&#34;åŸºæœ¬è¯­æ³•&#34;&gt;åŸºæœ¬è¯­æ³•&lt;/h4&gt;
&lt;p&gt;mdadm [mode] &lt;!-- raw HTML omitted --&gt; [option] &lt;!-- raw HTML omitted --&gt;&lt;/p&gt;
&lt;h4 id=&#34;ç›®å‰æ”¯æŒ&#34;&gt;ç›®å‰æ”¯æŒ&lt;/h4&gt;
&lt;p&gt;RAID0(striping), RAID1(mirroring), RAID4, RAID5, RAID6, RAID10, MULTIPATHå’ŒFAULTY&lt;/p&gt;
&lt;h4 id=&#34;æ¨¡å¼&#34;&gt;æ¨¡å¼&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;Assembleï¼šåŠ å…¥ä¸€ä¸ªä»¥å‰å®šä¹‰çš„é˜µåˆ—&lt;/li&gt;
&lt;li&gt;Buildï¼šåˆ›å»ºä¸€ä¸ªæ²¡æœ‰è¶…çº§å—çš„é˜µåˆ—&lt;/li&gt;
&lt;li&gt;Createï¼šåˆ›å»ºä¸€ä¸ªæ–°çš„é˜µåˆ—ï¼Œæ¯ä¸ªè®¾å¤‡å…·æœ‰è¶…çº§å—ï¼› -l,&amp;ndash;level: RAIDçº§åˆ« -n,&amp;ndash;raid-devices: æ´»åŠ¨è®¾å¤‡ä¸ªæ•° -a {yes|no}: æ˜¯å¦è‡ªåŠ¨ä¸ºå…¶åˆ›å»ºè®¾å¤‡æ–‡ä»¶ -c,&amp;ndash;chunk: CHUNKå¤§å°, é»˜è®¤ä¸º64Kï¼Œé‡è¦çš„å‚æ•°,å†³å®šäº†ä¸€æ¬¡å‘é˜µåˆ—ä¸­æ¯ä¸ªç£ç›˜å†™å…¥æ•°æ®çš„å¤§å° -x,&amp;ndash;spare-devices: å¤‡ç”¨ç›˜ä¸ªæ•°&lt;/li&gt;
&lt;li&gt;Manageï¼š ç®¡ç†é˜µåˆ—(å¦‚æ·»åŠ å’Œåˆ é™¤)&lt;/li&gt;
&lt;li&gt;Miscï¼šå…è®¸å•ç‹¬å¯¹é˜µåˆ—ä¸­çš„æŸä¸ªè®¾å¤‡è¿›è¡Œæ“ä½œ(å¦‚åœæ­¢é˜µåˆ—)&lt;/li&gt;
&lt;li&gt;Follow or Monitor:ç›‘æ§RAIDçš„çŠ¶æ€&lt;/li&gt;
&lt;li&gt;Growï¼šæ”¹å˜RAIDçš„å®¹é‡æˆ–é˜µåˆ—ä¸­çš„è®¾å¤‡æ•°ç›® ï¼›-n,&amp;ndash;raid-devices=: æ´»åŠ¨è®¾å¤‡ä¸ªæ•°-x,&amp;ndash;spare-devices=ï¼šå¤‡ç”¨ç›˜ä¸ªæ•°-c,&amp;ndash;chunk=: CHUNKå¤§å°, é»˜è®¤ä¸º64Kï¼Œé‡è¦çš„å‚æ•°,å†³å®šäº†ä¸€æ¬¡å‘é˜µåˆ—ä¸­æ¯ä¸ªç£ç›˜å†™å…¥æ•°æ®çš„å¤§å°-z,&amp;ndash;size=ï¼šé˜µåˆ—ä¸­ä»æ¯ä¸ªç£ç›˜è·å–çš„ç©ºé—´æ€»æ•°-l,&amp;ndash;level=: RAIDçº§åˆ«-p,&amp;ndash;layout=ï¼šè®¾å®šraid5 å’Œraid10çš„å¥‡å¶æ ¡éªŒè§„åˆ™ï¼›å¹¶ä¸”æ§åˆ¶æ•…éšœçš„æ•…éšœæ¨¡å¼&amp;ndash;parity: ç±»ä¼¼äº&amp;ndash;layout&amp;ndash;assume-clean:ç›®å‰ä»…ç”¨äº &amp;ndash;build é€‰é¡¹-R &amp;ndash;run: å¼ºåˆ¶æ¿€æ´»RAIDï¼Œä½¿ç”¨è¿™ä¸ªé€‰é¡¹ï¼Œè®¾å¤‡ä¸Šæœ‰æ—§çš„å…ƒæ•°æ®ä¿¡æ¯çš„æç¤ºä¼šè¢«å¿½ç•¥-N &amp;ndash;name=: è®¾å®šé˜µåˆ—çš„åç§°â€“-roundingï¼šåœ¨linear arrayä¸­çš„rounding factorï¼Œç­‰äºæ¡å¸¦å¤§å°ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;å¯ç”¨çš„options&#34;&gt;å¯ç”¨çš„[options]&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;-Aï¼Œ&amp;ndash;assembleï¼šåŠ å…¥ä¸€ä¸ªä»¥å‰å®šä¹‰çš„é˜µåˆ—&lt;/li&gt;
&lt;li&gt;-B,&amp;ndash;build:Build a legacy array without superblocks .&lt;/li&gt;
&lt;li&gt;-Cï¼Œ&amp;ndash;createï¼šåˆ›å»ºä¸€ä¸ªæ–°çš„é˜µåˆ—&lt;/li&gt;
&lt;li&gt;-Q&amp;ndash;queryï¼šæŸ¥çœ‹ä¸€ä¸ªdeviceï¼Œåˆ¤æ–­å®ƒä¸ºä¸€ä¸ªmd deviceæˆ–æ˜¯ä¸€ä¸ªmdé˜µåˆ—çš„ä¸€éƒ¨åˆ†&lt;/li&gt;
&lt;li&gt;-Dï¼Œ&amp;ndash;detailï¼šæ‰“å°ä¸€ä¸ªæˆ–å¤šä¸ªmd deviceçš„è¯¦ç»†ä¿¡æ¯&lt;/li&gt;
&lt;li&gt;-Eï¼Œ&amp;ndash;examineï¼šæ‰“å°deviceä¸Šçš„md superblock çš„å†…å®¹&lt;/li&gt;
&lt;li&gt;-Fï¼Œ&amp;ndash;followï¼Œ&amp;ndash;monitorï¼šé€‰æ‹©Monitoræ¨¡å¼&lt;/li&gt;
&lt;li&gt;-Gï¼Œ&amp;ndash;growï¼šæ”¹å˜åœ¨ç”¨é˜µåˆ—çš„å¤§å°æˆ–å½¢æ€&lt;/li&gt;
&lt;li&gt;-hï¼Œ&amp;ndash;helpï¼šå¸®åŠ©ä¿¡æ¯ï¼Œç”¨åœ¨ä»¥ä¸Šé€‰é¡¹åï¼Œåˆ™æ˜¾ç¤ºè¯¥é€‰é¡¹ä¿¡æ¯&amp;ndash;help-options&lt;/li&gt;
&lt;li&gt;-V,&amp;ndash;version&lt;/li&gt;
&lt;li&gt;-Vï¼Œ&amp;ndash;verboseï¼šæ˜¾ç¤ºç»†èŠ‚&lt;/li&gt;
&lt;li&gt;-b,&amp;ndash;briefï¼šè¾ƒå°‘çš„ç»†èŠ‚ã€‚ç”¨äº&amp;ndash;detailå’Œ&amp;ndash;examineé€‰é¡¹&lt;/li&gt;
&lt;li&gt;-f,&amp;ndash;force&lt;/li&gt;
&lt;li&gt;-cï¼Œ&amp;ndash;config=ï¼šæŒ‡å®šé…ç½®æ–‡ä»¶ï¼Œç¼ºçœä¸º/etc/mdadm/mdadm. conf&lt;/li&gt;
&lt;li&gt;-sï¼Œ&amp;ndash;scanï¼šæ‰«æé…ç½®æ–‡ä»¶æˆ–/proc/mdstatä»¥æœå¯»ä¸¢å¤±çš„ä¿¡æ¯ã€‚é…ç½®æ–‡ä»¶/etc/mdadm/mdadm. conf&lt;/li&gt;
&lt;li&gt;createæˆ–buildä½¿ç”¨çš„é€‰é¡¹ï¼š&lt;/li&gt;
&lt;li&gt;-c,&amp;ndash;chunk=:Specify chunk size of kibibytes.ç¼ºçœä¸º64.&lt;/li&gt;
&lt;li&gt;&amp;ndash;rounding=:Specify rounding factor for linear array(==chunk size)&lt;/li&gt;
&lt;li&gt;-I,&amp;ndash;level=:è®¾å®šraid level.&lt;/li&gt;
&lt;li&gt;&amp;ndash;createå¯ç”¨ï¼šlinearï¼Œraid 0ï¼Œ0ï¼Œstripeï¼Œraid 1ï¼Œ1ï¼Œmirrorï¼Œraid 4ï¼Œ4ï¼Œraid 5ï¼Œ5ï¼Œraid 6ï¼Œ6ï¼Œmultipath, mp.&lt;/li&gt;
&lt;li&gt;&amp;ndash;buildå¯ç”¨ï¼šlinearï¼Œraid 0ï¼Œ0ï¼Œstripe.&lt;/li&gt;
&lt;li&gt;-pï¼Œ&amp;ndash;parity=ï¼šè®¾å®šraid 5çš„å¥‡å¶æ ¡éªŒè§„åˆ™ï¼šeft- asymmetric ï¼Œleft-symmetricï¼Œright- asymmetric , right-symmetric, la, ra, ls, rs.ç¼ºçœä¸ºleft-symmetric&amp;ndash;layout=ï¼šç±»ä¼¼äº&amp;ndash;parity&lt;/li&gt;
&lt;li&gt;-nï¼Œ&amp;ndash;raid-devices=ï¼šæŒ‡å®šé˜µåˆ—ä¸­å¯ç”¨deviceæ•°ç›®ï¼Œè¿™ä¸ªæ•°ç›®åªèƒ½ç”±&amp;ndash;growä¿®æ”¹-xï¼Œ&amp;ndash;spare-devices=ï¼šæŒ‡å®šåˆå§‹é˜µåˆ—çš„å¯Œä½™deviceæ•°ç›®&lt;/li&gt;
&lt;li&gt;-zï¼Œ&amp;ndash;size=ï¼šç»„å»ºRAID1/4/5/6åä»æ¯ä¸ªdeviceè·å–çš„ç©ºé—´æ€»æ•°&amp;ndash;assume-clean:ç›®å‰ä»…ç”¨äº&amp;ndash;buildé€‰é¡¹&lt;/li&gt;
&lt;li&gt;-Rï¼Œ-runï¼šé˜µåˆ—ä¸­çš„æŸä¸€éƒ¨åˆ†å‡ºç°åœ¨å…¶ä»–é˜µåˆ—æˆ–æ–‡ä»¶ç³»ç»Ÿä¸­æ—¶ï¼Œm dadmä¼šç¡®è®¤è¯¥é˜µåˆ—ã€‚æ­¤é€‰é¡¹å°†ä¸ä½œç¡®è®¤ã€‚&lt;/li&gt;
&lt;li&gt;-f, &amp;ndash;force:é€šå¸¸mdadmä¸å…è®¸åªç”¨ä¸€ä¸ªdeviceåˆ›å»ºé˜µåˆ—ï¼Œè€Œä¸”åˆ›å»ºraid5æ—¶ä¼šä½¿ç”¨ä¸€ä¸ªdeviceä½œä¸ºmissingdriveã€‚æ­¤é€‰é¡¹æ­£ç›¸å&lt;/li&gt;
&lt;li&gt;-a, &amp;ndash;auto{=no,yes,md,mdp,part,p}{NN}&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;æµ‹è¯•&#34;&gt;æµ‹è¯•&lt;/h3&gt;
&lt;h4 id=&#34;åˆ›å»ºraid5é˜µåˆ—&#34;&gt;åˆ›å»ºRAID5é˜µåˆ—&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;æ‰§è¡Œå‘½ä»¤: mdadm &amp;ndash;create /dev/md0 &amp;ndash;level=5 &amp;ndash;chunk=64 &amp;ndash;raid-devices=4 &amp;ndash;spare-devices=1 /dev/sd[b-f]&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ä½¿ç”¨cat /proc/mdstatæŸ¥çœ‹RAID5é˜µåˆ—çŠ¶æ€&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ç»“æœï¼š&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;Personalities : [linear] [multipath] [raid0] [raid1] [raid6] [raid5] [raid4] [raid10] 
md0 : active raid5 sde[5] sdf[4](S) sdd[2] sdc[1] sdb[0]
      328704 blocks super 1.2 level 5, 64k chunk, algorithm 2 [4/4] [UUUU]

unused devices: &amp;lt;none&amp;gt;
æ˜¾ç¤ºè®¾å¤‡ç›˜ä¸ºsdfä¸ºçƒ­å¤‡ç›˜ï¼Œ ä½¿ç”¨fdisk â€“læŸ¥çœ‹ç£ç›˜é˜µåˆ—, æ˜¾ç¤ºç£ç›˜å¤§å°ä¸ºï¼šDisk /dev/md0: 320 MB
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;åœæ­¢raid5é˜µåˆ—&#34;&gt;åœæ­¢RAID5é˜µåˆ—&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;æ‰§è¡Œå‘½ä»¤: sudo mdadm -Ss æˆ–è€… mdadm &amp;ndash;stop /dev/md0&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ä½¿ç”¨cat /proc/mdstatæŸ¥çœ‹RAID5é˜µåˆ—çŠ¶æ€&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ç»“æœ&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;Personalities : [linear] [multipath] [raid0] [raid1] [raid6] [raid5] [raid4] [raid10] 
unused devices: &amp;lt;none&amp;gt;
// ç£ç›˜å·²ç»åœæ­¢ mdadm: stopped /dev/md0
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;å¯åŠ¨raid5é˜µåˆ—&#34;&gt;å¯åŠ¨RAID5é˜µåˆ—&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;æ‰§è¡Œå‘½ä»¤: sudo mdadm -As&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ä½¿ç”¨cat /proc/mdstatæŸ¥çœ‹RAID5é˜µåˆ—çŠ¶æ€&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ç»“æœ&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;mdadm: /dev/md/0 has been started with 4 drives and 1 spare.

Personalities : [linear] [multipath] [raid0] [raid1] [raid6] [raid5] [raid4] [raid10] 
md0 : active raid5 sdb[0] sdf[4](S) sde[5] sdd[2] sdc[1]
      328704 blocks super 1.2 level 5, 64k chunk, algorithm 2 [4/4] [UUUU]

unused devices: &amp;lt;none&amp;gt;

&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;æŸ¥çœ‹mdçŠ¶æ€&#34;&gt;æŸ¥çœ‹mdçŠ¶æ€&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;æ‰§è¡Œå‘½ä»¤ï¼šmdadm -D /dev/md0&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ç»“æœï¼š&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;/dev/md0:
           Version : 1.2
     Creation Time : Wed Jun  8 14:28:56 2022
        Raid Level : raid5
        Array Size : 328704 (321.00 MiB 336.59 MB)
     Used Dev Size : 109568 (107.00 MiB 112.20 MB)
      Raid Devices : 4
     Total Devices : 5
       Persistence : Superblock is persistent

       Update Time : Wed Jun  8 14:28:57 2022
             State : clean 
    Active Devices : 4
   Working Devices : 5
    Failed Devices : 0
     Spare Devices : 1

            Layout : left-symmetric
        Chunk Size : 64K

Consistency Policy : resync

              Name : zcjubuntu-virtual-machine:0  (local to host zcjubuntu-virtual-machine)
              UUID : 03cfb72d:971a754f:8236aa23:21b23fd3
            Events : 18

    Number   Major   Minor   RaidDevice State
       0       8       16        0      active sync   /dev/sdb
       1       8       32        1      active sync   /dev/sdc
       2       8       48        2      active sync   /dev/sdd
       5       8       64        3      active sync   /dev/sde

       4       8       80        -      spare   /dev/sdf

&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;æ¨¡æ‹ŸæŸå&#34;&gt;æ¨¡æ‹ŸæŸå&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;æ‰§è¡Œå‘½ä»¤ï¼šmdadm /dev/md0 -f /dev/sdf&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ä½¿ç”¨cat /proc/mdstatæŸ¥çœ‹RAID5é˜µåˆ—çŠ¶æ€&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ç»“æœ&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;Personalities : [linear] [multipath] [raid0] [raid1] [raid6] [raid5] [raid4] [raid10] 
md0 : active raid5 sde[5] sdf[4](F) sdd[2] sdc[1] sdb[0]
      328704 blocks super 1.2 level 5, 64k chunk, algorithm 2 [4/4] [UUUU]

unused devices: &amp;lt;none&amp;gt;

/dev/md0:
           Version : 1.2
     Creation Time : Wed Jun  8 14:28:56 2022
        Raid Level : raid5
        Array Size : 328704 (321.00 MiB 336.59 MB)
     Used Dev Size : 109568 (107.00 MiB 112.20 MB)
      Raid Devices : 4
     Total Devices : 5
       Persistence : Superblock is persistent

       Update Time : Wed Jun  8 14:44:51 2022
             State : clean 
    Active Devices : 4
   Working Devices : 4
    Failed Devices : 1
     Spare Devices : 0

            Layout : left-symmetric
        Chunk Size : 64K

Consistency Policy : resync

              Name : zcjubuntu-virtual-machine:0  (local to host zcjubuntu-virtual-machine)
              UUID : 03cfb72d:971a754f:8236aa23:21b23fd3
            Events : 19

    Number   Major   Minor   RaidDevice State
       0       8       16        0      active sync   /dev/sdb
       1       8       32        1      active sync   /dev/sdc
       2       8       48        2      active sync   /dev/sdd
       5       8       64        3      active sync   /dev/sde

       4       8       80        -      faulty   /dev/sdf
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;ç§»é™¤æŸåçš„ç£ç›˜&#34;&gt;ç§»é™¤æŸåçš„ç£ç›˜&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;æ‰§è¡Œå‘½ä»¤ï¼šmdadm /dev/md0 -r /dev/sdf&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ä½¿ç”¨cat /proc/mdstatæŸ¥çœ‹RAID5é˜µåˆ—çŠ¶æ€&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ç»“æœ&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;Personalities : [linear] [multipath] [raid0] [raid1] [raid6] [raid5] [raid4] [raid10] 
md0 : active raid5 sde[5] sdd[2] sdc[1] sdb[0]
      328704 blocks super 1.2 level 5, 64k chunk, algorithm 2 [4/4] [UUUU]

unused devices: &amp;lt;none&amp;gt;

/dev/md0:
           Version : 1.2
     Creation Time : Wed Jun  8 14:28:56 2022
        Raid Level : raid5
        Array Size : 328704 (321.00 MiB 336.59 MB)
     Used Dev Size : 109568 (107.00 MiB 112.20 MB)
      Raid Devices : 4
     Total Devices : 4
       Persistence : Superblock is persistent

       Update Time : Wed Jun  8 14:49:13 2022
             State : clean 
    Active Devices : 4
   Working Devices : 4
    Failed Devices : 0
     Spare Devices : 0

            Layout : left-symmetric
        Chunk Size : 64K

Consistency Policy : resync

              Name : zcjubuntu-virtual-machine:0  (local to host zcjubuntu-virtual-machine)
              UUID : 03cfb72d:971a754f:8236aa23:21b23fd3
            Events : 20

    Number   Major   Minor   RaidDevice State
       0       8       16        0      active sync   /dev/sdb
       1       8       32        1      active sync   /dev/sdc
       2       8       48        2      active sync   /dev/sdd
       5       8       64        3      active sync   /dev/sde

&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;æ·»åŠ æ–°çš„ç¡¬ç›˜åˆ°å·²æœ‰é˜µåˆ—&#34;&gt;æ·»åŠ æ–°çš„ç¡¬ç›˜åˆ°å·²æœ‰é˜µåˆ—&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;æ‰§è¡Œå‘½ä»¤ï¼šmdadm /dev/md0 -a /dev/sdf&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ä½¿ç”¨cat /proc/mdstatæŸ¥çœ‹RAID5é˜µåˆ—çŠ¶æ€&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ç»“æœ&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;md0 : active raid5 sdf[4](S) sde[5] sdd[2] sdc[1] sdb[0]
      328704 blocks super 1.2 level 5, 64k chunk, algorithm 2 [4/4] [UUUU]

unused devices: &amp;lt;none&amp;gt;

/dev/md0:
           Version : 1.2
     Creation Time : Wed Jun  8 14:28:56 2022
        Raid Level : raid5
        Array Size : 328704 (321.00 MiB 336.59 MB)
     Used Dev Size : 109568 (107.00 MiB 112.20 MB)
      Raid Devices : 4
     Total Devices : 5
       Persistence : Superblock is persistent

       Update Time : Wed Jun  8 14:53:45 2022
             State : clean 
    Active Devices : 4
   Working Devices : 5
    Failed Devices : 0
     Spare Devices : 1

            Layout : left-symmetric
        Chunk Size : 64K

Consistency Policy : resync

              Name : zcjubuntu-virtual-machine:0  (local to host zcjubuntu-virtual-machine)
              UUID : 03cfb72d:971a754f:8236aa23:21b23fd3
            Events : 21

    Number   Major   Minor   RaidDevice State
       0       8       16        0      active sync   /dev/sdb
       1       8       32        1      active sync   /dev/sdc
       2       8       48        2      active sync   /dev/sdd
       5       8       64        3      active sync   /dev/sde

       4       8       80        -      spare   /dev/sdf

&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
        </item>
        <item>
        <title>Linux-Multi-Disk (MD)æ¨¡å—</title>
        <link>https://zcj-git520.github.io/p/linux-multi-disk-md%E6%A8%A1%E5%9D%97/</link>
        <pubDate>Mon, 30 May 2022 22:00:38 +0800</pubDate>
        
        <guid>https://zcj-git520.github.io/p/linux-multi-disk-md%E6%A8%A1%E5%9D%97/</guid>
        <description>&lt;img src="https://zcj-git520.github.io/p/linux-multi-disk-md%E6%A8%A1%E5%9D%97/image-20220613151649807.png" alt="Featured image of post Linux-Multi-Disk (MD)æ¨¡å—" /&gt;&lt;h4 id=&#34;æ¦‚è¿°&#34;&gt;æ¦‚è¿°&lt;/h4&gt;
&lt;p&gt;Linuxå†…æ ¸åœ¨å¤šå—è®¾å¤‡çš„åŸºç¡€ä¸Šï¼Œæ³¨å†Œäº†ä¸€å—ç‰¹æ®Šçš„è®¾å¤‡ï¼Œç§°ä¸ºä¸ºMDè®¾å¤‡ã€‚è¿™ä¸ªMDè®¾å¤‡å½¢æˆä¸€ä¸ªé€»è¾‘å±‚ï¼Œæ”¯æŒä¸åŒçš„RAIDæŠ€æœ¯&lt;/p&gt;
&lt;p&gt;&lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 130; 
			flex-basis: 313px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/linux-multi-disk-md%E6%A8%A1%E5%9D%97/image-20220613151649807.png&#34; data-size=&#34;491x376&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/linux-multi-disk-md%E6%A8%A1%E5%9D%97/image-20220613151649807.png&#34;
			width=&#34;491&#34;
			height=&#34;376&#34;
			srcset=&#34;https://zcj-git520.github.io/p/linux-multi-disk-md%E6%A8%A1%E5%9D%97/image-20220613151649807_huc45ff52f0cf6b2c13cf0b9e2262e1b7b_66945_480x0_resize_box_3.png 480w, https://zcj-git520.github.io/p/linux-multi-disk-md%E6%A8%A1%E5%9D%97/image-20220613151649807_huc45ff52f0cf6b2c13cf0b9e2262e1b7b_66945_1024x0_resize_box_3.png 1024w&#34;
			loading=&#34;lazy&#34;
			&gt;
	&lt;/a&gt;
	
&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;MDæ¨¡å—æ˜¯ä¸€ä¸ªè™šæ‹Ÿå—è®¾å¤‡ï¼Œå®ƒå±äºå—i/oå­ç³»ç»Ÿä¸­çš„å—è®¾å¤‡é©±åŠ¨å±‚ï¼Œæ¶æ„äºç‰©ç†å—è®¾å¤‡å±‚ï¼›å…¶æœ‰ä¸¤å±‚ï¼šRAIDå…±æ€§å±‚å’ŒRAIDä¸ªæ€§å±‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;RAIDå…±æ€§å±‚ï¼šå®ƒæå–å‡ºå„ç§çº§åˆ«çš„RAIDçš„å…¬å…±ç‰¹æ€§ï¼Œä¾ç…§å—è®¾å¤‡çš„å®ç°æ¨¡æ¿å‘ä¸Šå±‚æ³¨å†Œï¼ŒåŒæ—¶å‘RAIDä¸ªæ€§å±‚æä¾›å…¬å…±å‡½æ•°ï¼Œä»¥åŠæ¥å£æ³¨å†Œå‡½æ•°&lt;/li&gt;
&lt;li&gt;RAIDä¸ªæ€§å±‚ï¼šæ˜¯å„ç§çº§åˆ«RAIDçš„ä¸ªæ€§ä½“ç°ï¼Œå®ƒå‘RAIDå…¬å…±å±‚æ³¨å†Œä¸ªæ€§æ¥å£ï¼Œåˆ©ç”¨RAIDå…¬å…±å±‚æä¾›çš„å…¬å…±å‡½æ•°ï¼ŒåŸºäºä½å±‚å®ç°ä¸ªæ€§åŒ–åŠŸèƒ½&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;raidæ¨¡å—å¯¹è±¡&#34;&gt;RAIDæ¨¡å—å¯¹è±¡&lt;/h4&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;æ ¸å¿ƒMDè®¾å¤‡ç»“æ„mddevåŠå…¶æˆå‘˜ç£ç›˜è®¾å¤‡ç»“æ„mdk_rdev_tæ˜¯ç³»ç»Ÿä¸­çš„ä¸¤ä¸ªå…³é”®ç»“æ„ã€‚æ ¸å¿ƒMDè®¾å¤‡ç»“æ„mddev_tæ˜¯å†…æ ¸ä¸­RAIDè®¾å¤‡ä¿å­˜è‡ªèº«ä¿¡æ¯çš„ç»“æ„ä½“ï¼Œå®ƒåŒ…æ‹¬äº†å®Œæ•´çš„RAIDè®¾å¤‡çš„ä¿¡æ¯ã€‚æˆå‘˜ç£ç›˜è®¾å¤‡ç»“æ„mdk_rdev_tåæ˜ äº†ç»„æˆMDè®¾å¤‡çš„åº•å±‚å—è®¾å¤‡çš„ä¿¡æ¯ï¼›&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;MDè®¾å¤‡å¤„ç†å¯ä»¥æœ‰ä¸åŒçš„ç‰¹æ€§ï¼Œå®ƒæŒ‡å‘ä¸€ä¸ªMDä¸ªæ€§ç»“æ„ä½“ï¼Œæœ‰ä¸ªæ€§NDè®¾å¤‡çš„æ“ä½œè¡¨å’Œæ“ä½œçš„æœ€ç»ˆæ•°æ®&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;MDè®¾å¤‡é€šè¿‡å—è®¾å¤‡å·å’Œå—è®¾å¤‡æè¿°ç¬¦ï¼ˆblock_deviceï¼‰å…³è”èµ·æ¥ï¼Œä½å±‚æˆå‘˜ç£ç›˜ä¹ŸæŒ‡å‘å’Œå®ƒç›¸å¯¹åº”çš„å—è®¾å¤‡æè¿°ç¬¦æ­£æ˜¯ä»¥å—è®¾å¤‡æè¿°ç¬¦ä¸ºâ€œçº½å¸¦â€ï¼Œä½¿å¾—MDå¯ä»¥æ„å»ºåœ¨å…¶ä»–çš„ç‰©ç†æˆ–è™šæ‹Ÿç£ç›˜è®¾å¤‡ä¹‹ä¸Šï¼Œæˆä¸ºä¸€ä¸ªâ€œæ ˆå¼â€å—è®¾å¤‡ï¼›&lt;/p&gt;
&lt;p&gt;&lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 161; 
			flex-basis: 386px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/linux-multi-disk-md%E6%A8%A1%E5%9D%97/image-20220613154538680.png&#34; data-size=&#34;546x339&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/linux-multi-disk-md%E6%A8%A1%E5%9D%97/image-20220613154538680.png&#34;
			width=&#34;546&#34;
			height=&#34;339&#34;
			srcset=&#34;https://zcj-git520.github.io/p/linux-multi-disk-md%E6%A8%A1%E5%9D%97/image-20220613154538680_hu95e6a8286145ebb4704fcc542b2119eb_66459_480x0_resize_box_3.png 480w, https://zcj-git520.github.io/p/linux-multi-disk-md%E6%A8%A1%E5%9D%97/image-20220613154538680_hu95e6a8286145ebb4704fcc542b2119eb_66459_1024x0_resize_box_3.png 1024w&#34;
			loading=&#34;lazy&#34;
			&gt;
	&lt;/a&gt;
	
&lt;/figure&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h4 id=&#34;mdæ¨¡å—åˆå§‹åŒ–&#34;&gt;MDæ¨¡å—åˆå§‹åŒ–&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;MDæ¨¡å—åŠ è½½æ—¶ï¼Œå®ƒçš„åˆå§‹åŒ–å‡½æ•°md_initå°†è¢«æ‰§è¡Œ;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;__register_blkdevå‡½æ•°:æ˜¯ç»´æŠ¤ä¸»è®¾å¤‡å·å’Œå—è®¾å¤‡åä¹‹é—´çš„å…³è”,æ‰€æœ‰å—è®¾å¤‡æ¨¡å—åˆå§‹åŒ–æ—¶ï¼Œéƒ½åº”è¯¥è°ƒç”¨è¿™ä¸ªå‡½æ•°&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;static void md_geninit(void)
{
	pr_debug(&amp;quot;md: sizeof(mdp_super_t) = %d\n&amp;quot;, (int)sizeof(mdp_super_t));

	proc_create(&amp;quot;mdstat&amp;quot;, S_IRUGO, NULL, &amp;amp;mdstat_proc_ops);
}

static int __init md_init(void)
{
	int ret = -ENOMEM;

	md_wq = alloc_workqueue(&amp;quot;md&amp;quot;, WQ_MEM_RECLAIM, 0);
	if (!md_wq)
      goto err_wq;

	md_misc_wq = alloc_workqueue(&amp;quot;md_misc&amp;quot;, 0, 0);
	if (!md_misc_wq)
      goto err_misc_wq;

	md_rdev_misc_wq = alloc_workqueue(&amp;quot;md_rdev_misc&amp;quot;, 0, 0);
	if (!md_rdev_misc_wq)
      goto err_rdev_misc_wq;

	ret = __register_blkdev(MD_MAJOR, &amp;quot;md&amp;quot;, md_probe);
	if (ret &amp;lt; 0)
      goto err_md;

	ret = __register_blkdev(0, &amp;quot;mdp&amp;quot;, md_probe);
	if (ret &amp;lt; 0)
      goto err_mdp;
	mdp_major = ret;

	register_reboot_notifier(&amp;amp;md_notifier);
	raid_table_header = register_sysctl_table(raid_root_table);

	md_geninit();
	return 0;

err_mdp:
	unregister_blkdev(MD_MAJOR, &amp;quot;md&amp;quot;);
err_md:
	destroy_workqueue(md_rdev_misc_wq);
err_rdev_misc_wq:
	destroy_workqueue(md_misc_wq);
err_misc_wq:
	destroy_workqueue(md_wq);
err_wq:
	return ret;
}
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;mdè®¾å¤‡åˆ›å»º&#34;&gt;MDè®¾å¤‡åˆ›å»º&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;md_probe()å‡½æ•°è´Ÿè´£åˆ›å»ºMDå¯¹è±¡,ç›´æ¥è°ƒç”¨md_allocå‡½æ•°ï¼›&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;static void md_probe(dev_t dev)
{
	if (MAJOR(dev) == MD_MAJOR &amp;amp;&amp;amp; MINOR(dev) &amp;gt;= 512)
      return;
	if (create_on_open)
      md_alloc(dev, NULL);
}
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;md_open():æ˜¯ç³»ç»Ÿè°ƒç”¨opençš„å®ç°ä»£ç ç»§ç»­æ‰§è¡Œï¼Œè°ƒç”¨å—è®¾å¤‡æ“ä½œè¡¨çš„openå›è°ƒå‡½æ•°çš„å®ä¾‹åŒ–&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;ç”¨æˆ·æ€å‘é€ioctlåˆ›å»ºmd&#34;&gt;ç”¨æˆ·æ€å‘é€ioctlåˆ›å»ºMD&lt;/h4&gt;
&lt;p&gt;ä½¿ç”¨ç®¡ç†å·¥å…·åˆ›å»ºMDæ˜¯é€šè¿‡ioctlæ¥å®ç°çš„ã€‚åœ¨æ‰“å¼€MDè®¾å¤‡æ–‡ä»¶ï¼ˆå¦‚/dev/md0ï¼‰æƒ…å†µä¸‹ï¼Œæ–‡ä»¶æ“ä½œè¡¨è¢«è®¾ç½®ä¸ºdef_blk_fopsï¼Œå…¶unlocked_ioctlå›è°ƒå‡½æ•°çš„å®ç°ä¸ºblock_ioctlï¼Œè€Œåè€…ç»è°ƒç”¨blkdev_ioctlï¼Œå†è°ƒç”¨__blkdev_driver_ioctlï¼Œæœ€åè°ƒç”¨çš„æ˜¯é€šç”¨ç£ç›˜çš„å—è®¾å¤‡æ“ä½œè¡¨ä¸­çš„ioctlå›è°ƒå‡½æ•°&lt;/p&gt;
&lt;p&gt;å‡½æ•°md_iocal()å¯å¯¹è®¾å¤‡é©±åŠ¨ã€ç£ç›˜ã€è®¾å¤‡è¿›è¡ŒæŸ¥è¯¢ã€æ§åˆ¶å’Œé…ç½®:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;é’ˆå¯¹äºRAIDé©±åŠ¨ç¨‹åºï¼Œè€Œéç‰¹å®šçš„é˜µåˆ—ï¼›ä¾‹å¦‚è·å–RAIDé©±åŠ¨ç¨‹åºç‰ˆæœ¬å·ä»¥åŠæ‰“å°æ‰€æœ‰RAIDé˜µåˆ—ä¿¡æ¯ç­‰&lt;/li&gt;
&lt;li&gt;é’ˆå¯¹äºç‰¹å®šé˜µåˆ—ï¼Œä¸»è¦å‘½ä»¤å¦‚ä¸‹ï¼šå¦‚SET_ARRAY_INFOè®¾ç½®MDè®¾å¤‡ä¿¡æ¯ï¼›ADD_NEW_DISKåœ¨MDè®¾å¤‡ä¸­æ·»åŠ ä¸€ä¸ªç£ç›˜è®¾å¤‡ï¼›RUN_ARRAYè¿è¡ŒMDè®¾å¤‡ç­‰&lt;/li&gt;
&lt;li&gt;SET_ARRAY_INFOï¼šåœ¨md_ioctlï¼Œå¤„ç†SET_ARRAY_INFOæ§åˆ¶ç çš„ä»£ç é¦–å…ˆä»ç”¨æˆ·ç©ºé—´å¤åˆ¶å‚æ•°ï¼Œç„¶åæ ¹æ®MDè®¾å¤‡æ˜¯å¦å·²ç»å­˜åœ¨åˆ†åˆ«è°ƒç”¨update_array_infoå’Œmd_set_array_infoå‡½æ•°ï¼›&lt;/li&gt;
&lt;li&gt;ADD_NEW_DISK:åœ¨md_ioctlï¼Œå¤„ç†ADD_NEW_DISKæ§åˆ¶ç çš„ä»£ç é¦–å…ˆä»ç”¨æˆ·ç©ºé—´å¤åˆ¶å‚æ•°ï¼Œç„¶åè°ƒmd_add_new_diskå‡½æ•°;&lt;/li&gt;
&lt;li&gt;RUN_ARRAY:å¤„ç†RUN_ARRAYæ§åˆ¶ç çš„ä»£ç ç›´æ¥è°ƒç”¨do_md_runå‡½æ•°;&lt;/li&gt;
&lt;/ol&gt;
&lt;h4 id=&#34;mdè®¾å¤‡è¯·æ±‚æ‰§è¡Œ&#34;&gt;MDè®¾å¤‡è¯·æ±‚æ‰§è¡Œ&lt;/h4&gt;
&lt;p&gt;MDæ¨¡å—ä¸­æä¾›äº†ä¸€ä¸ªé€šç”¨çš„æ¥å£å‡½æ•°md_make_requestä½œä¸ºå„ç§çº§åˆ«RAIDè®¾å¤‡çš„è¯»ï¼å†™è¯·æ±‚çš„å…¥å£;&lt;/p&gt;
&lt;p&gt;åŠ è½½MDæ¨¡å—æ—¶ï¼Œè°ƒç”¨blk_queue_make_requestå‡½æ•°å°†æ‰€æœ‰å¯¹ä¸»è®¾å¤‡å·ä¸ºMD_MAJORçš„è¯»ï¼å†™è¯·æ±‚éƒ½è½¬å‘åˆ°è¿™ä¸ªå‡½æ•°ã€‚ä½†è¿™ä¸ªå‡½æ•°å¹¶ä¸æ‰§è¡ŒçœŸæ­£å¤„ç†ï¼Œåªæ˜¯é€šè¿‡æ˜ å°„æ‰¾åˆ°å—è®¾å¤‡æ¬¡è®¾å¤‡å·å¯¹åº”MDè®¾å¤‡ç»“æ„ï¼Œè¿›è€Œè·å¾—å…¶ä¸ªæ€§åŒ–ç»“æ„æŒ‡é’ˆï¼Œè°ƒç”¨ä¸ªæ€§åŒ–ç»“æ„çš„make_requestï¼Œå³é€šè¿‡å’Œè¯¥RAIDçº§åˆ«å¯¹åº”çš„è¯·æ±‚å¤„ç†å‡½æ•°æ¥å¤„ç†è¿™ä¸ªè¯·æ±‚;&lt;/p&gt;
</description>
        </item>
        <item>
        <title>Linux-raid5å­¦ä¹ </title>
        <link>https://zcj-git520.github.io/p/linux-raid5%E5%AD%A6%E4%B9%A0/</link>
        <pubDate>Sun, 15 May 2022 22:00:38 +0800</pubDate>
        
        <guid>https://zcj-git520.github.io/p/linux-raid5%E5%AD%A6%E4%B9%A0/</guid>
        <description>&lt;img src="https://zcj-git520.github.io/p/linux-raid5%E5%AD%A6%E4%B9%A0/1.png" alt="Featured image of post Linux-raid5å­¦ä¹ " /&gt;&lt;h3 id=&#34;raid5æ¨¡å—&#34;&gt;RAID5æ¨¡å—&lt;/h3&gt;
&lt;p&gt;RAID5æ¨¡å—çš„å¯¹è±¡ï¼Œæ¨¡å—çš„æ‰§è¡Œè¿‡ç¨‹åŠå…¶åŒæ­¥å’Œæ¢å¤è¿‡ç¨‹&lt;/p&gt;
&lt;h4 id=&#34;raid5æ¨¡å—å¯¹è±¡&#34;&gt;RAID5æ¨¡å—å¯¹è±¡&lt;/h4&gt;
&lt;p&gt;å¯¹äºRAID5ï¼ŒMDè®¾å¤‡æè¿°ç¬¦ï¼ˆmddevï¼‰çš„privateåŸŸæŒ‡å‘RAID5ç§æœ‰é…ç½®ç»“æ„r5confã€‚åè€…åŒ…å«ä¸€ä¸ªæˆå‘˜ç£ç›˜
æ•°ç»„ï¼Œæ¯ä¸€é¡¹éƒ½æŒ‡å‘å¯¹åº”çš„æˆå‘˜ç£ç›˜æè¿°ç¬¦ï¼ˆmdk_rdev_tï¼‰ï¼Œè€Œè¿™äº›æˆå‘˜ç£ç›˜æè¿°ç¬¦è¢«é“¾å…¥MDè®¾å¤‡æè¿°ç¬¦çš„æˆå‘˜ç£ç›˜é“¾è¡¨ï¼Œå¹¶ä¸”æœ‰æŒ‡é’ˆæŒ‡å‘MDè®¾å¤‡ï¼›&lt;/p&gt;
&lt;p&gt;&lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 214; 
			flex-basis: 513px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/linux-raid5%E5%AD%A6%E4%B9%A0/1.png&#34; data-size=&#34;546x255&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/linux-raid5%E5%AD%A6%E4%B9%A0/1.png&#34;
			width=&#34;546&#34;
			height=&#34;255&#34;
			srcset=&#34;https://zcj-git520.github.io/p/linux-raid5%E5%AD%A6%E4%B9%A0/1_hu7e02b142b51acc83a4bc67a855e709b3_49591_480x0_resize_box_3.png 480w, https://zcj-git520.github.io/p/linux-raid5%E5%AD%A6%E4%B9%A0/1_hu7e02b142b51acc83a4bc67a855e709b3_49591_1024x0_resize_box_3.png 1024w&#34;
			loading=&#34;lazy&#34;
			&gt;
	&lt;/a&gt;
	
&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;RAID5æ”¯æŒå†—ä½™ï¼Œåœ¨æ¡å¸¦ä¸­é‡‡ç”¨äº†æ ¡éªŒå’ŒæŠ€æœ¯ã€‚å¯¹RAID5è®¾å¤‡çš„æ­£å¸¸è¯»ï¼å†™å’ŒåŒæ­¥ï¼æ¢å¤ï¼æ‰©å±•ç­‰æ“ä½œéƒ½æ˜¯ä»¥æ¡å¸¦ä¸ºåŸºæœ¬å•ä½å¤„ç†çš„ï¼Œæ¡å¸¦ç®¡ç†ç»“æ„ä¸ºâ€œæ¡å¸¦å¤´â€ï¼ˆstripe_headï¼‰ã€‚æ¯ä¸ªRAID5è®¾å¤‡åˆ†é…æœ‰å›ºå®šæ•°ç›®çš„æ¡å¸¦å¤´ï¼Œéšç€ç³»ç»Ÿè¿è¡Œï¼Œè¿™äº›æ¡å¸¦å¤´å¯èƒ½è¢«æŒ‚è½½åˆ°RAID5è®¾å¤‡çš„ä¸åŒé“¾è¡¨ï¼Œè¢«æ¡å¸¦ä½¿ç”¨ä¸­çš„æ¡å¸¦å¤´ç»“æ„è¿˜ä¼šé“¾å…¥RAID5çš„å“ˆå¸Œè¡¨ä»¥ä¾¿äºæŸ¥æ‰¾&lt;/p&gt;
&lt;p&gt;æ¯ä¸ªRAID5è®¾å¤‡è¢«åˆ†é…ä¸€å®šæ•°ç›®çš„æ¡å¸¦ç”¨äºå¤„ç†æäº¤ç»™å®ƒçš„è¯·æ±‚ï¼Œæœ€å¤§æ¡å¸¦æ•°ç›®ç”±max_nr_stripesåŸŸç»™å‡ºã€‚è¿™äº›æ¡å¸¦æ ¹æ®å…¶çŠ¶æ€è¢«é“¾å…¥åˆ°ä¸åŒçš„é“¾è¡¨ã€‚RAID5è®¾å¤‡æœ‰ä»¥ä¸‹äº”ä¸ªä¸åŒçš„é“¾è¡¨&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;inactive_listä¸ºç©ºé—²çš„æ¡å¸¦åˆ—è¡¨ï¼šåœ¨RAID5å¼€å§‹è¿è¡Œä¹‹åˆï¼Œæ‰€æœ‰çš„æ¡å¸¦éƒ½åœ¨inactive_listä¸­ã€‚åœ¨æœ‰è¯·æ±‚åˆ°è¾¾æ—¶ï¼Œä¸ºå®ƒåˆ†é…å¹¶å…³è”ä¸€ä¸ªæ¡å¸¦ã€‚æ¡å¸¦å¤„ç†å®Œæˆï¼Œåˆè¢«é‡Šæ”¾å›åˆ°è¿™ä¸ªé“¾è¡¨ï¼›&lt;/li&gt;
&lt;li&gt;handle_listä¸ºéœ€è¦å¤„ç†çš„æ¡å¸¦åˆ—è¡¨ï¼šè¦å¤„ç†çš„æ¡å¸¦éƒ½ä¼šè¢«æ·»åŠ åˆ°handle_listé“¾è¡¨ï¼ŒRAID5å®ˆæŠ¤çº¿ç¨‹å°±æ˜¯æ ¹æ®è¿™ä¸ªé“¾è¡¨è¿›è¡Œå¤„ç†çš„ã€‚æ¡å¸¦è¢«å¤„ç†æ—¶ï¼Œä¼šè¢«ä»é“¾è¡¨ä¸­åˆ é™¤ï¼Œæš‚æ—¶å¤„äºâ€œæ¸¸ç¦»â€çŠ¶æ€ã€‚ä¸€ä¸ªæ¡å¸¦éœ€è¦å¤šè½®å¤„ç†ï¼Œæ¯ä¸€è½®å¤„ç†å®Œæˆä¹‹åï¼Œéƒ½è¢«é‡æ–°åŠ å…¥æŸä¸ªé“¾è¡¨ï¼Œæœ€ç»ˆåˆä¼šè¢«é‡æ–°åŠ å…¥handle_listé“¾è¡¨ï¼Œå¼€å§‹æ–°ä¸€è½®å¤„ç†ã€‚&lt;/li&gt;
&lt;li&gt;bitmap_listä¸ºå› ç­‰å¾…ä½å›¾æ›´æ–°è€Œå»¶è¿Ÿçš„æ¡å¸¦é“¾è¡¨ï¼šå¦‚æœåœ¨å¯¹RAID5è®¾å¤‡è¿›è¡Œå†™æ“ä½œæ—¶çªç„¶æ‰ç”µï¼Œå°±å¯èƒ½é€ æˆæŸäº›æ¡å¸¦çš„ä¸åŒæ­¥ï¼Œæœ‰å¯èƒ½æ•°æ®å·²ç»è¢«å†™å…¥æˆå‘˜ç£ç›˜ï¼Œè€Œæ ¡éªŒå’Œè¿˜æ²¡æœ‰è¢«å†™å…¥ï¼Œåˆæˆ–è€…æ ¡éªŒå’Œå·²ç»è¢«å†™å…¥ï¼Œè€ŒæŸäº›æ•°æ®è¿˜æ²¡æœ‰è¢«å†™å…¥æˆå‘˜ç£ç›˜ã€‚å½“RAID5å†æ¬¡è¢«é‡ç»„ä»¥åï¼Œå°±éœ€è¦è¿›è¡ŒåŒæ­¥å¤„478ç†ï¼Œè€Œè¿™éœ€è¦æˆ‘ä»¬çŸ¥é“å“ªäº›æ¡å¸¦éœ€è¦è¢«åŒæ­¥ï¼Œå¦åˆ™åªèƒ½è¿›è¡Œå…¨é¢çš„åŒæ­¥ï¼Œè¿™æ ·åšæ˜¾ç„¶å¼€é”€éå¸¸å¤§ã€‚ä½å›¾å°±æ˜¯ä¸ºæ­¤ç›®çš„è€Œå¼•å…¥çš„ã€‚å¦‚æœRAID5æ”¯æŒä½å›¾ï¼Œæ¯ä¸€ä¸ªå—ä¼šå¯¹åº”ä¸€ä¸ªä½å›¾ä½ï¼Œåœ¨è¿›è¡Œå†™æ“ä½œçš„æ—¶å€™ï¼Œä¼šå…ˆå°†å¯¹åº”çš„ä½å›¾ä½ç½®æˆ1ï¼Œè¿™æ—¶å†™è¯·æ±‚ä¹Ÿè¢«æ”¾å…¥bitmap_listé“¾è¡¨ï¼Œåªæœ‰åœ¨è¯¥ä½å›¾ä½è¢«æˆåŠŸå†²åˆ·åˆ°ç£ç›˜ä¹‹åï¼Œæ‰èƒ½å¤„ç†è¿™ä¸ªå†™è¯·æ±‚ã€‚å½“è¿›è¡ŒåŒæ­¥æ“ä½œçš„æ—¶å€™ï¼Œæ ¹æ®ä½å›¾ä½ï¼ŒåªåŒæ­¥é‚£äº›è¢«ç½®ä¸º1çš„æ¡å¸¦ã€‚é‡‡ç”¨ä½å›¾ç­–ç•¥æœ€å¤§çš„ä¼˜ç‚¹æ˜¯å‡å°‘äº†æ— è°“çš„åŒæ­¥æ“ä½œï¼Œæé«˜äº†åŒæ­¥æ“ä½œæ•ˆç‡ã€‚&lt;/li&gt;
&lt;li&gt;delayed_listä¸ºè¢«å»¶è¿Ÿå¤„ç†çš„æ¡å¸¦é“¾è¡¨ï¼šåœ¨æœ‰å†™è¯·æ±‚åˆ°è¾¾æ¡å¸¦çš„æŸä¸ªæˆå‘˜ç£ç›˜æ—¶ï¼Œå¹¶ä¸æ˜¯ç«‹å³å°†è¯·æ±‚æ”¾handle_listå‡†å¤‡å¤„ç†ï¼Œè€Œæ˜¯å…ˆæ”¾å…¥delayed_listé“¾è¡¨å»¶è¿Ÿä¸€æ®µæ—¶é—´ï¼Œå»¶è¿Ÿçš„ç›®çš„æ˜¯ä¸ºäº†ç­‰å¾…â€œå¯èƒ½æœ‰â€æ›´å¤šé’ˆå¯¹è¿™ä¸ªæ¡å¸¦çš„å…¶ä»–æˆå‘˜ç£ç›˜çš„å†™è¯·æ±‚åˆ°æ¥ï¼Œè¿™æ ·åšå¯ä»¥ä»æ•´ä½“ä¸Šå‡å°‘â€œé¢„è¯»â€ï¼ˆæ— è®ºæ˜¯é‡æ„å†™è¿˜æ˜¯è¯»æ”¹å†™ï¼‰çš„æ¬¡æ•°ã€‚åªæœ‰å½“æ¡å¸¦è¢«â€œæ¿€æ´»è¯»â€åï¼Œæ‰å¼€å§‹å°†delayed_listé“¾è¡¨ä¸­çš„æ¡å¸¦è½¬ç§»åˆ°å…¶ä»–é“¾è¡¨è¿›è¡Œå¤„ç†ã€‚&lt;/li&gt;
&lt;li&gt;hold_listä¸ºå‡†å¤‡å¥½é¢„è¯»çš„æ¡å¸¦é“¾è¡¨ï¼šå½“å‰çš„Linuxå†…æ ¸ç‰ˆæœ¬ä¸ºäº†é˜²æ­¢delayed_listä¸€è‚¡è„‘å„¿å°†æ‰€æœ‰çš„æ¡å¸¦è½¬ç§»åˆ°handle_listï¼Œåœ¨å…¶ä¸­å¼•å…¥hold_listé“¾è¡¨ï¼Œå»¶è¿Ÿçš„æ¡å¸¦å…ˆè¢«ä¿å­˜åˆ°hold_listé“¾è¡¨ä»¥è¿›ä¸€æ­¥å»¶è¿Ÿï¼Œæ ¹æ®ç‰¹å®šçš„ç®—æ³•ï¼Œhold_listè¢«ç»•è¿‡ï¼Œä¹Ÿæœ‰å¯èƒ½è¢«è½¬ç§»åˆ°handle_listè€Œå¾—åˆ°å¤„ç†ã€‚äº‹å®è¯æ˜ï¼Œè¿™æ ·åšå¯ä»¥æ”¹è¿›å†™æ€§èƒ½&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 128; 
			flex-basis: 308px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/linux-raid5%E5%AD%A6%E4%B9%A0/2.png&#34; data-size=&#34;754x587&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/linux-raid5%E5%AD%A6%E4%B9%A0/2.png&#34;
			width=&#34;754&#34;
			height=&#34;587&#34;
			srcset=&#34;https://zcj-git520.github.io/p/linux-raid5%E5%AD%A6%E4%B9%A0/2_hu8959bc3f50cba5ee7ab9bfeff9b4b77c_194121_480x0_resize_box_3.png 480w, https://zcj-git520.github.io/p/linux-raid5%E5%AD%A6%E4%B9%A0/2_hu8959bc3f50cba5ee7ab9bfeff9b4b77c_194121_1024x0_resize_box_3.png 1024w&#34;
			loading=&#34;lazy&#34;
			&gt;
	&lt;/a&gt;
	
&lt;/figure&gt;&lt;/p&gt;
&lt;h4 id=&#34;è¯·æ±‚æ‰§è¡Œè¿‡ç¨‹&#34;&gt;è¯·æ±‚æ‰§è¡Œè¿‡ç¨‹&lt;/h4&gt;
&lt;p&gt;RAID5ä½œä¸ºä¸€ä¸ªç‹¬ç«‹çš„æ¨¡å—ï¼Œåœ¨åˆå§‹åŒ–æ—¶è°ƒç”¨raid5_initï¼Œåœ¨å¸è½½æ—¶è°ƒç”¨raid5_exitã€‚è€Œraid5_initåˆ™æ˜¯é€šè¿‡è°ƒç”¨register_md_personalityæ³¨å†ŒRAID5ä¸ªæ€§åŒ–ï¼ŒåŒ…æ‹¬æ¨¡å—åå’Œä¸€äº›ä¸ªæ€§åŒ–æ–¹æ³•ä¿¡æ¯ã€‚åœ¨raid5_exitä¸­åˆ™è°ƒç”¨unregister_md_personalityæ³¨é”€RAID5ä¸ªæ€§åŒ–ï¼›&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;æ¥æ”¶ä¸Šå±‚æäº¤è¯·æ±‚ï¼šä¸Šå±‚æäº¤ç»™MDè®¾å¤‡çš„è¯·æ±‚ï¼Œä¼šè¢«ä¼ é€’ç»™raid5_make_requestå‡½æ•°ï¼›&lt;/li&gt;
&lt;li&gt;md_write_startå‡½æ•°ï¼Œå®ƒå’Œåé¢çš„md_write_endäº’ä¸ºå¯¹åº”ï¼Œéƒ½æ˜¯MDæ¨¡å—æä¾›çš„å…¬å…±å‡½æ•°ï¼Œä¾›RAID5ç­‰æ”¯æŒå†—ä½™çš„ä¸ªæ€§æ¨¡å—è°ƒç”¨;&lt;/li&gt;
&lt;li&gt;chunk_aligned_readå‡½æ•°å¤„ç†å¯¹é½è¯»ã€‚æ‰€è°“å¯¹é½è¯»ï¼ˆAlignedReadï¼‰ï¼Œæ˜¯æŒ‡è¦è¯»çš„æ•°æ®åœ¨ä¸€ä¸ªChunkè¾¹ç•Œå†…ï¼Œå› æ­¤åªéœ€è¦ä»æŸä¸ªæˆå‘˜ç£ç›˜è¯»å–å³å¯ï¼Œä¸æ¶‰åŠæ•´ä¸ªæ¡å¸¦çš„é…åˆ;å‡½æ•°æ ¹æ®è¯·æ±‚æ˜¯å¦åœ¨ä¸€ä¸ªChunkè¾¹ç•Œå†…ï¼Œä»¥åŠç›®æ ‡æˆå‘˜ç£ç›˜æ˜¯å¦å¤„åœ¨åŒæ­¥çŠ¶æ€ç­‰ï¼Œåˆ¤æ–­æ˜¯å¦å¯ä»¥æŒ‰å¯¹é½è¯»å¤„ç†&lt;/li&gt;
&lt;li&gt;raid5_compute_sector:å‡½æ•°è¾“å…¥ä¸€ä¸ªç›¸å¯¹RAID5è®¾å¤‡çš„â€œå¤§çš„â€æ‰‡åŒºç¼–å·ï¼Œè¾“å‡ºæ•°æ®ç£ç›˜å’Œæ ¡éªŒç£ç›˜çš„ç¼–å·ï¼Œä»¥åŠå…¶ä¸Šçš„æ‰‡åŒºç¼–å·ï¼Œå³æ¡å¸¦ç¼–å·ï¼Œæ ¹æ®æ‰‡åŒºç¼–å·è®¡ç®—æ•°æ®ç£ç›˜å’Œæ ¡éªŒç£ç›˜çš„ç¼–å·åŠåœ¨å…¶ä¸Šçš„æ‰‡åŒºç¼–å·&lt;/li&gt;
&lt;li&gt;raids_compute_sectorå‡½æ•°æœ‰äº”ä¸ªå‚æ•°ï¼šç¬¬ä¸€ä¸ªä¸ºæŒ‡å‘r5confæè¿°ç¬¦çš„æŒ‡é’ˆï¼›ç¬¬äºŒä¸ªä¸ºç›®æ ‡æ‰‡åŒºç¼–å·ï¼ˆç›¸å¯¹äºRAID5è®¾å¤‡ï¼‰ï¼›ç¬¬ä¸‰ä¸ªä¸º1è¡¨ç¤ºæ ¹æ®å˜æ›´å‰çš„å‚æ•°è¿›è¡Œè®¡ç®—ï¼Œä¸º0è¡¨ç¤ºæ ¹æ®å˜æ›´åçš„å‚æ•°è¿›è¡Œè®¡ç®—ï¼›ç¬¬å››ä¸ªä¸ºè¾“å‡ºå‚æ•°ï¼Œé€šè¿‡å®ƒè¿”å›æ•°æ®å•å…ƒåœ¨æ¡å¸¦ä¸­çš„ç¼–å·ï¼›ç¬¬äº”ä¸ªä¸ºæŒ‡å‘å¯¹åº”stripe_headæè¿°ç¬¦çš„æŒ‡é’ˆï¼Œè¿™æ—¶è®¡ç®—å¥½çš„Pæ ¡éªŒå•å…ƒç¼–å·ã€Qæ ¡éªŒå•å…ƒç¼–å·ã€ddf_layoutæ ‡å¿—å°†è¢«ä¿å­˜åœ¨å®ƒçš„å¯¹åº”åŸŸï¼Œæˆ–ä¸ºNULLã€‚å‡½æ•°è¿”å›å¯¹åº”æ‰‡åŒºåœ¨æˆå‘˜ç£ç›˜ä¸Šçš„æ‰‡åŒºç¼–å·ï¼Œå³æ¡å¸¦ç¼–å·&lt;/li&gt;
&lt;/ol&gt;
&lt;h5 id=&#34;raid5æ ¡éªŒç›˜å’Œæ•°æ®ç›˜ç¼–å·ä¸ç®—æ³•&#34;&gt;RAID5æ ¡éªŒç›˜å’Œæ•°æ®ç›˜ç¼–å·ä¸ç®—æ³•&lt;/h5&gt;
&lt;p&gt;å‡è®¾æ•°æ®å•å…ƒæ ‡å·ä¸ºchunk_numberï¼ŒRAIDç£ç›˜æ•°ä¸ºraid_disksï¼Œæ•°æ®ç›˜æ•°ä¸ºdata_disksï¼Œæ‰€åœ¨æ¡å¸¦ç¼–å·ä¸ºstripe=chunk_number/data_disksã€‚ç„¶åè®¡ç®—åœ¨æ¡å¸¦å†…çš„æ•°æ®ç£ç›˜å’Œæ ¡éªŒç£ç›˜ç¼–å·&lt;/p&gt;
&lt;p&gt;RAID5çš„ç®—æ³•å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;å‘å·¦ä¸å¯¹ç§°ç®—æ³•ï¼šæ ¡éªŒç›˜ç¼–å·ä¸ºdata_disks-stripe%raid_disksã€‚æ•°æ®ç›˜ç¼–å·ä¸ºchunk_number%data_disksï¼Œå¦‚æœè¯¥å€¼å¤§äºæˆ–ç­‰äºæ ¡éªŒç›˜ç¼–å·ï¼Œåˆ™è¿˜éœ€è¦åŠ 1ï¼›&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å‘å³ä¸å¯¹ç§°ç®—æ³•ï¼šæ ¡éªŒç›˜ç¼–å·ä¸ºstripe%raid_disksã€‚æ•°æ®ç›˜ç¼–å·ä¸ºchunk_number%data_disksï¼Œå¦‚æœè¯¥å€¼å¤§äºæˆ–ç­‰äºæ ¡éªŒç›˜ç¼–å·ï¼Œåˆ™è¿˜éœ€è¦åŠ 1ï¼›&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å‘å·¦å¯¹ç§°ç®—æ³•ï¼šæ ¡éªŒç›˜ç¼–å·ä¸ºdata_disks-stripe%raid_disksï¼Œè€Œæ•°æ®ç›˜ç¼–å·ä¸ºï¼ˆæ ¡éªŒç›˜ç¼–å·ï¼‹1ï¼‹chunk_number%data_disksï¼‰%raid_disksï¼›&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å‘å³å¯¹ç§°ç®—æ³•ï¼šæ ¡éªŒç›˜ç¼–å·ä¸ºstripe%raid_disksï¼Œè€Œæ•°æ®ç›˜ç¼–å·ä¸ºï¼ˆæ ¡éªŒç›˜ç¼–å·ï¼‹1ï¼‹chunk_number%data_disksï¼‰%raid_disksã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;æœ€åï¼Œç›®æ ‡æ‰‡åŒºåœ¨æ•°æ®ç›˜å’Œæ ¡éªŒç›˜ä¸Šçš„æ‰‡åŒºç¼–å·ä¸ºstripe*sectors_per_chunkï¼‹
chunk_offsetã€‚&lt;/p&gt;
&lt;p&gt;&lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 195; 
			flex-basis: 468px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/linux-raid5%E5%AD%A6%E4%B9%A0/image-20220615135945792.png&#34; data-size=&#34;546x280&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/linux-raid5%E5%AD%A6%E4%B9%A0/image-20220615135945792.png&#34;
			width=&#34;546&#34;
			height=&#34;280&#34;
			srcset=&#34;https://zcj-git520.github.io/p/linux-raid5%E5%AD%A6%E4%B9%A0/image-20220615135945792_hu56cf7082cf273c5a6b9a0abcf9200974_210594_480x0_resize_box_3.png 480w, https://zcj-git520.github.io/p/linux-raid5%E5%AD%A6%E4%B9%A0/image-20220615135945792_hu56cf7082cf273c5a6b9a0abcf9200974_210594_1024x0_resize_box_3.png 1024w&#34;
			loading=&#34;lazy&#34;
			&gt;
	&lt;/a&gt;
	
&lt;/figure&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h4 id=&#34;ç®¡ç†raid5æ¡å¸¦èµ„æº&#34;&gt;ç®¡ç†RAID5æ¡å¸¦èµ„æº&lt;/h4&gt;
&lt;p&gt;æ¡å¸¦å¤´æ˜¯åœ¨RAID5å¼€å§‹è¿è¡Œçš„æ—¶å€™å¼€è¾Ÿçš„ç¼“å†²åŒºï¼Œè¿™æ˜¯ä¸€ä¸ªæœ‰é™çš„èµ„æºï¼Œé™¤äº†åœ¨æ•°æ®å¤„ç†è¿‡ç¨‹ä¸­éœ€è¦è°ƒåº¦ä»¥å¤–ï¼Œè¿˜éœ€è¦ä¸€å¥—å®Œæ•´çš„æœºåˆ¶å»ä½¿å¾—è¿™äº›æœ‰é™çš„èµ„æºèƒ½å¤Ÿæ»¡è¶³æ•°æ®è¯·æ±‚å¤„ç†æ‰€éœ€&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;raid5_get_active_stripeï¼šå‡½æ•°æœ‰äº”ä¸ªå‚æ•°ï¼šç¬¬ä¸€ä¸ªä¸ºæŒ‡å‘RAID5ç§æœ‰æ•°æ®æè¿°ç¬¦çš„æŒ‡é’ˆï¼›ç¬¬äºŒä¸ªä¸ºæ¡å¸¦ç¼–å·ï¼›ç¬¬ä¸‰ä¸ªä¸º1è¡¨ç¤ºæ ¹æ®å˜æ›´å‰çš„å‚æ•°è¿›è¡Œè®¡ç®—ï¼Œä¸º0è¡¨ç¤ºæ ¹æ®å˜æ›´åçš„å‚æ•°è¿›è¡Œè®¡ç®—ï¼›ç¬¬å››ä¸ªä¸º1è¡¨ç¤ºä¸è¦é˜»å¡ï¼Œä¸º0è¡¨ç¤ºé˜»å¡ï¼Œç›´åˆ°è·å¾—ä¸€ä¸ªæ´»åŠ¨æ¡å¸¦ï¼›ç¬¬äº”ä¸ªä¸ºnoquiesceã€‚å‡½æ•°è¿”å›æŒ‡å‘æ¡å¸¦å¤´æè¿°ç¬¦çš„æŒ‡é’ˆï¼Œæˆ–è€…åœ¨å¤±è´¥æ—¶è¿”å›NULL&lt;/li&gt;
&lt;li&gt;__find_stripeï¼šåœ¨å“ˆå¸Œè¡¨ä¸­æ‰¾çœ‹æŒ‡å®šæ‰‡åŒºçš„æ¡å¸¦æ˜¯å¦å·²ç»å­˜åœ¨ã€‚å¦‚æœä¸å­˜åœ¨ï¼Œå‡½æ•°ä¼šè¿”å›NULL&lt;/li&gt;
&lt;li&gt;get_free_stripeä»inactive_listé“¾è¡¨å°è¯•è·å¾—ä¸€ä¸ªæ¡å¸¦ï¼›&lt;/li&gt;
&lt;li&gt;å½“æ¡å¸¦ä½¿ç”¨å®Œæ¯•åï¼Œä¹Ÿå°±æ˜¯æ²¡æœ‰æ¡å¸¦çš„æ—¶å€™ï¼Œä¼šå…ˆå°†inactive_blockedåŸŸç½®1ï¼Œç„¶åè°ƒç”¨wait_event_lock_irqå¼€å§‹ç­‰å¾…ï¼›&lt;/li&gt;
&lt;li&gt;wait_event_lock_irqï¼šå››ä¸ªå‚æ•°ï¼šç¬¬ä¸€ä¸ªä¸ºç­‰å¾…é˜Ÿåˆ—ï¼›ç¬¬äºŒä¸ªä¸ºæ¡ä»¶ï¼›ç¬¬ä¸‰ä¸ªä¸ºé”ï¼›ç¬¬å››ä¸ªä¸ºå‘½ä»¤ã€‚å®ƒçš„è§£é‡Šä¸ºï¼šå¦‚æœæ¡ä»¶ä¸æ»¡è¶³ï¼Œå°±å°†å½“å‰çº¿ç¨‹åŠ å…¥åˆ°ç­‰å¾…é˜Ÿåˆ—ï¼Œå½“æ—¶åœ¨æ”¾å¼ƒæ‰§è¡Œä¹‹å‰ï¼Œè¿˜ä¼šæ‰§è¡Œä¸€ä¸ªå‘½ä»¤ï¼Œè¿™é€šå¸¸å°±æ˜¯ç£ä¿ƒå…¶ä»–éƒ¨åˆ†å»èµ¶ç´§å¤„ç†ï¼Œä½¿å¾—ç­‰å¾…çš„æ¡ä»¶å°½æ—©æ»¡è¶³ï¼›ç­‰å¾…æ¡ä»¶æ˜¯ï¼š1.RAID5çš„inactive_listé“¾è¡¨ä¸ä¸ºç©ºï¼›2.RAID5çš„æ´»åŠ¨æ¡å¸¦æ•°åŸŸå°äºå…¶æœ€å¤§æ¡å¸¦æ•°ç›®çš„3/4ï¼Œæˆ–è€…RAID5çš„inactive_blockedä¸º0&lt;/li&gt;
&lt;/ol&gt;
&lt;h4 id=&#34;raid5å®ˆæŠ¤çº¿ç¨‹å¤„ç†&#34;&gt;RAID5å®ˆæŠ¤çº¿ç¨‹å¤„ç†&lt;/h4&gt;
&lt;p&gt;æ¯ä¸ªRAID4/5/6è®¾å¤‡å¯ä»¥åŒæ—¶å­˜åœ¨ä¸¤ä¸ªMDçº¿ç¨‹ï¼šä¸€ä¸ªåå­—ä¸ºmd#_raid5ï¼Œç§°ä¸ºRAID5å®ˆæŠ¤çº¿ç¨‹ï¼Œå®ƒæ‰§è¡Œçš„å¤„ç†å‡½æ•°ä¸ºraid5dï¼›å¦ä¸€ä¸ªåå­—ä¸ºresyncæˆ–reshapeï¼Œç¬¼ç»Ÿåœ°ç§°ä¸ºRAID5åŒæ­¥çº¿ç¨‹ï¼Œå®ƒæ‰§è¡Œçš„å¤„ç†å‡½æ•°ä¸ºmd_do_sync&lt;/p&gt;
&lt;p&gt;RAID5å®ˆæŠ¤çº¿ç¨‹ï¼Œå®ƒè´Ÿè´£æ¡å¸¦å„ä¸ªè½®æ¬¡çš„å¤„ç†ï¼Œä»æ¥å—ä¸Šå±‚è¯·æ±‚æ—¶å¼€å§‹ï¼Œå¤„ç†è¿‡ç¨‹ä¸­ä¸æ–­æ¨è¿›æ¡å¸¦çŠ¶æ€çš„å˜åŒ–ï¼Œç›´è‡³æœ€ç»ˆå®Œæˆ&lt;/p&gt;
</description>
        </item>
        <item>
        <title>Linux-æ–‡ä»¶ç³»ç»Ÿ(ç®€é˜…)</title>
        <link>https://zcj-git520.github.io/p/linux-%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%E7%AE%80%E9%98%85/</link>
        <pubDate>Thu, 12 May 2022 22:00:38 +0800</pubDate>
        
        <guid>https://zcj-git520.github.io/p/linux-%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%E7%AE%80%E9%98%85/</guid>
        <description>&lt;img src="https://zcj-git520.github.io/p/linux-%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%E7%AE%80%E9%98%85/1.png" alt="Featured image of post Linux-æ–‡ä»¶ç³»ç»Ÿ(ç®€é˜…)" /&gt;&lt;h4 id=&#34;æ¦‚è¿°&#34;&gt;æ¦‚è¿°&lt;/h4&gt;
&lt;p&gt;æ–‡ä»¶ç³»ç»Ÿæ˜¯å­˜å‚¨å’Œç»„ç»‡æ–‡ä»¶ï¼Œä»¥ä¾¿å¯ä»¥è®¿é—®å’ŒæŸ¥æ‰¾çš„ä¸€ç§æœºåˆ¶ï¼›ä¸åŒçš„æ–‡ä»¶ç³»ç»Ÿæœ‰ä¸åŒçš„å­˜å‚¨å’Œç»„ç»‡æ–¹å¼ï¼›åŸºäºç£ç›˜çš„æœ‰ä¸€ä¸‹å‡ ç§å­˜å‚¨æ–¹å¼ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;è¿ç»­å­˜å‚¨ï¼šæŠŠæ•°æ®ä½œä¸ºè¿ç»­çš„æ•°æ®å—å­˜å‚¨åˆ°ç£ç›˜ä¸Šï¼›è¿™ä¸€æ–¹æ¡ˆç®€å•ã€å®¹æ˜“å®ç°ï¼Œè®°å½•æ–‡ä»¶ç”¨åˆ°çš„ç£ç›˜å—ä»…éœ€è®°ä½ç¬¬ä¸€å—çš„åœ°å€ï¼Œå¹¶ä¸”æ€§èƒ½è¾ƒå¥½ï¼Œä¸€æ¬¡æ“ä½œå°±å¯è¯»å‡ºæ•´ä¸ªæ–‡ä»¶ã€‚ä½†æ˜¯ï¼Œå®ƒæœ‰ä¸€ä¸ªè‡´å‘½çš„ç¼ºé™·ã€‚åœ¨åˆ›å»ºæ–‡ä»¶æ—¶ï¼Œå¿…é¡»çŸ¥é“æ–‡ä»¶çš„æœ€å¤§é•¿åº¦ï¼Œå¦åˆ™æ— æ³•ç¡®å®šéœ€è¦ä¸ºå®ƒä¿ç•™å¤šå°‘ç£ç›˜ç©ºé—´ã€‚å› æ­¤ï¼Œè¿ç»­å­˜å‚¨ä¸»è¦é€‚åˆäºæ–‡ä»¶æ•°æ®ä¸€æ¬¡æ€§å†™å…¥çš„ç³»ç»Ÿï¼ˆä¾‹å¦‚romfsï¼‰&lt;/li&gt;
&lt;li&gt;è¿æ¥è¡¨å­˜å‚¨ï¼šå°†æ¯ä¸ªæ–‡ä»¶ç”¨ç£ç›˜å—é¡ºåºè¿æ¥èµ·æ¥ï¼›è™½ç„¶ç”¨äºé“¾æ¥ç£ç›˜å—çš„æŒ‡é’ˆå¯ä»¥ä½¿ç”¨ç£ç›˜å—æœ¬èº«çš„ç©ºé—´ï¼Œä½†è¿™å°†ä½¿å¾—æ¯ä¸ªç£ç›˜å—å®é™…å­˜å‚¨çš„æ•°æ®å­—èŠ‚æ•°ä¸å†æ˜¯2çš„å¹‚ï¼Œç»™ä¸Šå±‚åº”ç”¨ç¨‹åºå¸¦æ¥ä¸ä¾¿ã€‚æ–‡ä»¶ç³»ç»Ÿä»ç£ç›˜å—ä¸­å–å‡ºä¸€äº›æŒ‡é’ˆï¼Œä½œä¸ºç´¢å¼•å­˜æ”¾åœ¨æ–‡ä»¶åˆ†é…è¡¨FATã€‚åªéœ€è¦è®°å½•æ–‡ä»¶çš„èµ·å§‹ç£ç›˜å—ç¼–å·ï¼Œé¡ºç€æ–‡ä»¶åˆ†é…è¡¨ä¸­ç´¢å¼•æŒ‡é’ˆç»„ç»‡æˆçš„é“¾è¡¨ï¼Œå°±å¯ä»¥æ‰¾åˆ°æ–‡ä»¶çš„æ‰€æœ‰ç£ç›˜å—ã€‚&lt;/li&gt;
&lt;li&gt;inodeå­˜å‚¨ï¼šæ¯ä¸ªæ–‡ä»¶éƒ½æœ‰ä¸€ä¸ªç§°ä¸ºnodeçš„è¡¨ï¼›é€šè¿‡å®ƒè·å–æ‰€æœ‰ç£ç›˜çš„ç¼–å·ï¼›å°æ–‡ä»¶çš„æ‰€æœ‰ç£ç›˜å—ç¼–å·éƒ½ç›´æ¥å­˜æ”¾åœ¨inodeå†…ã€‚ç¨å¤§çš„ä¸€äº›æ–‡ä»¶ï¼Œinodeè®°å½•äº†ä¸€ä¸ªç§°ä¸ºä¸€æ¬¡é—´æ¥å—çš„ç£ç›˜å—ç¼–å·ï¼Œè¿™ä¸ªç£ç›˜å—å­˜æ”¾ç€æ–‡ä»¶çš„å…¶ä»–ç£
ç›˜å—ç¼–å·ã€‚å¦‚æœæ–‡ä»¶å†æ‰©å¤§ï¼Œå¯ä»¥åœ¨inodeä¸­è®°å½•äºŒæ¬¡é—´æ¥å—ç¼–å·ï¼ŒäºŒæ¬¡é—´æ¥å—å­˜æ”¾ç€å¤šä¸ªä¸€æ¬¡é—´æ¥å—çš„ç¼–å·ï¼Œè€Œæ¯ä¸ªä¸€æ¬¡é—´æ¥å—åˆå­˜æ”¾ç€æ–‡ä»¶çš„å…¶ä»–ç£ç›˜å—ç¼–å·ã€‚å¦‚æœè¿™ä¹Ÿä¸å¤Ÿçš„è¯ï¼Œè¿˜å¯ä»¥ä½¿ç”¨ä¸‰æ¬¡é—´æ¥å—ã€‚æœ¬ç« è¦è®¨è®ºçš„Minixæ–‡ä»¶ç³»ç»Ÿï¼Œå°±ä½¿ç”¨çš„è¿™ç§åˆ†é…æ–¹æ¡ˆ&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Linuxå°†æ–‡ä»¶ç³»ç»Ÿåˆ†ä¸ºä¸¤å±‚ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;ä¸Šå±‚ä¸ºè™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿå¼€å…³å±‚ï¼Œç®€ç§°ä¸ºè™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿï¼šå®ƒæ˜¯å…·ä½“æ–‡ä»¶ç³»ç»Ÿå’Œä¸Šå±‚åº”ç”¨ä¹‹é—´çš„æ¥å£å±‚ï¼Œå°†å„ç§ä¸åŒæ–‡ä»¶ç³»ç»Ÿçš„æ“ä½œå’Œç®¡ç†çº³å…¥ä¸€ä¸ªç»Ÿä¸€çš„æ¡†æ¶ï¼Œä½¿å¾—ç”¨æˆ·ä¸éœ€è¦å…³å¿ƒå„ç§ä¸åŒæ–‡ä»¶ç³»ç»Ÿçš„å®ç°ç»†èŠ‚ã€‚VFSç”±è¶…çº§å—ã€inodeã€dentryã€vfsmountç­‰ä¿¡æ¯ç»„æˆ&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ä¸‹å±‚ä¸ºå…·ä½“æ–‡ä»¶ç³»ç»Ÿå®ç°ï¼Œå¦‚Minixã€EXT2/3/4ã€sysfsç­‰ã€‚å…·ä½“æ–‡ä»¶ç³»ç»Ÿå®ç°ä»£ç ç»„ç»‡æˆæ¨¡å—å½¢å¼ï¼Œå‘Linux VFSæ³¨å†Œå›è°ƒå‡½æ•°ï¼Œå¤„ç†å’Œå…·ä½“æ–‡ä»¶ç³»ç»Ÿå¯†åˆ‡ç›¸å…³çš„ç»†èŠ‚æ“ä½œ&lt;/p&gt;
&lt;p&gt;&lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 207; 
			flex-basis: 498px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/linux-%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%E7%AE%80%E9%98%85/1.png&#34; data-size=&#34;513x247&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/linux-%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%E7%AE%80%E9%98%85/1.png&#34;
			width=&#34;513&#34;
			height=&#34;247&#34;
			srcset=&#34;https://zcj-git520.github.io/p/linux-%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%E7%AE%80%E9%98%85/1_hudd81952809099175edb54de5cef86875_45536_480x0_resize_box_3.png 480w, https://zcj-git520.github.io/p/linux-%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%E7%AE%80%E9%98%85/1_hudd81952809099175edb54de5cef86875_45536_1024x0_resize_box_3.png 1024w&#34;
			loading=&#34;lazy&#34;
			&gt;
	&lt;/a&gt;
	
&lt;/figure&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h4 id=&#34;æ–‡ä»¶ç³»ç»Ÿå¯¹è±¡&#34;&gt;æ–‡ä»¶ç³»ç»Ÿå¯¹è±¡&lt;/h4&gt;
&lt;p&gt;Linuxæ–‡ä»¶ç³»ç»Ÿå¯¹è±¡ä¹‹é—´çš„å…³ç³»å¯ä»¥æ¦‚æ‹¬ä¸ºæ–‡ä»¶ç³»ç»Ÿç±»å‹ã€è¶…çº§å—ã€inodeã€dentryå’Œvfsmountä¹‹é—´çš„å…³ç³»ï¼›&lt;/p&gt;
&lt;p&gt;Linuxæœ‰ä¸€é¢—å…¨å±€æ–‡ä»¶ç³»ç»Ÿæ ‘ï¼Œåæ˜ äº†Linux VFSå¯¹è±¡ä¹‹é—´çš„å…³ç³»ï¼›&lt;/p&gt;
&lt;p&gt;&lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 100; 
			flex-basis: 240px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/linux-%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%E7%AE%80%E9%98%85/2.png&#34; data-size=&#34;546x546&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/linux-%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%E7%AE%80%E9%98%85/2.png&#34;
			width=&#34;546&#34;
			height=&#34;546&#34;
			srcset=&#34;https://zcj-git520.github.io/p/linux-%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%E7%AE%80%E9%98%85/2_hu97f7504c4d7172949bd90e2b95d8f280_119893_480x0_resize_box_3.png 480w, https://zcj-git520.github.io/p/linux-%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%E7%AE%80%E9%98%85/2_hu97f7504c4d7172949bd90e2b95d8f280_119893_1024x0_resize_box_3.png 1024w&#34;
			loading=&#34;lazy&#34;
			&gt;
	&lt;/a&gt;
	
&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;æ¯ä¸ªæ–‡ä»¶ç³»ç»Ÿè£…è½½å®ä¾‹æœ‰å››ä¸ªå¿…å¤‡å…ƒç´ ï¼švfsmountã€è¶…çº§å—ã€æ ¹inodeå’Œæ ¹dentryã€‚&lt;/p&gt;
&lt;h4 id=&#34;è£…è½½æ–‡ä»¶ç³»ç»Ÿ&#34;&gt;è£…è½½æ–‡ä»¶ç³»ç»Ÿ&lt;/h4&gt;
&lt;p&gt;æ–‡ä»¶ç³»ç»Ÿè¦è¢«ä½¿ç”¨å°±åº”è¯¥è¢«è£…è½½ã€‚ä½“ç°ä¸€ä¸ªæ–‡ä»¶ç³»ç»Ÿè£…è½½å®ä¾‹è¦ç´ æ˜¯ï¼švfsmountã€super_blockã€æ ¹dentryå’Œæ ¹inodeï¼›&lt;/p&gt;
&lt;p&gt;&lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 234; 
			flex-basis: 562px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/linux-%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%E7%AE%80%E9%98%85/3.png&#34; data-size=&#34;546x233&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/linux-%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%E7%AE%80%E9%98%85/3.png&#34;
			width=&#34;546&#34;
			height=&#34;233&#34;
			srcset=&#34;https://zcj-git520.github.io/p/linux-%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%E7%AE%80%E9%98%85/3_hu683ec3b3d789a1463d3ac034598e77a1_61958_480x0_resize_box_3.png 480w, https://zcj-git520.github.io/p/linux-%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%E7%AE%80%E9%98%85/3_hu683ec3b3d789a1463d3ac034598e77a1_61958_1024x0_resize_box_3.png 1024w&#34;
			loading=&#34;lazy&#34;
			&gt;
	&lt;/a&gt;
	
&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;åœ¨å†…æ ¸è§’åº¦ï¼Œè£…è½½è¿‡ç¨‹ä¸­ï¼Œæ–‡ä»¶ç³»ç»Ÿç±»å‹ä¸­çš„get_sbå°†è¢«è°ƒç”¨ï¼Œå®ƒå°†ç”Ÿæˆä¸€ä¸ªæ–°çš„æ–‡ä»¶ç³»ç»Ÿè£…è½½å¯¹è±¡vfsmountï¼Œå¹¶å’Œè¯¥æ–‡ä»¶ç³»ç»Ÿç±»å‹çš„ä¸€ä¸ªè¶…çº§å—å®ä¾‹å…³è”èµ·æ¥ï¼›&lt;/p&gt;
</description>
        </item>
        <item>
        <title>Linux-raidå­¦ä¹ </title>
        <link>https://zcj-git520.github.io/p/linux-raid%E5%AD%A6%E4%B9%A0/</link>
        <pubDate>Sat, 30 Apr 2022 22:00:38 +0800</pubDate>
        
        <guid>https://zcj-git520.github.io/p/linux-raid%E5%AD%A6%E4%B9%A0/</guid>
        <description>&lt;img src="https://zcj-git520.github.io/p/linux-raid%E5%AD%A6%E4%B9%A0/1.png" alt="Featured image of post Linux-raidå­¦ä¹ " /&gt;&lt;h4 id=&#34;raidæ˜¯ä»€ä¹ˆ&#34;&gt;raidæ˜¯ä»€ä¹ˆ&lt;/h4&gt;
&lt;p&gt;raidæ˜¯å»‰ä»·å†—ä½™ç£ç›˜é˜µåˆ—ï¼Œç®€ç§°ç£ç›˜é˜µåˆ—ã€‚&lt;/p&gt;
&lt;p&gt;raid:æ˜¯ä¸€ç§æŠŠå¤šå—ç‹¬ç«‹çš„ç‰©ç†ç£ç›˜æŒ‰ä¸åŒçš„æŠ€æœ¯ç»„åˆèµ·æ¥çš„å½¢æˆçš„ä¸€ä¸ªç£ç›˜ç»„ï¼Œåœ¨é€»è¾‘ä¸Šçœ‹èµ·æ¥æ˜¯ä¸€å—å¤§çš„ç£ç›˜ï¼Œå¯ä»¥æä¾›æ¯”è¾ƒå•ä¸ªçš„ç‰©ç†ç£ç›˜æ›´å¤§çš„å­˜å‚¨å®¹é‡æˆ–æ›´é«˜çš„å­˜å‚¨æ€§èƒ½ï¼ŒåŒæ—¶æœ‰èƒ½æä¾›ä¸åŒçº§åˆ«æ•°æ®çš„å†—ä½™å¤‡ä»½çš„ä¸€ç§æŠ€æœ¯&lt;/p&gt;
&lt;h4 id=&#34;raidçš„çº§åˆ«&#34;&gt;raidçš„çº§åˆ«&lt;/h4&gt;
&lt;p&gt;æŠŠå¤šä¸ªç‰©ç†ç£ç›˜é€šè¿‡ä¸åŒçš„æŠ€æœ¯æ–¹å¼ç»„æˆçš„ç£ç›˜é˜µåˆ—ï¼Œä¸åŒçš„æŠ€æœ¯ç§°ä¸ºraidçº§åˆ«ã€‚&lt;/p&gt;
&lt;p&gt;çº§åˆ«ä¸€èˆ¬æœ‰ï¼šraid0,raid1,raid0+1(raid10),raid2,raid3,raid4,raid5,raid6,raid7,raid53&lt;/p&gt;
&lt;p&gt;ç”Ÿäº§ç¯å¢ƒå¸¸ç”¨çš„çº§åˆ«ä¸ºï¼šraid0,raid1,raid10,raid5&lt;/p&gt;
&lt;h4 id=&#34;raidçº§åˆ«çš„æ¯”è¾ƒ&#34;&gt;raidçº§åˆ«çš„æ¯”è¾ƒ&lt;/h4&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;raidçº§åˆ«&lt;/th&gt;
&lt;th&gt;ä¼˜ç‚¹&lt;/th&gt;
&lt;th&gt;ç¼ºç‚¹&lt;/th&gt;
&lt;th&gt;å®é™…ä½¿ç”¨åœºæ™¯&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;raid0&lt;/td&gt;
&lt;td&gt;è¯»å†™é€Ÿåº¦å¿«&lt;/td&gt;
&lt;td&gt;æ²¡æœ‰å†—ä½™&lt;/td&gt;
&lt;td&gt;mysql slave,é›†ç¾¤çš„èŠ‚ç‚¹rs&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;raid1&lt;/td&gt;
&lt;td&gt;100%å†—ä½™ï¼Œé•œåƒ&lt;/td&gt;
&lt;td&gt;è¯»å†™æ€§èƒ½ä¸€èˆ¬ï¼Œæˆæœ¬é«˜&lt;/td&gt;
&lt;td&gt;å•ç‹¬çš„ï¼Œæ•°æ®é‡è¦ï¼Œä¸”å®•æœºçš„ä¸šåŠ¡ï¼Œç›‘æ§ï¼Œç³»ç»Ÿç›˜&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;raid5&lt;/td&gt;
&lt;td&gt;å…·å¤‡ä¸€å®šçš„æ€§èƒ½å’Œå†—ä½™ï¼Œå¯åä¸€å—ç›˜ï¼Œè¯»å†™æ€§èƒ½ä¸é”™&lt;/td&gt;
&lt;td&gt;å†™å…¥æ€§èƒ½ä¸é«˜&lt;/td&gt;
&lt;td&gt;ç”¨äºä¸€èˆ¬çš„ä¸šåŠ¡&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;raid10&lt;/td&gt;
&lt;td&gt;è¯»å†™é€Ÿåº¦å¿«ï¼Œ100%å†—ä½™&lt;/td&gt;
&lt;td&gt;æˆæœ¬é«˜&lt;/td&gt;
&lt;td&gt;æ€§èƒ½å’Œå†—ä½™çš„ä¸šåŠ¡è¦æ±‚é«˜çš„ä¸šåŠ¡&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h4 id=&#34;raidæŠ€æœ¯åˆ†ç±»&#34;&gt;raidæŠ€æœ¯åˆ†ç±»&lt;/h4&gt;
&lt;h5 id=&#34;è½¯raidæŠ€æœ¯&#34;&gt;è½¯raidæŠ€æœ¯&lt;/h5&gt;
&lt;p&gt;åœ¨linuxä¸­ï¼Œé€šè¿‡è‡ªå¸¦è½¯ä»¶å°±èƒ½å®ç°è½¯raidåŠŸèƒ½ï¼Œå®ƒçš„é…ç½®é«˜ï¼Œç®¡ç†æ–¹ä¾¿ï¼Œå¯ä»¥æ˜¯å®ç°å°†å°†å‡ ä¸ªç‰©ç†ç›˜åˆæˆä¸€ä¸ªæ›´å¤§çš„è™šæ‹Ÿè®¾å¤‡ï¼Œä»è€Œåˆ°è¾¾æ€§èƒ½çš„æ”¹è¿›åˆæ•°æ®çš„å†—ä½™çš„ç›®çš„&lt;/p&gt;
&lt;h5 id=&#34;ç¡¬raidæŠ€æœ¯&#34;&gt;ç¡¬raidæŠ€æœ¯&lt;/h5&gt;
&lt;p&gt;åŸºäºç¡¬ä»¶çš„raidè§£å†³æ–¹æ¡ˆæ¯”åŸºäºè½¯ä»¶çš„raidæŠ€æœ¯åœ¨ä½¿ç”¨çš„æ€§èƒ½åˆæœåŠ¡å™¨ä¸Šæ›´å¥½ï¼Œå…·ä½“è¡¨ç°åœ¨æ£€æµ‹å’Œä¿®å¤å¤šä½é”™è¯¯çš„èƒ½åŠ›ï¼Œé”™è¯¯çš„ç£ç›˜è‡ªåŠ¨æ£€æµ‹å’Œé˜µåˆ—é‡å»ºç­‰æ–¹é¢ï¼Œä»å®‰å…¨æ€§ä¸Šè€ƒè™‘ï¼ŒåŸºäºç¡¬ä»¶çš„raidçš„è§£å†³æ–¹æ¡ˆæ›´åŠ çš„å®‰å…¨&lt;/p&gt;
&lt;h4 id=&#34;raid0åŸç†åŠç‰¹ç‚¹&#34;&gt;raid0åŸç†åŠç‰¹ç‚¹&lt;/h4&gt;
&lt;p&gt;&lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 146; 
			flex-basis: 352px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/linux-raid%E5%AD%A6%E4%B9%A0/1.png&#34; data-size=&#34;435x296&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/linux-raid%E5%AD%A6%E4%B9%A0/1.png&#34;
			width=&#34;435&#34;
			height=&#34;296&#34;
			srcset=&#34;https://zcj-git520.github.io/p/linux-raid%E5%AD%A6%E4%B9%A0/1_huf00169aa6abc51faa601f0bf72d243b8_76358_480x0_resize_box_3.png 480w, https://zcj-git520.github.io/p/linux-raid%E5%AD%A6%E4%B9%A0/1_huf00169aa6abc51faa601f0bf72d243b8_76358_1024x0_resize_box_3.png 1024w&#34;
			loading=&#34;lazy&#34;
			&gt;
	&lt;/a&gt;
	
&lt;/figure&gt;&lt;/p&gt;
&lt;h5 id=&#34;ç‰¹ç‚¹&#34;&gt;ç‰¹ç‚¹ï¼š&lt;/h5&gt;
&lt;ol&gt;
&lt;li&gt;è¯»å†™æ€§èƒ½é«˜&lt;/li&gt;
&lt;li&gt;æ²¡æœ‰å†—ä½™&lt;/li&gt;
&lt;li&gt;å¯ç”¨ç©ºé—´N*minï¼ˆs1,S2&amp;hellip;ï¼‰&lt;/li&gt;
&lt;li&gt;æœ€å°‘ç£ç›˜æ•°ä¸ºï¼Œ2ï¼Œ2+&lt;/li&gt;
&lt;/ol&gt;
&lt;h4 id=&#34;raid1ç‰¹ç‚¹&#34;&gt;raid1ç‰¹ç‚¹&lt;/h4&gt;
&lt;p&gt;&lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 132; 
			flex-basis: 317px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/linux-raid%E5%AD%A6%E4%B9%A0/2.png&#34; data-size=&#34;381x288&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/linux-raid%E5%AD%A6%E4%B9%A0/2.png&#34;
			width=&#34;381&#34;
			height=&#34;288&#34;
			srcset=&#34;https://zcj-git520.github.io/p/linux-raid%E5%AD%A6%E4%B9%A0/2_hu4af629af77d3fd79a0bd5f0b30771561_59179_480x0_resize_box_3.png 480w, https://zcj-git520.github.io/p/linux-raid%E5%AD%A6%E4%B9%A0/2_hu4af629af77d3fd79a0bd5f0b30771561_59179_1024x0_resize_box_3.png 1024w&#34;
			loading=&#34;lazy&#34;
			&gt;
	&lt;/a&gt;
	
&lt;/figure&gt;&lt;/p&gt;
&lt;h5 id=&#34;ç‰¹ç‚¹-1&#34;&gt;ç‰¹ç‚¹&lt;/h5&gt;
&lt;ol&gt;
&lt;li&gt;è¯»æ€§èƒ½æå‡ï¼Œå†™æ€§èƒ½é™ä½&lt;/li&gt;
&lt;li&gt;å¯ç”¨ç©ºé—´ä¸ºï¼šminï¼ˆs1,S2&amp;hellip;ï¼‰&lt;/li&gt;
&lt;li&gt;å¯å†—ä½™&lt;/li&gt;
&lt;li&gt;æœ€å°‘ç£ç›˜æ•°ä¸ºï¼š2ï¼Œ2+&lt;/li&gt;
&lt;/ol&gt;
&lt;h4 id=&#34;raid5ç‰¹ç‚¹&#34;&gt;raid5ç‰¹ç‚¹&lt;/h4&gt;
&lt;p&gt;&lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 149; 
			flex-basis: 359px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/linux-raid%E5%AD%A6%E4%B9%A0/3.png&#34; data-size=&#34;391x261&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/linux-raid%E5%AD%A6%E4%B9%A0/3.png&#34;
			width=&#34;391&#34;
			height=&#34;261&#34;
			srcset=&#34;https://zcj-git520.github.io/p/linux-raid%E5%AD%A6%E4%B9%A0/3_hu834ce2fd4f66c1d76d0558a7de2a7222_63192_480x0_resize_box_3.png 480w, https://zcj-git520.github.io/p/linux-raid%E5%AD%A6%E4%B9%A0/3_hu834ce2fd4f66c1d76d0558a7de2a7222_63192_1024x0_resize_box_3.png 1024w&#34;
			loading=&#34;lazy&#34;
			&gt;
	&lt;/a&gt;
	
&lt;/figure&gt;&lt;/p&gt;
&lt;h5 id=&#34;ç‰¹ç‚¹-2&#34;&gt;ç‰¹ç‚¹ï¼š&lt;/h5&gt;
&lt;ol&gt;
&lt;li&gt;è¯»æ€§èƒ½æœ‰æå‡ï¼Œå†™æ€§èƒ½æœ‰æ‰€æ¬ ç¼º&lt;/li&gt;
&lt;li&gt;å¯ç”¨ç©ºé—´ä¸ºï¼šï¼ˆn-1ï¼‰*min(s1,s2,&amp;hellip;)&lt;/li&gt;
&lt;li&gt;æœ‰å†—ä½™ï¼Œæœ‰ä¸€å—ç£ç›˜&lt;/li&gt;
&lt;li&gt;æœ€å°‘ç£ç›˜æ•°ï¼š3ï¼Œ3+&lt;/li&gt;
&lt;/ol&gt;
&lt;h4 id=&#34;raid10ç‰¹ç‚¹&#34;&gt;raid10ç‰¹ç‚¹&lt;/h4&gt;
&lt;p&gt;&lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 148; 
			flex-basis: 355px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/linux-raid%E5%AD%A6%E4%B9%A0/4.png&#34; data-size=&#34;516x348&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/linux-raid%E5%AD%A6%E4%B9%A0/4.png&#34;
			width=&#34;516&#34;
			height=&#34;348&#34;
			srcset=&#34;https://zcj-git520.github.io/p/linux-raid%E5%AD%A6%E4%B9%A0/4_huc236dc3145ca4e9e01341d700c8fb959_118797_480x0_resize_box_3.png 480w, https://zcj-git520.github.io/p/linux-raid%E5%AD%A6%E4%B9%A0/4_huc236dc3145ca4e9e01341d700c8fb959_118797_1024x0_resize_box_3.png 1024w&#34;
			loading=&#34;lazy&#34;
			&gt;
	&lt;/a&gt;
	
&lt;/figure&gt;&lt;/p&gt;
&lt;h5 id=&#34;ç‰¹ç‚¹-3&#34;&gt;ç‰¹ç‚¹ï¼š&lt;/h5&gt;
&lt;ol&gt;
&lt;li&gt;è¯»å†™æ€§èƒ½æœ‰æå‡&lt;/li&gt;
&lt;li&gt;å¯ç”¨ç©ºé—´ï¼šN*minï¼ˆs1,s2&amp;hellip;ï¼‰/2&lt;/li&gt;
&lt;li&gt;æœ‰å†—ä½™ï¼Œæ¯ç»„æœ€å¤šåä¸€å—&lt;/li&gt;
&lt;li&gt;æœ€å°‘ç£ç›˜æ•°ä¸ºï¼š4ï¼Œ4+&lt;/li&gt;
&lt;/ol&gt;
&lt;h4 id=&#34;raid5çš„åŸºæœ¬æ¶æ„&#34;&gt;RAID5çš„åŸºæœ¬æ¶æ„&lt;/h4&gt;
&lt;p&gt;RAID5çš„è¯»å†™æ“ä½œé‡‡ç”¨çš„æ˜¯stripeçš„åŸºæœ¬ç»“æ„ï¼Œå³ä»¥stripeä¸ºè¯»å†™çš„åŸºæœ¬å•ä½ï¼Œå‡è®¾ä¸€ä¸ª3+1çš„RAID5ï¼Œå³3ä¸ªæ•°æ®ç›˜+1ä¸ªæ ¡éªŒç›˜ï¼Œé‚£ä¹ˆä¸€ä¸ªstripeå°±åŒ…å«3ä¸ªæ•°æ®å—å’Œä¸€ä¸ªæ ¡éªŒå—ï¼›&lt;/p&gt;
&lt;p&gt;&lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 157; 
			flex-basis: 377px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/linux-raid%E5%AD%A6%E4%B9%A0/1653296737857.png&#34; data-size=&#34;767x487&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/linux-raid%E5%AD%A6%E4%B9%A0/1653296737857.png&#34;
			width=&#34;767&#34;
			height=&#34;487&#34;
			srcset=&#34;https://zcj-git520.github.io/p/linux-raid%E5%AD%A6%E4%B9%A0/1653296737857_hue5c2a153273afe566aaf9c45f014bd20_43199_480x0_resize_box_3.png 480w, https://zcj-git520.github.io/p/linux-raid%E5%AD%A6%E4%B9%A0/1653296737857_hue5c2a153273afe566aaf9c45f014bd20_43199_1024x0_resize_box_3.png 1024w&#34;
			loading=&#34;lazy&#34;
			&gt;
	&lt;/a&gt;
	
&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;å¦‚å›¾æ‰€ç¤ºï¼Œè¿™æ˜¯ä¸€ä¸ª3+1çš„RAID5ï¼Œå›¾ä¸­çš„æ¯ä¸€ä¸ªæ–¹å—è¡¨ç¤ºä¸€ä¸ªstripeçš„ä¸€ä¸ªåŸºæœ¬å•å…ƒï¼Œåˆç§°ä¸ºchunkï¼›ç›¸åŒé¢œè‰²çš„æ–¹å—ç»„æˆä¸€ä¸ªstripeï¼Œå³æ¯ä¸ªstripeç”±3ä¸ªæ•°æ®chunk(A,B,C)+1ä¸ªæ ¡éªŒchunk(P)ç»„æˆã€‚å…³äºæ ¡éªŒå—çš„ç”Ÿæˆæ–¹æ³•ä»¥åŠæ•°æ®æ¢å¤åŸç†å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;æ ¡éªŒå—Pçš„ç”Ÿæˆæ–¹æ³•ä¸º&lt;code&gt;P=AâŠ•BâŠ•C&lt;/code&gt; ã€‚(âŠ•è¡¨ç¤ºå¼‚æˆ–è¿ç®—)&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;åŠ å…¥1å·ç›˜åäº†ï¼Œæ­¤æ—¶æœ‰è¯»è¯·æ±‚è¯»B0å—çš„æ•°æ®ï¼Œé‚£ä¹ˆå¯ä»¥é€šè¿‡&lt;code&gt;B0=A0âŠ•C0âŠ•P0&lt;/code&gt; çš„æ–¹æ³• æ¥è¿›è¡Œæ¢å¤&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
</description>
        </item>
        <item>
        <title>Linuxå­˜å‚¨æŠ€æœ¯å­¦ä¹ ç¬”è®°</title>
        <link>https://zcj-git520.github.io/p/linux%E5%AD%98%E5%82%A8%E6%8A%80%E6%9C%AF%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/</link>
        <pubDate>Fri, 15 Apr 2022 22:00:38 +0800</pubDate>
        
        <guid>https://zcj-git520.github.io/p/linux%E5%AD%98%E5%82%A8%E6%8A%80%E6%9C%AF%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/</guid>
        <description>&lt;img src="https://zcj-git520.github.io/p/linux%E5%AD%98%E5%82%A8%E6%8A%80%E6%9C%AF%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/1.png" alt="Featured image of post Linuxå­˜å‚¨æŠ€æœ¯å­¦ä¹ ç¬”è®°" /&gt;&lt;h4 id=&#34;å­˜å‚¨è®¾å¤‡&#34;&gt;å­˜å‚¨è®¾å¤‡&lt;/h4&gt;
&lt;h5 id=&#34;ç£ç›˜æŸœ&#34;&gt;ç£ç›˜æŸœ&lt;/h5&gt;
&lt;p&gt;ç£ç›˜æŸœä¸€èˆ¬åˆ†ä¸ºç£ç›˜é˜µåˆ—ï¼ˆdisk arrayï¼‰å’Œç£ç›˜æ—ï¼ˆjbodï¼‰ä¸¤ç§ï¼›&lt;/p&gt;
&lt;p&gt;RAIDï¼ˆRedundant Array of Independent Disksï¼‰ï¼Œå³â€œç‹¬ç«‹ç£ç›˜å†—ä½™é˜µåˆ—â€æˆ–è€…ç®€ç§°
ä¸ºâ€œç£ç›˜é˜µåˆ—â€ï¼ŒåŸºæœ¬æ€æƒ³å°±æ˜¯æŠŠå¤šä¸ªç‹¬ç«‹çš„ç£ç›˜ç»„åˆèµ·æ¥ï¼Œæˆä¸ºä¸€ä¸ªç£ç›˜é˜µåˆ—ç»„ï¼Œä»¥
è·å¾—ä¸€ä¸ªæˆ–å¤šä¸ªæ–¹é¢çš„å¥½å¤„ï¼šå¢åŠ å®¹é‡ï¼ˆCapacityï¼‰ã€æå‡æ€§èƒ½ï¼ˆPerformanceï¼‰ã€å¢å¼º
å®¹é”™æ€§ï¼ˆRedundancyï¼‰å’Œé™ä½æˆæœ¬ï¼ˆCostï¼‰ã€‚
JBODï¼ˆJust a Bundle Of Disksï¼‰è¯‘æˆä¸­æ–‡å¯ä»¥æ˜¯â€œç®€å•ç£ç›˜æ†ç»‘â€æˆ–è€…â€œç£ç›˜ç°‡â€ã€‚åœ¨
Linuxä¸­ï¼Œå®ƒç›¸å½“äºLinear RAIDæ¨¡å¼ï¼Œä½†è¿™ä¸æ˜¯æ ‡å‡†çš„RAIDçº§åˆ«ï¼ŒJBODåœ¨é€»è¾‘ä¸ŠæŠŠå‡ 
ä¸ªç‰©ç†ç£ç›˜ä¸€ä¸ªæ¥ä¸€ä¸ªä¸²è”åˆ°ä¸€èµ·ï¼Œä»è€Œæä¾›ä¸€ä¸ªå¤§çš„é€»è¾‘ç£ç›˜ã€‚&lt;/p&gt;
&lt;h5 id=&#34;naså­˜å‚¨è®¾å¤‡&#34;&gt;NASå­˜å‚¨è®¾å¤‡&lt;/h5&gt;
&lt;p&gt;NASæ˜¯ä¸€ç§å°†å­˜å‚¨è®¾å¤‡å’Œåº”ç”¨æœåŠ¡å™¨åˆ†å¼€çš„æœºåˆ¶ï¼Œå®ƒä½¿ç”¨CIFSå’ŒNFSå‘å®¢æœç«¯æä¾›æ–‡ä»¶çº§æœåŠ¡ã€‚&lt;/p&gt;
&lt;p&gt;&lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 192; 
			flex-basis: 462px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/linux%E5%AD%98%E5%82%A8%E6%8A%80%E6%9C%AF%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/1.png&#34; data-size=&#34;514x267&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/linux%E5%AD%98%E5%82%A8%E6%8A%80%E6%9C%AF%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/1.png&#34;
			width=&#34;514&#34;
			height=&#34;267&#34;
			srcset=&#34;https://zcj-git520.github.io/p/linux%E5%AD%98%E5%82%A8%E6%8A%80%E6%9C%AF%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/1_hub95fcc2a246a65208e8832126d70bee7_36058_480x0_resize_box_3.png 480w, https://zcj-git520.github.io/p/linux%E5%AD%98%E5%82%A8%E6%8A%80%E6%9C%AF%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/1_hub95fcc2a246a65208e8832126d70bee7_36058_1024x0_resize_box_3.png 1024w&#34;
			loading=&#34;lazy&#34;
			alt=&#34;å›¾(1)&#34;&gt;
	&lt;/a&gt;
	
	&lt;figcaption&gt;å›¾(1)&lt;/figcaption&gt;
	
&lt;/figure&gt;&lt;/p&gt;
&lt;h5 id=&#34;iscsiå­˜å‚¨è®¾å¤‡&#34;&gt;iSCSIå­˜å‚¨è®¾å¤‡&lt;/h5&gt;
&lt;p&gt;isCSIå­˜å‚¨è®¾å¤‡æ—¢ä»¥ç¡¬ä»¶æ–¹å¼æˆ–è€…è½¯ä»¶æ–¹å¼å®ç°IsCSIåè®®ç›®æ ‡ç«¯çš„å­˜å‚¨è®¾å¤‡ã€‚&lt;/p&gt;
&lt;p&gt;iSCSIï¼Œå³Internet SCSIæˆ–SCSI over TCP/IPï¼Œæ˜¯IETFåˆ¶å®šçš„ä¸€é¡¹åŸºäºIPçš„å­˜å‚¨ç½‘ç»œæ ‡
å‡†ï¼Œç”¨äºè¿æ¥æ•°æ®å­˜å‚¨è®¾å¤‡ã€‚é€è¿‡åœ¨IPç½‘ç»œä¸Šä¼ è¾“SCSIå‘½ä»¤ï¼ŒiSCSIå¯ä»¥æ‘†è„±SCSIæ€»çº¿
çš„è·ç¦»é™åˆ¶ã€‚iSCSIè¢«ç”¨äºåœ¨å±€åŸŸç½‘ï¼ˆLANï¼‰ã€å¹¿åŸŸç½‘ï¼ˆWANï¼‰æˆ–è€…Internetä¸Šä¼ è¾“æ•°
æ®ï¼Œå®ç°ä½ç½®æ— å…³çš„æ•°æ®å­˜å‚¨åŠæ£€ç´¢ã€‚iSCSIæ˜¯ä¸€ä¸ªå¹¿ä¸ºæµè¡Œçš„å­˜å‚¨åŒºåŸŸç½‘ç»œåè®®ï¼Œå…
è®¸ä¼ä¸šå°†å­˜å‚¨å½’å¹¶åˆ°æ•°æ®ä¸­å¿ƒï¼ŒåŒæ—¶å‘åº”ç”¨æœåŠ¡å™¨æä¾›æ— åŒºåˆ«äºæœ¬åœ°ç£ç›˜çš„å¹»æƒ³ã€‚å’Œ
ä¼ ç»Ÿçš„Fibre Channelä¸åŒï¼ŒiSCSIä¸éœ€è¦ä¸“ç”¨çš„çº¿ç¼†ï¼Œå¯ä»¥åœ¨ç°æœ‰çš„ç½‘ç»œåŸºç¡€è®¾æ–½ä¸Šé•¿
è·ç¦»ä¼ è¾“ã€‚&lt;/p&gt;
&lt;p&gt;&lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 159; 
			flex-basis: 381px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/linux%E5%AD%98%E5%82%A8%E6%8A%80%E6%9C%AF%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/2.png&#34; data-size=&#34;592x372&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/linux%E5%AD%98%E5%82%A8%E6%8A%80%E6%9C%AF%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/2.png&#34;
			width=&#34;592&#34;
			height=&#34;372&#34;
			srcset=&#34;https://zcj-git520.github.io/p/linux%E5%AD%98%E5%82%A8%E6%8A%80%E6%9C%AF%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/2_hu071dc91c75a1e067a9df63dbc27ba99e_97773_480x0_resize_box_3.png 480w, https://zcj-git520.github.io/p/linux%E5%AD%98%E5%82%A8%E6%8A%80%E6%9C%AF%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/2_hu071dc91c75a1e067a9df63dbc27ba99e_97773_1024x0_resize_box_3.png 1024w&#34;
			loading=&#34;lazy&#34;
			alt=&#34;å›¾(2)&#34;&gt;
	&lt;/a&gt;
	
	&lt;figcaption&gt;å›¾(2)&lt;/figcaption&gt;
	
&lt;/figure&gt;&lt;/p&gt;
&lt;h5 id=&#34;nasiscsié›†æˆå­˜å‚¨è®¾å¤‡&#34;&gt;NAS/iSCSIé›†æˆå­˜å‚¨è®¾å¤‡&lt;/h5&gt;
&lt;p&gt;NAS/iSCSIé›†æˆå­˜å‚¨è®¾å¤‡ç»“åˆäº†NASå­˜å‚¨è®¾å¤‡å’ŒiSCSIå­˜å‚¨
è®¾å¤‡çš„ä¼˜åŠ¿ï¼ŒåŒæ—¶æ”¯æŒiSCSIç£ç›˜å’Œæœ¬åœ°ç£ç›˜ï¼Œå¯¹å¤–æ”¯æŒCIFSåè®®å’ŒiSCSIåè®®ï¼Œå³æ”¯
æŒå—æ•°æ®å’Œæ–‡ä»¶æ•°æ®ï¼Œç†è®ºä¸Šå¯ä»¥æ•´åˆæ— é™çš„å­˜å‚¨å®¹é‡ï¼Œæ„å»ºRAIDå’ŒLVMï¼Œçµæ´»é…ç½®
æˆçº¯æ–‡ä»¶æœåŠ¡å™¨ã€çº¯iSCSIç›®æ ‡å™¨ï¼Œæˆ–è€…å°†å­˜å‚¨ç©ºé—´åˆ†åˆ«ç”¨äºæ–‡ä»¶æœåŠ¡å’Œå—æœåŠ¡ã€‚&lt;/p&gt;
&lt;p&gt;&lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 185; 
			flex-basis: 444px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/linux%E5%AD%98%E5%82%A8%E6%8A%80%E6%9C%AF%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/3.png&#34; data-size=&#34;604x326&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/linux%E5%AD%98%E5%82%A8%E6%8A%80%E6%9C%AF%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/3.png&#34;
			width=&#34;604&#34;
			height=&#34;326&#34;
			srcset=&#34;https://zcj-git520.github.io/p/linux%E5%AD%98%E5%82%A8%E6%8A%80%E6%9C%AF%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/3_hub6e52a619a16f4ec9a92734495b91f5f_93520_480x0_resize_box_3.png 480w, https://zcj-git520.github.io/p/linux%E5%AD%98%E5%82%A8%E6%8A%80%E6%9C%AF%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/3_hub6e52a619a16f4ec9a92734495b91f5f_93520_1024x0_resize_box_3.png 1024w&#34;
			loading=&#34;lazy&#34;
			alt=&#34;å›¾(3)&#34;&gt;
	&lt;/a&gt;
	
	&lt;figcaption&gt;å›¾(3)&lt;/figcaption&gt;
	
&lt;/figure&gt;&lt;/p&gt;
&lt;h4 id=&#34;linux-é©±åŠ¨æ¨¡å‹&#34;&gt;Linux é©±åŠ¨æ¨¡å‹&lt;/h4&gt;
&lt;p&gt;Linuxå†…æ ¸åŸºäºkobjectå†…æ ¸å¯¹è±¡æœºåˆ¶å°†ç³»ç»Ÿä¸­çš„æ€»çº¿ã€è®¾å¤‡å’Œé©±åŠ¨è®¾å¤‡åˆ†åˆ«ç”¨bus_typeã€deviceå’Œdevice_driverç­‰å¯¹è±¡æè¿°å°†å…¶ç»„ç»‡æˆä¸€ä¸ªå±‚æ¬¡ç»“æ„çš„ç³»ç»Ÿï¼Œç»Ÿä¸€ç®¡ç†å„ç§å†…åˆ«çš„è®¾å¤‡ä»¥å…¶æ¥å£ï¼ŒåŒæ—¶å€ŸåŠ©sysdfsæ–‡ä»¶ç³»ç»Ÿå°†å…¶å†…æ ¸æ‰€è§çš„è®¾å¤‡å±•ç»™ç”¨æˆ·ç©ºé—´ï¼Œæä¾›ä¸€ä¸ªå®Œå…¨å±‚æ¬¡ç»“æ„çš„ç”¨æˆ·è§†å›¾ã€‚&lt;/p&gt;
&lt;p&gt;&lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 148; 
			flex-basis: 357px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/linux%E5%AD%98%E5%82%A8%E6%8A%80%E6%9C%AF%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/4.png&#34; data-size=&#34;560x376&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/linux%E5%AD%98%E5%82%A8%E6%8A%80%E6%9C%AF%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/4.png&#34;
			width=&#34;560&#34;
			height=&#34;376&#34;
			srcset=&#34;https://zcj-git520.github.io/p/linux%E5%AD%98%E5%82%A8%E6%8A%80%E6%9C%AF%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/4_huaec02b528613130708d2c230cf0ecbab_93161_480x0_resize_box_3.png 480w, https://zcj-git520.github.io/p/linux%E5%AD%98%E5%82%A8%E6%8A%80%E6%9C%AF%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/4_huaec02b528613130708d2c230cf0ecbab_93161_1024x0_resize_box_3.png 1024w&#34;
			loading=&#34;lazy&#34;
			alt=&#34;å›¾(4)&#34;&gt;
	&lt;/a&gt;
	
	&lt;figcaption&gt;å›¾(4)&lt;/figcaption&gt;
	
&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;Linuxé©±åŠ¨æ¨¡å‹çš„æ ¸å¿ƒå†…å®¹ç»¼åˆå¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;ä»¥å†…æ ¸å¯¹è±¡ä¸ºåŸºç¡€&lt;/li&gt;
&lt;li&gt;ç”¨sysfsæ–‡ä»¶ç³»ç»Ÿå¯¼å‡ºåˆ°ç”¨æˆ·ç©ºé—´&lt;/li&gt;
&lt;li&gt;å°†Linuxå­ç³»ç»Ÿè¡¨è¾¾ä¸ºæ€»çº¿ç±»å‹/é©±åŠ¨/è®¾å¤‡/ç±»/æ¥å£çš„å…³ç³»ï¼Œåˆ†åˆ«ç”¨bus_typeã€deviceã€device_driverã€classå’Œclass_interfaceç»“æ„è¡¨ç¤º&lt;/li&gt;
&lt;/ol&gt;
&lt;h5 id=&#34;å¼•ç”¨è®¡æ•°&#34;&gt;å¼•ç”¨è®¡æ•°&lt;/h5&gt;
&lt;p&gt;å¼•ç”¨è®¡æ•°çš„ä¸»è¦åŠŸèƒ½ä¸ºï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;é˜²æ­¢å†…å­˜æ³„æ¼ï¼šç¡®ä¿å·²åˆ†é…çš„å¯¹è±¡æœ€ç»ˆä¼šè¢«é‡Šæ”¾ï¼›&lt;/li&gt;
&lt;li&gt;é˜²æ­¢è®¿é—®å·²é‡Šæ”¾çš„å†…å­˜ï¼šç¡®ä¿ä¸ä¼šä½¿ç”¨å·²ç»è¢«é‡Šæ”¾çš„å¯¹è±¡&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Linuxå†…æ ¸æä¾›äº†ç›¸å…³å‡½æ•°è¿›è¡Œæ“ä½œï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;void kref_init (struct kref *kref);åˆå§‹åŒ–å¯¹è±¡ï¼Œå°†å¯¹è±¡å¼•ç”¨æ¬¡æ•°è®¾ç½®ä¸º1ï¼Œè€Œä¸æ˜¯0ï¼›è¿™æ˜¯å› ä¸ºç”Ÿæˆè¯¥å¯¹è±¡çš„ä»£ç ä¹Ÿéœ€è¦æœ€åˆçš„å¼•ç”¨ï¼Œä»¥é˜²æ­¢å…¶ä»–éƒ¨åˆ†åœ¨è°ƒç”¨kref_putæ—¶é‡Šæ”¾è¯¥å¯¹è±¡&lt;/li&gt;
&lt;li&gt;void kref_get (struct kref *kref); é€’å¢å¯¹è±¡çš„å¼•ç”¨è®¡æ•°ã€‚åœ¨è¿™ä¹‹å‰ï¼Œç¡®ä¿å¼•ç”¨æ¬¡æ•°ä¸ä¸º0ï¼Œå¦åˆ™ç­”åº”ä¸€æ¡è­¦å‘Šä¿¡æ¯ã€‚è¿™å¯ä»¥é˜²æ­¢å¸¸è§çš„é”™è¯¯ï¼šä¸å…ˆè°ƒç”¨kref_initï¼Œè€Œç›´æ¥è°ƒç”¨kref_getã€‚&lt;/li&gt;
&lt;li&gt;int kref_put (struct kref *kref, void (*release) (struct kref *kref));é€’å‡å¯¹è±¡çš„å¼•ç”¨è®¡æ•°ã€‚å¦‚æœè¯¥è®¡æ•°å‡ä¸º0ï¼Œåˆ™è¡¨æ˜æ˜¯è¯¥å¯¹è±¡çš„æœ€åä¸€ä¸ªå¼•ç”¨ï¼Œå› æ­¤ä¼ å…¥çš„releaseå‡½æ•°è¢«è°ƒç”¨ï¼Œä»¥å›æ”¶è¿™ä¸ªå¯¹è±¡ç”¨åˆ°çš„å†…å­˜ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h5 id=&#34;å†…æ ¸å¯¹è±¡åŠé›†åˆ&#34;&gt;å†…æ ¸å¯¹è±¡åŠé›†åˆ&lt;/h5&gt;
&lt;p&gt;Linuxé©±åŠ¨æ¨¡å‹çš„åŸºç¡€æ˜¯å†…æ ¸å¯¹è±¡ã€‚å®ƒå°†æ€»çº¿ç±»å‹ã€è®¾å¤‡ã€é©±åŠ¨ç­‰éƒ½çœ‹ä½œæ˜¯å†…æ ¸å¯¹
è±¡ã€‚è¡¨ç¤ºå†…æ ¸å¯¹è±¡çš„ç»“æ„æ˜¯kobjectï¼Œç›¸å½“äºLinuxé©±åŠ¨æ¨¡å‹çš„â€œåŸºç±»â€&lt;/p&gt;
&lt;p&gt;åœ¨Linuxå†…æ ¸ä¸­çš„åŒå¾ªç¯é“¾è¡¨å®ç°æ–¹å¼ä¸‹ï¼š
â— é“¾è¡¨ç»“æ„ä½œä¸ºä¸€ä¸ªæˆå‘˜åµŒå…¥åˆ°å®¿ä¸»æ•°æ®ç»“æ„å†…ï¼›
â— å¯ä»¥å°†é“¾è¡¨ç»“æ„æ”¾åœ¨å®¿ä¸»ç»“æ„å†…çš„ä»»ä½•åœ°æ–¹ï¼›
â— å¯ä»¥ä¸ºé“¾è¡¨ç»“æ„å–ä»»ä½•åå­—ï¼›
â— å®¿ä¸»ç»“æ„å¯ä»¥æœ‰å¤šä¸ªé“¾è¡¨ç»“æ„ã€‚&lt;/p&gt;
&lt;p&gt;&lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 354; 
			flex-basis: 850px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/linux%E5%AD%98%E5%82%A8%E6%8A%80%E6%9C%AF%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/5.png&#34; data-size=&#34;574x162&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/linux%E5%AD%98%E5%82%A8%E6%8A%80%E6%9C%AF%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/5.png&#34;
			width=&#34;574&#34;
			height=&#34;162&#34;
			srcset=&#34;https://zcj-git520.github.io/p/linux%E5%AD%98%E5%82%A8%E6%8A%80%E6%9C%AF%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/5_hu32d75d70aff03f54335d42faccf5602d_37280_480x0_resize_box_3.png 480w, https://zcj-git520.github.io/p/linux%E5%AD%98%E5%82%A8%E6%8A%80%E6%9C%AF%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/5_hu32d75d70aff03f54335d42faccf5602d_37280_1024x0_resize_box_3.png 1024w&#34;
			loading=&#34;lazy&#34;
			alt=&#34;å›¾(5)&#34;&gt;
	&lt;/a&gt;
	
	&lt;figcaption&gt;å›¾(5)&lt;/figcaption&gt;
	
&lt;/figure&gt;&lt;/p&gt;
&lt;h5 id=&#34;sysfsæ–‡ä»¶ç³»ç»Ÿ&#34;&gt;sysfsæ–‡ä»¶ç³»ç»Ÿ&lt;/h5&gt;
&lt;p&gt;sysfsæ ¸å¿ƒè´Ÿè´£ä¸ºå†…æ ¸ä¸­çš„å†…éƒ¨è¡¨ç¤ºå’Œç”¨æˆ·ç©ºé—´çš„å¤–éƒ¨å‘ˆç°ä¹‹é—´å»ºç«‹å¯¹åº”å…³ç³»ï¼Œä¹Ÿç§°ä¸ºsysfsæ˜ å°„ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å†…æ ¸å¯¹è±¡è¢«æ˜ å°„ä¸ºç”¨æˆ·ç©ºé—´çš„ç›®å½•&lt;/li&gt;
&lt;li&gt;å¯¹è±¡å±æ€§è¢«æ˜ å°„ä¸ºç”¨æˆ·ç©ºé—´çš„å¸¸è§„æ–‡ä»¶&lt;/li&gt;
&lt;li&gt;å¯¹è±¡å…³ç³»è¢«æ˜ å°„ä¸ºç”¨æˆ·ç©ºé—´çš„ç¬¦å·é“¾æ¥&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;sysfsæ ¸å¿ƒç¡®å®å°†å†…æ ¸å¯¹è±¡ã€å¯¹è±¡å±æ€§ä»¥åŠå¯¹è±¡å…³ç³»ä¹Ÿç»„ç»‡æˆæ ‘çš„ç»“æ„ã€‚sysfså†…éƒ¨æ ‘ä¸­æœ‰å››ç§ç±»å‹çš„èŠ‚ç‚¹ï¼šç›®å½•èŠ‚ç‚¹ã€é“¾æ¥èŠ‚ç‚¹ã€å±æ€§èŠ‚ç‚¹å’ŒäºŒè¿›åˆ¶å±æ€§èŠ‚ç‚¹ï¼Œåˆ†åˆ«å’Œå†…æ ¸å¯¹è±¡ã€å¯¹è±¡å…³ç³»ã€å¯¹è±¡å±æ€§ç›¸å¯¹åº”ã€‚&lt;/p&gt;
&lt;p&gt;&lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 201; 
			flex-basis: 483px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/linux%E5%AD%98%E5%82%A8%E6%8A%80%E6%9C%AF%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/6.png&#34; data-size=&#34;621x308&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/linux%E5%AD%98%E5%82%A8%E6%8A%80%E6%9C%AF%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/6.png&#34;
			width=&#34;621&#34;
			height=&#34;308&#34;
			srcset=&#34;https://zcj-git520.github.io/p/linux%E5%AD%98%E5%82%A8%E6%8A%80%E6%9C%AF%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/6_hu9ae40068ba4a3fb5d70cf7e7e5686635_62981_480x0_resize_box_3.png 480w, https://zcj-git520.github.io/p/linux%E5%AD%98%E5%82%A8%E6%8A%80%E6%9C%AF%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/6_hu9ae40068ba4a3fb5d70cf7e7e5686635_62981_1024x0_resize_box_3.png 1024w&#34;
			loading=&#34;lazy&#34;
			alt=&#34;å›¾(6)&#34;&gt;
	&lt;/a&gt;
	
	&lt;figcaption&gt;å›¾(6)&lt;/figcaption&gt;
	
&lt;/figure&gt;&lt;/p&gt;
&lt;h5 id=&#34;é©±åŠ¨æ¨¡å‹å¯¹è±¡&#34;&gt;é©±åŠ¨æ¨¡å‹å¯¹è±¡&lt;/h5&gt;
&lt;p&gt;Linuxé©±åŠ¨æ¨¡å‹é€‚ç”¨äºlinuxå„ç§å­ç³»ç»Ÿï¼Œå®ƒæè¿°äº†æ€»çº¿ç±»å‹ã€è®¾å¤‡ã€é©±åŠ¨ä»¥åŠç±»å’Œæ¥å£ä¹‹é—´çš„å…³ç³»ã€‚æ¯ä¸€ä¸ªå­ç³»ç»Ÿéƒ½æœ‰å±äºè‡ªå·±çš„å”¯ä¸€çš„æ€»çº¿ç±»å‹ã€‚å®ƒä¸Šé¢é“¾æ¥äº†æ³¨å†Œäº†è¿™ä¸€æ€»çº¿ç±»å‹çš„å¤šä¸ªè®¾å¤‡ã€‚å¦å¤–å®ƒè¿˜æ³¨å†Œäº†åˆ°è¿™ä¸ªæ€»çº¿ç±»å‹çš„å¤šä¸ªé©±åŠ¨é“¾æ¥åœ¨ä¸€èµ·ã€‚&lt;/p&gt;
&lt;p&gt;æ€»çº¿ç±»å‹ï¼šLinuxé©±åŠ¨æ¨¡å‹ä¸­çš„æ€»çº¿ç±»å‹ç»“æ„ä½¿ç”¨bus_typeå’Œbus_type_privateä¸¤ä¸ªç»“æ„ä½“æ¥è¡¨
ç¤º&lt;/p&gt;
&lt;p&gt;è®¾å¤‡ï¼šLinuxé©±åŠ¨æ¨¡å‹ä¸­çš„è®¾å¤‡ï¼Œæˆ‘ä»¬æœ‰æ—¶ç®€ç§°ä¸ºé©±åŠ¨æ¨¡å‹è®¾å¤‡ï¼Œä½¿ç”¨deviceå’Œdevice_privateä¸¤ä¸ªç»“æ„ä½“æ¥è¡¨ç¤º&lt;/p&gt;
&lt;p&gt;é©±åŠ¨ï¼šåŒæ€»çº¿ç±»å‹å’Œè®¾å¤‡ä¸€æ ·ï¼Œåœ¨Linuxé©±åŠ¨æ¨¡å‹ä¸­è¡¨ç¤ºä¸€ä¸ªé©±åŠ¨ä¹Ÿéœ€è¦ä¸¤ä¸ªç»“æ„ä½“ï¼šdevice_driverå’Œdriver_privateã€‚è¿™ä¸¤ä¸ªç»“æ„ä½“åŒæ—¶å­˜åœ¨ï¼Œå¹¶ä¸”ä¸€ä¸€å¯¹åº”ã€‚&lt;/p&gt;
&lt;h4 id=&#34;pciå­ç³»ç»Ÿ&#34;&gt;PCIå­ç³»ç»Ÿ&lt;/h4&gt;
&lt;p&gt;PCIæ˜¯å¤–å›´è®¾å¤‡äº’è”çš„ç®€ç§°ï¼Œæ˜¯ä¸€ç§é€šç”¨æ€»çº¿çš„æ¥å£æ ‡å‡†ã€‚PCIæ€»çº¿æ˜¯ä¸€ç§å¸¸è§çš„ä¸»æœºI/Oæ€»çº¿ï¼Œç”¨äºé“¾æ¥é«˜é€Ÿçš„å¤–éƒ¨è®¾å¤‡ã€‚&lt;/p&gt;
&lt;p&gt;PCIæ€»çº¿ä½“ç³»æ˜¯ç»“æ„æ˜¯ä¸€ç§å±‚æ¬¡å¼çš„ä½“ç³»ç»“æ„ã€‚&lt;/p&gt;
&lt;p&gt;&lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 177; 
			flex-basis: 425px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/linux%E5%AD%98%E5%82%A8%E6%8A%80%E6%9C%AF%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/7.png&#34; data-size=&#34;552x311&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/linux%E5%AD%98%E5%82%A8%E6%8A%80%E6%9C%AF%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/7.png&#34;
			width=&#34;552&#34;
			height=&#34;311&#34;
			srcset=&#34;https://zcj-git520.github.io/p/linux%E5%AD%98%E5%82%A8%E6%8A%80%E6%9C%AF%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/7_hu4f9bc14b8314502b0bee122352a25cb4_45790_480x0_resize_box_3.png 480w, https://zcj-git520.github.io/p/linux%E5%AD%98%E5%82%A8%E6%8A%80%E6%9C%AF%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/7_hu4f9bc14b8314502b0bee122352a25cb4_45790_1024x0_resize_box_3.png 1024w&#34;
			loading=&#34;lazy&#34;
			alt=&#34;å›¾(7)&#34;&gt;
	&lt;/a&gt;
	
	&lt;figcaption&gt;å›¾(7)&lt;/figcaption&gt;
	
&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;â— PCIè®¾å¤‡ï¼šéµå¾ªPCIè§„èŒƒï¼Œå·¥ä½œåœ¨PCIå±€éƒ¨æ€»çº¿ç¯å¢ƒä¸‹çš„è®¾å¤‡ã€‚å…¸å‹çš„PCIè®¾å¤‡
æ˜¯å°è£…åœ¨é›†æˆçº¿è·¯æ¿ï¼ˆIC Packageï¼‰ä¸­ï¼Œæˆ–è€…é›†æˆåˆ°PCIæ‰©å±•å¡ä¸Šçš„å®Œæ•´çš„å¤–å›´å…ƒä»¶é€‚
é…å™¨ã€‚é€šå¸¸è§åˆ°çš„æœ‰ç½‘ç»œã€æ˜¾ç¤ºæˆ–è€…SCSIé€‚é…å™¨ã€‚PCIå±€éƒ¨æ€»çº¿è§„èŒƒæŒ‡å‡ºï¼Œæ¯ä¸ªPCIè®¾
å¤‡å¯ä»¥åŒ…å«æœ€å¤š8ä¸ªPCIåŠŸèƒ½ï¼Œæ¯ä¸ªåŠŸèƒ½æ˜¯ä¸€ä¸ªé€»è¾‘è®¾å¤‡ã€‚
â— PCIæ¡¥è®¾å¤‡ï¼šç”±äºç”µå­è´Ÿè½½é™åˆ¶ï¼Œæ¯æ¡PCIæ€»çº¿ä¸Šå¯ä»¥æŒ‚è½½çš„è®¾å¤‡æ•°ç›®æ˜¯æœ‰é™
çš„ï¼Œå› æ­¤ä½¿ç”¨äº†ä¸€ç§ç‰¹æ®Šçš„è®¾å¤‡ï¼Œå³PCI-PCIæ¡¥è®¾å¤‡ã€‚PCI-PCIæ¡¥ä¸ºä¸¤æ¡ç‹¬ç«‹çš„PCIæ€»çº¿
æä¾›è¿æ¥ã€‚PCI-PCIæ¡¥è®¾å¤‡ä¹Ÿæ˜¯ä¸€ç§å¹¿ä¹‰ä¸Šçš„PCIè®¾å¤‡ã€‚åœ¨æœ¬æ–‡ä¸­ï¼ŒPCI-PCIæ¡¥è®¾å¤‡ç®€ç§°
PCIæ¡¥ã€‚
â— ä¸»æ¡¥è®¾å¤‡ï¼šPCIæ¡¥è®¾å¤‡å’ŒPCIè®¾å¤‡æœ€ç»ˆé€šè¿‡Host-PCIæ¡¥è®¾å¤‡è¿æ¥åˆ°CPUï¼Œä½¿æ•´ä¸ª
ç³»ç»Ÿçœ‹èµ·æ¥åƒä¸€é¢—å€’ç½®çš„æ ‘çŠ¶ç»“æ„ï¼Œæ ‘çš„é¡¶ç«¯æ˜¯CPUå’Œå†…å­˜ã€‚ç”±Host-PCIæ¡¥è®¾å¤‡å¼•å‡ºçš„
PCIæ€»çº¿ä¹Ÿç§°ä¸ºPCIæ ¹æ€»çº¿ã€‚åœ¨æœ¬æ–‡ä¸­ï¼ŒHost-PCIæ¡¥è®¾å¤‡ç®€ç§°ä¸ºä¸»æ¡¥ã€‚&lt;/p&gt;
&lt;h5 id=&#34;pciå­ç³»ç»Ÿå¯¹è±¡&#34;&gt;PCIå­ç³»ç»Ÿå¯¹è±¡&lt;/h5&gt;
&lt;p&gt;åœ¨PICå­ç³»ç»Ÿä¸­æœ‰PCIæ€»çº¿å’ŒPCIè®¾å¤‡ï¼ŒåŸºäºè¿™ä¸¤ä¸ªæ ¸å¿ƒçš„xæŠ½è±¡ï¼Œlinux PCIå­ç³»ç»Ÿå®šä¹‰äº†ä¸¤ä¸ªå…³é”®çš„æ•°æ®ç»“æ„ï¼špci_buså’Œpci_dev,ä»¥æ­¤æ¥æè¿°PCIæ€»çº¿å’ŒPCIè®¾å¤‡&lt;/p&gt;
&lt;p&gt;&lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 255; 
			flex-basis: 612px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/linux%E5%AD%98%E5%82%A8%E6%8A%80%E6%9C%AF%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/8.png&#34; data-size=&#34;643x252&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/linux%E5%AD%98%E5%82%A8%E6%8A%80%E6%9C%AF%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/8.png&#34;
			width=&#34;643&#34;
			height=&#34;252&#34;
			srcset=&#34;https://zcj-git520.github.io/p/linux%E5%AD%98%E5%82%A8%E6%8A%80%E6%9C%AF%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/8_hu4c06f2ab7654aef4e96a3c1935b9fef2_57584_480x0_resize_box_3.png 480w, https://zcj-git520.github.io/p/linux%E5%AD%98%E5%82%A8%E6%8A%80%E6%9C%AF%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/8_hu4c06f2ab7654aef4e96a3c1935b9fef2_57584_1024x0_resize_box_3.png 1024w&#34;
			loading=&#34;lazy&#34;
			alt=&#34;å›¾(8)&#34;&gt;
	&lt;/a&gt;
	
	&lt;figcaption&gt;å›¾(8)&lt;/figcaption&gt;
	
&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;pci_busï¼šPCIæ€»çº¿ï¼špci_busæ˜¯æè¿°PCIæ€»çº¿çš„ç»“æ„ã€‚æ— è®ºæ˜¯æ ¹PCIæ€»çº¿ï¼Œè¿˜æ˜¯éæ ¹PCIæ€»çº¿ï¼Œéƒ½å¯¹åº”ä¸€ä¸ªpci_busæè¿°ç¬¦&lt;/p&gt;
&lt;p&gt;pci_devï¼šPCIè®¾å¤‡ï¼šç”±äºæ¯æ¡PCIæ€»çº¿ä¸Šå¯ä»¥æŒ‚è½½çš„ç‰©ç†è®¾å¤‡æ•°ç›®æ˜¯æœ‰é™çš„ï¼Œå› æ­¤ä½œä¸ºæ‰©å±•ï¼Œæ¯ä¸ªç‰©ç†è®¾å¤‡å¯ä»¥åŒ…å«å¤šä¸ªåŠŸèƒ½ï¼Œå³é€»è¾‘è®¾å¤‡ã€‚ä»ç‰©ç†ç¡¬ä»¶çš„è§’åº¦ï¼ŒPCIè®¾å¤‡å®é™…ä¸ŠæŒ‡çš„æ˜¯åŒ…å«ä»ä¸€ä¸ªåˆ°å…«ä¸ªâ€œåŠŸèƒ½â€çš„æŸä¸ªPCIç¡¬ä»¶ï¼Œå®ƒè¢«é›†æˆåˆ°ç³»ç»Ÿä¸»æ¿ä¸Šï¼Œæˆ–è€…å®‰è£…åœ¨æ’æ§½ä¸­ï¼Œè¿™æ˜¯PCIç‰©ç†ç¡¬ä»¶çš„æ¦‚å¿µ&lt;/p&gt;
&lt;h4 id=&#34;scsiå­ç³»ç»Ÿ&#34;&gt;SCSIå­ç³»ç»Ÿ&lt;/h4&gt;
&lt;p&gt;Linux SCSIå­ç³»ç»Ÿæ˜¯ä¸€ç§åˆ†å±‚çš„æ¶æ„ï¼Œå…±ä¸‰å±‚ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;ä½å±‚ï¼šæœ€ä½ä¸€å±‚ä»£è¡¨æ˜¯é€‚ç”¨äºSCSIçš„ç‰©ç†æ¥å£çš„å®é™…é©±åŠ¨å™¨ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ä¸­é—´å±‚ï¼Œä¹Ÿç§°å…¬å…±å±‚æˆ–ç»Ÿä¸€å±‚ï¼Œåœ¨è¿™ä¸€å±‚åŒ…å«SCSIå †æ ˆçš„é«˜å±‚å’Œåº•å±‚çš„å…¬å…±æœåŠ¡å‡½æ•°ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;é«˜å±‚ï¼šé«˜å±‚ä»£è¡¨ç€å„ç§SCSIè®¾å¤‡ç±»å‹çš„é©±åŠ¨ã€‚&lt;/p&gt;
&lt;p&gt;&lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 241; 
			flex-basis: 580px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/linux%E5%AD%98%E5%82%A8%E6%8A%80%E6%9C%AF%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/9.png&#34; data-size=&#34;573x237&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/linux%E5%AD%98%E5%82%A8%E6%8A%80%E6%9C%AF%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/9.png&#34;
			width=&#34;573&#34;
			height=&#34;237&#34;
			srcset=&#34;https://zcj-git520.github.io/p/linux%E5%AD%98%E5%82%A8%E6%8A%80%E6%9C%AF%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/9_hu5f2ec8d6c5f9e0019ebaf72a6d6d13e9_61284_480x0_resize_box_3.png 480w, https://zcj-git520.github.io/p/linux%E5%AD%98%E5%82%A8%E6%8A%80%E6%9C%AF%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/9_hu5f2ec8d6c5f9e0019ebaf72a6d6d13e9_61284_1024x0_resize_box_3.png 1024w&#34;
			loading=&#34;lazy&#34;
			alt=&#34;å›¾(9)&#34;&gt;
	&lt;/a&gt;
	
	&lt;figcaption&gt;å›¾(9)&lt;/figcaption&gt;
	
&lt;/figure&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h5 id=&#34;scsiå­ç³»ç»Ÿå¯¹è±¡&#34;&gt;SCSIå­ç³»ç»Ÿå¯¹è±¡&lt;/h5&gt;
&lt;p&gt;Scsi_Hostã€scsi_targetå’Œscsi_deviceåˆ†åˆ«æè¿°çš„æ˜¯Linux SCSIæ¨¡å‹ä¸­çš„ä¸»æœºé€‚é…å™¨ã€ç›®æ ‡èŠ‚ç‚¹å’Œé€»è¾‘å•å…ƒã€‚&lt;/p&gt;
&lt;p&gt;&lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 279; 
			flex-basis: 670px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/linux%E5%AD%98%E5%82%A8%E6%8A%80%E6%9C%AF%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/10.png&#34; data-size=&#34;601x215&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/linux%E5%AD%98%E5%82%A8%E6%8A%80%E6%9C%AF%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/10.png&#34;
			width=&#34;601&#34;
			height=&#34;215&#34;
			srcset=&#34;https://zcj-git520.github.io/p/linux%E5%AD%98%E5%82%A8%E6%8A%80%E6%9C%AF%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/10_hu4abcfc481f41cfd289d792f9bb2b1a5a_48987_480x0_resize_box_3.png 480w, https://zcj-git520.github.io/p/linux%E5%AD%98%E5%82%A8%E6%8A%80%E6%9C%AF%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/10_hu4abcfc481f41cfd289d792f9bb2b1a5a_48987_1024x0_resize_box_3.png 1024w&#34;
			loading=&#34;lazy&#34;
			alt=&#34;å›¾(10)&#34;&gt;
	&lt;/a&gt;
	
	&lt;figcaption&gt;å›¾(10)&lt;/figcaption&gt;
	
&lt;/figure&gt;&lt;/p&gt;
</description>
        </item>
        <item>
        <title>Linuxå†…æ ¸ä¸­è®¾å¤‡é©±åŠ¨</title>
        <link>https://zcj-git520.github.io/p/linux%E5%86%85%E6%A0%B8%E4%B8%AD%E8%AE%BE%E5%A4%87%E9%A9%B1%E5%8A%A8/</link>
        <pubDate>Sat, 02 Apr 2022 22:00:38 +0800</pubDate>
        
        <guid>https://zcj-git520.github.io/p/linux%E5%86%85%E6%A0%B8%E4%B8%AD%E8%AE%BE%E5%A4%87%E9%A9%B1%E5%8A%A8/</guid>
        <description>&lt;img src="https://zcj-git520.github.io/p/linux%E5%86%85%E6%A0%B8%E4%B8%AD%E8%AE%BE%E5%A4%87%E9%A9%B1%E5%8A%A8/1.png" alt="Featured image of post Linuxå†…æ ¸ä¸­è®¾å¤‡é©±åŠ¨" /&gt;&lt;h4 id=&#34;åŸºæœ¬æ¦‚å¿µ&#34;&gt;åŸºæœ¬æ¦‚å¿µ&lt;/h4&gt;
&lt;h5 id=&#34;å—è®¾å¤‡block-device&#34;&gt;å—è®¾å¤‡ï¼ˆblock deviceï¼‰&lt;/h5&gt;
&lt;p&gt;æ˜¯ä¸€ç§æœ‰ä¸€å®šç»“æ„çš„éšæœºå­˜å–çš„è®¾å¤‡ï¼Œå¯¹äºè¿™ç§è®¾å¤‡çš„è¯»å†™æ˜¯æŒ‰å—è¿›è¡Œçš„ï¼Œä»–ä½¿ç”¨çš„ç¼“å†²åŒºæ¥å­˜æ”¾æš‚æ—¶çš„æ•°æ®ï¼Œè¾¾åˆ°ä¸€å®šæ¡ä»¶åã€‚ä»ç¼“å­˜ä¸€æ¬¡æ€§å†™å…¥è®¾å¤‡æˆ–è€…ä»è®¾å¤‡ä¸€æ¬¡æ€§è¯»åˆ°ç¼“å†²åŒº&lt;/p&gt;
&lt;h5 id=&#34;å­—ç¬¦è®¾å¤‡character-device&#34;&gt;å­—ç¬¦è®¾å¤‡ï¼ˆcharacter deviceï¼‰&lt;/h5&gt;
&lt;p&gt;æ˜¯ä¸€ç§é¡ºåºçš„æ•°æ®è®¾å¤‡ï¼Œå¯¹äºè¿™ç§è®¾å¤‡çš„è¯»å†™æ˜¯æŒ‰å­—ç¬¦è¿›è¡Œçš„ï¼Œè¿ç»­çš„å­—ç¬¦ç»„æˆæ•°æ®æµï¼Œæ˜¯æ²¡æœ‰ç¼“å†²åŒºï¼Œæ˜¯åªç”¨å®æ—¶çš„è¯»å†™è®¾å¤‡ï¼›&lt;/p&gt;
&lt;h5 id=&#34;å—è®¾å¤‡ä¸å­—ç¬¦è®¾å¤‡ä¹‹é—´çš„åŒºåˆ«&#34;&gt;å—è®¾å¤‡ä¸å­—ç¬¦è®¾å¤‡ä¹‹é—´çš„åŒºåˆ«&lt;/h5&gt;
&lt;ol&gt;
&lt;li&gt;è¯»å†™æ•°æ®çš„å•å…ƒä¸åŒï¼šå—è®¾å¤‡æ˜¯ä»¥å—ä¸ºè¯»å†™å•å…ƒï¼Œè€Œå­—ç¬¦è®¾å¤‡æ˜¯ä»¥å­—ç¬¦ä¸ºè¯»å†™å•å…ƒ&lt;/li&gt;
&lt;li&gt;å—è®¾å¤‡æ˜¯å¯ä»¥éšæœºè®¿é—®ï¼Œè€Œå­—ç¬¦è®¾å¤‡åªèƒ½é¡ºåºè®¿é—®&lt;/li&gt;
&lt;/ol&gt;
&lt;h5 id=&#34;æ‰‡åŒºsectors&#34;&gt;æ‰‡åŒºï¼ˆsectorsï¼‰&lt;/h5&gt;
&lt;p&gt;æ˜¯å—è®¾å¤‡ç¡¬ä»¶å¯¹æ•°æ®å¤„ç†çš„åŸºæœ¬å•ä½ï¼Œé€šå¸¸1æ‰‡åŒº=512byte&lt;/p&gt;
&lt;h5 id=&#34;å—blocks&#34;&gt;å—ï¼ˆblocksï¼‰&lt;/h5&gt;
&lt;p&gt;æ˜¯Linuxç§åˆ¶å®šå¯¹å†…æ ¸æˆ–æ–‡ä»¶ç³»ç»Ÿç­‰æ•°æ®å¤„ç†çš„åŸºæœ¬å•ä½ï¼Œé€šå¸¸1å—=1ä¸ªæˆ–å¤šä¸ªæ‰‡åŒº&lt;/p&gt;
&lt;h5 id=&#34;æ®µsegments&#34;&gt;æ®µï¼ˆsegmentsï¼‰&lt;/h5&gt;
&lt;p&gt;æ˜¯ç”±è‹¥å¹²ä¸ªç›¸é‚»çš„å—ç»„æˆã€‚æ˜¯linuxå†…å­˜ç®¡ç†æœºåˆ¶ä¸­ä¸€ä¸ªå†…å­˜é¡µæˆ–è€…å†…å­˜é¡µä¸­çš„ä¸€éƒ¨åˆ†&lt;/p&gt;
&lt;h5 id=&#34;é¡µæ®µå—æ‰‡åŒºä¹‹é—´çš„å…³ç³»å¦‚å›¾&#34;&gt;é¡µã€æ®µã€å—ã€æ‰‡åŒºä¹‹é—´çš„å…³ç³»å¦‚å›¾&lt;/h5&gt;
&lt;p&gt;&lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 295; 
			flex-basis: 708px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/linux%E5%86%85%E6%A0%B8%E4%B8%AD%E8%AE%BE%E5%A4%87%E9%A9%B1%E5%8A%A8/1.png&#34; data-size=&#34;638x216&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/linux%E5%86%85%E6%A0%B8%E4%B8%AD%E8%AE%BE%E5%A4%87%E9%A9%B1%E5%8A%A8/1.png&#34;
			width=&#34;638&#34;
			height=&#34;216&#34;
			srcset=&#34;https://zcj-git520.github.io/p/linux%E5%86%85%E6%A0%B8%E4%B8%AD%E8%AE%BE%E5%A4%87%E9%A9%B1%E5%8A%A8/1_huf160ae63de05609269a7d8cc29249a6e_88106_480x0_resize_box_3.png 480w, https://zcj-git520.github.io/p/linux%E5%86%85%E6%A0%B8%E4%B8%AD%E8%AE%BE%E5%A4%87%E9%A9%B1%E5%8A%A8/1_huf160ae63de05609269a7d8cc29249a6e_88106_1024x0_resize_box_3.png 1024w&#34;
			loading=&#34;lazy&#34;
			alt=&#34;å›¾(1)&#34;&gt;
	&lt;/a&gt;
	
	&lt;figcaption&gt;å›¾(1)&lt;/figcaption&gt;
	
&lt;/figure&gt;&lt;/p&gt;
&lt;h4 id=&#34;å—è®¾å¤‡çš„å±‚æ¬¡&#34;&gt;å—è®¾å¤‡çš„å±‚æ¬¡&lt;/h4&gt;
&lt;p&gt;&lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 123; 
			flex-basis: 296px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/linux%E5%86%85%E6%A0%B8%E4%B8%AD%E8%AE%BE%E5%A4%87%E9%A9%B1%E5%8A%A8/2.png&#34; data-size=&#34;743x601&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/linux%E5%86%85%E6%A0%B8%E4%B8%AD%E8%AE%BE%E5%A4%87%E9%A9%B1%E5%8A%A8/2.png&#34;
			width=&#34;743&#34;
			height=&#34;601&#34;
			srcset=&#34;https://zcj-git520.github.io/p/linux%E5%86%85%E6%A0%B8%E4%B8%AD%E8%AE%BE%E5%A4%87%E9%A9%B1%E5%8A%A8/2_huf72a8c95f7642b75cf7d4ce010fe63fa_379610_480x0_resize_box_3.png 480w, https://zcj-git520.github.io/p/linux%E5%86%85%E6%A0%B8%E4%B8%AD%E8%AE%BE%E5%A4%87%E9%A9%B1%E5%8A%A8/2_huf72a8c95f7642b75cf7d4ce010fe63fa_379610_1024x0_resize_box_3.png 1024w&#34;
			loading=&#34;lazy&#34;
			alt=&#34;å›¾(2)&#34;&gt;
	&lt;/a&gt;
	
	&lt;figcaption&gt;å›¾(2)&lt;/figcaption&gt;
	
&lt;/figure&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Linuxæ˜¯æ”¯æŒå¤šç§ä¸åŒå­˜å‚¨ä»‹è´¨ï¼Œåœ¨å†…æ ¸ä¸­é—´éƒ½è¦é€‚é…æœ‰å—è®¾å¤‡é©±åŠ¨ç¨‹åºæ¥è¯»å†™å—è®¾å¤‡ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å¾€ä¸Šæ˜¯ioè°ƒåº¦å±‚ï¼Œå°†æ–‡ä»¶ç³»ç»Ÿçš„è¯»å†™è¯·æ±‚è¿›è¡Œç¼–æ’ï¼Œåˆå¹¶ç”¨ä»¥æé«˜ç£ç›˜çš„è¯»å†™æ•ˆç‡ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;é€šç”¨å—å±‚ï¼Œå¯¹åº”ä¸bioç»“æ„ã€‚æ˜¯å°†ioè¯·æ±‚çš„æŠ½è±¡ï¼Œæè¿°å¯¹åº”çš„ioæ“ä½œæ¶‰åŠåˆ°å¤šä¸ªé¡µ&lt;/p&gt;
&lt;h5 id=&#34;å—è®¾å¤‡çš„åº”ç”¨åœ¨linuxä¸­æ˜¯ä¸€ä¸ªå®Œæ•´çš„å­ç³»ç»Ÿ&#34;&gt;å—è®¾å¤‡çš„åº”ç”¨åœ¨linuxä¸­æ˜¯ä¸€ä¸ªå®Œæ•´çš„å­ç³»ç»Ÿ&lt;/h5&gt;
&lt;p&gt;åœ¨linuxä¸­ï¼Œé©±åŠ¨å¯¹å—è®¾å¤‡çš„ä¸­è¾“å…¥æˆ–è€…è¾“å‡ºï¼ˆioï¼‰æ“ä½œéƒ½ä¼šå‘å—è®¾å¤‡å‘å‡ºè¯·æ±‚ï¼Œåœ¨é©±åŠ¨ä¸­ä½¿ç”¨requestç»“æ„ä½“æè¿°ã€‚&lt;/p&gt;
&lt;p&gt;å¯¹äºä¸€äº›ç£ç›˜è®¾å¤‡è¯·æ±‚çš„é€Ÿåº¦å¾ˆæ…¢ï¼Œå†…æ ¸æä¾›ä¸€ç§é˜Ÿåˆ—çš„æœºåˆ¶ï¼Œå°†è¿™äº›ioè¯·æ±‚æ·»åŠ åˆ°é˜Ÿåˆ—ä¸­ï¼ˆå³ï¼šè¯·æ±‚é˜Ÿåˆ—ï¼‰ï¼Œåœ¨é©±åŠ¨ä¸­ä½¿ç”¨request_queueç»“æ„ä½“è¿›è¡Œæè¿°ã€‚åœ¨å‘å—è®¾å¤‡æäº¤è¿™äº›è¯·æ±‚å‰å†…æ ¸ä¼šå…ˆæ‰§è¡Œè¯·æ±‚åˆå¹¶å’Œæ’åºçš„é¢„æ“ä½œï¼Œä»¥æé«˜è®¿é—®çš„æ•ˆç‡ï¼Œç„¶ååœ¨ç”±å†…æ ¸ä¸­çš„ioè°ƒåº¦ç¨‹åºå­ç³»ç»Ÿæ¥è´Ÿè´£æäº¤ioè¯·æ±‚ï¼Œè°ƒåº¦ç¨‹åºå°†ç£ç›˜åˆ†é…ç»™ç³»ç»Ÿä¸­æ‰€æœ‰æŒ‚èµ·çš„å—ioè¯·æ±‚ï¼Œå…¶å·¥ä½œæ˜¯ç®¡ç†å—è®¾å¤‡çš„è¯·æ±‚é˜Ÿåˆ—ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨ç”±é€šç”¨å±‚ï¼ˆgeneric block layerï¼‰è´Ÿè´£ç»´æŒä¸€ä¸ªioè¯·æ±‚åœ¨ä¸Šå±‚æ–‡ä»¶ç³»ç»Ÿä¸åº•å±‚ç‰©ç†ç£ç›˜ä¹‹é—´çš„å…³ç³»ï¼Œåœ¨é€šç”¨å±‚ä¸­ï¼Œé€šå¸¸ç”¨ä¸€ä¸ªbioç»“æ„ä½“æ¥å¯¹åº”ä¸€ä¸ªioè¯·æ±‚ã€‚&lt;/p&gt;
&lt;p&gt;linuxæä¾›ä¸€ä¸ªgendiskæ•°æ®ç»“æ„ä½“ï¼Œç”¨æ¥è¡¨ç¤ºä¸€ä¸ªç‹¬ç«‹çš„ç£ç›˜è®¾å¤‡æˆ–è€…æ˜¯åˆ†åŒºï¼Œç”¨æ¥å¯¹åº•å±‚ç‰©ç†ç£ç›˜çš„è®¿é—®ã€‚åœ¨gendiskä¸­æœ‰ä¸€ä¸ªç±»ä¼¼äºå­—ç¬¦è®¾å¤‡ä¸­çš„file_operationsçš„ç¡¬ä»¶æ“ä½œç»“æ„æŒ‡é’ˆï¼Œæ˜¯block_device_operationsç»“æ„ä½“ã€‚&lt;/p&gt;
&lt;p&gt;å½“å¤šä¸ªè¯·æ±‚åœ¨æäº¤å—è®¾å¤‡æ—¶ã€‚æ‰§è¡Œçš„æ•ˆç‡ä¾èµ–äºè¯·æ±‚çš„é¡ºåºã€‚å¦‚æœè¯·æ±‚çš„é€Ÿåº¦æ˜¯åŒä¸€æ–¹å‘ï¼Œæ‰§è¡Œæ•ˆç‡æœ€å¤§ã€‚å†…æ ¸åœ¨è°ƒç”¨å—è®¾å¤‡é©±åŠ¨ç¨‹åºè¯·æ±‚ä¹‹å‰ï¼Œå…ˆæ”¶é›†ioè¯·æ±‚å¹¶å°†è¯·æ±‚è¿›è¡Œæ’åºï¼Œç„¶åå°†è¿ç»­æ‰‡åŒºæ“ä½œçš„è¯·æ±‚è¿›è¡Œåˆå¹¶ä»¥æé«˜æ‰§è¡Œæ•ˆç‡ã€‚&lt;/p&gt;
&lt;h5 id=&#34;å—è®¾å¤‡çš„ç¼“å†²åŒºå’Œç¼“å†²åŒºå¤´&#34;&gt;å—è®¾å¤‡çš„ç¼“å†²åŒºå’Œç¼“å†²åŒºå¤´&lt;/h5&gt;
&lt;p&gt;ç¼“å†²åŒºå¯¹åº”ä¸€ä¸ªç£ç›˜å—ï¼Œå½“ç£ç›˜å—è¢«è°ƒå…¥å†…å­˜æ—¶ï¼Œå°±å­˜å‚¨åœ¨ç¼“å†²åŒºï¼›å—åŒ…å«ä¸€ä¸ªæˆ–å¤šä¸ªæ‰‡åŒºï¼Œä¸”ä¸å¤§äºä¸€ä¸ªé¡µï¼Œæ‰€ä»¥ä¸€ä¸ªé¡µå¯ä»¥å®¹çº³ä¸€ä¸ªæˆ–è€…å¤šä¸ªå—ï¼Œå¹¶å­˜å‚¨ä¸€äº›æ§åˆ¶ä¿¡æ¯ã€‚æ§åˆ¶ä¿¡æ¯ä¸€èˆ¬æ˜¯ä½¿ç”¨ç»“æ„ä½“buff-headæ¥è¡¨ç¤ºï¼Œç»“æ„ä½“å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-c&#34; data-lang=&#34;c&#34;&gt;&lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;buffer_head&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
  &lt;span class=&#34;kt&#34;&gt;unsigned&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;long&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;b_state&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;cm&#34;&gt;/* æ ‡å¿—ä½ */&lt;/span&gt;
  &lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;buffer_head&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;b_this_page&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;cm&#34;&gt;/* é¡µé¢ä¸­çš„ç¼“å†²åŒº */&lt;/span&gt;
  &lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;page&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;b_page&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;cm&#34;&gt;/* å½“å‰é¡µé¢ */&lt;/span&gt;
  &lt;span class=&#34;n&#34;&gt;sector_t&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;b_blocknr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;cm&#34;&gt;/* èµ·å§‹å—å· */&lt;/span&gt;
  &lt;span class=&#34;n&#34;&gt;size_t&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;size&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;cm&#34;&gt;/* æ˜ åƒçš„å¤§å° */&lt;/span&gt;
  &lt;span class=&#34;kt&#34;&gt;char&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;b_data&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;  &lt;span class=&#34;cm&#34;&gt;/* æ•°æ®æŒ‡é’ˆ */&lt;/span&gt;
  &lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;block_device&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;b_bdev&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;cm&#34;&gt;/* å…³è”çš„å—è®¾å¤‡ */&lt;/span&gt;
  &lt;span class=&#34;n&#34;&gt;atomic_t&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;b_count&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;  &lt;span class=&#34;cm&#34;&gt;/* ä½¿ç”¨è®¡æ•° */&lt;/span&gt;
  &lt;span class=&#34;p&#34;&gt;...&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;};&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h4 id=&#34;è¯·æ±‚ç»“æ„request&#34;&gt;è¯·æ±‚ç»“æ„request&lt;/h4&gt;
&lt;p&gt;ç»“æ„requestä»£è¡¨äº†æŒ‚èµ·çš„ioè¯·æ±‚ï¼Œæ¯ä¸€ä¸ªè¯·æ±‚ç”¨åŒä¸€ä¸ªç»“æ„requestå®ä¾‹è¿›è¡Œæè¿°ï¼Œå­˜æ”¾åœ¨è¯·æ±‚é˜Ÿåˆ—é“¾è¡¨ä¸­ï¼Œç”±ç”µæ¢¯ç®—æ³•è¿›è¡Œæ’åºï¼Œæ¯ä¸€ä¸ªè¯·æ±‚åŒ…å«1ä¸ªæˆ–å¤šä¸ªç»“æ„ä½“bioå®ä¾‹ï¼Œå…¶ç»“æ„ä½“å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-c&#34; data-lang=&#34;c&#34;&gt;&lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;request&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;c1&#34;&gt;//ç”¨äºæŒ‚åœ¨è¯·æ±‚é˜Ÿåˆ—é“¾è¡¨çš„èŠ‚ç‚¹ï¼Œä½¿ç”¨å‡½æ•°blkdev_dequeue_requestè®¿é—®å®ƒï¼Œè€Œä¸èƒ½ç›´æ¥è®¿
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;é—®&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;list_head&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;queuelist&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; 
    &lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;list_head&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;donelist&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;  &lt;span class=&#34;cm&#34;&gt;/*ç”¨äºæŒ‚åœ¨å·²å®Œæˆè¯·æ±‚é“¾è¡¨çš„èŠ‚ç‚¹*/&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;request_queue&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;q&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;   &lt;span class=&#34;cm&#34;&gt;/*æŒ‡å‘è¯·æ±‚é˜Ÿåˆ—*/&lt;/span&gt;
    &lt;span class=&#34;kt&#34;&gt;unsigned&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;cmd_flags&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;    &lt;span class=&#34;cm&#34;&gt;/*å‘½ä»¤æ ‡è¯†*/&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;enum&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;rq_cmd_type_bits&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;cmd_type&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;  &lt;span class=&#34;cm&#34;&gt;/*å‘½ä»¤ç±»å‹*/&lt;/span&gt;
    &lt;span class=&#34;cm&#34;&gt;/*å„ç§å„æ ·çš„æ‰‡åŒºè®¡æ•°*/&lt;/span&gt;
   &lt;span class=&#34;cm&#34;&gt;/*ä¸ºæäº¤i/oç»´æŠ¤bioæ¨ªæ–­é¢çš„çŠ¶æ€ä¿¡æ¯ï¼Œhard_*æˆå‘˜æ˜¯å—å±‚å†…éƒ¨ä½¿ç”¨çš„ï¼Œé©±åŠ¨ç¨‹åºä¸åº”è¯¥æ”¹å˜
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt;å®ƒä»¬*/&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;sector_t&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;sector&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;     &lt;span class=&#34;cm&#34;&gt;/*å°†æäº¤çš„ä¸‹ä¸€ä¸ªæ‰‡åŒº*/&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;sector_t&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;hard_sector&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;        &lt;span class=&#34;cm&#34;&gt;/* å°†å®Œæˆçš„ä¸‹ä¸€ä¸ªæ‰‡åŒº*/&lt;/span&gt;
    &lt;span class=&#34;kt&#34;&gt;unsigned&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;long&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;nr_sectors&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;  &lt;span class=&#34;cm&#34;&gt;/* æ•´ä¸ªè¯·æ±‚è¿˜éœ€è¦ä¼ é€çš„æ‰‡åŒºæ•°*/&lt;/span&gt;
    &lt;span class=&#34;kt&#34;&gt;unsigned&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;long&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;hard_nr_sectors&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;cm&#34;&gt;/* å°†å®Œæˆçš„æ‰‡åŒºæ•°*/&lt;/span&gt;
 &lt;span class=&#34;cm&#34;&gt;/*åœ¨å½“å‰bioä¸­è¿˜éœ€è¦ä¼ é€çš„æ‰‡åŒºæ•° */&lt;/span&gt;
    &lt;span class=&#34;kt&#34;&gt;unsigned&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;current_nr_sectors&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
    &lt;span class=&#34;cm&#34;&gt;/*åœ¨å½“å‰æ®µä¸­å°†å®Œæˆçš„æ‰‡åŒºæ•°*/&lt;/span&gt;
    &lt;span class=&#34;kt&#34;&gt;unsigned&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;hard_cur_sectors&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;bio&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;bio&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;     &lt;span class=&#34;cm&#34;&gt;/*è¯·æ±‚ä¸­ç¬¬ä¸€ä¸ªæœªå®Œæˆæ“ä½œçš„bio*ã€
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt;    struct bio *biotail; /*è¯·æ±‚é“¾è¡¨ä¸­æœ«å°¾çš„bio*ã€
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt;    struct hlist_node hash;  /*èåˆ hash */&lt;/span&gt;
    &lt;span class=&#34;cm&#34;&gt;/* rb_nodeä»…ç”¨åœ¨I/Oè°ƒåº¦å™¨ä¸­ï¼Œå½“è¯·æ±‚è¢«ç§»åˆ°åˆ†å‘é˜Ÿåˆ—ä¸­æ—¶ï¼Œ
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt;è¯·æ±‚å°†è¢«åˆ é™¤ã€‚å› æ­¤ï¼Œè®©completion_dataä¸rb_nodeåˆ†äº«ç©ºé—´*/&lt;/span&gt;    
    &lt;span class=&#34;k&#34;&gt;union&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;rb_node&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;rb_node&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;   &lt;span class=&#34;cm&#34;&gt;/* æ’åº/æŸ¥æ‰¾*/&lt;/span&gt;
        &lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;completion_data&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;};&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h4 id=&#34;bioç»“æ„ä½“&#34;&gt;bioç»“æ„ä½“&lt;/h4&gt;
&lt;p&gt;é€šå¸¸1ä¸ªbioå¯¹åº”1ä¸ªioè¯·æ±‚ï¼Œioè°ƒåº¦ç®—æ³•å¯å°†è¿ç»­çš„bioåˆå¹¶æˆ1ä¸ªè¯·æ±‚ã€‚æ‰€ä»¥ä¸€ä¸ªè¯·æ±‚å¯ä»¥åŒ…å«å¤šä¸ªbioã€‚&lt;/p&gt;
&lt;p&gt;bioä¸ºé€šç”¨å±‚çš„ä¸»è¦æ•°æ®ç»“æ„ï¼Œå³æè¿°äº†ç£ç›˜çš„ä½ç½®ï¼Œåˆæè¿°äº†å†…å­˜çš„ä½ç½®ï¼Œæ˜¯ä¸Šå±‚å†…æ ¸vfsä¸ä¸‹å±‚é©±åŠ¨çš„è¿æ¥çº½å¸¦ï¼Œå…¶ç»“æ„ä½“å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-c&#34; data-lang=&#34;c&#34;&gt;&lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;bio&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;span class=&#34;n&#34;&gt;sector_t&lt;/span&gt;        &lt;span class=&#34;n&#34;&gt;bi_sector&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;//è¯¥bioç»“æ„æ‰€è¦ä¼ è¾“çš„ç¬¬ä¸€ä¸ªï¼ˆ512å­—èŠ‚ï¼‰æ‰‡åŒºï¼šç£ç›˜çš„ä½ç½®
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;bio&lt;/span&gt;        &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;bi_next&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;    &lt;span class=&#34;c1&#34;&gt;//è¯·æ±‚é“¾è¡¨
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;block_device&lt;/span&gt;    &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;bi_bdev&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;//ç›¸å…³çš„å—è®¾å¤‡
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;unsigned&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;long&lt;/span&gt;        &lt;span class=&#34;n&#34;&gt;bi_flags&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;//çŠ¶æ€å’Œå‘½ä»¤æ ‡å¿—
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;unsigned&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;long&lt;/span&gt;        &lt;span class=&#34;n&#34;&gt;bi_rw&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;//è¯»å†™
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;unsigned&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;short&lt;/span&gt;        &lt;span class=&#34;n&#34;&gt;bi_vcnt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;//bio_vescåç§»çš„ä¸ªæ•°
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;unsigned&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;short&lt;/span&gt;        &lt;span class=&#34;n&#34;&gt;bi_idx&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;    &lt;span class=&#34;c1&#34;&gt;//bi_io_vecçš„å½“å‰ç´¢å¼•
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;unsigned&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;short&lt;/span&gt;        &lt;span class=&#34;n&#34;&gt;bi_phys_segments&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;//ç»“åˆåçš„ç‰‡æ®µæ•°ç›®
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;unsigned&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;short&lt;/span&gt;        &lt;span class=&#34;n&#34;&gt;bi_hw_segments&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;//é‡æ˜ å°„åçš„ç‰‡æ®µæ•°ç›®
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;unsigned&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;        &lt;span class=&#34;n&#34;&gt;bi_size&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;    &lt;span class=&#34;c1&#34;&gt;//I/Oè®¡æ•°
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;unsigned&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;        &lt;span class=&#34;n&#34;&gt;bi_hw_front_size&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;//ç¬¬ä¸€ä¸ªå¯åˆå¹¶çš„æ®µå¤§å°;
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;unsigned&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;        &lt;span class=&#34;n&#34;&gt;bi_hw_back_size&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;//æœ€åä¸€ä¸ªå¯åˆå¹¶çš„æ®µå¤§å°
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;unsigned&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;        &lt;span class=&#34;n&#34;&gt;bi_max_vecs&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;    &lt;span class=&#34;c1&#34;&gt;//bio_vecsæ•°ç›®ä¸Šé™
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;bio_vec&lt;/span&gt;        &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;bi_io_vec&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;    &lt;span class=&#34;c1&#34;&gt;//bio_vecé“¾è¡¨ï¼šå†…å­˜çš„ä½ç½®
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;bio_end_io_t&lt;/span&gt;        &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;bi_end_io&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;//I/Oå®Œæˆæ–¹æ³•
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;atomic_t&lt;/span&gt;        &lt;span class=&#34;n&#34;&gt;bi_cnt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;//ä½¿ç”¨è®¡æ•°
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt;            &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;bi_private&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;//æ‹¥æœ‰è€…çš„ç§æœ‰æ–¹æ³•
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;bio_destructor_t&lt;/span&gt;    &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;bi_destructor&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;    &lt;span class=&#34;c1&#34;&gt;//é”€æ¯æ–¹æ³•
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;};&lt;/span&gt;
 
&lt;span class=&#34;err&#34;&gt;å†…å­˜æ•°æ®æ®µç»“æ„&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;bio_vec&lt;/span&gt;
       &lt;span class=&#34;err&#34;&gt;ç»“æ„&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;bio_vecä»£è¡¨äº†å†…å­˜ä¸­çš„ä¸€ä¸ªæ•°æ®æ®µ&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;ï¼Œæ•°æ®æ®µç”¨é¡µã€åç§»å’Œé•¿åº¦æ&lt;/span&gt;
&lt;span class=&#34;err&#34;&gt;è¿°ã€‚&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;I&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Oéœ€è¦æ‰§è¡Œçš„å†…å­˜ä½ç½®ç”¨æ®µè¡¨ç¤º&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;ï¼Œç»“æ„&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;bioæŒ‡å‘äº†ä¸€ä¸ªæ®µçš„æ•°ç»„&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;ã€‚&lt;/span&gt;
&lt;span class=&#34;err&#34;&gt;ç»“æ„&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;bio_vecåˆ—å‡ºå¦‚ä¸‹&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;ï¼ˆåœ¨&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;include&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;linux&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;bio&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;hä¸­&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;ï¼‰ï¼š&lt;/span&gt;
&lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;bio_vec&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
       &lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;page&lt;/span&gt;     &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;bv_page&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;   &lt;span class=&#34;cm&#34;&gt;/*æ•°æ®æ®µæ‰€åœ¨çš„é¡µ*/&lt;/span&gt;
       &lt;span class=&#34;kt&#34;&gt;unsigned&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;short&lt;/span&gt;  &lt;span class=&#34;n&#34;&gt;bv_len&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;     &lt;span class=&#34;cm&#34;&gt;/*æ•°æ®æ®µçš„é•¿åº¦*/&lt;/span&gt;
       &lt;span class=&#34;kt&#34;&gt;unsigned&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;short&lt;/span&gt;  &lt;span class=&#34;n&#34;&gt;bv_offset&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;  &lt;span class=&#34;cm&#34;&gt;/*æ•°æ®æ®µé¡µå†…åç§»*/&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;};&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h4 id=&#34;å—è®¾å¤‡ç»“æ„ä½“-block_device&#34;&gt;å—è®¾å¤‡ç»“æ„ä½“ block_device&lt;/h4&gt;
&lt;p&gt;å†…æ ¸ç”¨ç»“æ„ä½“block_deviceå®ä¾‹ä»£è¡¨ä¸€ä¸ªå—è®¾å¤‡å¯¹è±¡ï¼Œå—è®¾å¤‡çš„ç»“æ„ä½“ä¸ºblock_deviceå¦‚ä¸‹&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-c&#34; data-lang=&#34;c&#34;&gt;&lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;block_device&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
 &lt;span class=&#34;n&#34;&gt;dev_t&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;bd_dev&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;  &lt;span class=&#34;cm&#34;&gt;/* not a kdev_t - it&amp;#39;s a search key */&lt;/span&gt;
 &lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;inode&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;bd_inode&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;cm&#34;&gt;/* åˆ†åŒºèŠ‚ç‚¹ */&lt;/span&gt;
 &lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;super_block&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;bd_super&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
 &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;bd_openers&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
 &lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;mutex&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;bd_mutex&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt;/* open/close mutex æ‰“å¼€ä¸å…³é—­çš„äº’æ–¥é‡*/&lt;/span&gt;
 &lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;semaphore&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;bd_mount_sem&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;    &lt;span class=&#34;cm&#34;&gt;/*æŒ‚è½½æ“ä½œä¿¡å·é‡*/&lt;/span&gt; 
 &lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;list_head&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;bd_inodes&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
 &lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;bd_holder&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
 &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;bd_holders&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
 &lt;span class=&#34;cp&#34;&gt;#ifdef CONFIG_SYSFS
&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;list_head&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;bd_holder_list&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
 &lt;span class=&#34;cp&#34;&gt;#endif
&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;block_device&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;bd_contains&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
 &lt;span class=&#34;kt&#34;&gt;unsigned&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;bd_block_size&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;     &lt;span class=&#34;cm&#34;&gt;/*åˆ†åŒºå—å¤§å°*/&lt;/span&gt;
 &lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;hd_struct&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;bd_part&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
 &lt;span class=&#34;kt&#34;&gt;unsigned&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;bd_part_count&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;   &lt;span class=&#34;cm&#34;&gt;/*æ‰“å¼€æ¬¡æ•°*/&lt;/span&gt;
 &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;bd_invalidated&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
 &lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;gendisk&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;bd_disk&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;cm&#34;&gt;/*è®¾å¤‡ä¸ºç¡¬ç›˜æ—¶ï¼ŒæŒ‡å‘é€šç”¨ç¡¬ç›˜ç»“æ„*/&lt;/span&gt;
 &lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;list_head&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;bd_list&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
 &lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;backing_dev_info&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;bd_inode_backing_dev_info&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
 &lt;span class=&#34;kt&#34;&gt;unsigned&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;long&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;bd_private&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
 &lt;span class=&#34;cm&#34;&gt;/* The counter of freeze processes */&lt;/span&gt;
 &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;bd_fsfreeze_count&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
 &lt;span class=&#34;cm&#34;&gt;/* Mutex for freeze */&lt;/span&gt;
 &lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;mutex&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;bd_fsfreeze_mutex&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
 &lt;span class=&#34;p&#34;&gt;};&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h4 id=&#34;é€šç”¨ç¡¬ç›˜ç»“æ„-gendisk&#34;&gt;é€šç”¨ç¡¬ç›˜ç»“æ„ gendisk&lt;/h4&gt;
&lt;p&gt;ç»“æ„gendiskä»£è¡¨äº†ä¸€ä¸ªé€šç”¨ç¡¬ç›˜ï¼ˆgenreic hard diskï¼‰å¯¹è±¡ï¼Œå®ƒå­˜å‚¨äº†ä¸€ä¸ªç¡¬ç›˜çš„ä¿¡æ¯ï¼ŒåŒ…æ‹¬è¯·æ±‚é˜Ÿåˆ—ï¼Œåˆ†åŒºé“¾è¡¨å’Œå—è®¾å¤‡æ“ä½œå‡½æ•°é›†ç­‰ã€‚å—è®¾å¤‡é©±åŠ¨ç¨‹åºåˆ†é…ç»“æ„gendiskå®ä¾‹ï¼Œè£…è½½åˆ†åŒºè¡¨ï¼Œåˆ†é…è¯·æ±‚é˜Ÿåˆ—å¹¶å¡«å……ç»“æ„çš„å…¶ä»–åŸŸã€‚å…¶ç»“æ„ä½“å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-c&#34; data-lang=&#34;c&#34;&gt;&lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;gendisk&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;major&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;            &lt;span class=&#34;cm&#34;&gt;/* é©±åŠ¨ç¨‹åºçš„ä¸»è®¾å¤‡å· */&lt;/span&gt;
    &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;first_minor&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;       &lt;span class=&#34;cm&#34;&gt;/*ç¬¬ä¸€ä¸ªæ¬¡è®¾å¤‡å·*/&lt;/span&gt;
    &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;minors&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;          &lt;span class=&#34;cm&#34;&gt;/*æ¬¡è®¾å¤‡å·çš„æœ€å¤§æ•°é‡ï¼Œæ²¡æœ‰åˆ†åŒºçš„è®¾å¤‡ï¼Œæ­¤å€¼ä¸º1 */&lt;/span&gt;
    &lt;span class=&#34;kt&#34;&gt;char&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;disk_name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;32&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;];&lt;/span&gt;  &lt;span class=&#34;cm&#34;&gt;/* ä¸»è®¾å¤‡å·é©±åŠ¨ç¨‹åºçš„åå­—*/&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;hd_struct&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;**&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;part&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;   &lt;span class=&#34;cm&#34;&gt;/* åˆ†åŒºåˆ—è¡¨ï¼Œç”±æ¬¡è®¾å¤‡å·æ’åº */&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;block_device_operations&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;fops&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;  &lt;span class=&#34;cm&#34;&gt;/*å—è®¾å¤‡æ“ä½œå‡½æ•°é›†*/&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;request_queue&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;queue&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;         &lt;span class=&#34;cm&#34;&gt;/*è¯·æ±‚é˜Ÿåˆ—*/&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;blk_scsi_cmd_filter&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;cmd_filter&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
    &lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;private_data&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;                 &lt;span class=&#34;cm&#34;&gt;/*ç§æœ‰æ•°æ®*/&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;sector_t&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;capacity&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;     &lt;span class=&#34;cm&#34;&gt;/* å‡½æ•°set_capacityè®¾ç½®çš„å®¹é‡ï¼Œä»¥æ‰‡åŒºä¸ºå•ä½*/&lt;/span&gt;
    &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;flags&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;                 &lt;span class=&#34;cm&#34;&gt;/*è®¾ç½®é©±åŠ¨å™¨çŠ¶æ€çš„æ ‡å¿—ï¼Œå¦‚ï¼šå¯ç§»åŠ¨ä»‹è´¨ä¸º
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt;GENHD_FL_REMOVABLE*/&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;device&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;dev&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;                 &lt;span class=&#34;cm&#34;&gt;/*ä»è®¾å¤‡é©±åŠ¨æ¨¡å‹åŸºç±»ç»“æ„deviceç»§æ‰¿*/&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;kobject&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;holder_dir&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;kobject&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;slave_dir&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
 &lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;timer_rand_state&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;random&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
    &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;policy&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; 
    &lt;span class=&#34;n&#34;&gt;atomic_t&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;sync_io&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;        &lt;span class=&#34;cm&#34;&gt;/* RAID */&lt;/span&gt;
    &lt;span class=&#34;kt&#34;&gt;unsigned&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;long&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;stamp&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
    &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;in_flight&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;span class=&#34;cp&#34;&gt;#ifdef  CONFIG_SMP
&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;disk_stats&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;dkstats&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;  
&lt;span class=&#34;cp&#34;&gt;#else
&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt;/*ç¡¬ç›˜ç»Ÿè®¡ä¿¡æ¯ï¼Œå¦‚ï¼šè¯»æˆ–å†™çš„æ‰‡åŒºæ•°ã€èåˆçš„æ‰‡åŒºæ•°ã€åœ¨è¯·æ±‚é˜Ÿåˆ—çš„æ—¶é—´ç­‰*/&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;disk_stats&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;dkstats&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;span class=&#34;cp&#34;&gt;#endif
&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;work_struct&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;async_notify&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;span class=&#34;cp&#34;&gt;#ifdef  CONFIG_BLK_DEV_INTEGRITY
&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;blk_integrity&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;integrity&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;   &lt;span class=&#34;cm&#34;&gt;/*ç”¨äºæ•°æ®å®Œæ•´æ€§æ‰©å±•*/&lt;/span&gt;
&lt;span class=&#34;cp&#34;&gt;#endif
&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;};&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h5 id=&#34;å—è®¾å¤‡å„ä¸ªç»“æ„ä½“é—´çš„å…³ç³»&#34;&gt;å—è®¾å¤‡å„ä¸ªç»“æ„ä½“é—´çš„å…³ç³»&lt;/h5&gt;
&lt;p&gt;&lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 97; 
			flex-basis: 233px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/linux%E5%86%85%E6%A0%B8%E4%B8%AD%E8%AE%BE%E5%A4%87%E9%A9%B1%E5%8A%A8/3.png&#34; data-size=&#34;703x724&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/linux%E5%86%85%E6%A0%B8%E4%B8%AD%E8%AE%BE%E5%A4%87%E9%A9%B1%E5%8A%A8/3.png&#34;
			width=&#34;703&#34;
			height=&#34;724&#34;
			srcset=&#34;https://zcj-git520.github.io/p/linux%E5%86%85%E6%A0%B8%E4%B8%AD%E8%AE%BE%E5%A4%87%E9%A9%B1%E5%8A%A8/3_hu9fd0a86fa30ace59961f6dc242e22798_298431_480x0_resize_box_3.png 480w, https://zcj-git520.github.io/p/linux%E5%86%85%E6%A0%B8%E4%B8%AD%E8%AE%BE%E5%A4%87%E9%A9%B1%E5%8A%A8/3_hu9fd0a86fa30ace59961f6dc242e22798_298431_1024x0_resize_box_3.png 1024w&#34;
			loading=&#34;lazy&#34;
			alt=&#34;å›¾(3)&#34;&gt;
	&lt;/a&gt;
	
	&lt;figcaption&gt;å›¾(3)&lt;/figcaption&gt;
	
&lt;/figure&gt;&lt;/p&gt;
</description>
        </item>
        <item>
        <title>linux æ€§èƒ½ä¼˜åŒ–(äºŒ)</title>
        <link>https://zcj-git520.github.io/p/linux-%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%E4%BA%8C/</link>
        <pubDate>Tue, 15 Mar 2022 22:00:38 +0800</pubDate>
        
        <guid>https://zcj-git520.github.io/p/linux-%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%E4%BA%8C/</guid>
        <description>&lt;img src="https://zcj-git520.github.io/p/linux-%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%E4%BA%8C/3.png" alt="Featured image of post linux æ€§èƒ½ä¼˜åŒ–(äºŒ)" /&gt;&lt;h3 id=&#34;æ€§èƒ½&#34;&gt;æ€§èƒ½&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;é«˜å¹¶å‘å’Œå¿«å“åº”çš„æ€§èƒ½æŒ‡æ ‡æ˜¯æŒ‡ï¼šååå’Œå»¶æ—¶&lt;/li&gt;
&lt;li&gt;æ€§èƒ½çš„æœ¬è´¨ï¼šç³»ç»Ÿèµ„æºå·²ç»åˆ°è¾¾ç“¶é¢ˆæ—¶ï¼Œå¤„ç†è¯·æ±‚ä¸å¤Ÿå¿«ï¼Œä¸è¶³ä»¥å¤„ç†æ›´å¤šçš„è¯·æ±‚ã€‚&lt;/li&gt;
&lt;li&gt;æ€§èƒ½åˆ†æï¼šæ‰¾åˆ°ç³»ç»Ÿæˆ–è€…åº”ç”¨çš„ç“¶é¢ˆï¼Œå°½æœ€å¤§çš„å¯èƒ½é¿å…æˆ–è€…ç¼“è§£è¿™æ ·çš„ç“¶é¢ˆã€‚&lt;/li&gt;
&lt;li&gt;å¸¸ç”¨çš„æ€§èƒ½åˆ†æå·¥å…·ï¼š
&lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 142; 
			flex-basis: 342px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/linux-%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%E4%BA%8C/1.png&#34; data-size=&#34;1080x756&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/linux-%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%E4%BA%8C/1.png&#34;
			width=&#34;1080&#34;
			height=&#34;756&#34;
			srcset=&#34;https://zcj-git520.github.io/p/linux-%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%E4%BA%8C/1_hu928ad0f6362718a555aaab91886e0f15_324052_480x0_resize_box_3.png 480w, https://zcj-git520.github.io/p/linux-%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%E4%BA%8C/1_hu928ad0f6362718a555aaab91886e0f15_324052_1024x0_resize_box_3.png 1024w&#34;
			loading=&#34;lazy&#34;
			&gt;
	&lt;/a&gt;
	
&lt;/figure&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;cupä¸Šä¸‹æ–‡åˆ‡æ¢&#34;&gt;cupä¸Šä¸‹æ–‡åˆ‡æ¢&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;cupä¸Šä¸‹æ–‡åˆ‡æ¢ï¼šå°†ä¸Šä¸€ä¸ªä»»åŠ¡cupçš„ä¸Šä¸‹æ–‡ä¿å­˜ç³»ç»Ÿçš„å†…æ ¸ä¸­ä¼‘çœ ï¼Œç„¶åå°†æ–°ä»»åŠ¡çš„cupä¸Šä¸‹æ–‡è¿›è¡ŒåŠ è½½ï¼Œç„¶åæ‰§è¡Œè¿™ä¸ªæ–°ä»»åŠ¡ã€‚
cupçš„ä¸Šä¸‹æ–‡åˆ‡æ¢å¯åˆ†ä¸ºï¼šçº¿ç¨‹ä¸Šä¸‹æ–‡åˆ‡æ¢ã€è¿›ç¨‹ä¸Šä¸‹æ–‡åˆ‡æ¢å’Œä¸­æ–­ä¸Šä¸‹æ–‡åˆ‡æ¢ã€‚åœ¨å†…æ ¸ä¸­ä¸­æ–­çš„ç­‰çº§ä¸è¿›ç¨‹å’Œçº¿ç¨‹çš„ç­‰çº§é«˜ï¼Œæ‰€ä»¥ä¿è¯äº†ä¸­æ–­ä¸Šä¸‹æ–‡
åˆ‡æ¢ä¸è¿›ç¨‹å’Œçº¿ç¨‹ä¸Šä¸‹æ–‡åˆ‡æ¢ä¸åŒæ—¶å‘ç”Ÿã€‚&lt;/li&gt;
&lt;li&gt;é€šè¿‡vmstatå¯ä»¥æŸ¥çœ‹ç³»ç»Ÿæ€»ä½“çš„ä¸Šä¸‹æ–‡åˆ‡æ¢æƒ…å†µ
&lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 356; 
			flex-basis: 855px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/linux-%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%E4%BA%8C/2.png&#34; data-size=&#34;841x236&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/linux-%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%E4%BA%8C/2.png&#34;
			width=&#34;841&#34;
			height=&#34;236&#34;
			srcset=&#34;https://zcj-git520.github.io/p/linux-%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%E4%BA%8C/2_hufc75824d3fc6ef1d68067ee2fa21a4ce_90835_480x0_resize_box_3.png 480w, https://zcj-git520.github.io/p/linux-%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%E4%BA%8C/2_hufc75824d3fc6ef1d68067ee2fa21a4ce_90835_1024x0_resize_box_3.png 1024w&#34;
			loading=&#34;lazy&#34;
			&gt;
	&lt;/a&gt;
	
&lt;/figure&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;è¿›ç¨‹ä¸Šä¸‹åˆ‡æ¢&#34;&gt;è¿›ç¨‹ä¸Šä¸‹åˆ‡æ¢&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;linuxè¿›ç¨‹æŒ‰ç…§ç­‰çº§æƒé™å°†è¿›ç¨‹çš„è¿è¡Œç©ºé—´åˆ†ä¸ºå†…æ ¸ç©ºé—´å’Œç”¨æˆ·æ€ç©ºé—´ã€‚å…¶ä¸­ç”¨æˆ·æ€å‘å†…æ ¸æ€è½¬æ¢éœ€è¦è¿›è¡Œç³»ç»Ÿè°ƒç”¨ã€‚æ‰§è¡Œä¸€æ¬¡ç³»ç»Ÿè°ƒç”¨
éœ€è¦è¿›è¡Œä¸¤æ¬¡cpuçš„ä¸Šä¸‹æ–‡åˆ‡æ¢åˆ†åˆ«ä¸ºï¼š&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;blockquote&gt;
&lt;p&gt;CPUå¯„å­˜å™¨ä¸­ç”¨æˆ·æ€çš„æŒ‡ä»¤ä½ç½®å…ˆä¿å­˜èµ·æ¥ï¼ŒCPUå¯„å­˜å™¨æ›´æ–°ä¸ºå†…æ ¸æ€æŒ‡ä»¤çš„ä½ç½®ï¼Œè·³è½¬åˆ°å†…æ ¸æ€è¿è¡Œå†…æ ¸ä»»åŠ¡ï¼›&lt;br&gt;
ç³»ç»Ÿè°ƒç”¨ç»“æŸåï¼ŒCPUå¯„å­˜å™¨æ¢å¤åŸæ¥ä¿å­˜çš„ç”¨æˆ·æ€æ•°æ®ï¼Œå†åˆ‡æ¢åˆ°ç”¨æˆ·ç©ºé—´ç»§ç»­è¿è¡Œã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;è¿›ç¨‹æ˜¯ç”±å†…æ ¸ç®¡ç†å’Œè°ƒåº¦çš„ï¼Œè¿›ç¨‹ä¸Šä¸‹æ–‡åˆ‡æ¢åªèƒ½å‘ç”Ÿåœ¨å†…æ ¸æ€ã€‚å› æ­¤ç›¸æ¯”ç³»ç»Ÿè°ƒç”¨æ¥è¯´ï¼Œåœ¨ä¿å­˜å½“å‰è¿›ç¨‹çš„å†…æ ¸çŠ¶æ€å’ŒCPUå¯„å­˜å™¨ä¹‹å‰ï¼Œéœ€è¦å…ˆæŠŠè¯¥è¿›ç¨‹çš„è™šæ‹Ÿå†…å­˜ï¼Œæ ˆä¿å­˜ä¸‹æ¥ã€‚å†åŠ è½½æ–°è¿›ç¨‹çš„å†…æ ¸æ€åï¼Œè¿˜è¦åˆ·æ–°è¿›ç¨‹çš„è™šæ‹Ÿå†…å­˜å’Œç”¨æˆ·æ ˆã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;è¿›ç¨‹åªæœ‰åœ¨è°ƒåº¦åˆ°CPUä¸Šè¿è¡Œæ—¶æ‰éœ€è¦åˆ‡æ¢ä¸Šä¸‹æ–‡ï¼Œæœ‰ä»¥ä¸‹å‡ ç§åœºæ™¯ï¼šCPUæ—¶é—´ç‰‡è½®æµåˆ†é…ï¼Œç³»ç»Ÿèµ„æºä¸è¶³å¯¼è‡´è¿›ç¨‹æŒ‚èµ·ï¼Œè¿›ç¨‹é€šè¿‡sleepå‡½æ•°ä¸»åŠ¨æŒ‚èµ·ï¼Œé«˜ä¼˜å…ˆçº§è¿›ç¨‹æŠ¢å æ—¶é—´ç‰‡ï¼Œç¡¬ä»¶ä¸­æ–­æ—¶CPUä¸Šçš„è¿›ç¨‹è¢«æŒ‚èµ·è½¬è€Œæ‰§è¡Œå†…æ ¸ä¸­çš„ä¸­æ–­æœåŠ¡ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;çº¿ç¨‹ä¸Šä¸‹æ–‡åˆ‡æ¢&#34;&gt;çº¿ç¨‹ä¸Šä¸‹æ–‡åˆ‡æ¢&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;åœ¨åŒä¸€è¿›ç¨‹ä¸­çš„çº¿ç¨‹è¿›è¡Œä¸Šä¸‹æ–‡åˆ‡æ¢ï¼Œåˆ‡æ¢æ—¶ï¼Œåªéœ€è¦åˆ‡æ¢çº¿ç¨‹çš„ç§æœ‰æ•°æ®ã€å¯„å­˜å™¨ç­‰ï¼Œæ¶ˆè€—èµ„æºå°‘ã€‚&lt;/li&gt;
&lt;li&gt;åœ¨ä¸åŒè¿›ç¨‹çš„ä¸­çš„çº¿ç¨‹è¿›è¡Œä¸Šä¸‹æ–‡åˆ‡æ¢ï¼Œåˆ‡æ¢ä¸è¿›ç¨‹çš„ä¸Šä¸‹æ–‡åˆ‡æ¢ä¸€è‡´ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;ä¸­æ–­ä¸Šä¸‹æ–‡åˆ‡æ¢&#34;&gt;ä¸­æ–­ä¸Šä¸‹æ–‡åˆ‡æ¢&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;ä¸­æ–­ä¸Šä¸‹æ–‡åˆ‡æ¢åªåŒ…æ‹¬å†…æ ¸æ€ä¸­æ–­æœåŠ¡ç¨‹åºæ‰§è¡Œæ‰€éœ€è¦çš„çŠ¶æ€ï¼ˆCPUå¯„å­˜å™¨ï¼Œå†…æ ¸å †æ ˆï¼Œç¡¬ä»¶ä¸­æ–­å‚æ•°ç­‰ï¼‰ï¼ˆCPUå¯„å­˜å™¨ï¼Œå†…æ ¸å †æ ˆï¼Œç¡¬ä»¶ä¸­æ–­å‚æ•°ç­‰ï¼‰&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;å‚è€ƒæ–‡çŒ®&#34;&gt;å‚è€ƒæ–‡çŒ®ï¼š&lt;/h2&gt;
&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;https://mp.weixin.qq.com/s/6_utyj1kCyC5ZWpveDZQIQ&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;æé™å¥½æ–‡ï¼Linux æ€§èƒ½ä¼˜åŒ–å…¨æ™¯æŒ‡å—&lt;/a&gt;&lt;/p&gt;
</description>
        </item>
        <item>
        <title>linux æ€§èƒ½ä¼˜åŒ–(ä¸€)</title>
        <link>https://zcj-git520.github.io/p/linux-%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%E4%B8%80/</link>
        <pubDate>Sat, 05 Mar 2022 22:00:38 +0800</pubDate>
        
        <guid>https://zcj-git520.github.io/p/linux-%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%E4%B8%80/</guid>
        <description>&lt;img src="https://zcj-git520.github.io/p/linux-%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%E4%B8%80/3.png" alt="Featured image of post linux æ€§èƒ½ä¼˜åŒ–(ä¸€)" /&gt;&lt;h2 id=&#34;linuxå¸¸ç”¨çš„æ€§èƒ½æŸ¥çœ‹å‘½ä»¤&#34;&gt;Linuxå¸¸ç”¨çš„æ€§èƒ½æŸ¥çœ‹å‘½ä»¤&lt;/h2&gt;
&lt;h3 id=&#34;cpu&#34;&gt;CPU&lt;/h3&gt;
&lt;h4 id=&#34;cpuçš„æ€§èƒ½æŒ‡æ ‡&#34;&gt;CPUçš„æ€§èƒ½æŒ‡æ ‡&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;cupçš„ä½¿ç”¨ç‡åˆ†ä¸ºï¼š&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;ol&gt;
&lt;li&gt;ç”¨æˆ·CPUä½¿ç”¨ç‡ï¼Œä¸»è¦åŒ…æ‹¬ç”¨æˆ·æ€å’Œä½ä¼˜å…ˆçº§ç”¨æˆ·æ€ï¼Œååº”çš„æ˜¯åº”ç”¨ç¨‹åºçš„cpuçš„ä½¿ç”¨æƒ…å†µ&lt;/li&gt;
&lt;li&gt;ç³»ç»ŸCPUä½¿ç”¨ç‡ï¼Œcpuåœ¨å†…æ ¸æ€è¿è¡Œçš„æ—¶é—´ç™¾åˆ†æ¯”,ä¸åŒ…å«ä¸­æ–­ã€‚ååº”çš„æ˜¯å†…æ ¸çš„ä½¿ç”¨æƒ…å†µ&lt;/li&gt;
&lt;li&gt;ç­‰å¾…IOçš„CPUä½¿ç”¨ç‡ï¼Œååº”çš„æ˜¯ç³»ç»Ÿä¸ç¡¬ä»¶IOçš„äº¤äº’çš„æƒ…å†µ&lt;/li&gt;
&lt;li&gt;è½¯/ç¡¬ä¸­æ–­CPUçš„ä½¿ç”¨ç‡ï¼Œååº”çš„ä¸­æ–­çš„å‘ç”Ÿçš„æƒ…å†µ&lt;/li&gt;
&lt;li&gt;steal CPU / guest CPU, è¡¨ç¤ºè™šæ‹Ÿæœºå ç”¨çš„CPUç™¾åˆ†æ¯”.&lt;/li&gt;
&lt;/ol&gt;
&lt;/blockquote&gt;
&lt;ul&gt;
&lt;li&gt;åœ¨ç†æƒ³æƒ…å†µä¸‹ï¼Œå¹³å‡è´Ÿè½½ç­‰äºé€»è¾‘CPUä¸ªæ•°(å‡ æ ¸çš„CPU),è¡¨ç¤ºæ¯ä¸ªCUPéƒ½è¢«å……åˆ†ä½¿ç”¨ã€‚å¤§äºè¿™ä¸ªé€»è¾‘CPUä¸ªæ•°è¡¨ç¤ºè´Ÿè½½è¾ƒå¤§&lt;/li&gt;
&lt;li&gt;CUPç¼“å­˜ç‡æŒ‡çš„æ˜¯CPUç¼“å­˜çš„å¤ç”¨æƒ…å†µã€‚å‘½ä¸­ç‡è¶Šé«˜è¡¨ç¤ºæ€§èƒ½è¶Šå¥½ï¼Œå…¶ä¸­L1/L2å¸¸ç”¨åœ¨å•æ ¸,L3åˆ™ç”¨åœ¨å¤šæ ¸ä¸­&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;cpuçš„ä¼˜åŒ–&#34;&gt;CPUçš„ä¼˜åŒ–&lt;/h4&gt;
&lt;ol&gt;
&lt;li&gt;ç”¨æˆ·æ€çš„ä¼˜åŒ–ï¼Œå³åº”ç”¨ç¨‹åºçš„çš„ä¼˜åŒ–ï¼Œå°½å¯èƒ½çš„å‡å°‘cpuçš„ä¸Šä¸‹æ–‡çš„åˆ‡æ¢&lt;/li&gt;
&lt;li&gt;å†…æ ¸æ€çš„ä¼˜åŒ–ï¼Œå³å†…æ ¸çš„ä¼˜åŒ–ï¼Œå¯ä»¥CPUç»‘å®šï¼Œè°ƒæ•´æœ‰ä¼˜å…ˆçº§ï¼Œä¸­æ–­çš„è´Ÿè½½å‡è¡¡ç­‰&lt;/li&gt;
&lt;/ol&gt;
&lt;h4 id=&#34;æ€§èƒ½å·¥å…·&#34;&gt;æ€§èƒ½å·¥å…·&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;æ ¹æ®ä¸åŒçš„æ€§èƒ½æŒ‡æ ‡æ¥æ‰¾åˆé€‚çš„å·¥å…·&lt;br&gt;
&lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 73; 
			flex-basis: 176px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/linux-%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%E4%B8%80/12.png&#34; data-size=&#34;1080x1470&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/linux-%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%E4%B8%80/12.png&#34;
			width=&#34;1080&#34;
			height=&#34;1470&#34;
			srcset=&#34;https://zcj-git520.github.io/p/linux-%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%E4%B8%80/12_hu0c34dc19359d9daaa64de820de831cae_436117_480x0_resize_box_3.png 480w, https://zcj-git520.github.io/p/linux-%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%E4%B8%80/12_hu0c34dc19359d9daaa64de820de831cae_436117_1024x0_resize_box_3.png 1024w&#34;
			loading=&#34;lazy&#34;
			&gt;
	&lt;/a&gt;
	
&lt;/figure&gt;&lt;/li&gt;
&lt;li&gt;æ ¹æ®æŒ‡æ ‡æŸ¥æ‰¾
&lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 97; 
			flex-basis: 234px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/linux-%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%E4%B8%80/13.png&#34; data-size=&#34;1080x1106&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/linux-%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%E4%B8%80/13.png&#34;
			width=&#34;1080&#34;
			height=&#34;1106&#34;
			srcset=&#34;https://zcj-git520.github.io/p/linux-%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%E4%B8%80/13_huf28f4f3333d79e1e53607d4b6599bcfc_334243_480x0_resize_box_3.png 480w, https://zcj-git520.github.io/p/linux-%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%E4%B8%80/13_huf28f4f3333d79e1e53607d4b6599bcfc_334243_1024x0_resize_box_3.png 1024w&#34;
			loading=&#34;lazy&#34;
			&gt;
	&lt;/a&gt;
	
&lt;/figure&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;cpuæ€§èƒ½æŸ¥çœ‹&#34;&gt;CPUæ€§èƒ½æŸ¥çœ‹&lt;/h4&gt;
&lt;ol&gt;
&lt;li&gt;ä½¿ç”¨psæŸ¥çœ‹æ­£åœ¨è¿è¡Œçš„è¿›ç¨‹
&lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 168; 
			flex-basis: 404px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/linux-%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%E4%B8%80/1.png&#34; data-size=&#34;1164x690&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/linux-%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%E4%B8%80/1.png&#34;
			width=&#34;1164&#34;
			height=&#34;690&#34;
			srcset=&#34;https://zcj-git520.github.io/p/linux-%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%E4%B8%80/1_hud352ebb526399801a7382ecb45827a96_76217_480x0_resize_box_3.png 480w, https://zcj-git520.github.io/p/linux-%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%E4%B8%80/1_hud352ebb526399801a7382ecb45827a96_76217_1024x0_resize_box_3.png 1024w&#34;
			loading=&#34;lazy&#34;
			&gt;
	&lt;/a&gt;
	
&lt;/figure&gt;
&lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 120; 
			flex-basis: 289px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/linux-%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%E4%B8%80/2.png&#34; data-size=&#34;877x728&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/linux-%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%E4%B8%80/2.png&#34;
			width=&#34;877&#34;
			height=&#34;728&#34;
			srcset=&#34;https://zcj-git520.github.io/p/linux-%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%E4%B8%80/2_hu7711e5e375a95a94c8f76c64de13e2e0_134520_480x0_resize_box_3.png 480w, https://zcj-git520.github.io/p/linux-%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%E4%B8%80/2_hu7711e5e375a95a94c8f76c64de13e2e0_134520_1024x0_resize_box_3.png 1024w&#34;
			loading=&#34;lazy&#34;
			&gt;
	&lt;/a&gt;
	
&lt;/figure&gt;&lt;/li&gt;
&lt;li&gt;ä½¿ç”¨topæŸ¥çœ‹å„cupçš„ä½¿ç”¨æƒ…å†µã€å¯¹åº”å†…å­˜ä»¥åŠä¸ªè¿›ç¨‹å cpuå’Œä½¿ç”¨å†…å­˜çš„æƒ…å†µ
&lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 183; 
			flex-basis: 440px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/linux-%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%E4%B8%80/3.png&#34; data-size=&#34;1361x742&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/linux-%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%E4%B8%80/3.png&#34;
			width=&#34;1361&#34;
			height=&#34;742&#34;
			srcset=&#34;https://zcj-git520.github.io/p/linux-%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%E4%B8%80/3_hu66cf5664c43f449fa744670ec4319b24_173122_480x0_resize_box_3.png 480w, https://zcj-git520.github.io/p/linux-%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%E4%B8%80/3_hu66cf5664c43f449fa744670ec4319b24_173122_1024x0_resize_box_3.png 1024w&#34;
			loading=&#34;lazy&#34;
			&gt;
	&lt;/a&gt;
	
&lt;/figure&gt;&lt;/li&gt;
&lt;li&gt;vmstatå‘½ä»¤ï¼šæŸ¥çœ‹CPUè´Ÿè½½
&lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 805; 
			flex-basis: 1934px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/linux-%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%E4%B8%80/4.png&#34; data-size=&#34;822x102&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/linux-%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%E4%B8%80/4.png&#34;
			width=&#34;822&#34;
			height=&#34;102&#34;
			srcset=&#34;https://zcj-git520.github.io/p/linux-%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%E4%B8%80/4_hua29ecafa10b7c2e837fc83b1946d2863_18299_480x0_resize_box_3.png 480w, https://zcj-git520.github.io/p/linux-%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%E4%B8%80/4_hua29ecafa10b7c2e837fc83b1946d2863_18299_1024x0_resize_box_3.png 1024w&#34;
			loading=&#34;lazy&#34;
			&gt;
	&lt;/a&gt;
	
&lt;/figure&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;å†…å­˜ä½¿ç”¨æƒ…å†µæŸ¥çœ‹&#34;&gt;å†…å­˜ä½¿ç”¨æƒ…å†µæŸ¥çœ‹&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;é™¤äº†ä½¿ç”¨topå¯ä»¥æŸ¥çœ‹å†…å­˜ä½¿ç”¨æƒ…å†µå¤–ï¼Œè¿˜å¯ä»¥ä½¿ç”¨freeå‘½ä»¤è¿›è¡ŒæŸ¥çœ‹
&lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 585; 
			flex-basis: 1404px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/linux-%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%E4%B8%80/5.png&#34; data-size=&#34;749x128&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/linux-%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%E4%B8%80/5.png&#34;
			width=&#34;749&#34;
			height=&#34;128&#34;
			srcset=&#34;https://zcj-git520.github.io/p/linux-%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%E4%B8%80/5_hue05bab33803ae96086f1fcaba47a50e2_19352_480x0_resize_box_3.png 480w, https://zcj-git520.github.io/p/linux-%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%E4%B8%80/5_hue05bab33803ae96086f1fcaba47a50e2_19352_1024x0_resize_box_3.png 1024w&#34;
			loading=&#34;lazy&#34;
			&gt;
	&lt;/a&gt;
	
&lt;/figure&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;ç£ç›˜ioæ€§èƒ½æŸ¥çœ‹&#34;&gt;ç£ç›˜I/Oæ€§èƒ½æŸ¥çœ‹&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;å¯ä»¥ä½¿ç”¨df æˆ–è€… df -h æŸ¥çœ‹ç£ç›˜å ç”¨ç”¨æƒ…å†µ
&lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 158; 
			flex-basis: 381px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/linux-%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%E4%B8%80/6.png&#34; data-size=&#34;635x400&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/linux-%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%E4%B8%80/6.png&#34;
			width=&#34;635&#34;
			height=&#34;400&#34;
			srcset=&#34;https://zcj-git520.github.io/p/linux-%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%E4%B8%80/6_huf1d499cd45246d7290abe352fe9ff45a_89541_480x0_resize_box_3.png 480w, https://zcj-git520.github.io/p/linux-%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%E4%B8%80/6_huf1d499cd45246d7290abe352fe9ff45a_89541_1024x0_resize_box_3.png 1024w&#34;
			loading=&#34;lazy&#34;
			&gt;
	&lt;/a&gt;
	
&lt;/figure&gt;&lt;/li&gt;
&lt;li&gt;iostat -d è¿›è¡ŒæŸ¥çœ‹
&lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 292; 
			flex-basis: 703px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/linux-%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%E4%B8%80/7.png&#34; data-size=&#34;999x341&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/linux-%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%E4%B8%80/7.png&#34;
			width=&#34;999&#34;
			height=&#34;341&#34;
			srcset=&#34;https://zcj-git520.github.io/p/linux-%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%E4%B8%80/7_huf00b96b4cff54e7d4a8f4f1c2555ad35_56884_480x0_resize_box_3.png 480w, https://zcj-git520.github.io/p/linux-%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%E4%B8%80/7_huf00b96b4cff54e7d4a8f4f1c2555ad35_56884_1024x0_resize_box_3.png 1024w&#34;
			loading=&#34;lazy&#34;
			&gt;
	&lt;/a&gt;
	
&lt;/figure&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;æŸ¥çœ‹ç½‘ç»œæƒ…å†µ&#34;&gt;æŸ¥çœ‹ç½‘ç»œæƒ…å†µ&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;ä½¿ç”¨ifconfigæŸ¥çœ‹æˆ–è€…ä¿®æ”¹ç½‘ç»œ
&lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 221; 
			flex-basis: 532px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/linux-%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%E4%B8%80/8.png&#34; data-size=&#34;792x357&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/linux-%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%E4%B8%80/8.png&#34;
			width=&#34;792&#34;
			height=&#34;357&#34;
			srcset=&#34;https://zcj-git520.github.io/p/linux-%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%E4%B8%80/8_hu1f4ff6ae1758e7848c32cdaf96a01f88_76473_480x0_resize_box_3.png 480w, https://zcj-git520.github.io/p/linux-%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%E4%B8%80/8_hu1f4ff6ae1758e7848c32cdaf96a01f88_76473_1024x0_resize_box_3.png 1024w&#34;
			loading=&#34;lazy&#34;
			&gt;
	&lt;/a&gt;
	
&lt;/figure&gt;&lt;/li&gt;
&lt;li&gt;netstatå‘½ä»¤ï¼š-i æŸ¥çœ‹ç½‘ç»œæ¥å£ä¿¡æ¯ï¼Œ-r æ£€æµ‹ç³»ç»Ÿè·¯ç”±è¡¨ä¿¡æ¯
&lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 346; 
			flex-basis: 831px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/linux-%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%E4%B8%80/9.png&#34; data-size=&#34;825x238&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/linux-%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%E4%B8%80/9.png&#34;
			width=&#34;825&#34;
			height=&#34;238&#34;
			srcset=&#34;https://zcj-git520.github.io/p/linux-%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%E4%B8%80/9_hub74d6223efb06e0a0c47c9dce23fedf6_43319_480x0_resize_box_3.png 480w, https://zcj-git520.github.io/p/linux-%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%E4%B8%80/9_hub74d6223efb06e0a0c47c9dce23fedf6_43319_1024x0_resize_box_3.png 1024w&#34;
			loading=&#34;lazy&#34;
			&gt;
	&lt;/a&gt;
	
&lt;/figure&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;åŠ¨æ€ç›‘æ§æ€§èƒ½&#34;&gt;åŠ¨æ€ç›‘æ§æ€§èƒ½&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;ä½¿ç”¨watchå‘½ä»¤ï¼šåŠ¨æ€ç›‘æ§ï¼Œé»˜è®¤2ç§’é’Ÿæ‰§è¡Œä¸€æ¬¡ï¼Œæ‰§è¡Œç»“æœæ›´æ–°åœ¨å±å¹•ä¸Š
&lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 239; 
			flex-basis: 574px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/linux-%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%E4%B8%80/10.png&#34; data-size=&#34;1739x726&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/linux-%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%E4%B8%80/10.png&#34;
			width=&#34;1739&#34;
			height=&#34;726&#34;
			srcset=&#34;https://zcj-git520.github.io/p/linux-%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%E4%B8%80/10_hu0938913199fe6be4e994bcf9de02b974_102418_480x0_resize_box_3.png 480w, https://zcj-git520.github.io/p/linux-%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%E4%B8%80/10_hu0938913199fe6be4e994bcf9de02b974_102418_1024x0_resize_box_3.png 1024w&#34;
			loading=&#34;lazy&#34;
			&gt;
	&lt;/a&gt;
	
&lt;/figure&gt;
&lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 1281; 
			flex-basis: 3075px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/linux-%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%E4%B8%80/11.png&#34; data-size=&#34;1858x145&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/linux-%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%E4%B8%80/11.png&#34;
			width=&#34;1858&#34;
			height=&#34;145&#34;
			srcset=&#34;https://zcj-git520.github.io/p/linux-%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%E4%B8%80/11_hu15d41aba72496328c8648425813a5081_22674_480x0_resize_box_3.png 480w, https://zcj-git520.github.io/p/linux-%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%E4%B8%80/11_hu15d41aba72496328c8648425813a5081_22674_1024x0_resize_box_3.png 1024w&#34;
			loading=&#34;lazy&#34;
			&gt;
	&lt;/a&gt;
	
&lt;/figure&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
        </item>
        <item>
        <title>mysqlæ€§èƒ½è°ƒä¼˜-åˆ†åº“åˆ†è¡¨</title>
        <link>https://zcj-git520.github.io/p/mysql%E6%80%A7%E8%83%BD%E8%B0%83%E4%BC%98-%E5%88%86%E5%BA%93%E5%88%86%E8%A1%A8/</link>
        <pubDate>Tue, 01 Mar 2022 22:00:38 +0800</pubDate>
        
        <guid>https://zcj-git520.github.io/p/mysql%E6%80%A7%E8%83%BD%E8%B0%83%E4%BC%98-%E5%88%86%E5%BA%93%E5%88%86%E8%A1%A8/</guid>
        <description>&lt;img src="https://zcj-git520.github.io/p/mysql%E6%80%A7%E8%83%BD%E8%B0%83%E4%BC%98-%E5%88%86%E5%BA%93%E5%88%86%E8%A1%A8/3.png" alt="Featured image of post mysqlæ€§èƒ½è°ƒä¼˜-åˆ†åº“åˆ†è¡¨" /&gt;&lt;h2 id=&#34;æ•°æ®åˆ‡åˆ†&#34;&gt;æ•°æ®åˆ‡åˆ†&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;å½“æ•°æ®åº“ä¸­çš„æ•°æ®æˆ–è€…å•è¡¨æ•°æ®è¿‡å¤§æ—¶ï¼Œä¼šå½±å“å¯¹æ•°æ®åº“æŸ¥è¯¢ç­‰æ“ä½œçš„æ•ˆç‡ã€‚æ­¤æ—¶å¯ä»¥å‡è½»æ•°æ®åº“çš„è´Ÿæ‹…
å¯ä»¥å°†æ•°æ®åº“è¿›è¡Œæ‹†åˆ†ï¼Œå³åˆ†åº“åˆ†è¡¨ã€‚æ¥æé«˜æ•°æ®åº“çš„æ•ˆç‡ã€‚&lt;/li&gt;
&lt;li&gt;æ•°æ®åº“æœ‰ä¸¤ç§æ‹†åˆ†æ–¹å¼ï¼šæ°´å¹³åˆ‡åˆ†å’Œå‚ç›´åˆ‡åˆ†&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;å‚ç›´åˆ‡åˆ†&#34;&gt;å‚ç›´åˆ‡åˆ†&lt;/h2&gt;
&lt;h3 id=&#34;å‚ç›´åˆ†åº“&#34;&gt;å‚ç›´åˆ†åº“&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;å‚ç›´åˆ†åº“ï¼šæ ¹æ®ä¸šåŠ¡è§£è€¦ï¼Œä»¥è¡¨ä¸ºå•ä½ï¼Œå°†ç›¸åŒä¸šåŠ¡çš„è¡¨å­˜å‚¨åœ¨åŒä¸€æ•°æ®åº“ä¸­ã€‚å°†å¤§æ•°æ®åº“æ‹†åˆ†ä¸ºä¸åŒçš„å°æ•°æ®åº“ã€‚
å°æ•°æ®åº“çš„ç»“æ„å’Œå­˜å‚¨çš„æ•°æ®ä¸ä¸€æ ·ã€‚å°æ•°æ®åº“çš„å¹¶é›†ä¸ºå¤§æ•°æ®åº“ã€‚
&lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 145; 
			flex-basis: 348px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/mysql%E6%80%A7%E8%83%BD%E8%B0%83%E4%BC%98-%E5%88%86%E5%BA%93%E5%88%86%E8%A1%A8/1.png&#34; data-size=&#34;825x568&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/mysql%E6%80%A7%E8%83%BD%E8%B0%83%E4%BC%98-%E5%88%86%E5%BA%93%E5%88%86%E8%A1%A8/1.png&#34;
			width=&#34;825&#34;
			height=&#34;568&#34;
			srcset=&#34;https://zcj-git520.github.io/p/mysql%E6%80%A7%E8%83%BD%E8%B0%83%E4%BC%98-%E5%88%86%E5%BA%93%E5%88%86%E8%A1%A8/1_huc81ff6a1490027b3cba856c0fa33c5e4_209327_480x0_resize_box_3.png 480w, https://zcj-git520.github.io/p/mysql%E6%80%A7%E8%83%BD%E8%B0%83%E4%BC%98-%E5%88%86%E5%BA%93%E5%88%86%E8%A1%A8/1_huc81ff6a1490027b3cba856c0fa33c5e4_209327_1024x0_resize_box_3.png 1024w&#34;
			loading=&#34;lazy&#34;
			&gt;
	&lt;/a&gt;
	
&lt;/figure&gt;&lt;/li&gt;
&lt;li&gt;ä½¿ç”¨åœºæ™¯é«˜å¹¶å‘æ—¶ï¼Œå°†æ•°æ®åˆ†ç±»åˆ°ä¸åŒæ•°æ®åº“ä¸­ï¼Œæå‡æ•°æ®åº“çš„æŸ¥è¯¢æ•ˆç‡&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;å‚ç›´åˆ†è¡¨&#34;&gt;å‚ç›´åˆ†è¡¨&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;å‚ç›´åˆ†è¡¨ï¼šæ˜¯ä»¥å­—æ®µä¸ºå•ä½ï¼Œå°†è¡¨ä¸­çš„ä¸å¸¸ç”¨çš„å­—æ®µå’Œå­—æ®µåè¾ƒé•¿çš„å­—æ®µæ‹†åˆ†åˆ°æ‰©å±•è¡¨ä¸­ï¼Œå…¶ä½™æ”¾å…¥åˆ°ä¸»è¡¨ä¸­ã€‚ä¹Ÿå¯ä»¥ç»çƒ­æ•°æ®æ”¾å…¥ä¸»è¡¨ï¼Œå†·
æ•°æ®æ”¾å…¥æ‹“å±•è¡¨ã€‚ä¸»è¡¨å’Œæ‹“å±•è¡¨çš„æ•°æ®ç»“æ„å’Œå­˜å‚¨çš„æ•°æ®æ˜¯ä¸ä¸€æ ·ã€‚å°†è¡¨ä¸­çš„è¿›è¡Œå†·çƒ­æ•°æ®çš„æ‹†åˆ†ï¼Œå‡å°‘äº†å¯¹ç£ç›˜ioçš„æ“ä½œï¼Œæå‡æ•°æ®åº“çš„æ•ˆç‡
&lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 192; 
			flex-basis: 463px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/mysql%E6%80%A7%E8%83%BD%E8%B0%83%E4%BC%98-%E5%88%86%E5%BA%93%E5%88%86%E8%A1%A8/2.png&#34; data-size=&#34;826x428&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/mysql%E6%80%A7%E8%83%BD%E8%B0%83%E4%BC%98-%E5%88%86%E5%BA%93%E5%88%86%E8%A1%A8/2.png&#34;
			width=&#34;826&#34;
			height=&#34;428&#34;
			srcset=&#34;https://zcj-git520.github.io/p/mysql%E6%80%A7%E8%83%BD%E8%B0%83%E4%BC%98-%E5%88%86%E5%BA%93%E5%88%86%E8%A1%A8/2_hub0013f0b591b75a5db27099043fb4213_107563_480x0_resize_box_3.png 480w, https://zcj-git520.github.io/p/mysql%E6%80%A7%E8%83%BD%E8%B0%83%E4%BC%98-%E5%88%86%E5%BA%93%E5%88%86%E8%A1%A8/2_hub0013f0b591b75a5db27099043fb4213_107563_1024x0_resize_box_3.png 1024w&#34;
			loading=&#34;lazy&#34;
			&gt;
	&lt;/a&gt;
	
&lt;/figure&gt;&lt;/li&gt;
&lt;li&gt;ä½¿ç”¨åœºæ™¯ï¼šè¡¨çš„è®°å½•å¹¶ä¸å¤šï¼Œä½†æ˜¯å­—æ®µå¤šï¼Œå¹¶ä¸”çƒ­ç‚¹æ•°æ®å’Œéçƒ­ç‚¹æ•°æ®åœ¨ä¸€èµ·ï¼Œå•è¡Œæ•°æ®æ‰€éœ€çš„å­˜å‚¨ç©ºé—´è¾ƒå¤§ã€‚ä»¥è‡³äºæ•°æ®åº“ç¼“å­˜çš„æ•°æ®è¡Œå‡å°‘ï¼ŒæŸ¥è¯¢æ—¶ä¼šå»è¯»ç£ç›˜æ•°æ®äº§ç”Ÿå¤§é‡çš„éšæœºè¯»IOï¼Œäº§ç”ŸIOç“¶é¢ˆ&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;ä¼˜ç¼ºç‚¹&#34;&gt;ä¼˜ç¼ºç‚¹&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;ä¼˜ç‚¹ï¼šä¸šåŠ¡è§£è€¦åˆï¼Œæ–¹ä¾¿å¯¹ä¸åŒä¸šåŠ¡è¿›è¡Œç®¡ç†ï¼Œæå‡æ•°æ®åº“çš„æ•ˆç‡&lt;/li&gt;
&lt;li&gt;ç¼ºç‚¹ï¼šéƒ¨åˆ†è¡¨ä¸èƒ½join,è¡¨ä¸­çš„çƒ­æ•°æ®å¤ªå¤š&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;æ°´å¹³åˆ‡åˆ†&#34;&gt;æ°´å¹³åˆ‡åˆ†&lt;/h2&gt;
&lt;h3 id=&#34;æ°´å¹³åˆ†åº“å’Œåˆ†è¡¨&#34;&gt;æ°´å¹³åˆ†åº“å’Œåˆ†è¡¨&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;éƒ½æ˜¯ä»¥å­—æ®µä¸ºå•ä½ï¼Œé€šè¿‡å“ˆå¸Œå’Œéšæœºç­‰ç­–ç•¥ï¼Œå°†æ•°æ®åˆ†åˆ°ä¸åŒçš„å­åº“æˆ–è€…å­è¡¨ä¸­ã€‚
æ‰€æœ‰çš„å­åº“å’Œå­è¡¨çš„æ•°æ®ç»“æ„ä¸€æ ·å’Œæ•°æ®ä¸ä¸€è‡´ï¼Œå³æ‰€æœ‰å­åº“çš„æ•°æ®ç­‰äºæ•°æ®åº“ä¸­çš„æ•°æ®ã€‚å½¢æˆåˆ†å¸ƒå¼çš„æ•ˆæœã€‚
&lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 85; 
			flex-basis: 205px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/mysql%E6%80%A7%E8%83%BD%E8%B0%83%E4%BC%98-%E5%88%86%E5%BA%93%E5%88%86%E8%A1%A8/3.png&#34; data-size=&#34;602x703&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/mysql%E6%80%A7%E8%83%BD%E8%B0%83%E4%BC%98-%E5%88%86%E5%BA%93%E5%88%86%E8%A1%A8/3.png&#34;
			width=&#34;602&#34;
			height=&#34;703&#34;
			srcset=&#34;https://zcj-git520.github.io/p/mysql%E6%80%A7%E8%83%BD%E8%B0%83%E4%BC%98-%E5%88%86%E5%BA%93%E5%88%86%E8%A1%A8/3_hu5261706da37be2572fd4622db307b63b_273707_480x0_resize_box_3.png 480w, https://zcj-git520.github.io/p/mysql%E6%80%A7%E8%83%BD%E8%B0%83%E4%BC%98-%E5%88%86%E5%BA%93%E5%88%86%E8%A1%A8/3_hu5261706da37be2572fd4622db307b63b_273707_1024x0_resize_box_3.png 1024w&#34;
			loading=&#34;lazy&#34;
			&gt;
	&lt;/a&gt;
	
&lt;/figure&gt;&lt;/li&gt;
&lt;li&gt;ä½¿ç”¨åœºæ™¯ï¼šæ•°æ®é‡è¡Œæ•°å·¨å¤§ï¼Œå­˜åœ¨å•åº“è¯»å†™ã€å­˜å‚¨æ€§èƒ½ç“¶é¢ˆï¼Œæ•°æ®é‡å¤ªå¤šï¼Œå½±å“äº†SQLæ•ˆç‡ï¼ŒåŠ é‡äº†CPUè´Ÿæ‹…ï¼Œä»¥è‡³äºæˆä¸ºç“¶é¢ˆã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;ä¼˜ç¼ºç‚¹-1&#34;&gt;ä¼˜ç¼ºç‚¹&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;ä¼˜ç‚¹ï¼šæå‡ç³»ç»Ÿç¨³å®šæ€§å’Œè´Ÿè½½èƒ½åŠ›&lt;/li&gt;
&lt;li&gt;ç¼ºç‚¹ï¼šäº‹åŠ¡ä¸€è‡´æ€§éš¾ä»¥ä¿è¯&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;æ•°æ®åº“çš„ç“¶é¢ˆ&#34;&gt;æ•°æ®åº“çš„ç“¶é¢ˆ&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;æ•°æ®åº“çš„ç“¶é¢ˆå¯åˆ†ä¸ºï¼šioç“¶é¢ˆå’Œcpuç“¶é¢ˆ&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;ioç“¶é¢ˆ&#34;&gt;ioç“¶é¢ˆ&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;ç£ç›˜è¯»å†™ioç“¶é¢ˆï¼šå½“çƒ­æ•°æ®è¿‡å¤šæ—¶ï¼Œæ•°æ®åº“å†…å­˜(buffer Pool)ä¿å­˜ä¸ä¸‹æ—¶ï¼Œä¼šäº§ç”Ÿå¤§é‡çš„ioã€‚æ­¤æ—¶å°±éœ€è¦è¿›è¡Œåˆ†åº“å’Œå‚ç›´åˆ†è¡¨ã€‚&lt;/li&gt;
&lt;li&gt;ç½‘ç»œioç“¶é¢ˆï¼šè¯·æ±‚çš„æ•°æ®å¤ªå¤šï¼Œç½‘ç»œå¸¦å®½ä¸å¤Ÿï¼Œæ­¤æ—¶å°±éœ€è¦åˆ†åº“ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;cpuç“¶é¢ˆ&#34;&gt;CPUç“¶é¢ˆ&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;sqlä¸­ä½¿ç”¨äº†å¤§é‡çš„cpuè¿ç®—çš„æ“ä½œã€‚æ­¤æ—¶éœ€è¦ä¼˜åŒ–sql,å¦‚å¢åŠ ç´¢å¼•&lt;/li&gt;
&lt;li&gt;å•è¡¨æ•°æ®é‡å¤§æ—¶ï¼Œä¸”è¿›è¡Œå…¨è¡¨æ‰«æï¼ŒæŸ¥è¯¢æ•ˆç‡ä½æ—¶ï¼Œéœ€è¦æ°´å¹³åˆ†è¡¨åˆ†åº“ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;heading&#34;&gt;&lt;/h3&gt;
&lt;h2 id=&#34;å‚è€ƒæ–‡çŒ®&#34;&gt;å‚è€ƒæ–‡çŒ®ï¼š&lt;/h2&gt;
&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;https://zhuanlan.zhihu.com/p/104992837&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;æ•°æ®åº“åˆ†åº“åˆ†è¡¨æ€è·¯&lt;/a&gt;&lt;/p&gt;
</description>
        </item>
        <item>
        <title>mysqläº‹åŠ¡å®ç°åŸºæœ¬åŸç†</title>
        <link>https://zcj-git520.github.io/p/mysql%E4%BA%8B%E5%8A%A1%E5%AE%9E%E7%8E%B0%E5%9F%BA%E6%9C%AC%E5%8E%9F%E7%90%86/</link>
        <pubDate>Fri, 25 Feb 2022 22:00:38 +0800</pubDate>
        
        <guid>https://zcj-git520.github.io/p/mysql%E4%BA%8B%E5%8A%A1%E5%AE%9E%E7%8E%B0%E5%9F%BA%E6%9C%AC%E5%8E%9F%E7%90%86/</guid>
        <description>&lt;img src="https://zcj-git520.github.io/p/mysql%E4%BA%8B%E5%8A%A1%E5%AE%9E%E7%8E%B0%E5%9F%BA%E6%9C%AC%E5%8E%9F%E7%90%86/1.png" alt="Featured image of post mysqläº‹åŠ¡å®ç°åŸºæœ¬åŸç†" /&gt;&lt;h2 id=&#34;äº‹åŠ¡&#34;&gt;äº‹åŠ¡&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;äº‹åŠ¡å°±æ˜¯ä¸€ç»„åŸå­æ€§çš„SQLè¯­å¥.&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;buffer-pool&#34;&gt;buffer Pool&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;å½“å¯åŠ¨mysqlä¼šå¼€å¯é»˜è®¤ä¸º128Mçš„å†…å­˜ç©ºé—´æ¥ä¿å­˜ä»ç£ç›˜è·å–çš„é¡µçš„æ•°æ®åˆ°è¿™å—å†…å­˜ç©ºé—´ã€‚
&lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 103; 
			flex-basis: 247px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/mysql%E4%BA%8B%E5%8A%A1%E5%AE%9E%E7%8E%B0%E5%9F%BA%E6%9C%AC%E5%8E%9F%E7%90%86/4.png&#34; data-size=&#34;676x656&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/mysql%E4%BA%8B%E5%8A%A1%E5%AE%9E%E7%8E%B0%E5%9F%BA%E6%9C%AC%E5%8E%9F%E7%90%86/4.png&#34;
			width=&#34;676&#34;
			height=&#34;656&#34;
			srcset=&#34;https://zcj-git520.github.io/p/mysql%E4%BA%8B%E5%8A%A1%E5%AE%9E%E7%8E%B0%E5%9F%BA%E6%9C%AC%E5%8E%9F%E7%90%86/4_huf2f92c82b6d4783456b3162dabdbebb8_71871_480x0_resize_box_3.png 480w, https://zcj-git520.github.io/p/mysql%E4%BA%8B%E5%8A%A1%E5%AE%9E%E7%8E%B0%E5%9F%BA%E6%9C%AC%E5%8E%9F%E7%90%86/4_huf2f92c82b6d4783456b3162dabdbebb8_71871_1024x0_resize_box_3.png 1024w&#34;
			loading=&#34;lazy&#34;
			&gt;
	&lt;/a&gt;
	
&lt;/figure&gt;&lt;/li&gt;
&lt;li&gt;InnoDBé€šè¿‡freeé“¾è¡¨æ¥ç®¡ç†buffer Poolä¸­çš„ç©ºé—²é¡µï¼Œé€šè¿‡æ§åˆ¶å—æ¥æŒ‡å‘ç©ºç™½é¡µ.å³ä»ç£ç›˜ä¸­çš„è·å–çš„é¡µæ•°æ®é€šè¿‡
æ§åˆ¶å—æ”¾å…¥åˆ°buffer Poolä¸­å¯¹åº”çš„ç©ºé—²é¡µä¸­ã€‚&lt;/li&gt;
&lt;li&gt;é€šè¿‡flushé“¾è¡¨æ¥ç®¡ç†buffer Pollä¸­çš„è„é¡µ(é€šè¿‡äº‹åŠ¡ä¿®æ”¹è¿‡çš„é¡µ)ã€‚é€šè¿‡é“¾è¡¨ä¸­æ§åˆ¶å—æŒ‡å‘è„é¡µã€‚&lt;/li&gt;
&lt;li&gt;é€šè¿‡lrué“¾è¡¨æ¥å¯¹Buffer Poolä¸­çš„é¡µè¿›è¡Œæ·˜æ±°ã€‚é€šè¿‡å¤´æ’æ³•å°†æœ€æ–°çš„é¡µæ’å…¥åˆ°é“¾è¡¨ä¸­çš„æ§åˆ¶å—ã€‚å½“buffer Poolä¸­çš„é¡µæ»¡åï¼Œåˆ é™¤é“¾è¡¨æœ€åçš„æ§åˆ¶å—ã€‚
ä¹Ÿå­˜åœ¨å½“å…¨è¡¨æ‰«ææ—¶ï¼Œä¹Ÿé€ æˆæ•°æ®çš„è¦†ç›–ï¼Œæ€§èƒ½ä¸‹é™ã€‚å› æ­¤é“¾è¡¨è¢«åˆ’åˆ†ä¸ºçƒ­æ•°æ®åŒºåŸŸ(5/8)å’Œå†·æ•°æ®åŒºåŸŸ(3/8)ã€‚å½“ä¸¤æ¬¡è®¿é—®é¡µçš„æ—¶é—´å¤§äº1ç§’æ—¶ï¼ŒæŠŠé¡µæ”¾å…¥åˆ°çƒ­æ•°æ®çš„æ§åˆ¶å—
ï¼Œå¦åˆ™å°±æ”¾å…¥å†·æ•°æ®é¡µï¼Œé¿å…äº†å…¨è¡¨æ‰«æé€ æˆçƒ­æ•°æ®è¢«è¦†ç›–ã€‚ç”Ÿæˆredo logåï¼Œmysqlé€šè¿‡åå°è¿›ç¨‹ç»å°†è„é¡µæŒä¹…åŒ–åˆ°ç£ç›˜ã€‚å½“MySQLæŒ‚äº†ä¹‹åï¼Œ
ä¼šé€šè¿‡redo logæ¢å¤æ•°æ®ã€‚
&lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 209; 
			flex-basis: 503px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/mysql%E4%BA%8B%E5%8A%A1%E5%AE%9E%E7%8E%B0%E5%9F%BA%E6%9C%AC%E5%8E%9F%E7%90%86/2.png&#34; data-size=&#34;1346x641&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/mysql%E4%BA%8B%E5%8A%A1%E5%AE%9E%E7%8E%B0%E5%9F%BA%E6%9C%AC%E5%8E%9F%E7%90%86/2.png&#34;
			width=&#34;1346&#34;
			height=&#34;641&#34;
			srcset=&#34;https://zcj-git520.github.io/p/mysql%E4%BA%8B%E5%8A%A1%E5%AE%9E%E7%8E%B0%E5%9F%BA%E6%9C%AC%E5%8E%9F%E7%90%86/2_hu56fb40fab0e4369feae4525e597efaf7_183232_480x0_resize_box_3.png 480w, https://zcj-git520.github.io/p/mysql%E4%BA%8B%E5%8A%A1%E5%AE%9E%E7%8E%B0%E5%9F%BA%E6%9C%AC%E5%8E%9F%E7%90%86/2_hu56fb40fab0e4369feae4525e597efaf7_183232_1024x0_resize_box_3.png 1024w&#34;
			loading=&#34;lazy&#34;
			&gt;
	&lt;/a&gt;
	
&lt;/figure&gt;
&lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 311; 
			flex-basis: 747px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/mysql%E4%BA%8B%E5%8A%A1%E5%AE%9E%E7%8E%B0%E5%9F%BA%E6%9C%AC%E5%8E%9F%E7%90%86/3.png&#34; data-size=&#34;1264x406&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/mysql%E4%BA%8B%E5%8A%A1%E5%AE%9E%E7%8E%B0%E5%9F%BA%E6%9C%AC%E5%8E%9F%E7%90%86/3.png&#34;
			width=&#34;1264&#34;
			height=&#34;406&#34;
			srcset=&#34;https://zcj-git520.github.io/p/mysql%E4%BA%8B%E5%8A%A1%E5%AE%9E%E7%8E%B0%E5%9F%BA%E6%9C%AC%E5%8E%9F%E7%90%86/3_hua668fce7a2f5bc44213ed5e50e023fb3_144803_480x0_resize_box_3.png 480w, https://zcj-git520.github.io/p/mysql%E4%BA%8B%E5%8A%A1%E5%AE%9E%E7%8E%B0%E5%9F%BA%E6%9C%AC%E5%8E%9F%E7%90%86/3_hua668fce7a2f5bc44213ed5e50e023fb3_144803_1024x0_resize_box_3.png 1024w&#34;
			loading=&#34;lazy&#34;
			&gt;
	&lt;/a&gt;
	
&lt;/figure&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;äº‹åŠ¡å…·æœ‰çš„acidçš„ç‰¹æ€§&#34;&gt;äº‹åŠ¡å…·æœ‰çš„ACIDçš„ç‰¹æ€§&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;åŸå­æ€§:äº‹åŠ¡ä¸­æ‰€æœ‰çš„æ“ä½œé‚£ä¹ˆå…¨éƒ¨æäº¤æˆåŠŸï¼Œè¦ä¹ˆå…¨éƒ¨å¤±è´¥å›æ»š&lt;/li&gt;
&lt;li&gt;ä¸€è‡´æ€§ï¼šæ•°æ®åº“æ€»æ˜¯ä»ä¸€ä¸ªä¸€è‡´æ€§çŠ¶æ€è½¬æ¢åˆ°å¦ä¸€ä¸ªä¸€è‡´æ€§çš„çŠ¶æ€&lt;/li&gt;
&lt;li&gt;éš”ç¦»æ€§ï¼šä¸€ä¸ªäº‹åŠ¡åœ¨æ‰€åšä¿®æ”¹åœ¨æäº¤å‰å¯¹å…¶ä»–äº‹åŠ¡æ˜¯ä¸å¯è§çš„&lt;/li&gt;
&lt;li&gt;æŒä¹…æ€§ï¼šä¸€æ—¦äº‹åŠ¡æäº¤ï¼Œè¯´æœ‰çš„ä¿®æ”¹éƒ½ä¼šæ°¸ä¹…ä¿å­˜åœ¨æ•°æ®åº“ä¸­&lt;/li&gt;
&lt;/ol&gt;
&lt;h4 id=&#34;äº‹åŠ¡çš„éš”ç¦»çº§åˆ«&#34;&gt;äº‹åŠ¡çš„éš”ç¦»çº§åˆ«&lt;/h4&gt;
&lt;ol&gt;
&lt;li&gt;è¯»æœªæäº¤ï¼šäº‹åŠ¡ä¸­çš„ä¿®æ”¹å³ä½¿æœªæäº¤ä¹Ÿæ˜¯å¯¹å…¶ä»–äº‹åŠ¡å¯è§ï¼Œè¿™çº§åˆ«çš„äº‹åŠ¡éš”ç¦»æœ‰è„è¯»ã€é‡å¤è¯»ã€å¹»è¯»çš„é—®é¢˜ã€‚&lt;/li&gt;
&lt;li&gt;è¯»ä¹Ÿæäº¤ï¼šäº‹åŠ¡æäº¤åæ‰€åšçš„ä¿®æ”¹æ‰ä¼šè¢«å¦ä¸€ä¸ªäº‹åŠ¡æ‰€çœ‹è§ï¼Œå¯èƒ½äº§ç”Ÿä¸€ä¸ªäº‹åŠ¡ä¸­ä¸¤æ¬¡æŸ¥è¯¢çš„ç»“æœä¸åŒã€‚&lt;/li&gt;
&lt;li&gt;å¯é‡å¤è¯»ï¼š åªæœ‰å½“å‰äº‹åŠ¡æäº¤æ‰èƒ½çœ‹è§å¦ä¸€ä¸ªäº‹åŠ¡çš„ä¿®æ”¹ç»“æœã€‚è§£å†³äº†ä¸€ä¸ªäº‹åŠ¡ä¸­ä¸¤æ¬¡æŸ¥è¯¢çš„ç»“æœä¸åŒçš„é—®é¢˜ã€‚&lt;/li&gt;
&lt;li&gt;å¯ä¸²è¡ŒåŒ–ï¼šåªæœ‰ä¸€ä¸ªäº‹åŠ¡æäº¤ä¹‹åæ‰ä¼šæ‰§è¡Œå¦ä¸€ä¸ªäº‹åŠ¡ã€‚
&lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 256; 
			flex-basis: 614px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/mysql%E4%BA%8B%E5%8A%A1%E5%AE%9E%E7%8E%B0%E5%9F%BA%E6%9C%AC%E5%8E%9F%E7%90%86/1.png&#34; data-size=&#34;930x363&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/mysql%E4%BA%8B%E5%8A%A1%E5%AE%9E%E7%8E%B0%E5%9F%BA%E6%9C%AC%E5%8E%9F%E7%90%86/1.png&#34;
			width=&#34;930&#34;
			height=&#34;363&#34;
			srcset=&#34;https://zcj-git520.github.io/p/mysql%E4%BA%8B%E5%8A%A1%E5%AE%9E%E7%8E%B0%E5%9F%BA%E6%9C%AC%E5%8E%9F%E7%90%86/1_hub1d649ce0ea89887083315ebed128a77_18394_480x0_resize_box_3.png 480w, https://zcj-git520.github.io/p/mysql%E4%BA%8B%E5%8A%A1%E5%AE%9E%E7%8E%B0%E5%9F%BA%E6%9C%AC%E5%8E%9F%E7%90%86/1_hub1d649ce0ea89887083315ebed128a77_18394_1024x0_resize_box_3.png 1024w&#34;
			loading=&#34;lazy&#34;
			&gt;
	&lt;/a&gt;
	
&lt;/figure&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;h4 id=&#34;æ­»é”&#34;&gt;æ­»é”&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;æ­»é”ï¼šä¸¤ä¸ªæˆ–å¤šä¸ªäº‹åŠ¡åœ¨åŒä¸€èµ„æºä¸Šç›¸äº’å ç”¨å¹¶è¯·æ±‚é”å®šå¯¹æ–¹å ç”¨çš„èµ„æºï¼Œä»è€Œå¯¼è‡´æ¶æ€§å¾ªç¯çš„ç°è±¡ã€‚MySQLçš„éƒ¨åˆ†å­˜å‚¨å¼•æ“èƒ½å¤Ÿæ£€æµ‹åˆ°æ­»é”çš„å¾ªç¯ä¾èµ–å¹¶äº§ç”Ÿç›¸åº”çš„é”™è¯¯ã€‚InnoDBå¼•æ“è§£å†³æ­»é”çš„æ–¹æ¡ˆæ˜¯å°†æŒæœ‰æœ€å°‘æ’å®ƒé”çš„äº‹åŠ¡è¿›è¡Œå›æ»š&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;mvccåŸç†&#34;&gt;MVCCåŸç†&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;mvcc å¤šç‰ˆæœ¬å¹¶å‘æ§åˆ¶ï¼šæŒ‡åœ¨è¯»å–æ•°æ®æ—¶é€šè¿‡ä¸€ç§ç±»ä¼¼å¿«ç…§çš„æ–¹å¼å°†æ•°æ®ä¿å­˜ä¸‹æ¥ï¼Œè¿™æ ·è¯»é”å’Œå†™é”ä¸å†²çªã€‚æ˜¯ innodb å®ç°äº‹åŠ¡å¹¶å‘ä¸å›æ»šçš„é‡è¦åŠŸèƒ½ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;ç‰ˆæœ¬é“¾&#34;&gt;ç‰ˆæœ¬é“¾&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;æ¯æ¬¡æ›´æ–°åï¼Œéƒ½ä¼šå°†æ—§å€¼æ”¾åˆ°ä¸€æ¡ undo log ä¸­ï¼Œå°±ç®—æ˜¯è¯¥è®°å½•çš„ä¸€ä¸ªæ—§ç‰ˆæœ¬ï¼Œéšç€æ›´æ–°æ¬¡æ•°çš„å¢å¤šï¼Œæ‰€æœ‰çš„ç‰ˆæœ¬éƒ½ä¼šè¢«roll_ptr å±æ€§è¿æ¥æˆä¸€ä¸ªé“¾è¡¨ï¼Œæˆ‘ä»¬æŠŠè¿™ä¸ªé“¾è¡¨ç§°ä¹‹ä¸ºç‰ˆæœ¬é“¾ï¼Œç‰ˆæœ¬é“¾çš„å¤´èŠ‚ç‚¹å°±æ˜¯å½“å‰è®°å½•æœ€æ–°çš„å€¼&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;trx_idï¼šæ¯æ¬¡ä¸€ä¸ªäº‹åŠ¡å¯¹æŸæ¡èšç°‡ç´¢å¼•è®°å½•è¿›è¡Œæ”¹åŠ¨æ—¶ï¼Œéƒ½ä¼šæŠŠè¯¥äº‹åŠ¡çš„äº‹åŠ¡idèµ‹å€¼ç»™trx_idéšè—åˆ—ã€‚
roll_pointerï¼šæ¯æ¬¡å¯¹æŸæ¡èšç°‡ç´¢å¼•è®°å½•è¿›è¡Œæ”¹åŠ¨æ—¶ï¼Œéƒ½ä¼šæŠŠæ—§çš„ç‰ˆæœ¬å†™å…¥åˆ°undoæ—¥å¿—ä¸­ï¼Œç„¶åè¿™ä¸ªéšè—åˆ—å°±ç›¸å½“äºä¸€ä¸ªæŒ‡é’ˆï¼Œå¯ä»¥é€šè¿‡å®ƒæ¥æ‰¾åˆ°è¯¥è®°å½•ä¿®æ”¹å‰çš„ä¿¡æ¯ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h4 id=&#34;readview&#34;&gt;ReadView&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;InnoDBæå‡ºäº†ä¸€ä¸ªReadViewçš„æ¦‚å¿µï¼Œè¿™ä¸ªReadView ä¸­æœ‰ä¸ª id åˆ—è¡¨ trx_ids æ¥å­˜å‚¨ç³»ç»Ÿä¸­å½“å‰æ´»è·ƒç€çš„è¯»å†™äº‹åŠ¡ï¼Œä¹Ÿå°±æ˜¯ begin äº†è¿˜æœª commit æˆ– rollback çš„äº‹åŠ¡&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;å‚è€ƒæ–‡çŒ®&#34;&gt;å‚è€ƒæ–‡çŒ®ï¼š&lt;/h2&gt;
&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;https://www.linuxidc.com/Linux/2014-04/99721.htm&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;MySQLè¿è¡ŒåŸç†ä¸åŸºç¡€æ¶æ„&lt;/a&gt;&lt;/p&gt;
</description>
        </item>
        <item>
        <title>mysqlåº•å±‚åŸºæœ¬åŸç†</title>
        <link>https://zcj-git520.github.io/p/mysql%E5%BA%95%E5%B1%82%E5%9F%BA%E6%9C%AC%E5%8E%9F%E7%90%86/</link>
        <pubDate>Sun, 20 Feb 2022 22:00:38 +0800</pubDate>
        
        <guid>https://zcj-git520.github.io/p/mysql%E5%BA%95%E5%B1%82%E5%9F%BA%E6%9C%AC%E5%8E%9F%E7%90%86/</guid>
        <description>&lt;img src="https://zcj-git520.github.io/p/mysql%E5%BA%95%E5%B1%82%E5%9F%BA%E6%9C%AC%E5%8E%9F%E7%90%86/1.png" alt="Featured image of post mysqlåº•å±‚åŸºæœ¬åŸç†" /&gt;&lt;h2 id=&#34;ç´¢å¼•&#34;&gt;ç´¢å¼•&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;ç´¢å¼•æ˜¯å¸®åŠ©æ•°æ®åº“è·å–æœ‰åºæ•°æ®çš„æ•°æ®ç»“æ„ï¼Œå®ç°å¿«é€Ÿæ£€ç´¢&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;æ•°æ®åº“ç´¢å¼•çš„æ•°æ®ç»“æ„&#34;&gt;æ•°æ®åº“ç´¢å¼•çš„æ•°æ®ç»“æ„&lt;/h3&gt;
&lt;h4 id=&#34;å“ˆå¸Œè¡¨hash&#34;&gt;å“ˆå¸Œè¡¨(hash)&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;é€šè¿‡å“ˆå¸Œå‡½æ•°ï¼Œå®ç°key-valueçš„å­˜å‚¨ï¼ŒåŒæ—¶å¯ä»¥ä½¿ç”¨å¼€æ”¾åœ°å€æ³•å’Œæ‹‰é“¾æ³•è§£å†³å“ˆå¸Œå†²çªï¼Œå¯¹æŸ¥è¯¢å•ä¸ªå€¼çš„
æ—¶é—´å¤æ‚åº¦ä¸ºO(1)ï¼Œä¾‹å¦‚æŸ¥æ‰¾id=1ï¼šselect * from user where id=1
,ä½†å¯¹èŒƒå›´æŸ¥è¯¢ååˆ†çš„ä¸å‹å¥½,ä¾‹å¦‚æŸ¥æ‰¾èŒƒå›´id&amp;gt;100çš„å€¼ï¼šselect * from user where id &amp;gt;100;&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;äºŒå‰æ ‘&#34;&gt;äºŒå‰æ ‘&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;äºŒå‰æ ‘çš„æ•°æ®ç»“æ„å·¦å°å³å¤§ï¼Œå¯ä»¥é€šè¿‡ä¸­åºéå†ç›´æ¥è·å–æ‰€æœ‰å‡åºçš„æ•°æ®ï¼ŒäºŒå‰æ ‘çš„æŸ¥è¯¢çš„æ—¶é—´å¤æ‚åº¦ä¸º
O(lgn),ç¼ºç‚¹æ˜¯äºŒå‰æ ‘å®¹æ˜“é€€åŒ–é“¾è¡¨ï¼Œå¢åŠ æ•°æ®çš„æŸ¥æ‰¾çš„æ—¶é—´ã€‚åœ¨æœ€åçš„æƒ…å†µä¸‹çš„æ—¶é—´å¤æ‚åº¦ä¸ºO(n)&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;å¹³è¡¡äºŒå‰æ ‘avlå’Œçº¢é»‘æ ‘&#34;&gt;å¹³è¡¡äºŒå‰æ ‘(AVL)å’Œçº¢é»‘æ ‘&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;é€šè¿‡å·¦æ—‹å’Œå³æ—‹ä»¥åŠèŠ‚ç‚¹é¢œè‰²çš„æ”¹å˜ç­‰æ–¹å¼è°ƒæ•´æ ‘é¿å…é€€åŒ–ä¸ºé“¾è¡¨ï¼Œä½¿äºŒå‰æ ‘ä¿æŒå¹³è¡¡è½¬æ€ï¼Œä¿è¯æ ‘çš„æŸ¥æ‰¾æ€§èƒ½
å³æ—¶é—´å¤æ‚åº¦åœ¨O(lgn)ã€‚ä½†æ˜¯äºŒå‰æ ‘ä¸é€‚åˆç”¨åšæ•°æ®çš„åº•å±‚æ•°æ®ç»“æ„åŸå› å¦‚ä¸‹ï¼š&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;1.æ•°æ®åº“çš„æŸ¥è¯¢çš„ç“¶é¢ˆåœ¨äºå¯¹ç£ç›˜ioçš„æ“ä½œï¼Œå½“å­˜å‚¨å¤§é‡æ•°æ®çš„æƒ…å†µä¸‹ï¼Œè¦ä¿è¯æ ‘çš„å¹³è¡¡çš„æ—¶å€™ï¼Œæ ‘çš„é«˜åº¦
æ˜¯åœ¨ä¸æ–­çš„å¢åŠ ï¼Œåœ¨å¯¹æ¯ä¸€ä¸ªèŠ‚ç‚¹çš„æ“ä½œæ—¶ï¼Œå°±æ˜¯å¯¹ç£ç›˜ioçš„æ“ä½œï¼Œå³å¯¹ç£ç›˜ioçš„æ“ä½œè¿‡äºçš„é¢‘ç¹ï¼Œå¢åŠ äº†å¯¹æ•°æ®åº“
æŸ¥è¯¢ç­‰æ—¶é—´ã€‚
2 æ¯ä¸ªèŠ‚ç‚¹çš„åˆ†é…çš„å†…å­˜æ˜¯16kbçš„æ•°æ®é‡ï¼Œå¯¹äºäºŒå‰æ ‘çš„èŠ‚ç‚¹ä¿æŒçš„æ•°æ®æ˜¯ä¸‹äº16KB,å½“æ•°æ®è¿‡ä½æ—¶ï¼Œä¹Ÿä¼šé€ æˆå†…å­˜çš„æµªè´¹&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h4 id=&#34;bæ ‘&#34;&gt;Bæ ‘&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;Bæ ‘æ˜¯ä¸€ç§å¹³è¡¡å¤šåˆ†æ ‘ï¼ŒèŠ‚ç‚¹æœ€å¤šå«æœ‰Né¢—å­æ ‘(æŒ‡é’ˆ)ï¼ŒN-1ä¸ªå…³é”®å­—(æ•°æ®å­˜å‚¨ç©ºé—´) (N&amp;gt;=2);é™¤äº†æ ¹èŠ‚ç‚¹å’Œå¶å­èŠ‚ç‚¹å¤–ï¼Œå…¶å®ƒæ¯ä¸ªèŠ‚ç‚¹è‡³å°‘æœ‰M=N/2ä¸ªå­èŠ‚ç‚¹ï¼ŒMå‘ä¸Šå–æ•´ï¼Œå³åˆ†è£‚çš„æ—¶å€™ä»ä¸­é—´åˆ†å¼€ï¼Œåˆ†æˆMæ£µå­æ ‘ï¼›
è‹¥æ ¹èŠ‚ç‚¹ä¸æ˜¯å¶å­ç»“ç‚¹ï¼Œåˆ™è‡³å°‘æœ‰ä¸¤é¢—å­æ ‘ã€‚Bæ ‘è§£å†³äº†äºŒå‰æ ‘çš„é«˜åº¦é—®é¢˜ï¼Œå³å‡å°‘äº†å¯¹ç£ç›˜ioçš„æ“ä½œï¼Œå‡å°‘äº†æ•°æ®åº“çš„æ—¶é—´,æŸ¥è¯¢çš„æ—¶é—´å¤æ‚åº¦ä¸º
h*O(lgn),hä¸ºæ ‘çš„é«˜åº¦ã€‚ä½†æ˜¯ä¹Ÿå­˜åœ¨ä¸€ä¸‹é—®é¢˜&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;1.ä¸å¤ªé€‚åˆèŒƒå›´çš„æŸ¥è¯¢ï¼Œå­˜åœ¨ç´¢å¼•çš„å¤±æ•ˆ
2.ç¨³å®šæ€§è¾ƒå¼±ï¼ŒèŠ‚ç‚¹å­˜å‚¨çš„æ•°æ®è¾ƒå¤§ï¼Œå ç”¨çš„å†…å­˜ç©ºé—´è¾ƒå¤§&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h4 id=&#34;bæ ‘-1&#34;&gt;B+æ ‘&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;B+æ ‘å’ŒBæ ‘ç±»ä¼¼,B+æ ‘çš„éå¶å­èŠ‚ç‚¹ä¸ä¼šå­˜å‚¨æ•°æ®ï¼Œåªå­˜å‚¨ç´¢å¼•å€¼(æŒ‡é’ˆåœ°å€)ï¼Œæ‰€æœ‰çš„æ•°æ®éƒ½æ˜¯å­˜å‚¨åœ¨å¶å­èŠ‚ç‚¹ï¼Œå…¶ç›®çš„æ˜¯ä¸ºäº†å¢åŠ ç³»ç»Ÿçš„ç¨³å®šæ€§ã€‚
åº”ä¸ºèŠ‚ç‚¹å­˜å‚¨çš„ç´¢å¼•ï¼Œå¶å­èŠ‚ç‚¹å­˜å‚¨æ•°æ®ï¼Œå¶å­èŠ‚ç‚¹ç”¨äº†é“¾è¡¨è¿æ¥èµ·æ¥ï¼Œè¿™ä¸ªé“¾è¡¨æœ¬èº«å°±æ˜¯æœ‰åºçš„ï¼Œåœ¨æ•°æ®èŒƒå›´æŸ¥æ‰¾æ—¶ï¼Œæ›´å…·å¤‡æ•ˆç‡
ï¼Œä¿è¯äº†å­˜å‚¨ç©ºé—´çš„ä½¿ç”¨ã€‚é«˜åº¦ä¸é«˜ï¼Œå‡å°‘äº†å¯¹ç£ç›˜çš„ioçš„æ“ä½œï¼Œä¿è¯äº†æŸ¥è¯¢çš„æ•ˆç‡ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;å­˜å‚¨å¼•æ“&#34;&gt;å­˜å‚¨å¼•æ“&lt;/h3&gt;
&lt;h4 id=&#34;innodbå¼•æ“&#34;&gt;InnoDBå¼•æ“&lt;/h4&gt;
&lt;h5 id=&#34;å¼•æ“ç‰¹ç‚¹&#34;&gt;å¼•æ“ç‰¹ç‚¹&lt;/h5&gt;
&lt;p&gt;1.å°†æ•°æ®å­˜å‚¨åœ¨è¡¨ç©ºé—´ä¸­ï¼Œè¡¨ç©ºé—´ç”±ä¸€ç³»åˆ—çš„æ•°æ®æ–‡ä»¶ç»„æˆï¼Œç”±InnoDBç®¡ç†ï¼›&lt;/p&gt;
&lt;p&gt;2.æ”¯æŒæ¯ä¸ªè¡¨çš„æ•°æ®å’Œç´¢å¼•å­˜æ”¾åœ¨å•ç‹¬æ–‡ä»¶ä¸­(innodb_file_per_table)ï¼›&lt;/p&gt;
&lt;p&gt;3.æ”¯æŒäº‹åŠ¡ï¼Œé‡‡ç”¨MVCCæ¥æ§åˆ¶å¹¶å‘ï¼Œå¹¶å®ç°æ ‡å‡†çš„4ä¸ªäº‹åŠ¡éš”ç¦»çº§åˆ«ï¼Œæ”¯æŒå¤–é”®ï¼›&lt;/p&gt;
&lt;p&gt;4.ç´¢å¼•åŸºäºèšç°‡ç´¢å¼•å»ºç«‹ï¼Œå¯¹äºä¸»é”®æŸ¥è¯¢æœ‰è¾ƒé«˜æ€§èƒ½ï¼›&lt;/p&gt;
&lt;p&gt;5.æ•°æ®æ–‡ä»¶çš„å¹³å°æ— å…³æ€§ï¼Œæ”¯æŒæ•°æ®åœ¨ä¸åŒçš„æ¶æ„å¹³å°ç§»æ¤ï¼›&lt;/p&gt;
&lt;p&gt;6.èƒ½å¤Ÿé€šè¿‡ä¸€äº›å·¥å…·æ”¯æŒçœŸæ­£çš„çƒ­å¤‡ã€‚å¦‚XtraBackupç­‰ï¼›&lt;/p&gt;
&lt;p&gt;7.å†…éƒ¨è¿›è¡Œè‡ªèº«ä¼˜åŒ–å¦‚é‡‡å–å¯é¢„æµ‹æ€§é¢„è¯»ï¼Œèƒ½å¤Ÿè‡ªåŠ¨åœ¨å†…å­˜ä¸­åˆ›å»ºhashç´¢å¼•ç­‰ã€‚&lt;/p&gt;
&lt;h5 id=&#34;å¼•æ“å®ç°&#34;&gt;å¼•æ“å®ç°&lt;/h5&gt;
&lt;ul&gt;
&lt;li&gt;InnoDBæ˜¯é‡‡ç”¨çš„æ˜¯B+æ ‘ä½œä¸ºç´¢å¼•çš„ç»“æ„ï¼Œå…¶å­˜å‚¨æ–‡ä»¶åˆ†åˆ«æ˜¯.frmè¡¨çš„å®šä¹‰æ–‡ä»¶å’Œ.idbçš„æ•°æ®æ–‡ä»¶ã€‚InnoDBæ˜¯æ”¯æŒè¡Œé”å’Œè¡¨é”çš„ã€‚InnoDB æ”¯æŒäº‹åŠ¡ï¼Œä¸”æ”¯æŒå››ç§éš”ç¦»çº§åˆ«ï¼ˆè¯»æœªæäº¤ã€è¯»å·²æäº¤ã€å¯é‡å¤è¯»ã€ä¸²è¡ŒåŒ–ï¼‰ï¼Œé»˜è®¤çš„ä¸ºå¯é‡å¤è¯»
è¡¨æ•°æ®æ–‡ä»¶æœ¬èº«å°±æ˜¯æŒ‰B+Treeç»„ç»‡çš„ä¸€ä¸ªç´¢å¼•ç»“æ„ï¼Œè¿™æ£µæ ‘çš„å¶èŠ‚ç‚¹dataåŸŸä¿å­˜äº†å®Œæ•´çš„æ•°æ®è®°å½•ã€‚è¿™ä¸ªç´¢å¼•çš„keyæ˜¯æ•°æ®è¡¨çš„ä¸»é”®ï¼Œå› æ­¤InnoDBè¡¨æ•°æ®æ–‡ä»¶æœ¬èº«å°±æ˜¯ä¸»ç´¢å¼•ã€‚
&lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 188; 
			flex-basis: 452px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/mysql%E5%BA%95%E5%B1%82%E5%9F%BA%E6%9C%AC%E5%8E%9F%E7%90%86/1.png&#34; data-size=&#34;931x494&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/mysql%E5%BA%95%E5%B1%82%E5%9F%BA%E6%9C%AC%E5%8E%9F%E7%90%86/1.png&#34;
			width=&#34;931&#34;
			height=&#34;494&#34;
			srcset=&#34;https://zcj-git520.github.io/p/mysql%E5%BA%95%E5%B1%82%E5%9F%BA%E6%9C%AC%E5%8E%9F%E7%90%86/1_huc45b7cee299d4b0bd96f8dd390c7ebfb_163533_480x0_resize_box_3.png 480w, https://zcj-git520.github.io/p/mysql%E5%BA%95%E5%B1%82%E5%9F%BA%E6%9C%AC%E5%8E%9F%E7%90%86/1_huc45b7cee299d4b0bd96f8dd390c7ebfb_163533_1024x0_resize_box_3.png 1024w&#34;
			loading=&#34;lazy&#34;
			&gt;
	&lt;/a&gt;
	
&lt;/figure&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;myisamå¼•æ“&#34;&gt;MyISAMå¼•æ“&lt;/h4&gt;
&lt;h4 id=&#34;å¼•æ“ç‰¹ç‚¹-1&#34;&gt;å¼•æ“ç‰¹ç‚¹&lt;/h4&gt;
&lt;p&gt;1.MySQL5.1ä¸­é»˜è®¤ï¼Œä¸æ”¯æŒäº‹åŠ¡å’Œè¡Œçº§é”ï¼›&lt;/p&gt;
&lt;p&gt;2.æä¾›å¤§é‡ç‰¹æ€§å¦‚å…¨æ–‡ç´¢å¼•ã€ç©ºé—´å‡½æ•°ã€å‹ç¼©ã€å»¶è¿Ÿæ›´æ–°ç­‰ï¼›&lt;/p&gt;
&lt;p&gt;3.æ•°æ®åº“æ•…éšœåï¼Œå®‰å…¨æ¢å¤æ€§å·®ï¼›&lt;/p&gt;
&lt;p&gt;4.å¯¹äºåªè¯»æ•°æ®å¯ä»¥å¿å—æ•…éšœæ¢å¤ï¼ŒMyISAMä¾ç„¶éå¸¸é€‚ç”¨ï¼›&lt;/p&gt;
&lt;p&gt;5.æ—¥å¿—æœåŠ¡å™¨çš„åœºæ™¯ä¹Ÿæ¯”è¾ƒé€‚ç”¨ï¼Œåªéœ€æ’å…¥å’Œæ•°æ®è¯»å–æ“ä½œï¼›&lt;/p&gt;
&lt;p&gt;6.ä¸æ”¯æŒå•è¡¨ä¸€ä¸ªæ–‡ä»¶ï¼Œä¼šå°†æ‰€æœ‰çš„æ•°æ®å’Œç´¢å¼•å†…å®¹åˆ†åˆ«å­˜åœ¨ä¸¤ä¸ªæ–‡ä»¶ä¸­ï¼›&lt;/p&gt;
&lt;p&gt;7.MyISAMå¯¹æ•´å¼ è¡¨åŠ é”è€Œä¸æ˜¯å¯¹è¡Œï¼Œæ‰€ä»¥ä¸é€‚ç”¨å†™æ“ä½œæ¯”è¾ƒå¤šçš„åœºæ™¯ï¼›&lt;/p&gt;
&lt;p&gt;8.æ”¯æŒç´¢å¼•ç¼“å­˜ä¸æ”¯æŒæ•°æ®ç¼“å­˜ã€‚&lt;/p&gt;
&lt;h4 id=&#34;å¼•æ“å®ç°-1&#34;&gt;å¼•æ“å®ç°&lt;/h4&gt;
&lt;p&gt;MyISAMå¼•æ“ä½¿ç”¨B+Treeä½œä¸ºç´¢å¼•ç»“æ„ï¼Œå¶èŠ‚ç‚¹çš„dataåŸŸå­˜æ”¾çš„æ˜¯æ•°æ®è®°å½•çš„åœ°å€ã€‚å…¶å­˜å‚¨çš„æ–‡ä»¶æœ‰ä¸‰ä¸ªåˆ†åˆ«æ˜¯ï¼š.frmè¡¨çš„å®šä¹‰æ–‡ä»¶ã€.MYDä¸ºæ•°æ®æ–‡ä»¶å’Œ.MYLç´¢å¼•æ–‡ä»¶ã€‚
Myisam åªæ”¯æŒè¡¨é”ï¼Œä¸”ä¸æ”¯æŒäº‹åŠ¡ã€‚Myisam ç”±äºæœ‰å•ç‹¬çš„ç´¢å¼•æ–‡ä»¶ï¼Œåœ¨è¯»å–æ•°æ®æ–¹é¢çš„æ€§èƒ½å¾ˆé«˜&lt;/p&gt;
&lt;h3 id=&#34;heading&#34;&gt;&lt;/h3&gt;
&lt;h2 id=&#34;å‚è€ƒæ–‡çŒ®&#34;&gt;å‚è€ƒæ–‡çŒ®ï¼š&lt;/h2&gt;
&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;https://www.linuxidc.com/Linux/2014-04/99721.htm&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;MySQLè¿è¡ŒåŸç†ä¸åŸºç¡€æ¶æ„&lt;/a&gt;&lt;/p&gt;
</description>
        </item>
        <item>
        <title>æ•°æ®ç»“æ„-AVL tree goå®ç°</title>
        <link>https://zcj-git520.github.io/p/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84-avl-tree-go%E5%AE%9E%E7%8E%B0/</link>
        <pubDate>Tue, 15 Feb 2022 21:00:08 +0800</pubDate>
        
        <guid>https://zcj-git520.github.io/p/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84-avl-tree-go%E5%AE%9E%E7%8E%B0/</guid>
        <description>&lt;img src="https://zcj-git520.github.io/p/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84-avl-tree-go%E5%AE%9E%E7%8E%B0/1.png" alt="Featured image of post æ•°æ®ç»“æ„-AVL tree goå®ç°" /&gt;&lt;h2 id=&#34;å¹³è¡¡äºŒå‰æ ‘&#34;&gt;å¹³è¡¡äºŒå‰æ ‘&lt;/h2&gt;
&lt;h3 id=&#34;æ•°æ®ç»“æ„å®šä¹‰&#34;&gt;æ•°æ®ç»“æ„å®šä¹‰&lt;/h3&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;// å®šä¹‰æ ‘çš„èŠ‚ç‚¹
type AVLTreeNode struct {
	info   int  // å®šä¹‰å­˜å‚¨çš„å†…å®¹
	height int  // æ ‘çš„é«˜åº¦
	right  *AVLTreeNode  // å³èŠ‚ç‚¹
	left   *AVLTreeNode  // å·¦èŠ‚ç‚¹
}

// å®šä¹‰æ ‘
type AVLTree struct {
	root *AVLTreeNode  // å®šä¹‰æ ¹èŠ‚ç‚¹
}

// åˆ›å»ºèŠ‚ç‚¹
func creatNode(data int) *AVLTreeNode{
	return &amp;amp;AVLTreeNode{
		info:   data,
		height: -1,
		right:  nil,
		left:   nil,
	}
}
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&#34;æ•°æ®æ“ä½œ&#34;&gt;æ•°æ®æ“ä½œ&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;å¢åˆ æ”¹æŸ¥&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;æ•°æ®çš„æ’å…¥&#34;&gt;æ•°æ®çš„æ’å…¥&lt;/h4&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;
// æ•°æ®çš„æ’å…¥
func getHeight(node *AVLTreeNode) int {
	if node == nil{
		return -1
	}
	return node.height
}
// å·¦å­æ ‘è°ƒæ•´
func (a *AVLTree)leftTreeAdjust(node *AVLTreeNode, data int) *AVLTreeNode {
	// åˆ¤æ–­æ˜¯å¦éœ€è¦è°ƒæ•´æ ‘
	if getHeight(node.left) - getHeight(node.right) &amp;gt; 1{
		// æ’å…¥çš„èŠ‚ç‚¹åœ¨å·¦è¾¹ä¸Šï¼Œè¿›å³æ—‹
		if data &amp;lt; node.left.info{
			return a.lR(node)
		}else{
			// è¿›è¡Œå·¦å³æ—‹
			return a.rLR(node)
		}
	}
	return  node
}

// å³å­æ ‘è°ƒæ•´
func (a *AVLTree)rightTreeAdjust(node *AVLTreeNode, data int) *AVLTreeNode  {
	// åˆ¤æ–­æ˜¯å¦éœ€è¦è°ƒæ•´æ ‘
	if getHeight(node.right) - getHeight(node.left) &amp;gt; 1{
		// æ’å…¥çš„èŠ‚ç‚¹åœ¨å³è¾¹ä¸Šï¼Œè¿›å·¦æ—‹
		if data &amp;gt;= node.right.info{
			return a.rR(node)
		}else{
			// è¿›è¡Œå³å·¦æ—‹
			return  a.lRR(node)
		}
	}
	return node
}

func (a *AVLTree)insertNode(node **AVLTreeNode, data int)  {
	if *node == nil{
		*node = creatNode(data)
		(*node).height = maxValue(getHeight((*node).left), getHeight((*node).right)) + 1
		return
	}
	// æ’å…¥å·¦å­æ ‘
	if data &amp;lt; (*node).info{
		a.insertNode(&amp;amp;(*node).left, data)
		// è°ƒæ•´æ ‘
		*node = a.leftTreeAdjust(*node, data)

	}else{
		// æ’å…¥å³å­æ ‘
		a.insertNode(&amp;amp;(*node).right, data)
		// è°ƒæ•´æ ‘
		*node = a.rightTreeAdjust(*node, data)
	}
	// è°ƒæ•´èŠ‚ç‚¹çš„é«˜åº¦
	(*node).height = maxValue(getHeight((*node).left), getHeight((*node).right)) + 1
}

func (a *AVLTree)InsertData(data int )  {
	// å¦‚æœæ ‘ä¸ºç©º
	if a.root == nil{
		a.root = creatNode(data)
		a.root.height = 0
		return
	}
	a.insertNode(&amp;amp;a.root, data)
}
&lt;/code&gt;&lt;/pre&gt;&lt;h4 id=&#34;æ•°æ®çš„åˆ é™¤&#34;&gt;æ•°æ®çš„åˆ é™¤&lt;/h4&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;// æ¸…ç©ºæ ‘
func (a *AVLTree)Clear(){
	a.root = nil
}

// åˆ é™¤èŠ‚ç‚¹
func (a *AVLTree)deleteNode(node **AVLTreeNode, data int)  {
	if *node == nil{
		fmt.Printf(&amp;quot;no find data is %d \n&amp;quot;, data)
		return
	}
	if (*node).info == data{
		// å¦‚æœå³èŠ‚ç‚¹ä¸ºnil
		if (*node).right == nil{
			*node = (*node).left

		}else if (*node).left == nil{
			*node = (*node).right
		}else{
			// æ‰¾å‡ºå·¦å­æ ‘çš„æœ€å¤§å€¼
			temp := (*node).left
			prev := *node  // å·¦å­æ ‘æœ€å¤§å€¼çš„æœ€å‰é©±èŠ‚ç‚¹
			for ; temp.right != nil; temp = temp.right{
				prev = temp
			}
			// å·¦å­æ ‘çš„æœ€å¤§å€¼å¤åˆ¶ç»™node
			(*node).info = temp.info
			if prev == *node{ // å¦‚æœå·¦å­æ ‘çš„æœ€å¤§å€¼ä¸ºnodeçš„nodeçš„å­èŠ‚ç‚¹
				prev.left = temp.left  // å…ˆé©±èŠ‚ç‚¹çš„å·¦èŠ‚ç‚¹æŒ‡å‘å·¦å­æ ‘æœ€å¤§èŠ‚ç‚¹çš„å·¦èŠ‚ç‚¹
			}else{
				prev.right = temp.left  // å…ˆé©±èŠ‚ç‚¹çš„å³èŠ‚ç‚¹æŒ‡å‘å·¦å­æ ‘æœ€å¤§èŠ‚ç‚¹çš„å³èŠ‚ç‚¹
			}
			a.leftTreeAdjust(*node, data)
		}
		if *node != nil{
			// è°ƒæ•´èŠ‚ç‚¹çš„é«˜åº¦
			(*node).height = maxValue(getHeight((*node).left), getHeight((*node).right)) + 1
		}
		return
	}else if (*node).info &amp;gt; data{
		a.deleteNode(&amp;amp;(*node).left, data)
		a.leftTreeAdjust(*node, data)
	}else {
		a.deleteNode(&amp;amp;(*node).right, data)
		a.rightTreeAdjust(*node,data)
	}
	(*node).height = maxValue(getHeight((*node).left), getHeight((*node).right)) + 1
}

func (a *AVLTree)Remove(data int)  {
	if a.root == nil{
		return
	}
	a.deleteNode(&amp;amp;a.root, data)
}

// å¾—åˆ°æœ€å¤§å€¼
func maxValue(value, value1 int) int {
	if value &amp;gt;= value1{
		return value
	}
	return value1
}
&lt;/code&gt;&lt;/pre&gt;&lt;h4 id=&#34;æ•°æ®çš„æŸ¥è¯¢&#34;&gt;æ•°æ®çš„æŸ¥è¯¢&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;å‰åºéå†ã€ä¸­åºéå†ã€åç»­éå†ã€å€¼æŸ¥è¯¢&lt;/li&gt;
&lt;/ul&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;// æ ‘çš„éå†
// å‰åºéå†
func (a *AVLTree)nLR(node *AVLTreeNode){
	// å¦‚æœèŠ‚ç‚¹ä¸ºç©ºå°±è¿”å›
	if node == nil{
		return
	}
	fmt.Printf(&amp;quot;%d-&amp;gt;&amp;quot;, node.info)
	// éå†å·¦å­æ ‘
	a.nLR(node.left)
	// éå†å³å­æ ‘
	a.nLR(node.right)
}

// ä¸­åºéå†
func (a *AVLTree)lNR(node *AVLTreeNode){
	// å¦‚æœèŠ‚ç‚¹ä¸ºç©ºå°±è¿”å›
	if node == nil{
		return
	}
	a.lNR(node.left)
	fmt.Printf(&amp;quot;%d-&amp;gt;&amp;quot;, node.info)
	a.lNR(node.right)
}

// ååºéå†
func (a *AVLTree)lRN(node *AVLTreeNode){
	if node == nil{
		return
	}
	a.lRN(node.left)
	a.lRN(node.right)
	fmt.Printf(&amp;quot;%d-&amp;gt;&amp;quot;, node.info)
}

// å‰åºæ˜¾ç¤º
func (a *AVLTree)ShowNLR(){
	if a.root == nil{
		fmt.Println(&amp;quot;zhe tree is empty&amp;quot;)
		return
	}
	fmt.Print(&amp;quot;NLR:&amp;quot;)
	node := a.root
	a.nLR(node)
	fmt.Println()
}

// ä¸­åºæ˜¾ç¤º
func (a *AVLTree)ShowLNR(){
	if a.root == nil{
		fmt.Println(&amp;quot;zhe tree is empty&amp;quot;)
		return
	}
	fmt.Print(&amp;quot;LNR:&amp;quot;)
	node := a.root
	a.lNR(node)
	fmt.Println()
}

// ååºæ˜¾ç¤º
func (a *AVLTree)ShowLRN(){
	if a.root == nil{
		fmt.Println(&amp;quot;zhe tree is empty&amp;quot;)
		return
	}
	fmt.Print(&amp;quot;LRN:&amp;quot;)
	node := a.root
	a.lRN(node)
	fmt.Println()
}

&lt;/code&gt;&lt;/pre&gt;&lt;h4 id=&#34;æ ‘çš„æ—‹è½¬&#34;&gt;æ ‘çš„æ—‹è½¬&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;å•å·¦æ—‹ å•å³æ—‹ å·¦å³æ—‹ å³å·¦æ—‹&lt;/li&gt;
&lt;/ul&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;// å•å³æ—‹
func (a *AVLTree)lR(node *AVLTreeNode) *AVLTreeNode {
	// ä¸´æ—¶node æŒ‡å‘èŠ‚ç‚¹çš„å·¦èŠ‚ç‚¹
	temp := (*node).left
	// nodeçš„å·¦èŠ‚ç‚¹æŒ‡å‘temp çš„å³èŠ‚ç‚¹
	(*node).left = temp.right
	// temp çš„å³èŠ‚ç‚¹æŒ‡å‘nodeï¼ˆnode ä¸ºtempçš„å³èŠ‚ç‚¹çš„ï¼‰
	temp.right = node
	// è°ƒæ•´é«˜åº¦
	(*node).height = maxValue(getHeight((*node).left), getHeight((*node).right)) + 1
	temp.height = maxValue(getHeight(temp.left), getHeight(temp.right)) + 1
	return  temp
}

// å•å·¦æ—‹
func (a *AVLTree)rR(node *AVLTreeNode) *AVLTreeNode {
	// ä¸´æ—¶node æŒ‡å‘èŠ‚ç‚¹çš„å³èŠ‚ç‚¹
	temp := (*node).right
	// nodeçš„å³èŠ‚ç‚¹æŒ‡å‘tempçš„å·¦èŠ‚ç‚¹
	(*node).right = temp.left
	// tempçš„å·¦èŠ‚ç‚¹æŒ‡å‘node
	temp.left = node
	// è°ƒæ•´æ ‘çš„é«˜åº¦
	(*node).height = maxValue(getHeight((*node).left), getHeight((*node).right)) + 1
	temp.height = maxValue(getHeight(temp.left), getHeight(temp.right)) + 1
	return temp
}

// å·¦å³æ—‹(å…ˆå·¦æ—‹åœ¨å³æ—‹)
func (a *AVLTree)rLR(node *AVLTreeNode) *AVLTreeNode {
	node.left =  a.rR(node.left)
	return a.lR(node)
}

// å³å·¦æ—‹(å…ˆå³æ—‹å†å·¦æ—‹)
func (a *AVLTree)lRR(node *AVLTreeNode) *AVLTreeNode {
	node.right = a.lR(node.right)
	return a.rR(node)
}

&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&#34;æµ‹è¯•&#34;&gt;æµ‹è¯•&lt;/h3&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;
func TestAVRTree_InsertData(t *testing.T) {
	avl := CreatAVLTree()
	avl.InsertData(2)
	avl.InsertData(12)
	avl.InsertData(24)
	avl.InsertData(1)
	avl.InsertData(65)
	avl.InsertData(72)
	avl.InsertData(32)
	avl.InsertData(21)
	avl.ShowNLR()
	avl.ShowLNR()
	avl.ShowLRN()
}

func TestAVLTree_Remove(t *testing.T) {
	avl := CreatAVLTree()
	avl.InsertData(1)
	avl.InsertData(2)
	avl.InsertData(3)
	avl.InsertData(4)
	avl.InsertData(5)
	avl.InsertData(6)
	avl.InsertData(7)
	avl.InsertData(8)
	avl.ShowNLR()
	avl.ShowLNR()
	avl.ShowLRN()
	fmt.Println(&amp;quot;**********************&amp;quot;)
	avl.Remove(4)
	avl.ShowNLR()
	avl.ShowLNR()
	avl.ShowLRN()
}

func TestAVLTree_IsValue(t *testing.T) {
	avl := CreatAVLTree()
	avl.InsertData(1)
	avl.InsertData(2)
	avl.InsertData(3)
	avl.InsertData(4)
	avl.InsertData(5)
	avl.InsertData(6)
	avl.InsertData(7)
	avl.InsertData(8)
	avl.ShowNLR()
	avl.ShowLNR()
	avl.ShowLRN()
	data := 4
	is := avl.IsValue(data)
	if is{
		fmt.Printf(&amp;quot;%d :is exits\n&amp;quot;, data)
	}else{
		fmt.Printf(&amp;quot;%d :is not exits\n&amp;quot;, data)
	}
}

&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&#34;æºç &#34;&gt;æºç &lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://github.com/zcj-git520/DataStructuresAlgorithmsForGo/tree/master/tree/AVL_tree&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;æˆ‘çš„github:https://github.com/zcj-git520/DataStructuresAlgorithmsForGo/tree/master/tree/AVL_tree&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
        </item>
        <item>
        <title>æ•°æ®ç»“æ„-AVL tree c&#43;&#43;å®ç°</title>
        <link>https://zcj-git520.github.io/p/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84-avl-tree-c-%E5%AE%9E%E7%8E%B0/</link>
        <pubDate>Mon, 10 Jan 2022 21:00:08 +0800</pubDate>
        
        <guid>https://zcj-git520.github.io/p/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84-avl-tree-c-%E5%AE%9E%E7%8E%B0/</guid>
        <description>&lt;img src="https://zcj-git520.github.io/p/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84-avl-tree-c-%E5%AE%9E%E7%8E%B0/1.png" alt="Featured image of post æ•°æ®ç»“æ„-AVL tree c&#43;&#43;å®ç°" /&gt;&lt;h2 id=&#34;å¹³è¡¡äºŒå‰æ ‘&#34;&gt;å¹³è¡¡äºŒå‰æ ‘&lt;/h2&gt;
&lt;h3 id=&#34;æ•°æ®ç»“æ„å®šä¹‰&#34;&gt;æ•°æ®ç»“æ„å®šä¹‰&lt;/h3&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;

// å®šä¹‰æ ‘çš„èŠ‚ç‚¹
template&amp;lt;class T&amp;gt;
class AvrTreeNode
{
public:
    AvrTreeNode(){};
    AvrTreeNode(T data)
    {
        this-&amp;gt;data = data;
        left = 0;
        right = 0;
        hight = -1;
    }
    ~AvrTreeNode(){};
    T data;                 // å­˜å‚¨çš„æ•°æ®
    AvrTreeNode *left;      // å·¦å­æ ‘
    AvrTreeNode *right;     // å³å­æ ‘
    int hight;              // é«˜åº¦ 
};

// å®šä¹‰æ ‘
template&amp;lt;class T&amp;gt;
class AvrTree
{
private:
    AvrTreeNode&amp;lt;T&amp;gt; *root;     // å®šä¹‰æ ¹èŠ‚ç‚¹
    // æ’å…¥èŠ‚ç‚¹
    void inseartNode(AvrTreeNode&amp;lt;T&amp;gt;*&amp;amp; node, const T data);
    void deleteNodeAll(AvrTreeNode&amp;lt;T&amp;gt; *node); // åˆ é™¤æ‰€æœ‰èŠ‚ç‚¹
    // æ˜¾ç¤ºèŠ‚ç‚¹
    void DLR(AvrTreeNode&amp;lt;T&amp;gt; *node);
    void LDR(AvrTreeNode&amp;lt;T&amp;gt; *node);
    void LRD(AvrTreeNode&amp;lt;T&amp;gt; *node);
    // åˆ é™¤*&amp;amp;ä»£è¡¨æŒ‡é’ˆå¼•ç”¨
    bool deleteNode(AvrTreeNode&amp;lt;T&amp;gt;*&amp;amp; node, const T data);
    // void deleteNodeByMerge(AvrTreeNode&amp;lt;T&amp;gt;*&amp;amp; node); // åˆå¹¶åˆ é™¤
    // void deleteNodeByCopy(AvrTreeNode&amp;lt;T&amp;gt;*&amp;amp; node);  // å¤åˆ¶åˆ é™¤
    // å•å³æ—‹
    void LL(AvrTreeNode&amp;lt;T&amp;gt; *&amp;amp;node);
    // å•å·¦æ—‹
    void RR(AvrTreeNode&amp;lt;T&amp;gt; *&amp;amp;node);
    // å·¦å³æ—‹
    void RLR(AvrTreeNode&amp;lt;T&amp;gt; *&amp;amp;node);
    // å³å·¦æ—‹
    void LRR(AvrTreeNode&amp;lt;T&amp;gt; *&amp;amp;node);
    // æ±‚é«˜åº¦çš„æœ€å¤§å€¼
    int maxHight(int h1, int h2)
    {
        return h1&amp;gt;h2 ? h1:h2;
    }
      // å¾—åˆ°æ ‘çš„é«˜åº¦
    int getTreeHight(AvrTreeNode&amp;lt;T&amp;gt; *node)
    {
        if(!node)
        {
            return -1;
        }
        return node-&amp;gt;hight;
    }
public:
    AvrTree(/* args */)
    {
        root = 0;
    }
    ~AvrTree();
    // æ¸…ç©ºæ ‘
    void clear();
    // æ˜¯å¦ä¸ºç©ºæ ‘
    bool isEmpty()
    {
        return root == 0;
    }
    // æ’å…¥æ•°æ®
    void inseartData(const T data);
    // æ·±åº¦ä¼˜å…ˆéå†æ ‘
    // å‰åºéå†(DLR æ ¹-&amp;gt;å·¦-&amp;gt;å³)
    void showNodeByDLR();
    // ä¸­åºéå†(LDR å·¦-&amp;gt;æ ¹-&amp;gt;å³)
    void showNodeByLDR();
    // ååºéå†(LRD å·¦-&amp;gt;å³-&amp;gt;æ ¹)
    void showNodeByLRD();
    // åˆ é™¤èŠ‚ç‚¹çš„æ•°æ®
    bool remove(const T data);
    // LVRæŸ¥æ‰¾æ ‘
    bool LVRSearchData(const T data);
};

&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&#34;æ•°æ®æ“ä½œ&#34;&gt;æ•°æ®æ“ä½œ&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;å¢åˆ æ”¹æŸ¥&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;æ•°æ®çš„æ’å…¥&#34;&gt;æ•°æ®çš„æ’å…¥&lt;/h4&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;
// æ•°æ®çš„æ’å…¥
template&amp;lt;class T&amp;gt;
void AvrTree&amp;lt;T&amp;gt; ::inseartNode(AvrTreeNode&amp;lt;T&amp;gt; *&amp;amp; node, const T data)
{
    // å¦‚æœèŠ‚ç‚¹ä¸ºç©º
    if(node == 0)
    {
        node = new AvrTreeNode&amp;lt;T&amp;gt;(data);
        return;
    }
    // æ’å…¥åœ¨å·¦å­æ ‘
    if(data &amp;lt; node-&amp;gt;data)
    {
        inseartNode(node-&amp;gt;left, data);
        // æ ‘ä¸å¹³è¡¡æ—¶
        if(getTreeHight(node-&amp;gt;left) - getTreeHight(node-&amp;gt;right) &amp;gt; 1)
        {
            // å½“å€¼æ¯”å·¦èŠ‚ç‚¹çš„å€¼å°æ—¶ï¼Œåˆ™è¿›è¡Œå•å³æ—‹
            if(data &amp;lt; node-&amp;gt;left-&amp;gt;data)
            {
                LL(node);
            }
            // å¦åˆ™è¿›è¡Œå·¦å³æ—‹
            else
            {
                RLR(node);
            }
        }  
    }
    // æ’å…¥åœ¨å³å­æ ‘
    else
        {
            inseartNode(node-&amp;gt;right, data);
            // æ ‘ä¸å¹³è¡¡æ—¶
            if(getTreeHight(node-&amp;gt;right) - getTreeHight(node-&amp;gt;left) &amp;gt; 1)
            {
                // å½“å€¼æ¯”å³èŠ‚ç‚¹çš„å€¼å¤§æ—¶ï¼Œåˆ™è¿›è¡Œå•å·¦æ—‹
                if(data &amp;gt;= node-&amp;gt;right-&amp;gt;data)
                {
                    RR(node);
                }
                // å¦åˆ™è¿›è¡Œå³å·¦æ—‹
                else
                {
                    LRR(node);
                }
            }

        }
   // é‡æ–°è®¡ç®—èŠ‚ç‚¹çš„é«˜åº¦ï¼ŒèŠ‚ç‚¹çš„æ·±åº¦+1
    node-&amp;gt;hight = maxHight(getTreeHight(node-&amp;gt;left), getTreeHight(node-&amp;gt;right)) + 1;
}

template&amp;lt;class T&amp;gt;
void AvrTree&amp;lt;T&amp;gt; ::inseartData(const T data)
{
    // å¦‚æœä¸ºç©ºæ ‘
    if(isEmpty())
    {
        root = new AvrTreeNode&amp;lt;T&amp;gt;(data);
        root-&amp;gt;hight = 0;
        return;
    }
    inseartNode(root, data);
}

&lt;/code&gt;&lt;/pre&gt;&lt;h4 id=&#34;æ•°æ®çš„åˆ é™¤&#34;&gt;æ•°æ®çš„åˆ é™¤&lt;/h4&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;
// æ•°æ®çš„åˆ é™¤
template&amp;lt;class T&amp;gt;
void AvrTree&amp;lt;T&amp;gt; ::deleteNodeAll(AvrTreeNode&amp;lt;T&amp;gt; *node)
{
    if(node == 0)
    {
        return;
    }
    // åˆ é™¤å·¦èŠ‚ç‚¹
    deleteNodeAll(node-&amp;gt;left);
    // åˆ é™¤å³èŠ‚ç‚¹
    deleteNodeAll(node-&amp;gt;right);
    // é‡Šæ”¾èŠ‚ç‚¹
    delete node;

}

template&amp;lt;class T&amp;gt;
void AvrTree&amp;lt;T&amp;gt; ::clear()
{
    // å¦‚æœä¸ºç©ºæ ‘ï¼Œç›´æ¥è¿”å›
    if(root == 0)
    {
        return;
    }
    deleteNodeAll(root);
}

template&amp;lt;class T&amp;gt;
bool AvrTree&amp;lt;T&amp;gt; ::deleteNode(AvrTreeNode&amp;lt;T&amp;gt; *&amp;amp; node, const T data)
{
    // å¦‚æœèŠ‚ç‚¹ä¸ºç©ºï¼Œç›´æ¥è¿”å›ï¼Œè¡¨ç¤ºæœªæ‰¾åˆ°æ•°æ®
    if(!node)
    {
        cout &amp;lt;&amp;lt; &amp;quot;no find:&amp;quot; &amp;lt;&amp;lt; data &amp;lt;&amp;lt; endl;
        return false;
    }
    // æ‰¾åˆ°æ•°æ®èŠ‚ç‚¹
    if(data == node-&amp;gt;data)
    {
        AvrTreeNode&amp;lt;T&amp;gt; *temp = node;
        // åªæœ‰å³èŠ‚ç‚¹
        if(!node-&amp;gt;left)
        {
            node = node-&amp;gt;right;
        }
        // åªæœ‰å·¦èŠ‚ç‚¹
        else if(!node-&amp;gt;right)
        {
            node = node-&amp;gt;left;
        }
        else
        {
            // é‡‡ç”¨åˆå¹¶çš„æ–¹å¼è¿›è¡Œåˆ é™¤èŠ‚ç‚¹
            temp = node-&amp;gt;left;
            // æ‰¾åˆ°å·¦å­æ ‘çš„åšå¤§å€¼
            while (temp-&amp;gt;right)
            {
                temp = temp-&amp;gt;right;
            }
            temp-&amp;gt;right = node-&amp;gt;right;
            temp = node;
            node = node-&amp;gt;left;
             // æ˜¯å¦å¯¹æ ‘è¿›è¡Œè°ƒæ•´
            if(getTreeHight(node-&amp;gt;left)-getTreeHight(node-&amp;gt;right) &amp;gt; 1)
            {
                // å€¼æ¯”æœ€å¤§å€¼å¤§æˆ–è€…ç­‰äºï¼Œå°±é‡‡ç”¨å•å·¦æ—‹
                if(data &amp;gt;= node-&amp;gt;right-&amp;gt;data)
                {
                    RR(node);
                }
                //é‡‡ç”¨å…ˆå³æ—‹åœ¨å·¦æ—‹
                else
                {
                    LRR(node);
                }

            }
        }
        // åˆ é™¤èŠ‚ç‚¹ï¼Œè¿”å›
        delete temp;
        if(node)
        {
            node-&amp;gt;hight = maxHight(getTreeHight(node-&amp;gt;right), getTreeHight(node-&amp;gt;right)) + 1;
        }
        return true;
    }
    // åœ¨å·¦å­æ ‘æŸ¥æ‰¾
    else if(data &amp;lt; node-&amp;gt;data)
    {
        deleteNode(node-&amp;gt;left, data);
        // æ˜¯å¦å¯¹æ ‘è¿›è¡Œè°ƒæ•´
        if(getTreeHight(node-&amp;gt;left)-getTreeHight(node-&amp;gt;right) &amp;gt; 1)
        {
            // å¦‚æœå€¼æ¯”å·¦å­æ ‘å°ï¼Œå°±é‡‡ç”¨å•å³æ—‹ï¼Œ
            if(data &amp;lt; node-&amp;gt;left-&amp;gt;data)
            {
                LL(node);
            }
            // é‡‡ç”¨å…ˆå·¦æ—‹åœ¨å³æ—‹
            else
            {
                RLR(node);
            }
        }
    }
    // åœ¨å³å­æ ‘æŸ¥æ‰¾
    else
    {
        deleteNode(node-&amp;gt;right, data);
        // æ˜¯å¦è¦å¯¹æ ‘è¿›è¡Œè°ƒæ•´
        if(getTreeHight(node-&amp;gt;right) - getTreeHight(node-&amp;gt;left) &amp;gt; 1)
        {
            // å€¼æ¯”æœ€å¤§å€¼å¤§æˆ–è€…ç­‰äºï¼Œå°±é‡‡ç”¨å•å·¦æ—‹
            if(data &amp;gt;= node-&amp;gt;right-&amp;gt;data)
            {
                RR(node);
            }
            // é‡‡ç”¨å…ˆå³æ—‹åœ¨å·¦æ—‹
            else
            {
                LRR(node);
            }
        }

    }
    // å¯¹èŠ‚ç‚¹çš„æ·±åº¦è¿›è¡Œè°ƒæ•´
    node-&amp;gt;hight = maxHight(getTreeHight(node-&amp;gt;right), getTreeHight(node-&amp;gt;right)) + 1;
}

template&amp;lt;class T&amp;gt;
bool AvrTree&amp;lt;T&amp;gt; ::remove(const T data)
{
    // å¦‚æœä¸ºç©ºæ ‘
    if(isEmpty())
    {
        cout &amp;lt;&amp;lt; &amp;quot;this tree is empty&amp;quot; &amp;lt;&amp;lt; endl;
        return false;
    }
    return deleteNode(root, data);
}

&lt;/code&gt;&lt;/pre&gt;&lt;h4 id=&#34;æ•°æ®çš„æŸ¥è¯¢&#34;&gt;æ•°æ®çš„æŸ¥è¯¢&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;å‰åºéå†ã€ä¸­åºéå†ã€åç»­éå†ã€å€¼æŸ¥è¯¢&lt;/li&gt;
&lt;/ul&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;// æ•°æ®çš„æŸ¥è¯¢
template&amp;lt;class T&amp;gt;
void AvrTree&amp;lt;T&amp;gt; ::DLR(AvrTreeNode&amp;lt;T&amp;gt; *node)
{
    if(!node)
    { 
        return;
    }
    // å‰åºéå†(DLR)(æ ¹-&amp;gt;å·¦-&amp;gt;å³)
    cout &amp;lt;&amp;lt; node-&amp;gt;data &amp;lt;&amp;lt; &amp;quot;-&amp;gt;&amp;quot;;
    DLR(node-&amp;gt;left);
    DLR(node-&amp;gt;right);
}

template&amp;lt;class T&amp;gt;
void AvrTree&amp;lt;T&amp;gt; ::LDR(AvrTreeNode&amp;lt;T&amp;gt; *node)
{
    if(!node)
    {
        return;
    }
     // ä¸­åºéå†(LDR)(å·¦-&amp;gt;æ ¹-&amp;gt;å³)
    LDR(node-&amp;gt;left);
    cout &amp;lt;&amp;lt; node-&amp;gt;data &amp;lt;&amp;lt; &amp;quot;-&amp;gt;&amp;quot;;
    LDR(node-&amp;gt;right);
}

template&amp;lt;class T&amp;gt;
void AvrTree&amp;lt;T&amp;gt; ::LRD(AvrTreeNode&amp;lt;T&amp;gt; *node)
{
    if(!node)
    {
        return;
    }
     // ååºéå†(LRD)(å·¦-&amp;gt;å³-&amp;gt;æ ¹)
    LRD(node-&amp;gt;left);
    LRD(node-&amp;gt;right);
    cout &amp;lt;&amp;lt; node-&amp;gt;data &amp;lt;&amp;lt; &amp;quot;-&amp;gt;&amp;quot;;
}

template&amp;lt;class T&amp;gt;
void AvrTree&amp;lt;T&amp;gt; ::showNodeByDLR()
{
    if(isEmpty())
    {
        cout &amp;lt;&amp;lt; &amp;quot;this tree is empty&amp;quot; &amp;lt;&amp;lt; endl;
        return;
    }
    // éå†æ ‘
    AvrTreeNode&amp;lt;T&amp;gt; *node = root;
    cout &amp;lt;&amp;lt; &amp;quot;DLR: &amp;quot;;
    DLR(node);  
    cout &amp;lt;&amp;lt; endl;
}

template&amp;lt;class T&amp;gt;
void AvrTree&amp;lt;T&amp;gt; ::showNodeByLDR()
{
    if(isEmpty())
    {
        cout &amp;lt;&amp;lt; &amp;quot;this tree is empty&amp;quot; &amp;lt;&amp;lt; endl;
        return;
    }
    // éå†æ ‘
    AvrTreeNode&amp;lt;T&amp;gt; *node = root;
    cout &amp;lt;&amp;lt; &amp;quot;LDR: &amp;quot;;
    LDR(node); 
    cout &amp;lt;&amp;lt; endl; 
}

template&amp;lt;class T&amp;gt;
void AvrTree&amp;lt;T&amp;gt; ::showNodeByLRD()
{
    if(isEmpty())
    {
        cout &amp;lt;&amp;lt; &amp;quot;this tree is empty&amp;quot; &amp;lt;&amp;lt; endl;
        return;
    }
    // éå†æ ‘
    AvrTreeNode&amp;lt;T&amp;gt; *node = root;
    cout &amp;lt;&amp;lt; &amp;quot;LRD: &amp;quot;;
    LRD(node); 
    cout &amp;lt;&amp;lt; endl; 
}

template&amp;lt;class T&amp;gt;
bool AvrTree&amp;lt;T&amp;gt; ::LVRSearchData(const T data)
{
   // å¦‚æœæ ‘ä¸ºç©ºå°±ç›´æ¥è¿”å›
   if(isEmpty())
   {
       return false;
   }
   AvrTreeNode&amp;lt;T&amp;gt; *node = root;
   while (node)
   {
       if(data == node-&amp;gt;data)
       {
           return true;
       }
       else if(data &amp;lt; node-&amp;gt;data)
       {
           node = node-&amp;gt;left;
       }
       else
       {
           node = node-&amp;gt;right;
       }
   }
   return false;
}

&lt;/code&gt;&lt;/pre&gt;&lt;h4 id=&#34;æ ‘çš„æ—‹è½¬&#34;&gt;æ ‘çš„æ—‹è½¬&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;å•å·¦æ—‹ å•å³æ—‹ å·¦å³æ—‹ å³å·¦æ—‹&lt;/li&gt;
&lt;/ul&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;// èŠ‚ç‚¹çš„æ—‹è½¬
template&amp;lt;class T&amp;gt;
void AvrTree&amp;lt;T&amp;gt; ::LL(AvrTreeNode&amp;lt;T&amp;gt; *&amp;amp; node)
{
    // ä¸´æ—¶èŠ‚ç‚¹ä¸ºèŠ‚ç‚¹çš„å·¦èŠ‚ç‚¹
    AvrTreeNode&amp;lt;T&amp;gt; *temp = node-&amp;gt;left;
    // èŠ‚ç‚¹çš„å·¦èŠ‚ç‚¹æŒ‡å‘ä¸´æ—¶èŠ‚ç‚¹çš„å³èŠ‚ç‚¹
    node-&amp;gt;left = temp-&amp;gt;right;
    // ä¸´æ—¶èŠ‚ç‚¹çš„å³èŠ‚ç‚¹æŒ‡å‘èŠ‚ç‚¹(å°†ä¸´æ—¶èŠ‚ç‚¹çš„è®¾ç½®ä¸ºæ ¹)
    temp-&amp;gt;right = node;
    // é‡æ–°è·å¾—æ ‘çš„é«˜åº¦
    temp-&amp;gt;hight = maxHight(getTreeHight(temp-&amp;gt;left), getTreeHight(temp-&amp;gt;right)) + 1;
    node-&amp;gt;hight = maxHight(getTreeHight(node-&amp;gt;left), getTreeHight(node-&amp;gt;right)) + 1;
    // ç»node é‡æ–°æŒ‡å‘temp, å³å°†tempè®¾ç½®ä¸ºæ ¹èŠ‚ç‚¹ï¼Œé˜²æ­¢æ ‘çš„æ–­
    node = temp; 
}

template&amp;lt;class T&amp;gt;
void AvrTree&amp;lt;T&amp;gt; ::RR(AvrTreeNode&amp;lt;T&amp;gt; *&amp;amp; node)
{
    // ä¸´æ—¶èŠ‚ç‚¹ä¸ºèŠ‚ç‚¹çš„å³èŠ‚ç‚¹
    AvrTreeNode&amp;lt;T&amp;gt; *temp = node-&amp;gt;right;
    // èŠ‚ç‚¹çš„å³èŠ‚ç‚¹æŒ‡å‘ä¸´æ—¶èŠ‚ç‚¹çš„èŠ‚ç‚¹
    node-&amp;gt;right = temp-&amp;gt;left;
    // ä¸´æ—¶èŠ‚ç‚¹çš„å·¦èŠ‚ç‚¹æŒ‡å‘èŠ‚ç‚¹
    temp-&amp;gt;left = node;
    // é‡æ–°è®¡ç®—æ ‘çš„é«˜åº¦
    temp-&amp;gt;hight = maxHight(getTreeHight(temp-&amp;gt;left), getTreeHight(temp-&amp;gt;right)) + 1;
    node-&amp;gt;hight = maxHight(getTreeHight(node-&amp;gt;left), getTreeHight(node-&amp;gt;right)) + 1;
     // ç»node é‡æ–°æŒ‡å‘temp, å³å°†tempè®¾ç½®ä¸ºæ ¹èŠ‚ç‚¹ï¼Œé˜²æ­¢æ ‘çš„æ–­
    node = temp;
}

template&amp;lt;class T&amp;gt;
void AvrTree&amp;lt;T&amp;gt; ::RLR(AvrTreeNode&amp;lt;T&amp;gt; *&amp;amp; node)
{
    // å…ˆè¿›è¡Œå·¦æ—‹
    RR(node-&amp;gt;left);
    // åœ¨è¿›è¡Œå³æ—‹
    LL(node);
}

template&amp;lt;class T&amp;gt;
void AvrTree&amp;lt;T&amp;gt; ::LRR(AvrTreeNode&amp;lt;T&amp;gt; *&amp;amp; node)
{
    // å…ˆè¿›è¡Œå³æ—‹
    LL(node-&amp;gt;right);
    // åœ¨è¿›è¡Œå·¦æ—‹
    RR(node);
}

&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&#34;æµ‹è¯•&#34;&gt;æµ‹è¯•&lt;/h3&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;
int main(int argc, char const *argv[])
{
    AvrTree&amp;lt;int&amp;gt; avr;
    avr.inseartData(12);
    avr.inseartData(42);
    avr.inseartData(93);
    avr.inseartData(4);
    avr.inseartData(15);
    avr.inseartData(66);
    avr.inseartData(97);
    avr.showNodeByDLR();
    cout &amp;lt;&amp;lt; &amp;quot;***********************************&amp;quot; &amp;lt;&amp;lt; endl;
    avr.showNodeByLDR();
    cout &amp;lt;&amp;lt; &amp;quot;***********************************&amp;quot; &amp;lt;&amp;lt; endl;
    avr.showNodeByLRD();
    cout &amp;lt;&amp;lt; &amp;quot;***********************************&amp;quot; &amp;lt;&amp;lt; endl;
    bool ok = avr.remove(42);
    cout &amp;lt;&amp;lt; &amp;quot;remove is:&amp;quot; &amp;lt;&amp;lt; ok &amp;lt;&amp;lt; endl;
    avr.showNodeByDLR();
    cout &amp;lt;&amp;lt; &amp;quot;***********************************&amp;quot; &amp;lt;&amp;lt; endl;
    avr.showNodeByLDR();
    cout &amp;lt;&amp;lt; &amp;quot;***********************************&amp;quot; &amp;lt;&amp;lt; endl;
    avr.showNodeByLRD();
    cout &amp;lt;&amp;lt; &amp;quot;***********************************&amp;quot; &amp;lt;&amp;lt; endl;
    bool is = avr.remove(12);
    cout &amp;lt;&amp;lt; &amp;quot;remove is:&amp;quot; &amp;lt;&amp;lt; is &amp;lt;&amp;lt; endl;
    avr.showNodeByDLR();
    cout &amp;lt;&amp;lt; &amp;quot;***********************************&amp;quot; &amp;lt;&amp;lt; endl;
    avr.showNodeByLDR();
    cout &amp;lt;&amp;lt; &amp;quot;***********************************&amp;quot; &amp;lt;&amp;lt; endl;
    avr.showNodeByLRD();
    cout &amp;lt;&amp;lt; &amp;quot;***********************************&amp;quot; &amp;lt;&amp;lt; endl;
    bool is1 = avr.remove(661);
    cout &amp;lt;&amp;lt; &amp;quot;remove1 is:&amp;quot; &amp;lt;&amp;lt; is1 &amp;lt;&amp;lt; endl;
    avr.showNodeByDLR();
    cout &amp;lt;&amp;lt; &amp;quot;***********************************&amp;quot; &amp;lt;&amp;lt; endl;
    avr.showNodeByLDR();
    cout &amp;lt;&amp;lt; &amp;quot;***********************************&amp;quot; &amp;lt;&amp;lt; endl;
    avr.showNodeByLRD();
    cout &amp;lt;&amp;lt; &amp;quot;***********************************&amp;quot; &amp;lt;&amp;lt; endl;
    bool ok_ = avr.LVRSearchData(66);
    cout &amp;lt;&amp;lt; &amp;quot;SearchData is:&amp;quot; &amp;lt;&amp;lt; ok_ &amp;lt;&amp;lt; endl;
    system(&amp;quot;pause&amp;quot;);
    return 0;
}

&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&#34;æºç &#34;&gt;æºç &lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://github.com/zcj-git520/DataStructuresAlgorithmsForC/tree/master/tree/avr_tree&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;æˆ‘çš„github:https://github.com/zcj-git520/DataStructuresAlgorithmsForC/tree/master/tree/avr_tree&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
        </item>
        <item>
        <title>æ•°æ®ç»“æ„-Binary search tree goå®ç°</title>
        <link>https://zcj-git520.github.io/p/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84-binary-search-tree-go%E5%AE%9E%E7%8E%B0/</link>
        <pubDate>Wed, 05 Jan 2022 21:00:08 +0800</pubDate>
        
        <guid>https://zcj-git520.github.io/p/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84-binary-search-tree-go%E5%AE%9E%E7%8E%B0/</guid>
        <description>&lt;img src="https://zcj-git520.github.io/p/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84-binary-search-tree-go%E5%AE%9E%E7%8E%B0/1.gif" alt="Featured image of post æ•°æ®ç»“æ„-Binary search tree goå®ç°" /&gt;&lt;h2 id=&#34;äºŒå‰æŸ¥æ‰¾æ ‘&#34;&gt;äºŒå‰æŸ¥æ‰¾æ ‘&lt;/h2&gt;
&lt;h3 id=&#34;æ•°æ®ç»“æ„å®šä¹‰&#34;&gt;æ•°æ®ç»“æ„å®šä¹‰&lt;/h3&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;

// å®šä¹‰æ ‘çš„èŠ‚ç‚¹
type binarySearchTreeNode struct {
	info  int    // å®šä¹‰å­˜å‚¨çš„å†…å®¹
	left  *binarySearchTreeNode  // å·¦èŠ‚ç‚¹
	right *binarySearchTreeNode  // å³èŠ‚ç‚¹
}

// å®šä¹‰æ ‘
type BinarySearchTree struct {
	root   *binarySearchTreeNode   // å®šä¹‰æ ¹èŠ‚ç‚¹
	numNodes  int                    // èŠ‚ç‚¹æ ‘
}

// åˆ›å»ºèŠ‚ç‚¹
func creatNode(data int) *binarySearchTreeNode{
	return &amp;amp;binarySearchTreeNode{
		info:  data,
		left:  nil,
		right: nil,
	}
}

// èŠ‚ç‚¹çš„æ•°é‡
func (b *BinarySearchTree)GetNodeNum()int{
	return b.numNodes
}
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&#34;æ•°æ®æ“ä½œ&#34;&gt;æ•°æ®æ“ä½œ&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;å¢åˆ æ”¹æŸ¥&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;æ•°æ®çš„æ’å…¥&#34;&gt;æ•°æ®çš„æ’å…¥&lt;/h4&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;
// èŠ‚ç‚¹çš„æ’å…¥
func (b *BinarySearchTree) InsertNode(data int)  {
	newNode := creatNode(data)
	// å¦‚æœä¸ºç©ºæ ‘
	if b.root == nil{
		b.root = newNode
		b.numNodes++
		return
	}
	node := b.root
	for {
		// å½“å€¼å°äºèŠ‚ç‚¹çš„å€¼æ—¶ï¼Œå°±å¾€å·¦å­æ ‘æ’å…¥
		if data &amp;lt; node.info{
			// å·¦èŠ‚ç‚¹ä¸ºç©ºï¼Œç›´æ¥æ’å…¥,è·³å‡ºå¾ªç¯
			if node.left == nil{
				node.left = newNode
				break
			}else{
				// å¦åˆ™ç»§ç»­å¾€å·¦å­æ ‘æ’
				node = node.left
			}
		}else{
			// å½“å€¼å¤§äºç­‰äºèŠ‚ç‚¹çš„å€¼æ—¶ï¼Œå°±å¾€å³å­æ ‘æ’å…¥
			// å³èŠ‚ç‚¹ä¸ºç©ºï¼Œç›´æ¥æ’å…¥,è·³å‡ºå¾ªç¯
			if node.right == nil{
				node.right = newNode
				break
			}else {
				// å¦åˆ™ç»§ç»­å¾€å³å­æ ‘æ’
				node = node.right
			}
		}
	}
	// èŠ‚ç‚¹æ ‘+1
	b.numNodes++
}

&lt;/code&gt;&lt;/pre&gt;&lt;h4 id=&#34;æ•°æ®çš„åˆ é™¤&#34;&gt;æ•°æ®çš„åˆ é™¤&lt;/h4&gt;
&lt;ol&gt;
&lt;li&gt;å¤åˆ¶åˆ é™¤æ³•ï¼š&lt;/li&gt;
&lt;/ol&gt;
&lt;blockquote&gt;
&lt;p&gt;å°†è¢«åˆ é™¤èŠ‚ç‚¹çš„å·¦å­æ ‘çš„æœ€å¤§å€¼æˆ–è€…å³å­æ ‘çš„æœ€å°å€¼å¤åˆ¶ç»™è¢«åˆ é™¤çš„èŠ‚ç‚¹çš„æ•°å€¼ï¼Œ
ç„¶ååˆ é™¤å·¦å­æ ‘çš„æœ€å¤§å€¼çš„èŠ‚ç‚¹æˆ–è€…å³å­æ ‘çš„æœ€å°å€¼çš„èŠ‚ç‚¹&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;2.åˆå¹¶åˆ é™¤æ³•ï¼š&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;ä»åˆ é™¤çš„èŠ‚ç‚¹çš„ä¸¤æ£µå­æ ‘åˆå¹¶æœªä¸€æ£µæ ‘ï¼Œç„¶åå°†è¿™é¢—æ ‘è¿æ¥åˆ°åˆ é™¤èŠ‚ç‚¹çš„çˆ¶èŠ‚ç‚¹
å…·ä½“æ“ä½œï¼šå·¦å­æ ‘çš„æœ€å¤§å€¼å·¦ä½œä¸ºæœ‰å­æ ‘çš„çˆ¶èŠ‚ç‚¹ï¼Œå·¦å­æ ‘çš„æ ¹èŠ‚ç‚¹ä½œä¸ºè¿™æ£µæ ‘çš„æ ¹èŠ‚ç‚¹
æˆ–å³å­æ ‘çš„æœ€å°å€¼ä½œä¸ºå·¦å­æ ‘çš„çˆ¶èŠ‚ç‚¹ï¼Œå³å­æ ‘çš„æ ¹èŠ‚ç‚¹ä½œä¸ºè¿™æ£µæ ‘çš„æ ¹èŠ‚ç‚¹&lt;/p&gt;
&lt;/blockquote&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;
// æ¸…ç©ºæ ‘
func (b *BinarySearchTree) Clear(){
	b.root = nil
	b.numNodes = 0
}

//åˆå¹¶åˆ é™¤æ³•ï¼š
//ä»åˆ é™¤çš„èŠ‚ç‚¹çš„ä¸¤æ£µå­æ ‘åˆå¹¶æœªä¸€æ£µæ ‘ï¼Œç„¶åå°†è¿™é¢—æ ‘è¿æ¥åˆ°åˆ é™¤èŠ‚ç‚¹çš„çˆ¶èŠ‚ç‚¹
//å…·ä½“æ“ä½œï¼šå·¦å­æ ‘çš„æœ€å¤§å€¼å·¦ä½œä¸ºæœ‰å­æ ‘çš„çˆ¶èŠ‚ç‚¹ï¼Œå·¦å­æ ‘çš„æ ¹èŠ‚ç‚¹ä½œä¸ºè¿™æ£µæ ‘çš„æ ¹èŠ‚ç‚¹
//æˆ–å³å­æ ‘çš„æœ€å°å€¼ä½œä¸ºå·¦å­æ ‘çš„çˆ¶èŠ‚ç‚¹ï¼Œå³å­æ ‘çš„æ ¹èŠ‚ç‚¹ä½œä¸ºè¿™æ£µæ ‘çš„æ ¹èŠ‚ç‚¹
//
func (b *BinarySearchTree)deleteByMerge(node **binarySearchTreeNode) {
	// å¦‚æœå³èŠ‚ç‚¹ä¸ºnil
	if (*node).right == nil{
		*node = (*node).left

	}else if (*node).left == nil{
		*node = (*node).right
	}else{
		// æ‰¾å‡ºå·¦å­æ ‘çš„æœ€å¤§å€¼
		temp := (*node).left
		for ; temp.right != nil; temp = temp.right{}
		// å·¦å­æ ‘çš„æœ€å¤§å€¼çš„å³èŠ‚ç‚¹æŒ‡å‘å³å­æ ‘
		temp.right = (*node).right
		// nodeçš„å¤´æŒ‡é’ˆæŒ‡å‘è¿™ä¸ªæ ‘æ—¢æŒ‡å‘å·¦å­æ ‘çš„å¤´èŠ‚ç‚¹
		*node = (*node).left
	}


}

// ç§»é™¤èŠ‚ç‚¹ï¼Œé€šè¿‡åˆå¹¶çš„æ–¹æ³•
func (b *BinarySearchTree)RemoveByMerge(data int) bool{
	// å¦‚æœä¸ºç©ºæ ‘
	if b.root == nil{
		return false
	}
	// æ‰¾åˆ°å€¼çš„èŠ‚ç‚¹
	node := b.root
	prev := b.root
	for {
		if node == nil{
			return false
		}
		if node.info == data{
			break
		}
		prev = node
		if data &amp;lt; node.info{
			node = node.left
		}else {
			node = node.right
		}
	}
	if node == b.root{
		b.deleteByMerge(&amp;amp;b.root)
	}else if node == prev.left{
		b.deleteByMerge(&amp;amp;prev.left)
	}else{
		b.deleteByMerge(&amp;amp;prev.right)
	}
	// èŠ‚ç‚¹æ ‘-1
	b.numNodes--
	return true
}

/*
å¤åˆ¶åˆ é™¤æ³•ï¼š
å°†è¢«åˆ é™¤èŠ‚ç‚¹çš„å·¦å­æ ‘çš„æœ€å¤§å€¼æˆ–è€…å³å­æ ‘çš„æœ€å°å€¼å¤åˆ¶ç»™è¢«åˆ é™¤çš„èŠ‚ç‚¹çš„æ•°å€¼ï¼Œ
ç„¶ååˆ é™¤å·¦å­æ ‘çš„æœ€å¤§å€¼çš„èŠ‚ç‚¹æˆ–è€…å³å­æ ‘çš„æœ€å°å€¼çš„èŠ‚ç‚¹
*/
func (b *BinarySearchTree)deleteByCopy(node **binarySearchTreeNode) {
	// å¦‚æœå³èŠ‚ç‚¹ä¸ºnil
	if (*node).right == nil{
		*node = (*node).left
	}else if (*node).left == nil{
		*node = (*node).right
	}else{
		// æ‰¾å‡ºå·¦å­æ ‘çš„æœ€å¤§å€¼
		temp := (*node).left
		prev := *node  // å·¦å­æ ‘æœ€å¤§å€¼çš„æœ€å‰é©±èŠ‚ç‚¹
		for ; temp.right != nil; temp = temp.right{
			prev = temp
		}
		// å·¦å­æ ‘çš„æœ€å¤§å€¼å¤åˆ¶ç»™node
		(*node).info = temp.info
		if prev == *node{ // å¦‚æœå·¦å­æ ‘çš„æœ€å¤§å€¼ä¸ºnodeçš„nodeçš„å­èŠ‚ç‚¹
			prev.left = temp.left  // å…ˆé©±èŠ‚ç‚¹çš„å·¦èŠ‚ç‚¹æŒ‡å‘å·¦å­æ ‘æœ€å¤§èŠ‚ç‚¹çš„å·¦èŠ‚ç‚¹
		}else{
			prev.right = temp.left  // å…ˆé©±èŠ‚ç‚¹çš„å³èŠ‚ç‚¹æŒ‡å‘å·¦å­æ ‘æœ€å¤§èŠ‚ç‚¹çš„å³èŠ‚ç‚¹
		}

	}


}

// ç§»é™¤èŠ‚ç‚¹ï¼Œé€šè¿‡å¤åˆ¶çš„æ–¹æ³•
func (b *BinarySearchTree)RemoveByCopy(data int) bool{
	// å¦‚æœä¸ºç©ºæ ‘
	if b.root == nil{
		return false
	}
	// æ‰¾åˆ°å€¼çš„èŠ‚ç‚¹
	node := b.root
	prev := b.root
	for {
		if node == nil{
			return false
		}
		if node.info == data{
			break
		}
		prev = node
		if data &amp;lt; node.info{
			node = node.left
		}else {
			node = node.right
		}
	}
	//b.deleteByCopy(&amp;amp;node)
	if node == b.root{
		b.deleteByCopy(&amp;amp;b.root)
	}else if node == prev.left{
		b.deleteByCopy(&amp;amp;prev.left)
	}else{
		b.deleteByCopy(&amp;amp;prev.right)
	}
	// èŠ‚ç‚¹æ ‘-1
	b.numNodes--
	return true
}
&lt;/code&gt;&lt;/pre&gt;&lt;h4 id=&#34;æ•°æ®çš„æŸ¥è¯¢&#34;&gt;æ•°æ®çš„æŸ¥è¯¢&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;å‰åºéå†ã€ä¸­åºéå†ã€åç»­éå†ã€å€¼æŸ¥è¯¢&lt;/li&gt;
&lt;/ul&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;// å‰åºéå†
func (b *BinarySearchTree) nLR(node *binarySearchTreeNode){
	if node == nil{
		return
	}
	fmt.Printf(&amp;quot;%d-&amp;gt;&amp;quot;, node.info)
	b.nLR(node.left)
	b.nLR(node.right)
}

// ä¸­åºéå†
func (b *BinarySearchTree)lNR(node *binarySearchTreeNode){
	if node == nil{
		return
	}
	b.lNR(node.left)
	fmt.Printf(&amp;quot;%d-&amp;gt;&amp;quot;, node.info)
	b.lNR(node.right)
}

// ååºéå†
func (b *BinarySearchTree)lRN(node *binarySearchTreeNode){
	if node == nil{
		return
	}
	b.lRN(node.left)
	b.lRN(node.right)
	fmt.Printf(&amp;quot;%d-&amp;gt;&amp;quot;, node.info)
}

// å‰åºæ˜¾ç¤º
func (b *BinarySearchTree)ShowNLR(){
	if b.root == nil{
		fmt.Println(&amp;quot;zhe tree is empty&amp;quot;)
		return
	}
	fmt.Print(&amp;quot;NLR:&amp;quot;)
	node := b.root
	b.nLR(node)
	fmt.Println()
}

// ä¸­åºæ˜¾ç¤º
func (b *BinarySearchTree)ShowLNR(){
	if b.root == nil{
		fmt.Println(&amp;quot;zhe tree is empty&amp;quot;)
		return
	}
	fmt.Print(&amp;quot;LNR:&amp;quot;)
	node := b.root
	b.lNR(node)
	fmt.Println()
}

// ååºæ˜¾ç¤º
func (b *BinarySearchTree)ShowLRN(){
	if b.root == nil{
		fmt.Println(&amp;quot;zhe tree is empty&amp;quot;)
		return
	}
	fmt.Print(&amp;quot;LRN:&amp;quot;)
	node := b.root
	b.lRN(node)
	fmt.Println()
}

// æŸ¥æ‰¾å€¼æ˜¯å¦å­˜åœ¨
func (b *BinarySearchTree)IsValue(data int) bool {
	if b.root == nil{
		return false
	}
	node :=  b.root
	for {
		if node == nil{
			return false
		}
		if node.info == data {
			return  true
		}
		if data &amp;lt; node.info{
			node = node.left
		}else {
			node = node.right
		}
	}
}
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&#34;æ ‘çš„åˆ›å»º&#34;&gt;æ ‘çš„åˆ›å»º&lt;/h3&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;func NewBinarySearchTree() *BinarySearchTree {
	return &amp;amp;BinarySearchTree{
		root:     nil,
		numNodes: 0,
	}
}
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&#34;æºç &#34;&gt;æºç &lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://github.com/zcj-git520/DataStructuresAlgorithmsForGo/tree/master/tree/binary_search_tree&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;æˆ‘çš„github:https://github.com/zcj-git520/DataStructuresAlgorithmsForGo/tree/master/tree/binary_search_tree&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
        </item>
        <item>
        <title>æ•°æ®ç»“æ„-Binary search tree c&#43;&#43;å®ç°</title>
        <link>https://zcj-git520.github.io/p/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84-binary-search-tree-c-%E5%AE%9E%E7%8E%B0/</link>
        <pubDate>Sat, 01 Jan 2022 21:00:08 +0800</pubDate>
        
        <guid>https://zcj-git520.github.io/p/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84-binary-search-tree-c-%E5%AE%9E%E7%8E%B0/</guid>
        <description>&lt;img src="https://zcj-git520.github.io/p/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84-binary-search-tree-c-%E5%AE%9E%E7%8E%B0/1.gif" alt="Featured image of post æ•°æ®ç»“æ„-Binary search tree c&#43;&#43;å®ç°" /&gt;&lt;h2 id=&#34;äºŒå‰æŸ¥æ‰¾æ ‘&#34;&gt;äºŒå‰æŸ¥æ‰¾æ ‘&lt;/h2&gt;
&lt;h3 id=&#34;æ•°æ®ç»“æ„å®šä¹‰&#34;&gt;æ•°æ®ç»“æ„å®šä¹‰&lt;/h3&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;

// èŠ‚ç‚¹çš„å®šä¹‰
template&amp;lt;class T&amp;gt;
class BinarySearchTreeNode
{
public:
    BinarySearchTreeNode()
    {
        left = 0;
        right = 0;
    }
    BinarySearchTreeNode(T data)
    {
        this-&amp;gt;data = data;
        left =  0;
        right = 0;
    }
    ~BinarySearchTreeNode(){};
    T data;  // ä¿å­˜çš„èŠ‚ç‚¹çš„æ•°æ®
    BinarySearchTreeNode *left; // æŒ‡å‘å·¦èŠ‚ç‚¹
    BinarySearchTreeNode *right; // æŒ‡å‘å³èŠ‚ç‚¹
};


// æ ‘çš„å®šä¹‰
template&amp;lt;class T&amp;gt;
class BinarySearchTree
{
private:
    BinarySearchTreeNode&amp;lt;T&amp;gt; *root;  // å®šä¹‰å¤´èŠ‚ç‚¹
    int treeNodeNum;             // æ ‘çš„èŠ‚ç‚¹æ•°
    void deleteNodeAll(BinarySearchTreeNode&amp;lt;T&amp;gt; *node); // åˆ é™¤æ‰€æœ‰èŠ‚ç‚¹
    // æ˜¾ç¤ºèŠ‚ç‚¹
    void DLR(BinarySearchTreeNode&amp;lt;T&amp;gt; *node);
    void LDR(BinarySearchTreeNode&amp;lt;T&amp;gt; *node);
    void LRD(BinarySearchTreeNode&amp;lt;T&amp;gt; *node);
    // åˆ é™¤*&amp;amp;ä»£è¡¨æŒ‡é’ˆå¼•ç”¨
    void deleteNodeByMerge(BinarySearchTreeNode&amp;lt;T&amp;gt;*&amp;amp; node); // åˆå¹¶åˆ é™¤
    void deleteNodeByCopy(BinarySearchTreeNode&amp;lt;T&amp;gt;*&amp;amp; node);  // å¤åˆ¶åˆ é™¤
public:
    BinarySearchTree()
    {
        root = 0;
        treeNodeNum = 0;
    };
    ~BinarySearchTree();
    // æ¸…ç©ºæ ‘
    void clear();
    // èŠ‚ç‚¹çš„ä¸ªæ•°
    int Nodes()
    {
        return treeNodeNum;
    }
    // æ˜¯å¦ä¸ºç©ºæ ‘
    bool isEmpty()
    {
        return root == 0;
    }
    // æ’å…¥æ•°æ®
    void inseartNode(const T data);
    // æ·±åº¦ä¼˜å…ˆéå†æ ‘
    // å‰åºéå†(DLR æ ¹-&amp;gt;å·¦-&amp;gt;å³)
    void showNodeByDLR();
    // ä¸­åºéå†(LDR å·¦-&amp;gt;æ ¹-&amp;gt;å³)
    void showNodeByLDR();
    // ååºéå†(LRD å·¦-&amp;gt;å³-&amp;gt;æ ¹)
    void showNodeByLRD();
    // åˆ é™¤èŠ‚ç‚¹çš„æ•°æ®
    // åˆå¹¶åˆ é™¤
    bool removeNodeMerge(const T data);
    // å¤åˆ¶åˆ é™¤
    bool removeNodeCopy(const T data);
    // æŸ¥æ‰¾æ•°æ®
    bool SearchData(const T data);
};

&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&#34;æ•°æ®æ“ä½œ&#34;&gt;æ•°æ®æ“ä½œ&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;å¢åˆ æ”¹æŸ¥&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;æ•°æ®çš„æ’å…¥&#34;&gt;æ•°æ®çš„æ’å…¥&lt;/h4&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;template&amp;lt;class T&amp;gt;
void BinarySearchTree&amp;lt;T&amp;gt; ::inseartNode(const T data)
{
    BinarySearchTreeNode&amp;lt;T&amp;gt; *new_node = new BinarySearchTreeNode&amp;lt;T&amp;gt;(data);
    // å¦‚æœä¸ºç©ºæ ‘
    if(isEmpty())
    {
        root = new_node;  // æ–°å»ºèŠ‚ç‚¹è®¾ç½®ä¸ºroot èŠ‚ç‚¹
        treeNodeNum ++;   // æ ‘çš„èŠ‚ç‚¹æ•°+1
        return;
    }
    BinarySearchTreeNode&amp;lt;T&amp;gt; *node = root;
    // éå†æ ‘ï¼Œ æ‰¾åˆ°æ’å…¥çš„èŠ‚ç‚¹çš„ä½ç½®
    while (node != 0)
    {
        // å½“èŠ‚ç‚¹çš„å€¼å¤§äºæ’å…¥çš„å€¼æ—¶ï¼Œå°±æ’å…¥åˆ°å·¦å­æ•°
        if(node-&amp;gt;data &amp;gt; data)
        {
            // å·¦èŠ‚ç‚¹ä¸ºnill, å°†æ–°èŠ‚ç‚¹èµ‹å€¼ç»™èŠ‚ç‚¹çš„å·¦èŠ‚ç‚¹
            if(node-&amp;gt;left == NULL)
            {
                node-&amp;gt;left = new_node;
                break;     // æ¨å‡ºå¾ªç¯
            }
            else
            {
                node = node-&amp;gt;left;
                continue;     // ç»§ç»­æŸ¥æ‰¾ä¸‹ä¸€ä¸ªèŠ‚ç‚¹
            }
        }
        else
        {
            // å¦‚æœå³èŠ‚ç‚¹ä¸ºnill, å³èŠ‚ç‚¹-&amp;gt;æ–°èŠ‚ç‚¹
            if(node-&amp;gt;right == NULL)
            {
                node-&amp;gt;right = new_node;
                break;
            }
            else
            {
                node = node-&amp;gt;right;
                continue;
            }

        }    
    }
    treeNodeNum ++; // æ•°çš„èŠ‚ç‚¹æ•°+1

}
&lt;/code&gt;&lt;/pre&gt;&lt;h4 id=&#34;æ•°æ®çš„åˆ é™¤&#34;&gt;æ•°æ®çš„åˆ é™¤&lt;/h4&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;// é‡‡ç”¨é€’å½’çš„æ–¹å¼åˆ é™¤èŠ‚ç‚¹
template&amp;lt;class T&amp;gt;
void BinarySearchTree&amp;lt;T&amp;gt; ::deleteNodeAll(BinarySearchTreeNode&amp;lt;T&amp;gt; *node)
{
    // å¦‚æœçš„ç©ºæ ‘å°±ç»“æŸé€’å½’
    if(node == 0)
    {
        return;
    }
    deleteNodeAll(node-&amp;gt;left);
    deleteNodeAll(node-&amp;gt;right);
    cout &amp;lt;&amp;lt; node-&amp;gt;data &amp;lt;&amp;lt; endl;

    delete node;   // é‡Šæ”¾èµ„æº
}
template&amp;lt;class T&amp;gt;
void BinarySearchTree&amp;lt;T&amp;gt; ::clear()
{
    deleteNodeAll(root);   // æ¸…ç©ºæ‰€æœ‰èŠ‚ç‚¹
    treeNodeNum = 0;    // æ ‘çš„èŠ‚ç‚¹æ•°ä¸º0
}

/*
åˆå¹¶åˆ é™¤æ³•ï¼š
ä»åˆ é™¤çš„èŠ‚ç‚¹çš„ä¸¤æ£µå­æ ‘åˆå¹¶æœªä¸€æ£µæ ‘ï¼Œç„¶åå°†è¿™é¢—æ ‘è¿æ¥åˆ°åˆ é™¤èŠ‚ç‚¹çš„çˆ¶èŠ‚ç‚¹
å…·ä½“æ“ä½œï¼šå·¦å­æ ‘çš„æœ€å¤§å€¼å·¦ä½œä¸ºæœ‰å­æ ‘çš„çˆ¶èŠ‚ç‚¹ï¼Œå·¦å­æ ‘çš„æ ¹èŠ‚ç‚¹ä½œä¸ºè¿™æ£µæ ‘çš„æ ¹èŠ‚ç‚¹ 
æˆ–å³å­æ ‘çš„æœ€å°å€¼ä½œä¸ºå·¦å­æ ‘çš„çˆ¶èŠ‚ç‚¹ï¼Œå³å­æ ‘çš„æ ¹èŠ‚ç‚¹ä½œä¸ºè¿™æ£µæ ‘çš„æ ¹èŠ‚ç‚¹
*/
template&amp;lt;class T&amp;gt;
void BinarySearchTree&amp;lt;T&amp;gt; ::deleteNodeByMerge(BinarySearchTreeNode&amp;lt;T&amp;gt;*&amp;amp; node)
{
    // å·¦å­æ ‘ä½œä¸ºrootä½œä¸ºæ ‘çš„root
    /*
    BinarySearchTreeNode&amp;lt;T&amp;gt; *temp = node;
    if(node != 0)
    {
        // å¦‚æœèŠ‚ç‚¹çš„å·¦èŠ‚ç‚¹ä¸ºç©º
        if(!node-&amp;gt;left)
        {
            node = node-&amp;gt;right;  //ç›´æ¥æŒ‡å‘nodeçš„å³èŠ‚ç‚¹
        }
        // å¦‚æœå³å­èŠ‚ç‚¹ä¸ºç©º
        else if(!node-&amp;gt;right)
        {
            node = node-&amp;gt;left;  // ç›´æ¥æŒ‡å‘nodeçš„å·¦èŠ‚ç‚¹
        }
        else{
            temp = node-&amp;gt;left; // temp ä¸ºnodeçš„å·¦èŠ‚ç‚¹
            // æ‰¾å‡ºå·¦èŠ‚ç‚¹ä¸­çš„æœ€å¤§å€¼
            while (temp-&amp;gt;right)
            {
                temp = temp-&amp;gt;right;
            }
            temp-&amp;gt;right = node-&amp;gt;right; // å·¦å­æ ‘çš„æœ€å¤§å€¼æŒ‡å‘å³èŠ‚ç‚¹
            temp = node;           
            node = node-&amp;gt;left;         // å·¦å­æ ‘ä½œä¸ºä¸¤é¢—æ ‘çš„å¤´èŠ‚ç‚¹
            
        }
        delete temp;
    } */
    // å³å­æ ‘çš„rootä½œä¸ºæ ‘çš„root
    BinarySearchTreeNode&amp;lt;T&amp;gt; *temp = node;
    if(node)
    {
        if(!node-&amp;gt;left)
        {
            node = node-&amp;gt;right;
        }
        else if(!node-&amp;gt;right)
        {
            node = node-&amp;gt;left;
        }
        else
        {
            temp = node-&amp;gt;right;
            while (temp-&amp;gt;left)
            {
                temp = temp -&amp;gt;left;
            }
            temp -&amp;gt;left = node-&amp;gt;left;
            temp = node;
            node = node-&amp;gt;right;
        }
        delete temp;
    }
}

/*
å¤åˆ¶åˆ é™¤æ³•ï¼š
å°†è¢«åˆ é™¤èŠ‚ç‚¹çš„å·¦å­æ ‘çš„æœ€å¤§å€¼æˆ–è€…å³å­æ ‘çš„æœ€å°å€¼å¤åˆ¶ç»™è¢«åˆ é™¤çš„èŠ‚ç‚¹çš„æ•°å€¼ï¼Œ
ç„¶ååˆ é™¤å·¦å­æ ‘çš„æœ€å¤§å€¼çš„èŠ‚ç‚¹æˆ–è€…å³å­æ ‘çš„æœ€å°å€¼çš„èŠ‚ç‚¹
*/
template&amp;lt;class T&amp;gt;
void BinarySearchTree&amp;lt;T&amp;gt; ::deleteNodeByCopy(BinarySearchTreeNode&amp;lt;T&amp;gt;*&amp;amp; node)
{
    // å¤åˆ¶å³å­æ ‘çš„æœ€å°å€¼
    /*
    BinarySearchTreeNode&amp;lt;T&amp;gt; *prev = 0;       // å¤åˆ¶èŠ‚ç‚¹(å³å­æ ‘æœ€å°å€¼è¢«åˆ èŠ‚ç‚¹)çš„å‰é©±èŠ‚ç‚¹
    BinarySearchTreeNode&amp;lt;T&amp;gt; *temp = node;
    if(node)
    {
        if(!node-&amp;gt;left)
        {
            node = node-&amp;gt;right;
        }
        else if(!node-&amp;gt;right)
        {
            node = node-&amp;gt;left;
        }
        else
        {
            temp = node-&amp;gt;right;
            // æ‰¾åˆ°å³å­æ ‘çš„æœ€å°å€¼
            while (temp-&amp;gt;left)
            {
                prev = temp;
                temp = temp-&amp;gt;left;
            }
            node-&amp;gt;data = temp-&amp;gt;data;   // å°†å³å­æ ‘çš„æœ€å°å€¼å¤åˆ¶ç»™è¢«åˆ èŠ‚ç‚¹
            // å½“å³å­æ ‘çš„é¦–èŠ‚ç‚¹æ²¡æœ‰å·¦èŠ‚ç‚¹æ—¶
            if(prev == node)
            {
                node-&amp;gt;right = temp-&amp;gt;right; // ç›´æ¥æŒ‡å‘è¢«åˆ èŠ‚ç‚¹çš„å³èŠ‚ç‚¹
            }
            else
            {
                prev-&amp;gt;left = temp-&amp;gt;right; // å…ˆé©±èŠ‚ç‚¹çš„å·¦èŠ‚ç‚¹æŒ‡å‘åˆ é™¤èŠ‚ç‚¹çš„å³èŠ‚ç‚¹
            }
        }
        delete temp;
    }*/
    // å¤åˆ¶å·¦å­æ ‘çš„æœ€å¤§å€¼
    BinarySearchTreeNode&amp;lt;T&amp;gt; *prev = 0;       // å¤åˆ¶èŠ‚ç‚¹(å³å­æ ‘æœ€å°å€¼è¢«åˆ èŠ‚ç‚¹)çš„å‰é©±èŠ‚ç‚¹
    BinarySearchTreeNode&amp;lt;T&amp;gt; *temp = node;
    if(node)
    {
        if(!node-&amp;gt;left)
        {
            node = node-&amp;gt;right;
        }
        else if(!node-&amp;gt;right)
        {
            node = node-&amp;gt;left;
        }
        else
        {
            temp = node-&amp;gt;left;
            // æ‰¾åˆ°å·¦å­æ ‘çš„æœ€å¤§å€¼
            while (temp-&amp;gt;right)
            {
                prev = temp;
                temp = temp-&amp;gt;right;
            }
            node-&amp;gt;data = temp-&amp;gt;data;   // å°†å·¦å­æ ‘çš„æœ€å¤§å€¼å¤åˆ¶ç»™è¢«åˆ èŠ‚ç‚¹
            // å½“å·¦å­æ ‘çš„é¦–èŠ‚ç‚¹æ²¡æœ‰å³èŠ‚ç‚¹æ—¶
            if(prev == node)
            {
                node-&amp;gt;left = temp-&amp;gt;left; // ç›´æ¥æŒ‡å‘è¢«åˆ èŠ‚ç‚¹çš„å·¦èŠ‚ç‚¹
            }
            else
            {
                prev-&amp;gt;right = temp-&amp;gt;left; // å…ˆé©±èŠ‚ç‚¹çš„å³èŠ‚ç‚¹æŒ‡å‘åˆ é™¤èŠ‚ç‚¹çš„å·¦èŠ‚ç‚¹
            }
        }
        delete temp;
    }


}

// åˆå¹¶åˆ é™¤
template&amp;lt;class T&amp;gt;
bool BinarySearchTree&amp;lt;T&amp;gt; ::removeNodeMerge(const T data)
{
    if(isEmpty())
    {
        cout &amp;lt;&amp;lt; &amp;quot;the tree is empty&amp;quot; &amp;lt;&amp;lt; endl;
        return false;
    }
    BinarySearchTreeNode&amp;lt;T&amp;gt; *prev_node = 0;  // å¤´èŠ‚ç‚¹
    BinarySearchTreeNode&amp;lt;T&amp;gt; *node = root;
    // æ‰¾åˆ°å€¼çš„èŠ‚ç‚¹
    while (node)
    {
        // å¦‚æœnodeçš„å€¼ç­‰äºdata
        if(node-&amp;gt;data == data)
        {
            break;
        }
        prev_node = node;  // nodeçš„å¤´èŠ‚ç‚¹
        // node çš„å€¼å¤§äºdeta å°±å¾€å·¦å­æ ‘æ‰¾
        if(node-&amp;gt;data &amp;gt; data)
        {
            node = node-&amp;gt;left;
        }
        // node çš„å€¼å°äº data å°±å¾€å³å­æ ‘æ‰¾
        else{
            node = node-&amp;gt;right;
        }
    }
    // æ‰¾åˆ°å€¼çš„èŠ‚ç‚¹äº†
    if(node != 0 &amp;amp;&amp;amp; node-&amp;gt;data == data)
    {
        // å¦‚æœæ˜¯å¤´èŠ‚ç‚¹
        if(node == root)
        {
            // deleteNodeByMerge(root);
            deleteNodeByCopy(root);
        }
        // å…¶ä»–èŠ‚ç‚¹çš„å·¦èŠ‚ç‚¹==data
        else if(prev_node-&amp;gt;left == node)
        {
            // deleteNodeByMerge(prev_node-&amp;gt;left);
            deleteNodeByCopy(prev_node-&amp;gt;left);
        }
        else
        {
            // deleteNodeByMerge(prev_node-&amp;gt;right);
            deleteNodeByCopy(prev_node-&amp;gt;right);
        }
        treeNodeNum--; //èŠ‚ç‚¹æ•°å‡ä¸€
        return true;
    }
    else
    {
        cout &amp;lt;&amp;lt; data &amp;lt;&amp;lt; &amp;quot;no exits tree&amp;quot; &amp;lt;&amp;lt; endl;
    }
    return false;
}

// å¤åˆ¶åˆ é™¤
template&amp;lt;class T&amp;gt;
bool BinarySearchTree&amp;lt;T&amp;gt; ::removeNodeCopy(const T data)
{
    if(isEmpty())
    {
        cout &amp;lt;&amp;lt; &amp;quot;the tree is empty&amp;quot; &amp;lt;&amp;lt; endl;
        return false;
    }
    BinarySearchTreeNode&amp;lt;T&amp;gt; *node = root;
    BinarySearchTreeNode&amp;lt;T&amp;gt; *prev = 0;
    // æ‰¾åˆ°æ•°æ®çš„èŠ‚ç‚¹
    while (node)
    {
        // æ‰¾åˆ°å€¼å°±è·³å‡ºå¾ªç¯
        if(node-&amp;gt;data == data)
        {
            break;
        }
        // æœªæ‰¾åˆ°ï¼Œçˆ¶èŠ‚ç‚¹ç»™prev
        prev = node;
        // data &amp;gt; value -&amp;gt; å³å­æ ‘æŸ¥æ‰¾
        if(data &amp;gt; node-&amp;gt;data)
        {
            node = node-&amp;gt;right;
        }
        // å·¦å­æ ‘æŸ¥æ‰¾
        else
        {
            node = node-&amp;gt;left;
        }
    }
    // æ‰¾åˆ°èŠ‚ç‚¹
    if(node &amp;amp;&amp;amp; node-&amp;gt;data == data)
    {
        // èŠ‚ç‚¹ä¸ºæ ¹èŠ‚ç‚¹
        if(node == root)
        {
            deleteNodeByCopy(root);
        }
        // å³èŠ‚ç‚¹
        else if(prev-&amp;gt;right == node)
        {
            deleteNodeByCopy(prev-&amp;gt;right);
        }
        // å·¦èŠ‚ç‚¹
        else
        {
            deleteNodeByCopy(prev-&amp;gt;left);
        }
        // èŠ‚ç‚¹æ•°-1
        treeNodeNum--;
        return true;
    }
    // æœªæ‰¾åˆ°
    else
    {
        cout &amp;lt;&amp;lt; data &amp;lt;&amp;lt; &amp;quot;no exits in zhe tree&amp;quot; &amp;lt;&amp;lt; endl;
    }
    return false;
}
&lt;/code&gt;&lt;/pre&gt;&lt;h4 id=&#34;æ•°æ®çš„æŸ¥è¯¢&#34;&gt;æ•°æ®çš„æŸ¥è¯¢&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;å‰åºéå†ã€ä¸­åºéå†ã€åç»­éå†ã€å€¼æŸ¥è¯¢&lt;/li&gt;
&lt;/ul&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;template&amp;lt;class T&amp;gt;
void BinarySearchTree&amp;lt;T&amp;gt; ::DLR(BinarySearchTreeNode&amp;lt;T&amp;gt; *node)
{
    if(!node)
    { 
        return;
    }
    // å‰åºéå†(DLR)(æ ¹-&amp;gt;å·¦-&amp;gt;å³)
    cout &amp;lt;&amp;lt; node-&amp;gt;data &amp;lt;&amp;lt; &amp;quot;-&amp;gt;&amp;quot;;
    DLR(node-&amp;gt;left);
    DLR(node-&amp;gt;right);
}
template&amp;lt;class T&amp;gt;
void BinarySearchTree&amp;lt;T&amp;gt; ::LDR(BinarySearchTreeNode&amp;lt;T&amp;gt; *node)
{
    if(!node)
    {
        return;
    }
     // ä¸­åºéå†(LDR)(å·¦-&amp;gt;æ ¹-&amp;gt;å³)
    LDR(node-&amp;gt;left);
    cout &amp;lt;&amp;lt; node-&amp;gt;data &amp;lt;&amp;lt; &amp;quot;-&amp;gt;&amp;quot;;
    LDR(node-&amp;gt;right);
}
template&amp;lt;class T&amp;gt;
void BinarySearchTree&amp;lt;T&amp;gt; ::LRD(BinarySearchTreeNode&amp;lt;T&amp;gt; *node)
{
    if(!node)
    {
        return;
    }
     // ååºéå†(LRD)(å·¦-&amp;gt;å³-&amp;gt;æ ¹)
    LRD(node-&amp;gt;left);
    LRD(node-&amp;gt;right);
    cout &amp;lt;&amp;lt; node-&amp;gt;data &amp;lt;&amp;lt; &amp;quot;-&amp;gt;&amp;quot;;
}
template&amp;lt;class T&amp;gt;
void BinarySearchTree&amp;lt;T&amp;gt; ::showNodeByDLR()
{
    if(isEmpty())
    {
        cout &amp;lt;&amp;lt; &amp;quot;this tree is empty&amp;quot; &amp;lt;&amp;lt; endl;
        return;
    }
    // éå†æ ‘
    BinarySearchTreeNode&amp;lt;T&amp;gt; *node = root;
    cout &amp;lt;&amp;lt; &amp;quot;DLR: &amp;quot;;
    DLR(node);  
    cout &amp;lt;&amp;lt; endl;
}

template&amp;lt;class T&amp;gt;
void BinarySearchTree&amp;lt;T&amp;gt; ::showNodeByLDR()
{
    if(isEmpty())
    {
        cout &amp;lt;&amp;lt; &amp;quot;this tree is empty&amp;quot; &amp;lt;&amp;lt; endl;
        return;
    }
    // éå†æ ‘
    BinarySearchTreeNode&amp;lt;T&amp;gt; *node = root;
    cout &amp;lt;&amp;lt; &amp;quot;LDR: &amp;quot;;
    LDR(node); 
    cout &amp;lt;&amp;lt; endl; 
}

template&amp;lt;class T&amp;gt;
void BinarySearchTree&amp;lt;T&amp;gt; ::showNodeByLRD()
{
    if(isEmpty())
    {
        cout &amp;lt;&amp;lt; &amp;quot;this tree is empty&amp;quot; &amp;lt;&amp;lt; endl;
        return;
    }
    // éå†æ ‘
    BinarySearchTreeNode&amp;lt;T&amp;gt; *node = root;
    cout &amp;lt;&amp;lt; &amp;quot;LRD: &amp;quot;;
    LRD(node); 
    cout &amp;lt;&amp;lt; endl; 
}

template&amp;lt;class T&amp;gt;
bool BinarySearchTree&amp;lt;T&amp;gt; ::SearchData(const T data)
{
    if(isEmpty())
    {
        return false;
    }
    BinarySearchTreeNode&amp;lt;T&amp;gt; *node = root;
    while (node)
    {
        if(node-&amp;gt;data == data)
        {
            return true;
        }
        else if(data &amp;gt; node-&amp;gt;data)
        {
            node = node-&amp;gt;right;
        }
        else
        {
            node = node-&amp;gt;left;
        }
    }
    return false
    ;
}
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&#34;æµ‹è¯•&#34;&gt;æµ‹è¯•&lt;/h3&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;
int main(int argc, char const *argv[])
{
    BinarySearchTree&amp;lt;int&amp;gt; tree;
    tree.inseartNode(5);
    tree.inseartNode(3);
    tree.inseartNode(2);
    tree.inseartNode(4);
    tree.inseartNode(6);
    tree.inseartNode(5);
    tree.inseartNode(7);
    // å‰åºéå†
    tree.showNodeByDLR();
    // ä¸­åºéå†
    tree.showNodeByLDR();
    // ååºéå†
    tree.showNodeByLRD();
    cout &amp;lt;&amp;lt; &amp;quot;*******************************&amp;quot; &amp;lt;&amp;lt; endl;
    cout &amp;lt;&amp;lt; tree.removeNodeMerge(5)  &amp;lt;&amp;lt;  endl;
    // å‰åºéå†
    tree.showNodeByDLR();
    // ä¸­åºéå†
    tree.showNodeByLDR();
    // ååºéå†5
    tree.showNodeByLRD();
    cout &amp;lt;&amp;lt; &amp;quot;nodes is:&amp;quot; &amp;lt;&amp;lt; tree.Nodes() &amp;lt;&amp;lt; endl;
    cout &amp;lt;&amp;lt; &amp;quot;*******************************&amp;quot; &amp;lt;&amp;lt; endl;
    cout &amp;lt;&amp;lt; tree.removeNodeCopy(7)  &amp;lt;&amp;lt;  endl;
    // å‰åºéå†
    tree.showNodeByDLR();
    // ä¸­åºéå†
    tree.showNodeByLDR();
    // ååºéå†
    tree.showNodeByLRD();
    cout &amp;lt;&amp;lt; &amp;quot;nodes is:&amp;quot; &amp;lt;&amp;lt; tree.Nodes() &amp;lt;&amp;lt; endl;
    cout &amp;lt;&amp;lt; &amp;quot;*******************************&amp;quot; &amp;lt;&amp;lt; endl;
    cout &amp;lt;&amp;lt; tree.SearchData(21) &amp;lt;&amp;lt; endl;
    system(&amp;quot;pause&amp;quot;);
    return 0;
}
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&#34;æºç &#34;&gt;æºç &lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://github.com/zcj-git520/DataStructuresAlgorithmsForC/tree/master/tree/binary_tree&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;æˆ‘çš„github:https://github.com/zcj-git520/DataStructuresAlgorithmsForC/tree/master/tree/binary_tree&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
        </item>
        <item>
        <title>æ•°æ®ç»“æ„-æ ˆ(åŸºäºå•é¡¹é“¾è¡¨)&amp;&amp;é˜Ÿåˆ—(åŸºäºåŒå‘é“¾è¡¨)goå®ç°</title>
        <link>https://zcj-git520.github.io/p/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84-%E6%A0%88%E5%9F%BA%E4%BA%8E%E5%8D%95%E9%A1%B9%E9%93%BE%E8%A1%A8%E9%98%9F%E5%88%97%E5%9F%BA%E4%BA%8E%E5%8F%8C%E5%90%91%E9%93%BE%E8%A1%A8go%E5%AE%9E%E7%8E%B0/</link>
        <pubDate>Fri, 31 Dec 2021 22:00:08 +0800</pubDate>
        
        <guid>https://zcj-git520.github.io/p/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84-%E6%A0%88%E5%9F%BA%E4%BA%8E%E5%8D%95%E9%A1%B9%E9%93%BE%E8%A1%A8%E9%98%9F%E5%88%97%E5%9F%BA%E4%BA%8E%E5%8F%8C%E5%90%91%E9%93%BE%E8%A1%A8go%E5%AE%9E%E7%8E%B0/</guid>
        <description>&lt;img src="https://zcj-git520.github.io/p/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84-%E6%A0%88%E5%9F%BA%E4%BA%8E%E5%8D%95%E9%A1%B9%E9%93%BE%E8%A1%A8%E9%98%9F%E5%88%97%E5%9F%BA%E4%BA%8E%E5%8F%8C%E5%90%91%E9%93%BE%E8%A1%A8go%E5%AE%9E%E7%8E%B0/1.jpg" alt="Featured image of post æ•°æ®ç»“æ„-æ ˆ(åŸºäºå•é¡¹é“¾è¡¨)&amp;&amp;é˜Ÿåˆ—(åŸºäºåŒå‘é“¾è¡¨)goå®ç°" /&gt;&lt;h2 id=&#34;æ ˆ&#34;&gt;æ ˆ&lt;/h2&gt;
&lt;p&gt;åŸºäºå•å‘é“¾è¡¨å®ç°&lt;/p&gt;
&lt;h3 id=&#34;æ•°æ®ç»“æ„å®šä¹‰&#34;&gt;æ•°æ®ç»“æ„å®šä¹‰&lt;/h3&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;type stackData struct {
	list *Singly_linked_list.LinkedList
}

// è·å¾—æ ˆçš„é•¿åº¦
func (s *stackData)Len() int{
	return s.list.Len()
}
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&#34;æ•°æ®æ“ä½œ&#34;&gt;æ•°æ®æ“ä½œ&lt;/h3&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;// å°†æ•°æ®æ’å…¥æ ˆé¡¶
func (s *stackData)Push(data interface{}) {
	s.list.AddToHead(data)
}

// å°†æ•°æ®ä»æ ˆé¡¶å–å‡ºï¼Œå¹¶åˆ é™¤æ•°æ®
func (s *stackData)Pop()interface{}{
	data := s.list.QuireIndex(0)
	// æ ˆä¸ä¸ºç©º, åˆ é™¤æ ˆé¡¶æ•°æ®
	if data != nil{
		s.list.DeleteToHead()
	}
	return data
}

// å°†æ•°æ®å–å‡ºï¼Œä¸åˆ é™¤æ•°æ®
func (s *stackData)GetTopValue()interface{}{
	return s.list.QuireIndex(0)
}

// å±•ç¤ºæ ˆ
func (s *stackData)ShowStack() {
	s.list.QuireAll()
}
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&#34;åˆ›å»ºæ ˆ&#34;&gt;åˆ›å»ºæ ˆ&lt;/h3&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;func NewStackData()*stackData{
	return  &amp;amp;stackData{list:Singly_linked_list.NewLinkedList()}
}
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&#34;é˜Ÿåˆ—&#34;&gt;é˜Ÿåˆ—&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;åŸºäºåŒå‘é“¾è¡¨å®ç°&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;æ•°æ®ç»“æ„å®šä¹‰-1&#34;&gt;æ•°æ®ç»“æ„å®šä¹‰&lt;/h3&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;type queueData struct {
	list *double_linked_list.DoubleList
}

// è·å¾—é˜Ÿåˆ—çš„å¤§å°
func (q *queueData)Len() int{
	return q.list.Len()
}
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&#34;æ•°æ®çš„æ“ä½œ&#34;&gt;æ•°æ®çš„æ“ä½œ&lt;/h3&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;// å°†æ•°æ®é˜Ÿå°¾
func (q *queueData)EnQueue(data interface{}) {
	q.list.AddToTail(data)
}

// å°†æ•°æ®ä»é˜Ÿé¦–å–å‡ºï¼Œå¹¶åˆ é™¤æ•°æ®
func (q *queueData)DeQueue()interface{}{
	data := q.list.QuireIndex(0)
	// æ ˆä¸ä¸ºç©º, åˆ é™¤æ ˆé¡¶æ•°æ®
	if data != nil{
		q.list.DeleteToHead()
	}
	return data
}

// å°†æ•°æ®å–å‡ºï¼Œä¸åˆ é™¤æ•°æ®
func (q *queueData)GetTopQueueValue()interface{}{
	return q.list.QuireIndex(0)
}

// å±•ç¤ºé˜Ÿåˆ—
func (q *queueData)ShowQueue() {
	q.list.QuireAll()
}
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&#34;åˆ›å»ºé˜Ÿåˆ—&#34;&gt;åˆ›å»ºé˜Ÿåˆ—&lt;/h3&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;func NewQueueData()*queueData{
	return  &amp;amp;queueData{list:double_linked_list.NewDoubleLinkedList()}
}
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&#34;æºç &#34;&gt;æºç &lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://github.com/zcj-git520/DataStructuresAlgorithmsForGo/tree/master/stack_queue/queue&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;æˆ‘çš„github:https:https://github.com/zcj-git520/DataStructuresAlgorithmsForGo/tree/master/stack_queue/queue&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://github.com/zcj-git520/DataStructuresAlgorithmsForGo/tree/master/stack_queue/stack&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;æˆ‘çš„github:https:https://github.com/zcj-git520/DataStructuresAlgorithmsForGo/tree/master/stack_queue/stack&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
        </item>
        <item>
        <title>æ•°æ®ç»“æ„-æ ˆ(åŸºäºå•é¡¹é“¾è¡¨)&amp;&amp;é˜Ÿåˆ—(åŸºäºåŒå‘é“¾è¡¨)c&#43;&#43;å®ç°</title>
        <link>https://zcj-git520.github.io/p/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84-%E6%A0%88%E5%9F%BA%E4%BA%8E%E5%8D%95%E9%A1%B9%E9%93%BE%E8%A1%A8%E9%98%9F%E5%88%97%E5%9F%BA%E4%BA%8E%E5%8F%8C%E5%90%91%E9%93%BE%E8%A1%A8c-%E5%AE%9E%E7%8E%B0/</link>
        <pubDate>Fri, 31 Dec 2021 21:00:08 +0800</pubDate>
        
        <guid>https://zcj-git520.github.io/p/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84-%E6%A0%88%E5%9F%BA%E4%BA%8E%E5%8D%95%E9%A1%B9%E9%93%BE%E8%A1%A8%E9%98%9F%E5%88%97%E5%9F%BA%E4%BA%8E%E5%8F%8C%E5%90%91%E9%93%BE%E8%A1%A8c-%E5%AE%9E%E7%8E%B0/</guid>
        <description>&lt;img src="https://zcj-git520.github.io/p/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84-%E6%A0%88%E5%9F%BA%E4%BA%8E%E5%8D%95%E9%A1%B9%E9%93%BE%E8%A1%A8%E9%98%9F%E5%88%97%E5%9F%BA%E4%BA%8E%E5%8F%8C%E5%90%91%E9%93%BE%E8%A1%A8c-%E5%AE%9E%E7%8E%B0/1.jpg" alt="Featured image of post æ•°æ®ç»“æ„-æ ˆ(åŸºäºå•é¡¹é“¾è¡¨)&amp;&amp;é˜Ÿåˆ—(åŸºäºåŒå‘é“¾è¡¨)c&#43;&#43;å®ç°" /&gt;&lt;h2 id=&#34;æ ˆ&#34;&gt;æ ˆ&lt;/h2&gt;
&lt;p&gt;åŸºäºå•å‘é“¾è¡¨å®ç°&lt;/p&gt;
&lt;h3 id=&#34;æ•°æ®ç»“æ„å®šä¹‰&#34;&gt;æ•°æ®ç»“æ„å®šä¹‰&lt;/h3&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;
template&amp;lt;class T&amp;gt;
class Stack
{
private:
    SinglyList&amp;lt;T&amp;gt; list;  // å­˜å‚¨æ•°æ®çš„é“¾è¡¨
public:
    Stack(/* args */){};
    ~Stack();
    // è·å¾—æ ˆçš„é•¿åº¦
    int len()
    {
        return list.getlen();
    }
    // æ¸…ç©ºæ ˆ
    void clear();
    // åˆ¤æ–­æ ˆæ˜¯å¦ä¸ºç©ºs
    bool isEmpty();
    // å°†æ•°æ®æ”¾å…¥æ ˆé¡¶
    void push(T data);
    // è·å–æ ˆé¡¶æ•°æ®ï¼Œå¹¶åˆ é™¤æ•°æ®
    bool pop(T *info);
    // è·å–æ ˆé¡¶æ•°æ®ä½†ä¸åˆ é™¤æ•°æ®
    bool getTopValue(T *info);
    // æ˜¾ç¤ºæ‰€æœ‰æ ˆçš„æ•°æ®
    void showStack();
};
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&#34;æ•°æ®æ“ä½œ&#34;&gt;æ•°æ®æ“ä½œ&lt;/h3&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;
template&amp;lt;class T&amp;gt;
void Stack&amp;lt;T&amp;gt; ::clear()
{
    list.clear();
}

template&amp;lt;class T&amp;gt;
void Stack&amp;lt;T&amp;gt; ::push(T data)
{
    list.inseartToHead(data);
}

template&amp;lt;class T&amp;gt;
bool Stack&amp;lt;T&amp;gt; ::pop(T *info)
{
    // åˆ¤æ–­æ ˆé¡¶æ˜¯å¦æœ‰å€¼
    if(getTopValue(info))
    {
        list.deleteToHead();  // åˆ é™¤æ ˆé¡¶å€¼
        return true;
    }
    return false;
}

template&amp;lt;class T&amp;gt;
bool Stack&amp;lt;T&amp;gt; ::getTopValue(T *info)
{
     // åˆ¤æ–­æ ˆé¡¶æ˜¯å¦æœ‰å€¼
    if(list.queryIndex(0, info))
    {
        return true;
    }
    return false;
}

template&amp;lt;class T&amp;gt;
void Stack&amp;lt;T&amp;gt; ::showStack()
{
    list.queryAll();
}
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&#34;æµ‹è¯•&#34;&gt;æµ‹è¯•&lt;/h3&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;int main()
{
    Stack&amp;lt;int&amp;gt; s;
    s.push(0);
    s.push(1);
    s.push(2);
    s.push(3);
    s.push(4);
    s.showStack();
    cout &amp;lt;&amp;lt; &amp;quot;********************************&amp;quot; &amp;lt;&amp;lt; endl;
    int info = -1;
     if(s.getTopValue(&amp;amp;info))
    {
        cout &amp;lt;&amp;lt; &amp;quot;top value is: &amp;quot; &amp;lt;&amp;lt;info &amp;lt;&amp;lt; endl;
    }
    if(s.getTopValue(&amp;amp;info))
    {
        cout &amp;lt;&amp;lt; &amp;quot;top value is: &amp;quot; &amp;lt;&amp;lt;info &amp;lt;&amp;lt; endl;
    }
    if(s.getTopValue(&amp;amp;info))
    {
        cout &amp;lt;&amp;lt; &amp;quot;top value is: &amp;quot; &amp;lt;&amp;lt;info &amp;lt;&amp;lt; endl;
    }
    cout &amp;lt;&amp;lt; &amp;quot;********************************&amp;quot; &amp;lt;&amp;lt; endl;
    s.showStack();
    cout &amp;lt;&amp;lt; &amp;quot;********************************&amp;quot; &amp;lt;&amp;lt; endl;
    if(s.pop(&amp;amp;info))
    {
        cout &amp;lt;&amp;lt; &amp;quot;top value is: &amp;quot; &amp;lt;&amp;lt;info &amp;lt;&amp;lt; endl;
    }
    if(s.pop(&amp;amp;info))
    {
        cout &amp;lt;&amp;lt; &amp;quot;top value is: &amp;quot; &amp;lt;&amp;lt;info &amp;lt;&amp;lt; endl;
    }
    if(s.pop(&amp;amp;info))
    {
        cout &amp;lt;&amp;lt; &amp;quot;top value is: &amp;quot; &amp;lt;&amp;lt;info &amp;lt;&amp;lt; endl;
    }
    if(s.pop(&amp;amp;info))
    {
        cout &amp;lt;&amp;lt; &amp;quot;top value is: &amp;quot; &amp;lt;&amp;lt;info &amp;lt;&amp;lt; endl;
    }
    cout &amp;lt;&amp;lt; &amp;quot;********************************&amp;quot; &amp;lt;&amp;lt; endl;
    s.showStack();
    cout &amp;lt;&amp;lt; &amp;quot;********************************&amp;quot; &amp;lt;&amp;lt; endl;
    system(&amp;quot;pause&amp;quot;);
    return 0;
}

&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&#34;é˜Ÿåˆ—&#34;&gt;é˜Ÿåˆ—&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;åŸºäºåŒå‘é“¾è¡¨å®ç°&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;æ•°æ®ç»“æ„å®šä¹‰-1&#34;&gt;æ•°æ®ç»“æ„å®šä¹‰&lt;/h3&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;
template&amp;lt;class T&amp;gt;
class Queue
{
private:
    TwoWayList&amp;lt;T&amp;gt; list;  // å®šä¹‰çš„åŒå‘é“¾è¡¨
public:
    Queue(/* args */){};
    ~Queue();
     // è·å¾—é˜Ÿåˆ—çš„é•¿åº¦
    int len()
    {
        return list.getlen();
    }
    // æ¸…ç©ºé˜Ÿåˆ—
    void clear();
    // åˆ¤æ–­æ ˆæ˜¯å¦ä¸ºç©ºs
    bool isEmpty();
    // å°†æ•°æ®å­˜å…¥é˜Ÿåˆ—å°¾ä¸­
    void enQueue(T data);
    // è·å–è·å¾—é˜Ÿåˆ—æ•°æ®ï¼Œå¹¶åˆ é™¤æ•°æ®
    bool deQueue(T *info);
    // è·å–è·å¾—é˜Ÿåˆ—æ•°æ®ï¼Œä½†ä¸åˆ é™¤æ•°æ®
    bool getQueueValue(T *info);
    // æ˜¾ç¤ºæ‰€æœ‰é˜Ÿåˆ—çš„æ•°æ®
    void showQueue();
};

&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&#34;æ•°æ®çš„æ“ä½œ&#34;&gt;æ•°æ®çš„æ“ä½œ&lt;/h3&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;
template&amp;lt;class T&amp;gt;
void Queue&amp;lt;T&amp;gt; ::clear()
{
    list.clear();
}

template&amp;lt;class T&amp;gt;
bool Queue&amp;lt;T&amp;gt; ::isEmpty()
{
    return list.isEmpty();
}

template&amp;lt;class T&amp;gt;
void Queue&amp;lt;T&amp;gt; ::enQueue(T data)
{
    list.inseartTotail(data);
}

template&amp;lt;class T&amp;gt;
bool Queue&amp;lt;T&amp;gt; ::getQueueValue(T *info)
{
    if(list.queryIndex(0, info))
    {
        return true;
    }
    return false;
}

template&amp;lt;class T&amp;gt;
bool Queue&amp;lt;T&amp;gt; ::deQueue(T *info)
{
    if(list.queryIndex(0, info))
    {
        list.deleteToHead();
        return true;
    }
    return false;
}

template&amp;lt;class T&amp;gt;
void Queue&amp;lt;T&amp;gt; ::showQueue()
{
    list.queryAll();
}
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&#34;æµ‹è¯•-1&#34;&gt;æµ‹è¯•&lt;/h3&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;int main()
{
    Queue&amp;lt;int&amp;gt; q;
    q.enQueue(0);
    q.enQueue(1);
    q.enQueue(2);
    q.enQueue(3);
    q.enQueue(4);
    q.enQueue(5);
    q.showQueue();
    cout &amp;lt;&amp;lt; &amp;quot;**************************************&amp;quot;&amp;lt;&amp;lt; endl;
    int info = -1;
    if(q.getQueueValue(&amp;amp;info))
    {
        cout &amp;lt;&amp;lt; &amp;quot;queue top value is: &amp;quot; &amp;lt;&amp;lt;info &amp;lt;&amp;lt; endl;
    }
    if(q.getQueueValue(&amp;amp;info))
    {
        cout &amp;lt;&amp;lt; &amp;quot;queue top value is: &amp;quot; &amp;lt;&amp;lt;info &amp;lt;&amp;lt; endl;
    }
    if(q.getQueueValue(&amp;amp;info))
    {
        cout &amp;lt;&amp;lt; &amp;quot;queue top value is: &amp;quot; &amp;lt;&amp;lt;info &amp;lt;&amp;lt; endl;
    }
    q.showQueue();
    cout &amp;lt;&amp;lt; &amp;quot;**************************************&amp;quot;&amp;lt;&amp;lt; endl;
    if(q.deQueue(&amp;amp;info))
    {
        cout &amp;lt;&amp;lt; &amp;quot;queue top value is: &amp;quot; &amp;lt;&amp;lt;info &amp;lt;&amp;lt; endl;
    }
    q.showQueue();
    cout &amp;lt;&amp;lt; &amp;quot;**************************************&amp;quot;&amp;lt;&amp;lt; endl;
    if(q.deQueue(&amp;amp;info))
    {
        cout &amp;lt;&amp;lt; &amp;quot;queue top value is: &amp;quot; &amp;lt;&amp;lt;info &amp;lt;&amp;lt; endl;
    }
    q.showQueue();
    cout &amp;lt;&amp;lt; &amp;quot;**************************************&amp;quot;&amp;lt;&amp;lt; endl;
    if(q.deQueue(&amp;amp;info))
    {
        cout &amp;lt;&amp;lt; &amp;quot;queue top value is: &amp;quot; &amp;lt;&amp;lt;info &amp;lt;&amp;lt; endl;
    }
    q.showQueue();
    cout &amp;lt;&amp;lt; &amp;quot;**************************************&amp;quot;&amp;lt;&amp;lt; endl;
    q.clear();
    q.showQueue();
    system(&amp;quot;pause&amp;quot;);
    return 0;
}

&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&#34;æºç &#34;&gt;æºç &lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://github.com/zcj-git520/DataStructuresAlgorithmsForC/tree/master/stack_queue/queue&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;æˆ‘çš„github:https:https://github.com/zcj-git520/DataStructuresAlgorithmsForC/tree/master/stack_queue/queue&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://github.com/zcj-git520/DataStructuresAlgorithmsForC/tree/master/stack_queue/stack&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;æˆ‘çš„github:https:https://github.com/zcj-git520/DataStructuresAlgorithmsForGo/tree/master/stack_queue/stackhttps://github.com/zcj-git520/DataStructuresAlgorithmsForC/tree/master/stack_queue/stack&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
        </item>
        <item>
        <title>æ•°æ®ç»“æ„-åŒå‘é“¾è¡¨&amp;&amp;å¾ªç¯åŒå‘é“¾è¡¨goè¯­è¨€å®ç°</title>
        <link>https://zcj-git520.github.io/p/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84-%E5%8F%8C%E5%90%91%E9%93%BE%E8%A1%A8%E5%BE%AA%E7%8E%AF%E5%8F%8C%E5%90%91%E9%93%BE%E8%A1%A8go%E8%AF%AD%E8%A8%80%E5%AE%9E%E7%8E%B0/</link>
        <pubDate>Thu, 30 Dec 2021 22:00:08 +0800</pubDate>
        
        <guid>https://zcj-git520.github.io/p/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84-%E5%8F%8C%E5%90%91%E9%93%BE%E8%A1%A8%E5%BE%AA%E7%8E%AF%E5%8F%8C%E5%90%91%E9%93%BE%E8%A1%A8go%E8%AF%AD%E8%A8%80%E5%AE%9E%E7%8E%B0/</guid>
        <description>&lt;img src="https://zcj-git520.github.io/p/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84-%E5%8F%8C%E5%90%91%E9%93%BE%E8%A1%A8%E5%BE%AA%E7%8E%AF%E5%8F%8C%E5%90%91%E9%93%BE%E8%A1%A8go%E8%AF%AD%E8%A8%80%E5%AE%9E%E7%8E%B0/1.jpg" alt="Featured image of post æ•°æ®ç»“æ„-åŒå‘é“¾è¡¨&amp;&amp;å¾ªç¯åŒå‘é“¾è¡¨goè¯­è¨€å®ç°" /&gt;&lt;h2 id=&#34;åŒå‘é“¾è¡¨&#34;&gt;åŒå‘é“¾è¡¨&lt;/h2&gt;
&lt;h3 id=&#34;æ•°æ®ç»“æ„çš„å®šä¹‰&#34;&gt;æ•°æ®ç»“æ„çš„å®šä¹‰&lt;/h3&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;// åŒå‘é“¾è¡¨çš„èŠ‚ç‚¹å®šä¹‰
type doubleLinkedNode struct {
	info  interface{}       // å­˜å‚¨çš„æ•°æ®
	prev *doubleLinkedNode  // æŒ‡å‘å…ˆé©±èŠ‚ç‚¹
	next *doubleLinkedNode  // æŒ‡å‘åé©±å‡ ç‚¹
}

// åŒå‘é“¾è¡¨å®šä¹‰
type DoubleList struct {
	Head *doubleLinkedNode   // å¤´èŠ‚ç‚¹
	Tail *doubleLinkedNode   // å°¾èŠ‚ç‚¹
	len  int                 // é“¾è¡¨é•¿åº¦
}
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&#34;åˆ›å»ºèŠ‚ç‚¹&#34;&gt;åˆ›å»ºèŠ‚ç‚¹&lt;/h3&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;func createNode(data interface{}) *doubleLinkedNode {
	return &amp;amp;doubleLinkedNode{
		info: data,
		prev: nil,
		next: nil,
	}
}
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&#34;é“¾è¡¨çš„é•¿åº¦&#34;&gt;é“¾è¡¨çš„é•¿åº¦&lt;/h3&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;// é“¾è¡¨çš„é•¿åº¦
func(d *DoubleList)Len() int{
	return d.len
}
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&#34;æ•°æ®çš„æ’å…¥&#34;&gt;æ•°æ®çš„æ’å…¥&lt;/h3&gt;
&lt;h4 id=&#34;å•ä¸ªèŠ‚ç‚¹çš„æ’å…¥&#34;&gt;å•ä¸ªèŠ‚ç‚¹çš„æ’å…¥&lt;/h4&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;// é“¾è¡¨çš„å°¾æ’æ³•
func (d *DoubleList)AddToTail(info interface{}) *DoubleList {
	newNode := createNode(info)  // åˆ›å»ºæ–°èŠ‚ç‚¹
	// é“¾è¡¨ä¸ºç©º, å¤´å°¾èŠ‚ç‚¹éƒ½æŒ‡å‘è¯¥èŠ‚ç‚¹
	if d.Head == nil{
		d.Head = newNode
		d.Tail = newNode
	}else{
		d.Tail.next = newNode
		newNode.prev = d.Tail
		d.Tail = d.Tail.next
	}
	// é“¾è¡¨é•¿åº¦+1
	d.len++
	return d
}

// é“¾è¡¨çš„å¤´æ’æ³•
func (d *DoubleList)AddToHead(info interface{}) *DoubleList  {
	newNode := createNode(info)  // åˆ›å»ºèŠ‚ç‚¹
	// é“¾è¡¨ä¸ºç©º
	if d.Head == nil{
		d.Head = newNode
		d.Tail = newNode
	}else{
		newNode.next = d.Head    // æ–°èŠ‚ç‚¹çš„åé©±æŒ‡å‘å¤´èŠ‚ç‚¹
		d.Head.prev = newNode    // å¤´èŠ‚ç‚¹çš„å‰é©±æŒ‡å‘æ–°èŠ‚ç‚¹
		d.Head = newNode         // å°†æ–°èŠ‚ç‚¹è®¾ç½®å°¾å¤´èŠ‚ç‚¹
	}
	// é“¾è¡¨é•¿åº¦+1
	d.len++
	return  d
}

// é“¾è¡¨çš„index
// é€šè¿‡index=&amp;gt;æ’å…¥é“¾è¡¨æ–°çš„èŠ‚ç‚¹
// indexä¸ºæ­£æ•° ä¸ºä»å·¦-&amp;gt;å³ // 0è¡¨ç¤ºç¬¬ä¸€ä¸ªèŠ‚ç‚¹
// indexä¸ºè´Ÿæ•° ä¸ºä»å³-&amp;gt;å·¦ // -1è¡¨ç¤ºç¬¬ä¸€ä¸ªèŠ‚ç‚¹
func (d *DoubleList)AddToIndex(index int, info interface{}) *DoubleList {
	// å½“é“¾è¡¨ä¸ºç©ºæ—¶ï¼Œé‡‡ç”¨äº†å°¾æ’å…¥æ³•æ’å…¥æ•°æ®
	if d.Head == nil{
		return d.AddToTail(info)
	}
	// å½“indexå¤§äºé“¾è¡¨çš„å€¼æ—¶ï¼Œé»˜è®¤å°†æ•°æ®æ’å…¥åˆ°é“¾è¡¨çš„åé¢
	if int(math.Abs(float64(index))) &amp;gt; d.len-1{
		return d.AddToTail(info)
	}
	// æ’å…¥é“¾è¡¨çš„å¤´éƒ¨
	if index == 0{
		return d.AddToHead(info)
	}
	// æ’å…¥åˆ°é“¾è¡¨çš„æœ«å°¾
	if index == -1{
		return d.AddToTail(info)
	}
	// å½“index ä¸ºè´Ÿæ•°æ—¶ï¼Œä»å³åˆ°å·¦æ’å…¥
	if index &amp;lt; 0{
		index += d.len +1
	}
	__index := 1  // å†…éƒ¨çš„indexå€¼
	// ä»ç¬¬äºŒä¸ªå€¼å¼€å§‹æ’å…¥
	for node := d.Head; node != d.Tail; node = node.next{
		if index == __index{
			newNode := createNode(info)
			node.next.prev = newNode   // èŠ‚ç‚¹çš„åé©±èŠ‚ç‚¹çš„å…ˆé©±æŒ‡å‘æ–°èŠ‚ç‚¹
			newNode.prev = node        // æ–°èŠ‚ç‚¹çš„å‰é©±æŒ‡å‘èŠ‚ç‚¹
			newNode.next = node.next   // æ–°èŠ‚ç‚¹çš„åé©±æŒ‡å‘èŠ‚ç‚¹çš„åé©±
			node.next = newNode           // èŠ‚ç‚¹çš„åé©±æŒ‡å‘æ–°èŠ‚ç‚¹
			// é“¾è¡¨çš„èŠ‚ç‚¹æ•°åŠ 1
			d.len ++
			return d
		}
		__index ++
	}
	return d
}

&lt;/code&gt;&lt;/pre&gt;&lt;h4 id=&#34;é“¾è¡¨çš„åˆå¹¶&#34;&gt;é“¾è¡¨çš„åˆå¹¶&lt;/h4&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;// å°†æ–°çš„é“¾è¡¨æ’å…¥å¤´éƒ¨
func (d *DoubleList)AddListToHead(list *DoubleList)*DoubleList{
	// ä¸¤ä¸ªé“¾è¡¨éƒ½ä¸ºç©ºæ—¶
	if d.Head == nil &amp;amp;&amp;amp; list.Head == nil{
		return d
	}
	// åˆå¹¶è¡¨ä¸ºç©º
	if d.Head != nil &amp;amp;&amp;amp; list.Head == nil{
		return d
	}
	// ä¸»è¡¨ä¸ºç©º
	if d.Head == nil &amp;amp;&amp;amp; list.Head != nil{
		return list
	}
	// åˆå¹¶è¡¨çš„å°¾æŒ‡é’ˆæŒ‡å‘ä¸»è¡¨çš„å¤´
	list.Tail.next = d.Head
	d.Head.prev = list.Tail
	list.Tail = d.Tail
	// è¡¨èŠ‚ç‚¹æ•°åˆå¹¶
	list.len += d.len
	return list
}

// å°†æ–°çš„é“¾è¡¨æ’å…¥åˆ°å°¾éƒ¨
func (d *DoubleList)AddListToTail(list *DoubleList)*DoubleList{
	// ä¸¤ä¸ªé“¾è¡¨éƒ½ä¸ºç©ºæ—¶
	if d.Head == nil &amp;amp;&amp;amp; list.Head == nil{
		return d
	}
	// åˆå¹¶è¡¨ä¸ºç©º
	if d.Head != nil &amp;amp;&amp;amp; list.Head == nil{
		return d
	}
	// ä¸»è¡¨ä¸ºç©º
	if d.Head == nil &amp;amp;&amp;amp; list.Head != nil{
		return list
	}
	// å°†æ–°è¡¨æ’å…¥åˆ°ä¸»è¡¨ä¹‹å
	d.Tail.next = list.Head
	list.Head.prev = d.Tail
	d.Tail = list.Tail
	d.len += list.len
	return d
}

// ç»æ–°çš„è¡¨æ’å…¥åˆ°index
func (d *DoubleList)AddListToIndex(index int, list *DoubleList) *DoubleList {
	// ä¸¤ä¸ªé“¾è¡¨éƒ½ä¸ºç©ºæ—¶
	if d.Head == nil &amp;amp;&amp;amp; list.Head == nil{
		return d
	}
	// åˆå¹¶è¡¨ä¸ºç©º
	if d.Head != nil &amp;amp;&amp;amp; list.Head == nil{
		return d
	}
	// ä¸»è¡¨ä¸ºç©º
	if d.Head == nil &amp;amp;&amp;amp; list.Head != nil{
		return list
	}
	if int(math.Abs(float64(index))) &amp;gt; d.len{
		fmt.Println(&amp;quot;é”™è¯¯çš„index&amp;quot;)
		return d
	}
	if index == 0{
		return d.AddListToHead(list)
	}
	if  index == -1{
		return d.AddListToTail(list)
	}
	if index &amp;lt; 0{
		index += d.len
	}
	__index := 1
	for node := d.Head; node != d.Tail; node = node.next{
		if index == __index{
			node.next.prev = list.Tail
			list.Tail.next = node.next
			node.next = list.Head
			list.Head.prev = node
			d.len += list.len  // é“¾è¡¨çš„æ•°å€¼ç›¸åŠ 
			return d
		}
		__index ++
	}
	return d
}

&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&#34;æ•°æ®çš„åˆ é™¤&#34;&gt;æ•°æ®çš„åˆ é™¤&lt;/h3&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;// é“¾è¡¨å¤´åˆ é™¤æ³•
func (d *DoubleList)DeleteToHead()*DoubleList{
	// é“¾è¡¨ä¸ºç©º
	if d.Head == nil{
		return d
	}
	// é“¾è¡¨ä¸­åªæœ‰ä¸€ä¸ªæ•°
	if d.Head == d.Tail{
		d.Head = nil
		d.Tail = nil
		d.len  = 0
		return d
	}
	d.Head = d.Head.next
	d.Head.prev = nil
	// nodeæ•°å‡ä¸€
	d.len --
	return d
}

// é“¾è¡¨å°¾åˆ é™¤æ³•
func (d *DoubleList)DeleteToTail()*DoubleList{
	// é“¾è¡¨ä¸ºç©º
	if d.Tail == nil{
		return d
	}
	// é“¾è¡¨ä¸­åªæœ‰ä¸€ä¸ªæ•°
	if d.Head == d.Tail{
		d.Head = nil
		d.Tail = nil
		d.len = 0
		return d
	}
	d.Tail = d.Tail.prev
	d.Tail.next = nil
	// nodeæ•°å‡ä¸€
	d.len --
	return d
}

// é€šè¿‡å€¼=&amp;gt;åˆ é™¤é“¾è¡¨çš„èŠ‚ç‚¹(ç¬¬ä¸€ä¸ª)
func (d *DoubleList)DeleteToAValue(value interface{})*DoubleList{
	// é“¾è¡¨ä¸ºç©º
	if d.Head == nil{
		fmt.Println(&amp;quot;é“¾è¡¨ä¸ºç©º&amp;quot;)
		return d
	}
	// value == head.info
	// å°±é‡‡ç”¨å¤´åˆ æ³•
	if value == d.Head.info{
		return  d.DeleteToHead()
	}
	if value == d.Tail.info{
		return  d.DeleteToTail()
	}
	// ä¸­é—´é‡‡ç”¨è½®è¯¢æŸ¥æ‰¾value, ä»ç¬¬äºŒä¸ªå¼€å§‹è½®è¯¢åˆ°å€’æ•°ç¬¬äºŒä¸ªç»“æŸ
	for node := d.Head.next; node != d.Tail; node = node.next{
		if node.info == value{
			//  åˆ é™¤node
			node.next.prev = node.prev
			node.prev.next = node.next
			d.len --
			return d
		}
	}
	fmt.Println(&amp;quot;é“¾è¡¨ä¸­ï¼šå€¼ä¸å­˜åœ¨&amp;quot;)
	return d
}

// é€šè¿‡å€¼=&amp;gt;åˆ é™¤é“¾è¡¨çš„èŠ‚ç‚¹(æ‰€æœ‰)
func (d *DoubleList)DeleteToValue(value interface{})*DoubleList{
	// é“¾è¡¨ä¸ºç©º
	if d.Head == nil{
		fmt.Println(&amp;quot;é“¾è¡¨ä¸ºç©º&amp;quot;)
		return d
	}
	node := d.Head         // å½“å‰çš„node
	for {
		// å½“ä¸‹ä¸€ä¸ªèŠ‚ç‚¹æ˜¯å°¾èŠ‚ç‚¹æ—¶ï¼Œå°±åˆ¤æ–­é¦–ä½å’Œæœ«å°¾æ˜¯ä¸ºéœ€è¦åˆ é™¤çš„node
		if node == d.Tail {
			if d.Head.info == value{
				d.DeleteToHead()
			}
			if d.Tail.info == value{
				d.DeleteToTail()
			}
			return d
		}
		if node.info == value{
			// åˆ é™¤nodeï¼Œ éå¤´èŠ‚ç‚¹
			if node.prev != nil{
				node.next.prev = node.prev
				node.prev.next = node.next
				d.len --
			}else{
				// å¤´èŠ‚ç‚¹
				d.DeleteToHead()
			}
		}
		node = node.next

	}
}

// é€šè¿‡index=&amp;gt;åˆ é™¤é“¾è¡¨çš„èŠ‚ç‚¹
// indexä¸ºæ­£æ•° ä¸ºä»å·¦-&amp;gt;å³ // 0è¡¨ç¤ºç¬¬ä¸€ä¸ªèŠ‚ç‚¹
// indexä¸ºè´Ÿæ•° ä¸ºä»å³-&amp;gt;å·¦ // -1è¡¨ç¤ºç¬¬ä¸€ä¸ªèŠ‚ç‚¹
func (d *DoubleList)DeleteToIndex(index int)*DoubleList{
	// é“¾è¡¨ä¸ºç©º
	if d.Head == nil{
		fmt.Println(&amp;quot;é“¾è¡¨ä¸ºç©º&amp;quot;)
		return d
	}
	// index è¶…è¿‡é“¾è¡¨æ•°
	if int(math.Abs(float64(index))) &amp;gt; d.len-1{
		fmt.Println(&amp;quot;é”™è¯¯çš„index&amp;quot;)
		return d
	}
	// åˆ é™¤ç¬¬ä¸€ä¸ªnode
	if index == 0{
		return d.DeleteToHead()
	}
	if index &amp;lt; 0{
		index += d.len
	}
	if index == d.len -1{
		return d.DeleteToTail()
	}
	_index := 1
	node := d.Head.next
	for {
		if index == _index{
			node.next.prev = node.prev
			node.prev.next = node.next
			d.len --
			return d
		}
		node = node.next
		_index ++
	}
}

&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&#34;æ•°æ®çš„æŸ¥è¯¢&#34;&gt;æ•°æ®çš„æŸ¥è¯¢&lt;/h3&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;// éå†é“¾è¡¨
func (d *DoubleList) QuireAll() {
	if d.Head == nil{
		fmt.Println(&amp;quot;é“¾è¡¨æ•°æ®ä¸ºç©º&amp;quot;)
		return
	}
	node := d.Head
	for {
		if node == nil{
			return
		}
		fmt.Println(node.info)
		if node == d.Tail{
			return
		}
		node = node.next
	}
}

// åˆ¤æ–­valveæ˜¯å¦å­˜åœ¨
func (d *DoubleList)QuireValue(value interface{}) bool{
	// è¡¨ä¸ºç©º
	if d.Head == nil{
		return false
	}
	// è¡¨ä¸­åªå­˜åœ¨ä¸€ä¸ªå€¼
	if d.Head == d.Tail{
		if d.Head.info == value{
			return true
		}
		return false
	}
	// éå†æŸ¥å€¼
	for node := d.Head; node != d.Tail.next; node = node.next{
		if node.info == value{
			return true
		}
	}
	return false
}

// æ ¹æ®ç´¢å¼•è¿”å›å€¼
func (d *DoubleList)QuireIndex(index int) interface{} {
	// é“¾è¡¨ä¸ºç©º
	if d.Head == nil{
		return nil
	}
	if int(math.Abs(float64(index))) &amp;gt; d.len -1 {
		fmt.Println(&amp;quot;ç´¢å¼•å€¼é”™è¯¯&amp;quot;)
		return nil
	}
	if index == 0{
		return d.Head.info
	}
	if index == d.len -1 || index == -1{
		return d.Tail.info
	}
	if index &amp;lt; 0{
		index += d.len
	}
	__index := 1
	for node := d.Head.next; node != d.Tail; node = node.next{
		if __index == index{
			return node.info
		}
		__index ++
	}
	//fmt.Println(&amp;quot;æœªèƒ½æ‰¾åˆ°ï¼ï¼ï¼ï¼&amp;quot;)
	return nil
}

&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&#34;ç»“æ„çš„å…¥å£&#34;&gt;ç»“æ„çš„å…¥å£&lt;/h3&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;func NewDoubleLinkedList()*DoubleList{
	// åˆ›å»ºçš„é“¾è¡¨å¤´å°¾èŠ‚ç‚¹éƒ½ä¸ºç©º
	return &amp;amp;DoubleList{
		Head: nil,
		Tail: nil,
		len: 0,
	}
}
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&#34;å¾ªç¯åŒå‘é“¾è¡¨&#34;&gt;å¾ªç¯åŒå‘é“¾è¡¨&lt;/h2&gt;
&lt;h3 id=&#34;æ•°æ®ç»“æ„çš„å®šä¹‰-1&#34;&gt;æ•°æ®ç»“æ„çš„å®šä¹‰&lt;/h3&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;// èŠ‚ç‚¹çš„å®šä¹‰
type circleDoubleNode struct {
	info  interface{}  // æ•°æ®ç»“æ„çš„å®šä¹‰
	prev  *circleDoubleNode  // å‰é©±æŒ‡é’ˆ
	next  *circleDoubleNode  // åé©±æŒ‡é’ˆ
}

// åŒå‘å¾ªç¯é“¾è¡¨çš„å®šä¹‰
type circleDoubleList struct {
	currentNode *circleDoubleNode  // æŒ‡å‘é“¾è¡¨çš„æŒ‡é’ˆ
	len  int    // é“¾è¡¨çš„é•¿åº¦
}
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&#34;åˆ›å»ºèŠ‚ç‚¹-1&#34;&gt;åˆ›å»ºèŠ‚ç‚¹&lt;/h3&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;func createNode(data interface{}) *circleDoubleNode{
	return &amp;amp;circleDoubleNode{
		info: data,
		prev: nil,
		next: nil,
	}
}
// å¾—åˆ°é“¾è¡¨çš„é•¿åº¦
func (c *circleDoubleList)GetLen()int{
	return c.len
}
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&#34;èŠ‚ç‚¹çš„æ’å…¥&#34;&gt;èŠ‚ç‚¹çš„æ’å…¥&lt;/h3&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;func (c *circleDoubleList)InsertNode(data interface{}) {
	newNode := createNode(data)
	// å¦‚æœé“¾è¡¨ä¸ºç©º
	if c.currentNode == nil{
		c.currentNode = newNode  // æ–°åˆ›å»ºçš„èŠ‚ç‚¹ä¸ºå½“å‰èŠ‚ç‚¹
		// èŠ‚ç‚¹çš„å‰é©±ä¸åé©±éƒ½æŒ‡å‘è‡ªå·±
		c.currentNode.next = c.currentNode
		c.currentNode.prev = c.currentNode
	}else{
		// èŠ‚ç‚¹çš„æ’å…¥
		c.currentNode.next.prev = newNode
		newNode.prev = c.currentNode
		newNode.next = c.currentNode.next
		c.currentNode.next = newNode
		c.currentNode = newNode
	}
	// é“¾è¡¨é•¿åº¦ +1
	c.len ++
}
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&#34;å½“å‰èŠ‚ç‚¹çš„åˆ é™¤&#34;&gt;å½“å‰èŠ‚ç‚¹çš„åˆ é™¤&lt;/h3&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;func (c *circleDoubleList)DeleteNode() bool{
	// é“¾è¡¨ä¸ºç©º
	if c.currentNode == nil{
		return false
	}
	// å½“é“¾è¡¨å€¼å­˜åœ¨ä¸€ä¸ªå…ƒç´ æ—¶
	if c.len == 1{
		c.currentNode = nil
		c.len --
		return true
	}
	// å½“é“¾è¡¨åªå­˜åœ¨ä¸¤ä¸ªå…ƒç´ æ—¶
	if c.len == 2{
		c.currentNode = c.currentNode.next
		c.len --
		return true
	}
	// å½“å‰èŠ‚ç‚¹çš„åé©±èŠ‚ç‚¹çš„å‰é©±æŒ‡é’ˆæŒ‡å‘å½“å‰èŠ‚ç‚¹çš„çš„å‰é©±èŠ‚ç‚¹
	c.currentNode.next.prev = c.currentNode.prev
	// å½“å‰èŠ‚ç‚¹çš„å‰é©±èŠ‚ç‚¹çš„åé©±æŒ‡é’ˆæŒ‡å‘å½“å‰èŠ‚ç‚¹çš„åé©±èŠ‚ç‚¹
	c.currentNode.prev.next = c.currentNode.next
	// è®¾ç½®å½“å‰èŠ‚ç‚¹çš„åé©±èŠ‚ç‚¹ä¸ºå½“å‰èŠ‚ç‚¹
	c.currentNode = c.currentNode.next
	c.len --
	return true
}
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&#34;éå†è¯´æœ‰èŠ‚ç‚¹&#34;&gt;éå†è¯´æœ‰èŠ‚ç‚¹&lt;/h3&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;func (c *circleDoubleList)QuireAll(){
	if c.currentNode == nil{
		fmt.Println(&amp;quot;circle double linked list is empty&amp;quot;)
		return
	}
	//__index := 1
	//for node := c.currentNode.next; node != c.currentNode; node = node.next{
	//	fmt.Printf(&amp;quot;index is %d, node value is %v&amp;quot;, __index, node.info)
	//	__index ++
	//}
	fmt.Printf(&amp;quot;circle double linked list len is %d \n&amp;quot;, c.len)
	node := c.currentNode.next
	for i := 1; i &amp;lt; c.len; i++{
		fmt.Printf(&amp;quot;index is %d, node value is %v \n&amp;quot;, i, node.info)
		node = node.next
	}
	fmt.Printf(&amp;quot;index is %d, node value is %v \n&amp;quot;, c.len, c.currentNode.info)
}

// åˆ¤æ–­å€¼æ˜¯å¦å­˜åœ¨
func (c *circleDoubleList)QuireValue(data interface{}) bool{
	if c.currentNode == nil{
		return false
	}
	node := c.currentNode
	for i := 1; i &amp;lt;= c.len; i++{
		if node.info == data{
			return true
		}
		node = node.next
	}
	return  false
}
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&#34;é“¾è¡¨å®ä¾‹åŒ–&#34;&gt;é“¾è¡¨å®ä¾‹åŒ–&lt;/h3&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;func NewCircleDoubleList()*circleDoubleList{
	return &amp;amp;circleDoubleList{
		currentNode: nil,
		len:         0,
	}
}
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&#34;æºç &#34;&gt;æºç &lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://github.com/zcj-git520/DataStructuresAlgorithmsForGo/tree/master/Linked_list/double_linked_list&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;æˆ‘çš„github:https://github.com/zcj-git520/DataStructuresAlgorithmsForGo/tree/master/Linked_list/double_linked_list&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://github.com/zcj-git520/DataStructuresAlgorithmsForGo/tree/master/Linked_list/circle_double_linked_list&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;æˆ‘çš„github:https://github.com/zcj-git520/DataStructuresAlgorithmsForGo/tree/master/Linked_list/circle_double_linked_list&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
        </item>
        <item>
        <title>æ•°æ®ç»“æ„-åŒå‘é“¾è¡¨&amp;&amp;å¾ªç¯åŒå‘é“¾è¡¨ c&#43;&#43;å®ç°</title>
        <link>https://zcj-git520.github.io/p/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84-%E5%8F%8C%E5%90%91%E9%93%BE%E8%A1%A8%E5%BE%AA%E7%8E%AF%E5%8F%8C%E5%90%91%E9%93%BE%E8%A1%A8-c-%E5%AE%9E%E7%8E%B0/</link>
        <pubDate>Thu, 30 Dec 2021 21:00:08 +0800</pubDate>
        
        <guid>https://zcj-git520.github.io/p/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84-%E5%8F%8C%E5%90%91%E9%93%BE%E8%A1%A8%E5%BE%AA%E7%8E%AF%E5%8F%8C%E5%90%91%E9%93%BE%E8%A1%A8-c-%E5%AE%9E%E7%8E%B0/</guid>
        <description>&lt;img src="https://zcj-git520.github.io/p/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84-%E5%8F%8C%E5%90%91%E9%93%BE%E8%A1%A8%E5%BE%AA%E7%8E%AF%E5%8F%8C%E5%90%91%E9%93%BE%E8%A1%A8-c-%E5%AE%9E%E7%8E%B0/1.jpg" alt="Featured image of post æ•°æ®ç»“æ„-åŒå‘é“¾è¡¨&amp;&amp;å¾ªç¯åŒå‘é“¾è¡¨ c&#43;&#43;å®ç°" /&gt;&lt;h2 id=&#34;åŒå‘é“¾è¡¨&#34;&gt;åŒå‘é“¾è¡¨&lt;/h2&gt;
&lt;h3 id=&#34;æ•°æ®ç»“æ„çš„å®šä¹‰&#34;&gt;æ•°æ®ç»“æ„çš„å®šä¹‰&lt;/h3&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;template&amp;lt;class T&amp;gt;
class TwoWayLinkedNode
{
public:
    TwoWayLinkedNode(/* args */){}; 
    TwoWayLinkedNode(T data)
    {
        this-&amp;gt;data = data;
        this-&amp;gt;prev = 0;
        this-&amp;gt;next = 0;
    }
    ~TwoWayLinkedNode(){};
    T data;       // æ•°æ®
    TwoWayLinkedNode *next;  // æŒ‡å‘åç»§èŠ‚ç‚¹
    TwoWayLinkedNode *prev;   // æŒ‡å‘å‰é©±
};

template&amp;lt;class T&amp;gt;
class TwoWayList
{
private:
    /* data */
    TwoWayLinkedNode&amp;lt;T&amp;gt; *head;   // å¤´èŠ‚ç‚¹
    TwoWayLinkedNode&amp;lt;T&amp;gt; *tail;   // å°¾èŠ‚ç‚¹
    int  len;                    // é“¾è¡¨é•¿åº¦
public:
    TwoWayList()
    {
        head = 0;
        tail = 0;
        len = 0;
    };
    ~TwoWayList();
     // é“¾è¡¨çš„é•¿åº¦+1
    void setlen(int len)
    {
        this-&amp;gt;len += len;
    }; 
    // è¿”å›é“¾è¡¨çš„é•¿åº¦
    int getlen()
    {
        return len;
    };
    // æ¸…ç©ºé“¾è¡¨
    void clear();
    // é“¾è¡¨æ˜¯å¦ä¸ºç©º
    bool isEmpty()
    {
        return head == 0;
    }
    // æ’å…¥åˆ°é“¾è¡¨çš„å¤´éƒ¨
    void inseartToHead(T data);  
    // æ’å…¥åˆ°é“¾è¡¨çš„å°¾éƒ¨
    void inseartTotail(T data); 
    // æ’å…¥åˆ°é“¾è¡¨çš„index
    void inseartToindex(int index, T data); 
    // åˆ é™¤é“¾è¡¨çš„å¤´éƒ¨å…ƒç´ 
    void deleteToHead();
    // åˆ é™¤é“¾è¡¨çš„å°¾éƒ¨å…ƒç´ 
    void deleteToTail();
    // åˆ é™¤é“¾è¡¨çš„indexå…ƒç´ 
    void deleteToIndex(int index);
    // æŸ¥è¯¢é“¾è¡¨çš„æ‰€æœ‰å€¼
    void queryAll();
    // è¿”å›indexçš„å€¼
    bool queryIndex(int index, T *data);
    // åˆ¤æ–­valueæ˜¯å¦å­˜åœ¨
    bool queryValue(T data);
};
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&#34;æ•°æ®çš„æ“ä½œ&#34;&gt;æ•°æ®çš„æ“ä½œ&lt;/h3&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;
template&amp;lt;class T&amp;gt;
void TwoWayList&amp;lt;T&amp;gt; ::inseartToHead(T data)
{
   TwoWayLinkedNode&amp;lt;T&amp;gt; *new_Node = new TwoWayLinkedNode&amp;lt;T&amp;gt;(data); 
   // é“¾è¡¨ä¸ºç©º
   if (isEmpty())
   {
      head = tail = new_Node;
   }
   else
   {
      new_Node-&amp;gt;next = head;   // æ–°èŠ‚ç‚¹çš„åé©±æŒ‡å‘å¤´èŠ‚ç‚¹
      head-&amp;gt;prev = new_Node;   // å¤´èŠ‚ç‚¹çš„å‰é©±æŒ‡å‘æ–°èŠ‚ç‚¹
      head = new_Node;         // å°†æ–°èŠ‚ç‚¹è®¾ç½®æ–°çš„å¤´èŠ‚ç‚¹
   }
   setlen(addOne);
}

template&amp;lt;class T&amp;gt;
void TwoWayList&amp;lt;T&amp;gt; ::inseartTotail(T data)
{
   TwoWayLinkedNode&amp;lt;T&amp;gt; *new_Node = new TwoWayLinkedNode&amp;lt;T&amp;gt;(data);
   if(isEmpty())
   {
      head = tail = new_Node;
   }
   else
   {
      tail-&amp;gt;next = new_Node;  // å°¾èŠ‚ç‚¹çš„nextæŒ‡å‘æ–°èŠ‚ç‚¹
      new_Node-&amp;gt;prev = tail;  // æ–°èŠ‚ç‚¹çš„å‰é©±æŒ‡å‘å°¾èŠ‚ç‚¹
      tail = new_Node;        // å°†æ–°èŠ‚ç‚¹è®¾ç½®ä¸ºæ–°çš„å°¾èŠ‚ç‚¹
   }
   setlen(addOne);
}

template&amp;lt;class T&amp;gt;
void TwoWayList&amp;lt;T&amp;gt; ::inseartToindex(int index, T data)
{
   int len = getlen();
   if(index == 0)
   {
      inseartToHead(data);
      return;
   }
   // é“¾è¡¨ä¸ºç©ºï¼Œå½“index å°äº0 æˆ–è€…å¤§äºç­‰äºé“¾è¡¨æ•°ï¼Œé‡‡ç”¨å°¾æ’æ³•
   if (isEmpty() || index &amp;lt; 0 || index &amp;gt;= len)
   {
      inseartTotail(data);
      return;
   }
   TwoWayLinkedNode&amp;lt;T&amp;gt; *node = head;
   int __index = 1;
   while (__index != index)
   {
      node = node-&amp;gt;next;
      __index ++;
   }
   TwoWayLinkedNode&amp;lt;T&amp;gt; *new_node = new TwoWayLinkedNode&amp;lt;T&amp;gt;(data);
   node-&amp;gt;next-&amp;gt;prev = new_node;   // nodeèŠ‚ç‚¹çš„åç»§èŠ‚ç‚¹çš„å…ˆé©±è¦æŒ‡å‘æ–°èŠ‚ç‚¹
   new_node-&amp;gt;prev = node;         // æ–°èŠ‚ç‚¹çš„å…ˆé©±è¦æŒ‡å‘node
   new_node-&amp;gt;next = node-&amp;gt;next;   // æ–°èŠ‚ç‚¹çš„åç»§è¦æŒ‡å‘nodeçš„åç»§
   node-&amp;gt;next = new_node;         // nodeçš„åç»§è¦æŒ‡å‘æ–°èŠ‚ç‚¹
   setlen(addOne);
}

template&amp;lt;class T&amp;gt;
void TwoWayList&amp;lt;T&amp;gt; ::clear()
{
   while (!isEmpty())
   {
      TwoWayLinkedNode&amp;lt;T&amp;gt; *node = head-&amp;gt;next;
      delete head;
      head = node;
   }
   
}

template&amp;lt;class T&amp;gt;
void TwoWayList&amp;lt;T&amp;gt; ::deleteToHead()
{
   // é“¾è¡¨ä¸ºç©ºå°±è¿”å›
   if(isEmpty())
   {
      return;
   }
   // é“¾è¡¨åªå­˜åœ¨ä¸€ä¸ªèŠ‚ç‚¹
   if(head == tail)
   {
      delete head;
      head = tail = 0;
   }
   else{
       head = head-&amp;gt;next;                // å°†ä¸‹ä¸€èŠ‚ç‚¹è®¾ç½®å¤´èŠ‚ç‚¹
      delete head-&amp;gt;prev;                // é‡Šæ”¾æ–°çš„å¤´èŠ‚ç‚¹çš„å‰é©±èŠ‚ç‚¹
      head-&amp;gt;prev = 0;                   // å¤´èŠ‚ç‚¹çš„å…ˆé©±è®¾ç½®nil
   }
   setlen(ReductOne);
}

template&amp;lt;class T&amp;gt;
void TwoWayList&amp;lt;T&amp;gt; ::deleteToTail()
{
    // é“¾è¡¨ä¸ºç©ºå°±è¿”å›
   if(isEmpty())
   {
      return;
   }
   // é“¾è¡¨åªå­˜åœ¨ä¸€ä¸ªèŠ‚ç‚¹
   if(head == tail)
   {
      delete head;
      head = tail = 0;
   }
   else{
      tail = tail-&amp;gt;prev;                // å°¾èŠ‚ç‚¹çš„å…ˆé©±èŠ‚ç‚¹é‡æ–°è®¾ç½®ä¸ºæ–°çš„å°¾èŠ‚ç‚¹
      delete tail-&amp;gt;next;                // é‡Šæ”¾æ–°çš„å°¾èŠ‚ç‚¹çš„åé©±
      tail-&amp;gt;next = 0;                   // æ–°çš„å°¾èŠ‚ç‚¹çš„åé©±æŒ‡å‘å°¾nil
   }
   setlen(ReductOne);
   
}

template&amp;lt;class T&amp;gt;
void TwoWayList&amp;lt;T&amp;gt; ::deleteToIndex(int index)
{
   len = getlen();
   // é“¾è¡¨ä¸ºç©º,å°±è¿”å›
   if(isEmpty())
   {
      return;
   }
   // index &amp;gt;= len || index &amp;lt; 0 é‡‡ç”¨åˆ é™¤æœ«å°¾å€¼
   if (index &amp;gt;= len || index &amp;lt; 0)
   {
      deleteToTail();
      return;
   }
   if(index == 0)
   {
      deleteToHead();
      return;
   }
   if (index == len - 1)
   {
      deleteToTail();
      return;
   }
   int __index = 1;
   TwoWayLinkedNode&amp;lt;T&amp;gt; *node = head-&amp;gt;next;
   while (__index != index)
   {
      node = node-&amp;gt;next;
      __index ++;
   }
   node-&amp;gt;prev-&amp;gt;next = node-&amp;gt;next;  // nodeèŠ‚ç‚¹çš„å…ˆé©±èŠ‚ç‚¹çš„åé©±æŒ‡å‘nodeçš„åé©±
   node-&amp;gt;next-&amp;gt;prev = node-&amp;gt;prev;  // nodeèŠ‚ç‚¹çš„åé©±èŠ‚ç‚¹çš„å…ˆé©±æŒ‡å‘nodeçš„å…ˆé©±
   delete node;  // é‡Šæ”¾node
   setlen(ReductOne);
}

template&amp;lt;class T&amp;gt;
void TwoWayList&amp;lt;T&amp;gt; ::queryAll()
{
   if (isEmpty())
   {
        cout &amp;lt;&amp;lt; &amp;quot;The list length is empty&amp;quot; &amp;lt;&amp;lt; endl;
        return;
    }

   cout &amp;lt;&amp;lt; &amp;quot;The length of the two way list is zero:&amp;quot; &amp;lt;&amp;lt; getlen() &amp;lt;&amp;lt; endl;
   int __index = 1;
   TwoWayLinkedNode&amp;lt;T&amp;gt; *node = head;
   while (node != tail-&amp;gt;next)
   {
      cout &amp;lt;&amp;lt; &amp;quot;node num is:&amp;quot; &amp;lt;&amp;lt; __index &amp;lt;&amp;lt; &amp;quot;  data:&amp;quot; &amp;lt;&amp;lt; node-&amp;gt;data &amp;lt;&amp;lt; endl;
      node = node-&amp;gt;next;
      __index++; 
   }
   
}

template&amp;lt;class T&amp;gt;
bool TwoWayList&amp;lt;T&amp;gt; ::queryIndex(int index, T *data)
{
   len = getlen();
   // é“¾è¡¨ä¸ºç©º,index &amp;gt;= len || index &amp;lt; 0  å°±è¿”å›
   if(isEmpty() || index &amp;gt;= len || index &amp;lt; 0)
   {
      return false;
   }
   int __index = 0;
   for(TwoWayLinkedNode&amp;lt;T&amp;gt; *node = head; node != tail-&amp;gt;next; node = node-&amp;gt;next)
   {
      if (__index == index)
      {
         *data = node-&amp;gt;data;
         return true;
      }
      __index++;

   }
   return false;

}

template&amp;lt;class T&amp;gt;
bool TwoWayList&amp;lt;T&amp;gt; ::queryValue(T data)
{
    if(isEmpty())
   {
      return false;
   }
   for(TwoWayLinkedNode&amp;lt;T&amp;gt; *node = head; node != tail-&amp;gt;next; node = node-&amp;gt;next)
   {
      if (node-&amp;gt;data == data)
      {
         return true;
      }
   }
   return false;
   
}
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&#34;æµ‹è¯•&#34;&gt;æµ‹è¯•&lt;/h3&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;int main()
{
   TwoWayList&amp;lt;int&amp;gt; newList;
   newList.inseartToHead(3);
   newList.inseartToHead(2);
   newList.inseartToHead(1);
   newList.inseartToHead(-11);
   newList.inseartTotail(4);
   newList.inseartTotail(5);
   newList.inseartTotail(6);
   newList.inseartTotail(7);
   newList.inseartTotail(8);
   newList.queryAll();
   cout &amp;lt;&amp;lt; &amp;quot;****************************************************&amp;quot;&amp;lt;&amp;lt; endl;
   newList.inseartToindex(2, 11);
   newList.inseartToindex(0, 2);
   newList.inseartToindex(1, 3);
   newList.queryAll();
   cout &amp;lt;&amp;lt; &amp;quot;****************************************************&amp;quot;&amp;lt;&amp;lt; endl;
   newList.deleteToHead();
   newList.deleteToHead();
   newList.deleteToHead();
   newList.queryAll();
   // newList.clear();
   cout &amp;lt;&amp;lt; &amp;quot;****************************************************&amp;quot;&amp;lt;&amp;lt; endl;
   newList.deleteToTail();
   newList.deleteToTail();
   newList.deleteToTail();
   newList.deleteToTail();
   newList.queryAll();
   cout &amp;lt;&amp;lt; &amp;quot;****************************************************&amp;quot;&amp;lt;&amp;lt; endl;
   newList.deleteToIndex(4);
   newList.queryAll();
   cout &amp;lt;&amp;lt; &amp;quot;****************************************************&amp;quot;&amp;lt;&amp;lt; endl;
   int index = 1;
   int info;
   if(newList.queryIndex(index, &amp;amp;info))
   {
      cout &amp;lt;&amp;lt; &amp;quot;exits index: &amp;quot; &amp;lt;&amp;lt; index &amp;lt;&amp;lt; &amp;quot; =&amp;gt; value is &amp;quot; &amp;lt;&amp;lt; info&amp;lt;&amp;lt;  endl;
   }
   else
   {
      cout &amp;lt;&amp;lt;&amp;quot; no exits index:&amp;quot; &amp;lt;&amp;lt; index &amp;lt;&amp;lt; endl;
   }
   cout &amp;lt;&amp;lt; &amp;quot;****************************************************&amp;quot;&amp;lt;&amp;lt; endl;
   newList.queryAll();
   cout &amp;lt;&amp;lt; newList.queryValue(1)&amp;lt;&amp;lt; endl;
   system(&amp;quot;pause&amp;quot;);
   return 0;
}

&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&#34;å¾ªç¯åŒå‘é“¾è¡¨&#34;&gt;å¾ªç¯åŒå‘é“¾è¡¨&lt;/h2&gt;
&lt;h3 id=&#34;æ•°æ®ç»“æ„çš„å®šä¹‰-1&#34;&gt;æ•°æ®ç»“æ„çš„å®šä¹‰&lt;/h3&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;// å¾ªç¯åŒå‘é“¾è¡¨èŠ‚ç‚¹
template&amp;lt;class T&amp;gt;
class CircularDoubleLinkedNode
{
public:
    CircularDoubleLinkedNode()
    {
        prev = next = 0;
    }
    CircularDoubleLinkedNode(T data)
    {
        info = data;
        prev = next = 0;
    }
    ~CircularDoubleLinkedNode(){};
    T info;     // æ•°æ®
    CircularDoubleLinkedNode *prev;   // å…ˆé©±èŠ‚ç‚¹
    CircularDoubleLinkedNode *next;   // åç»§èŠ‚ç‚¹
};

template&amp;lt;class T&amp;gt;
class CircularDoubleList
{
private:
    CircularDoubleLinkedNode&amp;lt;T&amp;gt; *current_node;  // æŒ‡å‘å½“å‰èŠ‚ç‚¹
    int len;    // é“¾è¡¨çš„é•¿åº¦
public:
    CircularDoubleList()
    {
        current_node = 0;
        len = 0;
    }
    ~CircularDoubleList();
    void addLen()
    {
        len++;
    }
    void reduceLen()
    {
        len--;
    }
    int getLen()
    {
        return len;
    }
    bool isEmpty()
    {
        return current_node == 0;
    }
    void inseartNode(T data);
    bool deleteNode();
    void queryAll();
    // åˆ¤æ–­valueæ˜¯å¦å­˜åœ¨
    bool queryValue(T data);
};
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&#34;æ•°æ®çš„æ“ä½œ-1&#34;&gt;æ•°æ®çš„æ“ä½œ&lt;/h3&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;
template&amp;lt;class T&amp;gt;
void CircularDoubleList&amp;lt;T&amp;gt; ::inseartNode(T data)
{
    CircularDoubleLinkedNode&amp;lt;T&amp;gt; *new_node = new CircularDoubleLinkedNode&amp;lt;T&amp;gt;(data);
    // å¦‚æœé“¾è¡¨ä¸ºç©º
    if(isEmpty())
    {
        // å½“å‰èŠ‚ç‚¹ä¸ºæ–°çš„èŠ‚ç‚¹
        current_node = new_node;
        current_node-&amp;gt;next = current_node; // åé©±æŒ‡å‘è‡ªå·±
        current_node-&amp;gt;prev = current_node; // å‰é©±ä¹ŸæŒ‡å‘è‡ªå·±
    }
    else
    {
        /*ä¸åŒå‘é“¾è¡¨ä¸­çš„æ’å…¥åˆ°é“¾è¡¨ä¸­æ˜¯ä¸€æ ·çš„*/
       current_node-&amp;gt;next-&amp;gt;prev = new_node;
       new_node-&amp;gt;prev = current_node;
       new_node-&amp;gt;next = current_node-&amp;gt;next;
       current_node-&amp;gt;next = new_node;
       current_node = new_node;
    }
    addLen();
}

template&amp;lt;class T&amp;gt;
bool CircularDoubleList&amp;lt;T&amp;gt; ::deleteNode()
{
    // é“¾è¡¨ä¸ºç©º
    if(isEmpty())
    {
        return false;
    }
    int len = getLen();
    // é“¾è¡¨ä¸­åªæœ‰ä¸€ä¸ªå…ƒç´ 
    if(len == 1)
    {
        delete current_node;
        current_node = 0;
        reduceLen();
        return true;
    }
    // é“¾è¡¨ä¸­åªæœ‰ä¸¤ä¸ªå…ƒç´ 
    if (len == 2)
    {
        CircularDoubleLinkedNode&amp;lt;T&amp;gt; *node = current_node;
        current_node = current_node-&amp;gt;next;
        current_node-&amp;gt;next = current_node;
        current_node-&amp;gt;prev = current_node;
        delete node;
        reduceLen();
        return true;
    }
    // é“¾è¡¨å…ƒç´ è¾¾åˆ°3ä¸ªåŠ3ä¸ªä»¥ä¸Š
    CircularDoubleLinkedNode&amp;lt;T&amp;gt; *node = current_node;
    current_node-&amp;gt;prev-&amp;gt;next = current_node-&amp;gt;next;
    current_node-&amp;gt;next-&amp;gt;prev = current_node-&amp;gt;prev;
    current_node = current_node-&amp;gt;next;
    delete node;
    reduceLen();
    return true;
}

template&amp;lt;class T&amp;gt;
void CircularDoubleList&amp;lt;T&amp;gt; ::queryAll()
{
    if(isEmpty())
    {
        cout &amp;lt;&amp;lt; &amp;quot;circular double list is empty&amp;quot; &amp;lt;&amp;lt;  endl;
        return;
    }

    cout &amp;lt;&amp;lt; &amp;quot;circular double list len is:&amp;quot; &amp;lt;&amp;lt; getLen() &amp;lt;&amp;lt; endl;
    int __index = 1;
    for (CircularDoubleLinkedNode&amp;lt;T&amp;gt; *node = current_node-&amp;gt;next; node != current_node; node = node-&amp;gt;next)
    {
        cout &amp;lt;&amp;lt; &amp;quot;index:&amp;quot; &amp;lt;&amp;lt; __index &amp;lt;&amp;lt; &amp;quot;  data is: &amp;quot; &amp;lt;&amp;lt; node-&amp;gt;info &amp;lt;&amp;lt; endl;
        __index++;
    }
    cout &amp;lt;&amp;lt; &amp;quot;index:&amp;quot; &amp;lt;&amp;lt; __index &amp;lt;&amp;lt; &amp;quot;  data is: &amp;quot; &amp;lt;&amp;lt; current_node-&amp;gt;info &amp;lt;&amp;lt; endl;
}

template&amp;lt;class T&amp;gt;
bool CircularDoubleList&amp;lt;T&amp;gt; ::queryValue(T data)
{
    // åˆ¤æ–­é“¾è¡¨ä¸ºç©º
    if(isEmpty())
    {
        return false;
    }
    // å½“å‰èŠ‚ç‚¹çš„å€¼== data
    if(current_node-&amp;gt;info == data)
    {
        return true;
    }
    // å¾ªç¯éå†å½“èŠ‚ç‚¹çš„value== data then retuen ture
    for(CircularDoubleLinkedNode&amp;lt;T&amp;gt; *node = current_node-&amp;gt;next; node != current_node; node = node-&amp;gt;next)
    {
        if(node-&amp;gt;info == data)
        {
            return true;
        }
    }
    return false;
}

&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&#34;æµ‹è¯•-1&#34;&gt;æµ‹è¯•&lt;/h3&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;int main()
{
    CircularDoubleList&amp;lt;int&amp;gt; cirList;
    cirList.inseartNode(0);
    cirList.inseartNode(1);
    cirList.inseartNode(2);
    cirList.inseartNode(3);
    cirList.queryAll();
    cout &amp;lt;&amp;lt; &amp;quot;*****************************************************&amp;quot; &amp;lt;&amp;lt; endl;
    cirList.deleteNode();
    cirList.deleteNode();
    // cirList.deleteNode();
    // cirList.deleteNode();
    cirList.queryAll();
    cout &amp;lt;&amp;lt; &amp;quot;******************************************************&amp;quot; &amp;lt;&amp;lt;endl;
    int data = 11;
    if(cirList.queryValue(data))
    {
        cout &amp;lt;&amp;lt; data &amp;lt;&amp;lt; &amp;quot;  is exists&amp;quot; &amp;lt;&amp;lt; endl;
    }
    else
    {
        cout &amp;lt;&amp;lt; data &amp;lt;&amp;lt; &amp;quot;  is not exists&amp;quot; &amp;lt;&amp;lt; endl;
    }
   system(&amp;quot;pause&amp;quot;);
   return 0;
}

&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&#34;æºç &#34;&gt;æºç &lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://github.com/zcj-git520/DataStructuresAlgorithmsForC/tree/master/linked_list/two_way_linked_list&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;æˆ‘çš„github:https://github.com/zcj-git520/DataStructuresAlgorithmsForC/tree/master/linked_list/two_way_linked_list&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://github.com/zcj-git520/DataStructuresAlgorithmsForC/tree/master/linked_list/circular_double_linked_list&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;æˆ‘çš„github:https://github.com/zcj-git520/DataStructuresAlgorithmsForC/tree/master/linked_list/circular_double_linked_list&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
        </item>
        <item>
        <title>æ•°æ®ç»“æ„-å•å‘é“¾è¡¨c&#43;&#43;è¯­è¨€å®ç°</title>
        <link>https://zcj-git520.github.io/p/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84-%E5%8D%95%E5%90%91%E9%93%BE%E8%A1%A8c-%E8%AF%AD%E8%A8%80%E5%AE%9E%E7%8E%B0/</link>
        <pubDate>Mon, 27 Dec 2021 22:00:08 +0800</pubDate>
        
        <guid>https://zcj-git520.github.io/p/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84-%E5%8D%95%E5%90%91%E9%93%BE%E8%A1%A8c-%E8%AF%AD%E8%A8%80%E5%AE%9E%E7%8E%B0/</guid>
        <description>&lt;img src="https://zcj-git520.github.io/p/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84-%E5%8D%95%E5%90%91%E9%93%BE%E8%A1%A8c-%E8%AF%AD%E8%A8%80%E5%AE%9E%E7%8E%B0/1.jpg" alt="Featured image of post æ•°æ®ç»“æ„-å•å‘é“¾è¡¨c&#43;&#43;è¯­è¨€å®ç°" /&gt;&lt;h2 id=&#34;å•å‘é“¾è¡¨&#34;&gt;å•å‘é“¾è¡¨&lt;/h2&gt;
&lt;h3 id=&#34;æ•°æ®ç»“æ„çš„å®šä¹‰&#34;&gt;æ•°æ®ç»“æ„çš„å®šä¹‰&lt;/h3&gt;
&lt;h4 id=&#34;æ•°æ®èŠ‚ç‚¹çš„ç±»çš„å®šä¹‰&#34;&gt;æ•°æ®èŠ‚ç‚¹çš„ç±»çš„å®šä¹‰&lt;/h4&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;class SinglyLinkedNode
{
public:
   SinglyLinkedNode(){
       next = 0;
   };
    // åˆ›å»ºæ–°çš„node
   SinglyLinkedNode(int data)
   {
       this-&amp;gt;data = data;
       next = 0;
   };
   ~SinglyLinkedNode(){};
   int data;             // é“¾è¡¨çš„æ•°æ®
   SinglyLinkedNode *next;  // æŒ‡å‘ä¸‹ä¸€ä¸ªèŠ‚ç‚¹
};
&lt;/code&gt;&lt;/pre&gt;&lt;h4 id=&#34;é“¾è¡¨çš„æ•°æ®ç»“æ„ç±»çš„å®šä¹‰&#34;&gt;é“¾è¡¨çš„æ•°æ®ç»“æ„(ç±»çš„å®šä¹‰)&lt;/h4&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;class SinglyList
{
private:
    /* data */
    SinglyLinkedNode *head;   // å¤´èŠ‚ç‚¹
    SinglyLinkedNode *tail;   // å°¾èŠ‚ç‚¹
    int len;                  // é“¾è¡¨é•¿åº¦

public:
    SinglyList(){
        head = 0;
        tail = 0;
        len = 0;
    };
    ~SinglyList();
    // é“¾è¡¨çš„é•¿åº¦+1
    void setlen(int len)
    {
        this-&amp;gt;len += len;
    }; 
    // è¿”å›é“¾è¡¨çš„é•¿åº¦
    int getlen()
    {
        return len;
    };
    // é“¾è¡¨æ˜¯å¦ä¸ºç©º
    bool ismpty()
    {
        return head == 0;
    }
    // æ’å…¥åˆ°é“¾è¡¨çš„å¤´éƒ¨
    void inseartToHead(int data);  
    // æ’å…¥åˆ°é“¾è¡¨çš„å°¾éƒ¨
    void inseartTotail(int data); 
    // æ’å…¥åˆ°é“¾è¡¨çš„index
    void inseartToindex(int index, int data); 
    // åˆ é™¤é“¾è¡¨çš„å¤´éƒ¨å…ƒç´ 
    void deleteToHead();
    // åˆ é™¤é“¾è¡¨çš„å°¾éƒ¨å…ƒç´ 
    void deleteToTail();
    // åˆ é™¤é“¾è¡¨çš„indexå…ƒç´ 
    void deleteToIndex(int index);
    // æŸ¥è¯¢é“¾è¡¨çš„æ‰€æœ‰å€¼
    void queryAll();
    // è¿”å›indexçš„å€¼
    int queryIndex(int index);
    // åˆ¤æ–­valueæ˜¯å¦å­˜åœ¨
    bool queryValue(int data);
};
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&#34;æ•°æ®çš„æ’å…¥&#34;&gt;æ•°æ®çš„æ’å…¥&lt;/h3&gt;
&lt;h4 id=&#34;æ’å…¥åˆ°é“¾è¡¨çš„å°¾éƒ¨&#34;&gt;æ’å…¥åˆ°é“¾è¡¨çš„å°¾éƒ¨&lt;/h4&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;void SinglyList::inseartTotail(int data)
{
    // å®šä¹‰node
    SinglyLinkedNode *new_node;
    new_node = new SinglyLinkedNode(data);
    // é“¾è¡¨ä¸ºç©º
    if (ismpty())
    {
        head = tail = new_node; // å¤´å°¾èŠ‚ç‚¹éƒ½æŒ‡å‘æ–°åˆ›èŠ‚ç‚¹
        setlen(addOne);              // èŠ‚ç‚¹æ•°+1
        return;
    }
    tail-&amp;gt;next = new_node;
    tail = tail-&amp;gt;next;
    setlen(addOne);
}
&lt;/code&gt;&lt;/pre&gt;&lt;h4 id=&#34;æ’å…¥åˆ°é“¾è¡¨çš„å¤´éƒ¨&#34;&gt;æ’å…¥åˆ°é“¾è¡¨çš„å¤´éƒ¨&lt;/h4&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;void SinglyList::inseartToHead(int data)
{
    SinglyLinkedNode *node;
    node = new SinglyLinkedNode(data);
    if (ismpty()){
        head = tail = node;
        setlen(addOne);
        return ;
    }
    node-&amp;gt;next = head;
    head = node;
    setlen(addOne);
}
&lt;/code&gt;&lt;/pre&gt;&lt;h4 id=&#34;æ’å…¥åˆ°é“¾è¡¨çš„index&#34;&gt;æ’å…¥åˆ°é“¾è¡¨çš„index&lt;/h4&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;void SinglyList::inseartToindex(int index, int data)
{
    int len;
    len = getlen()-1;
     // å¦‚æœé“¾è¡¨ä¸ºç©º, æˆ–è€…æ’å…¥åˆ°æœ«å°¾,æˆ–è€…index &amp;lt;0 é‡‡ç”¨å°¾æ’æ³•æ·»åŠ åˆ°é“¾è¡¨ä¸­
    if (ismpty() || index ==len || index &amp;lt; 0)
    {
        inseartTotail(data);
        return;
    }
    if(index == 0){
        inseartToHead(data);
        return;
    }
    SinglyLinkedNode *node;
    node = new SinglyLinkedNode(data);
    int __index = 1;
    for (node = head; node != tail; node = node-&amp;gt;next)
    {
        if (__index == index)
        {
            SinglyLinkedNode *new_node;
            new_node = new SinglyLinkedNode(data);
            new_node -&amp;gt;next = node-&amp;gt;next;
            node-&amp;gt;next = new_node;
            setlen(addOne);
            return;
        }
        __index ++;
    }
}

&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&#34;æ•°æ®çš„åˆ é™¤&#34;&gt;æ•°æ®çš„åˆ é™¤&lt;/h3&gt;
&lt;h4 id=&#34;åˆ é™¤é“¾è¡¨çš„å¤´éƒ¨å…ƒç´ &#34;&gt;åˆ é™¤é“¾è¡¨çš„å¤´éƒ¨å…ƒç´ &lt;/h4&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;void SinglyList::deleteToHead()
{
    // é“¾è¡¨ä¸ºç©º
    if(ismpty())
    {
        return;
    }
    SinglyLinkedNode *tmp = head;
    // é“¾è¡¨åªå­˜åœ¨ä¸€ä¸ªå€¼
    if(head == tail)
    {
        head = tail = 0;
    }
    else
    {
        head = head-&amp;gt;next;
    }
    delete tmp; // é‡Šæ”¾èµ„æº
    setlen(ReductOne);
}
&lt;/code&gt;&lt;/pre&gt;&lt;h4 id=&#34;åˆ é™¤é“¾è¡¨çš„å°¾éƒ¨å…ƒç´ &#34;&gt;åˆ é™¤é“¾è¡¨çš„å°¾éƒ¨å…ƒç´ &lt;/h4&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;void SinglyList::deleteToTail()
{
    // é“¾è¡¨ä¸ºç©º
    if(ismpty())
    {
        return;
    }
    // é“¾è¡¨åªå­˜åœ¨ä¸€ä¸ªå€¼
    if(head == tail)
    {
        delete head;
        setlen(ReductOne);
        head = tail = 0;
        return;
    }
    SinglyLinkedNode *tmp = head;
    while (tmp-&amp;gt;next != tail)
    {
        tmp  = tmp-&amp;gt;next;
    }
    delete tail;
    tail = tmp;
    tail-&amp;gt;next = 0;
    setlen(ReductOne);
}
&lt;/code&gt;&lt;/pre&gt;&lt;h4 id=&#34;åˆ é™¤é“¾è¡¨çš„indexå…ƒç´ &#34;&gt;åˆ é™¤é“¾è¡¨çš„indexå…ƒç´ &lt;/h4&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;void SinglyList::deleteToIndex(int index)
{
    // é“¾è¡¨ä¸ºç©º
    if(ismpty())
    {
        return;
    }
    // é“¾è¡¨åªå­˜åœ¨ä¸€ä¸ªå€¼
    if(head == tail)
    {
        delete head;
        setlen(ReductOne);
        head = tail = 0;
        return;
    }
    int len = getlen();
    if (index &amp;gt;= len-1 || index &amp;lt; 0)
    {
        deleteToTail();
        return;
    }
    if (index == 0)
    {
        deleteToHead();
        return;
    }

    SinglyLinkedNode *node = head;
    SinglyLinkedNode *tmp = head-&amp;gt;next;
    int __index = 1;
    while (__index != index)
    {
        node = node-&amp;gt;next;
        tmp = tmp-&amp;gt;next;
        __index ++;
    }
    node-&amp;gt;next = tmp-&amp;gt;next;
    delete tmp;
    setlen(ReductOne);
}

&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&#34;æ•°æ®çš„æŸ¥è¯¢&#34;&gt;æ•°æ®çš„æŸ¥è¯¢&lt;/h3&gt;
&lt;h4 id=&#34;æŸ¥è¯¢é“¾è¡¨çš„æ‰€æœ‰å€¼&#34;&gt;æŸ¥è¯¢é“¾è¡¨çš„æ‰€æœ‰å€¼&lt;/h4&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;void SinglyList::queryAll()
{
    if (ismpty()){
        cout &amp;lt;&amp;lt; &amp;quot;The list length is empty&amp;quot; &amp;lt;&amp;lt; endl;
        return;
    }
    int i = 1;
    cout &amp;lt;&amp;lt; &amp;quot;The length of the list is zero:&amp;quot; &amp;lt;&amp;lt; getlen() &amp;lt;&amp;lt; endl;
    SinglyLinkedNode *node;
    for(node = head; node != tail-&amp;gt;next; node = node-&amp;gt;next){
        cout &amp;lt;&amp;lt; &amp;quot;node num is:&amp;quot; &amp;lt;&amp;lt; i &amp;lt;&amp;lt; &amp;quot;  data:&amp;quot; &amp;lt;&amp;lt; node-&amp;gt;data &amp;lt;&amp;lt; endl;
        i++;
    }
}
&lt;/code&gt;&lt;/pre&gt;&lt;h4 id=&#34;è¿”å›indexçš„å€¼&#34;&gt;è¿”å›indexçš„å€¼&lt;/h4&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;int SinglyList::queryIndex(int index)
{
    int len = getlen();
    // é“¾è¡¨ä¸ºç©º, ç´¢å¼•ä¸å­˜åœ¨
    if(ismpty() || index &amp;gt; len -1 || index &amp;lt; 0)
    {
        return -1;
    }
   if (index == 0)
   {
       return head -&amp;gt;data;
   }
   if (index == len -1)
   {
       return tail -&amp;gt;data;
   }
   int __index = 1;
   for (SinglyLinkedNode *node = head-&amp;gt;next; node != tail; node = node-&amp;gt;next)
   {
       if (index == __index)
       {
           return node-&amp;gt;data;

       }
        __index ++; 
   }
   return -1;
}
&lt;/code&gt;&lt;/pre&gt;&lt;h4 id=&#34;åˆ¤æ–­valueæ˜¯å¦å­˜åœ¨&#34;&gt;åˆ¤æ–­valueæ˜¯å¦å­˜åœ¨&lt;/h4&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;bool SinglyList::queryValue(int value)
{
    // é“¾è¡¨ä¸ºç©º
    if(ismpty())
    {
        return false;
    }
    // é“¾è¡¨åªå­˜åœ¨ä¸€ä¸ªå€¼
    if(head == tail)
    {
        if (head-&amp;gt;data == value){
            return true;
        }
        return false;
    }

    for(SinglyLinkedNode *node = head; node != tail-&amp;gt;next; node = node-&amp;gt;next)
    {
        if(node-&amp;gt;data == value)
        {
            return true;
        }
    }
    return false;
}

&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&#34;æµ‹è¯•&#34;&gt;æµ‹è¯•&lt;/h3&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;int main()
{
    SinglyList newList;
    newList.inseartTotail(1);
    newList.inseartTotail(2);
    newList.inseartTotail(3);
    newList.inseartToHead(0);
    newList.inseartToHead(-11);
    newList.inseartToHead(-12);
    newList.inseartToHead(-13);
    newList.inseartToindex(6,5);
    newList.inseartToindex(-7,51);
    newList.queryAll();
    cout &amp;lt;&amp;lt; &amp;quot;************************************************&amp;quot;&amp;lt;&amp;lt; endl;
    newList.deleteToHead();
    newList.queryAll();
    cout &amp;lt;&amp;lt; &amp;quot;************************************************&amp;quot;&amp;lt;&amp;lt; endl;
    newList.deleteToTail();
    newList.queryAll();
    cout &amp;lt;&amp;lt; &amp;quot;************************************************&amp;quot;&amp;lt;&amp;lt; endl;
    newList.deleteToTail();
    newList.queryAll();
    cout &amp;lt;&amp;lt; &amp;quot;************************************************&amp;quot;&amp;lt;&amp;lt; endl;
    newList.deleteToIndex(3);
    newList.queryAll();
    cout &amp;lt;&amp;lt; &amp;quot;************************************************&amp;quot;&amp;lt;&amp;lt; endl;
    cout &amp;lt;&amp;lt; newList.queryIndex(5) &amp;lt;&amp;lt; endl;
     cout &amp;lt;&amp;lt; &amp;quot;************************************************&amp;quot;&amp;lt;&amp;lt; endl;
    cout &amp;lt;&amp;lt; newList.queryValue(21) &amp;lt;&amp;lt; endl;
    system(&amp;quot;pause&amp;quot;);
    return 0;
}

&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&#34;æºç &#34;&gt;æºç &lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://github.com/zcj-git520/DataStructuresAlgorithmsForC/tree/master/linked_list/singly_linked_list&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;æˆ‘çš„github:https://github.com/zcj-git520/DataStructuresAlgorithmsForC/tree/master/linked_list/singly_linked_list&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
        </item>
        <item>
        <title>æ•°æ®ç»“æ„-å•å‘é“¾è¡¨goè¯­è¨€å®ç°</title>
        <link>https://zcj-git520.github.io/p/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84-%E5%8D%95%E5%90%91%E9%93%BE%E8%A1%A8go%E8%AF%AD%E8%A8%80%E5%AE%9E%E7%8E%B0/</link>
        <pubDate>Sat, 25 Dec 2021 22:00:08 +0800</pubDate>
        
        <guid>https://zcj-git520.github.io/p/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84-%E5%8D%95%E5%90%91%E9%93%BE%E8%A1%A8go%E8%AF%AD%E8%A8%80%E5%AE%9E%E7%8E%B0/</guid>
        <description>&lt;img src="https://zcj-git520.github.io/p/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84-%E5%8D%95%E5%90%91%E9%93%BE%E8%A1%A8go%E8%AF%AD%E8%A8%80%E5%AE%9E%E7%8E%B0/1.jpg" alt="Featured image of post æ•°æ®ç»“æ„-å•å‘é“¾è¡¨goè¯­è¨€å®ç°" /&gt;&lt;h2 id=&#34;å•å‘é“¾è¡¨&#34;&gt;å•å‘é“¾è¡¨&lt;/h2&gt;
&lt;h3 id=&#34;æ•°æ®ç»“æ„çš„å®šä¹‰&#34;&gt;æ•°æ®ç»“æ„çš„å®šä¹‰&lt;/h3&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;å•é¡¹é“¾è¡¨èŠ‚ç‚¹çš„å®šä¹‰
type singlyLinkedNode struct {
	info    interface{}    		// å­˜å‚¨ä»»æ„æ•°æ®
	next    *singlyLinkedNode  	// æŒ‡å‘ä¸‹ä¸€èŠ‚ç‚¹
}

type linkedList struct {
	len  int                   // é“¾è¡¨é•¿åº¦
	Head *singlyLinkedNode     // å¤´èŠ‚ç‚¹
	Tail *singlyLinkedNode     // å°¾èŠ‚ç‚¹
}
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&#34;åˆ›å»ºèŠ‚ç‚¹&#34;&gt;åˆ›å»ºèŠ‚ç‚¹&lt;/h3&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;func createNode(info interface{}) *singlyLinkedNode {
	node := &amp;amp;singlyLinkedNode{
		info: info,
		next: nil,
	}
	return node
}
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&#34;é“¾è¡¨çš„é•¿åº¦&#34;&gt;é“¾è¡¨çš„é•¿åº¦&lt;/h3&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;func(l *linkedList)Len() int{
	return l.len
}
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&#34;æ•°æ®çš„æ’å…¥&#34;&gt;æ•°æ®çš„æ’å…¥&lt;/h3&gt;
&lt;h4 id=&#34;å•ä¸ªèŠ‚ç‚¹çš„æ’å…¥&#34;&gt;å•ä¸ªèŠ‚ç‚¹çš„æ’å…¥&lt;/h4&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;// é“¾è¡¨çš„å°¾æ’æ³•
func (l *linkedList)AddToTail(info interface{}) *linkedList {
	newNode := createNode(info)  // åˆ›å»ºæ–°èŠ‚ç‚¹
	// é“¾è¡¨ä¸ºç©º, å¤´å°¾èŠ‚ç‚¹éƒ½æŒ‡å‘è¯¥èŠ‚ç‚¹
	if l.Tail == nil{
		l.Head = newNode
		l.Tail = newNode
	}
	l.Tail.next = newNode
	l.Tail = l.Tail.next
	// é“¾è¡¨é•¿åº¦+1
	l.len++
	return l
}

// é“¾è¡¨çš„å¤´æ’æ³•
func (l *linkedList)AddToHead(info interface{}) *linkedList  {
	newNode := createNode(info)  // åˆ›å»ºèŠ‚ç‚¹
	// é“¾è¡¨ä¸ºç©º
	if l.Head == nil{
		l.Head = newNode
		l.Tail = newNode
	}
	newNode.next = l.Head
	l.Head = newNode
	// é“¾è¡¨é•¿åº¦+1
	l.len++
	return  l
}

// é“¾è¡¨çš„index
// é€šè¿‡index=&amp;gt;æ’å…¥é“¾è¡¨æ–°çš„èŠ‚ç‚¹
// indexä¸ºæ­£æ•° ä¸ºä»å·¦-&amp;gt;å³ // 0è¡¨ç¤ºç¬¬ä¸€ä¸ªèŠ‚ç‚¹
// indexä¸ºè´Ÿæ•° ä¸ºä»å³-&amp;gt;å·¦ // -1è¡¨ç¤ºç¬¬ä¸€ä¸ªèŠ‚ç‚¹
func (l *linkedList)AddToIndex(index int, info interface{}) *linkedList {
	// å½“é“¾è¡¨ä¸ºç©ºæ—¶ï¼Œé‡‡ç”¨äº†å°¾æ’å…¥æ³•æ’å…¥æ•°æ®
	if l.Head == nil{
		return l.AddToTail(info)
	}
	// å½“indexå¤§äºé“¾è¡¨çš„å€¼æ—¶ï¼Œé»˜è®¤å°†æ•°æ®æ’å…¥åˆ°é“¾è¡¨çš„åé¢
	if int(math.Abs(float64(index))) &amp;gt; l.len-1{
		return l.AddToTail(info)
	}
	// æ’å…¥é“¾è¡¨çš„å¤´éƒ¨
	if index == 0{
		return l.AddToHead(info)
	}
	// æ’å…¥åˆ°é“¾è¡¨çš„æœ«å°¾
	if index == -1{
		return l.AddToTail(info)
	}
	// å½“index ä¸ºè´Ÿæ•°æ—¶ï¼Œä»å³åˆ°å·¦æ’å…¥
	if index &amp;lt; 0{
		index += l.len
	}
	__index := 1  // å†…éƒ¨çš„indexå€¼
	// ä»ç¬¬äºŒä¸ªå€¼å¼€å§‹æ’å…¥
	for node := l.Head.next; node != l.Tail; node = node.next{
		if index == __index{
			newNode := createNode(info)
			newNode.next = node.next    // æŒ‡å‘nodeçš„åç»§èŠ‚ç‚¹
			node.next = newNode         // node æŒ‡å‘è¿™ä¸ªæ–°çš„èŠ‚ç‚¹
			// é“¾è¡¨çš„èŠ‚ç‚¹æ•°åŠ 1
			l.len ++
			return l
		}
		__index ++
	}
	return l
}
&lt;/code&gt;&lt;/pre&gt;&lt;h4 id=&#34;é“¾è¡¨çš„åˆå¹¶&#34;&gt;é“¾è¡¨çš„åˆå¹¶&lt;/h4&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;// å°†æ–°çš„é“¾è¡¨æ’å…¥å¤´éƒ¨
func (l *linkedList)AddListToHead(list *linkedList)*linkedList{
	// ä¸¤ä¸ªé“¾è¡¨éƒ½ä¸ºç©ºæ—¶
	if l.Head == nil &amp;amp;&amp;amp; list.Head == nil{
		return l
	}
	// åˆå¹¶è¡¨ä¸ºç©º
	if l.Head != nil &amp;amp;&amp;amp; list.Head == nil{
		return l
	}
	// ä¸»è¡¨ä¸ºç©º
	if l.Head == nil &amp;amp;&amp;amp; list.Head != nil{
		return list
	}
	// åˆå¹¶è¡¨çš„å°¾æŒ‡é’ˆæŒ‡å‘ä¸»è¡¨çš„å¤´
	list.Tail.next = l.Head
	list.Tail = l.Tail
	// è¡¨èŠ‚ç‚¹æ•°åˆå¹¶
	list.len += l.len
	return list
}

// å°†æ–°çš„é“¾è¡¨æ’å…¥åˆ°å°¾éƒ¨
func (l *linkedList)AddListToTail(list *linkedList)*linkedList{
	// ä¸¤ä¸ªé“¾è¡¨éƒ½ä¸ºç©ºæ—¶
	if l.Head == nil &amp;amp;&amp;amp; list.Head == nil{
		return l
	}
	// åˆå¹¶è¡¨ä¸ºç©º
	if l.Head != nil &amp;amp;&amp;amp; list.Head == nil{
		return l
	}
	// ä¸»è¡¨ä¸ºç©º
	if l.Head == nil &amp;amp;&amp;amp; list.Head != nil{
		return list
	}
	// å°†æ–°è¡¨æ’å…¥åˆ°ä¸»è¡¨ä¹‹å
	l.Tail.next = list.Head
	l.Tail = list.Tail
	l.len += list.len
	return l
}

// ç»æ–°çš„è¡¨æ’å…¥åˆ°index
func (l *linkedList)AddListToIndex(index int, list *linkedList) *linkedList {
	// ä¸¤ä¸ªé“¾è¡¨éƒ½ä¸ºç©ºæ—¶
	if l.Head == nil &amp;amp;&amp;amp; list.Head == nil{
		return l
	}
	// åˆå¹¶è¡¨ä¸ºç©º
	if l.Head != nil &amp;amp;&amp;amp; list.Head == nil{
		return l
	}
	// ä¸»è¡¨ä¸ºç©º
	if l.Head == nil &amp;amp;&amp;amp; list.Head != nil{
		return list
	}
	if int(math.Abs(float64(index))) &amp;gt; l.len{
		fmt.Println(&amp;quot;é”™è¯¯çš„index&amp;quot;)
		return l
	}
	if index == 0{
		return l.AddListToHead(list)
	}
	if int(math.Abs(float64(index))) == l.len -1 || index == -1{
		return l.AddListToTail(list)
	}
	if index &amp;lt; 0{
		index += l.len
	}
	__index := 1
	for node := l.Head.next; node != l.Tail; node = node.next{
		if index == __index{
			list.Tail.next = node.next
			node.next = list.Head
			l.len += list.len  // é“¾è¡¨çš„æ•°å€¼ç›¸åŠ 
			return l
		}
		__index ++
	}
	return l
}
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&#34;æ•°æ®çš„åˆ é™¤&#34;&gt;æ•°æ®çš„åˆ é™¤&lt;/h3&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;// é“¾è¡¨å¤´åˆ é™¤æ³•
func (l *linkedList)DeleteToHead()*linkedList{
	// é“¾è¡¨ä¸ºç©º
	if l.Head == nil{
		return l
	}
	// é“¾è¡¨ä¸­åªæœ‰ä¸€ä¸ªæ•°
	if l.Head == l.Tail{
		l.Head = nil
		l.Tail = nil
		l.len  = 0
		return l
	}
	l.Head = l.Head.next
	// nodeæ•°å‡ä¸€
	l.len --
	return l
}

// é“¾è¡¨å°¾åˆ é™¤æ³•
func (l *linkedList)DeleteToTail()*linkedList{
	// é“¾è¡¨ä¸ºç©º
	if l.Tail == nil{
		return l
	}
	// é“¾è¡¨ä¸­åªæœ‰ä¸€ä¸ªæ•°
	if l.Head == l.Tail{
		l.Head = nil
		l.Tail = nil
		l.len = 0
		return l
	}
	// æ‰¾å‡ºå°¾èŠ‚ç‚¹çš„ä¸Šä¸€èŠ‚ç‚¹
	var node  *singlyLinkedNode
	for node = l.Head;  node.next != l.Tail; node = node.next{}
	node.next = nil
	l.Tail = node
	// nodeæ•°å‡ä¸€
	l.len --
	return l
}

// é€šè¿‡å€¼=&amp;gt;åˆ é™¤é“¾è¡¨çš„èŠ‚ç‚¹(ç¬¬ä¸€ä¸ª)
func (l *linkedList)DeleteToAValue(value interface{})*linkedList{
	// é“¾è¡¨ä¸ºç©º
	if l.Head == nil{
		fmt.Println(&amp;quot;é“¾è¡¨ä¸ºç©º&amp;quot;)
		return l
	}
	// value == head.info
	// å°±é‡‡ç”¨å¤´åˆ æ³•
	if value == l.Head.info{
		return  l.DeleteToHead()
	}
	// ä¸­é—´é‡‡ç”¨è½®è¯¢æŸ¥æ‰¾value, ä»ç¬¬äºŒä¸ªå¼€å§‹è½®è¯¢åˆ°å€’æ•°ç¬¬äºŒä¸ªç»“æŸ
	node := l.Head
	for temp := l.Head.next; temp != nil; temp = node.next{
		if temp.info == value{
			//  åˆ é™¤node
			node.next = temp.next
			l.len --
			return l
		}
		node = node.next
	}
	fmt.Println(&amp;quot;é“¾è¡¨ä¸­ï¼šå€¼ä¸å­˜åœ¨&amp;quot;)
	return l
}

// é€šè¿‡å€¼=&amp;gt;åˆ é™¤é“¾è¡¨çš„èŠ‚ç‚¹(æ‰€æœ‰)
func (l *linkedList)DeleteToValue(value interface{})*linkedList{
	// é“¾è¡¨ä¸ºç©º
	if l.Head == nil{
		fmt.Println(&amp;quot;é“¾è¡¨ä¸ºç©º&amp;quot;)
		return l
	}
	node := l.Head         // å½“å‰çš„node
	temp := l.Head.next    // ä¸‹ä¸€ä¸ªnode
	for {
		// å½“ä¸‹ä¸€ä¸ªèŠ‚ç‚¹æ˜¯å°¾èŠ‚ç‚¹æ—¶ï¼Œå°±åˆ¤æ–­é¦–ä½å’Œæœ«å°¾æ˜¯ä¸ºéœ€è¦åˆ é™¤çš„node
		if temp == l.Tail {
			if l.Head.info == value{
				l.DeleteToHead()
			}
			if l.Tail.info == value{
				l.DeleteToTail()
			}
			return l
		}
		if temp.info == value{
			// åˆ é™¤node
			node.next = temp.next
			temp = temp.next
			// nodeæ•°å‡ä¸€
			l.len --
			continue
		}
		node = node.next
		temp = temp.next
		}
}

// é€šè¿‡index=&amp;gt;åˆ é™¤é“¾è¡¨çš„èŠ‚ç‚¹
// indexä¸ºæ­£æ•° ä¸ºä»å·¦-&amp;gt;å³ // 0è¡¨ç¤ºç¬¬ä¸€ä¸ªèŠ‚ç‚¹
// indexä¸ºè´Ÿæ•° ä¸ºä»å³-&amp;gt;å·¦ // -1è¡¨ç¤ºç¬¬ä¸€ä¸ªèŠ‚ç‚¹
func (l *linkedList)DeleteToIndex(index int)*linkedList{
	// é“¾è¡¨ä¸ºç©º
	if l.Head == nil{
		fmt.Println(&amp;quot;é“¾è¡¨ä¸ºç©º&amp;quot;)
		return l
	}
	// index è¶…è¿‡é“¾è¡¨æ•°
	if int(math.Abs(float64(index))) &amp;gt; l.len-1{
		fmt.Println(&amp;quot;é”™è¯¯çš„index&amp;quot;)
		return l
	}
	// åˆ é™¤ç¬¬ä¸€ä¸ªnode
	if index == 0{
		return l.DeleteToHead()
	}
	if index &amp;lt; 0{
		index += l.len
	}
	_index := 1
	node := l.Head
	temp := node.next
	for {
		if index == _index{
			if temp != nil{
				node.next = temp.next
			}
			l.len --
			return l
		}
		node = node.next
		temp = temp.next
		_index ++
	}
}
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&#34;æ•°æ®çš„æŸ¥è¯¢&#34;&gt;æ•°æ®çš„æŸ¥è¯¢&lt;/h3&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;// éå†é“¾è¡¨
func (l *linkedList) QuireAll() {
	if l.Head == nil{
		fmt.Println(&amp;quot;é“¾è¡¨æ•°æ®ä¸ºç©º&amp;quot;)
		return
	}
	node := l.Head
	for {
		if node == nil{
			return
		}
		fmt.Println(node.info)
		if node == l.Tail{
			return
		}
		node = node.next
	}
}

// åˆ¤æ–­valveæ˜¯å¦å­˜åœ¨
func (l *linkedList)QuireValue(value interface{}) bool{
	// è¡¨ä¸ºç©º
	if l.Head == nil{
		return false
	}
	// è¡¨ä¸­åªå­˜åœ¨ä¸€ä¸ªå€¼
	if l.Head == l.Tail{
		if l.Head.info == value{
			return true
		}
		return false
	}
	// éå†æŸ¥å€¼
	for node := l.Head; node != l.Tail.next; node = node.next{
		if node.info == value{
			return true
		}
	}
	return false
}

// æ ¹æ®ç´¢å¼•è¿”å›å€¼
func (l *linkedList)QuireIndex(index int) interface{} {
	// é“¾è¡¨ä¸ºç©º
	if l.Head == nil{
		return nil
	}
	if int(math.Abs(float64(index))) &amp;gt; l.len -1 {
		fmt.Println(&amp;quot;ç´¢å¼•å€¼é”™è¯¯&amp;quot;)
		return nil
	}
	if index == 0{
		return l.Head.info
	}
	if index == l.len -1 || index == -1{
		return l.Tail.info
	}
	if index &amp;lt; 0{
		index += l.len
	}
	__index := 1
	for node := l.Head.next; node != l.Tail; node = node.next{
		if __index == index{
			return node.info
		}
		__index ++
	}
	//fmt.Println(&amp;quot;æœªèƒ½æ‰¾åˆ°ï¼ï¼ï¼ï¼&amp;quot;)
	return nil
}
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&#34;ç»“æ„çš„å…¥å£&#34;&gt;ç»“æ„çš„å…¥å£&lt;/h3&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;func NewLinkerList()*linkedList{
	// åˆ›å»ºçš„é“¾è¡¨å¤´å°¾èŠ‚ç‚¹éƒ½ä¸ºç©º
	return &amp;amp;linkedList{
		Head: nil,
		Tail: nil,
		len: 0,
	}
}
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&#34;æºç &#34;&gt;æºç &lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://github.com/zcj-git520/DataStructuresAlgorithmsForGo/tree/master/Linked_list/Singly_linked_list&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;æˆ‘çš„github:https://github.com/zcj-git520/DataStructuresAlgorithmsForGo/tree/master/Linked_list/Singly_linked_list&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
        </item>
        <item>
        <title>è¶…æ—¶é‡è¯•æœºåˆ¶-host_try</title>
        <link>https://zcj-git520.github.io/p/%E8%B6%85%E6%97%B6%E9%87%8D%E8%AF%95%E6%9C%BA%E5%88%B6-host_try/</link>
        <pubDate>Mon, 20 Dec 2021 22:00:08 +0800</pubDate>
        
        <guid>https://zcj-git520.github.io/p/%E8%B6%85%E6%97%B6%E9%87%8D%E8%AF%95%E6%9C%BA%E5%88%B6-host_try/</guid>
        <description>&lt;img src="https://zcj-git520.github.io/p/%E8%B6%85%E6%97%B6%E9%87%8D%E8%AF%95%E6%9C%BA%E5%88%B6-host_try/1.png" alt="Featured image of post è¶…æ—¶é‡è¯•æœºåˆ¶-host_try" /&gt;&lt;h2 id=&#34;host_try&#34;&gt;host_try&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;host_tryï¼šä¸»è¦æ˜¯ç›®çš„æ˜¯åœ¨å•ä¸ªæˆ–è€…å¤šä¸ªhostçš„ä¸‹ï¼Œè¿æ¥è¶…æ—¶æˆ–è€…è¿æ¥å¤±è´¥ä¸‹çš„é‡è¯•æœºåˆ¶&lt;/li&gt;
&lt;li&gt;host_try: æä¾›ä¸‰ç§é€€é¿ç­–ç•¥ï¼š1. å°è¯•ç­‰å¾…æ—¶é—´æŒ‡æ•°å¢é•¿ 2. ä»¥ç›¸åŒæ—¶é—´è¿›è¡Œå°è¯• 3.éšæœºæ—¶é—´è¿›è¡Œå°è¯• ä¸‰ç§å°è¯•ç­–ç•¥å¯ä¸€èµ·ä½¿ç”¨&lt;/li&gt;
&lt;li&gt;host_try: æä¾›ä¸‰ç§é‡è¯•æ–¹å¼ï¼š1. è½®è¯¢hostè¿›è¡Œé‡è¿, é‡è¿æ¬¡æ•°è¾¾åˆ°å,åœ¨å°†æ¢ä¸‹ä¸€host, ç›´åˆ°é‡æ–°è¿æ¥æˆåŠŸæˆ–æ‰€æœ‰çš„hostéƒ½é‡è¿å®Œæˆç»“æŸ
2.æ¯ä¸€ä¸ªhostè¿›è¡Œé‡è¿, åœ¨å°†æ¢ä¸‹ä¸€host, æ‰€æœ‰çš„hostå¤±è´¥äº†,åœ¨è¿›è¡Œä¸‹ä¸€æ¬¡é‡è¿ã€‚ç›´åˆ°é‡æ–°è¿æ¥æˆåŠŸæˆ–é‡è¿æ¬¡æ•°è¾¾åˆ°åç»“æŸ 3. é‡è¯•ç›´åˆ°æˆåŠŸ&lt;/li&gt;
&lt;li&gt;host_try åªæ˜¯æä¾›é‡è¯•è¿æ¥çš„æ¥å£ï¼Œå…·ä½“è¯·æ±‚çš„æ–¹æ³•éœ€è¦è‡ªå·±å†™&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;host_tryçš„å·¥ä½œåŸç†&#34;&gt;host_tryçš„å·¥ä½œåŸç†&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;å­˜åœ¨å¤šä¸ªhostçš„è¯·æ±‚æä¾›ç›¸åŒçš„æœåŠ¡å¦‚(ntp)ï¼Œå­˜åœ¨è¿æ¥è¶…æ—¶çš„æƒ…å†µï¼Œéœ€è¦ä¸æ–­çš„å°è¯•è¿æ¥ï¼Œ&lt;/li&gt;
&lt;li&gt;åªè¦ä¸€ä¸ªhostè¿æ¥è¯·æ±‚æˆåŠŸå°±è¿”å›&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;host_tryçš„é…ç½®ç»“æ„&#34;&gt;host_tryçš„é…ç½®ç»“æ„&lt;/h2&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;type tryConfig struct {
	attemptNum    uint           	 // å°è¯•çš„é‡è¿çš„æ¬¡æ•°
	nowAttempt    uint               // ç°åœ¨ç¬¬å‡ æ¬¡é‡è¿
	hosts         []string        	 // è¿æ¥çš„hostç»„
	successHost   string             // è¿æ¥æˆåŠŸçš„host
	errorHost     map[string]string  // è¿æ¥å¤±è´¥çš„hostå’Œé”™è¯¯åŸå› 
	attemptType   string          	 // é‡è¿æ–¹å¼
	attemptStatus bool               // æœ€ç»ˆé‡è¿çš„çŠ¶æ€
	delay         time.Duration    	 // å»¶æ—¶æ—¶é—´
	maxDelay      time.Duration    	 // æœ€å¤§å»¶æ—¶æ—¶é—´
	maxJitter     time.Duration      // æœ€å¤§éšæœºæ•°æ—¶é—´
	delayType     []uint   	         // é€€é¿ç­–ç•¥ç±»å‹
	contest       context.Context
}
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&#34;æä¾›ä¸‰ç§é€€é¿ç­–ç•¥&#34;&gt;æä¾›ä¸‰ç§é€€é¿ç­–ç•¥&lt;/h2&gt;
&lt;h3 id=&#34;ç¬¬ä¸€ç§ç­–ç•¥&#34;&gt;ç¬¬ä¸€ç§ç­–ç•¥&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;å»¶æ—¶æ—¶é—´* å› å­**é‡è¿æ¬¡æ•°(å› å­é»˜è®¤ä¸º2)
&lt;code&gt;func (t *tryConfig)backOffDelay(n uint) time.Duration&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;ç¬¬äºŒç§ç­–ç•¥&#34;&gt;ç¬¬äºŒç§ç­–ç•¥&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;ä»¥ç›¸åŒçš„æ—¶é—´è¿›è¡Œå»¶æ—¶
&lt;code&gt; func (t *tryConfig)fixedDelay() time.Duration&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;ç¬¬ä¸‰ç§ç­–ç•¥&#34;&gt;ç¬¬ä¸‰ç§ç­–ç•¥&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;éšæœºå»¶è¿Ÿæ—¶é—´ 
&lt;code&gt; func (t *tryConfig)randomDelay() time.Duration&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;é‡è¯•æ–¹å¼&#34;&gt;é‡è¯•æ–¹å¼&lt;/h2&gt;
&lt;h3 id=&#34;æ–¹å¼1&#34;&gt;æ–¹å¼1&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;è½®è¯¢hostè¿›è¡Œé‡è¿, é‡è¿æ¬¡æ•°è¾¾åˆ°å,åœ¨å°†æ¢ä¸‹ä¸€host, ç›´åˆ°é‡æ–°è¿æ¥æˆåŠŸæˆ–æ‰€æœ‰çš„hostéƒ½é‡è¿å®Œæˆç»“æŸ
&lt;code&gt;func (t *tryConfig) directConnection (retryableFunc RetryableFunc)&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;æ–¹å¼2&#34;&gt;æ–¹å¼2&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;æ¯ä¸€ä¸ªhostè¿›è¡Œé‡è¿, åœ¨å°†æ¢ä¸‹ä¸€host, æ‰€æœ‰çš„hostå¤±è´¥äº†,åœ¨è¿›è¡Œä¸‹ä¸€æ¬¡é‡è¿ã€‚ç›´åˆ°é‡æ–°è¿æ¥æˆåŠŸæˆ–é‡è¿æ¬¡æ•°è¾¾åˆ°åç»“æŸ
&lt;code&gt; func (t *tryConfig) staggeredConnection (retryableFunc RetryableFunc)&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;æ–¹å¼3&#34;&gt;æ–¹å¼3&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;é‡è¯•ç›´åˆ°æˆåŠŸ
&lt;code&gt;func (t *tryConfig) untilConnection (retryableFunc RetryableFunc)&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;ä½¿ç”¨&#34;&gt;ä½¿ç”¨&lt;/h2&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;host := []string{&amp;quot;172.16.21.1&amp;quot;,&amp;quot;ntp.ntsc1.ac.cn&amp;quot;,&amp;quot;cn.ntp1.org.cn&amp;quot;,&amp;quot;cn.pool.ntp1.org&amp;quot;,&amp;quot;time.pool.aliyun1.com&amp;quot;, &amp;quot;172.16.2.1&amp;quot;}
		demo := New(host, AttemptType(&amp;quot;directConnection&amp;quot;))
		demo.DoTry(SetNtpTime)
&lt;/code&gt;&lt;/pre&gt;&lt;ul&gt;
&lt;li&gt;é‡è¿çš„å…¥å£ï¼Œå½“è½®è¯¢æ—¶é—´ä¸º0æ—¶ï¼Œä½¿ç”¨æ–¹å¼3ï¼Œé»˜è®¤ä¸ºï¼šæ–¹å¼2&lt;/li&gt;
&lt;/ul&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;// å°è¯•çš„é‡è¿çš„æ¬¡æ•°é»˜è®¤ä¸ºï¼š5æ¬¡
// é‡è¿æ–¹å¼é»˜è®¤ä¸ºï¼šæ–¹å¼2
// å»¶æ—¶æ—¶é—´é»˜è®¤ä¸ºï¼š10*time.Minute
// æœ€å¤§å»¶æ—¶æ—¶é—´é»˜è®¤ä¸ºï¼š100*time.Minute
// æœ€å¤§éšæœºæ•°æ—¶é—´é»˜è®¤ä¸ºï¼š100*time.Minute
// é€€é¿ç­–ç•¥ç±»å‹é»˜è®¤ä¸ºï¼šç­–ç•¥1
func New(hots []string, opts ...Option) *tryConfig
func (t *tryConfig) DoTry(retryableFunc RetryableFunc)
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&#34;æºç &#34;&gt;æºç &lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://github.com/zcj-git520/host_try&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;æˆ‘çš„github:https://github.com/zcj-git520/host_try&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
        </item>
        <item>
        <title>timerTask å®šæ—¶ä»»åŠ¡åŒ…</title>
        <link>https://zcj-git520.github.io/p/timertask-%E5%AE%9A%E6%97%B6%E4%BB%BB%E5%8A%A1%E5%8C%85/</link>
        <pubDate>Wed, 15 Dec 2021 22:00:08 +0800</pubDate>
        
        <guid>https://zcj-git520.github.io/p/timertask-%E5%AE%9A%E6%97%B6%E4%BB%BB%E5%8A%A1%E5%8C%85/</guid>
        <description>&lt;img src="https://zcj-git520.github.io/p/timertask-%E5%AE%9A%E6%97%B6%E4%BB%BB%E5%8A%A1%E5%8C%85/1.png" alt="Featured image of post timerTask å®šæ—¶ä»»åŠ¡åŒ…" /&gt;&lt;h2 id=&#34;timertask&#34;&gt;timerTask&lt;/h2&gt;
&lt;p&gt;å®šæ—¶ä»»åŠ¡ï¼šå¯ä»¥å®šæ—¶æ‰§è¡Œå•ä¸ªæˆ–è€…å¯¹ä¸ªä»»åŠ¡ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;å®šæ—¶å®šæ—¶ä»»åŠ¡&lt;/li&gt;
&lt;li&gt;åœæ­¢å®šæ—¶ä»»åŠ¡&lt;/li&gt;
&lt;li&gt;é‡ç½®å®šæ—¶æ—¶é—´ï¼Œå¹¶æ‰§è¡Œå®šæ—¶ä»»åŠ¡&lt;/li&gt;
&lt;li&gt;å®šæ—¶å¼€å¯å®šæ—¶ä»»åŠ¡&lt;/li&gt;
&lt;li&gt;å®šæ—¶ç»“æŸå®šæ—¶ä»»åŠ¡&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&#34;timertaskç»“æ„&#34;&gt;timerTaskç»“æ„&lt;/h2&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;type timerConfig struct {
	timing       time.Duration      // å®šæ—¶æ—¶é—´
	startTiming  time.Duration      // å®šæ—¶å¼€å¯å®šæ—¶ä»»åŠ¡æ—¶é—´
	stopTiming   time.Duration      // å®šæ—¶åœæ­¢å®šæ—¶ä»»åŠ¡æ—¶é—´
	running   	 bool               // å®šæ—¶å™¨è¿è¡Œçš„çŠ¶æ€,è¿ä½œä¸­ä¸ºtrue/æ²¡æœ‰è¿è¡Œä¸ºfalse
	tasks        []func()           // å®šæ—¶ä»»åŠ¡
	stopChan     chan struct{}      // åœæ­¢å®šæ—¶å™¨æ—¥ä»»åŠ¡
	runningMu    sync.Mutex
	Waiter       sync.WaitGroup
}
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&#34;å®šæ—¶ä»»åŠ¡çš„å¼€å§‹å’Œç»“æŸ&#34;&gt;å®šæ—¶ä»»åŠ¡çš„å¼€å§‹å’Œç»“æŸ&lt;/h2&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;å‡½æ•°åŸå‹ï¼šNewTimerTask(d time.Duration, tasks []func(), opts ... Option) *timerConfig
å‚æ•°ä¸ºï¼šç»Ÿä¸€çš„å®šæ—¶ä»»åŠ¡æ—¶é—´,å®šæ—¶ä»»åŠ¡é›†, å¯é€‰å‚æ•°ã€å®šæ—¶å¼€å¯å®šæ—¶ä»»åŠ¡æ—¶é—´(SetTimerStart(d time.Duration)), å®šæ—¶åœæ­¢å®šæ—¶ä»»åŠ¡æ—¶é—´(SetTimerStop(d time.Duration))ã€‘
Start()å¼€å§‹å®šæ—¶ä»»åŠ¡, Stop()ç»“æŸå®šæ—¶ä»»åŠ¡ 

&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ä½¿ç”¨&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;t1 := 1 * time.Second
	tasks := []func(){printTest1, printTest2, printTest3, printTest4, printTest5}
	timer := NewTimerTask(t1, tasks)
	timer.Waiter.Add(2)
	timer.start()
	go func() {
		select {
		case &amp;lt;-time.After(5*time.Second):
			timer.stop()
			timer.Waiter.Done()
			return
		}

	}()
	timer.Waiter.Wait()
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&#34;é‡ç½®å®šæ—¶æ—¶é—´ä»»åŠ¡&#34;&gt;é‡ç½®å®šæ—¶æ—¶é—´ä»»åŠ¡&lt;/h2&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;å‡½æ•°åŸå‹ï¼šReset(d time.Duration) // é‡ç½®å®šæ—¶çš„æ—¶é—´
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ä½¿ç”¨ï¼š&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;	t1 := 1 * time.Second
	tasks := []func(){printTest1, printTest2, printTest3, printTest4, printTest5}
	timer := NewTimerTask(t1, tasks)
	timer.Waiter.Add(3)
	timer.start()
	go func() {
		select {
		case &amp;lt;-time.After(10*time.Second):
			timer.stop()
			timer.Waiter.Done()
			return
		}

	}()
	go func() {
		select {
		case &amp;lt;-time.After(5*time.Second):
			timer.Reset(2*time.Second)
			timer.Waiter.Done()
			return
		}

	}()
	timer.Waiter.Wait()
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&#34;å®šæ—¶å¼€å§‹å®šæ—¶ä»»åŠ¡&#34;&gt;å®šæ—¶å¼€å§‹å®šæ—¶ä»»åŠ¡&lt;/h2&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;å‡½æ•°åŸå‹ï¼šTimerStart() ,éœ€è¦åœ¨åˆå§‹åŒ–æ—¶,è®¾å®šå®šæ—¶å¼€å§‹å®šæ—¶ä»»åŠ¡çš„æ—¶é—´
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ä½¿ç”¨ï¼š&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;	t1 := 1 * time.Second
	ts := time.Now()
	tasks := []func(){printTest1, printTest2, printTest3, printTest4, printTest5}
	timer := NewTimerTask(t1, tasks, SetTimerStart(3*time.Second))
	timer.TimerStart()
	t.Logf(&amp;quot;å®šæ—¶æ—¶é—´ä¸ºï¼š%v&amp;quot;, time.Now().Sub(ts))
	timer.Waiter.Add(2)
	timer.start()
	go func() {
		select {
		case &amp;lt;-time.After(5*time.Second):
			timer.stop()
			timer.Waiter.Done()
			return
		}

	}()
	timer.Waiter.Wait()
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&#34;å®šæ—¶ç»“æŸå®šæ—¶ä»»åŠ¡&#34;&gt;å®šæ—¶ç»“æŸå®šæ—¶ä»»åŠ¡&lt;/h2&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;å‡½æ•°åŸå‹ï¼šTimerStop(),è®¾å®šå®šæ—¶ç»“æŸå®šæ—¶ä»»åŠ¡çš„æ—¶é—´
&lt;/code&gt;&lt;/pre&gt;&lt;ul&gt;
&lt;li&gt;ä½¿ç”¨ï¼š&lt;/li&gt;
&lt;/ul&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;t1 := 1 * time.Second
	tasks := []func(){printTest1, printTest2, printTest3, printTest4, printTest5}
	timer := NewTimerTask(t1, tasks, SetTimerStop(3*time.Second))
	timer.Waiter.Add(1)
	timer.start()
	time.Sleep(1*time.Second)
	ts := time.Now()
	timer.TimerStop()
	t.Logf(&amp;quot;å®šæ—¶æ—¶é—´ä¸ºï¼š%v&amp;quot;, time.Now().Sub(ts))
	timer.Waiter.Wait()
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&#34;æºç &#34;&gt;æºç &lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://github.com/zcj-git520/timerTask&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;æˆ‘çš„github:https://github.com/zcj-git520/timerTask&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
        </item>
        <item>
        <title>ioå¤šè·¯å¤ç”¨</title>
        <link>https://zcj-git520.github.io/p/io%E5%A4%9A%E8%B7%AF%E5%A4%8D%E7%94%A8/</link>
        <pubDate>Sun, 12 Dec 2021 12:00:38 +0800</pubDate>
        
        <guid>https://zcj-git520.github.io/p/io%E5%A4%9A%E8%B7%AF%E5%A4%8D%E7%94%A8/</guid>
        <description>&lt;img src="https://zcj-git520.github.io/p/io%E5%A4%9A%E8%B7%AF%E5%A4%8D%E7%94%A8/3.png" alt="Featured image of post ioå¤šè·¯å¤ç”¨" /&gt;&lt;h2 id=&#34;å¸¸è§çš„ioç±»å‹&#34;&gt;å¸¸è§çš„IOç±»å‹&lt;/h2&gt;
&lt;h3 id=&#34;åŒæ­¥é˜»å¡io&#34;&gt;åŒæ­¥é˜»å¡IO&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;ç”¨æˆ·çº¿ç¨‹é€šè¿‡è°ƒç”¨ç³»ç»Ÿå‘½ä»¤å‘èµ·ioæ“ä½œï¼Œç”±ç”¨æˆ·æ€å¤åˆ¶åˆ°å†…æ ¸æ€ç©ºé—´ï¼Œå†…æ ¸æ€ä¸€ç›´åœ¨ç­‰å¾…ï¼Œ
ç›´åˆ°è·å–åˆ°æ•°æ®æ—¶ï¼Œå°†æ¥æ”¶åˆ°çš„æ•°æ®æ‹·è´åˆ°ç”¨æˆ·æ€ç©ºé—´ï¼Œç”¨æˆ·çº¿ç¨‹åœ¨è·å–æ•°æ®ã€‚æ•´ä¸ªè¿‡ç¨‹ç”¨æˆ·çº¿ç¨‹
å¤„äºé˜»å¡çš„çŠ¶æ€ï¼Œç›´åˆ°æœ‰æ•°æ®ä¸ºæ­¢ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;åŒæ­¥éé˜»å¡io&#34;&gt;åŒæ­¥éé˜»å¡IO&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;åœ¨åŒæ­¥é˜»å¡ioçš„åŸºç¡€ä¸Šï¼Œç”¨æˆ·çº¿ç¨‹å‘èµ·ioæ“ä½œåï¼Œå°±ç«‹åˆ»è¿”å›ã€‚ç”±äºæ˜¯éé˜»å¡çš„æ–¹å¼ï¼Œå°±å­˜åœ¨è¿”å›æ—¶
æ²¡æœ‰æ•°æ®ï¼Œå°±éœ€è¦ä¸æ–­çš„è½®è¯¢å‘èµ·ioè¯·æ±‚ï¼Œç›´åˆ°æ¥æ”¶åˆ°æ•°æ®ä¸ºæ­¢ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;ioå¤šè·¯å¤ç”¨&#34;&gt;IOå¤šè·¯å¤ç”¨&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;ioå¤šè·¯å¤ç”¨æ˜¯ä¸€ç§åŒæ­¥çš„ioæ¨¡å‹ã€‚å®ç°åœ¨å†…æ ¸æ€ä¸­ä¸€ä¸ªçº¿ç¨‹ç›‘è§†å¤šä¸ªio(æ–‡ä»¶å¥æŸ„)ï¼Œä¸€æ—¦æŸä¸ªioå°±ç»ªåï¼Œ
å°±é€šçŸ¥ç”¨æˆ·çº¿ç¨‹è¿›è¡Œç›¸å…³çš„æ“ä½œã€‚æ²¡æœ‰ioå°±ç»ªæ—¶å°±é˜»å¡ç”¨æˆ·çº¿ç¨‹ï¼Œå°†äº¤å‡ºcpuã€‚å¤šè·¯æ˜¯æŒ‡ç½‘ç»œè¿æ¥ï¼Œå¤ç”¨æ˜¯æŒ‡
ç”¨ä¸€ä¸ªçº¿ç¨‹ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;ä¿¡å·é©±åŠ¨io&#34;&gt;ä¿¡å·é©±åŠ¨IO&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;ç”¨æˆ·çº¿ç¨‹å‘èµ·ä¸€ä¸ªioæ“ä½œåï¼Œä¼šå‘å†…æ ¸æ³¨å†Œä¸€ä¸ªä¿¡å·å¤„ç†å‡½æ•°ï¼Œç„¶åè¿”å›ï¼Œå½“å†…æ ¸ä¸­æœ‰æ•°æ®æ—¶ï¼Œå°±ä¼šå‘é€ä¸€ä¸ª
ä¿¡å·ç»™ç”¨æˆ·çº¿ç¨‹ï¼Œç”¨æˆ·æ€çš„çº¿ç¨‹åœ¨è°ƒç”¨ioè¯·æ±‚ï¼Œè·å–åˆ°æ•°æ®ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;å¼‚æ­¥io&#34;&gt;å¼‚æ­¥IO&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;ç”¨æˆ·çº¿ç¨‹å‘èµ·ioæ“ä½œåå°±è¿”å›ã€‚ç”±å†…æ ¸æ€çš„çº¿ç¨‹å¤„ç†ï¼Œå½“å†…æ ¸çº¿ç¨‹è·å–åˆ°æ•°æ®åï¼Œä¸»åŠ¨å°†æ•°æ®æ‹·è´åˆ°ç”¨æˆ·æ€ï¼Œ
å¹¶å‘ŠçŸ¥ç”¨æˆ·çº¿ç¨‹ioæ“ä½œä¹Ÿå®Œæˆã€‚
&lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 196; 
			flex-basis: 470px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/io%E5%A4%9A%E8%B7%AF%E5%A4%8D%E7%94%A8/1.png&#34; data-size=&#34;1212x618&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/io%E5%A4%9A%E8%B7%AF%E5%A4%8D%E7%94%A8/1.png&#34;
			width=&#34;1212&#34;
			height=&#34;618&#34;
			srcset=&#34;https://zcj-git520.github.io/p/io%E5%A4%9A%E8%B7%AF%E5%A4%8D%E7%94%A8/1_hu6a7bbc8d92c625220336f60c7a90aa78_163397_480x0_resize_box_3.png 480w, https://zcj-git520.github.io/p/io%E5%A4%9A%E8%B7%AF%E5%A4%8D%E7%94%A8/1_hu6a7bbc8d92c625220336f60c7a90aa78_163397_1024x0_resize_box_3.png 1024w&#34;
			loading=&#34;lazy&#34;
			&gt;
	&lt;/a&gt;
	
&lt;/figure&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;ioå¤šè·¯å¤ç”¨çš„ä¸‰ç§å®ç°æ–¹å¼&#34;&gt;ioå¤šè·¯å¤ç”¨çš„ä¸‰ç§å®ç°æ–¹å¼&lt;/h2&gt;
&lt;h3 id=&#34;select&#34;&gt;select&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;selectæ˜¯é‡‡ç”¨æ•°ç»„çš„å­˜å‚¨çš„ç»“æ„å­˜å‚¨io(fdæ–‡ä»¶å¥æŸ„)ï¼Œé»˜è®¤çš„æœ€å¤§çš„fdä¸º32ä½ç³»ç»Ÿ1024ï¼Œ64ä½ç³»ç»Ÿæ˜¯2048(å¯è®¾ç½®),ç”¨æˆ·çº¿ç¨‹å°†fdé›†åˆæ‹·è´åˆ°
å†…æ ¸æ€å¹¶å¼€å§‹ç›‘æ§ï¼Œå½“æœ‰fdå°±ç»ªæˆ–è€…è¿‡äº†è®¾ç½®è¶…æ—¶æ—¶é—´ï¼Œå°±å°†fdé›†åˆä¸­æ‰€æœ‰æœªå°±ç»ªçš„fdæ¸…ç©º(å°†bitmapç½®ä¸º0)ï¼Œå°†å°±idé›†åˆè¿”å›åˆ°ç”¨æˆ·æ€ï¼Œ
ç”¨æˆ·æ€çš„çº¿ç¨‹é€šè¿‡è½®è¯¢è¿”å›çš„fdé›†åˆæ‰¾åˆ°å°±ç»ªçš„fd,è¿›è¡Œç›¸å…³çš„ioæ“ä½œè·å–æ•°æ®ã€‚å†ä¸€æ¬¡ç›‘æ§æ—¶ï¼Œéœ€è¦å°†ä¹‹å‰æ¸…ç©ºçš„fd
æ·»åŠ åˆ°fdé›†åˆä¸­è¿›è¡Œæ–°ä¸€è½®çš„ç›‘æ§ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;#include &amp;lt;sys/select.h&amp;gt;
#include &amp;lt;sys/time.h&amp;gt;

#define FD_SETSIZE 1024
#define NFDBITS (8 * sizeof(unsigned long))
#define __FDSET_LONGS (FD_SETSIZE/NFDBITS)

// æ•°æ®ç»“æ„ (bitmap)
typedef struct {
    unsigned long fds_bits[__FDSET_LONGS];
} fd_set;

// API
int select(
    int max_fd,               // æœ€å¤§çš„æ–‡ä»¶æ–‡ä»¶æè¿°ç¬¦fd 
    fd_set *readset,          // è¯»æ–‡ä»¶æè¿°ç¬¦é›†åˆ
    fd_set *writeset,         // å†™æ–‡ä»¶æè¿°ç¬¦é›†åˆ
    fd_set *exceptset,        // å¼‚å¸¸çš„æ–‡ä»¶æè¿°ç¬¦é›†åˆ
    struct timeval *timeout   // è¶…æ—¶æ—¶é—´
)                              // è¿”å›å€¼å°±ç»ªæè¿°ç¬¦çš„æ•°ç›®
FD_ZERO(int fd, fd_set* fds)   // æ¸…ç©ºé›†åˆ
FD_SET(int fd, fd_set* fds)    // å°†ç»™å®šçš„æè¿°ç¬¦åŠ å…¥é›†åˆ
FD_ISSET(int fd, fd_set* fds)  // åˆ¤æ–­æŒ‡å®šæè¿°ç¬¦æ˜¯å¦åœ¨é›†åˆä¸­ 
FD_CLR(int fd, fd_set* fds)    // å°†ç»™å®šçš„æè¿°ç¬¦ä»æ–‡ä»¶ä¸­åˆ é™¤ 
//selectä½¿ç”¨ç¤ºä¾‹
int main() {
  /*
   * è¿™é‡Œè¿›è¡Œä¸€äº›åˆå§‹åŒ–çš„è®¾ç½®ï¼Œ
   * åŒ…æ‹¬socketå»ºç«‹ï¼Œåœ°å€çš„è®¾ç½®ç­‰,
   */

  fd_set read_fs, write_fs;
  struct timeval timeout;
  int max = 0;  // ç”¨äºè®°å½•æœ€å¤§çš„fdï¼Œåœ¨è½®è¯¢ä¸­æ—¶åˆ»æ›´æ–°å³å¯

  // åˆå§‹åŒ–æ¯”ç‰¹ä½
  FD_ZERO(&amp;amp;read_fs);
  FD_ZERO(&amp;amp;write_fs);

  int nfds = 0; // è®°å½•å°±ç»ªçš„äº‹ä»¶ï¼Œå¯ä»¥å‡å°‘éå†çš„æ¬¡æ•°
  while (1) {
    // é˜»å¡è·å–
    // æ¯æ¬¡éœ€è¦æŠŠfdä»ç”¨æˆ·æ€æ‹·è´åˆ°å†…æ ¸æ€
    nfds = select(max + 1, &amp;amp;read_fd, &amp;amp;write_fd, NULL, &amp;amp;timeout);
    // æ¯æ¬¡éœ€è¦éå†æ‰€æœ‰fdï¼Œåˆ¤æ–­æœ‰æ— è¯»å†™äº‹ä»¶å‘ç”Ÿ
    for (int i = 0; i &amp;lt;= max &amp;amp;&amp;amp; nfds; ++i) {
      if (i == listenfd) {
         --nfds;
         // è¿™é‡Œå¤„ç†acceptäº‹ä»¶
         FD_SET(i, &amp;amp;read_fd);//å°†å®¢æˆ·ç«¯socketåŠ å…¥åˆ°é›†åˆä¸­
      }
      if (FD_ISSET(i, &amp;amp;read_fd)) {
        --nfds;
        // è¿™é‡Œå¤„ç†readäº‹ä»¶
      }
      if (FD_ISSET(i, &amp;amp;write_fd)) {
         --nfds;
        // è¿™é‡Œå¤„ç†writeäº‹ä»¶
      }
    }
  }
 

&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 186; 
			flex-basis: 446px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/io%E5%A4%9A%E8%B7%AF%E5%A4%8D%E7%94%A8/2.png&#34; data-size=&#34;847x455&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/io%E5%A4%9A%E8%B7%AF%E5%A4%8D%E7%94%A8/2.png&#34;
			width=&#34;847&#34;
			height=&#34;455&#34;
			srcset=&#34;https://zcj-git520.github.io/p/io%E5%A4%9A%E8%B7%AF%E5%A4%8D%E7%94%A8/2_hu01f397a43b9bb4df8736f1e60cb4211e_107852_480x0_resize_box_3.png 480w, https://zcj-git520.github.io/p/io%E5%A4%9A%E8%B7%AF%E5%A4%8D%E7%94%A8/2_hu01f397a43b9bb4df8736f1e60cb4211e_107852_1024x0_resize_box_3.png 1024w&#34;
			loading=&#34;lazy&#34;
			&gt;
	&lt;/a&gt;
	
&lt;/figure&gt;&lt;/p&gt;
&lt;h4 id=&#34;selectå­˜åœ¨çš„é—®é¢˜&#34;&gt;selectå­˜åœ¨çš„é—®é¢˜&lt;/h4&gt;
&lt;ol&gt;
&lt;li&gt;ç›‘æ§çš„æ–‡ä»¶æè¿°ç¬¦é›†åˆæ˜¯æœ‰ä¸Šçº¿çš„ï¼Œå³å­˜å‚¨çš„fdæœ‰æœ€å¤§å€¼ï¼Œé»˜è®¤çš„æœ€å¤§çš„fdä¸º32ä½ç³»ç»Ÿ1024ï¼Œ64ä½ç³»ç»Ÿ2048(å¯è®¾ç½®)&lt;/li&gt;
&lt;li&gt;æ¯ä¸€æ¬¡éƒ½æ˜¯éœ€è¦å°†æ–‡ä»¶æè¿°ç¬¦é›†åˆä»ç”¨æˆ·æ€æ‹·è´åˆ°å†…æ ¸æ€ï¼Œä¸”å†…æ ¸æ€æ˜¯é€šè¿‡è½®è¯¢çš„æ–¹å¼åˆ¤æ–­fdæ˜¯å¦å°±ç»ªï¼Œå½“æ–‡ä»¶æè¿°ç¬¦å¢å¤šæ—¶
ä¼šé€ æˆæ•´ä½“çš„æ€§èƒ½çš„ä¸‹é™ã€‚&lt;/li&gt;
&lt;li&gt;æ–‡ä»¶æè¿°ç¬¦é›†åˆè¿”å›æ—¶ï¼Œä¼šå°†æ²¡æœ‰å°±ç»ªçš„fdåˆ é™¤(å°†bitmapç½®ä¸º0)ï¼Œå½“ç»§ç»­ç›‘æ§æ—¶ï¼Œä¼šå°†åˆ é™¤çš„fdæ·»åŠ åˆ°é›†åˆä¸­&lt;/li&gt;
&lt;li&gt;è¿”å›åˆ°ç”¨æˆ·æ€çš„é›†åˆï¼Œå¹¶æœªæ˜ç¡®å°±ç»ªçš„æ–‡ä»¶æè¿°ç¬¦ï¼Œä»ç„¶éœ€è¦è½®è¯¢åˆ¤æ–­&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;poll&#34;&gt;poll&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;poll æ˜¯é‡‡ç”¨é“¾è¡¨æ¥å­˜å‚¨fd,æ²¡æœ‰äº†æœ€å¤§è¿æ¥æ•°çš„é™åˆ¶ã€‚ç”¨æˆ·æœªæ¯ä¸€ä¸ªfdå®šä¹‰ä¸€ä¸ªäº‹ä»¶ç»“æ„ä½“ï¼Œç„¶åå°†äº‹ä»¶ç»“æ„ä½“çš„é“¾è¡¨æ‹·è´åˆ°å†…æ ¸ä¸­ï¼Œ
å†…æ ¸çº¿ç¨‹è¿›è¡Œè½®è¯¢éå†è¿›è¡Œåˆ¤æ–­fdæ˜¯å¦å°±ç»ªã€‚å½“æœ‰fdå°±ç»ªå°±å°†å°±ç»ªäº‹ä»¶æ”¾å…¥reventsä¸­ï¼Œç„¶åè¿”å›ï¼Œç”¨æˆ·æ€éå†äº‹ä»¶é“¾è¡¨å¯¹äº‹ä»¶ç»“æ„ä½“çš„revents
è¿›è¡Œåˆ¤æ–­å°±ç»ªçš„fdï¼Œè¿›è¡Œç›¸å…³çš„ioæ“ä½œè·å–æ•°æ®ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;#include &amp;lt;poll.h&amp;gt;
// æ•°æ®ç»“æ„
struct pollfd {
    int fd;                         // éœ€è¦ç›‘è§†çš„æ–‡ä»¶æè¿°ç¬¦
    short events;                   // éœ€è¦å†…æ ¸ç›‘è§†çš„äº‹ä»¶ï¼ˆè¯»å†™ï¼‰
    short revents;                  // å®é™…å‘ç”Ÿçš„äº‹ä»¶
};
//
// API
int poll(struct pollfd fds[], nfds_t nfds, int timeout); // fdçš„é›†åˆï¼Œ ä¸ªæ•°ï¼Œè¶…æ—¶æ—¶é—´
// 
// å…ˆå®å®šä¹‰é•¿åº¦
#define MAX_POLLFD_LEN 4096  

int main() {
  /*
   * åœ¨è¿™é‡Œè¿›è¡Œä¸€äº›åˆå§‹åŒ–çš„æ“ä½œï¼Œ
   * æ¯”å¦‚åˆå§‹åŒ–æ•°æ®å’Œsocketç­‰ã€‚
   */

  int nfds = 0;
  pollfd fds[MAX_POLLFD_LEN];
  memset(fds, 0, sizeof(fds));
  fds[0].fd = listenfd;
  fds[0].events = POLLRDNORM;
  int max  = 0;  // é˜Ÿåˆ—çš„å®é™…é•¿åº¦ï¼Œæ˜¯ä¸€ä¸ªéšæ—¶æ›´æ–°çš„ï¼Œä¹Ÿå¯ä»¥è‡ªå®šä¹‰å…¶ä»–çš„
  int timeout = 0;

  int current_size = max;
  while (1) {
    // é˜»å¡è·å–
    // æ¯æ¬¡éœ€è¦æŠŠfdä»ç”¨æˆ·æ€æ‹·è´åˆ°å†…æ ¸æ€
    nfds = poll(fds, max+1, timeout);
    if (fds[0].revents &amp;amp; POLLRDNORM) {
        // è¿™é‡Œå¤„ç†acceptäº‹ä»¶
        connfd = accept(listenfd);
        //å°†æ–°çš„æè¿°ç¬¦æ·»åŠ åˆ°è¯»æè¿°ç¬¦é›†åˆä¸­
    }
    // æ¯æ¬¡éœ€è¦éå†æ‰€æœ‰fdï¼Œåˆ¤æ–­æœ‰æ— è¯»å†™äº‹ä»¶å‘ç”Ÿ
    for (int i = 1; i &amp;lt; max; ++i) {     
      if (fds[i].revents &amp;amp; POLLRDNORM) { 
         sockfd = fds[i].fd
         if ((n = read(sockfd, buf, MAXLINE)) &amp;lt;= 0) {
            // è¿™é‡Œå¤„ç†readäº‹ä»¶
            if (n == 0) {
                close(sockfd);
                fds[i].fd = -1;
            }
         } else {
             // è¿™é‡Œå¤„ç†writeäº‹ä»¶     
         }
         if (--nfds &amp;lt;= 0) {
            break;       
         }   
      }
    }
  }

&lt;/code&gt;&lt;/pre&gt;&lt;h4 id=&#34;pollå­˜åœ¨çš„é—®é¢˜&#34;&gt;pollå­˜åœ¨çš„é—®é¢˜&lt;/h4&gt;
&lt;ol&gt;
&lt;li&gt;pollè§£å†³äº†selectçš„æœ€å¤§è¿æ¥æ•°çš„é—®é¢˜ï¼Œä½†æ˜¯è¿˜æ˜¯å­˜åœ¨ï¼šæ¯æ¬¡è°ƒç”¨polléƒ½éœ€è¦å°†fdæ–‡ä»¶æè¿°ç¬¦é›†åˆæ‹·è´åˆ°å†…æ ¸æ€&lt;/li&gt;
&lt;li&gt;å¯¹fdæ˜¯çº¿æ€§æ‰«æï¼Œå³è¿˜æ˜¯é‡‡ç”¨äº†è½®è¯¢éå†çš„æ–¹æ³•,å†…æ ¸æ€ä¸­ç›‘æ§æ˜¯å¦æœ‰å°±ç»ªçš„fd,ç”¨æˆ·æ€ä¸­åˆ¤æ–­å°±ç»ªçš„fd&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;epoll&#34;&gt;epoll&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;epollæ˜¯é‡‡ç”¨çº¢é»‘æ ‘å­˜å‚¨fd,é‡‡ç”¨rdlistå­˜å‚¨å°±ç»ªçš„fd, é€šè¿‡epoll_creat()æ–¹æ³•æ¥åˆ›å»ºeventPollç»“æ„ä½“(çº¢é»‘æ ‘+relist)ã€‚
é€šè¿‡epoll_ctl()æ–¹æ³•å°†fdå­˜å…¥åˆ°çº¢é»‘æ ‘ä¸­ï¼Œè‹¥æœ‰å°±ç»ªçš„fd,å°±è°ƒç”¨ep_poll_callback()å›è°ƒå‡½æ•°å°†å°±ç»ªçš„fdæ·»åŠ åˆ°relistä¸­ã€‚
è°ƒç”¨event_wait()æ£€æŸ¥æ˜¯å¦æœ‰å°±ç»ªçš„fd,å³æ£€æµ‹relistæ˜¯å¦ä¸ºç©ºã€‚è‹¥ä¸ä¸ºç©ºï¼Œå°†å°†å°±ç»ªçš„fdçš„æ•°é‡è¿”å›ã€‚ç”¨æˆ·æ€éå†relist+è¿”å›çš„å°±ç»ªçš„fd
çš„æ•°é‡å³å¯è·å¾—æ•°æ®ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;
#include &amp;lt;sys/epoll.h&amp;gt;

// æ•°æ®ç»“æ„
// æ¯ä¸€ä¸ªepollå¯¹è±¡éƒ½æœ‰ä¸€ä¸ªç‹¬ç«‹çš„eventpollç»“æ„ä½“
// ç”¨äºå­˜æ”¾é€šè¿‡epoll_ctlæ–¹æ³•å‘epollå¯¹è±¡ä¸­æ·»åŠ è¿›æ¥çš„äº‹ä»¶
// epoll_waitæ£€æŸ¥æ˜¯å¦æœ‰äº‹ä»¶å‘ç”Ÿæ—¶ï¼Œåªéœ€è¦æ£€æŸ¥eventpollå¯¹è±¡ä¸­çš„rdliståŒé“¾è¡¨ä¸­æ˜¯å¦æœ‰epitemå…ƒç´ å³å¯
struct eventpoll {
    /*çº¢é»‘æ ‘çš„æ ¹èŠ‚ç‚¹ï¼Œè¿™é¢—æ ‘ä¸­å­˜å‚¨ç€æ‰€æœ‰æ·»åŠ åˆ°epollä¸­çš„éœ€è¦ç›‘æ§çš„äº‹ä»¶*/
    struct rb_root  rbr;
    /*åŒé“¾è¡¨ä¸­åˆ™å­˜æ”¾ç€å°†è¦é€šè¿‡epoll_waitè¿”å›ç»™ç”¨æˆ·çš„æ»¡è¶³æ¡ä»¶çš„äº‹ä»¶*/
    struct list_head rdlist;
};
// å¯¹äºæ¯ä¸€ä¸ªäº‹ä»¶ï¼Œéƒ½ä¼šå»ºç«‹ä¸€ä¸ªepitemç»“æ„ä½“
struct epitem{
    struct rb_node  rbn;//çº¢é»‘æ ‘èŠ‚ç‚¹
    struct list_head    rdllink;//åŒå‘é“¾è¡¨èŠ‚ç‚¹
    struct epoll_filefd  ffd;  //äº‹ä»¶å¥æŸ„ä¿¡æ¯
    struct eventpoll *ep;    //æŒ‡å‘å…¶æ‰€å±çš„eventpollå¯¹è±¡
    struct epoll_event event; //æœŸå¾…å‘ç”Ÿçš„äº‹ä»¶ç±»å‹
}

// API
int epoll_create(int size); // å†…æ ¸ä¸­é—´åŠ ä¸€ä¸ª ep å¯¹è±¡ï¼ŒæŠŠæ‰€æœ‰éœ€è¦ç›‘å¬çš„ socket éƒ½æ”¾åˆ° ep å¯¹è±¡ä¸­
int epoll_ctl(int epfd, int op, int fd, struct epoll_event *event); // epoll_ctl è´Ÿè´£æŠŠ socket å¢åŠ ã€åˆ é™¤åˆ°å†…æ ¸çº¢é»‘æ ‘
int epoll_wait(int epfd, struct epoll_event * events, int maxevents, int timeout);// epoll_wait è´Ÿè´£æ£€æµ‹å¯è¯»é˜Ÿåˆ—ï¼Œæ²¡æœ‰å¯è¯» socket åˆ™é˜»å¡è¿›ç¨‹
//epollä½¿ç”¨ç¤ºä¾‹
int main(int argc, char* argv[])
{
   /*
   * åœ¨è¿™é‡Œè¿›è¡Œä¸€äº›åˆå§‹åŒ–çš„æ“ä½œï¼Œ
   * æ¯”å¦‚åˆå§‹åŒ–æ•°æ®å’Œsocketç­‰ã€‚
   */

    // å†…æ ¸ä¸­åˆ›å»ºepå¯¹è±¡
    epfd=epoll_create(256);
    // éœ€è¦ç›‘å¬çš„socketæ”¾åˆ°epä¸­
    epoll_ctl(epfd,EPOLL_CTL_ADD,listenfd,&amp;amp;ev);
 
    while(1) {
      // é˜»å¡è·å–
      nfds = epoll_wait(epfd,events,20,0);
      for(i=0;i&amp;lt;nfds;++i) {
          if(events[i].data.fd==listenfd) {
              // è¿™é‡Œå¤„ç†acceptäº‹ä»¶
              connfd = accept(listenfd);
              // æ¥æ”¶æ–°è¿æ¥å†™åˆ°å†…æ ¸å¯¹è±¡ä¸­
              epoll_ctl(epfd,EPOLL_CTL_ADD,connfd,&amp;amp;ev);
          } else if (events[i].events&amp;amp;EPOLLIN) {
              // è¿™é‡Œå¤„ç†readäº‹ä»¶
              read(sockfd, BUF, MAXLINE);
              //è¯»å®Œåå‡†å¤‡å†™
              epoll_ctl(epfd,EPOLL_CTL_MOD,sockfd,&amp;amp;ev);
          } else if(events[i].events&amp;amp;EPOLLOUT) {
              // è¿™é‡Œå¤„ç†writeäº‹ä»¶
              write(sockfd, BUF, n);
              //å†™å®Œåå‡†å¤‡è¯»
              epoll_ctl(epfd,EPOLL_CTL_MOD,sockfd,&amp;amp;ev);
          }
      }
    }
    return 0;
}
&lt;/code&gt;&lt;/pre&gt;&lt;ul&gt;
&lt;li&gt;&lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 262; 
			flex-basis: 630px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/io%E5%A4%9A%E8%B7%AF%E5%A4%8D%E7%94%A8/5.png&#34; data-size=&#34;1651x628&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/io%E5%A4%9A%E8%B7%AF%E5%A4%8D%E7%94%A8/5.png&#34;
			width=&#34;1651&#34;
			height=&#34;628&#34;
			srcset=&#34;https://zcj-git520.github.io/p/io%E5%A4%9A%E8%B7%AF%E5%A4%8D%E7%94%A8/5_hu2b83fdcd48661756703b6b6463448f49_248190_480x0_resize_box_3.png 480w, https://zcj-git520.github.io/p/io%E5%A4%9A%E8%B7%AF%E5%A4%8D%E7%94%A8/5_hu2b83fdcd48661756703b6b6463448f49_248190_1024x0_resize_box_3.png 1024w&#34;
			loading=&#34;lazy&#34;
			&gt;
	&lt;/a&gt;
	
&lt;/figure&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;epoll-ä¼˜ç‚¹&#34;&gt;epoll ä¼˜ç‚¹&lt;/h4&gt;
&lt;ol&gt;
&lt;li&gt;é‡‡ç”¨äº†çº¢é»‘æ ‘è¿›è¡Œå­˜å‚¨fd, æ²¡æœ‰fdçš„æœ€å¤§è¿æ¥æ•°é™åˆ¶&lt;/li&gt;
&lt;li&gt;é‡‡ç”¨äº†äº‹ä»¶å›è°ƒçš„æ–¹å¼ï¼Œå³æœ‰å°±ç»ªçš„fdæ—¶ï¼Œå°±ä¼šå°†fdé€šè¿‡å›è°ƒå‡½æ•°æ·»åŠ åˆ°relistè¡¨ä¸­ï¼Œå¹¶ä¸æ˜¯é‡‡ç”¨è½®è¯¢+éå†çš„æ–¹å¼&lt;/li&gt;
&lt;li&gt;åˆ©ç”¨mmap()æ–‡ä»¶æ˜ å°„å†…å­˜åŠ é€Ÿä¸å†…æ ¸æ€ç©ºé—´çš„ä¿¡æ¯ä¼ é€’(ç”¨æˆ·æ€ä¸å†…æ ¸æ€å…±äº«å†…å­˜)ï¼Œå‡å°‘äº†fdé›†åˆä»ç”¨æˆ·æ€æ‹·è´
(ç”¨æˆ·ç©ºé—´å’Œå†…æ ¸ç©ºé—´çš„åªæ‹·è´ä¸€æ¬¡)åˆ°å†…æ ¸æ€çš„å¼€é”€&lt;/li&gt;
&lt;/ol&gt;
&lt;h4 id=&#34;epollçš„è§¦å‘&#34;&gt;epollçš„è§¦å‘&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;æ°´å¹³è§¦å‘LT:åªæœ‰è¦å°±ç»ªçš„fd,epoll_wait()å°±ä¼šè¿”å›ï¼Œå¹¶æé†’ç”¨æˆ·æ€è¿›è¡Œç›¸å…³çš„æ“ä½œã€‚å³åªæœ‰ç¼“å†²åŒºæœ‰å˜åŒ–å°±ä¼šè§¦å‘&lt;/li&gt;
&lt;li&gt;è¾¹ç¼˜è§¦å‘ET:å½“æ–‡ä»¶æè¿°ç¬¦å…³è”çš„ç¼“å†²åŒºæœ‰ç©ºè½¬ä¸ºéç©ºæ—¶ï¼Œæˆ–è€…æ˜¯ç¼“å†²åŒºç”±æ»¡åˆ°ä¸æ»¡å°±ä¼šè§¦å‘ã€‚å³åªæœ‰ç¼“å†²åŒºæœ‰ç©ºè½¬ä¸ºéç©ºæˆ–è€…æ˜¯ç”±æ»¡è½¬ä¸ºéæ»¡çš„
æƒ…å†µæ‰ä¼šè§¦å‘ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;ä¸‰è€…æ€»ç»“&#34;&gt;ä¸‰è€…æ€»ç»“&lt;/h3&gt;
&lt;p&gt;&lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 134; 
			flex-basis: 322px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/io%E5%A4%9A%E8%B7%AF%E5%A4%8D%E7%94%A8/3.png&#34; data-size=&#34;673x501&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/io%E5%A4%9A%E8%B7%AF%E5%A4%8D%E7%94%A8/3.png&#34;
			width=&#34;673&#34;
			height=&#34;501&#34;
			srcset=&#34;https://zcj-git520.github.io/p/io%E5%A4%9A%E8%B7%AF%E5%A4%8D%E7%94%A8/3_hu407313779efa40a3c2449c5134b0af99_194287_480x0_resize_box_3.png 480w, https://zcj-git520.github.io/p/io%E5%A4%9A%E8%B7%AF%E5%A4%8D%E7%94%A8/3_hu407313779efa40a3c2449c5134b0af99_194287_1024x0_resize_box_3.png 1024w&#34;
			loading=&#34;lazy&#34;
			&gt;
	&lt;/a&gt;
	
&lt;/figure&gt;&lt;/p&gt;
&lt;h2 id=&#34;å‚è€ƒæ–‡çŒ®&#34;&gt;å‚è€ƒæ–‡çŒ®&lt;/h2&gt;
&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;https://juejin.cn/post/6882984260672847879#heading-13&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;å½»åº•ç†è§£ IO å¤šè·¯å¤ç”¨å®ç°æœºåˆ¶&lt;/a&gt;&lt;/p&gt;
</description>
        </item>
        <item>
        <title>redisè¿›é˜¶</title>
        <link>https://zcj-git520.github.io/p/redis%E8%BF%9B%E9%98%B6/</link>
        <pubDate>Wed, 08 Dec 2021 22:00:38 +0800</pubDate>
        
        <guid>https://zcj-git520.github.io/p/redis%E8%BF%9B%E9%98%B6/</guid>
        <description>&lt;img src="https://zcj-git520.github.io/p/redis%E8%BF%9B%E9%98%B6/5.png" alt="Featured image of post redisè¿›é˜¶" /&gt;&lt;h2 id=&#34;redisçš„ç½‘ç»œåè®®&#34;&gt;redisçš„ç½‘ç»œåè®®&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;redisæ˜¯åŸºäºtcp/ipåè®®ï¼Œå³å®¢æˆ·ç«¯ä¸æœåŠ¡å™¨ä¿æŒåŒå·¥è¿æ¥ï¼Œé€šè¿‡åºåˆ—åŒ–çš„åè®®(respåè®®)è¿›è¡Œæ•°æ®çš„äº¤äº’ï¼Œåœ¨Redisä¸­ï¼Œåè®®æ•°æ®åˆ†ä¸ºä¸åŒçš„ç±»å‹ï¼Œ
æ¯ç§ç±»å‹çš„æ•°æ®å‡ä»¥CRLFï¼ˆ\r\nï¼‰ç»“æŸï¼Œé€šè¿‡æ•°æ®çš„é¦–å­—ç¬¦åŒºåˆ†ç±»å‹
&lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 142; 
			flex-basis: 343px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/redis%E8%BF%9B%E9%98%B6/1.png&#34; data-size=&#34;449x314&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/redis%E8%BF%9B%E9%98%B6/1.png&#34;
			width=&#34;449&#34;
			height=&#34;314&#34;
			srcset=&#34;https://zcj-git520.github.io/p/redis%E8%BF%9B%E9%98%B6/1_hu6689e274a0996608cb8ab14cd419ea9e_23725_480x0_resize_box_3.png 480w, https://zcj-git520.github.io/p/redis%E8%BF%9B%E9%98%B6/1_hu6689e274a0996608cb8ab14cd419ea9e_23725_1024x0_resize_box_3.png 1024w&#34;
			loading=&#34;lazy&#34;
			&gt;
	&lt;/a&gt;
	
&lt;/figure&gt;&lt;/li&gt;
&lt;li&gt;redisæœåŠ¡å™¨æ˜¯ä¸€ä¸ªäº‹ä»¶é©±åŠ¨ç³»ç»Ÿä¸»è¦åˆ†ä¸ºï¼šæ–‡ä»¶äº‹ä»¶(ioäº‹ä»¶)å’Œæ—¶é—´äº‹ä»¶&lt;/li&gt;
&lt;li&gt;æ–‡ä»¶é©±åŠ¨ï¼šsocketçš„è¯»å–äº‹ä»¶(ioäº‹ä»¶)æ˜¯ç”±ï¼›è¿æ¥(ä¸‰æ¬¡æ¡æ‰‹)ã€è¯·æ±‚ã€å“åº”(æ•°æ®è¿”å›)ã€æ–­å¼€è¿æ¥(å››æ¬¡æŒ¥æ‰‹)ç»„æˆï¼Œredisæ˜¯é‡‡ç”¨å•çº¿ç¨‹
å’Œepoll(ioå¤šè·¯å¤ç”¨)çš„æœºåˆ¶å¤„ç†ç›¸å…³çš„æ–‡ä»¶äº‹ä»¶ã€‚&lt;/li&gt;
&lt;li&gt;æ—¶é—´äº‹ä»¶ï¼šå¯åˆ†ä¸ºå®šæ—¶äº‹ä»¶(ç¨‹åºåœ¨æŒ‡å®šæ—¶é—´åæ‰§è¡Œç›¸å…³çš„æ“ä½œ)å’Œå‘¨æœŸäº‹ä»¶(ç¨‹åºæ¯éš”ä¸€æ®µæ—¶é—´è¿è¡Œç›¸å…³çš„æ“ä½œ)&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;rediså®¢æˆ·ç«¯ä¸æœåŠ¡å™¨äº¤äº’æ¨¡å¼&#34;&gt;rediså®¢æˆ·ç«¯ä¸æœåŠ¡å™¨äº¤äº’æ¨¡å¼&lt;/h2&gt;
&lt;h3 id=&#34;ä¸²è¡Œçš„è¯·æ±‚äº¤äº’æ¨¡å¼&#34;&gt;ä¸²è¡Œçš„è¯·æ±‚/äº¤äº’æ¨¡å¼&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;å®¢æˆ·ç«¯ä¸æœåŠ¡å™¨å»ºç«‹é•¿è¿æ¥ï¼Œé€šè¿‡å¿ƒè·³æ£€æµ‹(ping-pong)ackåº”ç­”ï¼Œå³å®¢æˆ·ç«¯å‘é€è¯·æ±‚ï¼ŒæœåŠ¡å™¨åœ¨è¿›è¡Œå“åº”ã€‚&lt;/li&gt;
&lt;li&gt;åœ¨å•è¿æ¥ä¸‹ã€‚å¤§éƒ¨åˆ†æ—¶é—´éƒ½æ˜¯å¤„äºç½‘ç»œç­‰å¾…ä¸Š(å®¢æˆ·ç«¯åœ¨å‘é€è¯·æ±‚å‘½ä»¤ï¼Œå¹¶ç›‘å¬socketè¿”å›ï¼Œé€šå¸¸ä»¥é˜»å¡æ¨¡å¼ç­‰å¾…æœåŠ¡å™¨ç«¯çš„å“åº”)ï¼Œè¿™ç§æ¨¡å¼ä¸‹
çš„æ€§èƒ½è¾ƒä½
&lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 132; 
			flex-basis: 317px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/redis%E8%BF%9B%E9%98%B6/2.png&#34; data-size=&#34;459x347&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/redis%E8%BF%9B%E9%98%B6/2.png&#34;
			width=&#34;459&#34;
			height=&#34;347&#34;
			srcset=&#34;https://zcj-git520.github.io/p/redis%E8%BF%9B%E9%98%B6/2_hud8100cb78349642cfc277c6a21e59924_8613_480x0_resize_box_3.png 480w, https://zcj-git520.github.io/p/redis%E8%BF%9B%E9%98%B6/2_hud8100cb78349642cfc277c6a21e59924_8613_1024x0_resize_box_3.png 1024w&#34;
			loading=&#34;lazy&#34;
			&gt;
	&lt;/a&gt;
	
&lt;/figure&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;ç®¡é“æŠ€æœ¯pipelineåŒå·¥çš„è¯·æ±‚å“åº”æ¨¡å¼&#34;&gt;ç®¡é“æŠ€æœ¯(pipeline)åŒå·¥çš„è¯·æ±‚/å“åº”æ¨¡å¼&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;å°†ä¸€æ‰¹å‘½ä»¤è¿›è¡Œæ‰“åŒ…ï¼Œç„¶åå‘é€ç»™æœåŠ¡å™¨ï¼ŒæœåŠ¡å™¨è·å–æ•°æ®åæŒ‰é¡ºåºæ‰“åŒ…è¿”å›ï¼Œå³æ‰¹é‡è¯·æ±‚ï¼Œæ‰¹é‡å“åº”ã€‚ä»¥æ¬¡æ¥å‡å°‘ç½‘ç»œç­‰å¾…çš„å»¶æ—¶ï¼Œæé«˜æ€§èƒ½
&lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 70; 
			flex-basis: 168px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/redis%E8%BF%9B%E9%98%B6/3.png&#34; data-size=&#34;459x654&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/redis%E8%BF%9B%E9%98%B6/3.png&#34;
			width=&#34;459&#34;
			height=&#34;654&#34;
			srcset=&#34;https://zcj-git520.github.io/p/redis%E8%BF%9B%E9%98%B6/3_hu66e812f3a220eb5db0a394f5a9aa9cc3_20538_480x0_resize_box_3.png 480w, https://zcj-git520.github.io/p/redis%E8%BF%9B%E9%98%B6/3_hu66e812f3a220eb5db0a394f5a9aa9cc3_20538_1024x0_resize_box_3.png 1024w&#34;
			loading=&#34;lazy&#34;
			&gt;
	&lt;/a&gt;
	
&lt;/figure&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;åŸå­åŒ–çš„æ‰¹é‡è¯·æ±‚å“åº”äº‹åŠ¡æ¨¡å¼&#34;&gt;åŸå­åŒ–çš„æ‰¹é‡è¯·æ±‚/å“åº”(äº‹åŠ¡)æ¨¡å¼&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;å®¢æˆ·ç«¯å°†è¯·æ±‚çš„å‘½ä»¤å‘é€å‘åˆ°æœåŠ¡å™¨ï¼ŒæœåŠ¡å™¨ç»è¿™äº›è¯·æ±‚æš‚å­˜åœ¨æœåŠ¡å™¨çš„è¯·æ±‚é˜Ÿåˆ—ä¸­ï¼Œè¿™è¿‡ç¨‹ä¹Ÿç§°ä¸ºï¼šè¯·æ±‚å…¥é˜Ÿåˆ—ã€‚æœåŠ¡å™¨åœ¨ä»è¯·æ±‚é˜Ÿåˆ—ä¸­
æ‹¿å»æ‰€æœ‰çš„è¯·æ±‚æ‰§è¡Œï¼Œç„¶åå†å°†æ•°æ®è¿”å›ç»™å®¢æˆ·ç«¯ï¼Œè¿™è¿‡ç¨‹ç§°ä¸ºæ‰§è¡Œé˜¶æ®µã€‚&lt;/li&gt;
&lt;li&gt;æœåŠ¡å™¨åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­ä¸ä¼šåœ¨æ¥æ”¶å…¶ä»–å®¢æˆ·ç«¯å‘é€çš„è¯·æ±‚ã€‚æ‰€æœ‰çš„æ“ä½œéƒ½æ˜¯åŸå­æ“ä½œï¼Œå³è¯·æ±‚éƒ½æ‰§è¡Œæˆ–éƒ½ä¸æ‰§è¡Œã€‚&lt;/li&gt;
&lt;li&gt;äº‹åŠ¡çš„æ­¥éª¤ä¸ºï¼šå¼€å§‹äº‹åŠ¡-&amp;gt;è¯·æ±‚å…¥é˜Ÿåˆ—-&amp;gt;æ‰§è¡Œè¯·æ±‚
&lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 132; 
			flex-basis: 317px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/redis%E8%BF%9B%E9%98%B6/4.png&#34; data-size=&#34;459x347&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/redis%E8%BF%9B%E9%98%B6/4.png&#34;
			width=&#34;459&#34;
			height=&#34;347&#34;
			srcset=&#34;https://zcj-git520.github.io/p/redis%E8%BF%9B%E9%98%B6/4_huf01a29421262a303fde2c9249c01cc9c_12313_480x0_resize_box_3.png 480w, https://zcj-git520.github.io/p/redis%E8%BF%9B%E9%98%B6/4_huf01a29421262a303fde2c9249c01cc9c_12313_1024x0_resize_box_3.png 1024w&#34;
			loading=&#34;lazy&#34;
			&gt;
	&lt;/a&gt;
	
&lt;/figure&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;å‘å¸ƒè®¢é˜…pubsubæ¨¡å¼&#34;&gt;å‘å¸ƒ/è®¢é˜…(pub/sub)æ¨¡å¼&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;å‘å¸ƒè€…(pub)å‘é€æ¶ˆæ¯ï¼Œè®¢é˜…è€…(sub)æ¥æ”¶æ¶ˆæ¯ï¼Œå‘å¸ƒè€…å’Œè®¢é˜…è€…é€šè¿‡(é€šé“)channelå…³è”ï¼Œæ‰€æœ‰çš„channeléƒ½æ˜¯ç”±ä¸€ä¸ªmapç»´æŠ¤ï¼Œmapçš„keyæ˜¯
channelçš„åå­—ï¼Œvalueæ˜¯æ‰€æœ‰çš„è®¢é˜…è€…çš„æŒ‡é’ˆé“¾è¡¨ã€‚å®¢æˆ·ç«¯å¯ä»¥è®¢é˜…ä»»æ„çš„æ•°é‡çš„é¢‘é“ï¼Œä¹Ÿå¯ä»¥è¿›è¡Œå‘å¸ƒã€‚&lt;/li&gt;
&lt;li&gt;å‘å¸ƒè€…å’Œè®¢é˜…è€…éƒ½æ˜¯å®¢æˆ·ç«¯ï¼ŒæœåŠ¡å™¨åªæ˜¯è¿›è¡Œæ•°æ®çš„ä¸­è½¬ã€‚å³å‘å¸ƒè€…ç€å‘æœåŠ¡ç«¯å‘èµ·è¯·æ±‚ï¼ŒæœåŠ¡ç«¯å°†è¯·æ±‚çš„æ•°æ®æ¨é€ç»™è®¢é˜…è€…ã€‚
&lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 139; 
			flex-basis: 334px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/redis%E8%BF%9B%E9%98%B6/5.png&#34; data-size=&#34;537x385&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/redis%E8%BF%9B%E9%98%B6/5.png&#34;
			width=&#34;537&#34;
			height=&#34;385&#34;
			srcset=&#34;https://zcj-git520.github.io/p/redis%E8%BF%9B%E9%98%B6/5_hu55d28ed2616667077617555b48a30f7c_17120_480x0_resize_box_3.png 480w, https://zcj-git520.github.io/p/redis%E8%BF%9B%E9%98%B6/5_hu55d28ed2616667077617555b48a30f7c_17120_1024x0_resize_box_3.png 1024w&#34;
			loading=&#34;lazy&#34;
			&gt;
	&lt;/a&gt;
	
&lt;/figure&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;redisçš„æŒä¹…åŒ–æœºåˆ¶&#34;&gt;redisçš„æŒä¹…åŒ–æœºåˆ¶&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;redisçš„æŒä¹…åŒ–æœºåˆ¶ä¸»è¦æ˜¯æœ‰ï¼šRDB(å¿«ç…§)å’ŒAOF(æ—¥å¿—)ä¸¤ç§æŒä¹…åŒ–çš„æ–¹å¼ã€‚æŒä¹…çš„åŒ–çš„ä½œç”¨åœ¨äºï¼šæ•…éšœæ¢å¤å’Œæ•°æ®æ¢å¤&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;rdbå¿«ç…§æŒä¹…åŒ–æœºåˆ¶&#34;&gt;RDB(å¿«ç…§)æŒä¹…åŒ–æœºåˆ¶&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;å¿«ç…§æ˜¯redisé»˜è®¤çš„æŒä¹…åŒ–æ–¹æ¡ˆï¼Œåœ¨æŒ‡å®šæ—¶é—´é—´éš”å†…ç”Ÿæˆæ•°æ®é›†çš„æ—¶é—´ç‚¹ï¼Œå³åœ¨æŒ‡å®šçš„æ—¶é—´æ®µå†…å°†å†…å­˜çš„æ•°æ®å†™å…¥ç£ç›˜ï¼Œåœ¨ç£ç›˜
ä¸Šç”Ÿæˆä¸€ä¸ªrdbçš„å¤‡ä»½æ–‡ä»¶ã€‚åœ¨redisé‡å¯æ—¶åŠ è½½rdbæ–‡ä»¶è¿›è¡Œæ•°æ®çš„æ¢å¤ã€‚&lt;/li&gt;
&lt;li&gt;å¿«ç…§çš„æŒä¹…åŒ–æä¾›è‡ªåŠ¨å¤‡ä»½ï¼šéœ€è¦ä¿®æ”¹é…ç½®æ–‡ä»¶redis.confã€‚ä¹Ÿæä¾›saveå’Œbysave(åå°å­è¿›ç¨‹)è¿›è¡Œä¸»åŠ¨å¤‡ä»½&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;rdbå¿«ç…§çš„å·¥ä½œæµç¨‹&#34;&gt;RDB(å¿«ç…§)çš„å·¥ä½œæµç¨‹ï¼š&lt;/h4&gt;
&lt;ol&gt;
&lt;li&gt;ä¸»è¿›ç¨‹ä¼šå•ç‹¬åˆ›å»ºå­è¿›ç¨‹ï¼Œå°†ä¸»è¿›ç¨‹çš„æ•°æ®åº“çš„æ•°æ®å¤åˆ¶åˆ°å­è¿›ç¨‹ã€‚&lt;/li&gt;
&lt;li&gt;å­è¿›ç¨‹å°†æ•°æ®å†™å…¥åˆ°ä¸´æ—¶æ–‡ä»¶ä¸­è¿›è¡ŒæŒä¹…åŒ–ï¼Œåœ¨ç»ä¸´æ—¶æ–‡ä»¶æ›¿æ¢ä¹‹å‰çš„rdbæ–‡ä»¶,å­è¿›ç¨‹é€€å‡ºï¼Œé‡Šæ”¾å†…å­˜ä¸­çš„æ•°æ®&lt;/li&gt;
&lt;li&gt;ä¸»è¿›ç¨‹ä¸è¿›è¡ŒæŒä¹…åŒ–ï¼Œå³ä¸è¿›è¡Œä»»ä½•çš„ioæ“ä½œï¼Œç¡®ä¿redisçš„æé«˜çš„æ€§èƒ½&lt;/li&gt;
&lt;/ol&gt;
&lt;h4 id=&#34;rdbå¿«ç…§çš„ä¼˜ç¼ºç‚¹&#34;&gt;RDB(å¿«ç…§)çš„ä¼˜ç¼ºç‚¹&lt;/h4&gt;
&lt;h5 id=&#34;ä¼˜ç‚¹&#34;&gt;ä¼˜ç‚¹&lt;/h5&gt;
&lt;ol&gt;
&lt;li&gt;å•ä¸€çš„ç´§å‡‘æ–‡ä»¶ä¿å­˜äº†è«ä¸€æ®µæ—¶é—´çš„æ•°æ®é›†ï¼Œæ¯”è¾ƒé€‚åˆåšæ•°æ®çš„å¤‡ä»½å°¤å…¶çš„å†·å¤‡ä»½&lt;/li&gt;
&lt;li&gt;åœ¨å¯¹æ•°æ®å®Œæ•´æ€§ä¸æ•æ„Ÿä¸‹ï¼Œé€‚åˆå¤§è§„æ¨¡çš„æ•°æ®çš„æ¢å¤ï¼Œå› ç›´æ¥ä»ç£ç›˜è·å–æ•°æ®ï¼Œæ¢å¤æ•°æ®å¿«&lt;/li&gt;
&lt;li&gt;ç”±å­è¿›ç¨‹è¿›è¡ŒæŒä¹…åŒ–ï¼Œä¸»è¿›ç¨‹ä¸è¿›è¡ŒæŒä¹…åŒ–ï¼Œå³ä¸è¿›è¡Œä»»ä½•çš„ioæ“ä½œï¼Œç¡®ä¿redisçš„æé«˜çš„æ€§èƒ½&lt;/li&gt;
&lt;/ol&gt;
&lt;h5 id=&#34;ç¼ºç‚¹&#34;&gt;ç¼ºç‚¹&lt;/h5&gt;
&lt;ol&gt;
&lt;li&gt;ä¸èƒ½ä¿éšœæ•°æ®çš„å®Œæ•´æ€§ï¼Œè‹¥rediså‡ºç°å®•æœºï¼Œå°±ä¸ä¼šå‡ºç°æœ€è¿‘çš„æ•°æ®æœªæŒä¹…åŒ–ï¼Œå¯¼è‡´æ•°æ®çš„ä¸¢å¤±ã€‚&lt;/li&gt;
&lt;li&gt;å½“æŒä¹…åŒ–çš„æ•°æ®é‡è¾ƒå¤§æ—¶ï¼Œä¼šå¯¼è‡´æŒä¹…åŒ–çš„å­è¿›ç¨‹å°±ä¼šå¾ˆè€—æ—¶ï¼Œå³ä½¿ä¸»çº¿ç¨‹åœ¨ä¸å‚ä¸æŒä¹…åŒ–ä¹Ÿå¯èƒ½å¯¼è‡´æœåŠ¡å™¨åœ¨æ¯«ç§’çº§å†…ä¸èƒ½å“åº”
å®¢æˆ·ç«¯çš„è¯·æ±‚ï¼Œè‹¥æ•°æ®å·¨å¤§æ—¶ä¸”cpuçš„æ€§èƒ½ä¸ä½³æ—¶ï¼Œä¼šå‡ºç°ç§’çº§ä¸èƒ½å“åº”å®¢æˆ·ç«¯çš„è¯·æ±‚ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;aofæ—¥å¿—æŒä¹…åŒ–&#34;&gt;AOF(æ—¥å¿—)æŒä¹…åŒ–&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;é€šè¿‡å°†æ¯ä¸ªå†™æ“ä½œè®°å½•åˆ°æ—¥å¿—ä¸­ä¸”ä»¥è¿½åŠ æ–‡ä»¶ä¸ä¿®æ”¹æ–‡ä»¶çš„æ¨¡å¼ï¼Œé‡å¯æ—¶æ›´å…·æ ¹æ®æ—¥å¿—æ–‡ä»¶ä»å¤´åˆ°æœªæ‰§è¡Œä¸€éå³æ¢å¤æ•°æ®ã€‚ï¼Œå› AOFé‡‡ç”¨çš„æ˜¯ç»æ“ä½œè®°å½•ä»¥è¿½åŠ æ¨¡å¼ä¸‹å†™å…¥æ—¥å¿—æ–‡ä»¶ä¸­ï¼Œä¼šå¯¼è‡´AOFæ–‡ä»¶è¶Šæ¥è¶Šå¤§ã€‚AOFå¼•å…¥äº†é‡å†™æœºåˆ¶ã€‚&lt;/li&gt;
&lt;li&gt;AOFå¼•å…¥äº†é‡å†™æœºåˆ¶ï¼šå½“æ–‡ä»¶AOFæ˜¯ä¸Šæ¬¡é‡å†™å¤§å°çš„ä¸€å€ä¸”æ–‡ä»¶å¤§äº64MBæ—¶å°±åˆ›å»ºä¸€ä¸ªå­è¿›ç¨‹éå†æœåŠ¡å™¨çš„é”®å€¼å¯¹ï¼Œè½¬æ¢æˆä¸€ç³»åˆ— Redis çš„æ“ä½œ
æŒ‡ä»¤ï¼Œåºåˆ—åŒ–åˆ°ä¸€ä¸ªæ–°çš„AOFæ—¥å¿—æ–‡ä»¶ä¸­ï¼Œå†æ›¿æ¢æ—§çš„AOFæ—¥å¿—æ–‡ä»¶ã€‚å¯ä»¥ä¿®æ”¹é…ç½®æ–‡ä»¶è®¾å®šæŒä¹…åŒ–ç­–ç•¥ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;aof-æä¾›äº†ä¸‰ç§æŒä¹…åŒ–ç­–ç•¥&#34;&gt;AOF æä¾›äº†ä¸‰ç§æŒä¹…åŒ–ç­–ç•¥ï¼š&lt;/h4&gt;
&lt;ol&gt;
&lt;li&gt;no: æ—  fsyncï¼Œç”±ç³»ç»Ÿä¿è¯æ•°æ®åˆ·æ–°åˆ°ç£ç›˜ï¼Œé€Ÿåº¦æœ€å¿«ï¼Œä½†å¾ˆä¸å®‰å…¨ï¼ˆé€šå¸¸ä¸ä½¿ç”¨ï¼‰ï¼›&lt;/li&gt;
&lt;li&gt;always: æ¯æ¬¡ fsyncï¼Œæ¯ä¸€ä¸ªä¿®æ”¹å†…å­˜çš„ Redis æŒ‡ä»¤éƒ½ä¼šæ‰§è¡Œä¸€æ¬¡ fsyncï¼Œé€Ÿåº¦å¾ˆæ…¢ï¼ˆé€šå¸¸ä¸ä½¿ç”¨ï¼‰ï¼›&lt;/li&gt;
&lt;li&gt;everysec: æ¯ç§’è¿›è¡Œä¸€æ¬¡ fsyncï¼Œæœ‰å¯èƒ½ä¸¢å¤±ä¸€ç§’çš„ fsync çš„æ•°æ®ã€‚é€šå¸¸é€‰æ‹© everysec ç­–ç•¥ï¼Œå…¼é¡¾å®‰å…¨æ€§å’Œæ•ˆç‡ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h4 id=&#34;aofæ—¥å¿—çš„ä¼˜ç¼ºç‚¹&#34;&gt;AOF(æ—¥å¿—)çš„ä¼˜ç¼ºç‚¹&lt;/h4&gt;
&lt;h5 id=&#34;ä¼˜ç‚¹-1&#34;&gt;ä¼˜ç‚¹&lt;/h5&gt;
&lt;ul&gt;
&lt;li&gt;å¯ä»¥é‡‡ç”¨everysecçš„æŒä¹…åŒ–ç­–ç•¥ï¼Œèƒ½ç¡®ä¿æ•°æ®çš„å®Œæ•´æ€§&lt;/li&gt;
&lt;/ul&gt;
&lt;h5 id=&#34;ç¼ºç‚¹-1&#34;&gt;ç¼ºç‚¹&lt;/h5&gt;
&lt;ol&gt;
&lt;li&gt;AOFçš„æ—¥å¿—æ–‡ä»¶é€šå¸¸æ˜¯æ¯”rdbæ–‡ä»¶å¤§&lt;/li&gt;
&lt;li&gt;åœ¨æ•°æ®çš„æ¢å¤æ—¶ï¼Œéœ€è¦éå†æ—¥å¿—æ–‡ä»¶ï¼Œå°†æ—¥å¿—æ–‡ä»¶çš„æ•°æ®æ“ä½œå‘½ä»¤åœ¨æ‰§è¡Œä¸€éï¼Œå¯¼è‡´æ•°æ®æ¢å¤ç›¸å¯¹äºå¿«ç…§(rdb)è¾ƒæ…¢ï¼Œå°¤å…¶åœ¨å¤§æ•°æ®ä¸‹ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&#34;redis-ç¼“å­˜ä¸­çš„çŠ¶å†µäºè§£å†³æ–¹æ¡ˆ&#34;&gt;redis ç¼“å­˜ä¸­çš„çŠ¶å†µäºè§£å†³æ–¹æ¡ˆ&lt;/h2&gt;
&lt;h3 id=&#34;ç¼“å­˜é›ªå´©&#34;&gt;ç¼“å­˜é›ªå´©&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;æ•°æ®æœªåŠ è½½åˆ°å†…å­˜æˆ–è€…åŒä¸€æ—¶é—´å‘ç”Ÿå¤§è§„æ¨¡çš„keyå¤±æ•ˆï¼Œä»è€Œå¯¼è‡´æ‰€æœ‰çš„è¯·æ±‚éƒ½ç›´æ¥åœ¨æŸ¥æ•°æ®åº“ã€‚å¯¼è‡´æ•°æ®åº“å’Œcpuè´Ÿè½½è¿‡é«˜ï¼Œç”šè‡³å®•æœº&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;è§£å†³æ–¹æ¡ˆ&#34;&gt;è§£å†³æ–¹æ¡ˆ&lt;/h4&gt;
&lt;ol&gt;
&lt;li&gt;åŠ é”è®¡æ•°ï¼Œé™åˆ¶å¹¶å‘çš„æ•°é‡ï¼Œé¿å…å‡ºç°å¹¶å‘å‡ºç°å¤§é‡çš„è¯·æ±‚è®¿é—®åˆ°æ•°æ®åº“ï¼Œé™ä½æœåŠ¡å™¨çš„ååé‡&lt;/li&gt;
&lt;li&gt;è®¾ç½®çƒ­ç‚¹keyæ°¸ä¸å¤±æ•ˆï¼Œå‡åŒ€è¿‡æœŸï¼Œé¿å…å‡ºç°å¤§é¢ç§¯çš„keyåŒæ—¶å¤±æ•ˆ&lt;/li&gt;
&lt;li&gt;è®¾ç½®ç¼“å­˜æœåŠ¡å™¨çš„ä¸»å¤‡&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;ç¼“å­˜ç©¿é€&#34;&gt;ç¼“å­˜ç©¿é€&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;æŒ‡å®¢æˆ·ç«¯è¯·æ±‚çš„æ•°æ®åœ¨ç¼“å­˜å’Œæ•°æ®åº“ä¸­å‡æ²¡æœ‰ï¼Œå¯¼è‡´å®¢æˆ·ç«¯åœ¨æ¯æ¬¡è¯·æ±‚éƒ½éœ€è¦å»æ•°æ®åº“æŸ¥è¯¢ã€‚è‹¥åœ¨å¹¶å‘æ—¶ï¼Œä¹Ÿä¼šå¯¼è‡´æ•°æ®åº“å’Œcpuçš„è´Ÿè½½è¿‡é«˜ï¼Œ
å¯¼è‡´æ•°æ®åº“çš„å®•æœº&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;è§£å†³æ–¹æ¡ˆ-1&#34;&gt;è§£å†³æ–¹æ¡ˆ&lt;/h4&gt;
&lt;ol&gt;
&lt;li&gt;è‹¥æŸ¥è¯¢æ•°æ®åº“ä¸å­˜åœ¨ï¼Œç›´æ¥åœ¨ç¼“å­˜ä¸­ä¿å­˜ä¸€ä¸ªé»˜è®¤çš„å€¼ï¼Œå¹¶è®¾ç½®è¾ƒçŸ­çš„è¿‡æœŸæ—¶é—´ï¼Œä¸‹æ¬¡è¯·æ±‚ç›´æ¥ä»ç¼“å­˜ä¸­è¿”å›ã€‚&lt;/li&gt;
&lt;li&gt;ä½¿ç”¨å¸ƒéš†è¿‡æ»¤å™¨ï¼Œé˜»æŒ¡æ— æ•ˆçš„è¯·æ±‚ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;ç¼“å­˜å¹¶å‘&#34;&gt;ç¼“å­˜å¹¶å‘&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;åœ¨å¹¶å‘æƒ…å†µä¸‹ï¼Œä¸€ä¸ªç¼“å­˜å¤±æ•ˆï¼Œåœ¨é«˜å¹¶å‘ä¸‹è®¿é—®æ•°æ®åº“ï¼Œç¼“å­˜æ›´æ–°ï¼Œä¹Ÿä¼šå¯¼è‡´æ•°æ®çš„å‹åŠ›å˜å¤§ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;è§£å†³æ–¹æ¡ˆ-2&#34;&gt;è§£å†³æ–¹æ¡ˆ&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;å¯¹ç¼“å­˜åŠ é”ï¼Œè‹¥keyä¸å­˜åœ¨ï¼Œå°±åŠ é”ï¼Œå½“æŸ¥è¯¢æ•°æ®åº“çš„æ•°æ®å†™å…¥ç¼“å­˜åœ¨è§£é”&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;ç¼“å­˜é¢„çƒ­&#34;&gt;ç¼“å­˜é¢„çƒ­&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;åœ¨ç³»ç»Ÿè¿è¡Œå‰ï¼Œå°†æ•°æ®åŠ è½½åˆ°ç¼“å­˜ä¸­&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;è§£å†³æ–¹æ¡ˆ-3&#34;&gt;è§£å†³æ–¹æ¡ˆ&lt;/h4&gt;
&lt;ol&gt;
&lt;li&gt;æ•°æ®é‡ä¸å¤§ï¼Œç›´æ¥åŠ è½½&lt;/li&gt;
&lt;li&gt;æ•°æ®é‡å¤§æ—¶ï¼Œè®¾ç½®å®šæ—¶çš„è„šæœ¬è¿›è¡Œç¼“å­˜çš„åˆ·æ–°&lt;/li&gt;
&lt;li&gt;æ•°æ®é‡å·¨å¤§æ—¶ï¼Œä¼˜å…ˆä¿éšœçƒ­ç‚¹æ•°æ®æå‰åŠ è½½åˆ°ç¼“å­˜ä¸­&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;ç¼“å­˜é™çº§&#34;&gt;ç¼“å­˜é™çº§&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;æŒ‡ç¼“å­˜å¤±æ•ˆæˆ–è€…ç¼“å­˜æœåŠ¡å™¨å®•æœºæ—¶ï¼Œä¸å»è®¿é—®æ•°æ®åº“ï¼Œç›´æ¥è¿”å›é»˜è®¤å€¼æˆ–è®¿é—®å†…å­˜æ•°æ®&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;åˆ†å¸ƒé”&#34;&gt;åˆ†å¸ƒé”&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;ä½¿ç”¨setnxåŠ é”ï¼Œå¹¶è®¾ç½®è¶…æ—¶æ—¶é—´ï¼Œè¿‡äº†è¶…æ—¶æ—¶é—´å°±è§£é”ï¼Œå¹¶åˆ é™¤é”&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;å‚è€ƒæ–‡çŒ®&#34;&gt;å‚è€ƒæ–‡çŒ®&lt;/h2&gt;
&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;https://cloud.tencent.com/developer/article/1193256&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Redis å®¢æˆ·ç«¯æœåŠ¡ç«¯äº¤äº’1 å®¢æˆ·ç«¯/æœåŠ¡ç«¯åè®®&lt;/a&gt;&lt;/p&gt;
</description>
        </item>
        <item>
        <title>åˆè¯†redis(æ•°æ®ç»“æ„åˆ†æ)</title>
        <link>https://zcj-git520.github.io/p/%E5%88%9D%E8%AF%86redis%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E5%88%86%E6%9E%90/</link>
        <pubDate>Sun, 05 Dec 2021 22:00:38 +0800</pubDate>
        
        <guid>https://zcj-git520.github.io/p/%E5%88%9D%E8%AF%86redis%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E5%88%86%E6%9E%90/</guid>
        <description>&lt;img src="https://zcj-git520.github.io/p/%E5%88%9D%E8%AF%86redis%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E5%88%86%E6%9E%90/2.png" alt="Featured image of post åˆè¯†redis(æ•°æ®ç»“æ„åˆ†æ)" /&gt;&lt;h2 id=&#34;redis&#34;&gt;redis&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;redis æ˜¯ä¸€ä¸ªå¼€æºï¼ˆBSDè®¸å¯ï¼‰çš„ï¼Œæ•°æ®ç»“æ„ä¸ºkey-valueçš„å­˜å‚¨ç³»ç»Ÿã€‚å®ƒå¯ä»¥ç”¨ä½œåˆ†å¸ƒå¼æ•°æ®åº“ã€ç¼“å­˜
å’Œæ¶ˆæ¯é˜Ÿåˆ—ï¼ˆæ¶ˆæ¯ä¸­é—´ä»¶ï¼‰ã€‚æ•°æ®ä¿å­˜åœ¨å†…å­˜ä¸­ï¼Œå­˜å–é€Ÿåº¦å¿«ï¼Œå¹¶å‘èƒ½åŠ›å¼ºã€‚&lt;/li&gt;
&lt;li&gt;redis æ”¯æŒå¤šç§æ•°æ®ç»“æ„ï¼Œå¦‚å­—ç¬¦ä¸²ã€map(å“ˆå¸Œ)ã€åˆ—è¡¨ã€é›†åˆã€æœ‰åºé›†åˆç­‰æ•°æ®ç±»å‹ã€‚æ•°æ®éƒ½æ˜¯åŸå­æ“ä½œï¼Œ
æ•°æ®éƒ½ç¼“å­˜åœ¨å†…å­˜ä¸­ï¼Œä¼šå®šæœŸå°†æ•°æ®æ›´æ–°åˆ°ç£ç›˜æˆ–è€…ä¿®æ”¹æ“ä½œå†™å…¥è¿½åŠ è®°å½•ã€‚å†æ¬¡åŸºç¡€ä¸Šå®ç°äº†ä¸»ä»ï¼ˆmaster-slaveï¼‰&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;redis-æ•°æ®ç»“æ„&#34;&gt;redis æ•°æ®ç»“æ„&lt;/h2&gt;
&lt;h3 id=&#34;å­—ç¬¦ä¸²stringç±»å‹&#34;&gt;å­—ç¬¦ä¸²(string)ç±»å‹&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;å­—ç¬¦ä¸²ç±»å‹æ˜¯redisæœ€åŸºç¡€çš„æ•°æ®ç»“æ„ï¼Œå¯ä»¥å­˜å‚¨ç®€å•çš„å­—ç¬¦ä¸²ä¹Ÿå¯å­˜å‚¨å¤æ‚çš„xmlã€jsonã€äºŒè¿›åˆ¶æ•°æ®ï¼ˆå¦‚å›¾åƒã€éŸ³é¢‘ï¼‰&lt;/li&gt;
&lt;li&gt;valueå†…éƒ¨ä»¥ä¿å­˜æ•´æ•°çš„intå’Œä¿å­˜å­—ç¬¦çš„sdsç»„æˆçš„æ•°æ®å­˜å‚¨ç»“æ„ã€‚sdså†…éƒ¨ç»“æ„ä¸ºï¼š&lt;/li&gt;
&lt;/ul&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;struct sdshdr {
    int len;    // è®°å½•ç€bufä¸­ä¹Ÿä½¿ç”¨çš„å­—ç¬¦ä¸²æ•°é‡
    int free;   // è®°å½•ç€bufä¸­æœªä½¿ç”¨çš„å­—ç¬¦ä¸²æ•°é‡
    char buh[]; // å­—ç¬¦ä¸²æ•°ç»„ï¼Œç”¨äºä¿å­˜å­—ç¬¦ä¸²
}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 246; 
			flex-basis: 592px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/%E5%88%9D%E8%AF%86redis%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E5%88%86%E6%9E%90/1.png&#34; data-size=&#34;412x167&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/%E5%88%9D%E8%AF%86redis%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E5%88%86%E6%9E%90/1.png&#34;
			width=&#34;412&#34;
			height=&#34;167&#34;
			srcset=&#34;https://zcj-git520.github.io/p/%E5%88%9D%E8%AF%86redis%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E5%88%86%E6%9E%90/1_hu10d85d220e4dbf0a3b0aa571391694a5_13796_480x0_resize_box_3.png 480w, https://zcj-git520.github.io/p/%E5%88%9D%E8%AF%86redis%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E5%88%86%E6%9E%90/1_hu10d85d220e4dbf0a3b0aa571391694a5_13796_1024x0_resize_box_3.png 1024w&#34;
			loading=&#34;lazy&#34;
			&gt;
	&lt;/a&gt;
	
&lt;/figure&gt;&lt;/p&gt;
&lt;h4 id=&#34;å­—ç¬¦ä¸²ç±»å‹ç‰¹æ€§&#34;&gt;å­—ç¬¦ä¸²ç±»å‹ç‰¹æ€§&lt;/h4&gt;
&lt;ol&gt;
&lt;li&gt;åˆ†é…å†—ä½™ç©ºé—´ï¼šé‡‡ç”¨é¢„å…ˆåˆ†é…å†—ä½™ç©ºé—´çš„æ–¹å¼æ¥å‡å°‘å†…å­˜çš„é¢‘ç¹åˆ†é…&lt;/li&gt;
&lt;li&gt;è‡ªåŠ¨æ‰©å®¹ï¼š å½“å­—ç¬¦ä¸²æ‰€å ç©ºé—´å°äº1MBæ—¶ï¼Œredisä¼šæŒ‰ç…§å­—ç¬¦ä¸²ï¼ˆlen + addLenï¼‰*2å€æ•°å­˜å‚¨ç©ºé—´å¢åŠ ï¼Œ
å½“å­—ç¬¦ä¸²çš„å­˜å‚¨ç©ºé—´è¶…è¿‡æ‰€å ç©ºé—´çš„1MBæ—¶ï¼Œæ¯æ¬¡è‡ªä¼šå¢åŠ 1MBçš„å­˜å‚¨ç©ºé—´æ‰©å®¹ï¼Œæœ€å¤§æ‰©å®¹ä¸º512MBçš„å­˜å‚¨ç©ºé—´&lt;/li&gt;
&lt;li&gt;äºŒè¿›åˆ¶çš„å®‰å…¨æ€§ï¼Œå…¼å®¹cè¯­è¨€å‡½æ•°åº“ä¸­å­—ç¬¦ä¸²ä»¥\0ç»“æŸã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h4 id=&#34;å­—ç¬¦ä¸²å¸¸ç”¨çš„åœºæ™¯&#34;&gt;å­—ç¬¦ä¸²å¸¸ç”¨çš„åœºæ™¯&lt;/h4&gt;
&lt;ol&gt;
&lt;li&gt;ç¼“å­˜åŠŸèƒ½ï¼š åŸºäºredisä½œä¸ºç¼“å­˜å†é…åˆå…¶ä»–çš„æ•°æ®åº“æœ€ä¸ºå­˜å‚¨å±‚ï¼Œåˆ©ç”¨redisçš„æ•°æ®å­˜å‚¨åœ¨å†…å­˜å’Œæ”¯æŒé«˜å¹¶å‘çš„ç‰¹ç‚¹ï¼Œå¯ä»¥å¤§å¤§åŠ å¿«
ç³»ç»Ÿçš„è¯»å†™é€Ÿåº¦ä»¥åŠé™ä½åç«¯æ•°æ®åº“çš„å‹åŠ›ã€‚ï¼ˆå•å€¼ç¼“å­˜ã€å¯¹è±¡ç¼“å­˜ã€åˆ†å¸ƒå¼é”ç­‰ï¼‰&lt;/li&gt;
&lt;li&gt;è®¡æ•°å™¨ï¼š ä½¿ç”¨redisä½œä¸ºç³»ç»Ÿçš„å®æ—¶è®¡æ•°å™¨ï¼Œå¯ä»¥åŠ å¿«è®¡æ•°å’ŒæŸ¥è¯¢åŠŸèƒ½ã€‚&lt;/li&gt;
&lt;li&gt;å…±äº«ç”¨æˆ·çš„sessionï¼šåˆ©ç”¨rediså°†ç”¨æˆ·çš„sessioné›†ä¸­ç®¡ç†ï¼Œè¿™ç§æ¨¡å¼ç¡®ä¿redisçš„é«˜å¯ç”¨ã€‚æ¯æ¬¡ç”¨æˆ·çš„sessionçš„æ›´æ–°å’Œè·å–å¿«é€Ÿå®Œæˆ&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;åˆ—è¡¨list&#34;&gt;åˆ—è¡¨(list)&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;listç±»å‹çš„valueå¯¹è±¡å†…éƒ¨é‡‡ç”¨çš„quicklist(å¿«é€Ÿåˆ—è¡¨)æˆ–è€…ziplist(å‹ç¼©åˆ—è¡¨)æ‰¿è½½ã€‚å½“listçš„å…ƒç´ å’Œå•ä¸ªå…ƒç´ è¾ƒå°æ—¶é‡‡ç”¨ziplistå®ç°æ¥å‡å°‘å†…å­˜çš„
å ç”¨å¦åˆ™é‡‡ç”¨quicklistç»“æ„è¿›è¡Œå­˜å‚¨ã€‚&lt;/li&gt;
&lt;li&gt;ziplistæ‰€æœ‰å†…å®¹éƒ½å­˜æ”¾åœ¨æ¥è¿ç»­çš„å†…å­˜ä¸­ã€‚zipbytesè¡¨ç¤ºziplistçš„æ€»é•¿åº¦ï¼Œ zltailè¡¨ç¤ºæŒ‡å‘æœ€æœ«çš„å…ƒç´ ï¼Œzllenè¡¨ç¤ºå…ƒç´ ä¸ªæ•°ï¼Œ entryXè¡¨ç¤ºå…ƒç´ è‡ªèº«å†…å®¹ï¼Œ zlendæ˜¯ziplistçš„å®šç•Œç¬¦
ziplistçš„å†…éƒ¨ç»“æ„ä¸ºï¼š&lt;/li&gt;
&lt;/ul&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;typedef struct ziplist{
     /*zipliståˆ†é…çš„å†…å­˜å¤§å°*/
     uint32_t bytes;
     /*è¾¾åˆ°å°¾éƒ¨çš„åç§»é‡*/
     uint32_t tail_offset;
     /*å­˜å‚¨å…ƒç´ å®ä½“ä¸ªæ•°*/
     uint16_t length;
     /*å­˜å‚¨å†…å®¹å®ä½“å…ƒç´ */
     unsigned char* content[];
     /*å°¾éƒ¨æ ‡è¯†*/
     unsigned char end;
}ziplist;

/*å…ƒç´ å®ä½“æ‰€æœ‰ä¿¡æ¯, ä»…ä»…æ˜¯æè¿°ä½¿ç”¨, å†…å­˜ä¸­å¹¶éå¦‚æ­¤å­˜å‚¨*/
typedef struct zlentry {
     /*å‰ä¸€ä¸ªå…ƒç´ é•¿åº¦éœ€è¦ç©ºé—´å’Œå‰ä¸€ä¸ªå…ƒç´ é•¿åº¦*/
    unsigned int prevrawlensize, prevrawlen;
     /*å…ƒç´ é•¿åº¦éœ€è¦ç©ºé—´å’Œå…ƒç´ é•¿åº¦*/
    unsigned int lensize, len;
     /*å¤´éƒ¨é•¿åº¦å³prevrawlensize + lensize*/
    unsigned int headersize;
     /*å…ƒç´ å†…å®¹ç¼–ç */
    unsigned char encoding;
     /*å…ƒç´ å®é™…å†…å®¹*/
    unsigned char *p;
}zlentry;

&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 871; 
			flex-basis: 2092px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/%E5%88%9D%E8%AF%86redis%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E5%88%86%E6%9E%90/3.png&#34; data-size=&#34;898x103&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/%E5%88%9D%E8%AF%86redis%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E5%88%86%E6%9E%90/3.png&#34;
			width=&#34;898&#34;
			height=&#34;103&#34;
			srcset=&#34;https://zcj-git520.github.io/p/%E5%88%9D%E8%AF%86redis%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E5%88%86%E6%9E%90/3_hub4a60118f08cb1a1c39a8da3f9909d0d_17774_480x0_resize_box_3.png 480w, https://zcj-git520.github.io/p/%E5%88%9D%E8%AF%86redis%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E5%88%86%E6%9E%90/3_hub4a60118f08cb1a1c39a8da3f9909d0d_17774_1024x0_resize_box_3.png 1024w&#34;
			loading=&#34;lazy&#34;
			&gt;
	&lt;/a&gt;
	
&lt;/figure&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;quicklistæ˜¯åº•å±‚æ˜¯ziplistçš„åŒå‘é“¾è¡¨,ç»“æ„ä¸ºï¼š&lt;/li&gt;
&lt;/ul&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;struct quicklistNode {
    quicklistNode *prev;
    quicklistNode *next;
    ziplist *zl;         // æŒ‡å‘å‹ç¼©åˆ—è¡¨
    int32 size;          // ziplistå­—èŠ‚æ€»æ•°
    int16 count;         // ziplistä¸­å…ƒç´ æ•°é‡
    int2 encoding;       // å­˜å‚¨å½¢å¼ï¼Œè¡¨ç¤ºåŸç”Ÿå­—èŠ‚æ•°ç»„è¿˜æ˜¯LZFå‹ç¼©å­˜å‚¨
    ...
} quicklistNodeï¼›

// å¿«é€Ÿåˆ—è¡¨
struct quicklist {
    quicklistNode *head;
    quicklistNode *next;
    long count;           // å…ƒç´ æ€»æ•°
    int nodes;            // ziplistèŠ‚ç‚¹ä¸ªæ•°
    int compressDepth;    // LZFç®—æ³•å‹ç¼©æ·±åº¦
}
quicklist;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 319; 
			flex-basis: 765px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/%E5%88%9D%E8%AF%86redis%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E5%88%86%E6%9E%90/4.png&#34; data-size=&#34;737x231&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/%E5%88%9D%E8%AF%86redis%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E5%88%86%E6%9E%90/4.png&#34;
			width=&#34;737&#34;
			height=&#34;231&#34;
			srcset=&#34;https://zcj-git520.github.io/p/%E5%88%9D%E8%AF%86redis%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E5%88%86%E6%9E%90/4_hua6e8ac52687c658457e0eb02eca5ab50_34064_480x0_resize_box_3.png 480w, https://zcj-git520.github.io/p/%E5%88%9D%E8%AF%86redis%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E5%88%86%E6%9E%90/4_hua6e8ac52687c658457e0eb02eca5ab50_34064_1024x0_resize_box_3.png 1024w&#34;
			loading=&#34;lazy&#34;
			&gt;
	&lt;/a&gt;
	
&lt;/figure&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;redisçš„listæ”¯æŒå­˜å‚¨2çš„32æ¬¡æ–¹ä¸ªå…ƒç´ ï¼Œå¯ä»¥é€šè¿‡ä¸‹æ ‡è·å–æŒ‡å®šå…ƒç´ å’Œè«ä¸ªèŒƒå›´çš„å…ƒç´ é›†&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;åˆ—è¡¨å¸¸ç”¨åœºæ™¯&#34;&gt;åˆ—è¡¨å¸¸ç”¨åœºæ™¯&lt;/h4&gt;
&lt;ol&gt;
&lt;li&gt;æ¶ˆæ¯é˜Ÿåˆ—ï¼šredisçš„é“¾è¡¨å¼ç»“æ„ï¼Œå¯ä»¥è½»æ¾å®ç°é˜»å¡é˜Ÿåˆ—ï¼Œå¯ä»¥ä½¿ç”¨å·¦è¿›å³å‡ºçš„å‘½ä»¤å®Œæˆé˜Ÿåˆ—çš„è®¾è®¡&lt;/li&gt;
&lt;li&gt;æ–‡ç« åˆ—è¡¨æˆ–è€…æ•°æ®åˆ†é¡µå±•ç¤ºçš„åº”ç”¨&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;mapç±»å‹hash-æ•£åˆ—&#34;&gt;mapç±»å‹(hash æ•£åˆ—)&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;mapä¸»è¦ç”±hashtableå’Œziplistä¸¤ç§æ‰¿è½½æ–¹å¼æ‰¿è½½ã€‚å½“å­˜å‚¨æ•°æ®è¾ƒå°æ—¶ï¼Œé‡‡ç”¨ziplistå®ç°&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;hashtableç»„æˆ&#34;&gt;hashtableç»„æˆ&lt;/h4&gt;
&lt;ol&gt;
&lt;li&gt;dict: å½“dicthtéœ€è¦æ‰©å®¹/ç¼©å®¹æ—¶ï¼Œç”¨äºç®¡ç†æ¡¶çš„è¿ç§»ï¼Œç»“æ„å›¾ä¸‹&lt;/li&gt;
&lt;/ol&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;typedef struct dict{
  // ç±»å‹ç‰¹å®šå‡½æ•°
  dictType *type;
  // ç§æœ‰æ•°æ®
  void *private;
  // å“ˆå¸Œè¡¨
  dictht ht[2];
  // rehash ç´¢å¼•ï¼Œå½“å½“å‰çš„å­—å…¸ä¸åœ¨ rehash æ—¶ï¼Œå€¼ä¸º-1
  int trehashidx;
}
&lt;/code&gt;&lt;/pre&gt;&lt;ol start=&#34;2&#34;&gt;
&lt;li&gt;dictht: ç»´æŠ¤å“ˆå¸Œè¡¨çš„è¯´æœ‰æ¡¶è¿,ç»“æ„å¦‚ä¸‹ï¼š&lt;/li&gt;
&lt;/ol&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;typedef struct dictht{
     //å“ˆå¸Œè¡¨æ•°ç»„
     dictEntry **table;
     //å“ˆå¸Œè¡¨å¤§å°
     unsigned long size;
     //å“ˆå¸Œè¡¨å¤§å°æ©ç ï¼Œç”¨äºè®¡ç®—ç´¢å¼•å€¼
     //æ€»æ˜¯ç­‰äº size-1
     unsigned long sizemask;
     //è¯¥å“ˆå¸Œè¡¨å·²æœ‰èŠ‚ç‚¹çš„æ•°é‡
     unsigned long used;
 
}dictht
&lt;/code&gt;&lt;/pre&gt;&lt;ol start=&#34;3&#34;&gt;
&lt;li&gt;dictEntry:ç®¡ç†ä¸€ä¸ªk-vå¯¹ï¼ŒåŒæ—¶ä¿ç•™ç€ä¸€ä¸ªæ¡¶ä¸­ç›¸é‚»å…ƒç´ çš„æŒ‡é’ˆï¼Œä¸€æ¬¡ç»´æŠ¤å“ˆå¸Œæ¡¶å†…éƒ¨ç›¸è¿ï¼Œç»“æ„å¦‚ä¸‹&lt;/li&gt;
&lt;/ol&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;typedef struct dictEntry{
     void *key;
     union{
          void *val;
          uint64_tu64;
          int64_ts64;
     }v;
     //ä¸‹ä¸€ä¸ª
     struct dictEntry *next;
}dictEntry
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 160; 
			flex-basis: 384px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/%E5%88%9D%E8%AF%86redis%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E5%88%86%E6%9E%90/2.png&#34; data-size=&#34;989x618&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/%E5%88%9D%E8%AF%86redis%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E5%88%86%E6%9E%90/2.png&#34;
			width=&#34;989&#34;
			height=&#34;618&#34;
			srcset=&#34;https://zcj-git520.github.io/p/%E5%88%9D%E8%AF%86redis%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E5%88%86%E6%9E%90/2_hu2e0e0d83f63ca97b7bb5a7ad9fe95b5f_87192_480x0_resize_box_3.png 480w, https://zcj-git520.github.io/p/%E5%88%9D%E8%AF%86redis%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E5%88%86%E6%9E%90/2_hu2e0e0d83f63ca97b7bb5a7ad9fe95b5f_87192_1024x0_resize_box_3.png 1024w&#34;
			loading=&#34;lazy&#34;
			&gt;
	&lt;/a&gt;
	
&lt;/figure&gt;&lt;/p&gt;
&lt;h4 id=&#34;ziplist&#34;&gt;ziplist&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;mapä¸­å¯¹åº”çš„ziplistçš„entryçš„ä¸ªæ•°ä¸€å®šæ˜¯2çš„æ•´æ•°å€ã€‚å³å¥‡æ•°å­˜æ”¾ç€key,å¶æ•°å­˜æ”¾ç€value&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;mapç±»å‹çš„ç‰¹æ€§&#34;&gt;mapç±»å‹çš„ç‰¹æ€§&lt;/h4&gt;
&lt;ol&gt;
&lt;li&gt;mapå†…éƒ¨çš„keyå’Œvalueä¸èƒ½åœ¨åµŒå¥—map,åªèƒ½æ˜¯stringï¼Œintæˆ–ç€æ˜¯float&lt;/li&gt;
&lt;li&gt;è´Ÿè½½å› å­ = å“ˆå¸Œè¡¨ä¸­å·²æœ‰çš„å…ƒç´ /å“ˆå¸Œæ¡¶æ•°&lt;/li&gt;
&lt;li&gt;æ‰©å®¹ï¼šé€šè¿‡è´Ÿè½½å› å­åˆ¤æ–­æ˜¯å¦éœ€è¦å¢åŠ æ¡¶æ•°ã€‚å³å½“è´Ÿè½½å› å­å°äº1æ—¶ï¼Œä¸€å®šä¸æ‰©å®¹ï¼Œ
å½“è´Ÿè½½å› å­å¤§äº1ï¼Œä¸”åœ¨æ²¡æœ‰åœ¨æ‰§è¡ŒBGSAVEè¿›è¡Œæˆ–å½“è´Ÿè½½å› å­å¤§äº5æ—¶ï¼Œä¸€é¡¶ä¼šè¿›è¡Œæ‰©å®¹ï¼Œ
æ‰©å®¹æ—¶ï¼Œæ–°æ¡¶çš„æ•°ç›®æ˜¯ç°æœ‰æ¡¶æ•°ç›®çš„ä¸¤å€ã€‚&lt;/li&gt;
&lt;li&gt;ç¼©å®¹ï¼šå½“è´Ÿè½½å› å­å°äº0.1æ—¶ï¼Œå°±è¿›è¡Œç¼©å®¹ã€‚&lt;/li&gt;
&lt;li&gt;æ‰©/ç¼©å®¹éƒ½æ˜¯é€šè¿‡æ–°å»ºå“ˆå¸Œè¡¨çš„æ–¹å¼å®ç°ï¼Œæ‰©å®¹æ—¶æ–°å»ºç°æœ‰æ¡¶çš„2å€çš„æ–°è¡¨ï¼Œç¼©å®¹æ—¶æ˜¯æ–°å»ºåŸè¡¨çš„ä¸€åŠæ–°å»ºå“ˆå¸Œè¡¨ã€‚
å°†åŸè¡¨çš„æ¡¶é€æ­¥è¿ç§»åˆ°ç›®æ ‡è¡¨(æ–°å»ºçš„å“ˆå¸Œè¡¨)&lt;/li&gt;
&lt;/ol&gt;
&lt;h4 id=&#34;mapå¸¸ç”¨åœºæ™¯&#34;&gt;mapå¸¸ç”¨åœºæ™¯&lt;/h4&gt;
&lt;ol&gt;
&lt;li&gt;åˆ©ç”¨é”®å€¼å¯¹çš„ç‰¹æ€§ï¼Œç”¨æ¥å­˜å‚¨å…³ç³»æ€§æ•°æ®åº“ä¸­è¡¨çš„è®°å½•&lt;/li&gt;
&lt;li&gt;å­˜å‚¨ç”¨æˆ·ä¿¡æ¯ï¼Œä¼˜åŒ–ç”¨æˆ·ä¿¡æ¯çš„æ¥æºï¼Œæé«˜ç³»ç»Ÿçš„æ€§èƒ½&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;é›†åˆsetç±»å‹&#34;&gt;é›†åˆ(set)ç±»å‹&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;setæ˜¯ç”±insetæˆ–è€…hashtableæ¥å­˜å‚¨ï¼Œhashtableçš„valueæ°¸è¿œä¸ºnil,åªæœ‰intç±»å‹æ˜¯ä½¿ç”¨insetè¿›è¡Œå­˜å‚¨&lt;/li&gt;
&lt;li&gt;inset:å…¶æ ¸å¿ƒæ˜¯ä¸€ä¸ªå­—ç¬¦æ•°ç»„&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;setç±»å‹çš„ç‰¹æ€§&#34;&gt;setç±»å‹çš„ç‰¹æ€§&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;å…è®¸é‡å¤å…ƒç´ ï¼Œæ²¡æœ‰é¡ºåºï¼Œæ²¡æœ‰ä¸‹è¡¨ï¼Œæ”¯æŒé›†åˆå†…çš„å¢åˆ æ”¹æŸ¥ï¼Œå¹¶æ”¯æŒå¤šä¸ªé›†åˆçš„äº¤ã€å¹¶ã€å·®é›†ç­‰æ“ä½œ&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;setå¸¸ç”¨åœºæ™¯&#34;&gt;setå¸¸ç”¨åœºæ™¯&lt;/h4&gt;
&lt;ol&gt;
&lt;li&gt;æ ¹æ®setçš„ç‰¹æ€§ï¼Œé€‚åˆäºèšåˆåˆ†ç±»ï¼Œå¦‚æ ‡ç­¾ã€å¥½å‹å…±åŒå–œå¥½ç­‰åœºæ™¯&lt;/li&gt;
&lt;li&gt;åˆ©ç”¨setä¸­å…ƒç´ çš„å”¯ä¸€æ€§ï¼Œé€‚åˆäºæ•°æ®çš„å”¯ä¸€æ€§ï¼Œå¦‚ç»Ÿè®¡ç½‘ç«™çš„ç‹¬ç«‹ip&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;æœ‰åºé›†åˆsorted-set&#34;&gt;æœ‰åºé›†åˆ(sorted-set)&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;sorter-setæ˜¯çš„å†…éƒ¨ç»“æ„æ˜¯ä»¥å‹ç¼©åˆ—è¡¨(ziplist)æˆ–è€…è·³è·ƒè¡¨(skiplist)+hashtableæ„æˆ&lt;/li&gt;
&lt;li&gt;sorted-setç±»ä¼¼äºmapçš„é”®å€¼å¯¹(key-value)ä¸”æœ‰åºï¼Œvalueæ˜¯ä¸€ä¸ªæµ®ç‚¹æ•°ç§°ä¹‹ä¸ºscoreï¼Œæ˜¯æ’åºçš„æ ¹æ®&lt;/li&gt;
&lt;li&gt;è·³è·ƒè¡¨(skiplist)å…¶æ ¸å¿ƒç‚¹ä¸»è¦æ˜¯åŒ…æ‹¬ä¸€ä¸ªdictå¯¹è±¡å’Œä¸€ä¸ªskiplistå¯¹è±¡,ç»“æ„å¦‚ä¸‹ï¼š&lt;/li&gt;
&lt;/ul&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;typedef struct zset{
     //è·³è·ƒè¡¨
     zskiplist *zsl;
     //å­—å…¸
     dict *dice;
} zset

/* ZSETs use a specialized version of Skiplists */
/*
 * è·³è·ƒè¡¨èŠ‚ç‚¹
 */
typedef struct zskiplistNode {

    // æˆå‘˜å¯¹è±¡
    robj *obj;

    // åˆ†å€¼
    double score;

    // åé€€æŒ‡é’ˆ
    struct zskiplistNode *backward;

    // å±‚
    struct zskiplistLevel {

        // å‰è¿›æŒ‡é’ˆ
        struct zskiplistNode *forward;

        // è·¨åº¦
        unsigned int span;

    } level[];

} zskiplistNode;

/*
 * è·³è·ƒè¡¨
 */
typedef struct zskiplist {

    // è¡¨å¤´èŠ‚ç‚¹å’Œè¡¨å°¾èŠ‚ç‚¹
    struct zskiplistNode *header, *tail;

    // è¡¨ä¸­èŠ‚ç‚¹çš„æ•°é‡
    unsigned long length;

    // è¡¨ä¸­å±‚æ•°æœ€å¤§çš„èŠ‚ç‚¹çš„å±‚æ•°
    int level;

} zskiplist;


&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 354; 
			flex-basis: 851px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/%E5%88%9D%E8%AF%86redis%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E5%88%86%E6%9E%90/5.png&#34; data-size=&#34;954x269&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/%E5%88%9D%E8%AF%86redis%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E5%88%86%E6%9E%90/5.png&#34;
			width=&#34;954&#34;
			height=&#34;269&#34;
			srcset=&#34;https://zcj-git520.github.io/p/%E5%88%9D%E8%AF%86redis%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E5%88%86%E6%9E%90/5_hu22c80974dd2a8a5013611fd6e9753500_113480_480x0_resize_box_3.png 480w, https://zcj-git520.github.io/p/%E5%88%9D%E8%AF%86redis%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E5%88%86%E6%9E%90/5_hu22c80974dd2a8a5013611fd6e9753500_113480_1024x0_resize_box_3.png 1024w&#34;
			loading=&#34;lazy&#34;
			&gt;
	&lt;/a&gt;
	
&lt;/figure&gt;&lt;/p&gt;
&lt;h4 id=&#34;æœ‰åºé›†åˆsorted-setç‰¹æ€§&#34;&gt;æœ‰åºé›†åˆ(sorted-set)ç‰¹æ€§&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;sorted-setæ˜¯é›†åˆçš„åŸºç¡€ä¸Šï¼Œå¢åŠ äº†ç»™æ¯ä¸€ä¸ªå…ƒç´ è®¾ç½®åˆ†æ•°(score),åˆ©ç”¨è¯¥åˆ†æ•°è¿›è¡Œæ’åºï¼Œé›†åˆå…ƒç´ æ˜¯å”¯ä¸€çš„ï¼Œåˆ†æ•°æ˜¯ä¸å”¯ä¸€çš„ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;æœ‰åºé›†åˆsorted-setå¸¸ç”¨åˆ›æ™¯&#34;&gt;æœ‰åºé›†åˆ(sorted-set)å¸¸ç”¨åˆ›æ™¯&lt;/h4&gt;
&lt;ol&gt;
&lt;li&gt;åˆ©ç”¨å®ƒçš„ç‰¹æ€§ï¼Œå¯ä»¥é€‚åˆäºæ’åºçš„åœºæ™¯ï¼Œå¦‚æ’è¡Œæ¦œç­‰&lt;/li&gt;
&lt;li&gt;æ ¹æ®é›†åˆçš„æ¯ä¸ªå…ƒç´ éƒ½è®¾ç½®äº†ä¸€ä¸ªscoreåˆ†æ•°çš„ç‰¹æ€§ï¼Œåšå¸¦æƒçš„é˜Ÿåˆ—ï¼Œå¦‚ï¼šæ™®é€šçš„ä¿¡æ¯çš„æƒé‡ä¸º1ï¼Œé‡è¦çš„ä¿¡æ¯çš„æƒé‡ä¸º2ï¼Œ
åº”ç”¨çº¿ç¨‹å¯ä»¥æ ¹æ®æƒé‡è°ƒç”¨ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&#34;å‚è€ƒæ–‡çŒ®&#34;&gt;å‚è€ƒæ–‡çŒ®ï¼š&lt;/h2&gt;
&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;https://cloud.tencent.com/developer/article/1690533&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Redisåº•å±‚æ•°æ®ç»“æ„è¯¦è§£&lt;/a&gt;&lt;/p&gt;
</description>
        </item>
        <item>
        <title>åˆæ¢jwt(json web Token)</title>
        <link>https://zcj-git520.github.io/p/%E5%88%9D%E6%8E%A2jwtjson-web-token/</link>
        <pubDate>Tue, 30 Nov 2021 22:00:38 +0800</pubDate>
        
        <guid>https://zcj-git520.github.io/p/%E5%88%9D%E6%8E%A2jwtjson-web-token/</guid>
        <description>&lt;img src="https://zcj-git520.github.io/p/%E5%88%9D%E6%8E%A2jwtjson-web-token/1.png" alt="Featured image of post åˆæ¢jwt(json web Token)" /&gt;&lt;h2 id=&#34;jwt&#34;&gt;jwt&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;jwt å®ƒå®šä¹‰äº†ä¸€ç§ç´§å‡‘çš„ã€è‡ªåŒ…å«çš„æ–¹å¼ï¼Œç”¨äºä½œä¸ºJSONå¯¹è±¡åœ¨å„æ–¹ä¹‹é—´å®‰å…¨åœ°ä¼ è¾“ä¿¡æ¯ï¼Œæ˜¯æœ€æµè¡Œçš„è·¨åŸŸè®¤è¯çš„è§£å†³æ–¹æ¡ˆ&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;ä¼ ç»Ÿè·¨åŸŸè®¤è¯&#34;&gt;ä¼ ç»Ÿè·¨åŸŸè®¤è¯&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;å®¢æœç«¯å‘æœåŠ¡å™¨å‘é€ç”¨ç”¨æˆ·åå’Œå¯†ç ï¼ŒæœåŠ¡å™¨éªŒè¯é€šè¿‡åï¼ŒæŠŠå½“å‰å¯¹è¯çš„sessioné‡Œä¿å­˜
ç›¸å…³æ•°æ®ï¼Œå¹¶å†™åœ¨å®¢æˆ·ç«¯çš„cookie, å‘å®¢æˆ·ç«¯è¿”å›ä¸€ä¸ªsession idã€‚å®¢æˆ·ç«¯å†æ¬¡é€šè¿‡cookie,
ç»session id ä¼ å›æœåŠ¡å™¨ï¼ŒæœåŠ¡å™¨é€šè¿‡session idå¾—çŸ¥è®¿é—®å®¢æˆ·ç«¯çš„èº«ä»½ã€‚&lt;/li&gt;
&lt;li&gt;å­˜åœ¨çš„é—®é¢˜ï¼šæ‰©å±•æ€§ä¸ä½³ï¼ŒæœåŠ¡å™¨é›†ç¾¤æˆ–è€…è·¨åŸŸçš„æœåŠ¡å¯¼å‘æ¶æ„ï¼Œå°±éœ€è¦å…±äº«sessionå…±äº«æ•°æ®
è§£å†³æ–¹æ¡ˆï¼š1. å°†session æ•°æ®ä¿å­˜åœ¨æ•°æ®åº“ä¸­æˆ–è€…å…¶ä»–çš„æŒä¹…å±‚ï¼ŒæœåŠ¡å™¨è®¿é—®æŒä¹…å±‚çš„sessionæ•°æ®    2. æœåŠ¡å™¨ä¸ä¿å­˜sessionæ•°æ®ï¼Œæ‰€æœ‰çš„æ•°æ®ä¿å­˜åœ¨å®¢æˆ·ç«¯ï¼Œæ¯æ¬¡è¯·æ±‚éƒ½å‘å›æœåŠ¡å™¨&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;jwtçš„åŸç†&#34;&gt;jwtçš„åŸç†&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;æœåŠ¡å™¨è®¤è¯ä»¥åï¼Œç”Ÿæˆä¸€ä¸ªjsonå¯¹è±¡ï¼Œè¿”å›ç»™å®¢æˆ·ç«¯ä¹‹åï¼Œå®¢æˆ·ç«¯ä¸æœåŠ¡å™¨é è¿™ä¸ªjsonå¯¹è±¡è®¤è¯ï¼Œä¼šä¼š
åŠ ä¸Šç­¾åæ¥é˜²æ­¢å®¢æˆ·ç«¯ä¿®è¯¥json å¯¹è±¡&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;jwtçš„æ•°æ®ç»“æ„&#34;&gt;jwtçš„æ•°æ®ç»“æ„&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;jwtçš„æ•°æ®ç»“æ„ä¸ºï¼šHeader(å¤´éƒ¨)ã€payload(è´Ÿè½½)ã€signature(ç­¾å)&lt;br&gt;
&lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 190; 
			flex-basis: 457px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/%E5%88%9D%E6%8E%A2jwtjson-web-token/1.png&#34; data-size=&#34;1185x621&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/%E5%88%9D%E6%8E%A2jwtjson-web-token/1.png&#34;
			width=&#34;1185&#34;
			height=&#34;621&#34;
			srcset=&#34;https://zcj-git520.github.io/p/%E5%88%9D%E6%8E%A2jwtjson-web-token/1_hu679d1d76db059750024901bffb37cf39_65265_480x0_resize_box_3.png 480w, https://zcj-git520.github.io/p/%E5%88%9D%E6%8E%A2jwtjson-web-token/1_hu679d1d76db059750024901bffb37cf39_65265_1024x0_resize_box_3.png 1024w&#34;
			loading=&#34;lazy&#34;
			&gt;
	&lt;/a&gt;
	
&lt;/figure&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;headerå¤´éƒ¨&#34;&gt;Header(å¤´éƒ¨)&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Headeréƒ¨åˆ†æ˜¯ä¸€ä¸ªjsonå¯¹è±¡ï¼Œæè¿°jwtçš„å…ƒç´ æ®ã€‚å£°æ˜ç±»å‹ï¼Œè¿™é‡Œæ˜¯jwtå£°æ˜åŠ å¯†çš„ç®—æ³• é€šå¸¸ç›´æ¥ä½¿ç”¨ HMAC SHA256ï¼Œç»“æ„å¦‚ä¸‹ï¼š&lt;/li&gt;
&lt;/ul&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;{
  &#39;typ&#39;: &#39;JWT&#39;,
  &#39;alg&#39;: &#39;HS256&#39;
} 
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&#34;payloadè´Ÿè½½&#34;&gt;payload(è´Ÿè½½)&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;payload ä¹Ÿæ˜¯ä¸€ä¸ªjsonå¯¹è±¡ï¼Œç”¨æ¥å­˜æ”¾å®é™…éœ€è¦çš„ä¼ é€’çš„æ•°æ®ï¼Œissï¼šå‘è¡Œäººï¼Œexpï¼šåˆ°æœŸæ—¶é—´ï¼Œsubï¼šä¸»é¢˜ï¼Œaudï¼šç”¨æˆ·ï¼Œ
nbfï¼šåœ¨æ­¤ä¹‹å‰ä¸å¯ç”¨ï¼Œiatï¼šå‘å¸ƒæ—¶é—´ï¼Œjtiï¼šJWT IDç”¨äºæ ‡è¯†è¯¥JWT&lt;/li&gt;
&lt;/ul&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;{
  &amp;quot;sub&amp;quot;: &amp;quot;1234567890&amp;quot;,
  &amp;quot;name&amp;quot;: &amp;quot;John Doe&amp;quot;,
  &amp;quot;admin&amp;quot;: true
}
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&#34;signatureç­¾å&#34;&gt;signature(ç­¾å)&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;æ˜¯å¯¹å‰ä¸¤éƒ¨åˆ†è¿›è¡Œç­¾åï¼Œé˜²æ­¢ç¯¡æ”¹ã€‚åœ¨æœåŠ¡å™¨ä¸ŠæŒ‡æ˜ä¸€ä¸ªå¯†é’¥ï¼Œåœ¨æ ¹æ®headerä¸­æŒ‡å®šçš„ç®—æ³•ï¼Œ
æŒ‰ç…§æ ¼å¼äº§ç”Ÿç­¾åï¼Œheader (base64åçš„)ã€payload (base64åçš„)ã€secretã€‚å…¶æ ¼å¼å¦‚ä¸‹ï¼š&lt;/li&gt;
&lt;/ul&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;// javascript
var encodedString = base64UrlEncode(header) + &#39;.&#39; + base64UrlEncode(payload);

var signature = HMACSHA256(encodedString, &#39;secret&#39;); // TJVA95OrM7E2cBab30RMHrHDcEfxjoYZgeFONFh7HgQ
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&#34;jwtçš„ç‰¹ç‚¹&#34;&gt;jwtçš„ç‰¹ç‚¹&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;jwté»˜è®¤ä¸åŠ å¯†ï¼Œä½†æ˜¯å¯ä»¥å¯¹åŸç”Ÿçš„TokenåŠ å¯†æˆ–è€…ä½¿ç”¨httpsåŠ å¯†ä¼ è¾“&lt;/li&gt;
&lt;li&gt;jwtåœ¨ä¸åŠ å¯†çš„æƒ…å†µä¸‹ï¼Œä¸èƒ½åŠ ç§˜å¯†æ•°æ®å†™å…¥jwt&lt;/li&gt;
&lt;li&gt;jwtä¸ä»…å¯ä»¥ä½¿ç”¨ä¸è®¤è¯ï¼Œä¹Ÿèƒ½ç”¨äºä¿¡æ¯çš„äº¤æ¢&lt;/li&gt;
&lt;li&gt;jwtä¸èƒ½åœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­æ¸…é™¤è«ä¸€ä¸ªtokenå’Œæ›´æ”¹è¯¥tokençš„æƒé™ï¼Œä¸€æ—¦ç­¾å‘ä¸€ç›´åˆ°åˆ°æœŸéƒ½æ˜¯æœ‰æ•ˆçš„ï¼Œåº”è¯¥jwt
çš„æœ‰æ•ˆæœŸ&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;è®¤è¯&#34;&gt;è®¤è¯&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;è®¤è¯å°±æ˜¯æ ¹æ®å£°æ˜è€…æ‰€æŒæœ‰çš„è¯†åˆ«ä¿¡æ¯ï¼Œç¡®è®¤å£°æ˜è€…çš„èº«ä»½&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;æˆæƒ&#34;&gt;æˆæƒ&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;ä¸€èˆ¬æ˜¯æŒ‡è·å–ç”¨æˆ·çš„å§”æ´¾çš„æƒé™&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;é‰´æƒ&#34;&gt;é‰´æƒ&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;æŒ‡å¯¹ä¸€ä¸ªå£°æ˜è€…æ‰€å£°æ˜çš„èº«ä»½çš„æƒé™çš„çœŸå®æ€§è¿›è¡Œé‰´åˆ«å’Œç¡®è®¤çš„è¿‡ç¨‹&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;æƒé™æ§åˆ¶&#34;&gt;æƒé™æ§åˆ¶&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;æ˜¯æŒ‡å¯æ‰§è¡Œå’Œæ“ä½œçš„ç»„åˆé…ç½®çš„æƒé™åˆ—è¡¨ï¼Œç„¶åæ ¹æ®æ‰§è¡Œè€…çš„æƒé™ï¼Œè‹¥å…¶æ“ä½œåœ¨æƒé™èŒƒå›´å†…ï¼Œåˆ™å…è®¸æ‰§è¡Œï¼Œå¦åˆ™ç¦æ­¢&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;å‚è€ƒæ–‡çŒ®&#34;&gt;å‚è€ƒæ–‡çŒ®ï¼š&lt;/h2&gt;
&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;https://www.jianshu.com/p/576dbf44b2ae&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;ä»€ä¹ˆæ˜¯ JWT &amp;ndash; JSON WEB TOKEN&lt;/a&gt;&lt;/p&gt;
</description>
        </item>
        <item>
        <title>åˆè¯†Nginx</title>
        <link>https://zcj-git520.github.io/p/%E5%88%9D%E8%AF%86nginx/</link>
        <pubDate>Wed, 24 Nov 2021 22:00:38 +0800</pubDate>
        
        <guid>https://zcj-git520.github.io/p/%E5%88%9D%E8%AF%86nginx/</guid>
        <description>&lt;img src="https://zcj-git520.github.io/p/%E5%88%9D%E8%AF%86nginx/1.jpg" alt="Featured image of post åˆè¯†Nginx" /&gt;&lt;h2 id=&#34;nginx&#34;&gt;Nginx&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;nginx æ˜¯è½»é‡çº§é«˜å¹¶å‘webæœåŠ¡å™¨ï¼Œæ˜¯åŸºäºRestæ¶æ„é£æ ¼ã€‚é€šè¿‡httpåè®®æä¾›å„ç§ç½‘ç»œæœåŠ¡&lt;br&gt;
å…¶é«˜å¹¶å‘æ˜¯åŸºäºäº‹ä»¶é©±åŠ¨æ¶æ„ï¼Œioå¤šè·¯å¤ç”¨çš„epoll,ä½¿å¾—å¯ä»¥è½»æ¾æ”¯æŒç™¾ä¸‡è®¡çš„icpè¿æ¥ã€‚&lt;br&gt;
è½»é‡çº§ä¸»è¦ä½“ç°åœ¨ï¼šé‡‡ç”¨æ’ä»¶åŒ–å¼€å‘ï¼Œcupäº²å’Œï¼Œå°†cpuä¸nginxå·¥ä½œè¿›ç¨‹ç»‘å®šï¼Œå‡å°‘cpuåˆ‡æ¢å¸¦æ¥çš„æ¶ˆè€—&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;ä»£ç†&#34;&gt;ä»£ç†&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;ä»£ç†æ˜¯å®¢æˆ·ç«¯ä¸æœåŠ¡å™¨ä¹‹é—´çš„ä¸€å±‚æœåŠ¡å™¨ï¼Œå°†å®¢æˆ·ç«¯çš„è¯·æ±‚è½¬å‘ç»™æœåŠ¡å™¨ï¼Œç„¶åæœåŠ¡å™¨çš„å“åº”è½¬å‘ç»™å®¢æˆ·ç«¯&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;æ­£å‘ä»£ç†&#34;&gt;æ­£å‘ä»£ç†&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;å®¢æˆ·ç«¯å‘ä»£ç†æœåŠ¡å™¨è½¬å‘è¯·æ±‚å’ŒæŒ‡å®šç›®æ ‡æœåŠ¡å™¨ï¼Œä»£ç†æœåŠ¡å™¨å‘ç›®æ ‡æœåŠ¡å™¨å‘é€è¯·æ±‚ï¼Œå¹¶å°†ç»“æœè¿”å›ç»™å®¢æˆ·ç«¯ã€‚
å¯¹å®¢æˆ·ç«¯æ˜¯é€æ˜çš„ï¼Œå³å®¢æˆ·ç«¯çŸ¥é“è®¿é—®çš„æ˜¯ç›®æ ‡æœåŠ¡å™¨ï¼Œå¯¹ç›®æ ‡æœåŠ¡å™¨æ¥è¯´æ˜¯éé€æ˜çš„ï¼Œå¹¶ä¸çŸ¥é“è®¿é—®æœåŠ¡å™¨æ˜¯
å®¢æˆ·ç«¯è¿˜æ˜¯ä»£ç†æœåŠ¡å™¨&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;åå‘ä»£ç†&#34;&gt;åå‘ä»£ç†&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;å®¢æˆ·ç«¯å‘ä»£ç†æœåŠ¡å™¨å‘é€è¯·æ±‚ï¼Œä»£ç†æœåŠ¡å™¨å°†è¯·æ±‚è½¬å‘ç»™å†…éƒ¨çš„ç½‘ç»œæœåŠ¡å™¨(ç›®æ ‡æœåŠ¡å™¨)ï¼Œåœ¨å°†ç»“æœè¿”å›ç»™å®¢æˆ·ç«¯ã€‚å¯¹äºå®¢æˆ·ç«¯
æ˜¯éé€æ˜çš„ï¼Œå³å®¢æˆ·ç«¯ä¸æ¸…æ¥šæ˜¯è®¿é—®æ˜¯é‚£ä¸€å°ç›®æ ‡æœåŠ¡å™¨ã€‚å¯¹äºç›®æ ‡æœåŠ¡å™¨æ˜¯é€æ˜çš„ï¼Œå³ç›®æ ‡æœåŠ¡å™¨çŸ¥é“è®¿é—®çš„æ˜¯
ä»£ç†æœåŠ¡å™¨&lt;/li&gt;
&lt;li&gt;nginxåå‘ä»£ç†çš„é…ç½®å¦‚ä¸‹ï¼š&lt;/li&gt;
&lt;/ul&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;server {
         listen       80;
         server_name  www.123.com;
 
         location / {
             proxy_pass http://127.0.0.1:8080;
             index  index.html index.htm index.jsp;
         }
     }
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;æˆ‘ä»¬ç›‘å¬80ç«¯å£ï¼Œè®¿é—®åŸŸåä¸ºwww.123.comï¼Œä¸åŠ ç«¯å£å·æ—¶é»˜è®¤ä¸º80ç«¯å£ï¼Œæ•…è®¿é—®è¯¥åŸŸåæ—¶ä¼šè·³è½¬åˆ°127.0.0.1:8080è·¯å¾„ä¸Š&lt;/p&gt;
&lt;h2 id=&#34;è´Ÿè½½å‡è¡¡&#34;&gt;è´Ÿè½½å‡è¡¡&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;å½“è¯·æ±‚è¿‡å¤§æ—¶ï¼Œå°†è¯·æ±‚åˆ†å‘ç»™å„ä¸ªæœåŠ¡å™¨ã€‚è´Ÿè½½å‡è¡¡çš„åˆ†é…ç­–ç•¥ä¸ºï¼šweight(æƒé‡)è½®è¯¢ï¼Œfair(æ™ºèƒ½è°ƒæ•´è°ƒåº¦)&lt;/li&gt;
&lt;li&gt;nginxè½®è¯¢é…ç½®(æ‰€æœ‰è¯·æ±‚éƒ½æŒ‰ç…§æ—¶é—´é¡ºåºåˆ†é…åˆ°ä¸åŒçš„æœåŠ¡ä¸Š)&lt;/li&gt;
&lt;/ul&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;upstream  dalaoyang-server {
       server    localhost:10001;
       server    localhost:10002;
}  
&lt;/code&gt;&lt;/pre&gt;&lt;ul&gt;
&lt;li&gt;nginxæƒé‡é…ç½®(æƒé‡è½®è¯¢ï¼šä»£ç†æœåŠ¡å™¨æ¥æ”¶åˆ°è¯·æ±‚ï¼ŒæŒ‰ç…§è®¾å®šçš„æƒé‡ï¼Œè¯·æ±‚åˆ†é…åˆ°ä¸åŒçš„åç«¯æœåŠ¡å™¨ï¼Œå¦‚æœå‘ç°åç«¯æœåŠ¡å™¨å®•æœºæ—¶ï¼Œ
ä»£ç†æœåŠ¡å™¨ä¼šå°†å…¶å‰”é™¤å‡ºé˜Ÿåˆ—)&lt;/li&gt;
&lt;/ul&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;upstream  dalaoyang-server {
       server    localhost:10001 weight=1;
       server    localhost:10002 weight=2;
}
&lt;/code&gt;&lt;/pre&gt;&lt;ul&gt;
&lt;li&gt;nginx iphash é…ç½®(æ¯ä¸ªè¯·æ±‚éƒ½æ ¹æ®è®¿é—®ipçš„hashç»“æœåˆ†é…)&lt;/li&gt;
&lt;/ul&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;upstream  dalaoyang-server {
       ip_hash; 
       server    localhost:10001 weight=1;
       server    localhost:10002 weight=2;
}
&lt;/code&gt;&lt;/pre&gt;&lt;ul&gt;
&lt;li&gt;æœ€å°‘è¿æ¥(å°†è¯·æ±‚åˆ†é…åˆ°è¿æ¥æ•°æœ€å°‘çš„æœåŠ¡ä¸Š)&lt;/li&gt;
&lt;/ul&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;upstream  dalaoyang-server {
       least_conn;
       server    localhost:10001 weight=1;
       server    localhost:10002 weight=2;
}
&lt;/code&gt;&lt;/pre&gt;&lt;ul&gt;
&lt;li&gt;far æ™ºèƒ½è°ƒæ•´è°ƒåº¦ç®—æ³•ï¼šåŠ¨æ€æ ¹æ®åç«¯æœåŠ¡å™¨çš„è¯·æ±‚å¤„ç†åˆ°å“åº”æ—¶é—´è¿›è¡Œå‡è¡¡åˆ†é…ã€‚å³å“åº”æ—¶é—´çŸ­ï¼Œå¤„ç†æ•ˆç‡é«˜çš„æœåŠ¡å™¨
åˆ†é…åˆ°è¯·æ±‚çš„æ¦‚ç‡é«˜ã€‚å“åº”æ—¶é—´é•¿ï¼Œæ•ˆç‡ä½çš„æœåŠ¡å™¨åˆ†é…åˆ°è¯·æ±‚çš„æ¦‚ç‡ä½ã€‚&lt;/li&gt;
&lt;li&gt;far é…ç½®æ–‡ä»¶å¦‚ä¸‹ï¼š&lt;/li&gt;
&lt;/ul&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;upstream  dalaoyang-server {
       server    localhost:10001 weight=1;
       server    localhost:10002 weight=2;
       fair;  
}
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&#34;æµé‡æ§åˆ¶&#34;&gt;æµé‡æ§åˆ¶&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;é™æµå®é™…å°±æ˜¯é™åˆ¶æµå…¥è¯·æ±‚çš„æ•°é‡ï¼šæœ‰è®¡æ•°å™¨å›ºå®šçª—å£ç®—æ³•ã€ä»¤ç‰Œæ¡¶ç®—æ³•ã€æ¼æ¡¶ç®—æ³•å’Œé™åˆ¶å¹¶å‘è¿æ¥æ•°é™åˆ¶&lt;br&gt;
ä»¤ç‰Œæ¡¶ç®—æ³•:å­˜åœ¨ä¸€ä¸ªå¤§å°å›ºå®šçš„ä»¤ç‰Œæ¡¶ï¼Œä¼šä»¥æ’å®šçš„é€Ÿç‡æºæºä¸æ–­äº§ç”Ÿä»¤ç‰Œã€‚å¦‚æœä»¤ç‰Œæ¶ˆè€—é€Ÿç‡å°äºç”Ÿäº§ä»¤ç‰Œçš„é€Ÿåº¦ï¼Œ
ä»¤ç‰Œå°±ä¼šä¸€ç›´äº§ç”Ÿç›´è‡³è£…æ»¡æ•´ä¸ªä»¤ç‰Œæ¡¶ã€‚å¦‚æœè¯·æ±‚è·å–ä»¤ç‰Œå¤±è´¥åˆ™è¯·æ±‚ä¼šè¢«ç¦æ­¢è®¿é—®&lt;br&gt;
&lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 106; 
			flex-basis: 256px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/%E5%88%9D%E8%AF%86nginx/2.png&#34; data-size=&#34;999x936&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/%E5%88%9D%E8%AF%86nginx/2.png&#34;
			width=&#34;999&#34;
			height=&#34;936&#34;
			srcset=&#34;https://zcj-git520.github.io/p/%E5%88%9D%E8%AF%86nginx/2_hu32db3512bcf017fe8e89ae9cfa277d82_97071_480x0_resize_box_3.png 480w, https://zcj-git520.github.io/p/%E5%88%9D%E8%AF%86nginx/2_hu32db3512bcf017fe8e89ae9cfa277d82_97071_1024x0_resize_box_3.png 1024w&#34;
			loading=&#34;lazy&#34;
			&gt;
	&lt;/a&gt;
	
&lt;/figure&gt;
æ¼æ¡¶ç®—æ³•:çªå‘æµé‡ä¼šè¿›å…¥åˆ°ä¸€ä¸ªæ¼æ¡¶ï¼Œæ¼æ¡¶ä¼šæŒ‰ç…§æˆ‘ä»¬å®šä¹‰çš„é€Ÿç‡ä¾æ¬¡å¤„ç†è¯·æ±‚ï¼Œå¦‚æœæ°´æµè¿‡å¤§ä¹Ÿå°±æ˜¯çªå‘æµé‡è¿‡å¤§å°±ä¼šç›´æ¥æº¢å‡ºï¼Œ
åˆ™å¤šä½™çš„è¯·æ±‚ä¼šè¢«æ‹’ç»ã€‚æ‰€ä»¥æ¼æ¡¶ç®—æ³•èƒ½æ§åˆ¶æ•°æ®çš„ä¼ è¾“é€Ÿç‡ã€‚ç®—æ³•çš„æ ¸å¿ƒæ˜¯ï¼šç¼“å­˜è¯·æ±‚ã€åŒ€é€Ÿå¤„ç†ã€å¤šä½™çš„è¯·æ±‚ç›´æ¥ä¸¢å¼ƒã€‚&lt;br&gt;
&lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 139; 
			flex-basis: 335px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/%E5%88%9D%E8%AF%86nginx/4.png&#34; data-size=&#34;853x610&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/%E5%88%9D%E8%AF%86nginx/4.png&#34;
			width=&#34;853&#34;
			height=&#34;610&#34;
			srcset=&#34;https://zcj-git520.github.io/p/%E5%88%9D%E8%AF%86nginx/4_hu4c34e61a7398a86af1a9bb7f3b6efcab_287999_480x0_resize_box_3.png 480w, https://zcj-git520.github.io/p/%E5%88%9D%E8%AF%86nginx/4_hu4c34e61a7398a86af1a9bb7f3b6efcab_287999_1024x0_resize_box_3.png 1024w&#34;
			loading=&#34;lazy&#34;
			&gt;
	&lt;/a&gt;
	
&lt;/figure&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;ç»Ÿä¸€é‰´æƒ&#34;&gt;ç»Ÿä¸€é‰´æƒ&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;å®¢æˆ·ç«¯è¯·æ±‚æ—¶ï¼Œå°†Tokenæ”¾å…¥åœ¨è¯·æ±‚å¤´headä¸­ã€‚æœåŠ¡å™¨è§£æToken,å¯¹è®¿é—®è€…éƒ½è¿›è¡Œé‰´æƒï¼Œæœ€åè¿›å…¥æƒåŠ›è®¿é—®&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;ä¸»æµçš„ç½‘å…³&#34;&gt;ä¸»æµçš„ç½‘å…³&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Hongï¼šæ˜¯åŸºäºnginx+luaå¼€æºçš„ç½‘å…³&lt;/li&gt;
&lt;li&gt;Traefikæ˜¯httpåå‘ä»£ç†å’Œè´Ÿè½½å‡è¡¡å™¨ï¼Œæ”¯æŒåŠ¨æ€é…ç½®å’Œè¾ƒå¥½çš„ä¼¸ç¼©æ€§&lt;/li&gt;
&lt;li&gt;kubernetesæ˜¯åŸºäºEnvog Proxyæ„å»ºçš„åŸç”Ÿk8sç½‘å…³&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;å‚è€ƒæ–‡çŒ®&#34;&gt;å‚è€ƒæ–‡çŒ®ï¼š&lt;/h2&gt;
&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;https://www.cnblogs.com/ysocean/p/9392908.html&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Nginxï¼ˆä¸‰ï¼‰nginx åå‘ä»£ç† &lt;/a&gt;&lt;/p&gt;
</description>
        </item>
        <item>
        <title>httpåè®®åº•å±‚åˆ†æ</title>
        <link>https://zcj-git520.github.io/p/http%E5%8D%8F%E8%AE%AE%E5%BA%95%E5%B1%82%E5%88%86%E6%9E%90/</link>
        <pubDate>Thu, 18 Nov 2021 22:00:38 +0800</pubDate>
        
        <guid>https://zcj-git520.github.io/p/http%E5%8D%8F%E8%AE%AE%E5%BA%95%E5%B1%82%E5%88%86%E6%9E%90/</guid>
        <description>&lt;img src="https://zcj-git520.github.io/p/http%E5%8D%8F%E8%AE%AE%E5%BA%95%E5%B1%82%E5%88%86%E6%9E%90/1.jpg" alt="Featured image of post httpåè®®åº•å±‚åˆ†æ" /&gt;&lt;h2 id=&#34;http&#34;&gt;HTTP&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;HTTPæ˜¯(Hyper Text Transfer Protocol)è¶…æ–‡æœ¬ä¼ è¾“åè®®, åŸºäºtcpçš„åº”ç”¨å±‚ä¼ è¾“åè®®ï¼ˆè¯·æ±‚-å“åº”ï¼‰åè®®&lt;/li&gt;
&lt;li&gt;å½±å“HTTPç½‘ç»œè¯·æ±‚çš„ä¸»è¦å› ç´ å¸¦å®½å’Œå»¶è¿Ÿ&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;å»¶è¿Ÿçš„ç§ç±»&#34;&gt;å»¶è¿Ÿçš„ç§ç±»:&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;æµè§ˆå™¨é˜»å¡(è¶…è¿‡æµè§ˆå™¨è¿æ¥æ•°é™åˆ¶çš„åç»­è¯·æ±‚éƒ½ä¼šè¢«é˜»å¡)&lt;/li&gt;
&lt;li&gt;DNSæŸ¥è¯¢ (å°†åŸŸåè§£æé€ æˆçš„å»¶è¿Ÿï¼Œå¯ä»¥é€šè¿‡ç¼“å­˜DNSè¿›è¡Œè§£å†³)&lt;/li&gt;
&lt;li&gt;å»ºç«‹é“¾æ¥ (å› HTTPæ˜¯åŸºäºTCPçš„åº”ç”¨å±‚åè®®ï¼Œåœ¨å»ºç«‹è¿æ¥æ—¶éœ€è¦è¿›è¡Œ)&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&#34;http10&#34;&gt;HTTP1.0&lt;/h2&gt;
&lt;h3 id=&#34;http10å­˜åœ¨çš„é—®é¢˜&#34;&gt;http1.0å­˜åœ¨çš„é—®é¢˜ï¼š&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;çŸ­è¿æ¥ï¼šè§„å®šå®¢æˆ·ç«¯ä¸æœåŠ¡å™¨åªä¿æŒçŸ­æš‚è¿æ¥ï¼Œå®¢æˆ·ç«¯æ¯æ¬¡è¯·æ±‚éƒ½éœ€è¦å»ºç«‹è¿æ¥ï¼ŒæœåŠ¡å™¨å®Œæˆè¯·æ±‚å
æ–­å¼€è¿æ¥ï¼ŒæœåŠ¡å™¨ä¸è·Ÿè¸ªå®¢æˆ·ç«¯ï¼Œä¸ä¿å­˜å®¢æˆ·ç«¯çš„è¯·æ±‚è®°å½•ã€‚&lt;/li&gt;
&lt;li&gt;æ²¡æœ‰hostå¤´åŸŸï¼šæ¯å°æœåŠ¡å™¨éƒ½ç»‘å®šä¸€ä¸ªå”¯ä¸€çš„IPåœ°å€ï¼Œè¯·æ±‚æ¶ˆæ¯ä¸­çš„URLå¹¶æ²¡æœ‰ä¼ é€’ä¸»æœºåï¼ˆhostnameï¼‰&lt;/li&gt;
&lt;li&gt;ä¸å…è®¸çŸ­ç‚¹ç»­ä¼ &lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&#34;http11&#34;&gt;HTTP1.1&lt;/h2&gt;
&lt;h3 id=&#34;æ ¹æ®http10æš´éœ²çš„é—®é¢˜http11å¢åŠ ä¼˜åŒ–æ–¹æ¡ˆ&#34;&gt;æ ¹æ®http1.0æš´éœ²çš„é—®é¢˜ï¼Œhttp1.1å¢åŠ ä¼˜åŒ–æ–¹æ¡ˆ&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;ç¼“å­˜å¤„ç†ï¼šhttp1.1å¢åŠ æ›´å¤šçš„ç¼“å­˜æ§åˆ¶ç­–ç•¥&lt;/li&gt;
&lt;li&gt;å¸¦å®½ä¼˜åŒ–åŠç½‘ç»œè¿æ¥çš„ä½¿ç”¨ï¼šhttp1.1ä¸­è¯·æ±‚å¤´å¼•å…¥äº†rangeå¤´åŸŸå’Œæ”¯æŒæ–­ç‚¹ç»­ä¼ çš„åŠŸèƒ½&lt;/li&gt;
&lt;li&gt;Hostå¤´å¤„ç†ï¼šhttp1.1çš„è¯·æ±‚æ¶ˆæ¯å’Œç›¸åº”æ¶ˆæ¯è™šæ‹Ÿä¸»æœºæŠ€æœ¯çš„å‘å±•ï¼Œåœ¨ä¸€å°ç‰©ç†æœåŠ¡å™¨ä¸Šå¯ä»¥å­˜åœ¨å¤šä¸ªè™šæ‹Ÿä¸»æœº(Multi-homed Web Servers),å¹¶ä¸”å®ƒä»¬å…±äº«ä¸€ä¸ªIPåœ°å€,HTTP1.1çš„è¯·æ±‚æ¶ˆæ¯å’Œå“åº”æ¶ˆæ¯éƒ½åº”æ”¯æŒHostå¤´åŸŸï¼Œä¸”è¯·æ±‚æ¶ˆæ¯ä¸­å¦‚æœæ²¡æœ‰Hostå¤´åŸŸä¼šæŠ¥å‘Šä¸€ä¸ªé”™è¯¯ï¼ˆ400 Bad Requestï¼‰&lt;/li&gt;
&lt;li&gt;é•¿è¿æ¥ï¼š æ”¯æŒé•¿è¿æ¥å’Œæµæ°´çº¿å¤„ç†ï¼Œé»˜è®¤å¼€å§‹æ˜¯é•¿è¿æ¥ï¼škeep-alive&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;http11-ä¹Ÿå¸¦æ¥æ–°çš„é—®é¢˜http-é˜Ÿå¤´é˜»å¡head-of-line-blocking&#34;&gt;http1.1 ä¹Ÿå¸¦æ¥æ–°çš„é—®é¢˜ï¼šHTTP é˜Ÿå¤´é˜»å¡(head of line blocking)&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;å› http1.1æ”¯æŒäº†é•¿è¿æ¥å’Œä½¿ç”¨äº†ç®¡é“æœºåˆ¶ï¼Œå®¢æˆ·ç«¯ä¸æœåŠ¡å™¨å»ºç«‹ä¸€æ¬¡è¿æ¥ï¼Œå®¢æˆ·ç«¯ä¸ç”¨ç­‰å¾…æœåŠ¡å™¨å“åº”å°±èƒ½å‘é€ä¸‹ä¸€ä¸ªè¯·æ±‚ï¼Œæ”¯æŒäº†å¹¶è¡Œå‘é€å¤šä¸ªè¯·æ±‚ï¼Œ
ä½†æœåŠ¡å™¨å¿…é¡»æŒ‰ç…§è¯·æ±‚çš„é¡ºåºæ¥ç›¸åº”è¯·æ±‚ï¼Œä¹Ÿå°±æ˜¯é€šè¿‡ä¸²è¡Œå“åº”è¯·æ±‚ï¼Œè¿™å°±é€ æˆäº†HTTPçš„é˜Ÿå¤´é˜»å¡ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;è§£å†³http-é˜Ÿå¤´é˜»å¡æ–¹æ³•&#34;&gt;è§£å†³Http é˜Ÿå¤´é˜»å¡æ–¹æ³•&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;å¹¶å‘è¿æ¥ï¼šä¸€ä¸ªåŸŸåå…è®¸åˆ†é…å¤šä¸ªé•¿è¿æ¥ï¼Œå¢åŠ å¤„ç†è¯·æ±‚ä»»åŠ¡&lt;/li&gt;
&lt;li&gt;åŸŸååˆ†ç‰‡ï¼šå°†ä¸€ä¸ªåŸŸååˆ†è§£ä¸ºå¤šä¸ªåŸŸåï¼Œåœ¨è¿›è¡Œå¹¶å‘è¿æ¥&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&#34;http20&#34;&gt;HTTP2.0&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;HTTP2.0ä¸»è¦æ˜¯åŸºäºSPDYåè®®ã€‚å®ç°äº†ä½å»¶æ—¶é«˜ååé‡&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;spdyåè®®&#34;&gt;SPDYåè®®&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;æ˜¯åŸºäºTCPåè®®çš„åº”ç”¨å±‚åè®®ï¼Œå…¶ç›®æ ‡æ˜¯é€šè¿‡å¤´éƒ¨å‹ç¼©ã€å¤šè·¯å¤ç”¨ã€ä¼˜å…ˆçº§ç­‰ä½œç”¨ç¼©çŸ­ç½‘é¡µæ”¾å…¥åŠ è½½æ—¶é—´å’Œ
ä¼˜åŒ–httpçš„æ€§èƒ½ï¼Œå…¶æ ¸å¿ƒæ˜¯å°½é‡å‡å°‘TCPè¿æ¥æ•°&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;http-20çš„ç‰¹æ€§&#34;&gt;HTTP 2.0çš„ç‰¹æ€§&lt;/h3&gt;
&lt;h3 id=&#34;å¤´éƒ¨å‹ç¼©&#34;&gt;å¤´éƒ¨å‹ç¼©&lt;/h3&gt;
&lt;p&gt;å¤´éƒ¨å­˜åœ¨å¤§é‡çš„ä¿¡æ¯ï¼Œè€Œä¸”æ¯æ¬¡åœ¨å‘é€éƒ½ä¼šé™ä½httpçš„æ€§èƒ½ï¼Œåœ¨ç”¨HPACKç®—æ³•å¯¹å¤´éƒ¨è¿›è¡Œå‹ç¼©ï¼š
1.åœ¨å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ç»´æŒä¸€ä¸ªå¤´éƒ¨è¡¨æ¥è·Ÿè¸ªå’Œå­˜å‚¨å®¢æˆ·ç«¯å‘æ¥çš„é”®å€¼å¯¹
2.å®¢æˆ·ç«¯åœ¨è¯·æ±‚çš„æ—¶å€™ä¾¿åªéœ€è¦å‘é€åœ¨è¡¨é‡Œçš„ç´¢å¼•ä½ç½®å³å¯
3.HPACK ä¸ä»…ä»…é€šè¿‡ç´¢å¼•é”®å€¼å¯¹æ¥é™ä½æ•°æ®é‡ï¼ŒåŒæ—¶è¿˜ä¼šå°†å­—ç¬¦ä¸²è¿›è¡Œéœå¤«æ›¼ç¼–ç æ¥å‹ç¼©å­—ç¬¦ä¸²å¤§å°
&lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 305; 
			flex-basis: 733px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/http%E5%8D%8F%E8%AE%AE%E5%BA%95%E5%B1%82%E5%88%86%E6%9E%90/1.jpg&#34; data-size=&#34;792x259&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/http%E5%8D%8F%E8%AE%AE%E5%BA%95%E5%B1%82%E5%88%86%E6%9E%90/1.jpg&#34;
			width=&#34;792&#34;
			height=&#34;259&#34;
			srcset=&#34;https://zcj-git520.github.io/p/http%E5%8D%8F%E8%AE%AE%E5%BA%95%E5%B1%82%E5%88%86%E6%9E%90/1_hu7de10a5ba4c09963d2757d75c9451326_29719_480x0_resize_q75_box.jpg 480w, https://zcj-git520.github.io/p/http%E5%8D%8F%E8%AE%AE%E5%BA%95%E5%B1%82%E5%88%86%E6%9E%90/1_hu7de10a5ba4c09963d2757d75c9451326_29719_1024x0_resize_q75_box.jpg 1024w&#34;
			loading=&#34;lazy&#34;
			&gt;
	&lt;/a&gt;
	
&lt;/figure&gt;&lt;/p&gt;
&lt;h3 id=&#34;å¤šè·¯å¤ç”¨&#34;&gt;å¤šè·¯å¤ç”¨&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;åŸºäºäºŒè¿›åˆ¶åˆ†å¸§ï¼Œåœ¨å…±äº«çš„Tcpè¿æ¥çš„åŸºç¡€ä¸ŠåŒæ—¶å‘é€è¯·æ±‚å’Œå“åº”ã€‚httpçš„æ¶ˆæ¯è¢«åˆ†è§£æˆç‹¬ç«‹çš„å¸§å±‚ï¼Œäº¤é”™å‘å‡º
é€šè¿‡æµæ ‡è¯†ç¬¦å’Œé¦–éƒ¨å°†ä»–ä»¬é‡æ–°ç»„è£…èµ·æ¥ï¼Œé¿å…äº†é˜Ÿå¤´é˜»å¡å’Œæé«˜äº†ä¼ è¾“çš„æ€§èƒ½
&lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 371; 
			flex-basis: 890px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/http%E5%8D%8F%E8%AE%AE%E5%BA%95%E5%B1%82%E5%88%86%E6%9E%90/2.jpg&#34; data-size=&#34;720x194&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/http%E5%8D%8F%E8%AE%AE%E5%BA%95%E5%B1%82%E5%88%86%E6%9E%90/2.jpg&#34;
			width=&#34;720&#34;
			height=&#34;194&#34;
			srcset=&#34;https://zcj-git520.github.io/p/http%E5%8D%8F%E8%AE%AE%E5%BA%95%E5%B1%82%E5%88%86%E6%9E%90/2_hu26c551d112db882bece071ac063555bc_17388_480x0_resize_q75_box.jpg 480w, https://zcj-git520.github.io/p/http%E5%8D%8F%E8%AE%AE%E5%BA%95%E5%B1%82%E5%88%86%E6%9E%90/2_hu26c551d112db882bece071ac063555bc_17388_1024x0_resize_q75_box.jpg 1024w&#34;
			loading=&#34;lazy&#34;
			&gt;
	&lt;/a&gt;
	
&lt;/figure&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;äºŒè¿›åˆ¶åˆ†å¸§&#34;&gt;äºŒè¿›åˆ¶åˆ†å¸§&lt;/h4&gt;
&lt;ol&gt;
&lt;li&gt;ç»httpæŠ¥æ–‡æ ¼å¼è½¬æ¢æˆäºŒè¿›åˆ¶æ ¼å¼ï¼Œå…¨éƒ¨çš„ioä¸²ã€‚å°†åŸæ¥çš„headerçš„æŠ¥æ–‡åˆ†æˆäºŒè¿›åˆ¶å¸§æ²‰åœ¨çš„å¤´éƒ¨å­—æ®µï¼Œ
bodyè¢«æ‹†åˆ†æˆäºŒè¿›åˆ¶å¸§å­˜æ”¾åœ¨è¯·æ±‚ä½“æ•°æ®æ®µã€‚æœåŠ¡å™¨æ¥æ”¶çš„ä¸æ˜¯httpæŠ¥æ–‡ï¼Œè€Œæ˜¯äºŒè¿›åˆ¶å¸§ã€‚&lt;/li&gt;
&lt;li&gt;å¸§(frame)åŒ…å«éƒ¨åˆ†ï¼šç±»å‹Type, é•¿åº¦Length, æ ‡è®°Flags, æµæ ‡è¯†Streamå’Œframe payloadæœ‰æ•ˆè½½è·ã€‚&lt;/li&gt;
&lt;li&gt;æ¶ˆæ¯(message)ï¼šä¸€ä¸ªå®Œæ•´çš„è¯·æ±‚æˆ–è€…å“åº”ï¼Œæ¯”å¦‚è¯·æ±‚ã€å“åº”ç­‰ï¼Œç”±ä¸€ä¸ªæˆ–å¤šä¸ª Frame ç»„æˆã€‚&lt;/li&gt;
&lt;li&gt;æµæ˜¯è¿æ¥ä¸­çš„ä¸€ä¸ªè™šæ‹Ÿä¿¡é“ï¼Œå¯ä»¥æ‰¿è½½åŒå‘æ¶ˆæ¯ä¼ è¾“ã€‚æ¯ä¸ªæµæœ‰å”¯ä¸€æ•´æ•°æ ‡è¯†ç¬¦ã€‚ä¸ºäº†é˜²æ­¢ä¸¤ç«¯æµIDå†²çªï¼Œå®¢æˆ·ç«¯å‘èµ·çš„æµå…·æœ‰å¥‡æ•°IDï¼ŒæœåŠ¡å™¨ç«¯å‘èµ·çš„æµå…·æœ‰å¶æ•°IDã€‚&lt;/li&gt;
&lt;li&gt;æµæ ‡è¯†æ˜¯æè¿°äºŒè¿›åˆ¶frameçš„æ ¼å¼ï¼Œä½¿å¾—æ¯ä¸ªframeèƒ½å¤ŸåŸºäºhttp2å‘é€ï¼Œä¸æµæ ‡è¯†è”ç³»çš„æ˜¯ä¸€ä¸ªæµï¼Œæ¯ä¸ªæµæ˜¯ä¸€ä¸ªé€»è¾‘è”ç³»ï¼Œä¸€ä¸ªç‹¬ç«‹çš„åŒå‘çš„frameå­˜åœ¨äºå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ç«¯ä¹‹é—´çš„http2è¿æ¥ä¸­ã€‚ä¸€ä¸ªhttp2è¿æ¥ä¸Šå¯åŒ…å«å¤šä¸ªå¹¶å‘æ‰“å¼€çš„æµï¼Œè¿™ä¸ªå¹¶å‘æµçš„æ•°é‡èƒ½å¤Ÿç”±å®¢æˆ·ç«¯è®¾ç½®ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 190; 
			flex-basis: 456px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/http%E5%8D%8F%E8%AE%AE%E5%BA%95%E5%B1%82%E5%88%86%E6%9E%90/3.jpg&#34; data-size=&#34;624x328&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/http%E5%8D%8F%E8%AE%AE%E5%BA%95%E5%B1%82%E5%88%86%E6%9E%90/3.jpg&#34;
			width=&#34;624&#34;
			height=&#34;328&#34;
			srcset=&#34;https://zcj-git520.github.io/p/http%E5%8D%8F%E8%AE%AE%E5%BA%95%E5%B1%82%E5%88%86%E6%9E%90/3_hua465648554d7afaa965ef67ab7bc541e_26894_480x0_resize_q75_box.jpg 480w, https://zcj-git520.github.io/p/http%E5%8D%8F%E8%AE%AE%E5%BA%95%E5%B1%82%E5%88%86%E6%9E%90/3_hua465648554d7afaa965ef67ab7bc541e_26894_1024x0_resize_q75_box.jpg 1024w&#34;
			loading=&#34;lazy&#34;
			&gt;
	&lt;/a&gt;
	
&lt;/figure&gt;&lt;/p&gt;
&lt;h4 id=&#34;äºŒè¿›åˆ¶åˆ†å¸§çš„ç‰¹æ€§&#34;&gt;äºŒè¿›åˆ¶åˆ†å¸§çš„ç‰¹æ€§&lt;/h4&gt;
&lt;ol&gt;
&lt;li&gt;å¹¶å‘æ€§ï¼šåŒæ—¶å¯å‘å¤šä¸ªå¸§&lt;/li&gt;
&lt;li&gt;è‡ªå¢æ€§ï¼šæµçš„idä¸å¯é‡ç”¨ï¼ŒæŒ‰é¡ºåºé€’å¢ï¼Œåˆ°é˜ˆå€¼åç½®é›¶&lt;/li&gt;
&lt;li&gt;åŒå‘æ€§ï¼šå®¢æˆ·ç«¯ä¸æœåŠ¡ç«¯éƒ½å¯åˆ°æµï¼Œäº’ä¸å¹²æ‰°ï¼Œéƒ½å¯æ”¶å‘&lt;/li&gt;
&lt;li&gt;å¯è®¾ä¼˜å…ˆçº§ï¼šè®¾ç½®å¸§çš„ä¼˜å…ˆçº§ï¼ŒæœåŠ¡å™¨ä¼˜å…ˆå¤„ç†&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;æœåŠ¡å™¨æ¨é€&#34;&gt;æœåŠ¡å™¨æ¨é€&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;æœåŠ¡å™¨ä¸åœ¨æ˜¯å®Œå…¨è¢«åŠ¨çš„æ¥æ”¶å’Œå“åº”è¯·æ±‚ï¼Œä¹Ÿèƒ½åˆ›å»ºæ–°çš„èµ„æº(æµ)å‘é€ç»™å®¢æˆ·ç«¯ã€‚&lt;/li&gt;
&lt;li&gt;æœåŠ¡å™¨å¯ä»¥å¯¹ä¸€ä¸ªå®¢æˆ·ç«¯è¯·æ±‚å‘é€å¤šä¸ªå“åº”ï¼ŒæœåŠ¡å™¨å‘å®¢æˆ·ç«¯æ¨é€èµ„æºæ— éœ€å®¢æˆ·ç«¯æ˜ç¡®åœ°è¯·æ±‚ã€‚
å¹¶ä¸”ï¼ŒæœåŠ¡ç«¯æ¨é€èƒ½æŠŠå®¢æˆ·ç«¯æ‰€éœ€è¦çš„èµ„æºä¼´éšç€index.htmlä¸€èµ·å‘é€åˆ°å®¢æˆ·ç«¯ï¼Œçœå»äº†å®¢æˆ·ç«¯é‡å¤è¯·æ±‚çš„æ­¥éª¤ã€‚&lt;/li&gt;
&lt;li&gt;å½“æœåŠ¡ç«¯éœ€è¦ä¸»åŠ¨æ¨é€æŸä¸ªèµ„æºæ—¶ï¼Œä¾¿ä¼šå‘é€ä¸€ä¸ª Frame Type ä¸º PUSH_PROMISE çš„ Frameï¼Œé‡Œé¢å¸¦äº† PUSH éœ€è¦æ–°å»ºçš„ Stream IDã€‚
æ„æ€æ˜¯å‘Šè¯‰å®¢æˆ·ç«¯ï¼šæ¥ä¸‹æ¥æˆ‘è¦ç”¨è¿™ä¸ª ID å‘ä½ å‘é€ä¸œè¥¿ï¼Œå®¢æˆ·ç«¯å‡†å¤‡å¥½æ¥ç€ã€‚å®¢æˆ·ç«¯è§£æ Frame æ—¶ï¼Œå‘ç°å®ƒæ˜¯ä¸€ä¸ª PUSH_PROMISE ç±»å‹ï¼Œ
ä¾¿ä¼šå‡†å¤‡æ¥æ”¶æœåŠ¡ç«¯è¦æ¨é€çš„æµã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 235; 
			flex-basis: 564px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/http%E5%8D%8F%E8%AE%AE%E5%BA%95%E5%B1%82%E5%88%86%E6%9E%90/4jpg.jpg&#34; data-size=&#34;494x210&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/http%E5%8D%8F%E8%AE%AE%E5%BA%95%E5%B1%82%E5%88%86%E6%9E%90/4jpg.jpg&#34;
			width=&#34;494&#34;
			height=&#34;210&#34;
			srcset=&#34;https://zcj-git520.github.io/p/http%E5%8D%8F%E8%AE%AE%E5%BA%95%E5%B1%82%E5%88%86%E6%9E%90/4jpg_huc6e2de94992377f280c901e7e640fbf3_19870_480x0_resize_q75_box.jpg 480w, https://zcj-git520.github.io/p/http%E5%8D%8F%E8%AE%AE%E5%BA%95%E5%B1%82%E5%88%86%E6%9E%90/4jpg_huc6e2de94992377f280c901e7e640fbf3_19870_1024x0_resize_q75_box.jpg 1024w&#34;
			loading=&#34;lazy&#34;
			&gt;
	&lt;/a&gt;
	
&lt;/figure&gt;&lt;/p&gt;
&lt;h3 id=&#34;è¯·æ±‚ä¼˜å…ˆçº§&#34;&gt;è¯·æ±‚ä¼˜å…ˆçº§&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;é€šè¿‡è®¾ç½®å¸§çš„ä¼˜å…ˆçº§ï¼Œä¼˜åŒ–å¸§çš„ä¼ è¾“é¡ºåº&lt;/li&gt;
&lt;li&gt;æŠŠhttpæ¶ˆæ¯åˆ†ä¸ºå¾ˆå¤šç‹¬ç«‹å¸§ä¹‹åï¼Œå°±å¯ä»¥é€šè¿‡ä¼˜åŒ–è¿™äº›å¸§çš„äº¤é”™å’Œä¼ è¾“é¡ºåºè¿›ä¸€æ­¥ä¼˜åŒ–æ€§èƒ½ã€‚æ¯ä¸ªæµéƒ½å¯ä»¥å¸¦æœ‰ä¸€ä¸ª31æ¯”ç‰¹çš„ä¼˜å…ˆå€¼ï¼š0 è¡¨ç¤ºæœ€é«˜ä¼˜å…ˆçº§ï¼›2çš„31æ¬¡æ–¹-1 è¡¨ç¤ºæœ€ä½ä¼˜å…ˆçº§ã€‚&lt;/li&gt;
&lt;li&gt;æœåŠ¡å™¨å¯ä»¥æ ¹æ®æµçš„ä¼˜å…ˆçº§ï¼Œæ§åˆ¶èµ„æºåˆ†é…ï¼ˆCPUã€å†…å­˜ã€å¸¦å®½ï¼‰ï¼Œè€Œåœ¨å“åº”æ•°æ®å‡†å¤‡å¥½ä¹‹åï¼Œä¼˜å…ˆå°†æœ€é«˜ä¼˜å…ˆçº§çš„å¸§å‘é€ç»™å®¢æˆ·ç«¯ã€‚é«˜ä¼˜å…ˆçº§çš„æµéƒ½åº”è¯¥ä¼˜å…ˆå‘é€ï¼Œä½†åˆä¸ä¼šç»å¯¹çš„ã€‚ç»å¯¹åœ°å‡†å®ˆï¼Œå¯èƒ½åˆä¼šå¼•å…¥é¦–é˜Ÿé˜»å¡çš„é—®é¢˜ï¼šé«˜ä¼˜å…ˆçº§çš„è¯·æ±‚æ…¢å¯¼è‡´é˜»å¡å…¶ä»–èµ„æºäº¤ä»˜ã€‚
4.åˆ†é…å¤„ç†èµ„æºå’Œå®¢æˆ·ç«¯ä¸æœåŠ¡å™¨é—´çš„å¸¦å®½ï¼Œä¸åŒä¼˜å…ˆçº§çš„æ··åˆä¹Ÿæ˜¯å¿…é¡»çš„ã€‚å®¢æˆ·ç«¯ä¼šæŒ‡å®šå“ªä¸ªæµæ˜¯æœ€é‡è¦çš„ï¼Œæœ‰ä¸€äº›ä¾èµ–å‚æ•°ï¼Œè¿™æ ·ä¸€ä¸ªæµå¯ä»¥ä¾èµ–å¦å¤–ä¸€ä¸ªæµã€‚ä¼˜å…ˆçº§åˆ«å¯ä»¥åœ¨è¿è¡Œæ—¶åŠ¨æ€æ”¹å˜ï¼Œå½“ç”¨æˆ·æ»šåŠ¨é¡µé¢æ—¶ï¼Œå¯ä»¥å‘Šè¯‰æµè§ˆå™¨å“ªä¸ªå›¾åƒæ˜¯æœ€é‡è¦çš„ï¼Œä½ ä¹Ÿå¯ä»¥åœ¨ä¸€ç»„æµä¸­è¿›è¡Œä¼˜å…ˆç­›é€‰ï¼Œèƒ½å¤Ÿçªç„¶æŠ“ä½é‡ç‚¹æµã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h4 id=&#34;ä¼˜å…ˆçº§ç­‰çº§&#34;&gt;ä¼˜å…ˆçº§ç­‰çº§ï¼š&lt;/h4&gt;
&lt;ol&gt;
&lt;li&gt;ä¼˜å…ˆçº§æœ€é«˜ï¼šä¸»è¦çš„html&lt;/li&gt;
&lt;li&gt;ä¼˜å…ˆçº§é«˜ï¼šCSSæ–‡ä»¶&lt;/li&gt;
&lt;li&gt;ä¼˜å…ˆçº§ä¸­ï¼šjsæ–‡ä»¶&lt;/li&gt;
&lt;li&gt;ä¼˜å…ˆçº§ä½ï¼šå›¾ç‰‡&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&#34;å‚è€ƒæ–‡çŒ®&#34;&gt;å‚è€ƒæ–‡çŒ®ï¼š&lt;/h2&gt;
</description>
        </item>
        <item>
        <title>PRC</title>
        <link>https://zcj-git520.github.io/p/prc/</link>
        <pubDate>Mon, 15 Nov 2021 22:00:38 +0800</pubDate>
        
        <guid>https://zcj-git520.github.io/p/prc/</guid>
        <description>&lt;img src="https://zcj-git520.github.io/p/prc/1.jpg" alt="Featured image of post PRC" /&gt;&lt;h2 id=&#34;rpc&#34;&gt;RPC&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;RPC(Remote Procedure Call Protocol)â€”â€”è¿œç¨‹è¿‡ç¨‹è°ƒç”¨åè®®ï¼Œå®ƒæ˜¯ä¸€ç§é€šè¿‡ç½‘ç»œä»è¿œç¨‹è®¡ç®—æœºç¨‹åºä¸Šè¯·æ±‚æœåŠ¡ï¼Œ
è€Œä¸éœ€è¦äº†è§£åº•å±‚ç½‘ç»œæŠ€æœ¯çš„åè®®ã€‚RPCåè®®å‡å®šæŸäº›ä¼ è¾“åè®®çš„å­˜åœ¨ï¼Œå¦‚TCP/IPæˆ–UDPï¼Œä¸ºé€šä¿¡ç¨‹åºä¹‹é—´æºå¸¦ä¿¡æ¯æ•°æ®ã€‚
RPCå°†åŸæ¥çš„æœ¬åœ°è°ƒç”¨è½¬å˜ä¸ºè°ƒç”¨è¿œç«¯çš„æœåŠ¡å™¨ä¸Šçš„æ–¹æ³•ï¼Œç»™ç³»ç»Ÿçš„å¤„ç†èƒ½åŠ›å’Œååé‡å¸¦æ¥äº†è¿‘ä¼¼äºæ— é™åˆ¶æå‡çš„å¯èƒ½ã€‚
åœ¨OSIç½‘ç»œé€šä¿¡æ¨¡å‹ä¸­ï¼ŒRPCè·¨åŸŸäº†ä¼ è¾“å±‚å’Œåº”ç”¨å±‚ã€‚RPCä½¿å¾—å¼€å‘åŒ…æ‹¬ç½‘ç»œåˆ†å¸ƒå¼å¤šç¨‹åºåœ¨å†…çš„åº”ç”¨ç¨‹åºæ›´åŠ å®¹æ˜“&lt;/li&gt;
&lt;li&gt;RPCé‡‡ç”¨å®¢æˆ·æœº/æœåŠ¡å™¨(client-server)æ¨¡å¼,ä¹Ÿæ˜¯ä¸€ç§è¯·æ±‚/å“åº”(request-response)æ¨¡å¼ï¼Œå¯ä»¥é€šè¿‡TCP/UDPä»¥åŠHTTP
åè®®è¿›è¡Œä¼ è¾“&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;rpc-æ¶æ„&#34;&gt;RPC æ¶æ„&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;CAll ID æ˜ å°„ï¼šå®¢æˆ·ç«¯é€šè¿‡IDä¼ è¾“ç»™æœåŠ¡å™¨ï¼ŒæœåŠ¡å™¨é€šè¿‡IDè°ƒç”¨ç›¸åº”çš„å‡½æ•°è¿”å›&lt;/li&gt;
&lt;li&gt;åºåˆ—åŒ–ä¸çƒ¦åºåˆ—åŒ–ï¼šå®¢æˆ·ç«¯ä¸æœåŠ¡å™¨é€šè¿‡åºåˆ—åŒ–ä¸ååºåˆ—åŒ–è¿›è¡Œä¼ å‚&lt;/li&gt;
&lt;li&gt;ä¸€ä¸ªå®Œæ•´çš„RPCæ¶æ„é‡Œé¢åŒ…å«äº†å››ä¸ªæ ¸å¿ƒçš„ç»„ä»¶ï¼Œåˆ†åˆ«æ˜¯Clientï¼ŒClient Stubï¼ŒServerä»¥åŠServer Stubï¼Œè¿™ä¸ªStubå¯ä»¥ç†è§£ä¸ºå­˜æ ¹ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;ol&gt;
&lt;li&gt;å®¢æˆ·ç«¯(Client)ï¼ŒæœåŠ¡çš„è°ƒç”¨æ–¹ã€‚&lt;/li&gt;
&lt;li&gt;å®¢æˆ·ç«¯å­˜æ ¹(Client Stub)ï¼Œå­˜æ”¾æœåŠ¡ç«¯çš„åœ°å€æ¶ˆæ¯ï¼Œå†å°†å®¢æˆ·ç«¯çš„è¯·æ±‚å‚æ•°æ‰“åŒ…æˆç½‘ç»œæ¶ˆæ¯ï¼Œç„¶åé€šè¿‡ç½‘ç»œè¿œç¨‹å‘é€ç»™æœåŠ¡æ–¹ã€‚&lt;/li&gt;
&lt;li&gt;æœåŠ¡ç«¯(Server)ï¼ŒçœŸæ­£çš„æœåŠ¡æä¾›è€…ã€‚&lt;/li&gt;
&lt;li&gt;æœåŠ¡ç«¯å­˜æ ¹(Server Stub)ï¼Œæ¥æ”¶å®¢æˆ·ç«¯å‘é€è¿‡æ¥çš„æ¶ˆæ¯ï¼Œå°†æ¶ˆæ¯è§£åŒ…ï¼Œå¹¶è°ƒç”¨æœ¬åœ°çš„æ–¹æ³•ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;rpcè°ƒç”¨è¿‡ç¨‹&#34;&gt;RPCè°ƒç”¨è¿‡ç¨‹&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;å®¢æˆ·ç«¯ï¼ˆclientï¼‰ä»¥æœ¬åœ°è°ƒç”¨æ–¹å¼ï¼ˆå³ä»¥æ¥å£çš„æ–¹å¼ï¼‰è°ƒç”¨æœåŠ¡ï¼›&lt;/li&gt;
&lt;li&gt;å®¢æˆ·ç«¯å­˜æ ¹ï¼ˆclient stubï¼‰æ¥æ”¶åˆ°è°ƒç”¨åï¼Œè´Ÿè´£å°†æ–¹æ³•ã€å‚æ•°ç­‰ç»„è£…æˆèƒ½å¤Ÿè¿›è¡Œç½‘ç»œä¼ è¾“çš„æ¶ˆæ¯ä½“ï¼ˆå°†æ¶ˆæ¯ä½“å¯¹è±¡åºåˆ—åŒ–ä¸ºäºŒè¿›åˆ¶ï¼‰ï¼›&lt;/li&gt;
&lt;li&gt;å®¢æˆ·ç«¯é€šè¿‡socketså°†æ¶ˆæ¯å‘é€åˆ°æœåŠ¡ç«¯ï¼›&lt;/li&gt;
&lt;li&gt;æœåŠ¡ç«¯å­˜æ ¹( server stubï¼‰æ”¶åˆ°æ¶ˆæ¯åè¿›è¡Œè§£ç ï¼ˆå°†æ¶ˆæ¯å¯¹è±¡ååºåˆ—åŒ–ï¼‰ï¼›&lt;/li&gt;
&lt;li&gt;æœåŠ¡ç«¯å­˜æ ¹( server stubï¼‰æ ¹æ®è§£ç ç»“æœè°ƒç”¨æœ¬åœ°çš„æœåŠ¡ï¼›&lt;/li&gt;
&lt;li&gt;æœ¬åœ°æœåŠ¡æ‰§è¡Œå¹¶å°†ç»“æœè¿”å›ç»™æœåŠ¡ç«¯å­˜æ ¹( server stubï¼‰ï¼›&lt;/li&gt;
&lt;li&gt;æœåŠ¡ç«¯å­˜æ ¹( server stubï¼‰å°†è¿”å›ç»“æœæ‰“åŒ…æˆæ¶ˆæ¯ï¼ˆå°†ç»“æœæ¶ˆæ¯å¯¹è±¡åºåˆ—åŒ–ï¼‰ï¼›&lt;/li&gt;
&lt;li&gt;æœåŠ¡ç«¯ï¼ˆserverï¼‰é€šè¿‡socketså°†æ¶ˆæ¯å‘é€åˆ°å®¢æˆ·ç«¯ï¼›&lt;/li&gt;
&lt;li&gt;å®¢æˆ·ç«¯å­˜æ ¹ï¼ˆclient stubï¼‰æ¥æ”¶åˆ°ç»“æœæ¶ˆæ¯ï¼Œå¹¶è¿›è¡Œè§£ç ï¼ˆå°†ç»“æœæ¶ˆæ¯å‘åºåˆ—åŒ–ï¼‰ï¼›&lt;/li&gt;
&lt;li&gt;å®¢æˆ·ç«¯ï¼ˆclientï¼‰å¾—åˆ°æœ€ç»ˆç»“æœã€‚&lt;br&gt;
RPCçš„ç›®æ ‡æ˜¯è¦æŠŠ2ã€3ã€4ã€7ã€8ã€9è¿™äº›æ­¥éª¤éƒ½å°è£…èµ·æ¥ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;ul&gt;
&lt;li&gt;æ³¨æ„ï¼šæ— è®ºæ˜¯ä½•ç§ç±»å‹çš„æ•°æ®ï¼Œæœ€ç»ˆéƒ½éœ€è¦è½¬æ¢æˆäºŒè¿›åˆ¶æµåœ¨ç½‘ç»œä¸Šè¿›è¡Œä¼ è¾“ï¼Œæ•°æ®çš„å‘é€æ–¹éœ€è¦å°†å¯¹è±¡è½¬æ¢ä¸ºäºŒè¿›åˆ¶æµï¼Œè€Œæ•°æ®çš„æ¥æ”¶æ–¹åˆ™éœ€è¦æŠŠäºŒè¿›åˆ¶æµå†æ¢å¤ä¸ºå¯¹è±¡ã€‚
&lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 159; 
			flex-basis: 382px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/prc/1.jpg&#34; data-size=&#34;500x314&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/prc/1.jpg&#34;
			width=&#34;500&#34;
			height=&#34;314&#34;
			srcset=&#34;https://zcj-git520.github.io/p/prc/1_hu92b5144e2fe44c426742bd76f38787bf_37611_480x0_resize_q75_box.jpg 480w, https://zcj-git520.github.io/p/prc/1_hu92b5144e2fe44c426742bd76f38787bf_37611_1024x0_resize_q75_box.jpg 1024w&#34;
			loading=&#34;lazy&#34;
			&gt;
	&lt;/a&gt;
	
&lt;/figure&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;gprc&#34;&gt;gPRC&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;gRPC æ˜¯ä¸€ç§ç°ä»£å¼€æºé«˜æ€§èƒ½è¿œç¨‹è¿‡ç¨‹è°ƒç”¨ (RPC) æ¡†æ¶ï¼Œå¯ä»¥åœ¨ä»»ä½•ç¯å¢ƒä¸­è¿è¡Œã€‚å®ƒå¯ä»¥é€šè¿‡å¯¹è´Ÿè½½å¹³è¡¡ã€è·Ÿè¸ªã€å¥åº·æ£€æŸ¥å’Œèº«ä»½éªŒè¯çš„å¯æ’æ‹”æ”¯æŒï¼Œæœ‰æ•ˆåœ°è¿æ¥æ•°æ®ä¸­å¿ƒå†…å’Œæ•°æ®ä¸­å¿ƒä¹‹é—´çš„æœåŠ¡ã€‚å®ƒè¿˜é€‚ç”¨äºåˆ†å¸ƒå¼è®¡ç®—çš„æœ€åä¸€è‹±é‡Œï¼Œå°†è®¾å¤‡ã€ç§»åŠ¨åº”ç”¨ç¨‹åºå’Œæµè§ˆå™¨è¿æ¥åˆ°åç«¯æœåŠ¡ã€‚&lt;/li&gt;
&lt;li&gt;gRPC æ˜¯åŸºäºHTTP2.0(å¤šè·¯å¤ç”¨,æ¶ˆé™¤äº†çº¿å¤´é˜»å¡)æ ‡å‡†åè®®è‰²è®¾è®¡çš„åŸºäºProtoBufåºåˆ—åŒ–çš„é«˜æ€§èƒ½æ¡†æ¶ã€‚
&lt;a class=&#34;link&#34; href=&#34;http://doc.oschina.net/grpc&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;ã€ŠgRPC å®˜æ–¹æ–‡æ¡£ä¸­æ–‡ç‰ˆã€‹&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;protocol-buffers&#34;&gt;Protocol Buffers&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Protocol Buffers æ˜¯ä¸€ç§è½»ä¾¿é«˜æ•ˆçš„ç»“æ„åŒ–æ•°æ®å­˜å‚¨æ ¼å¼ï¼Œå¯ä»¥ç”¨äºç»“æ„åŒ–æ•°æ®åºåˆ—åŒ–ï¼Œå¾ˆé€‚åˆåšæ•°æ®å­˜å‚¨æˆ– RPC æ•°æ®äº¤æ¢æ ¼å¼ã€‚å®ƒå¯ç”¨äºé€šè®¯åè®®ã€æ•°æ®å­˜å‚¨ç­‰é¢†åŸŸçš„è¯­è¨€æ— å…³ã€å¹³å°æ— å…³ã€å¯æ‰©å±•çš„åºåˆ—åŒ–ç»“æ„æ•°æ®æ ¼å¼&lt;/li&gt;
&lt;li&gt;åºåˆ—åŒ–ï¼šå°†æ•°æ®ç»“æ„æˆ–å¯¹è±¡è½¬æ¢æˆèƒ½è¢«ä¼ è¾“æˆ–è€…å­˜å‚¨ï¼ˆå¦‚äºŒè¿›åˆ¶æ ¼å¼ï¼‰çš„è¿‡ç¨‹ã€‚&lt;/li&gt;
&lt;li&gt;ååºåˆ—åŒ–ï¼šå°†åœ¨åºåˆ—åŒ–è¿‡ç¨‹ä¸­æ‰€ç”Ÿæˆçš„(æ ¼å¼)è½¬æ¢æˆæ•°æ®ç»“æ„æˆ–è€…å¯¹è±¡çš„è¿‡ç¨‹ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;å‚è€ƒæ–‡çŒ®&#34;&gt;å‚è€ƒæ–‡çŒ®ï¼š&lt;/h2&gt;
&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;https://zhuanlan.zhihu.com/p/94983974&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;RPCåŸç†è§£æ&lt;/a&gt;&lt;/p&gt;
</description>
        </item>
        <item>
        <title>RestfulAPI</title>
        <link>https://zcj-git520.github.io/p/restfulapi/</link>
        <pubDate>Wed, 10 Nov 2021 22:00:08 +0800</pubDate>
        
        <guid>https://zcj-git520.github.io/p/restfulapi/</guid>
        <description>&lt;img src="https://zcj-git520.github.io/p/restfulapi/1.jpg" alt="Featured image of post RestfulAPI" /&gt;&lt;h2 id=&#34;restful-api&#34;&gt;Restful API&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;restæ˜¯Representational state Transfer çš„ç¼©å†™ï¼ˆè¡¨è¿°æ€§è½¬æ€ä¼ é€’ï¼‰&lt;/li&gt;
&lt;li&gt;apiæ˜¯åº”ç”¨ç¨‹åºæ¥å£&lt;/li&gt;
&lt;li&gt;Restful APIæ˜¯ä¸€ç§è½¯ä»¶ç»“æ„é£æ ¼ï¼Œè®¾è®¡é£æ ¼ï¼Œè®©è½¯ä»¶æ›´åŠ æ¸…æ™°ã€ç®€æ´ã€æ˜“ç»´æŠ¤ã€‚æ˜¯ä¸€ç§æµè¡Œçš„è½¯ä»¶API
è®¾è®¡é£æ ¼&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;restçš„æŒ‡å¯¼é£æ ¼&#34;&gt;Restçš„æŒ‡å¯¼é£æ ¼&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;å®¢æˆ·ç«¯-æœåŠ¡å™¨ï¼šé€šè¿‡å°†ç”¨æˆ·æ¥å£é—®é¢˜ä¸æ•°æ®å­˜å‚¨é—®é¢˜åˆ†å¼€ï¼Œç®€åŒ–æœåŠ¡å™¨ç»„ä»¶æ¥æé«˜è·¨å¹³å°æ”¾å…¥ç”¨æˆ·æ¥å£çš„
å¯ç§»æ¤æ€§æ€§å¹¶æé«˜å¯ä¼¸ç¼©æ€§&lt;/li&gt;
&lt;li&gt;æ— è½¬æ€ï¼šä»å®¢æˆ·ç«¯åˆ°æœåŠ¡å™¨çš„æ¯ä¸ªè¯·æ±‚éƒ½å¿…é¡»åŒ…å«ç†è§£è¯·æ±‚æ‰€éœ€çš„æ‰€æœ‰ä¿¡æ¯ï¼Œå¹¶ä¸”ä¸èƒ½åˆ©ç”¨æœåŠ¡å™¨ä¸Šä»»ä½•å­˜å‚¨çš„ä¸Šä¸‹æ–‡ã€‚å› æ­¤ï¼Œä¼šè¯çŠ¶æ€å®Œå…¨ä¿ç•™åœ¨å®¢æˆ·ç«¯ä¸Šã€‚&lt;/li&gt;
&lt;li&gt;å¯ç¼“å­˜ï¼šç¼“å­˜çº¦æŸè¦æ±‚å°†å¯¹è¯·æ±‚çš„å“åº”ä¸­çš„æ•°æ®éšå¼æˆ–æ˜¾å¼æ ‡è®°ä¸ºå¯ç¼“å­˜æˆ–ä¸å¯ç¼“å­˜ã€‚å¦‚æœå“åº”æ˜¯å¯ç¼“å­˜çš„ï¼Œåˆ™å®¢æˆ·ç«¯ç¼“å­˜æœ‰æƒé‡ç”¨è¯¥å“åº”æ•°æ®ä»¥ç”¨äºä»¥åçš„ç­‰æ•ˆè¯·æ±‚ã€‚&lt;/li&gt;
&lt;li&gt;ç»Ÿä¸€æ¥å£ï¼šé€šè¿‡å°†é€šç”¨æ€§çš„è½¯ä»¶å·¥ç¨‹åŸç†åº”ç”¨äºç»„ä»¶æ¥å£ï¼Œç®€åŒ–äº†æ•´ä¸ªç³»ç»Ÿæ¶æ„ï¼Œæé«˜äº†äº¤äº’çš„å¯è§æ€§ã€‚ä¸ºäº†è·å¾—ç»Ÿä¸€çš„æ¥å£ï¼Œéœ€è¦å¤šä¸ªæ¶æ„çº¦æŸæ¥æŒ‡å¯¼ç»„ä»¶çš„è¡Œä¸ºã€‚RESTç”±å››ä¸ªæ¥å£çº¦æŸå®šä¹‰ï¼šèµ„æºè¯†åˆ«; é€šè¿‡é™ˆè¿°æ¥å¤„ç†èµ„æº; è‡ªæˆ‘æè¿°æ€§çš„ä¿¡æ¯; å¹¶ä¸”ï¼Œè¶…åª’ä½“ä½œä¸ºåº”ç”¨ç¨‹åºçŠ¶æ€çš„å¼•æ“&lt;/li&gt;
&lt;li&gt;åˆ†å±‚ç³»ç»Ÿï¼šåˆ†å±‚ç³»ç»Ÿé£æ ¼å…è®¸é€šè¿‡çº¦æŸç»„ä»¶è¡Œä¸ºæ¥ä½¿ä½“ç³»ç»“æ„ç”±åˆ†å±‚å±‚ç»„æˆï¼Œè¿™æ ·æ¯ä¸ªç»„ä»¶éƒ½ä¸èƒ½â€œçœ‹åˆ°â€è¶…å‡ºä¸å®ƒä»¬äº¤äº’çš„ç›´æ¥å±‚ã€‚&lt;/li&gt;
&lt;li&gt;æŒ‰éœ€ç¼–ç ï¼ˆå¯é€‰ï¼‰ï¼š RESTå…è®¸é€šè¿‡ä»¥å°ç¨‹åºæˆ–è„šæœ¬çš„å½¢å¼ä¸‹è½½å’Œæ‰§è¡Œä»£ç æ¥æ‰©å±•å®¢æˆ·ç«¯åŠŸèƒ½ã€‚è¿™é€šè¿‡å‡å°‘é¢„å…ˆå®ç°æ‰€éœ€çš„åŠŸèƒ½æ•°é‡æ¥ç®€åŒ–å®¢æˆ·ç«¯&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&#34;restful-æ¶æ„&#34;&gt;RestFul æ¶æ„&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;èµ„æºï¼šç½‘ç»œçš„å®ä½“æˆ–è€…æ˜¯å…·ä½“çš„ä¿¡æ¯ï¼Œä½¿ç”¨URI(ç»Ÿä¸€èµ„æºå®šä½ç¬¦)ï¼ŒURIæ˜¯æ¯ä¸€ä¸ªèµ„æºçš„åœ°å€æˆ–è€…ç‹¬ä¸€æ— äºŒçš„æ˜¯è¯†åˆ«ç¬¦&lt;/li&gt;
&lt;li&gt;è¡¨ç°å±‚ï¼š å¯¹èµ„æºçš„å¤–åœ¨è¡¨ç°ï¼Œå¦‚ï¼šjsonã€xmlã€txtã€äºŒè¿›åˆ¶ç­‰&lt;/li&gt;
&lt;li&gt;è½¬æ€è½¬åŒ–ï¼šäº’è”ç½‘æ˜¯ä¸€ç§æ— è½¬æ€çš„åè®®ï¼Œæ‰€æœ‰çš„çŠ¶æ€éƒ½æ˜¯ä¿å­˜åœ¨æœåŠ¡å™¨ä¸Šï¼Œå®¢æˆ·ç«¯é€šè¿‡
HTTPçš„æ“ä½œæ–¹å¼(GET,POST,PUT,DELETE)ç­‰æ”¹å˜æœåŠ¡å™¨çš„â€œçŠ¶æ€å˜åŒ–â€
&lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 186; 
			flex-basis: 447px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/restfulapi/1.jpg&#34; data-size=&#34;412x221&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/restfulapi/1.jpg&#34;
			width=&#34;412&#34;
			height=&#34;221&#34;
			srcset=&#34;https://zcj-git520.github.io/p/restfulapi/1_hu5d30570469f48ece7400dce081384b39_15097_480x0_resize_q75_box.jpg 480w, https://zcj-git520.github.io/p/restfulapi/1_hu5d30570469f48ece7400dce081384b39_15097_1024x0_resize_q75_box.jpg 1024w&#34;
			loading=&#34;lazy&#34;
			&gt;
	&lt;/a&gt;
	
&lt;/figure&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&#34;restful-apiæ¥å£è§„èŒƒ&#34;&gt;RESTful APIæ¥å£è§„èŒƒ&lt;/h2&gt;
&lt;h3 id=&#34;æ¥å£é£æ ¼&#34;&gt;æ¥å£é£æ ¼&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;è·¯å¾„å’Œå˜é‡å‡é‡‡ç”¨å°é©¼å³°å¼ï¼Œä¾‹å¦‚deviceId&lt;/li&gt;
&lt;li&gt;ä½¿ç”¨HTTPåŠ¨è¯ä½œä¸ºactionæ“ä½œURLèµ„æºï¼ŒåŠ¨è¯ä¸€å¾‹å¤§å†™ã€‚
&lt;ul&gt;
&lt;li&gt;GETï¼šè¯»å–\æŸ¥è¯¢ï¼ˆReadï¼‰&lt;/li&gt;
&lt;li&gt;POSTï¼šæ–°å»ºï¼ˆCreateï¼‰&lt;/li&gt;
&lt;li&gt;PUTï¼šæ›´æ–°ï¼ˆUpdateï¼‰&lt;/li&gt;
&lt;li&gt;PATCHï¼šæ›´æ–°ï¼ˆUpdateï¼‰ï¼Œé€šå¸¸æ˜¯éƒ¨åˆ†æ›´æ–°&lt;/li&gt;
&lt;li&gt;DELETEï¼šåˆ é™¤ï¼ˆDeleteï¼‰&lt;/li&gt;
&lt;li&gt;HEADï¼šè·å–èµ„æºçš„å…ƒæ•°æ®ã€‚&lt;/li&gt;
&lt;li&gt;OPTIONSï¼šè·å–ä¿¡æ¯ï¼Œå…³äºèµ„æºçš„å“ªäº›å±æ€§æ˜¯å®¢æˆ·ç«¯å¯ä»¥æ”¹å˜çš„ã€‚&lt;/li&gt;
&lt;li&gt;5ç§è¯·æ±‚åŠ¨ä½œä¸­ï¼ŒGETã€PUTã€PATCHã€DELETEå‡æ˜¯å¹‚ç­‰çš„ï¼›åªæœ‰POSTæ˜¯éå¹‚ç­‰çš„ã€‚å¹‚ç­‰æ“ä½œçš„ç‰¹ç‚¹æ˜¯å…¶ä»»æ„å¤šæ¬¡æ‰§è¡Œæ‰€äº§ç”Ÿçš„å½±å“å‡ä¸ä¸€æ¬¡æ‰§è¡Œçš„å½±å“ç›¸åŒã€‚&lt;strong&gt;æ˜¯éå¹‚ç­‰æ˜¯åˆ¤æ–­æ¥å£ä½¿ç”¨POSTè¿˜æ˜¯PUTçš„å†³å®šæ¡ä»¶&lt;/strong&gt;ã€‚å¹‚ç­‰çš„ç†è§£è§æœ¬æ–‡é™„å½•ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;å‚æ•°ï¼š
&lt;ul&gt;
&lt;li&gt;PATHï¼ˆè·¯å¾„ï¼‰ï¼š
&lt;ul&gt;
&lt;li&gt;ç‰ˆæœ¬å·æ”¾å…¥PATHï¼Œä¸”åœ¨æœ€å‰
&lt;ul&gt;
&lt;li&gt;å°½é‡ä½¿ç”¨åè¯ï¼Œä¸ä½¿ç”¨åŠ¨è¯ï¼ŒæŠŠæ¯ä¸ªURLçœ‹æˆä¸€ä¸ªèµ„æºï¼Œåç§°éƒ½ç”¨å¤æ•°&lt;/li&gt;
&lt;li&gt;å¾®æœåŠ¡åç§°ä¸æ”¾å…¥PATHä¸­&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Queryå‚æ•°ï¼šä¸»è¦ç”¨åœ¨GETæŸ¥è¯¢ä¸­ï¼Œç®€å•çš„PUTåŠ¨ä½œï¼Œä¹Ÿç”¨Queryå‚æ•°&lt;/li&gt;
&lt;li&gt;Headerså‚æ•°ï¼šå…¬å…±å‚æ•°é€šè¿‡headerä¼ é€’ï¼Œcontent-typeã€authorizationè®¤è¯å¿…å¡«ï¼Œå…¶ä»–ç»Ÿä¸€æŒ‰è°ƒç”¨é“¾è§„èŒƒã€é€Ÿç‡é™åˆ¶è§„èŒƒå¡«å†™ã€‚content-typeåº”è¯¥å›ºå®šä¸º&lt;code&gt;application/json&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;Bodyï¼š
&lt;ul&gt;
&lt;li&gt;ç»Ÿä¸€ä½¿ç”¨jsonæ ¼å¼ï¼Œæ‰€æœ‰è¿”å›éƒ½æ˜¯jsonæ ¼å¼
&lt;ul&gt;
&lt;li&gt;POSTæ‰€æœ‰å‚æ•°é€šè¿‡JSONä¼ é€’&lt;/li&gt;
&lt;li&gt;GETè¯·æ±‚ä¸å…è®¸æœ‰bodyï¼Œ æ‰€æœ‰å‚æ•°é€šè¿‡æ‹¼æ¥åœ¨URLä¹‹åä¼ é€’ï¼Œ&lt;strong&gt;æ‰€æœ‰çš„è¯·æ±‚å‚æ•°éƒ½è¦è¿›è¡Œéµå¾ª&lt;a class=&#34;link&#34; href=&#34;https://link.zhihu.com/?target=https%3A//tools.ietf.org/html/rfc3986&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;RFC 3986&lt;/a&gt;çš„URL Encode&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;DELETEåˆ é™¤å•ä¸ªèµ„æºæ—¶ï¼Œèµ„æºæ ‡è¯†é€šè¿‡pathä¼ é€’ï¼Œæ‰¹é‡åˆ é™¤æ—¶ï¼Œé€šè¿‡åœ¨bodyä¸­ä¼ é€’JSONã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;è¿”å›ç»“æœ
&lt;ul&gt;
&lt;li&gt;çŠ¶æ€ç ï¼šHTTPçŠ¶æ€ç æ ‡å‡†ç”¨æ³•ï¼Œè§åçŠ¶æ€ç è§„èŒƒ&lt;/li&gt;
&lt;li&gt;Bodyè¿”å›ï¼Œåªæä¾›jsonè¿”å›æ ¼å¼&lt;/li&gt;
&lt;li&gt;GETï¼šè¿”å›èµ„æºå¯¹è±¡ï¼Œå®Œæ•´å¯¹è±¡æˆ–é€šè¿‡Queryå‚æ•°å¯è¿‡æ»¤&lt;/li&gt;
&lt;li&gt;POSTï¼šè¿”å›æ–°ç”Ÿæˆçš„èµ„æºå¯¹è±¡ï¼Œå¯èƒ½æ˜¯IDæˆ–å®Œæ•´çš„èµ„æºå¯¹è±¡&lt;/li&gt;
&lt;li&gt;PUTï¼šè¿”å›å®Œæ•´çš„èµ„æºå¯¹è±¡&lt;/li&gt;
&lt;li&gt;DELETEï¼šè¿”å›ä¸€ä¸ªç©ºæ–‡æ¡£&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;è¿‡æ»¤ä¿¡æ¯ï¼šæŸ¥è¯¢åŠæŸ¥è¯¢ç»“æœä½¿ç”¨
&lt;ul&gt;
&lt;li&gt;pageNoï¼šåˆ†é¡µæŸ¥è¯¢æ ‡è¯†ç¬¬å‡ é¡µ&lt;/li&gt;
&lt;li&gt;pageSizeï¼šåˆ†é¡µæŸ¥è¯¢æ ‡è¯†æ¯é¡µå¤šå°‘æ¡æ•°æ®&lt;/li&gt;
&lt;li&gt;beginï¼šå½•åƒ/æˆªå›¾å¼€å§‹æ—¶é—´ï¼ŒUnixæ—¶é—´æˆ³ï¼Œå•ä½ç§’&lt;/li&gt;
&lt;li&gt;endï¼šå½•åƒ/æˆªå›¾ç»“æŸæ—¶é—´ï¼ŒUnixæ—¶é—´æˆ³ï¼Œå•ä½ç§’&lt;/li&gt;
&lt;li&gt;orderbyï¼šæ’åºè§„åˆ™ï¼Œdescæˆ–asc&lt;/li&gt;
&lt;li&gt;qï¼šæœç´¢å…³é”®å­—ï¼ˆuri encodeä¹‹åçš„ï¼‰&lt;/li&gt;
&lt;li&gt;totalCountï¼šæ€»è®°å½•æ•°ï¼Œåˆ†é¡µæŸ¥è¯¢ï¼Œè¿”å›jsonæºå¸¦&lt;/li&gt;
&lt;li&gt;totalPagesï¼šæ€»é¡µæ•°ï¼Œåˆ†é¡µæŸ¥è¯¢ï¼Œè¿”å›jsonæºå¸¦ï¼Œç­‰äºpageæ—¶ï¼Œè¡¨ç¤ºå½“å‰æ˜¯æœ€åä¸€é¡µ&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;å¾®æœåŠ¡å†…éƒ¨ä½¿ç”¨httpåè®®ï¼Œå¯¹å¤–ä½¿ç”¨httpsåè®®&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;è¯¦ç»†è®¾è®¡è¦æ±‚&#34;&gt;è¯¦ç»†è®¾è®¡è¦æ±‚&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;è¾“å…¥å‚æ•°è¦ç²¾ç®€æœ‰æ•ˆ
&lt;ul&gt;
&lt;li&gt;ä¸èƒ½æŠŠå†…éƒ¨å¯¹è±¡ä½œä¸ºæ¥å£å‚æ•°ï¼Œé€šè¿‡DTOè¿›è¡Œè½¬æ¢ï¼›&lt;/li&gt;
&lt;li&gt;requiredçš„å­—æ®µå°½å¯èƒ½å°‘&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;CRUDçš„U(POST)è¦é€šè¿‡ä¸šåŠ¡åˆ†æï¼ˆé¢†åŸŸå»ºæ¨¡ï¼‰å…·ä½“åŒ–æ“ä½œï¼Œä¸è¦æä¾›çµæ´»ä½†æ˜¯æ”¯æŒä¸å…¨é¢çš„æ¥å£&lt;/li&gt;
&lt;li&gt;æŸ¥è¯¢å°½å¯èƒ½æä¾›ä¸°å¯Œçš„æŸ¥è¯¢æ¡ä»¶ï¼Œå¯ä»¥è¿”å›å°½å¯èƒ½è¯¦ç»†çš„ä¿¡æ¯&lt;/li&gt;
&lt;li&gt;åŒç±»èµ„æºå°½å¯èƒ½ç»Ÿä¸€æ¥å£&lt;/li&gt;
&lt;li&gt;é¿å…å¤šçº§ URLï¼Œæ¯”å¦‚è·å–æŸä¸ªä½œè€…çš„æŸä¸€ç±»æ–‡ç« ï¼š
&lt;code&gt;GET /authors/12/categories/2&lt;/code&gt;
è¿™ç§ URL ä¸åˆ©äºæ‰©å±•ï¼Œè¯­ä¹‰ä¹Ÿä¸æ˜ç¡®ï¼Œå¾€å¾€è¦æƒ³ä¸€ä¼šï¼Œæ‰èƒ½æ˜ç™½å«ä¹‰ã€‚
æ›´å¥½çš„åšæ³•æ˜¯ï¼Œé™¤äº†ç¬¬ä¸€çº§ï¼Œå…¶ä»–çº§åˆ«éƒ½ç”¨æŸ¥è¯¢å­—ç¬¦ä¸²è¡¨è¾¾ã€‚
&lt;code&gt;GET /authors/12?categories=2&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;å¦‚ä½•è®¾è®¡æ‰¹é‡å¤„ç†
æŠŠURLè®¾è®¡ä¸º&lt;code&gt;PATCH /authors/batch&lt;/code&gt;ï¼Œä¹Ÿå°±æ˜¯å…·ä½“çš„idä¼ å…¥batchè¡¨ç¤ºæ‰¹é‡ï¼Œå‚æ•°é€šè¿‡bodyä¼ é€’ï¼Œä¾‹å¦‚å¦‚ä¸‹ï¼š&lt;/li&gt;
&lt;/ul&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;{
   {&amp;quot;method&amp;quot;:&amp;quot;DELETE&amp;quot;,&amp;quot;id&amp;quot;:&amp;quot;12&amp;quot;,&amp;quot;value&amp;quot;:&amp;quot;&amp;quot;}
   {&amp;quot;method&amp;quot;:&amp;quot;PUT&amp;quot;,&amp;quot;id&amp;quot;:&amp;quot;23&amp;quot;,&amp;quot;value&amp;quot;:{&amp;quot;name&amp;quot;:&amp;quot;michael&amp;quot;,&amp;quot;group&amp;quot;:&amp;quot;fisrt&amp;quot;,...}}
}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;åœ¨methodä¸­ä¼ é€’HTTPåŠ¨è¯ï¼Œä¸»è¦æ˜¯PUT\DELETEï¼ŒGETé€šè¿‡æŸ¥è¯¢æ¡ä»¶æœ¬èº«å°±æ”¯æŒæ‰¹é‡ï¼ŒPOSTæ˜¯åˆ›å»ºï¼Œå‡ ä¹ä¸éœ€æ‰¹é‡åˆ›å»ºï¼Œè€ŒPUT\DELETEéƒ½æ˜¯å¯¹æŸä¸ªidæ“ä½œï¼ŒåŒæ—¶ä¿®æ”¹æˆ–åˆ é™¤å¤šä¸ªidå°±æ˜¯æ‰¹é‡æ“ä½œï¼›åœ¨idä¸­æ˜ç¡®å…·ä½“çš„idï¼Œvalueåˆ™ä¼ é€’ä¸æ“ä½œå•ä¸ªidä¸€è‡´çš„æ•°æ®ã€‚æ‰¹é‡æ“ä½œçš„è¿”å›bodyä¸ä¼ å…¥bodyä¿æŒä¸€è‡´ï¼Œåªæ˜¯valueå¯èƒ½æ˜¯erroræ•°æ®ä¹Ÿå¯èƒ½æ˜¯PUTçš„ç»“æœæ•°æ®ã€‚é€šè¿‡è¿™ç§è®¾è®¡ï¼Œåœ¨å®ç°æ—¶ï¼Œbatchæ“ä½œå¯ä»¥å¤ç”¨å•ä¸ªidæ“ä½œçš„å¤„ç†è¿‡ç¨‹ã€‚&lt;/p&gt;
&lt;h3 id=&#34;çŠ¶æ€ç è§„èŒƒ&#34;&gt;çŠ¶æ€ç è§„èŒƒ&lt;/h3&gt;
&lt;h4 id=&#34;æ­£ç¡®&#34;&gt;æ­£ç¡®&lt;/h4&gt;
&lt;p&gt;æ¥å£æ­£å¸¸è®¿é—®æƒ…å†µä¸‹ï¼ŒæœåŠ¡å™¨è¿”å›2Ã—Ã—çš„HTTPçŠ¶æ€ç ã€‚
&lt;code&gt;200 OK&lt;/code&gt; ï¼šè¡¨ç¤ºå·²åœ¨å“åº”ä¸­å‘å‡ºã€èµ„æºæ›´æ”¹æˆåŠŸï¼ˆGETã€PUTï¼‰
&lt;code&gt;201 Created&lt;/code&gt;ï¼šè¡¨ç¤ºæ–°èµ„æºè¢«åˆ›å»ºï¼ˆPOSTï¼‰
&lt;code&gt;204 No Content&lt;/code&gt; ï¼šèµ„æºè¢«åˆ é™¤ï¼ˆDELETEï¼‰&lt;/p&gt;
&lt;h4 id=&#34;é”™è¯¯&#34;&gt;é”™è¯¯&lt;/h4&gt;
&lt;p&gt;å½“ç”¨æˆ·è®¿é—®æ¥å£å‡ºé”™æ—¶ï¼ŒæœåŠ¡å™¨ä¼šè¿”å›ç»™ä¸€ä¸ªåˆé€‚çš„4Ã—Ã—æˆ–è€…5Ã—Ã—çš„HTTPçŠ¶æ€ç ï¼›ä»¥åŠä¸€ä¸ªapplication/jsonæ ¼å¼çš„æ¶ˆæ¯ä½“ï¼Œæ¶ˆæ¯ä½“ä¸­åŒ…å«é”™è¯¯ç codeå’Œé”™è¯¯è¯´æ˜messageï¼Œjsonæ ¼å¼å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;{
    &amp;quot;code&amp;quot;:&amp;quot;å†…éƒ¨é”™è¯¯ä»£ç å¯ä»¥æ˜¯æ•°å­—æˆ–Exeptionå­—ç¬¦ä¸²ï¼Œä¾‹å¦‚20003, OAuthException&amp;quot;
    &amp;quot;message&amp;quot;:&amp;quot;æ ¼å¼åŒ–çš„é”™è¯¯ä¿¡æ¯ï¼Œè‹±æ–‡ï¼Œæ­¤messageæ˜¯å¯¹codeçš„æ›´ç»†çš„é”™è¯¯æè¿°ï¼Œå¯ä»¥æŠŠä¸€äº›çŠ¶æ€å˜é‡æ ¼å¼åŒ–åµŒå…¥ã€‚&amp;quot;
}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;è¡¥å……è¯´æ˜ï¼šä»¥ä¸Šé”™è¯¯è¿”å›å…¨è‹±æ–‡ï¼Œè‹¥Webæç¤ºï¼Œç”±webå®¢æˆ·ç«¯å»ºç«‹codeçš„å¤šè¯­è¨€å­—ç¬¦ä¸²è¡¨ï¼ŒæŠŠé”™è¯¯ç è½¬åŒ–ä¸ºå¯¹äºçš„å¤šè¯­è¨€å­—ç¬¦ä¸²ï¼Œå±•ç¤ºå¤šè¯­è¨€æç¤ºã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å‘ç”Ÿé”™è¯¯æ—¶ï¼Œç»å¯¹ä¸è¦è¿”å› 200 çŠ¶æ€ç &lt;/li&gt;
&lt;li&gt;&lt;strong&gt;4Ã—Ã—é”™è¯¯( &lt;code&gt;400=&amp;lt;status code&amp;lt;500&lt;/code&gt; )ä¸ºå®¢æˆ·ç«¯çš„è¯·æ±‚é”™è¯¯ï¼Œéœ€è¦æ ¹æ®å…·ä½“çš„codeåšç›¸åº”çš„æç¤ºå’Œé€»è¾‘å¤„ç†ï¼Œmessageä»…ä¾›å¼€å‘æ—¶å‚è€ƒï¼Œä¸å»ºè®®ä½œä¸ºç”¨æˆ·æç¤ºã€‚&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;5Ã—Ã—é”™è¯¯( &lt;code&gt;500=&amp;lt;status code&lt;/code&gt; )ä¸ºæœåŠ¡å™¨æˆ–ç¨‹åºå‡ºé”™ï¼Œå®¢æˆ·ç«¯åªéœ€è¦æç¤ºâ€œæœåŠ¡å¼‚å¸¸ï¼Œè¯·ç¨åé‡è¯•â€å³å¯ï¼Œè¯¥ç±»é”™è¯¯ä¸åœ¨æ¯ä¸ªæ¥å£ä¸­åˆ—å‡ºã€‚&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;code&gt;400 Bad Request&lt;/code&gt; ï¼šæœåŠ¡å™¨ä¸ç†è§£å®¢æˆ·ç«¯çš„è¯·æ±‚ï¼Œæœªåšä»»ä½•å¤„ç†ã€‚&lt;br&gt;
&lt;code&gt;401 Unauthorized&lt;/code&gt; ï¼šç”¨æˆ·æœªæä¾›èº«ä»½éªŒè¯å‡­æ®ï¼Œæˆ–è€…æ²¡æœ‰é€šè¿‡èº«ä»½éªŒè¯ã€‚&lt;br&gt;
&lt;code&gt;403 Forbidden&lt;/code&gt; ï¼šç”¨æˆ·é€šè¿‡äº†èº«ä»½éªŒè¯ï¼Œä½†æ˜¯ä¸å…·æœ‰è®¿é—®èµ„æºæ‰€éœ€çš„æƒé™ã€‚&lt;br&gt;
&lt;code&gt;404 Not Found&lt;/code&gt; ï¼šæ‰€è¯·æ±‚çš„èµ„æºä¸å­˜åœ¨ï¼Œæˆ–ä¸å¯ç”¨ã€‚&lt;br&gt;
&lt;code&gt;405 Method Not Allowed&lt;/code&gt; ï¼šç”¨æˆ·å·²ç»é€šè¿‡èº«ä»½éªŒè¯ï¼Œä½†æ˜¯æ‰€ç”¨çš„ HTTP æ–¹æ³•ä¸åœ¨ä»–çš„æƒé™ä¹‹å†…ã€‚&lt;br&gt;
&lt;code&gt;410 Gone&lt;/code&gt; ï¼šæ‰€è¯·æ±‚çš„èµ„æºå·²ä»è¿™ä¸ªåœ°å€è½¬ç§»ï¼Œä¸å†å¯ç”¨ã€‚&lt;br&gt;
&lt;code&gt;415 Unsupported Media Type&lt;/code&gt; ï¼šå®¢æˆ·ç«¯è¦æ±‚çš„è¿”å›æ ¼å¼ä¸æ”¯æŒã€‚æ¯”å¦‚ï¼ŒAPI åªèƒ½è¿”å› JSON æ ¼å¼ï¼Œä½†æ˜¯å®¢æˆ·ç«¯è¦æ±‚è¿”å› XML æ ¼å¼ã€‚&lt;br&gt;
&lt;code&gt;422 Unprocessable Entity&lt;/code&gt;  ï¼šå®¢æˆ·ç«¯ä¸Šä¼ çš„é™„ä»¶æ— æ³•å¤„ç†ï¼Œå¯¼è‡´è¯·æ±‚å¤±è´¥ã€‚&lt;br&gt;
&lt;code&gt;429 Too Many Requests&lt;/code&gt; ï¼šå®¢æˆ·ç«¯çš„è¯·æ±‚æ¬¡æ•°è¶…è¿‡é™é¢ã€‚&lt;br&gt;
&lt;code&gt;500 Internal Server Error&lt;/code&gt; ï¼šå®¢æˆ·ç«¯è¯·æ±‚æœ‰æ•ˆï¼ŒæœåŠ¡å™¨å¤„ç†æ—¶å‘ç”Ÿäº†æ„å¤–ã€‚&lt;br&gt;
&lt;code&gt;503 Service Unavailable&lt;/code&gt; ï¼šæœåŠ¡å™¨æ— æ³•å¤„ç†è¯·æ±‚ï¼Œä¸€èˆ¬ç”¨äºç½‘ç«™æˆ–è®¾å¤‡ç»´æŠ¤çŠ¶æ€ã€‚&lt;/p&gt;
&lt;h3 id=&#34;é™„å½•å¹‚ç­‰æ€§&#34;&gt;é™„å½•ï¼šå¹‚ç­‰æ€§&lt;/h3&gt;
&lt;p&gt;å¹‚ç­‰æ€§ï¼šå¹‚ç­‰æ€§æ˜¯åˆ†å¸ƒå¼ç¯å¢ƒä¸‹å¸¸è§çš„é—®é¢˜ï¼›å¹‚ç­‰æ€§æŒ‡çš„æ˜¯å¤šæ¬¡æ“ä½œï¼Œç»“æœæ˜¯ä¸€è‡´çš„ã€‚ï¼ˆå¤šæ¬¡æ“ä½œæ•°æ®åº“æ•°æ®æ˜¯ä¸€è‡´çš„ã€‚ï¼‰&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;GETæ–¹æ³•ç”¨äºè·å–èµ„æºï¼Œä¸åº”æœ‰å‰¯ä½œç”¨ï¼Œæ‰€ä»¥æ˜¯å¹‚ç­‰çš„ã€‚&lt;/li&gt;
&lt;li&gt;DELETEæ–¹æ³•ç”¨äºåˆ é™¤èµ„æºï¼Œæœ‰å‰¯ä½œç”¨ï¼Œä½†å®ƒåº”è¯¥æ»¡è¶³å¹‚ç­‰æ€§ã€‚&lt;/li&gt;
&lt;li&gt;POSTæ‰€å¯¹åº”çš„URIå¹¶éåˆ›å»ºçš„èµ„æºæœ¬èº«ï¼Œè€Œæ˜¯èµ„æºçš„æ¥æ”¶è€…ã€‚æ¯”å¦‚ï¼š POST &lt;a class=&#34;link&#34; href=&#34;http://www.forum.com/articles&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;http://www.forum.com/articles&lt;/a&gt; çš„è¯­ä¹‰æ˜¯åœ¨ &lt;a class=&#34;link&#34; href=&#34;http://www.forum.com/articles&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;http://www.forum.com/articles&lt;/a&gt; ä¸‹åˆ›å»ºä¸€ç¯‡å¸–å­ï¼ŒHTTPå“åº”ä¸­åº”åŒ…å«å¸–å­çš„åˆ›å»ºçŠ¶æ€ä»¥åŠå¸–å­çš„URIã€‚ä¸¤æ¬¡ç›¸åŒçš„POSTè¯·æ±‚ä¼šåœ¨æœåŠ¡å™¨ç«¯åˆ›å»ºä¸¤ä»½èµ„æºï¼Œå®ƒä»¬å…·æœ‰ä¸åŒçš„URIï¼›æ‰€ä»¥ï¼ŒPOSTæ–¹æ³•ä¸å…·å¤‡å¹‚ç­‰æ€§ã€‚&lt;/li&gt;
&lt;li&gt;PUTæ‰€å¯¹åº”çš„URIæ˜¯è¦åˆ›å»ºæˆ–æ›´æ–°çš„èµ„æºæœ¬èº«ã€‚æ¯”å¦‚ï¼š PUT &lt;a class=&#34;link&#34; href=&#34;http://www.forum/articles/4231&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;http://www.forum/articles/4231&lt;/a&gt; çš„è¯­ä¹‰æ˜¯åˆ›å»ºæˆ–æ›´æ–°IDä¸º4231çš„å¸–å­ã€‚å¯¹åŒä¸€URIè¿›è¡Œå¤šæ¬¡PUTçš„å‰¯ä½œç”¨å’Œä¸€æ¬¡PUTæ˜¯ç›¸åŒçš„ï¼›å› æ­¤ï¼ŒPUTæ–¹æ³•å…·æœ‰å¹‚ç­‰æ€§ã€‚&lt;/li&gt;
&lt;li&gt;å¦‚ä½•æŠŠéå¹‚ç­‰çš„POSTæ“ä½œè®¾è®¡ä¸ºå¹‚ç­‰çš„ï¼Œå¯ä»¥å‚åŠ ä¸‹é¢çš„å¸–å­çš„ç¤ºä¾‹ï¼š
&lt;a class=&#34;link&#34; href=&#34;https://www.cnblogs.com/weidagang2046/archive/2011/06/04/idempotence.html&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://www.cnblogs.com/weidagang2046/archive/2011/06/04/idempotence.html&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
        </item>
        <item>
        <title>DockerçŸ¥è¯†æ€»è§ˆ</title>
        <link>https://zcj-git520.github.io/p/docker%E7%9F%A5%E8%AF%86%E6%80%BB%E8%A7%88/</link>
        <pubDate>Fri, 05 Nov 2021 22:00:38 +0800</pubDate>
        
        <guid>https://zcj-git520.github.io/p/docker%E7%9F%A5%E8%AF%86%E6%80%BB%E8%A7%88/</guid>
        <description>&lt;img src="https://zcj-git520.github.io/p/docker%E7%9F%A5%E8%AF%86%E6%80%BB%E8%A7%88/1.jpg" alt="Featured image of post DockerçŸ¥è¯†æ€»è§ˆ" /&gt;&lt;h2 id=&#34;æ¦‚å¿µçŸ¥è¯†&#34;&gt;æ¦‚å¿µçŸ¥è¯†&lt;/h2&gt;
&lt;h3 id=&#34;dockeré•œåƒ&#34;&gt;Dockeré•œåƒ&lt;/h3&gt;
&lt;p&gt;Dockeré•œåƒæ˜¯ç”±æ–‡ä»¶å’Œå…ƒæ•°æ®ç»„æˆçš„ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æ–‡ä»¶ï¼šè¯­è¨€ç¯å¢ƒã€åº“ã€æ‰§è¡Œæ–‡ä»¶
&lt;ul&gt;
&lt;li&gt;ç”±äº Docker ä½¿ç”¨ Union FSï¼Œç›¸åŒçš„å±‚åªéœ€è¦ä¿å­˜ä¸€ä»½å³å¯ï¼Œå› æ­¤å®é™…é•œåƒç¡¬ç›˜å ç”¨ç©ºé—´å¾ˆå¯èƒ½è¦æ¯”è¿™ä¸ªåˆ—è¡¨é•œåƒå¤§å°çš„æ€»å’Œè¦å°çš„å¤šã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;å…ƒæ•°æ®ï¼šç¯å¢ƒå˜é‡ã€ç«¯å£æ˜ å°„ã€å·ç­‰&lt;/li&gt;
&lt;li&gt;é•œåƒä¿¡æ¯ï¼š
&lt;ul&gt;
&lt;li&gt;RESPOSITORYï¼šä»“åº“å&lt;/li&gt;
&lt;li&gt;TAGï¼šæ ‡ç­¾&lt;/li&gt;
&lt;li&gt;IMAGE IDï¼šé•œåƒID&lt;/li&gt;
&lt;li&gt;CREATEDï¼šåˆ›å»ºæ—¶é—´&lt;/li&gt;
&lt;li&gt;SIZEï¼šæ‰€å ç”¨çš„ç©ºé—´&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;è™šæ‚¬é•œåƒ(dangling image)
&lt;ul&gt;
&lt;li&gt;RESPOSITROYåŠTAGéƒ½ä¸º&lt;!-- raw HTML omitted --&gt;&lt;/li&gt;
&lt;li&gt;ä½¿ç”¨docker image prune å¯ä»¥åˆ é™¤&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;å®¹å™¨&#34;&gt;å®¹å™¨&lt;/h3&gt;
&lt;p&gt;å®¹å™¨æ˜¯ä»é•œåƒä¸­åˆ›å»ºï¼Œç»§æ‰¿äº†ä»–ä»¬çš„æ–‡ä»¶ç³»ç»Ÿï¼Œå¹¶ä½¿ç”¨ä»–ä»¬çš„å…ƒæ•°æ®æ¥ç¡®å®šå…¶å¯åŠ¨é…ç½®ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å¯åŠ¨æ—¶ï¼Œè¿è¡Œä¸€ä¸ªè¿›ç¨‹ï¼Œä¸è¿‡å¯æ´¾ç”Ÿå…¶ä»–è¿›ç¨‹ã€‚&lt;/li&gt;
&lt;li&gt;æ–‡ä»¶çš„å˜æ›´é€šè¿‡å†™æ—¶å¤åˆ¶å­˜å‚¨åœ¨å®¹å™¨ä¸­ï¼ŒåŸºç¡€é•œåƒä¸ä¼šå—å½±å“ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;æ•°æ®å·&#34;&gt;æ•°æ®å·&lt;/h3&gt;
&lt;p&gt;æ•°æ®å· æ˜¯ä¸€ä¸ªå¯ä¾›ä¸€ä¸ªæˆ–å¤šä¸ªå®¹å™¨ä½¿ç”¨çš„ç‰¹æ®Šç›®å½•ï¼Œå®ƒç»•è¿‡ UFSï¼Œå¯ä»¥æä¾›å¾ˆå¤šæœ‰ç”¨çš„ç‰¹æ€§ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æ•°æ®å· å¯ä»¥åœ¨å®¹å™¨ä¹‹é—´å…±äº«å’Œé‡ç”¨&lt;/li&gt;
&lt;li&gt;å¯¹ æ•°æ®å· çš„ä¿®æ”¹ä¼šç«‹é©¬ç”Ÿæ•ˆ&lt;/li&gt;
&lt;li&gt;å¯¹ æ•°æ®å· çš„æ›´æ–°ï¼Œä¸ä¼šå½±å“é•œåƒ&lt;/li&gt;
&lt;li&gt;æ•°æ®å· é»˜è®¤ä¼šä¸€ç›´å­˜åœ¨ï¼Œå³ä½¿å®¹å™¨è¢«åˆ é™¤&lt;/li&gt;
&lt;li&gt;æ³¨æ„ï¼šæ•°æ®å· çš„ä½¿ç”¨ï¼Œç±»ä¼¼äº Linux ä¸‹å¯¹ç›®å½•æˆ–æ–‡ä»¶è¿›è¡Œ mountï¼Œé•œåƒä¸­çš„è¢«æŒ‡å®šä¸ºæŒ‚è½½ç‚¹çš„ç›®å½•ä¸­çš„æ–‡ä»¶ä¼šå¤åˆ¶åˆ°æ•°æ®å·ä¸­ï¼ˆä»…æ•°æ®å·ä¸ºç©ºæ—¶ä¼šå¤åˆ¶ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;æ•°æ®å· æ˜¯è¢«è®¾è®¡ç”¨æ¥æŒä¹…åŒ–æ•°æ®çš„ï¼Œå®ƒçš„ç”Ÿå‘½å‘¨æœŸç‹¬ç«‹äºå®¹å™¨ï¼ŒDocker ä¸ä¼šåœ¨å®¹å™¨è¢«åˆ é™¤åè‡ªåŠ¨åˆ é™¤ æ•°æ®å·&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;dockerç½‘ç»œ&#34;&gt;Dockerç½‘ç»œ&lt;/h3&gt;
&lt;p&gt;å½“ Docker å¯åŠ¨æ—¶ï¼Œä¼šè‡ªåŠ¨åœ¨ä¸»æœºä¸Šåˆ›å»ºä¸€ä¸ª docker0 è™šæ‹Ÿç½‘æ¡¥ï¼Œå®é™…ä¸Šæ˜¯ Linux çš„ä¸€ä¸ª bridgeï¼Œå¯ä»¥ç†è§£ä¸ºä¸€ä¸ªè½¯ä»¶äº¤æ¢æœºã€‚å®ƒä¼šåœ¨æŒ‚è½½åˆ°å®ƒçš„ç½‘å£ä¹‹é—´è¿›è¡Œè½¬å‘ã€‚&lt;/p&gt;
&lt;p&gt;åŒæ—¶ï¼ŒDocker éšæœºåˆ†é…ä¸€ä¸ªæœ¬åœ°æœªå ç”¨çš„ç§æœ‰ç½‘æ®µï¼ˆåœ¨ RFC1918 ä¸­å®šä¹‰ï¼‰ä¸­çš„ä¸€ä¸ªåœ°å€ç»™ docker0 æ¥å£ã€‚æ¯”å¦‚å…¸å‹çš„ 172.17.42.1ï¼Œæ©ç ä¸º 255.255.0.0ã€‚æ­¤åå¯åŠ¨çš„å®¹å™¨å†…çš„ç½‘å£ä¹Ÿä¼šè‡ªåŠ¨åˆ†é…ä¸€ä¸ªåŒä¸€ç½‘æ®µï¼ˆ172.17.0.0/16ï¼‰çš„åœ°å€ã€‚&lt;/p&gt;
&lt;p&gt;å½“åˆ›å»ºä¸€ä¸ª Docker å®¹å™¨çš„æ—¶å€™ï¼ŒåŒæ—¶ä¼šåˆ›å»ºäº†ä¸€å¯¹ veth pair æ¥å£ï¼ˆå½“æ•°æ®åŒ…å‘é€åˆ°ä¸€ä¸ªæ¥å£æ—¶ï¼Œå¦å¤–ä¸€ä¸ªæ¥å£ä¹Ÿå¯ä»¥æ”¶åˆ°ç›¸åŒçš„æ•°æ®åŒ…ï¼‰ã€‚è¿™å¯¹æ¥å£ä¸€ç«¯åœ¨å®¹å™¨å†…ï¼Œå³ eth0ï¼›å¦ä¸€ç«¯åœ¨æœ¬åœ°å¹¶è¢«æŒ‚è½½åˆ° docker0 ç½‘æ¡¥ï¼Œåç§°ä»¥ veth å¼€å¤´ï¼ˆä¾‹å¦‚ vethAQI2QTï¼‰ã€‚é€šè¿‡è¿™ç§æ–¹å¼ï¼Œä¸»æœºå¯ä»¥è·Ÿå®¹å™¨é€šä¿¡ï¼Œå®¹å™¨ä¹‹é—´ä¹Ÿå¯ä»¥ç›¸äº’é€šä¿¡ã€‚Docker å°±åˆ›å»ºäº†åœ¨ä¸»æœºå’Œæ‰€æœ‰å®¹å™¨ä¹‹é—´ä¸€ä¸ªè™šæ‹Ÿå…±äº«ç½‘ç»œã€‚
&lt;figure 
	&gt;
	&lt;a href=&#34;https://gblobscdn.gitbook.com/assets%2F-M5xTVjmK7ax94c8ZQcm%2F-M5xT_hHX2g5ldlyp9nm%2F-M5xTloJ8V-9G0aacJWQ%2Fnetwork.png?alt=media&#34; &gt;
		&lt;img src=&#34;https://gblobscdn.gitbook.com/assets%2F-M5xTVjmK7ax94c8ZQcm%2F-M5xT_hHX2g5ldlyp9nm%2F-M5xTloJ8V-9G0aacJWQ%2Fnetwork.png?alt=media&#34;
			
			
			
			loading=&#34;lazy&#34;
			alt=&#34;image&#34;&gt;
	&lt;/a&gt;
	
	&lt;figcaption&gt;image&lt;/figcaption&gt;
	
&lt;/figure&gt;&lt;/p&gt;
&lt;h3 id=&#34;å…¶ä»–çŸ¥è¯†&#34;&gt;å…¶ä»–çŸ¥è¯†&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Docker ä¸æ˜¯è™šæ‹Ÿæœºï¼Œå®¹å™¨ä¸­çš„åº”ç”¨éƒ½åº”è¯¥ä»¥å‰å°æ‰§è¡Œï¼Œè€Œä¸æ˜¯åƒè™šæ‹Ÿæœºã€ç‰©ç†æœºé‡Œé¢é‚£æ ·ï¼Œç”¨ systemd å»å¯åŠ¨åå°æœåŠ¡ï¼Œå®¹å™¨å†…æ²¡æœ‰åå°æœåŠ¡çš„æ¦‚å¿µã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;ä½¿ç”¨é•œåƒçš„å‘½ä»¤å·¥å…·&#34;&gt;ä½¿ç”¨é•œåƒçš„å‘½ä»¤å·¥å…·&lt;/h2&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;å‘½ä»¤&lt;/th&gt;
&lt;th&gt;åŠŸèƒ½&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;docker pull [Registryåœ°å€[:ç«¯å£]/] ä»“åº“å[:æ ‡ç­¾]&lt;/td&gt;
&lt;td&gt;Registry åœ°å€æ‹‰å–é•œåƒ&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Docker run ä»“åº“å:æ ‡ç­¾ [å‘½ä»¤]&lt;/td&gt;
&lt;td&gt;ä»¥å®¹å™¨å½¢å¼è¿è¡Œä¸€ä¸ªDockeré•œåƒ&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Docker run -it ä»“åº“å:æ ‡ç­¾ [å‘½ä»¤]&lt;/td&gt;
&lt;td&gt;-itè¡¨ç¤ºè¿›å…¥äº¤äº’ç»ˆç«¯&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Docker run &amp;ndash;rm ä»“åº“å:æ ‡ç­¾ [å‘½ä»¤]&lt;/td&gt;
&lt;td&gt;&amp;ndash;rmé€€å‡ºååˆ é™¤ï¼Œå¦åˆ™docker ps -açœ‹å¾—åˆ°&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;docker image ls&lt;/td&gt;
&lt;td&gt;åˆ—å‡ºå·²ç»ä¸‹è½½ä¸‹æ¥çš„é•œåƒ&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;docker images&lt;/td&gt;
&lt;td&gt;åŒä¸Š&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;docker image ls [ä»“åº“å][:æ ‡ç­¾]&lt;/td&gt;
&lt;td&gt;åˆ—å‡ºæŒ‡å®šä»“åº“åæˆ–é™„å¸¦æ ‡ç­¾çš„é•œåƒ&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;docker image ls -q&lt;/td&gt;
&lt;td&gt;ä»…åˆ—å‡ºè¡¨æ ¼çš„IMAGE IDåˆ—è¡¨&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;docker image ls -f label=com.example.version=0.1&lt;/td&gt;
&lt;td&gt;-f å¢åŠ è¿‡æ»¤å™¨&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;docker image ls &amp;ndash;format &amp;ldquo;{{.ID}}: {{.Repository}}&amp;rdquo;&lt;/td&gt;
&lt;td&gt;åˆ©ç”¨Goçš„æ¨¡æ¿è¯­æ³•åˆ—å‡ºä¿¡æ¯&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;docker image ls &amp;ndash;digests&lt;/td&gt;
&lt;td&gt;åˆ—å‡ºé•œåƒï¼Œå¢åŠ DIGESTæ‘˜è¦æ˜¾ç¤ºï¼ˆç¡®ä¿å”¯ä¸€ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;docker image rm [é€‰é¡¹] &amp;lt;é•œåƒ1&amp;gt; [&amp;lt;é•œåƒ2&amp;gt; &amp;hellip;]&lt;/td&gt;
&lt;td&gt;åˆ é™¤é•œåƒï¼Œé•œåƒå¯ä»¥æ˜¯IDã€ä»“åº“å:æ ‡ç­¾ï¼Œæ‘˜è¦&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;docker image rm $(docker images -q redis)&lt;/td&gt;
&lt;td&gt;åˆ é™¤æ‰€æœ‰redisåç§°çš„é•œåƒ&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;docker image rm $(docker images -q -f before=é•œåƒ)&lt;/td&gt;
&lt;td&gt;åˆ é™¤æŸä¸ªé•œåƒå‰é¢çš„é•œåƒ&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;docker run &amp;ndash;name webserver -d -p 80:80 nginx&lt;/td&gt;
&lt;td&gt;æŒ‡å®šå®¹å™¨åç§°ä¸ºwebserverï¼Œä¸”é…ç½®ç«¯å£&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;docker exec -it webserver bash&lt;/td&gt;
&lt;td&gt;è¿›å…¥å®¹å™¨ï¼Œæ‰“å¼€bashæ§åˆ¶å°&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;docker commit [é€‰é¡¹] &amp;lt;å®¹å™¨IDæˆ–å®¹å™¨å&amp;gt; [&amp;lt;ä»“åº“å&amp;gt;[:&amp;lt;æ ‡ç­¾&amp;gt;]]&lt;/td&gt;
&lt;td&gt;ä¿å­˜é•œåƒ&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Docker tag&lt;/td&gt;
&lt;td&gt;ç»™ä¸€ä¸ªDockeré•œåƒæ‰“æ ‡ç­¾&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;docker system df&lt;/td&gt;
&lt;td&gt;ä¾¿æ·çš„æŸ¥çœ‹é•œåƒã€å®¹å™¨ã€æ•°æ®å·æ‰€å ç”¨çš„ç©ºé—´&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;docker image prune&lt;/td&gt;
&lt;td&gt;åˆ é™¤è™šæ‚¬é•œåƒ(dangling image)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;docker build [é€‰é¡¹] &amp;lt;ä¸Šä¸‹æ–‡è·¯å¾„/URL/-&amp;gt;&lt;/td&gt;
&lt;td&gt;æ„å»ºé•œåƒ&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;$ docker commit \
    --author &amp;quot;Tao Wang &amp;lt;twang2218@gmail.com&amp;gt;&amp;quot; \
    --message &amp;quot;ä¿®æ”¹äº†é»˜è®¤ç½‘é¡µ&amp;quot; \
    webserver \
    nginx:v2
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&#34;ä½¿ç”¨dockerfileå®šåˆ¶é•œåƒ&#34;&gt;ä½¿ç”¨Dockerfileå®šåˆ¶é•œåƒ&lt;/h3&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;æŒ‡ä»¤&lt;/th&gt;
&lt;th&gt;åŠŸèƒ½&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;FROM &amp;lt;åŸºç¡€é•œåƒ&amp;gt;&lt;/td&gt;
&lt;td&gt;åŸºç¡€é•œåƒ&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;FROM scratch&lt;/td&gt;
&lt;td&gt;ä¸ä»¥ä»»ä½•é•œåƒä¸ºåŸºç¡€ï¼ŒGoè¯­è¨€å¼€å‘çš„åº”ç”¨å¾ˆå¤šä¼šä½¿ç”¨è¿™ç§æ–¹å¼&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;RUN shellæ ¼å¼å‘½ä»¤&lt;/td&gt;
&lt;td&gt;shellå‘½ä»¤è¿½åŠ å±‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;RUN [&amp;ldquo;å¯æ‰§è¡Œæ–‡ä»¶&amp;rdquo;, &amp;ldquo;å‚æ•°1&amp;rdquo;, &amp;ldquo;å‚æ•°2&amp;rdquo;]&lt;/td&gt;
&lt;td&gt;execæ ¼å¼è¿½åŠ å±‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;COPY ./package.json /app/&lt;/td&gt;
&lt;td&gt;å…¶ä¸­.è¡¨ç¤ºä¸Šä¸‹æ–‡ç›®å½•&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;docker build -t nginx:v3 .&lt;/td&gt;
&lt;td&gt;å…¶ä¸­.å°±æ˜¯ä¼ å…¥çš„ä¸Šä¸‹æ–‡ç›®å½•ï¼Œä¸€èˆ¬åŠæ—¶Dockerfileæ–‡ä»¶æ‰€åœ¨ç›®å½•&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;COPY [&amp;ndash;chown=&lt;!-- raw HTML omitted --&gt;:&lt;!-- raw HTML omitted --&gt;] &amp;lt;æºè·¯å¾„&amp;gt;&amp;hellip; &amp;lt;ç›®æ ‡è·¯å¾„&amp;gt;&lt;/td&gt;
&lt;td&gt;å¤åˆ¶ä¸Šä¸‹æ–‡ç›®å½•ä¸­çš„æ–‡ä»¶/ç›®å½•åˆ°é•œåƒä¸­&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;WORKDIR &amp;lt;ç»å¯¹è·¯å¾„&amp;gt;&lt;/td&gt;
&lt;td&gt;æŒ‡å®šæŸä¸ªç»å¯¹è·¯å¾„ä½œä¸ºåç»­çš„ç›¸å¯¹è·¯å¾„&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;ADD [&amp;ndash;chown=&lt;!-- raw HTML omitted --&gt;:&lt;!-- raw HTML omitted --&gt;] &amp;lt;æºè·¯å¾„&amp;gt;&amp;hellip; &amp;lt;ç›®æ ‡è·¯å¾„&amp;gt;&lt;/td&gt;
&lt;td&gt;ä»…æºè‡ªåŠ¨è§£å‹ç¼©æ—¶ä½¿ç”¨&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;CMD &amp;lt;shellå‘½ä»¤&amp;gt;&lt;/td&gt;
&lt;td&gt;å®¹å™¨ä¸»è¿›ç¨‹çš„å¯åŠ¨å‘½ä»¤ï¼Œä¾‹å¦‚ubuntué•œåƒé»˜è®¤çš„CMDæ˜¯/bin/bash&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;CMD [&amp;ldquo;å¯æ‰§è¡Œæ–‡ä»¶&amp;rdquo;, &amp;ldquo;å‚æ•°1&amp;rdquo;, &amp;ldquo;å‚æ•°2&amp;rdquo;&amp;hellip;]&lt;/td&gt;
&lt;td&gt;exec æ ¼å¼å®¹å™¨ä¸»è¿›ç¨‹çš„å¯åŠ¨å‘½ä»¤ï¼Œæ¨èä½¿ç”¨&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;ENTRYPOINT [&amp;ldquo;å¯æ‰§è¡Œæ–‡ä»¶&amp;rdquo;, &amp;ldquo;å‚æ•°1&amp;rdquo;, &amp;ldquo;å‚æ•°2&amp;rdquo;&amp;hellip;]&lt;/td&gt;
&lt;td&gt;å…¥å£ç‚¹ï¼Œé•œåƒå˜æˆå‘½ä»¤ä¸€æ ·ä½¿ç”¨ï¼Œæˆ–è€…è¿è¡Œå‰çš„å‡†å¤‡å·¥ä½œ&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;ENV &lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt;&lt;/td&gt;
&lt;td&gt;ENV è®¾ç½®ç¯å¢ƒå˜é‡&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;ENV &lt;!-- raw HTML omitted --&gt;=&lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt;=&lt;!-- raw HTML omitted --&gt;&amp;hellip;&lt;/td&gt;
&lt;td&gt;ENV è®¾ç½®ç¯å¢ƒå˜é‡&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;ARG &amp;lt;å‚æ•°å&amp;gt;[=&amp;lt;é»˜è®¤å€¼&amp;gt;]&lt;/td&gt;
&lt;td&gt;docker buildä¸­ç”¨&amp;ndash;build-arg &amp;lt;å‚æ•°å&amp;gt;=&amp;lt;å€¼&amp;gt;æ¥è¦†ç›–ï¼Œç”Ÿæ•ˆèŒƒå›´ä¸ºä¸‹ä¸€ä¸ªæŒ‡ä»¤&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;VOLUME [&amp;quot;&amp;lt;è·¯å¾„1&amp;gt;&amp;quot;, &amp;ldquo;&amp;lt;è·¯å¾„2&amp;gt;&amp;rdquo;&amp;hellip;]&lt;/td&gt;
&lt;td&gt;VOLUME å®šä¹‰åŒ¿åå·ï¼Œè¿™æ ·è¿è¡Œæ—¶ï¼Œä¸ä¼šå‘å®¹å™¨å­˜å‚¨å±‚å†™å…¥æ•°æ®ï¼Œè¿è¡Œå‘½ä»¤-vå¯ä»¥è¦†ç›–ä½ç½®&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;VOLUME &amp;lt;è·¯å¾„&amp;gt;&lt;/td&gt;
&lt;td&gt;VOLUME å®šä¹‰åŒ¿åå·&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;EXPOSE &amp;lt;ç«¯å£1&amp;gt; [&amp;lt;ç«¯å£2&amp;gt;&amp;hellip;]&lt;/td&gt;
&lt;td&gt;æš´éœ²ç«¯å£ï¼Œå®¹å™¨è¿è¡Œæ—¶æä¾›æœåŠ¡çš„ç«¯å£ï¼Œè¿™åªæ˜¯ä¸€ä¸ªå£°æ˜&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;WORKDIR &amp;lt;å·¥ä½œç›®å½•è·¯å¾„&amp;gt;&lt;/td&gt;
&lt;td&gt;æŒ‡å®šå·¥ä½œç›®å½•ï¼ˆæˆ–è€…ç§°ä¸ºå½“å‰ç›®å½•ï¼‰ï¼Œå¦‚è¯¥ç›®å½•ä¸å­˜åœ¨ï¼ŒWORKDIR ä¼šå¸®ä½ å»ºç«‹ç›®å½•&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;USER &amp;lt;ç”¨æˆ·å&amp;gt;[:&amp;lt;ç”¨æˆ·ç»„&amp;gt;]&lt;/td&gt;
&lt;td&gt;æŒ‡å®šå½“å‰ç”¨æˆ·ï¼Œè¿™ä¸ªç”¨æˆ·å¿…é¡»æ˜¯äº‹å…ˆå»ºç«‹å¥½çš„&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;HEALTHCHECK [é€‰é¡¹] CMD &amp;lt;å‘½ä»¤&amp;gt;&lt;/td&gt;
&lt;td&gt;è®¾ç½®æ£€æŸ¥å®¹å™¨å¥åº·çŠ¶å†µçš„å‘½ä»¤&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;HEALTHCHECK NONE&lt;/td&gt;
&lt;td&gt;å¦‚æœåŸºç¡€é•œåƒæœ‰å¥åº·æ£€æŸ¥æŒ‡ä»¤ï¼Œä½¿ç”¨è¿™è¡Œå¯ä»¥å±è”½æ‰å…¶å¥åº·æ£€æŸ¥æŒ‡ä»¤\&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;ONBUILD &amp;lt;å…¶å®ƒæŒ‡ä»¤&amp;gt;&lt;/td&gt;
&lt;td&gt;åé¢æŒ‡ä»¤ï¼Œä»¥å½“å‰é•œåƒä¸ºåŸºç¡€é•œåƒæ„å»ºä¸‹ä¸€çº§é•œåƒæ—¶è¢«æ‰§è¡Œã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;LABEL &lt;!-- raw HTML omitted --&gt;=&lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt;=&lt;!-- raw HTML omitted --&gt; &amp;hellip;&lt;/td&gt;
&lt;td&gt;é•œåƒä»¥é”®å€¼å¯¹çš„å½¢å¼æ·»åŠ ä¸€äº›å…ƒæ•°æ®ï¼ˆmetadataï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;SHELL [&amp;ldquo;executable&amp;rdquo;, &amp;ldquo;parameters&amp;rdquo;]&lt;/td&gt;
&lt;td&gt;æŒ‡å®šRUN ENTRYPOINT CMD æŒ‡ä»¤çš„ shellï¼ŒLinux ä¸­é»˜è®¤ä¸º [&amp;quot;/bin/sh&amp;quot;, &amp;ldquo;-c&amp;rdquo;]&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;ç¤ºä¾‹&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;FROM FROM nginx
RUN echo &#39;&amp;lt;h1&amp;gt;Hello, Docker!&amp;lt;/h1&amp;gt;&#39; &amp;gt; /usr/share/nginx/html/index.html
&lt;/code&gt;&lt;/pre&gt;&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;docker build -t nginx:v3 .
&lt;/code&gt;&lt;/pre&gt;&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;FROM debian:stretch

RUN apt-get update
RUN apt-get install -y gcc libc6-dev make wget
RUN wget -O redis.tar.gz &amp;quot;http://download.redis.io/releases/redis-5.0.3.tar.gz&amp;quot;
RUN mkdir -p /usr/src/redis
RUN tar -xzf redis.tar.gz -C /usr/src/redis --strip-components=1
RUN make -C /usr/src/redis
RUN make -C /usr/src/redis install
&lt;/code&gt;&lt;/pre&gt;&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;FROM debian:stretch

RUN set -x; buildDeps=&#39;gcc libc6-dev make wget&#39; \
    &amp;amp;&amp;amp; apt-get update \
    &amp;amp;&amp;amp; apt-get install -y $buildDeps \
    &amp;amp;&amp;amp; wget -O redis.tar.gz &amp;quot;http://download.redis.io/releases/redis-5.0.3.tar.gz&amp;quot; \
    &amp;amp;&amp;amp; mkdir -p /usr/src/redis \
    &amp;amp;&amp;amp; tar -xzf redis.tar.gz -C /usr/src/redis --strip-components=1 \
    &amp;amp;&amp;amp; make -C /usr/src/redis \
    &amp;amp;&amp;amp; make -C /usr/src/redis install \
    &amp;amp;&amp;amp; rm -rf /var/lib/apt/lists/* \
    &amp;amp;&amp;amp; rm redis.tar.gz \
    &amp;amp;&amp;amp; rm -r /usr/src/redis \
    &amp;amp;&amp;amp; apt-get purge -y --auto-remove $buildDeps
&lt;/code&gt;&lt;/pre&gt;&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;COPY package.json /usr/src/app/
&lt;/code&gt;&lt;/pre&gt;&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;COPY hom* /mydir/
COPY hom?.txt /mydir/
&lt;/code&gt;&lt;/pre&gt;&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;COPY --chown=55:mygroup files* /mydir/
COPY --chown=bin files* /mydir/
COPY --chown=1 files* /mydir/
COPY --chown=10:11 files* /mydir/
&lt;/code&gt;&lt;/pre&gt;&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;ADD --chown=55:mygroup files* /mydir/
ADD --chown=bin files* /mydir/
ADD --chown=1 files* /mydir/
ADD --chown=10:11 files* /mydir/
&lt;/code&gt;&lt;/pre&gt;&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;FROM ubuntu:18.04
RUN apt-get update \
    &amp;amp;&amp;amp; apt-get install -y curl \
    &amp;amp;&amp;amp; rm -rf /var/lib/apt/lists/*
ENTRYPOINT [ &amp;quot;curl&amp;quot;, &amp;quot;-s&amp;quot;, &amp;quot;http://myip.ipip.net&amp;quot; ]
&lt;/code&gt;&lt;/pre&gt;&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;FROM ubuntu:18.04
RUN apt-get update \
    &amp;amp;&amp;amp; apt-get install -y curl \
    &amp;amp;&amp;amp; rm -rf /var/lib/apt/lists/*
ENTRYPOINT [ &amp;quot;curl&amp;quot;, &amp;quot;-s&amp;quot;, &amp;quot;http://myip.ipip.net&amp;quot; ]
&lt;/code&gt;&lt;/pre&gt;&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;ENV VERSION=1.0 DEBUG=on \
    NAME=&amp;quot;Happy Feet&amp;quot;
# åé¢çš„æŒ‡ä»¤ä¸­ï¼Œå¯ä»¥é€šè¿‡$VERSIONã€$NAMEæ¥å¼•ç”¨ã€‚åˆ—æŒ‡ä»¤å¯ä»¥æ”¯æŒç¯å¢ƒå˜é‡å±•å¼€ï¼š
# ADDã€COPYã€ENVã€EXPOSEã€FROMã€LABELã€USERã€WORKDIRã€VOLUMEã€STOPSIGNALã€ONBUILDã€RUNã€‚
&lt;/code&gt;&lt;/pre&gt;&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;ARG DOCKER_USERNAME=library

FROM ${DOCKER_USERNAME}/alpine

# åœ¨FROM ä¹‹åä½¿ç”¨å˜é‡ï¼Œå¿…é¡»åœ¨æ¯ä¸ªé˜¶æ®µåˆ†åˆ«æŒ‡å®š
ARG DOCKER_USERNAME=library

RUN set -x ; echo ${DOCKER_USERNAME}

FROM ${DOCKER_USERNAME}/alpine

# åœ¨FROM ä¹‹åä½¿ç”¨å˜é‡ï¼Œå¿…é¡»åœ¨æ¯ä¸ªé˜¶æ®µåˆ†åˆ«æŒ‡å®š
ARG DOCKER_USERNAME=library

RUN set -x ; echo ${DOCKER_USERNAME}
&lt;/code&gt;&lt;/pre&gt;&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;RUN groupadd -r redis &amp;amp;&amp;amp; useradd -r -g redis redis
USER redis
RUN [ &amp;quot;redis-server&amp;quot; ]
&lt;/code&gt;&lt;/pre&gt;&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;FROM nginx
RUN apt-get update &amp;amp;&amp;amp; apt-get install -y curl &amp;amp;&amp;amp; rm -rf /var/lib/apt/lists/*
HEALTHCHECK --interval=5s --timeout=3s \
  CMD curl -fs http://localhost/ || exit 1
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&#34;dockerfileå¤šé˜¶æ®µæ„å»º&#34;&gt;Dockerfileå¤šé˜¶æ®µæ„å»º&lt;/h2&gt;
&lt;p&gt;åœ¨Docker 17.05ä¹‹åï¼Œå¼€å§‹æ”¯æŒå¤šé˜¶æ®µæ„å»º (multistage builds)ã€‚è§£å†³äº†ä¹‹å‰ç¼–å†™2ä¸ªDockerfileçš„æ–¹æ¡ˆï¼Œä¸€ä¸ªDockerfileæŠŠé¡¹ç›®åŠå…¶ä¾èµ–åº“ç¼–è¯‘æµ‹è¯•æ‰“åŒ…ï¼Œä¸€ä¸ªDockerfileæ„å»ºè¿è¡Œé•œåƒåŒ…ï¼ŒæŠŠä¹‹å‰çš„æ„å»ºç»“æœæ‹·è´åˆ°è¿è¡Œç¯å¢ƒã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ as æ¥ä¸ºæŸä¸€é˜¶æ®µå‘½åï¼Œä¾‹å¦‚&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;  FROM golang:alpine as builder
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ä¸€ä¸ªä¸ºgoç¨‹åºï¼Œå¤šé˜¶æ®µæ„å»ºçš„ä¾‹å­ï¼š&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;FROM golang:alpine as builder

RUN apk --no-cache add git

WORKDIR /go/src/github.com/go/helloworld/

RUN go get -d -v github.com/go-sql-driver/mysql

COPY app.go .

RUN CGO_ENABLED=0 GOOS=linux go build -a -installsuffix cgo -o app .

FROM alpine:latest as prod

RUN apk --no-cache add ca-certificates

WORKDIR /root/

COPY --from=0 /go/src/github.com/go/helloworld/app .

CMD [&amp;quot;./app&amp;quot;]
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ä¾‹å¦‚å½“æˆ‘ä»¬åªæƒ³æ„å»º builder é˜¶æ®µçš„é•œåƒæ—¶ï¼Œå¢åŠ  &amp;ndash;target=builder å‚æ•°å³å¯&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;  docker build --target builder -t username/imagename:tag .
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;æ„å»ºæ—¶ä»å…¶ä»–é•œåƒå¤åˆ¶æ–‡ä»¶&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;  COPY --from=nginx:latest /etc/nginx/nginx.conf /nginx.conf
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&#34;æ„å»ºå¤šç§ç³»ç»Ÿæ¶æ„æ”¯æŒçš„-docker-é•œåƒ&#34;&gt;æ„å»ºå¤šç§ç³»ç»Ÿæ¶æ„æ”¯æŒçš„ Docker é•œåƒ&lt;/h2&gt;
&lt;p&gt;å‚è§ï¼šhttps://yeasy.gitbook.io/docker_practice/image/manifest&lt;/p&gt;
&lt;h2 id=&#34;docker-é•œåƒçš„å¯¼å…¥å’Œå¯¼å‡º-docker-save-å’Œ-docker-load&#34;&gt;Docker é•œåƒçš„å¯¼å…¥å’Œå¯¼å‡º docker save å’Œ docker load&lt;/h2&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;å‘½ä»¤ç¤ºä¾‹&lt;/th&gt;
&lt;th&gt;è¯´æ˜&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;docker save alpine -o filename&lt;/td&gt;
&lt;td&gt;æŠŠalphineé•œåƒä¿å­˜åˆ°filenameæ–‡ä»¶&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;docker save alpine&lt;/td&gt;
&lt;td&gt;gzip &amp;gt; alpine-latest.tar.gz&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;docker load -i alpine-latest.tar.gz&lt;/td&gt;
&lt;td&gt;æŠŠalpine-latest.tar.gzé•œåƒå‹ç¼©æ–‡ä»¶å¯¼å…¥åˆ°Dockerç³»ç»Ÿä¸­&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h2 id=&#34;æ“ä½œé•œåƒ&#34;&gt;æ“ä½œé•œåƒ&lt;/h2&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;å‘½ä»¤ç¤ºä¾‹&lt;/th&gt;
&lt;th&gt;è¯´æ˜&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;docker run ubuntu:18.04 /bin/echo &amp;lsquo;Hello world&amp;rsquo;&lt;/td&gt;
&lt;td&gt;é€šè¿‡é•œåƒï¼Œè¾“å‡ºä¸€ä¸ª â€œHello Worldâ€ï¼Œä¹‹åç»ˆæ­¢å®¹å™¨&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;docker run -t -i ubuntu:18.04 /bin/bash&lt;/td&gt;
&lt;td&gt;å¯åŠ¨ä¸€ä¸ª bash ç»ˆç«¯ï¼Œå…è®¸ç”¨æˆ·è¿›è¡Œäº¤äº’&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;docker container start å†å²å®¹å™¨&lt;/td&gt;
&lt;td&gt;å°†ä¸€ä¸ªå·²ç»ç»ˆæ­¢ï¼ˆexitedï¼‰çš„å®¹å™¨å¯åŠ¨è¿è¡Œ&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;docker run -d ubuntu:18.04 /bin/sh -c &amp;ldquo;&amp;hellip;è„šæœ¬&amp;rdquo;&lt;/td&gt;
&lt;td&gt;-då®¹å™¨è¾“å‡ºåˆ°å®¹å™¨ä¸­ï¼Œä¼šè¿”å›ä¸€ä¸ªå”¯ä¸€çš„id&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;docker container ls&lt;/td&gt;
&lt;td&gt;å¯ä»¥çœ‹åˆ°å®¹å™¨idï¼Œè¿è¡Œä¸­çš„&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;docker container ls -a&lt;/td&gt;
&lt;td&gt;æŸ¥çœ‹æ‰€æœ‰å®¹å™¨ï¼ŒåŠ äº†-aåŒ…æ‹¬å·²ç»ç»ˆæ­¢çš„å®¹å™¨&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;docker container logs [container ID or NAMES]&lt;/td&gt;
&lt;td&gt;å¯ä»¥è·å–å®¹å™¨çš„è¾“å‡ºä¿¡æ¯&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;docker container stop [container ID or NAMES]&lt;/td&gt;
&lt;td&gt;ç»ˆæ­¢ä¸€ä¸ªè¿è¡Œä¸­çš„å®¹å™¨&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;docker exec -it 69d1 bash&lt;/td&gt;
&lt;td&gt;è¿›å…¥container IDä»¥69d1å¼€å¤´çš„å®¹å™¨ï¼Œæ‰“å¼€bashï¼Œé€€å‡ºæ—¶ï¼Œå®¹å™¨ç»§ç»­è¿è¡Œ&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;docker attach -it 69d1 bash&lt;/td&gt;
&lt;td&gt;è¿›å…¥container IDä»¥69d1å¼€å¤´çš„å®¹å™¨ï¼Œæ‰“å¼€bashï¼Œé€€å‡ºæ—¶ï¼Œå®¹å™¨åœæ­¢&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;docker export 7691a814370e &amp;gt; ubuntu.tar&lt;/td&gt;
&lt;td&gt;å¯¼å‡ºå®¹å™¨å¿«ç…§åˆ°æœ¬åœ°æ–‡ä»¶&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;cat ubuntu.tar&lt;/td&gt;
&lt;td&gt;docker import - test/ubuntu:v1.0&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;docker import &lt;a class=&#34;link&#34; href=&#34;http://example.com/exampleimage.tgz&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;http://example.com/exampleimage.tgz&lt;/a&gt; example/imagerepo&lt;/td&gt;
&lt;td&gt;é€šè¿‡æŒ‡å®š URL æˆ–è€…æŸä¸ªç›®å½•æ¥å¯¼å…¥&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;docker container rm trusting_newton&lt;/td&gt;
&lt;td&gt;åˆ é™¤ä¸€ä¸ªå¤„äºç»ˆæ­¢çŠ¶æ€çš„NAMESä¸ºtrusting_newtonçš„å®¹å™¨&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;docker container prune&lt;/td&gt;
&lt;td&gt;æ¸…ç†æ‰€æœ‰å¤„äºç»ˆæ­¢çŠ¶æ€çš„å®¹å™¨&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h2 id=&#34;æ•°æ®ç®¡ç†&#34;&gt;æ•°æ®ç®¡ç†&lt;/h2&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;å‘½ä»¤ç¤ºä¾‹&lt;/th&gt;
&lt;th&gt;è¯´æ˜&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;docker volume create my-vol&lt;/td&gt;
&lt;td&gt;åˆ›å»ºä¸€ä¸ªåç§°ä¸ºmy-volçš„æ•°æ®å·ï¼Œå®¿ä¸»æœºé»˜è®¤ç›®å½•/var/lib/docker/volumes/my-vol/_data&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;docker volume ls&lt;/td&gt;
&lt;td&gt;æŸ¥çœ‹æ‰€æœ‰çš„ æ•°æ®å·&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;docker volume inspect my-vol&lt;/td&gt;
&lt;td&gt;åœ¨ä¸»æœºé‡ŒæŸ¥çœ‹æŒ‡å®š æ•°æ®å· çš„ä¿¡æ¯&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;docker run -v my-vol:/usr/share/nginx/html [å…¶ä»–çœç•¥]&lt;/td&gt;
&lt;td&gt;è¿è¡Œæ—¶åŠ è½½my-volæ•°æ®å· åˆ°å®¹å™¨çš„ /usr/share/nginx/html ç›®å½•&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;docker run &amp;ndash;mount source=my-vol,target=/usr/share/nginx/html [å…¶ä»–çœç•¥]&lt;/td&gt;
&lt;td&gt;åŒä¸Šï¼Œå¦ä¸€ç§å†™æ³•&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;docker inspect web&lt;/td&gt;
&lt;td&gt;æŸ¥çœ‹webå®¹å™¨æ—¶ï¼Œå¯ä»¥åœ¨Moutsä¸­æŸ¥çœ‹æ•°æ®å·çš„å…·ä½“ä¿¡æ¯&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;docker volume rm my-vol&lt;/td&gt;
&lt;td&gt;åˆ é™¤æ•°æ®å·&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;docker rm -v &amp;lt;å®¹å™¨IDæˆ–åç§°&amp;gt;&lt;/td&gt;
&lt;td&gt;åˆ é™¤å®¹å™¨æ—¶ï¼ŒåŒæ—¶ç§»é™¤æ•°æ®å·&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;docker volume prune&lt;/td&gt;
&lt;td&gt;æ¸…ç†æ— ä¸»çš„æ•°æ®å·&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;docker -v /src/webapp:/usr/share/nginx/html [å…¶ä»–çœç•¥]&lt;/td&gt;
&lt;td&gt;æŒ‚è½½ä¸€ä¸ªæœ¬åœ°ä¸»æœºçš„ç›®å½•åˆ°å®¹å™¨ä¸­å»&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;docker &amp;ndash;mount type=bind,source=/src/webapp,target=/usr/share/nginx/html [å…¶ä»–çœç•¥]&lt;/td&gt;
&lt;td&gt;åŒä¸Šï¼Œå¦ä¸€ç§ä¸¥æ ¼å†™æ³•&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;-v /src/webapp:/usr/share/nginx/html:ro [å…¶ä»–çœç•¥]&lt;/td&gt;
&lt;td&gt;roè¡¨ç¤ºåªè¯»ï¼Œä¸åŠ è¡¨ç¤ºè¯»å†™&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&amp;ndash;mount type=bind,source=/src/webapp,target=/usr/share/nginx/html,readonly [å…¶ä»–çœç•¥]&lt;/td&gt;
&lt;td&gt;è¡¨ç¤ºåªè¯»&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;-v $HOME/.bash_history:/root/.bash_history  [å…¶ä»–çœç•¥]&lt;/td&gt;
&lt;td&gt;æŒ‚è½½ä¸€ä¸ªæœ¬åœ°ä¸»æœºæ–‡ä»¶ä½œä¸ºæ•°æ®å·&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&amp;ndash;mount type=bind,source=$HOME/.bash_history,target=/root/.bash_history [å…¶ä»–çœç•¥]&lt;/td&gt;
&lt;td&gt;åŒä¸Š&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h2 id=&#34;ä½¿ç”¨ç½‘ç»œ&#34;&gt;ä½¿ç”¨ç½‘ç»œ&lt;/h2&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;å‘½ä»¤&lt;/th&gt;
&lt;th&gt;åŠŸèƒ½&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;docker run -p [å…¶ä»–çœç•¥]&lt;/td&gt;
&lt;td&gt;-péšæœºæ˜ å°„ç«¯å£åˆ°å†…éƒ¨å®¹å™¨å¼€æ”¾çš„ç½‘ç»œç«¯å£&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;docker container ls&lt;/td&gt;
&lt;td&gt;åˆ—è¡¨ä¸­PORTSï¼ˆå¦‚0.0.0.0:32768-&amp;gt;80/tcpï¼‰å‰ä¸€ä¸ªè¡¨ç¤ºå®¿ä¸»æœºç«¯å£&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;docker logs &amp;lt;å®¹å™¨ID&amp;gt;&lt;/td&gt;
&lt;td&gt;ä¸Šé¢å·²æè¿°ï¼ŒæŸ¥çœ‹å®¹å™¨å†…çš„æ‰“å°&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;docker run -p ip:hostPort:containerPort [å…¶ä»–çœç•¥]&lt;/td&gt;
&lt;td&gt;æŒ‡å®šæ˜ å°„ç«¯å£ï¼Œ-på¯ä»¥å¤šæ¬¡ä½¿ç”¨&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;docker run -p ip::containerPort [å…¶ä»–çœç•¥]&lt;/td&gt;
&lt;td&gt;æŒ‡å®šæ˜ å°„ç«¯å£&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;docker run -p hostPort:containerPort [å…¶ä»–çœç•¥]&lt;/td&gt;
&lt;td&gt;æŒ‡å®šæ˜ å°„ç«¯å£&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;docker port &amp;lt;å®¹å™¨ID&amp;gt; &amp;lt;å®¹å™¨ç«¯å£&amp;gt;&lt;/td&gt;
&lt;td&gt;æŸ¥çœ‹å½“å‰æ˜ å°„çš„ç«¯å£é…ç½®ï¼Œå’Œç»‘å®šçš„åœ°å€&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;docker network create -d bridge my-net&lt;/td&gt;
&lt;td&gt;åˆ›å»ºDockerç½‘ç»œï¼Œ-dæŒ‡å®šç±»å‹ï¼Œæœ‰bridge\overlayï¼Œmy-netæ˜¯åç§°&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;mount&lt;/td&gt;
&lt;td&gt;åœ¨å®¹å™¨ä¸­ä½¿ç”¨mountå¯æŸ¥çœ‹æŒ‚è½½ä¿¡æ¯&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;docker run [å…¶ä»–çœç•¥] cat /etc/resolv.conf&lt;/td&gt;
&lt;td&gt;å¯åŠ¨æ—¶ï¼ŒæŸ¥çœ‹DNSé…ç½®&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;docker run [å…¶ä»–çœç•¥] -h HOSTNAME&lt;/td&gt;
&lt;td&gt;è®¾å®šå®¹å™¨çš„ä¸»æœºåï¼Œå†™åˆ°å®¹å™¨å†…çš„/etc/hostname å’Œ/etc/hostsï¼Œå¤–åŒ…çœ‹ä¸åˆ°&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;docker run [å…¶ä»–çœç•¥] &amp;ndash;dns=IP_ADDRESS&lt;/td&gt;
&lt;td&gt;æ·»åŠ  DNS æœåŠ¡å™¨åˆ°å®¹å™¨çš„/etc/resolv.conf ä¸­ï¼Œç­‰åœ¨å®¿ä¸»/etc/hosts ä¸´æ—¶å¢åŠ &lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h2 id=&#34;dockerfileæœ€ä½³å®è·µæŒ‡å—&#34;&gt;Dockerfileæœ€ä½³å®è·µæŒ‡å—&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;ä¸å¸¸å˜åŠ¨çš„éƒ¨åˆ†å†™åœ¨dockerfileä¸Šé¢ï¼Œä»¥ä¾¿åç»­å˜æ›´æ—¶å¯ä»¥åˆ©ç”¨ç¼“å­˜ï¼Œå‡å°‘buildæ—¶é—´ã€‚&lt;/li&gt;
&lt;li&gt;ç¼–å†™ .dockerignore ç¼–è¯‘é•œåƒæ—¶ï¼Œdocker å…ˆè¦å‡†å¤‡ç¼–è¯‘ç”¨çš„contextï¼Œé»˜è®¤æƒ…å†µä¸‹ä¼šæŠŠ Dockerfileæ‰€åœ¨çš„æ‰€åœ¨æ–‡ä»¶å¤¹ä¸‹æ‰€æœ‰æ–‡ä»¶åŒ…å«è¿›å»ï¼Œå¦‚æœä¸æƒ³æŠŠsrcç›®å½•åŒ…å«è¿›å»æ¥åŠ å¿«ç¼–è¯‘é€Ÿåº¦ï¼Œå¯ä»¥æ·»åŠ .dockerignoreï¼Œå†…å®¹å¦‚ä¸‹ src/&lt;/li&gt;
&lt;li&gt;RUN rm xxx åˆ é™¤å‰é¢å±‚çš„æ–‡ä»¶ä¸ä¼šå‡å°é•œåƒå¤§å°ï¼Œå› ä¸ºåŒ…å«æ–‡ä»¶çš„é‚£å±‚ä¼šä¸€ç›´å­˜åœ¨ï¼ŒRUN setåˆå¹¶ä¸ºä¸€å±‚&lt;/li&gt;
&lt;li&gt;å°½é‡ä¸åœ¨dockerfileå»ä¿®æ”¹æ–‡ä»¶æƒé™ï¼Œä¿®æ”¹æƒé™åçš„æ–‡ä»¶ä¼šç”Ÿæˆä¸€ä»½æ–°çš„æ–‡ä»¶å¯¼è‡´é•œåƒå˜å¤§ï¼Œä¿®æ”¹æƒé™æœ€å¥½æœ¬åœ°ç›´æ¥æ”¹å¥½æˆ–å†™åœ¨å¯åŠ¨è„šæœ¬ä¸­(ä¸æ¨è)ã€‚&lt;/li&gt;
&lt;li&gt;åªå¤åˆ¶éœ€è¦çš„ï¼Œå¦‚æœå¯èƒ½ï¼Œé¿å…å¤åˆ¶ã€‚åœ¨å°†æ–‡ä»¶å¤åˆ¶åˆ°é•œåƒä¸­æ—¶ï¼Œè¯·ç¡®ä¿å¯¹è¦å¤åˆ¶çš„å†…å®¹éå¸¸æ˜ç¡®ï¼Œé¿å… COPY . /home/admin/broker è¿™æ ·çš„æ“ä½œï¼Œä½¿ç”¨COPY app/xxx.jar /home/admin/broker&lt;/li&gt;
&lt;li&gt;æ·»åŠ æ–‡ä»¶å¤¹åˆ°æŒ‡å®šç›®å½•ï¼Œæœ€å¥½å¡«å†™ç»å¯¹è·¯å¾„ï¼Œå¦‚æœæƒ³æŠŠkafkaæ–‡ä»¶å¤¹æ·»åŠ åˆ°homeï¼Œè¦å†™æˆADD kafka/ /home/kafka/&lt;/li&gt;
&lt;li&gt;å¤§çš„rpmåŒ…ï¼Œå¦‚æœè¦å®‰è£…åˆ°é•œåƒä¸­ï¼Œå¯ä»¥åšæˆyum æºï¼Œyum install xxä¹‹åyum clean allï¼Œå¦‚æœADD XX.rpm /xxï¼Œè¿™æ ·rpmä¼šä½¿é•œåƒå¢å¤§ã€‚&lt;/li&gt;
&lt;li&gt;å¤§çš„å‹ç¼©åŒ…æœ€å¥½æ˜¯åšæˆå¯ä»¥ä¸‹è½½çš„æ–‡ä»¶ï¼Œä¸‹è½½è§£å‹ååˆ é™¤æºæ–‡ä»¶&lt;/li&gt;
&lt;li&gt;å¤šä¸ªRUNæˆ–è€…ENVæœ€å¥½åˆå¹¶ä¸ºä¸€ä¸ªï¼Œè¿™æ ·ç”Ÿæˆçš„æ–‡ä»¶éƒ½åœ¨åŒä¸€å±‚ï¼Œä¾¿äºä¼˜åŒ–å¤§å°&lt;/li&gt;
&lt;li&gt;å»æ‰ä¸å¿…è¦çš„ç»„ä»¶ï¼Œæ¯”å¦‚ yum install vim ä¸å®‰è£…è¿è¡Œä¸å¿…é¡»å¾—vimï¼Œå¯ä»¥å‡å°é•œåƒä½“ç§¯&lt;/li&gt;
&lt;li&gt;æ¯æ¬¡RUNçš„åé¢é˜¶æ®µåˆ é™¤ä¸å¿…è¦çš„æ–‡ä»¶ï¼Œæ¯”å¦‚ yum install xx å®‰è£…è½¯ä»¶åè¦æ‰§è¡Œ yum clean all æ¸…é™¤ç¼“å­˜ï¼Œå‡å°é•œåƒã€‚&lt;/li&gt;
&lt;li&gt;åŸºç¡€é•œåƒè¦æŒ‡å®šæ˜ç¡®çš„ç‰ˆæœ¬ FROM openjdk:latest å»ºè®®ä½¿ç”¨ FROM openjdk:8-jre-alpine&lt;/li&gt;
&lt;li&gt;åŸºç¡€é•œåƒå¦‚æœå¯èƒ½ï¼Œå°½é‡ä½¿ç”¨å®˜æ–¹å‘å¸ƒçš„ç‰ˆæœ¬ï¼Œç¬¬ä¸‰æ–¹çš„ç‰ˆæœ¬æœ‰è¢«æ¤å…¥ç—…æ¯’çš„é£é™©ï¼Œè€Œä¸”æ²¡æ³•ä¿è¯åŠæ—¶è¡¥ä¸å‡çº§å’Œæ›´æ–°&lt;/li&gt;
&lt;li&gt;åŸºç¡€é•œåƒå°½é‡é€‰æ‹©å°ä½“ç§¯çš„å‘è¡Œç‰ˆæœ¬ï¼Œæ¯”å¦‚åŸºäºalpine linuxåˆ¶ä½œçš„é•œåƒï¼Œ&lt;/li&gt;
&lt;li&gt;åˆ†é˜¶æ®µç¼–è¯‘ï¼Œdocker 17.05 ç‰ˆæœ¬ä»¥åå¼€å§‹æ”¯æŒåˆ†é˜¶æ®µç¼–è¯‘ï¼Œå¯ä»¥ä½¿ç”¨ç¼–è¯‘é•œåƒå»ç¼–è¯‘ï¼Œç”Ÿæˆçš„ç›®æ ‡æ–‡ä»¶å¯¼å…¥åˆ°è¿è¡Œç¯å¢ƒé•œåƒä¸­ï¼Œè¿™æ ·ç¼–è¯‘å‡ºçš„é•œåƒå°±å¯ä»¥ä¸éœ€è¦ä¸€äº›ç¼–è¯‘å·¥å…·ï¼Œç¼–è¯‘ä¾èµ–ï¼Œå»æ‰ç¼–è¯‘ä¸­äº§ç”Ÿçš„æ— ç”¨æ–‡ä»¶&lt;/li&gt;
&lt;li&gt;WORKDIR ä¸º RUN CMD ENTRYPOINTæŒ‡å®šä¸€ä¸ªé»˜è®¤çš„å·¥ä½œç›®å½•&lt;/li&gt;
&lt;li&gt;å¯åŠ¨è„šæœ¬ä¸­æœ€å¥½ä½¿ç”¨ execå»è¿è¡Œç¨‹åº&lt;/li&gt;
&lt;li&gt;ä½¿ç”¨LABELå»æ·»åŠ ä¸€äº›é™„å±ä¿¡æ¯ï¼Œæ¯”å¦‚ä½œè€…ï¼Œè”ç³»æ–¹å¼ï¼Œå†…éƒ¨è½¯ä»¶ç‰ˆæœ¬ä¹‹ç±»&lt;/li&gt;
&lt;li&gt;ä½¿ç”¨HEALTHCHECKæ·»åŠ å¥åº·æ£€æŸ¥ï¼Œåˆ¤æ–­æ‹‰èµ·çš„å®¹å™¨ä¸šåŠ¡æ˜¯å¦æ­£å¸¸&lt;/li&gt;
&lt;/ul&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;FROM golang:1.7.3 AS builder
WORKDIR /go/src/github.com/alexellis/href-counter/
RUN go get -d -v golang.org/x/net/html  
COPY app.go    .
RUN CGO_ENABLED=0 GOOS=linux go build -a -installsuffix cgo -o app .

FROM alpine:latest  
RUN apk --no-cache add ca-certificates
WORKDIR /root/
COPY --from=builder /go/src/github.com/alexellis/href-counter/app .
CMD [&amp;quot;./app&amp;quot;]  
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&#34;docker-å®æˆ˜ä¸ç»ƒä¹ &#34;&gt;Docker å®æˆ˜ä¸ç»ƒä¹ &lt;/h2&gt;
&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;./Docker.pdf&#34; &gt;Docker å®æˆ˜ä¸ç»ƒä¹ &lt;/a&gt;&lt;/p&gt;
</description>
        </item>
        <item>
        <title>Pythonå®‰å…¨æŒ‡å—</title>
        <link>https://zcj-git520.github.io/p/python%E5%AE%89%E5%85%A8%E6%8C%87%E5%8D%97/</link>
        <pubDate>Sat, 30 Oct 2021 22:00:08 +0800</pubDate>
        
        <guid>https://zcj-git520.github.io/p/python%E5%AE%89%E5%85%A8%E6%8C%87%E5%8D%97/</guid>
        <description>&lt;img src="https://zcj-git520.github.io/p/python%E5%AE%89%E5%85%A8%E6%8C%87%E5%8D%97/1.jpg" alt="Featured image of post Pythonå®‰å…¨æŒ‡å—" /&gt;&lt;h2 id=&#34;æ–‡ç« æ¥æº&#34;&gt;æ–‡ç« æ¥æº&lt;/h2&gt;
&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;https://github.com/Tencent/secguide&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;é¹…å‚(è…¾è®¯)ä»£ç å®‰å…¨æŒ‡å—&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&#34;é€šç”¨&#34;&gt;é€šç”¨&lt;/h2&gt;
&lt;h3 id=&#34;åŠ å¯†ç®—æ³•&#34;&gt;åŠ å¯†ç®—æ³•&lt;/h3&gt;
&lt;h4 id=&#34;å¿…é¡»é¿å…ä½¿ç”¨ä¸å®‰å…¨çš„å¯¹ç§°åŠ å¯†ç®—æ³•&#34;&gt;ã€å¿…é¡»ã€‘é¿å…ä½¿ç”¨ä¸å®‰å…¨çš„å¯¹ç§°åŠ å¯†ç®—æ³•&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;DESå’Œ3DESå·²ç»ä¸å†é€‚ç”¨äºç°ä»£åº”ç”¨ç¨‹åºï¼Œåº”æ”¹ä¸ºä½¿ç”¨AESã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;ç¨‹åºæ—¥å¿—&#34;&gt;ç¨‹åºæ—¥å¿—&lt;/h3&gt;
&lt;h4 id=&#34;å»ºè®®å¯¹æ¯ä¸ªé‡è¦è¡Œä¸ºéƒ½è®°å½•æ—¥å¿—&#34;&gt;ã€å»ºè®®ã€‘å¯¹æ¯ä¸ªé‡è¦è¡Œä¸ºéƒ½è®°å½•æ—¥å¿—&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;ç¡®ä¿é‡è¦è¡Œä¸ºéƒ½è®°å½•æ—¥å¿—ï¼Œä¸”å¯é ä¿å­˜6ä¸ªæœˆä»¥ä¸Šã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;122-å»ºè®®ç¦æ­¢å°†æœªç»éªŒè¯çš„ç”¨æˆ·è¾“å…¥ç›´æ¥è®°å½•æ—¥å¿—&#34;&gt;1.2.2 ã€å»ºè®®ã€‘ç¦æ­¢å°†æœªç»éªŒè¯çš„ç”¨æˆ·è¾“å…¥ç›´æ¥è®°å½•æ—¥å¿—&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;å½“æ—¥å¿—æ¡ç›®åŒ…å«æœªç»å‡€åŒ–çš„ç”¨æˆ·è¾“å…¥æ—¶ä¼šå¼•å‘è®°å½•æ³¨å…¥æ¼æ´ã€‚æ¶æ„ç”¨æˆ·ä¼šæ’å…¥ä¼ªé€ çš„æ—¥å¿—æ•°æ®ï¼Œä»è€Œè®©ç³»ç»Ÿç®¡ç†å‘˜ä»¥ä¸ºæ˜¯ç³»ç»Ÿè¡Œä¸ºã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;123-å»ºè®®é¿å…åœ¨æ—¥å¿—ä¸­ä¿å­˜æ•æ„Ÿä¿¡æ¯&#34;&gt;1.2.3 ã€å»ºè®®ã€‘é¿å…åœ¨æ—¥å¿—ä¸­ä¿å­˜æ•æ„Ÿä¿¡æ¯&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;ä¸èƒ½åœ¨æ—¥å¿—ä¿å­˜å¯†ç ï¼ˆåŒ…æ‹¬æ˜æ–‡å¯†ç å’Œå¯†æ–‡å¯†ç ï¼‰ã€å¯†é’¥å’Œå…¶å®ƒæ•æ„Ÿä¿¡æ¯&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;ç³»ç»Ÿå£ä»¤&#34;&gt;ç³»ç»Ÿå£ä»¤&lt;/h3&gt;
&lt;h4 id=&#34;å¿…é¡»ç¦æ­¢ä½¿ç”¨ç©ºå£ä»¤å¼±å£ä»¤å·²æ³„éœ²å£ä»¤&#34;&gt;ã€å¿…é¡»ã€‘ç¦æ­¢ä½¿ç”¨ç©ºå£ä»¤ã€å¼±å£ä»¤ã€å·²æ³„éœ²å£ä»¤&lt;/h4&gt;
&lt;h4 id=&#34;å¿…é¡»å£ä»¤å¼ºåº¦è¦æ±‚&#34;&gt;ã€å¿…é¡»ã€‘å£ä»¤å¼ºåº¦è¦æ±‚&lt;/h4&gt;
&lt;blockquote&gt;
&lt;p&gt;å£ä»¤å¼ºåº¦é¡»åŒæ—¶æ»¡è¶³ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;å¯†ç é•¿åº¦å¤§äº14ä½&lt;/li&gt;
&lt;li&gt;å¿…é¡»åŒ…å«ä¸‹åˆ—å…ƒç´ ï¼šå¤§å°å†™è‹±æ–‡å­—æ¯ã€æ•°å­—ã€ç‰¹æ®Šå­—ç¬¦&lt;/li&gt;
&lt;li&gt;ä¸å¾—ä½¿ç”¨å„ç³»ç»Ÿã€ç¨‹åºçš„é»˜è®¤åˆå§‹å¯†ç &lt;/li&gt;
&lt;li&gt;ä¸èƒ½ä¸æœ€è¿‘6æ¬¡ä½¿ç”¨è¿‡çš„å¯†ç é‡å¤&lt;/li&gt;
&lt;li&gt;ä¸å¾—ä¸å…¶ä»–å¤–éƒ¨ç³»ç»Ÿä½¿ç”¨ç›¸åŒçš„å¯†ç &lt;/li&gt;
&lt;/ol&gt;
&lt;/blockquote&gt;
&lt;h4 id=&#34;å¿…é¡»å£ä»¤å­˜å‚¨å®‰å…¨&#34;&gt;ã€å¿…é¡»ã€‘å£ä»¤å­˜å‚¨å®‰å…¨&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;ç¦æ­¢æ˜æ–‡å­˜å‚¨å£ä»¤&lt;/li&gt;
&lt;li&gt;ç¦æ­¢ä½¿ç”¨å¼±å¯†ç å­¦ç®—æ³•ï¼ˆå¦‚DESå’Œ3DESï¼‰åŠ å¯†å­˜å‚¨å£ä»¤&lt;/li&gt;
&lt;li&gt;ä½¿ç”¨ä¸å¯é€†ç®—æ³•å’Œéšæœºsaltå¯¹å£ä»¤è¿›è¡ŒåŠ å¯†å­˜å‚¨&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;å¿…é¡»ç¦æ­¢ä¼ é€’æ˜æ–‡å£ä»¤&#34;&gt;ã€å¿…é¡»ã€‘ç¦æ­¢ä¼ é€’æ˜æ–‡å£ä»¤&lt;/h4&gt;
&lt;h4 id=&#34;å¿…é¡»ç¦æ­¢åœ¨ä¸å®‰å…¨çš„ä¿¡é“ä¸­ä¼ è¾“å£ä»¤&#34;&gt;ã€å¿…é¡»ã€‘ç¦æ­¢åœ¨ä¸å®‰å…¨çš„ä¿¡é“ä¸­ä¼ è¾“å£ä»¤&lt;/h4&gt;
&lt;h2 id=&#34;é…ç½®ç¯å¢ƒ&#34;&gt;é…ç½®&amp;amp;ç¯å¢ƒ&lt;/h2&gt;
&lt;h3 id=&#34;pythonç‰ˆæœ¬é€‰æ‹©&#34;&gt;Pythonç‰ˆæœ¬é€‰æ‹©&lt;/h3&gt;
&lt;h4 id=&#34;å»ºè®®ä½¿ç”¨python-36çš„ç‰ˆæœ¬&#34;&gt;ã€å»ºè®®ã€‘ä½¿ç”¨Python 3.6+çš„ç‰ˆæœ¬&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;æ–°å¢çš„é¡¹ç›®åº”ä½¿ç”¨ Python 3.6+&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;ä¸ºä»€ä¹ˆè¦è¿™ä¹ˆåšï¼Ÿ&lt;/strong&gt;
ç”±äº Python 2 åœ¨ &lt;a class=&#34;link&#34; href=&#34;https://www.python.org/doc/sunset-python-2/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;2020 å¹´åœæ­¢ç»´æŠ¤&lt;/a&gt;ï¼Œç›¸å…³ç»„ä»¶çš„æ¼æ´ä¸èƒ½å¾—åˆ°åŠæ—¶ä¿®å¤ä¸ç»´æŠ¤&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&#34;ç¬¬ä¸‰æ–¹åŒ…å®‰å…¨&#34;&gt;ç¬¬ä¸‰æ–¹åŒ…å®‰å…¨&lt;/h3&gt;
&lt;h4 id=&#34;å¿…é¡»ç¦æ­¢ä½¿ç”¨ä¸å®‰å…¨çš„ç»„ä»¶&#34;&gt;ã€å¿…é¡»ã€‘ç¦æ­¢ä½¿ç”¨ä¸å®‰å…¨çš„ç»„ä»¶&lt;/h4&gt;
&lt;h3 id=&#34;é…ç½®ä¿¡æ¯&#34;&gt;é…ç½®ä¿¡æ¯&lt;/h3&gt;
&lt;h4 id=&#34;å¿…é¡»å¯†é’¥å­˜å‚¨å®‰å…¨&#34;&gt;ã€å¿…é¡»ã€‘å¯†é’¥å­˜å‚¨å®‰å…¨&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;åœ¨ä½¿ç”¨å¯¹ç§°å¯†ç ç®—æ³•æ—¶ï¼Œéœ€è¦ä¿æŠ¤å¥½åŠ å¯†å¯†é’¥ã€‚å½“ç®—æ³•æ¶‰åŠæ•æ„Ÿã€ä¸šåŠ¡æ•°æ®æ—¶ï¼Œå¯é€šè¿‡éå¯¹ç§°ç®—æ³•åå•†åŠ å¯†å¯†é’¥ã€‚å…¶ä»–è¾ƒä¸ºä¸æ•æ„Ÿçš„æ•°æ®åŠ å¯†ï¼Œå¯ä»¥é€šè¿‡å˜æ¢ç®—æ³•ç­‰æ–¹å¼ä¿æŠ¤å¯†é’¥ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;å¿…é¡»ç¦æ­¢ç¡¬ç¼–ç æ•æ„Ÿé…ç½®&#34;&gt;ã€å¿…é¡»ã€‘ç¦æ­¢ç¡¬ç¼–ç æ•æ„Ÿé…ç½®&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;ç¦æ­¢åœ¨æºç ä¸­ç¡¬ç¼–ç AK/SKã€IPã€æ•°æ®åº“è´¦å¯†ç­‰é…ç½®ä¿¡æ¯&lt;/li&gt;
&lt;li&gt;åº”ä½¿ç”¨é…ç½®ç³»ç»Ÿæˆ–KMSå¯†é’¥ç®¡ç†ç³»ç»Ÿã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;åå°&#34;&gt;åå°&lt;/h2&gt;
&lt;h3 id=&#34;è¾“å…¥éªŒè¯&#34;&gt;è¾“å…¥éªŒè¯&lt;/h3&gt;
&lt;h4 id=&#34;å¿…é¡»æŒ‰ç±»å‹è¿›è¡Œæ•°æ®æ ¡éªŒ&#34;&gt;ã€å¿…é¡»ã€‘æŒ‰ç±»å‹è¿›è¡Œæ•°æ®æ ¡éªŒ&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;æ‰€æœ‰ç¨‹åºå¤–éƒ¨è¾“å…¥çš„å‚æ•°å€¼ï¼Œåº”è¿›è¡Œæ•°æ®æ ¡éªŒã€‚æ ¡éªŒå†…å®¹åŒ…æ‹¬ä½†ä¸é™äºï¼šæ•°æ®é•¿åº¦ã€æ•°æ®èŒƒå›´ã€æ•°æ®ç±»å‹ä¸æ ¼å¼ã€‚æ ¡éªŒä¸é€šè¿‡ï¼Œåº”æ‹’ç»ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;æ¨èä½¿ç”¨ç»„ä»¶ï¼š&lt;a class=&#34;link&#34; href=&#34;https://github.com/pyeve/cerberus&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Cerberus&lt;/a&gt;ã€&lt;a class=&#34;link&#34; href=&#34;https://github.com/Julian/jsonschema&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;jsonschema&lt;/a&gt;ã€&lt;a class=&#34;link&#34; href=&#34;https://docs.djangoproject.com/en/dev/ref/validators/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Django-Validators&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# Cerberusç¤ºä¾‹&lt;/span&gt;
&lt;span class=&#34;n&#34;&gt;v&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Validator&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;({&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;name&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;type&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;string&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}})&lt;/span&gt;
&lt;span class=&#34;n&#34;&gt;v&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;validate&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;({&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;name&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;john doe&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;})&lt;/span&gt;

&lt;span class=&#34;c1&#34;&gt;# jsonschemaç¤ºä¾‹&lt;/span&gt;
&lt;span class=&#34;n&#34;&gt;schema&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
     &lt;span class=&#34;s2&#34;&gt;&amp;#34;type&amp;#34;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;object&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
     &lt;span class=&#34;s2&#34;&gt;&amp;#34;properties&amp;#34;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
         &lt;span class=&#34;s2&#34;&gt;&amp;#34;price&amp;#34;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;type&amp;#34;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;number&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;},&lt;/span&gt;
         &lt;span class=&#34;s2&#34;&gt;&amp;#34;name&amp;#34;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;type&amp;#34;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;string&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;},&lt;/span&gt;
     &lt;span class=&#34;p&#34;&gt;},&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

&lt;span class=&#34;n&#34;&gt;validate&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;instance&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;name&amp;#34;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;Eggs&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;price&amp;#34;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;mf&#34;&gt;34.99&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;},&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;schema&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;schema&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;sqlæ“ä½œ&#34;&gt;SQLæ“ä½œ&lt;/h3&gt;
&lt;h4 id=&#34;å¿…é¡»ä½¿ç”¨å‚æ•°åŒ–æŸ¥è¯¢&#34;&gt;ã€å¿…é¡»ã€‘ä½¿ç”¨å‚æ•°åŒ–æŸ¥è¯¢&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;ä½¿ç”¨å‚æ•°åŒ–SQLè¯­å¥ï¼Œå¼ºåˆ¶åŒºåˆ†æ•°æ®å’Œå‘½ä»¤ï¼Œé¿å…äº§ç”ŸSQLæ³¨å…¥æ¼æ´ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# é”™è¯¯ç¤ºä¾‹&lt;/span&gt;
&lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;mysql.connector&lt;/span&gt;

&lt;span class=&#34;n&#34;&gt;mydb&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;mysql&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;connector&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;connect&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;
&lt;span class=&#34;o&#34;&gt;...&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;...&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;

&lt;span class=&#34;n&#34;&gt;cur&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;mydb&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;cursor&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
&lt;span class=&#34;n&#34;&gt;userid&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;get_id_from_user&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
&lt;span class=&#34;c1&#34;&gt;# ä½¿ç”¨%ç›´æ¥æ ¼å¼åŒ–å­—ç¬¦ä¸²æ‹¼æ¥SQLè¯­å¥&lt;/span&gt;
&lt;span class=&#34;n&#34;&gt;cur&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;execute&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;SELECT `id`, `password` FROM `auth_user` WHERE `id`=&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;%s&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt; &amp;#34;&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;%&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;userid&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,))&lt;/span&gt; 
&lt;span class=&#34;n&#34;&gt;myresult&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;cur&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;fetchall&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# å®‰å…¨ç¤ºä¾‹&lt;/span&gt;
&lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;mysql.connector&lt;/span&gt;

&lt;span class=&#34;n&#34;&gt;mydb&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;mysql&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;connector&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;connect&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;
&lt;span class=&#34;o&#34;&gt;...&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;...&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;span class=&#34;n&#34;&gt;cur&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;mydb&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;cursor&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
&lt;span class=&#34;n&#34;&gt;userid&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;get_id_from_user&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
&lt;span class=&#34;c1&#34;&gt;# å°†å…ƒç»„ä»¥å‚æ•°çš„å½¢å¼ä¼ å…¥&lt;/span&gt;
&lt;span class=&#34;n&#34;&gt;cur&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;execute&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;SELECT `id`, `password` FROM `auth_user` WHERE `id`=&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;%s&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt; &amp;#34;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;userid&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,))&lt;/span&gt;
&lt;span class=&#34;n&#34;&gt;myresult&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;cur&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;fetchall&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ul&gt;
&lt;li&gt;æ¨èä½¿ç”¨ORMæ¡†æ¶æ¥æ“ä½œæ•°æ®åº“ï¼Œå¦‚ï¼šä½¿ç”¨&lt;code&gt;SQLAlchemy&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# å®‰è£…sqlalchemyå¹¶åˆå§‹åŒ–æ•°æ®åº“è¿æ¥&lt;/span&gt;
&lt;span class=&#34;c1&#34;&gt;# pip install sqlalchemy&lt;/span&gt;
&lt;span class=&#34;kn&#34;&gt;from&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;sqlalchemy&lt;/span&gt; &lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;create_engine&lt;/span&gt;
&lt;span class=&#34;c1&#34;&gt;# åˆå§‹åŒ–æ•°æ®åº“è¿æ¥ï¼Œä¿®æ”¹ä¸ºä½ çš„æ•°æ®åº“ç”¨æˆ·åå’Œå¯†ç &lt;/span&gt;
&lt;span class=&#34;n&#34;&gt;engine&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;create_engine&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;mysql+mysqlconnector://user:password@host:port/DATABASE&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# å¼•ç”¨æ•°æ®ç±»å‹&lt;/span&gt;
&lt;span class=&#34;kn&#34;&gt;from&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;sqlalchemy&lt;/span&gt; &lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Column&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;String&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Integer&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Float&lt;/span&gt;
&lt;span class=&#34;kn&#34;&gt;from&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;sqlalchemy.ext.declarative&lt;/span&gt; &lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;declarative_base&lt;/span&gt;

&lt;span class=&#34;n&#34;&gt;Base&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;declarative_base&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
&lt;span class=&#34;c1&#34;&gt;# å®šä¹‰ Player å¯¹è±¡:&lt;/span&gt;
&lt;span class=&#34;k&#34;&gt;class&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;Player&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Base&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt;
    &lt;span class=&#34;c1&#34;&gt;# è¡¨çš„åå­—:&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;__tablename__&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;player&amp;#39;&lt;/span&gt;

    &lt;span class=&#34;c1&#34;&gt;# è¡¨çš„ç»“æ„:&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;player_id&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Column&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Integer&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;primary_key&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;kc&#34;&gt;True&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;autoincrement&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;kc&#34;&gt;True&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;team_id&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Column&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Integer&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;player_name&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Column&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;String&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;255&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;))&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;height&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Column&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Float&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;3&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;))&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# å¢åˆ æ”¹æŸ¥&lt;/span&gt;
&lt;span class=&#34;kn&#34;&gt;from&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;sqlalchemy.orm&lt;/span&gt; &lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;sessionmaker&lt;/span&gt;
&lt;span class=&#34;c1&#34;&gt;# åˆ›å»º DBSession ç±»å‹:&lt;/span&gt;
&lt;span class=&#34;n&#34;&gt;DBSession&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;sessionmaker&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;bind&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;engine&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;span class=&#34;c1&#34;&gt;# åˆ›å»º session å¯¹è±¡:&lt;/span&gt;
&lt;span class=&#34;n&#34;&gt;session&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;DBSession&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;

&lt;span class=&#34;c1&#34;&gt;# å¢:&lt;/span&gt;
&lt;span class=&#34;n&#34;&gt;new_player&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Player&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;team_id&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;101&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;player_name&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;Tom&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;height&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;mf&#34;&gt;1.98&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;span class=&#34;n&#34;&gt;session&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;add&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;new_player&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;span class=&#34;c1&#34;&gt;# åˆ :&lt;/span&gt;
&lt;span class=&#34;n&#34;&gt;row&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;session&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;query&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Player&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;filter&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Player&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;player_name&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;==&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;Tom&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;first&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
&lt;span class=&#34;n&#34;&gt;session&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;delete&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;row&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;span class=&#34;c1&#34;&gt;# æ”¹:&lt;/span&gt;
&lt;span class=&#34;n&#34;&gt;row&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;session&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;query&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Player&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;filter&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Player&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;player_name&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;==&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;Tom&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;first&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
&lt;span class=&#34;n&#34;&gt;row&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;height&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mf&#34;&gt;1.99&lt;/span&gt;
&lt;span class=&#34;c1&#34;&gt;# æŸ¥:&lt;/span&gt;
&lt;span class=&#34;n&#34;&gt;rows&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;session&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;query&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Player&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;filter&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Player&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;height&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;gt;=&lt;/span&gt; &lt;span class=&#34;mf&#34;&gt;1.88&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;all&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;

&lt;span class=&#34;c1&#34;&gt;# æäº¤å³ä¿å­˜åˆ°æ•°æ®åº“:&lt;/span&gt;
&lt;span class=&#34;n&#34;&gt;session&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;commit&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
&lt;span class=&#34;c1&#34;&gt;# å…³é—­ session:&lt;/span&gt;
&lt;span class=&#34;n&#34;&gt;session&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;close&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h4 id=&#34;å¿…é¡»å¯¹å‚æ•°è¿›è¡Œè¿‡æ»¤&#34;&gt;ã€å¿…é¡»ã€‘å¯¹å‚æ•°è¿›è¡Œè¿‡æ»¤&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;å°†æ¥å—åˆ°çš„å¤–éƒ¨å‚æ•°åŠ¨æ€æ‹¼æ¥åˆ°SQLè¯­å¥æ—¶ï¼Œå¿…é¡»å¯¹å‚æ•°è¿›è¡Œå®‰å…¨è¿‡æ»¤ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span class=&#34;k&#34;&gt;def&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;sql_filter&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;sql&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;max_length&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;20&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;dirty_stuff&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\&amp;#34;&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\\&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;/&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;*&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;&amp;#39;&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;=&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;-&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;#&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;;&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;&amp;lt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;&amp;gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;+&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; 
                   &lt;span class=&#34;s2&#34;&gt;&amp;#34;&amp;amp;&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;$&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;(&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;)&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;%&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;@&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;,&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;stuff&lt;/span&gt; &lt;span class=&#34;ow&#34;&gt;in&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;dirty_stuff&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;sql&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;sql&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;replace&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;stuff&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;x&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;sql&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[:&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;max_length&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;æ‰§è¡Œå‘½ä»¤&#34;&gt;æ‰§è¡Œå‘½ä»¤&lt;/h3&gt;
&lt;h4 id=&#34;å»ºè®®é¿å…ç›´æ¥è°ƒç”¨å‡½æ•°æ‰§è¡Œç³»ç»Ÿå‘½ä»¤&#34;&gt;ã€å»ºè®®ã€‘é¿å…ç›´æ¥è°ƒç”¨å‡½æ•°æ‰§è¡Œç³»ç»Ÿå‘½ä»¤&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;ç›¸å…³åŠŸèƒ½çš„å®ç°åº”é¿å…ç›´æ¥è°ƒç”¨ç³»ç»Ÿå‘½ä»¤ï¼ˆå¦‚&lt;code&gt;os.system()&lt;/code&gt;ã€&lt;code&gt;os.popen()&lt;/code&gt;ã€&lt;code&gt;subprocess.call()&lt;/code&gt;ç­‰ï¼‰ï¼Œä¼˜å…ˆä½¿ç”¨å…¶ä»–åŒç±»æ“ä½œè¿›è¡Œä»£æ›¿ï¼Œæ¯”å¦‚ï¼šé€šè¿‡æ–‡ä»¶ç³»ç»ŸAPIè¿›è¡Œæ–‡ä»¶æ“ä½œè€Œéç›´æ¥è°ƒç”¨æ“ä½œç³»ç»Ÿå‘½ä»¤&lt;/li&gt;
&lt;li&gt;å¦‚è¯„ä¼°æ— æ³•é¿å…ï¼Œæ‰§è¡Œå‘½ä»¤åº”é¿å…æ‹¼æ¥å¤–éƒ¨æ•°æ®ï¼ŒåŒæ—¶è¿›è¡Œæ‰§è¡Œå‘½ä»¤çš„ç™½åå•é™åˆ¶ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;å¿…é¡»è¿‡æ»¤ä¼ å…¥å‘½ä»¤æ‰§è¡Œå‡½æ•°çš„å­—ç¬¦&#34;&gt;ã€å¿…é¡»ã€‘è¿‡æ»¤ä¼ å…¥å‘½ä»¤æ‰§è¡Œå‡½æ•°çš„å­—ç¬¦&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;ç¨‹åºè°ƒç”¨å„ç±»å‡½æ•°æ‰§è¡Œç³»ç»Ÿå‘½ä»¤æ—¶ï¼Œå¦‚æœæ¶‰åŠçš„å‘½ä»¤ç”±å¤–éƒ¨ä¼ å…¥ï¼Œè¿‡æ»¤ä¼ å…¥å‘½ä»¤æ‰§è¡Œå‡½æ•°çš„å­—ç¬¦ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;os&lt;/span&gt;
&lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;sys&lt;/span&gt;
&lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;shlex&lt;/span&gt;

&lt;span class=&#34;n&#34;&gt;domain&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;sys&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;argv&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;
&lt;span class=&#34;c1&#34;&gt;# æ›¿æ¢å¯ä»¥ç”¨æ¥æ³¨å…¥å‘½ä»¤çš„å­—ç¬¦ä¸ºç©º&lt;/span&gt;
&lt;span class=&#34;n&#34;&gt;badchars&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\n&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;amp;;|&amp;#39;&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\&amp;#34;&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;$()`-&amp;#34;&lt;/span&gt;
&lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;char&lt;/span&gt; &lt;span class=&#34;ow&#34;&gt;in&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;badchars&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;domain&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;domain&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;replace&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;char&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34; &amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;

&lt;span class=&#34;n&#34;&gt;result&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;os&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;system&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;nslookup &amp;#34;&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;shlex&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;quote&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;domain&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;))&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;xmlè¯»å†™&#34;&gt;XMLè¯»å†™&lt;/h3&gt;
&lt;h4 id=&#34;å¿…é¡»ç¦ç”¨å¤–éƒ¨å®ä½“çš„æ–¹æ³•&#34;&gt;ã€å¿…é¡»ã€‘ç¦ç”¨å¤–éƒ¨å®ä½“çš„æ–¹æ³•&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;ç¦ç”¨å¤–éƒ¨å®ä½“çš„æ–¹æ³•ï¼Œæ¥é¢„é˜²XXEæ”»å‡»ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span class=&#34;kn&#34;&gt;from&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;lxml&lt;/span&gt; &lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;etree&lt;/span&gt;
  
&lt;span class=&#34;n&#34;&gt;xmlData&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;etree&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;parse&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;xmlSource&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;etree&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;XMLParser&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;resolve_entities&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;kc&#34;&gt;False&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;))&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;æ–‡ä»¶æ“ä½œ&#34;&gt;æ–‡ä»¶æ“ä½œ&lt;/h3&gt;
&lt;h4 id=&#34;å¿…é¡»æ–‡ä»¶ç±»å‹é™åˆ¶&#34;&gt;ã€å¿…é¡»ã€‘æ–‡ä»¶ç±»å‹é™åˆ¶&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;é€šè¿‡ç™½åå•å¯¹ä¸Šä¼ æˆ–è€…ä¸‹è½½çš„æ–‡ä»¶ç±»å‹ã€å¤§å°è¿›è¡Œä¸¥æ ¼æ ¡éªŒã€‚ä»…å…è®¸ä¸šåŠ¡æ‰€éœ€æ–‡ä»¶ç±»å‹ä¸Šä¼ ï¼Œé¿å…ä¸Šä¼ æœ¨é©¬ã€WebShellç­‰æ–‡ä»¶ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;os&lt;/span&gt;
  
&lt;span class=&#34;n&#34;&gt;ALLOWED_EXTENSIONS&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;txt&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;jpg&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;png&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;
  
&lt;span class=&#34;k&#34;&gt;def&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;allowed_file&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;filename&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;.&amp;#39;&lt;/span&gt; &lt;span class=&#34;ow&#34;&gt;in&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;filename&lt;/span&gt; &lt;span class=&#34;ow&#34;&gt;and&lt;/span&gt; 
        &lt;span class=&#34;s1&#34;&gt;&amp;#39;..&amp;#39;&lt;/span&gt; &lt;span class=&#34;ow&#34;&gt;not&lt;/span&gt; &lt;span class=&#34;ow&#34;&gt;in&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;filename&lt;/span&gt; &lt;span class=&#34;ow&#34;&gt;and&lt;/span&gt; 
        &lt;span class=&#34;n&#34;&gt;os&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;path&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;splitext&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;filename&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;lower&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;ow&#34;&gt;in&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ALLOWED_EXTENSIONS&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt;
        
        &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;filename&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;None&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h4 id=&#34;å¿…é¡»ç¦æ­¢å¤–éƒ¨æ–‡ä»¶å­˜å‚¨äºå¯æ‰§è¡Œç›®å½•&#34;&gt;ã€å¿…é¡»ã€‘ç¦æ­¢å¤–éƒ¨æ–‡ä»¶å­˜å‚¨äºå¯æ‰§è¡Œç›®å½•&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;ç¦æ­¢å¤–éƒ¨æ–‡ä»¶å­˜å‚¨äºWEBå®¹å™¨çš„å¯æ‰§è¡Œç›®å½•ï¼ˆappBaseï¼‰ã€‚å»ºè®®ä½¿ç”¨ &lt;a class=&#34;link&#34; href=&#34;https://docs.python.org/3/library/tempfile.html&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;tempfile&lt;/a&gt; åº“å¤„ç†ä¸´æ—¶æ–‡ä»¶å’Œä¸´æ—¶ç›®å½•ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;å¿…é¡»é¿å…è·¯å¾„ç©¿è¶Š&#34;&gt;ã€å¿…é¡»ã€‘é¿å…è·¯å¾„ç©¿è¶Š&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;ä¿å­˜åœ¨æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿæ—¶ï¼Œå¿…é¡»å¯¹è·¯å¾„è¿›è¡Œåˆæ³•æ ¡éªŒï¼Œé¿å…ç›®å½•ç©¿è¶Šæ¼æ´&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;os&lt;/span&gt;

&lt;span class=&#34;n&#34;&gt;upload_dir&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;/tmp/upload/&amp;#39;&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;# é¢„æœŸçš„ä¸Šä¼ ç›®å½•&lt;/span&gt;
&lt;span class=&#34;n&#34;&gt;file_name&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;../../etc/hosts&amp;#39;&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;# ç”¨æˆ·ä¼ å…¥çš„æ–‡ä»¶å&lt;/span&gt;
&lt;span class=&#34;n&#34;&gt;absolute_path&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;os&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;path&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;join&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;upload_dir&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;file_name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;# /tmp/upload/../../etc/hosts&lt;/span&gt;
&lt;span class=&#34;n&#34;&gt;normalized_path&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;os&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;path&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;normpath&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;absolute_path&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;# /etc/hosts&lt;/span&gt;
&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;ow&#34;&gt;not&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;normalized_path&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;startswith&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;upload_dir&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;# æ£€æŸ¥æœ€ç»ˆè·¯å¾„æ˜¯å¦åœ¨é¢„æœŸçš„ä¸Šä¼ ç›®å½•ä¸­&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;raise&lt;/span&gt; &lt;span class=&#34;ne&#34;&gt;IOError&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h4 id=&#34;å»ºè®®é¿å…è·¯å¾„æ‹¼æ¥&#34;&gt;ã€å»ºè®®ã€‘é¿å…è·¯å¾„æ‹¼æ¥&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;æ–‡ä»¶ç›®å½•é¿å…å¤–éƒ¨å‚æ•°æ‹¼æ¥ã€‚ä¿å­˜æ–‡ä»¶ç›®å½•å»ºè®®åå°å†™æ­»å¹¶å¯¹æ–‡ä»¶åè¿›è¡Œæ ¡éªŒï¼ˆå­—ç¬¦ç±»å‹ã€é•¿åº¦ï¼‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;å»ºè®®æ–‡ä»¶åhashåŒ–å¤„ç†&#34;&gt;ã€å»ºè®®ã€‘æ–‡ä»¶åhashåŒ–å¤„ç†&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;å»ºè®®æ–‡ä»¶ä¿å­˜æ—¶ï¼Œå°†æ–‡ä»¶åæ›¿æ¢ä¸ºéšæœºå­—ç¬¦ä¸²ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;uuid&lt;/span&gt;

&lt;span class=&#34;k&#34;&gt;def&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;random_filename&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;filename&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;ext&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;os&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;path&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;splitext&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;filename&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;new_filename&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;uuid&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;uuid4&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;hex&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ext&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;new_filename&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;ç½‘ç»œè¯·æ±‚&#34;&gt;ç½‘ç»œè¯·æ±‚&lt;/h3&gt;
&lt;h4 id=&#34;å¿…é¡»é™å®šè®¿é—®ç½‘ç»œèµ„æºåœ°å€èŒƒå›´&#34;&gt;ã€å¿…é¡»ã€‘é™å®šè®¿é—®ç½‘ç»œèµ„æºåœ°å€èŒƒå›´&lt;/h4&gt;
&lt;p&gt;å½“ç¨‹åºéœ€è¦ä»ç”¨æˆ·æŒ‡å®šçš„&lt;code&gt;URLåœ°å€è·å–ç½‘é¡µæ–‡æœ¬å†…å®¹&lt;/code&gt;ã€&lt;code&gt;åŠ è½½æŒ‡å®šåœ°å€çš„å›¾ç‰‡&lt;/code&gt;ã€&lt;code&gt;è¿›è¡Œä¸‹è½½&lt;/code&gt;ç­‰æ“ä½œæ—¶ï¼Œéœ€è¦å¯¹URLåœ°å€è¿›è¡Œå®‰å…¨æ ¡éªŒï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;åªå…è®¸HTTPæˆ–HTTPSåè®®&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;è§£æç›®æ ‡URLï¼Œè·å–å…¶host&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;è§£æhostï¼Œè·å–hostæŒ‡å‘çš„IPåœ°å€è½¬æ¢æˆlongå‹&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;æ£€æŸ¥IPåœ°å€æ˜¯å¦ä¸ºå†…ç½‘IP&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# ä»¥RFCå®šä¹‰çš„ä¸“æœ‰ç½‘ç»œä¸ºä¾‹ï¼Œå¦‚æœ‰è‡ªå®šä¹‰ç§æœ‰ç½‘æ®µäº¦åº”åŠ å…¥ç¦æ­¢è®¿é—®åˆ—è¡¨ã€‚&lt;/span&gt;
&lt;span class=&#34;mf&#34;&gt;10.0.0.0&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;8&lt;/span&gt;
&lt;span class=&#34;mf&#34;&gt;172.16.0.0&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;12&lt;/span&gt;
&lt;span class=&#34;mf&#34;&gt;192.168.0.0&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;16&lt;/span&gt;
&lt;span class=&#34;mf&#34;&gt;127.0.0.0&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;8&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ol start=&#34;5&#34;&gt;
&lt;li&gt;
&lt;p&gt;è¯·æ±‚URL&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å¦‚æœæœ‰è·³è½¬ï¼Œè·³è½¬åæ‰§è¡Œ1ï¼Œå¦åˆ™å¯¹URLå‘èµ·è¯·æ±‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;å“åº”è¾“å‡º&#34;&gt;å“åº”è¾“å‡º&lt;/h3&gt;
&lt;h4 id=&#34;å¿…é¡»è®¾ç½®æ­£ç¡®çš„httpå“åº”åŒ…ç±»å‹&#34;&gt;ã€å¿…é¡»ã€‘è®¾ç½®æ­£ç¡®çš„HTTPå“åº”åŒ…ç±»å‹&lt;/h4&gt;
&lt;p&gt;å“åº”åŒ…çš„HTTPå¤´â€œContent-Typeâ€å¿…é¡»æ­£ç¡®é…ç½®å“åº”åŒ…çš„ç±»å‹ï¼Œç¦æ­¢éHTMLç±»å‹çš„å“åº”åŒ…è®¾ç½®ä¸ºâ€œtext/htmlâ€ã€‚&lt;/p&gt;
&lt;h4 id=&#34;å¿…é¡»è®¾ç½®å®‰å…¨çš„httpå“åº”å¤´&#34;&gt;ã€å¿…é¡»ã€‘è®¾ç½®å®‰å…¨çš„HTTPå“åº”å¤´&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;X-Content-Type-Options&lt;/p&gt;
&lt;p&gt;æ·»åŠ â€œX-Content-Type-Optionsâ€å“åº”å¤´å¹¶å°†å…¶å€¼è®¾ç½®ä¸ºâ€œnosniff â€&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;HttpOnly
æ§åˆ¶ç”¨æˆ·ç™»é‰´æƒçš„Cookieå­—æ®µ åº”å½“è®¾ç½®HttpOnlyå±æ€§ä»¥é˜²æ­¢è¢«XSSæ¼æ´/JavaScriptæ“çºµæ³„æ¼ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;X-Frame-Options&lt;/p&gt;
&lt;p&gt;è®¾ç½®X-Frame-Optionså“åº”å¤´ï¼Œå¹¶æ ¹æ®éœ€æ±‚åˆç†è®¾ç½®å…¶å…è®¸èŒƒå›´ã€‚è¯¥å¤´ç”¨äºæŒ‡ç¤ºæµè§ˆå™¨ç¦æ­¢å½“å‰é¡µé¢åœ¨frameã€ iframeã€embedç­‰æ ‡ç­¾ä¸­å±•ç°ã€‚ä»è€Œé¿å…ç‚¹å‡»åŠ«æŒé—®é¢˜ã€‚å®ƒæœ‰ä¸‰ä¸ªå¯é€‰çš„å€¼: DENY: æµè§ˆå™¨ä¼šæ‹’ç»å½“å‰é¡µé¢åŠ  è½½ä»»ä½•frameé¡µé¢; SAMEORIGIN:åˆ™frameé¡µé¢çš„åœ°å€åªèƒ½ä¸ºåŒæºåŸŸåä¸‹çš„é¡µé¢ ALLOW-FROM origin:å¯ä»¥å®š ä¹‰å…è®¸frameåŠ è½½çš„é¡µé¢åœ°å€ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;å¿…é¡»å¯¹å¤–è¾“å‡ºé¡µé¢åŒ…å«ç¬¬ä¸‰æ–¹æ•°æ®æ—¶é¡»è¿›è¡Œç¼–ç å¤„ç†&#34;&gt;ã€å¿…é¡»ã€‘å¯¹å¤–è¾“å‡ºé¡µé¢åŒ…å«ç¬¬ä¸‰æ–¹æ•°æ®æ—¶é¡»è¿›è¡Œç¼–ç å¤„ç†&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;å½“å“åº”â€œContent-Typeâ€ä¸ºâ€œtext/htmlâ€ç±»å‹æ—¶ï¼Œéœ€è¦å¯¹å“åº”ä½“è¿›è¡Œç¼–ç å¤„ç†&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# æ¨èä½¿ç”¨mozillaç»´æŠ¤çš„bleachåº“æ¥è¿›è¡Œè¿‡æ»¤&lt;/span&gt;
&lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;bleach&lt;/span&gt;
&lt;span class=&#34;n&#34;&gt;bleach&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;clean&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;an &amp;lt;script&amp;gt;evil()&amp;lt;/script&amp;gt; example&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;span class=&#34;c1&#34;&gt;# u&amp;#39;an &amp;amp;lt;script&amp;amp;gt;evil()&amp;amp;lt;/script&amp;amp;gt; example&amp;#39;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;æ•°æ®è¾“å‡º&#34;&gt;æ•°æ®è¾“å‡º&lt;/h3&gt;
&lt;h4 id=&#34;å¿…é¡»æ•æ„Ÿæ•°æ®åŠ å¯†å­˜å‚¨&#34;&gt;ã€å¿…é¡»ã€‘æ•æ„Ÿæ•°æ®åŠ å¯†å­˜å‚¨&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;æ•æ„Ÿæ•°æ®åº”ä½¿ç”¨SHA2ã€RSAç­‰ç®—æ³•è¿›è¡ŒåŠ å¯†å­˜å‚¨&lt;/li&gt;
&lt;li&gt;æ•æ„Ÿæ•°æ®åº”ä½¿ç”¨ç‹¬ç«‹çš„å­˜å‚¨å±‚ï¼Œå¹¶åœ¨è®¿é—®å±‚å¼€å¯è®¿é—®æ§åˆ¶&lt;/li&gt;
&lt;li&gt;åŒ…å«æ•æ„Ÿä¿¡æ¯çš„ä¸´æ—¶æ–‡ä»¶æˆ–ç¼“å­˜ä¸€æ—¦ä¸å†éœ€è¦åº”ç«‹åˆ»åˆ é™¤&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;å¿…é¡»æ•æ„Ÿä¿¡æ¯å¿…é¡»ç”±åå°è¿›è¡Œè„±æ•å¤„ç†&#34;&gt;ã€å¿…é¡»ã€‘æ•æ„Ÿä¿¡æ¯å¿…é¡»ç”±åå°è¿›è¡Œè„±æ•å¤„ç†&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;æ•æ„Ÿä¿¡æ¯é¡»å†åå°è¿›è¡Œè„±æ•åè¿”å›ï¼Œç¦æ­¢æ¥å£è¿”å›æ•æ„Ÿä¿¡æ¯äº¤ç”±å‰ç«¯/å®¢æˆ·ç«¯è¿›è¡Œè„±æ•å¤„ç†ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;å¿…é¡»é«˜æ•æ„Ÿä¿¡æ¯ç¦æ­¢å­˜å‚¨å±•ç¤º&#34;&gt;ã€å¿…é¡»ã€‘é«˜æ•æ„Ÿä¿¡æ¯ç¦æ­¢å­˜å‚¨ã€å±•ç¤º&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;å£ä»¤ã€å¯†ä¿ç­”æ¡ˆã€ç”Ÿç†æ ‡è¯†ç­‰é‰´æƒä¿¡æ¯ç¦æ­¢å±•ç¤º&lt;/li&gt;
&lt;li&gt;éé‡‘èç±»ä¸šåŠ¡ï¼Œä¿¡ç”¨å¡cvvç åŠæ—¥å¿—ç¦æ­¢å­˜å‚¨&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;å¿…é¡»ä¸ªäººæ•æ„Ÿä¿¡æ¯è„±æ•å±•ç¤º&#34;&gt;ã€å¿…é¡»ã€‘ä¸ªäººæ•æ„Ÿä¿¡æ¯è„±æ•å±•ç¤º&lt;/h4&gt;
&lt;p&gt;åœ¨æ»¡è¶³ä¸šåŠ¡éœ€æ±‚çš„æƒ…å†µä¸‹ï¼Œä¸ªäººæ•æ„Ÿä¿¡æ¯éœ€è„±æ•å±•ç¤ºï¼Œå¦‚ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;èº«ä»½è¯åªæ˜¾ç¤ºç¬¬ä¸€ä½å’Œæœ€åä¸€ä½å­—ç¬¦ï¼Œå¦‚3****************1ã€‚&lt;/li&gt;
&lt;li&gt;ç§»åŠ¨ç”µè¯å·ç éšè—ä¸­é—´6ä½å­—ç¬¦ï¼Œå¦‚134******48ã€‚&lt;/li&gt;
&lt;li&gt;å·¥ä½œåœ°å€/å®¶åº­åœ°å€æœ€å¤šæ˜¾ç¤ºåˆ°â€œåŒºâ€ä¸€çº§ã€‚&lt;/li&gt;
&lt;li&gt;é“¶è¡Œå¡å·ä»…æ˜¾ç¤ºæœ€å4ä½å­—ç¬¦ï¼Œå¦‚************8639&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;å¿…é¡»éšè—åå°åœ°å€&#34;&gt;ã€å¿…é¡»ã€‘éšè—åå°åœ°å€&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;è‹¥ç¨‹åºå¯¹å¤–æä¾›äº†ç™»å½•åå°åœ°å€ï¼Œåº”ä½¿ç”¨éšæœºå­—ç¬¦ä¸²éšè—åœ°å€ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# ä¸è¦é‡‡å–è¿™ç§æ–¹å¼&lt;/span&gt;
&lt;span class=&#34;n&#34;&gt;admin_login_url&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;xxxx/login&amp;#34;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# å®‰å…¨ç¤ºä¾‹&lt;/span&gt;
&lt;span class=&#34;n&#34;&gt;admin_login_url&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;xxxx/ranD0Str&amp;#34;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;æƒé™ç®¡ç†&#34;&gt;æƒé™ç®¡ç†&lt;/h3&gt;
&lt;h4 id=&#34;å¿…é¡»é»˜è®¤é‰´æƒ&#34;&gt;ã€å¿…é¡»ã€‘é»˜è®¤é‰´æƒ&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;é™¤éèµ„æºå®Œå…¨å¯å¯¹å¤–å¼€æ”¾ï¼Œå¦åˆ™ç³»ç»Ÿé»˜è®¤è¿›è¡Œèº«ä»½è®¤è¯ï¼ˆä½¿ç”¨ç™½åå•çš„æ–¹å¼æ”¾å¼€ä¸éœ€è¦è®¤è¯çš„æ¥å£æˆ–é¡µé¢ï¼‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;####ã€å¿…é¡»ã€‘æˆæƒéµå¾ªæœ€å°æƒé™åŸåˆ™&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ç¨‹åºé»˜è®¤ç”¨æˆ·åº”ä¸å…·å¤‡ä»»ä½•æ“ä½œæƒé™ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;å¿…é¡»é¿å…è¶Šæƒè®¿é—®&#34;&gt;ã€å¿…é¡»ã€‘é¿å…è¶Šæƒè®¿é—®&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;å¯¹äºéå…¬å…±æ“ä½œï¼Œåº”å½“æ ¡éªŒå½“å‰è®¿é—®è´¦å·è¿›è¡Œæ“ä½œæƒé™ï¼ˆå¸¸è§äºCMSï¼‰å’Œæ•°æ®æƒé™æ ¡éªŒã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;ol&gt;
&lt;li&gt;éªŒè¯å½“å‰ç”¨æˆ·çš„ç™»å½•æ€ï¼›&lt;/li&gt;
&lt;li&gt;ä»å¯ä¿¡ç»“æ„ä¸­è·å–ç»è¿‡æ ¡éªŒçš„å½“å‰è¯·æ±‚è´¦å·çš„èº«ä»½ä¿¡æ¯ï¼ˆå¦‚ï¼šsessionï¼‰ï¼Œç¦æ­¢ä»ç”¨æˆ·è¯·æ±‚å‚æ•°æˆ–Cookieä¸­è·å–å¤–éƒ¨ä¼ å…¥ä¸å¯ä¿¡ç”¨æˆ·èº«ä»½ç›´æ¥è¿›è¡ŒæŸ¥è¯¢ï¼›&lt;/li&gt;
&lt;li&gt;æ ¡éªŒå½“å‰ç”¨æˆ·æ˜¯å¦å…·å¤‡è¯¥æ“ä½œæƒé™ï¼›&lt;/li&gt;
&lt;li&gt;æ ¡éªŒå½“å‰ç”¨æˆ·æ˜¯å¦å…·å¤‡æ‰€æ“ä½œæ•°æ®çš„æƒé™ï¼›&lt;/li&gt;
&lt;li&gt;æ ¡éªŒå½“å‰æ“ä½œæ˜¯å¦è´¦æˆ·æ˜¯å¦é¢„æœŸè´¦æˆ·ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h4 id=&#34;å»ºè®®åŠæ—¶æ¸…ç†ä¸éœ€è¦çš„æƒé™&#34;&gt;ã€å»ºè®®ã€‘åŠæ—¶æ¸…ç†ä¸éœ€è¦çš„æƒé™&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;ç¨‹åºåº”å®šæœŸæ¸…ç†éå¿…éœ€ç”¨æˆ·çš„æƒé™ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;å¼‚å¸¸å¤„ç†&#34;&gt;å¼‚å¸¸å¤„ç†&lt;/h3&gt;
&lt;h4 id=&#34;å¿…é¡»ä¸å‘å¯¹å¤–é”™è¯¯æç¤º&#34;&gt;ã€å¿…é¡»ã€‘ä¸å‘å¯¹å¤–é”™è¯¯æç¤º&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;åº”åˆç†ä½¿ç”¨&lt;code&gt;try/except/finally&lt;/code&gt; å¤„ç†ç³»ç»Ÿå¼‚å¸¸ï¼Œé¿å…å‡ºé”™ä¿¡æ¯è¾“å‡ºåˆ°å‰ç«¯ã€‚&lt;/li&gt;
&lt;li&gt;å¯¹å¤–ç¯å¢ƒç¦æ­¢å¼€å¯debugæ¨¡å¼ï¼Œæˆ–å°†ç¨‹åºè¿è¡Œæ—¥å¿—è¾“å‡ºåˆ°å‰ç«¯ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;å¿…é¡»ç¦æ­¢å¼‚å¸¸æŠ›å‡ºæ•æ„Ÿä¿¡æ¯&#34;&gt;ã€å¿…é¡»ã€‘ç¦æ­¢å¼‚å¸¸æŠ›å‡ºæ•æ„Ÿä¿¡æ¯&lt;/h4&gt;
&lt;h3 id=&#34;flaskå®‰å…¨&#34;&gt;Flaskå®‰å…¨&lt;/h3&gt;
&lt;h4 id=&#34;å¿…é¡»ç”Ÿäº§ç¯å¢ƒå…³é—­è°ƒè¯•æ¨¡å¼&#34;&gt;ã€å¿…é¡»ã€‘ç”Ÿäº§ç¯å¢ƒå…³é—­è°ƒè¯•æ¨¡å¼&lt;/h4&gt;
&lt;h4 id=&#34;å»ºè®®éµå¾ªflaskå®‰å…¨è§„èŒƒ&#34;&gt;ã€å»ºè®®ã€‘éµå¾ªFlaskå®‰å…¨è§„èŒƒ&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;å‚è€ƒFlaskæ–‡æ¡£ä¸­çš„å®‰å…¨æ³¨æ„äº‹é¡¹ &lt;a class=&#34;link&#34; href=&#34;https://flask.palletsprojects.com/en/latest/security/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://flask.palletsprojects.com/en/latest/security/&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;djangoå®‰å…¨&#34;&gt;Djangoå®‰å…¨&lt;/h3&gt;
&lt;h4 id=&#34;å¿…é¡»ç”Ÿäº§ç¯å¢ƒå…³é—­è°ƒè¯•æ¨¡å¼-1&#34;&gt;ã€å¿…é¡»ã€‘ç”Ÿäº§ç¯å¢ƒå…³é—­è°ƒè¯•æ¨¡å¼&lt;/h4&gt;
&lt;p&gt;####ã€å»ºè®®ã€‘ä¿æŒDjangoè‡ªå¸¦çš„å®‰å…¨ç‰¹æ€§å¼€å¯&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;ä¿æŒDjangoè‡ªå¸¦çš„å®‰å…¨ç‰¹æ€§å¼€å¯ &lt;a class=&#34;link&#34; href=&#34;https://docs.djangoproject.com/en/3.0/topics/security/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://docs.djangoproject.com/en/3.0/topics/security/&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;åœ¨é»˜è®¤é…ç½®ä¸‹ï¼ŒDjangoè‡ªå¸¦çš„å®‰å…¨ç‰¹æ€§å¯¹XSSã€CSRFã€SQLæ³¨å…¥ã€ç‚¹å‡»åŠ«æŒç­‰ç±»å‹æ¼æ´å¯ä»¥èµ·åˆ°è¾ƒå¥½é˜²æŠ¤æ•ˆæœã€‚åº”å°½é‡é¿å…å…³é—­è¿™äº›å®‰å…¨ç‰¹æ€§ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
</description>
        </item>
        <item>
        <title>c/c&#43;&#43;å®‰å…¨æŒ‡å—</title>
        <link>https://zcj-git520.github.io/p/c/c-%E5%AE%89%E5%85%A8%E6%8C%87%E5%8D%97/</link>
        <pubDate>Thu, 28 Oct 2021 22:00:08 +0800</pubDate>
        
        <guid>https://zcj-git520.github.io/p/c/c-%E5%AE%89%E5%85%A8%E6%8C%87%E5%8D%97/</guid>
        <description>&lt;img src="https://zcj-git520.github.io/p/c/c-%E5%AE%89%E5%85%A8%E6%8C%87%E5%8D%97/1.jpg" alt="Featured image of post c/c&#43;&#43;å®‰å…¨æŒ‡å—" /&gt;&lt;h2 id=&#34;æ–‡ç« æ¥æº&#34;&gt;æ–‡ç« æ¥æº&lt;/h2&gt;
&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;https://github.com/Tencent/secguide&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;é¹…å‚(è…¾è®¯)ä»£ç å®‰å…¨æŒ‡å—&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&#34;é€šç”¨å®‰å…¨æŒ‡å—&#34;&gt;é€šç”¨å®‰å…¨æŒ‡å—&lt;/h2&gt;
&lt;h3 id=&#34;ccä½¿ç”¨é”™è¯¯&#34;&gt;C/C++ä½¿ç”¨é”™è¯¯&lt;/h3&gt;
&lt;h4 id=&#34;å¿…é¡»ä¸å¾—ç›´æ¥ä½¿ç”¨æ— é•¿åº¦é™åˆ¶çš„å­—ç¬¦æ‹·è´å‡½æ•°&#34;&gt;ã€å¿…é¡»ã€‘ä¸å¾—ç›´æ¥ä½¿ç”¨æ— é•¿åº¦é™åˆ¶çš„å­—ç¬¦æ‹·è´å‡½æ•°&lt;/h4&gt;
&lt;p&gt;ä¸åº”ç›´æ¥ä½¿ç”¨legacyçš„å­—ç¬¦ä¸²æ‹·è´ã€è¾“å…¥å‡½æ•°ï¼Œå¦‚strcpyã€strcatã€sprintfã€wcscpyã€mbscpyç­‰ï¼Œè¿™äº›å‡½æ•°çš„ç‰¹å¾æ˜¯ï¼šå¯ä»¥è¾“å‡ºä¸€é•¿ä¸²å­—ç¬¦ä¸²ï¼Œè€Œä¸é™åˆ¶é•¿åº¦ã€‚å¦‚æœç¯å¢ƒå…è®¸ï¼Œåº”å½“ä½¿ç”¨å…¶_så®‰å…¨ç‰ˆæœ¬æ›¿ä»£ï¼Œæˆ–è€…ä½¿ç”¨nç‰ˆæœ¬å‡½æ•°ï¼ˆå¦‚ï¼šsnprintfï¼Œvsnprintfï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;è‹¥ä½¿ç”¨å½¢å¦‚sscanfä¹‹ç±»çš„å‡½æ•°æ—¶ï¼Œåœ¨å¤„ç†å­—ç¬¦ä¸²è¾“å…¥æ—¶åº”å½“é€šè¿‡%10sè¿™æ ·çš„æ–¹å¼æ¥ä¸¥æ ¼é™åˆ¶å­—ç¬¦ä¸²é•¿åº¦ï¼ŒåŒæ—¶ç¡®ä¿å­—ç¬¦ä¸²æœ«å°¾æœ‰\0ã€‚å¦‚æœç¯å¢ƒå…è®¸ï¼Œåº”å½“ä½¿ç”¨_så®‰å…¨ç‰ˆæœ¬ã€‚&lt;/p&gt;
&lt;p&gt;ä½†æ˜¯æ³¨æ„ï¼Œè™½ç„¶MSVC 2015æ—¶é»˜è®¤å¼•å…¥ç»“å°¾ä¸º0ç‰ˆæœ¬çš„&lt;code&gt;snprintf&lt;/code&gt;ï¼ˆè¡Œä¸ºç­‰åŒäºC99å®šä¹‰çš„&lt;code&gt;snprintf&lt;/code&gt;ï¼‰ã€‚ä½†æ›´æ—©æœŸçš„ç‰ˆæœ¬ä¸­ï¼ŒMSVCçš„&lt;code&gt;snprintf&lt;/code&gt;å¯èƒ½æ˜¯&lt;code&gt;_snprintf&lt;/code&gt;çš„å®ã€‚è€Œ&lt;code&gt;_snprintf&lt;/code&gt;æ˜¯ä¸ä¿è¯\0ç»“å°¾çš„ï¼ˆè§æœ¬èŠ‚ååŠéƒ¨åˆ†ï¼‰ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-c++&#34; data-lang=&#34;c++&#34;&gt;&lt;span class=&#34;err&#34;&gt;ï¼ˆ&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;MSVC&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;ï¼‰&lt;/span&gt;
&lt;span class=&#34;n&#34;&gt;Beginning&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;with&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;the&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;UCRT&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;in&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Visual&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Studio&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;2015&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;and&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Windows&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;10&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;snprintf&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;is&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;no&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;longer&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;identical&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;to&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;_snprintf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;The&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;snprintf&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;function&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;behavior&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;is&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;now&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;C99&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;standard&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;compliant&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;

&lt;span class=&#34;err&#34;&gt;ä»&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Visual&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Studio&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;2015&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;å’Œ&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Windows&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;10&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;ä¸­çš„&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;UCRTå¼€å§‹&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;ï¼Œ&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;snprintfä¸å†ä¸_snprintfç›¸åŒ&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;ã€‚&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;snprintfå‡½æ•°è¡Œä¸ºç°åœ¨ç¬¦åˆC99æ ‡å‡†&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;ã€‚&lt;/span&gt;

&lt;span class=&#34;err&#34;&gt;è¯·å‚è€ƒï¼š&lt;/span&gt;&lt;span class=&#34;nl&#34;&gt;https&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;//docs.microsoft.com/en-us/cpp/c-runtime-library/reference/snprintf-snprintf-snprintf-l-snwprintf-snwprintf-l?redirectedfrom=MSDN&amp;amp;view=vs-2019
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å› æ­¤ï¼Œåœ¨ä½¿ç”¨nç³»åˆ—æ‹·è´å‡½æ•°æ—¶ï¼Œè¦ç¡®ä¿æ­£ç¡®è®¡ç®—ç¼“å†²åŒºé•¿åº¦ï¼ŒåŒæ—¶ï¼Œå¦‚æœä½ ä¸ç¡®å®šæ˜¯å¦ä»£ç åœ¨å„ä¸ªç¼–è¯‘å™¨ä¸‹éƒ½èƒ½ç¡®ä¿æœ«å°¾æœ‰0æ—¶ï¼Œå»ºè®®å¯ä»¥é€‚å½“å¢åŠ 1å­—èŠ‚è¾“å…¥ç¼“å†²åŒºï¼Œå¹¶å°†å…¶ç½®ä¸º\0ï¼Œä»¥ä¿è¯è¾“å‡ºçš„å­—ç¬¦ä¸²ç»“å°¾ä¸€å®šæœ‰\0ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-c++&#34; data-lang=&#34;c++&#34;&gt;&lt;span class=&#34;c1&#34;&gt;// Good
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;char&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;buf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;101&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;};&lt;/span&gt;
&lt;span class=&#34;n&#34;&gt;snprintf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;buf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;sizeof&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;buf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;foobar ...&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;...);&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ä¸€äº›éœ€è¦æ³¨æ„çš„å‡½æ•°ï¼Œä¾‹å¦‚&lt;code&gt;strncpy&lt;/code&gt;å’Œ&lt;code&gt;_snprintf&lt;/code&gt;æ˜¯ä¸å®‰å…¨çš„ã€‚ &lt;code&gt;strncpy&lt;/code&gt;ä¸åº”å½“è¢«è§†ä¸º&lt;code&gt;strcpy&lt;/code&gt;çš„nç³»åˆ—å‡½æ•°ï¼Œå®ƒåªæ˜¯æ°å·§ä¸å…¶ä»–nç³»åˆ—å‡½æ•°åå­—å¾ˆåƒè€Œå·²ã€‚&lt;code&gt;strncpy&lt;/code&gt;åœ¨å¤åˆ¶æ—¶ï¼Œå¦‚æœå¤åˆ¶çš„é•¿åº¦è¶…è¿‡nï¼Œä¸ä¼šåœ¨ç»“å°¾è¡¥\0ã€‚&lt;/p&gt;
&lt;p&gt;åŒæ ·ï¼ŒMSVC &lt;code&gt;_snprintf&lt;/code&gt;ç³»åˆ—å‡½æ•°åœ¨è¶…è¿‡æˆ–ç­‰äºnæ—¶ä¹Ÿä¸ä¼šä»¥0ç»“å°¾ã€‚å¦‚æœåç»­ä½¿ç”¨é0ç»“å°¾çš„å­—ç¬¦ä¸²ï¼Œå¯èƒ½æ³„éœ²ç›¸é‚»çš„å†…å®¹æˆ–è€…å¯¼è‡´ç¨‹åºå´©æºƒã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-c++&#34; data-lang=&#34;c++&#34;&gt;&lt;span class=&#34;c1&#34;&gt;// Bad
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;char&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;a&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;4&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;};&lt;/span&gt;
&lt;span class=&#34;n&#34;&gt;_snprintf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;a&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;4&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;%s&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;AAAA&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;span class=&#34;n&#34;&gt;foo&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;strlen&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;a&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ä¸Šè¿°ä»£ç åœ¨MSVCä¸­æ‰§è¡Œåï¼Œ a[4] == &amp;lsquo;A&amp;rsquo;ï¼Œå› æ­¤å­—ç¬¦ä¸²æœªä»¥0ç»“å°¾ã€‚açš„å†…å®¹æ˜¯&amp;quot;AAAA&amp;quot;ï¼Œè°ƒç”¨&lt;code&gt;strlen(a)&lt;/code&gt;åˆ™ä¼šè¶Šç•Œè®¿é—®ã€‚å› æ­¤ï¼Œæ­£ç¡®çš„æ“ä½œä¸¾ä¾‹å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-c++&#34; data-lang=&#34;c++&#34;&gt;&lt;span class=&#34;c1&#34;&gt;// Good
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;char&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;a&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;4&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;};&lt;/span&gt;
&lt;span class=&#34;n&#34;&gt;_snprintf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;a&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;sizeof&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;a&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;),&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;%s&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;AAAA&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;span class=&#34;n&#34;&gt;a&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;sizeof&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;a&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;sc&#34;&gt;&amp;#39;\0&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;span class=&#34;n&#34;&gt;foo&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;strlen&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;a&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;åœ¨ C++ ä¸­ï¼Œå¼ºçƒˆå»ºè®®ç”¨ &lt;code&gt;string&lt;/code&gt;ã€&lt;code&gt;vector&lt;/code&gt; ç­‰æ›´é«˜å°è£…å±‚æ¬¡çš„åŸºç¡€ç»„ä»¶ä»£æ›¿åŸå§‹æŒ‡é’ˆå’ŒåŠ¨æ€æ•°ç»„ï¼Œå¯¹æé«˜ä»£ç çš„å¯è¯»æ€§å’Œå®‰å…¨æ€§éƒ½æœ‰å¾ˆå¤§çš„å¸®åŠ©ã€‚&lt;/p&gt;
&lt;p&gt;å…³è”æ¼æ´:&lt;/p&gt;
&lt;p&gt;&lt;code&gt;ä¸­é£é™©-ä¿¡æ¯æ³„éœ²&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;ä½é£é™©-æ‹’ç»æœåŠ¡&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;é«˜é£é™©-ç¼“å†²åŒºæº¢å‡º&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt;&lt;/p&gt;
&lt;h4 id=&#34;å¿…é¡»åˆ›å»ºè¿›ç¨‹ç±»çš„å‡½æ•°çš„å®‰å…¨è§„èŒƒ&#34;&gt;ã€å¿…é¡»ã€‘åˆ›å»ºè¿›ç¨‹ç±»çš„å‡½æ•°çš„å®‰å…¨è§„èŒƒ&lt;/h4&gt;
&lt;p&gt;systemã€WinExecã€CreateProcessã€ShellExecuteç­‰å¯åŠ¨è¿›ç¨‹ç±»çš„å‡½æ•°ï¼Œéœ€è¦ä¸¥æ ¼æ£€æŸ¥å…¶å‚æ•°ã€‚&lt;/p&gt;
&lt;p&gt;å¯åŠ¨è¿›ç¨‹éœ€è¦åŠ ä¸ŠåŒå¼•å·ï¼Œé”™è¯¯ä¾‹å­ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-c++&#34; data-lang=&#34;c++&#34;&gt;&lt;span class=&#34;c1&#34;&gt;// Bad
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;WinExec&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;D:&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\\&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;program files&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\\&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;my folder&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\\&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;foobar.exe&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;SW_SHOW&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å½“å­˜åœ¨&lt;code&gt;D:\program files\my.exe&lt;/code&gt;çš„æ—¶å€™ï¼Œmy.exeä¼šè¢«å¯åŠ¨ã€‚è€Œfoobar.exeä¸ä¼šå¯åŠ¨ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-c++&#34; data-lang=&#34;c++&#34;&gt;&lt;span class=&#34;c1&#34;&gt;// Good
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;WinExec&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\&amp;#34;&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;D:&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\\&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;program files&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\\&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;my folder&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\\&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;foobar.exe&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\&amp;#34;&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;SW_SHOW&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å¦å¤–ï¼Œå¦‚æœå¯åŠ¨æ—¶ä»ç”¨æˆ·è¾“å…¥ã€ç¯å¢ƒå˜é‡è¯»å–ç»„åˆå‘½ä»¤è¡Œæ—¶ï¼Œè¿˜éœ€è¦æ³¨æ„æ˜¯å¦å¯èƒ½å­˜åœ¨å‘½ä»¤æ³¨å…¥ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-c++&#34; data-lang=&#34;c++&#34;&gt;&lt;span class=&#34;c1&#34;&gt;// Bad
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;string&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;cmdline&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;calc &amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;span class=&#34;n&#34;&gt;cmdline&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;user_input&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;span class=&#34;n&#34;&gt;system&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;cmdline&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;c_str&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;());&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;æ¯”å¦‚ï¼Œå½“ç”¨æˆ·è¾“å…¥&lt;code&gt;1+1 &amp;amp;&amp;amp; ls&lt;/code&gt;æ—¶ï¼Œæ‰§è¡Œçš„å®é™…ä¸Šæ˜¯calc 1+1å’Œls ä¸¤ä¸ªå‘½ä»¤ï¼Œå¯¼è‡´å‘½ä»¤æ³¨å…¥ã€‚&lt;/p&gt;
&lt;p&gt;éœ€è¦æ£€æŸ¥ç”¨æˆ·è¾“å…¥æ˜¯å¦å«æœ‰éæ³•æ•°æ®ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-c++&#34; data-lang=&#34;c++&#34;&gt;&lt;span class=&#34;c1&#34;&gt;// Good
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;string&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;cmdline&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;ls &amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;span class=&#34;n&#34;&gt;cmdline&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;user_input&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;

&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;cmdline&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;find_first_not_of&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;1234567890.+-*/e &amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;npos&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
  &lt;span class=&#34;n&#34;&gt;system&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;cmdline&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;c_str&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;());&lt;/span&gt;
&lt;span class=&#34;k&#34;&gt;else&lt;/span&gt;
  &lt;span class=&#34;nf&#34;&gt;warning&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(...);&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å…³è”æ¼æ´:&lt;/p&gt;
&lt;p&gt;&lt;code&gt;é«˜é£é™©-ä»£ç æ‰§è¡Œ&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;é«˜é£é™©-æƒé™æå‡&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt;&lt;/p&gt;
&lt;h4 id=&#34;å¿…é¡»å°½é‡å‡å°‘ä½¿ç”¨-_alloca-å’Œå¯å˜é•¿åº¦æ•°ç»„&#34;&gt;ã€å¿…é¡»ã€‘å°½é‡å‡å°‘ä½¿ç”¨ _alloca å’Œå¯å˜é•¿åº¦æ•°ç»„&lt;/h4&gt;
&lt;p&gt;_alloca å’Œ&lt;a class=&#34;link&#34; href=&#34;https://zh.wikipedia.org/wiki/%E5%8F%AF%E5%8F%98%E9%95%BF%E6%95%B0%E7%BB%84&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;å¯å˜é•¿åº¦æ•°ç»„&lt;/a&gt;ä½¿ç”¨çš„å†…å­˜é‡åœ¨ç¼–è¯‘æœŸé—´ä¸å¯çŸ¥ã€‚å°¤å…¶æ˜¯åœ¨å¾ªç¯ä¸­ä½¿ç”¨æ—¶ï¼Œæ ¹æ®ç¼–è¯‘å™¨çš„å®ç°ä¸åŒï¼Œå¯èƒ½ä¼šå¯¼è‡´ï¼šï¼ˆ1ï¼‰æ ˆæº¢å‡ºï¼Œå³æ‹’ç»æœåŠ¡ï¼› ï¼ˆ2ï¼‰ç¼ºå°‘æ ˆå†…å­˜æµ‹è¯•çš„ç¼–è¯‘å™¨å®ç°å¯èƒ½å¯¼è‡´ç”³è¯·åˆ°éæ ˆå†…å­˜ï¼Œå¹¶å¯¼è‡´å†…å­˜æŸåã€‚è¿™åœ¨æ ˆæ¯”è¾ƒå°çš„ç¨‹åºä¸Šï¼Œä¾‹å¦‚IoTè®¾å¤‡å›ºä»¶ä¸Šå½±å“å°¤ä¸ºå¤§ã€‚å¯¹äº C++ï¼Œå¯å˜é•¿åº¦æ•°ç»„ä¹Ÿå±äºéæ ‡å‡†æ‰©å±•ï¼Œåœ¨ä»£ç è§„èŒƒä¸­ç¦æ­¢ä½¿ç”¨ã€‚&lt;/p&gt;
&lt;p&gt;é”™è¯¯ç¤ºä¾‹ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-c++&#34; data-lang=&#34;c++&#34;&gt;&lt;span class=&#34;c1&#34;&gt;// Bad
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;i&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;i&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;100000&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;++&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
  &lt;span class=&#34;kt&#34;&gt;char&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;foo&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;char&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_alloca&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0x10000&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
  &lt;span class=&#34;p&#34;&gt;..&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;do&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;something&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;with&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;foo&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;..;&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

&lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;Foo&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;size&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
  &lt;span class=&#34;kt&#34;&gt;char&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;msg&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;size&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;];&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;// ä¸å¯æ§çš„æ ˆæº¢å‡ºé£é™©ï¼
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;æ­£ç¡®ç¤ºä¾‹ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-c++&#34; data-lang=&#34;c++&#34;&gt;&lt;span class=&#34;c1&#34;&gt;// Good
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// æ”¹ç”¨åŠ¨æ€åˆ†é…çš„å †å†…å­˜
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;i&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;i&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;100000&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;++&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
  &lt;span class=&#34;kt&#34;&gt;char&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;foo&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;char&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;malloc&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0x10000&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
  &lt;span class=&#34;p&#34;&gt;..&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;do&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;something&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;with&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;foo&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;..;&lt;/span&gt;
  &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;foo_is_no_longer_needed&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;free&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;foo&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;foo&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;NULL&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
  &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

&lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;Foo&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;size&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
  &lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;string&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;msg&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;size&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;sc&#34;&gt;&amp;#39;\0&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;  &lt;span class=&#34;c1&#34;&gt;// C++
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;  &lt;span class=&#34;kt&#34;&gt;char&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;msg&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;malloc&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;size&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;  &lt;span class=&#34;c1&#34;&gt;// C
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å…³è”æ¼æ´:&lt;/p&gt;
&lt;p&gt;&lt;code&gt;ä½é£é™©-æ‹’ç»æœåŠ¡&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;é«˜é£é™©-å†…å­˜ç ´å&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt;&lt;/p&gt;
&lt;h4 id=&#34;å¿…é¡»printfç³»åˆ—å‚æ•°å¿…é¡»å¯¹åº”&#34;&gt;ã€å¿…é¡»ã€‘printfç³»åˆ—å‚æ•°å¿…é¡»å¯¹åº”&lt;/h4&gt;
&lt;p&gt;æ‰€æœ‰printfç³»åˆ—å‡½æ•°ï¼Œå¦‚sprintfï¼Œsnprintfï¼Œvprintfç­‰å¿…é¡»å¯¹åº”æ§åˆ¶ç¬¦å·å’Œå‚æ•°ã€‚&lt;/p&gt;
&lt;p&gt;é”™è¯¯ç¤ºä¾‹ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-c++&#34; data-lang=&#34;c++&#34;&gt;&lt;span class=&#34;c1&#34;&gt;// Bad
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;buf_size&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1000&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;span class=&#34;kt&#34;&gt;char&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;buffer_send_to_remote_client&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;buf_size&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;};&lt;/span&gt;

&lt;span class=&#34;n&#34;&gt;snprintf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;buffer_send_to_remote_client&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;buf_size&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;%d: %p&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;id&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;some_string&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;  &lt;span class=&#34;c1&#34;&gt;// %p åº”ä¸º %s
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;
&lt;span class=&#34;n&#34;&gt;buffer_send_to_remote_client&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;buf_size&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;sc&#34;&gt;&amp;#39;\0&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;span class=&#34;n&#34;&gt;send_to_remote&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;buffer_send_to_remote_client&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;æ­£ç¡®ç¤ºä¾‹ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-c++&#34; data-lang=&#34;c++&#34;&gt;&lt;span class=&#34;c1&#34;&gt;// Good
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;buf_size&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1000&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;span class=&#34;kt&#34;&gt;char&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;buffer_send_to_remote_client&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;buf_size&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;};&lt;/span&gt;

&lt;span class=&#34;n&#34;&gt;snprintf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;buffer_send_to_remote_client&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;buf_size&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;%d: %s&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;id&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;some_string&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;

&lt;span class=&#34;n&#34;&gt;buffer_send_to_remote_client&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;buf_size&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;sc&#34;&gt;&amp;#39;\0&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;span class=&#34;n&#34;&gt;send_to_remote&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;buffer_send_to_remote_client&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å‰è€…å¯èƒ½ä¼šè®©clientçš„æ”»å‡»è€…è·å–éƒ¨åˆ†æœåŠ¡å™¨çš„åŸå§‹æŒ‡é’ˆåœ°å€ï¼Œå¯ä»¥ç”¨äºç ´åASLRä¿æŠ¤ã€‚&lt;/p&gt;
&lt;p&gt;å…³è”æ¼æ´:&lt;/p&gt;
&lt;p&gt;&lt;code&gt;ä¸­é£é™©-ä¿¡æ¯æ³„éœ²&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt;&lt;/p&gt;
&lt;h4 id=&#34;å¿…é¡»é˜²æ­¢æ³„éœ²æŒ‡é’ˆåŒ…æ‹¬pçš„å€¼&#34;&gt;ã€å¿…é¡»ã€‘é˜²æ­¢æ³„éœ²æŒ‡é’ˆï¼ˆåŒ…æ‹¬%pï¼‰çš„å€¼&lt;/h4&gt;
&lt;p&gt;æ‰€æœ‰printfç³»åˆ—å‡½æ•°ï¼Œè¦é˜²æ­¢æ ¼å¼åŒ–å®Œçš„å­—ç¬¦ä¸²æ³„éœ²ç¨‹åºå¸ƒå±€ä¿¡æ¯ã€‚ä¾‹å¦‚ï¼Œå¦‚æœå°†å¸¦æœ‰%pçš„å­—ç¬¦ä¸²æ³„éœ²ç»™ç¨‹åºï¼Œåˆ™å¯èƒ½ä¼šç ´åASLRçš„é˜²æŠ¤æ•ˆæœã€‚ä½¿å¾—æ”»å‡»è€…æ›´å®¹æ˜“æ”»ç ´ç¨‹åºã€‚&lt;/p&gt;
&lt;p&gt;%pçš„å€¼åªåº”å½“åœ¨ç¨‹åºå†…ä½¿ç”¨ï¼Œè€Œä¸åº”å½“è¾“å‡ºåˆ°å¤–éƒ¨æˆ–è¢«å¤–éƒ¨ä»¥æŸç§æ–¹å¼è·å–ã€‚&lt;/p&gt;
&lt;p&gt;é”™è¯¯ç¤ºä¾‹ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-c++&#34; data-lang=&#34;c++&#34;&gt;&lt;span class=&#34;c1&#34;&gt;// Bad
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// å¦‚æœè¿™æ˜¯æš´éœ²ç»™å®¢æˆ·çš„ä¸€ä¸ªAPIï¼š
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;uint64_t&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;GetUniqueObjectId&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Foo&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;pobject&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
  &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;uint64_t&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;pobject&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;æ­£ç¡®ç¤ºä¾‹ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-c++&#34; data-lang=&#34;c++&#34;&gt;&lt;span class=&#34;c1&#34;&gt;// Good
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;uint64_t&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;g_object_id&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;

&lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Foo&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Foo&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
  &lt;span class=&#34;k&#34;&gt;this&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;object_id_&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;g_object_id&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;++&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

&lt;span class=&#34;c1&#34;&gt;// å¦‚æœè¿™æ˜¯æš´éœ²ç»™å®¢æˆ·çš„ä¸€ä¸ªAPIï¼š
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;uint64_t&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;GetUniqueObjectId&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Foo&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;object&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
  &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;object&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;object&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;object_id_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
  &lt;span class=&#34;k&#34;&gt;else&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;error&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(...);&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å…³è”æ¼æ´:&lt;/p&gt;
&lt;p&gt;&lt;code&gt;ä¸­é£é™©-ä¿¡æ¯æ³„éœ²&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt;&lt;/p&gt;
&lt;h4 id=&#34;å¿…é¡»ä¸åº”å½“æŠŠç”¨æˆ·å¯ä¿®æ”¹çš„å­—ç¬¦ä¸²ä½œä¸ºprintfç³»åˆ—å‡½æ•°çš„formatå‚æ•°&#34;&gt;ã€å¿…é¡»ã€‘ä¸åº”å½“æŠŠç”¨æˆ·å¯ä¿®æ”¹çš„å­—ç¬¦ä¸²ä½œä¸ºprintfç³»åˆ—å‡½æ•°çš„â€œformatâ€å‚æ•°&lt;/h4&gt;
&lt;p&gt;å¦‚æœç”¨æˆ·å¯ä»¥æ§åˆ¶å­—ç¬¦ä¸²ï¼Œåˆ™é€šè¿‡ %n %p ç­‰å†…å®¹ï¼Œæœ€åæƒ…å†µä¸‹å¯ä»¥ç›´æ¥æ‰§è¡Œä»»æ„æ¶æ„ä»£ç ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨ä»¥ä¸‹æƒ…å†µå°¤å…¶éœ€è¦æ³¨æ„ï¼š WIFIåï¼Œè®¾å¤‡åâ€¦â€¦&lt;/p&gt;
&lt;p&gt;é”™è¯¯ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-c++&#34; data-lang=&#34;c++&#34;&gt;&lt;span class=&#34;n&#34;&gt;snprintf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;buf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;sizeof&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;buf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;),&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;wifi_name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;æ­£ç¡®ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-c++&#34; data-lang=&#34;c++&#34;&gt;&lt;span class=&#34;n&#34;&gt;snprinf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;buf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;sizeof&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;buf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;),&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;%s&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;wifi_name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å…³è”æ¼æ´:&lt;/p&gt;
&lt;p&gt;&lt;code&gt;é«˜é£é™©-ä»£ç æ‰§è¡Œ&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;é«˜é£é™©-å†…å­˜ç ´å&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;ä¸­é£é™©-ä¿¡æ¯æ³„éœ²&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;ä½é£é™©-æ‹’ç»æœåŠ¡&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt;&lt;/p&gt;
&lt;h4 id=&#34;å¿…é¡»å¯¹æ•°ç»„deleteæ—¶éœ€è¦ä½¿ç”¨delete&#34;&gt;ã€å¿…é¡»ã€‘å¯¹æ•°ç»„deleteæ—¶éœ€è¦ä½¿ç”¨delete[]&lt;/h4&gt;
&lt;p&gt;delete []æ“ä½œç¬¦ç”¨äºåˆ é™¤æ•°ç»„ã€‚deleteæ“ä½œç¬¦ç”¨äºåˆ é™¤éæ•°ç»„å¯¹è±¡ã€‚å®ƒä»¬åˆ†åˆ«è°ƒç”¨operator delete[]å’Œoperator deleteã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-c++&#34; data-lang=&#34;c++&#34;&gt;&lt;span class=&#34;c1&#34;&gt;// Bad
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Foo&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;b&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;new&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Foo&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;5&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;];&lt;/span&gt;
&lt;span class=&#34;k&#34;&gt;delete&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;b&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;  &lt;span class=&#34;c1&#34;&gt;// trigger assert in DEBUG mode
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;åœ¨new[]è¿”å›çš„æŒ‡é’ˆä¸Šè°ƒç”¨deleteå°†æ˜¯å–å†³äºç¼–è¯‘å™¨çš„æœªå®šä¹‰è¡Œä¸ºã€‚ä»£ç ä¸­å­˜åœ¨å¯¹æœªå®šä¹‰è¡Œä¸ºçš„ä¾èµ–æ˜¯é”™è¯¯çš„ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-c++&#34; data-lang=&#34;c++&#34;&gt;&lt;span class=&#34;c1&#34;&gt;// Good
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Foo&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;b&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;new&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Foo&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;5&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;];&lt;/span&gt;
&lt;span class=&#34;k&#34;&gt;delete&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[]&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;b&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;åœ¨ C++ ä»£ç ä¸­ï¼Œä½¿ç”¨ &lt;code&gt;string&lt;/code&gt;ã€&lt;code&gt;vector&lt;/code&gt;ã€æ™ºèƒ½æŒ‡é’ˆï¼ˆæ¯”å¦‚&lt;a class=&#34;link&#34; href=&#34;https://zh.cppreference.com/w/cpp/memory/unique_ptr&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;std::unique_ptr&amp;lt;T[]&amp;gt;&lt;/a&gt;ï¼‰ç­‰å¯ä»¥æ¶ˆé™¤ç»å¤§å¤šæ•° &lt;code&gt;delete[]&lt;/code&gt; çš„ä½¿ç”¨åœºæ™¯ï¼Œå¹¶ä¸”ä»£ç æ›´æ¸…æ™°ã€‚&lt;/p&gt;
&lt;p&gt;å…³è”æ¼æ´:&lt;/p&gt;
&lt;p&gt;&lt;code&gt;é«˜é£é™©-å†…å­˜ç ´å&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;ä¸­é£é™©-é€»è¾‘æ¼æ´&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;ä½é£é™©-å†…å­˜æ³„æ¼&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;ä½é£é™©-æ‹’ç»æœåŠ¡&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt;&lt;/p&gt;
&lt;h4 id=&#34;å¿…é¡»æ³¨æ„éšå¼ç¬¦å·è½¬æ¢&#34;&gt;ã€å¿…é¡»ã€‘æ³¨æ„éšå¼ç¬¦å·è½¬æ¢&lt;/h4&gt;
&lt;p&gt;ä¸¤ä¸ªæ— ç¬¦å·æ•°ç›¸å‡ä¸ºè´Ÿæ•°æ—¶ï¼Œç»“æœåº”å½“ä¸ºä¸€ä¸ªå¾ˆå¤§çš„æ— ç¬¦å·æ•°ï¼Œä½†æ˜¯å°äºintçš„æ— ç¬¦å·æ•°åœ¨è¿ç®—æ—¶å¯èƒ½ä¼šæœ‰é¢„æœŸå¤–çš„éšå¼ç¬¦å·è½¬æ¢ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-c++&#34; data-lang=&#34;c++&#34;&gt;&lt;span class=&#34;c1&#34;&gt;// 1
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;unsigned&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;char&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;a&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;span class=&#34;kt&#34;&gt;unsigned&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;char&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;b&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;

&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;a&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;b&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;  &lt;span class=&#34;c1&#34;&gt;// a - b = -1 (signed int)
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;  &lt;span class=&#34;n&#34;&gt;a&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;6&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;span class=&#34;k&#34;&gt;else&lt;/span&gt;
  &lt;span class=&#34;n&#34;&gt;a&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;8&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;

&lt;span class=&#34;c1&#34;&gt;// 2
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;unsigned&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;char&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;a&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;span class=&#34;kt&#34;&gt;unsigned&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;short&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;b&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;

&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;a&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;b&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;  &lt;span class=&#34;c1&#34;&gt;// a - b = -1 (signed int)
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;  &lt;span class=&#34;n&#34;&gt;a&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;6&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;span class=&#34;k&#34;&gt;else&lt;/span&gt;
  &lt;span class=&#34;n&#34;&gt;a&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;8&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ä¸Šè¿°ç»“æœå‡ä¸ºa=6&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-c++&#34; data-lang=&#34;c++&#34;&gt;&lt;span class=&#34;c1&#34;&gt;// 3
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;unsigned&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;a&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;span class=&#34;kt&#34;&gt;unsigned&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;short&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;b&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;

&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;a&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;b&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;  &lt;span class=&#34;c1&#34;&gt;// a - b = 0xffffffff (unsigned int)
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;  &lt;span class=&#34;n&#34;&gt;a&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;6&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;span class=&#34;k&#34;&gt;else&lt;/span&gt;
  &lt;span class=&#34;n&#34;&gt;a&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;8&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
  
&lt;span class=&#34;c1&#34;&gt;// 4
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;unsigned&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;a&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;span class=&#34;kt&#34;&gt;unsigned&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;b&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;

&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;a&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;b&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;  &lt;span class=&#34;c1&#34;&gt;// a - b = 0xffffffff (unsigned int)
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;  &lt;span class=&#34;n&#34;&gt;a&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;6&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;span class=&#34;k&#34;&gt;else&lt;/span&gt;
  &lt;span class=&#34;n&#34;&gt;a&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;8&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ä¸Šè¿°ç»“æœå‡ä¸ºa=8&lt;/p&gt;
&lt;p&gt;å¦‚æœé¢„æœŸä¸º8ï¼Œåˆ™é”™è¯¯ä»£ç ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-c++&#34; data-lang=&#34;c++&#34;&gt;&lt;span class=&#34;c1&#34;&gt;// Bad
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;unsigned&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;short&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;a&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;span class=&#34;kt&#34;&gt;unsigned&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;short&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;b&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;

&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;a&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;b&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;  &lt;span class=&#34;c1&#34;&gt;// a - b = -1 (signed int)
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;  &lt;span class=&#34;n&#34;&gt;a&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;6&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;span class=&#34;k&#34;&gt;else&lt;/span&gt;
  &lt;span class=&#34;n&#34;&gt;a&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;8&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;æ­£ç¡®ä»£ç ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-c++&#34; data-lang=&#34;c++&#34;&gt;&lt;span class=&#34;c1&#34;&gt;// Good
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;unsigned&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;short&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;a&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;span class=&#34;kt&#34;&gt;unsigned&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;short&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;b&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;

&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;((&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;unsigned&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;a&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;unsigned&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;b&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;  &lt;span class=&#34;c1&#34;&gt;// a - b = 0xffff (unsigned short)
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;  &lt;span class=&#34;n&#34;&gt;a&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;6&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;span class=&#34;k&#34;&gt;else&lt;/span&gt;
  &lt;span class=&#34;n&#34;&gt;a&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;8&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å…³è”æ¼æ´:&lt;/p&gt;
&lt;p&gt;&lt;code&gt;ä¸­é£é™©-é€»è¾‘æ¼æ´&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt;&lt;/p&gt;
&lt;h4 id=&#34;å¿…é¡»æ³¨æ„å…«è¿›åˆ¶é—®é¢˜&#34;&gt;ã€å¿…é¡»ã€‘æ³¨æ„å…«è¿›åˆ¶é—®é¢˜&lt;/h4&gt;
&lt;p&gt;ä»£ç å¯¹é½æ—¶åº”å½“ä½¿ç”¨ç©ºæ ¼æˆ–è€…ç¼–è¾‘å™¨è‡ªå¸¦çš„å¯¹é½åŠŸèƒ½ï¼Œè°¨æ…åœ¨æ•°å­—å‰ä½¿ç”¨0æ¥å¯¹é½ä»£ç ï¼Œä»¥å…ä¸å½“å°†æŸäº›å†…å®¹è½¬æ¢ä¸ºå…«è¿›åˆ¶ã€‚&lt;/p&gt;
&lt;p&gt;ä¾‹å¦‚ï¼Œå¦‚æœé¢„æœŸä¸º20å­—èŠ‚é•¿åº¦çš„ç¼“å†²åŒºï¼Œåˆ™ä¸‹åˆ—ä»£ç å­˜åœ¨é”™è¯¯ã€‚buf2ä¸º020ï¼ˆOCTï¼‰é•¿åº¦ï¼Œå®é™…åªæœ‰16ï¼ˆDECï¼‰é•¿åº¦ï¼Œåœ¨memcpyåè¶Šç•Œï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-c++&#34; data-lang=&#34;c++&#34;&gt;&lt;span class=&#34;c1&#34;&gt;// Bad
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;char&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;buf1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1024&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;};&lt;/span&gt;
&lt;span class=&#34;kt&#34;&gt;char&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;buf2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mo&#34;&gt;0020&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;};&lt;/span&gt;

&lt;span class=&#34;n&#34;&gt;memcpy&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;buf2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;somebuf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;19&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;åº”å½“åœ¨ä½¿ç”¨8è¿›åˆ¶æ—¶æ˜ç¡®æ³¨æ˜è¿™æ˜¯å…«è¿›åˆ¶ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-c++&#34; data-lang=&#34;c++&#34;&gt;&lt;span class=&#34;c1&#34;&gt;// Good
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;access_mask&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mo&#34;&gt;0777&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;  &lt;span class=&#34;c1&#34;&gt;// oct, rwxrwxrwx
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å…³è”æ¼æ´:&lt;/p&gt;
&lt;p&gt;&lt;code&gt;ä¸­é£é™©-é€»è¾‘æ¼æ´&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt;&lt;/p&gt;
&lt;h3 id=&#34;ä¸æ¨èçš„ç¼–ç¨‹ä¹ æƒ¯&#34;&gt;ä¸æ¨èçš„ç¼–ç¨‹ä¹ æƒ¯&lt;/h3&gt;
&lt;h4 id=&#34;å¿…é¡»switchä¸­åº”æœ‰default&#34;&gt;ã€å¿…é¡»ã€‘switchä¸­åº”æœ‰default&lt;/h4&gt;
&lt;p&gt;switchä¸­åº”è¯¥æœ‰defaultï¼Œä»¥å¤„ç†å„ç§é¢„æœŸå¤–çš„æƒ…å†µã€‚è¿™å¯ä»¥ç¡®ä¿switchæ¥å—ç”¨æˆ·è¾“å…¥ï¼Œæˆ–è€…åæœŸåœ¨å…¶ä»–å¼€å‘è€…ä¿®æ”¹å‡½æ•°åç¡®ä¿switchä»å¯ä»¥è¦†ç›–åˆ°æ‰€æœ‰æƒ…å†µï¼Œå¹¶ç¡®ä¿é€»è¾‘æ­£å¸¸è¿è¡Œã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-c++&#34; data-lang=&#34;c++&#34;&gt;&lt;span class=&#34;c1&#34;&gt;// Bad
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;Foo&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;bar&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
  &lt;span class=&#34;k&#34;&gt;switch&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;bar&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;7&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;case&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Foobar&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;bar&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;break&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;case&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Foobar&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;bar&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;break&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
  &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ä¾‹å¦‚ä¸Šè¿°ä»£ç switchçš„å–å€¼å¯èƒ½ä»0ï½7ï¼Œæ‰€ä»¥åº”å½“æœ‰defaultï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-c++&#34; data-lang=&#34;c++&#34;&gt;&lt;span class=&#34;c1&#34;&gt;// Good
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;Foo&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;bar&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
  &lt;span class=&#34;k&#34;&gt;switch&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;bar&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;7&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;case&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Foobar&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;bar&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;break&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;case&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Foobar&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;bar&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;break&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;default&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
  &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å…³è”æ¼æ´:&lt;/p&gt;
&lt;p&gt;&lt;code&gt;ä¸­é£é™©-é€»è¾‘æ¼æ´&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;ä¸­é£é™©-å†…å­˜æ³„æ¼&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt;&lt;/p&gt;
&lt;h4 id=&#34;å¿…é¡»ä¸åº”å½“åœ¨debugæˆ–é”™è¯¯ä¿¡æ¯ä¸­æä¾›è¿‡å¤šå†…å®¹&#34;&gt;ã€å¿…é¡»ã€‘ä¸åº”å½“åœ¨Debugæˆ–é”™è¯¯ä¿¡æ¯ä¸­æä¾›è¿‡å¤šå†…å®¹&lt;/h4&gt;
&lt;p&gt;åŒ…å«è¿‡å¤šä¿¡æ¯çš„Debugæ¶ˆæ¯ä¸åº”å½“è¢«ç”¨æˆ·è·å–åˆ°ã€‚Debugä¿¡æ¯å¯èƒ½ä¼šæ³„éœ²ä¸€äº›å€¼ï¼Œä¾‹å¦‚å†…å­˜æ•°æ®ã€å†…å­˜åœ°å€ç­‰å†…å®¹ï¼Œè¿™äº›å†…å®¹å¯ä»¥å¸®åŠ©æ”»å‡»è€…åœ¨åˆæ­¥æ§åˆ¶ç¨‹åºåï¼Œæ›´å®¹æ˜“åœ°æ”»å‡»ç¨‹åºã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-c++&#34; data-lang=&#34;c++&#34;&gt;&lt;span class=&#34;c1&#34;&gt;// Bad
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;Foo&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;bar&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
  &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;bar&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;bar&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;5&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;OutputDebugInfoToUser&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;Wrong value for bar %p = %d&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\n&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;bar&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;bar&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
  &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;è€Œåº”è¯¥ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-c++&#34; data-lang=&#34;c++&#34;&gt;&lt;span class=&#34;c1&#34;&gt;// Good
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;foo&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;bar&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;

&lt;span class=&#34;cp&#34;&gt;#ifdef DEBUG
&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;&lt;/span&gt;  &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;bar&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;bar&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;5&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;OutputDebugInfo&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;Wrong value for bar.&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\n&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;bar&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;bar&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
  &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;span class=&#34;cp&#34;&gt;#endif
&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å…³è”æ¼æ´:&lt;/p&gt;
&lt;p&gt;&lt;code&gt;ä¸­é£é™©-ä¿¡æ¯æ³„æ¼&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt;&lt;/p&gt;
&lt;h4 id=&#34;å¿…é¡»ä¸åº”è¯¥åœ¨å®¢æˆ·ç«¯ä»£ç ä¸­ç¡¬ç¼–ç å¯¹ç§°åŠ å¯†ç§˜é’¥&#34;&gt;ã€å¿…é¡»ã€‘ä¸åº”è¯¥åœ¨å®¢æˆ·ç«¯ä»£ç ä¸­ç¡¬ç¼–ç å¯¹ç§°åŠ å¯†ç§˜é’¥&lt;/h4&gt;
&lt;p&gt;ä¸åº”è¯¥åœ¨å®¢æˆ·ç«¯ä»£ç ä¸­ç¡¬ç¼–ç å¯¹ç§°åŠ å¯†ç§˜é’¥ã€‚ä¾‹å¦‚ï¼šä¸åº”åœ¨å®¢æˆ·ç«¯ä»£ç ä½¿ç”¨ç¡¬ç¼–ç çš„ AES/ChaCha20-Poly1305/SM1 å¯†é’¥ï¼Œä½¿ç”¨å›ºå®šå¯†é’¥çš„ç¨‹åºåŸºæœ¬å’Œæ²¡æœ‰åŠ å¯†ä¸€æ ·ã€‚&lt;/p&gt;
&lt;p&gt;å¦‚æœä¸šåŠ¡éœ€æ±‚æ˜¯è®¤è¯åŠ å¯†æ•°æ®ä¼ è¾“ï¼Œåº”ä¼˜å…ˆè€ƒè™‘ç›´æ¥ç”¨ HTTPS åè®®ã€‚&lt;/p&gt;
&lt;p&gt;å¦‚æœæ˜¯å…¶å®ƒä¸šåŠ¡éœ€æ±‚ï¼Œå¯è€ƒè™‘ç”±æœåŠ¡å™¨ç«¯ç”Ÿæˆå¯¹ç§°ç§˜é’¥ï¼Œå®¢æˆ·ç«¯é€šè¿‡ HTTPS ç­‰è®¤è¯åŠ å¯†é€šä¿¡æ¸ é“ä»æœåŠ¡å™¨æ‹‰å–ã€‚&lt;/p&gt;
&lt;p&gt;æˆ–è€…æ ¹æ®ç”¨æˆ·ç‰¹å®šçš„ä¼šè¯ä¿¡æ¯ï¼Œæ¯”å¦‚ç™»å½•è®¤è¯è¿‡ç¨‹å¯ä»¥æ ¹æ®ç”¨æˆ·åç”¨æˆ·å¯†ç ä¸šåŠ¡ä¸Šä¸‹æ–‡ç­‰ä¿¡æ¯ï¼Œä½¿ç”¨ HKDF ç­‰ç®—æ³•è¡ç”Ÿå‡ºå¯¹ç§°ç§˜é’¥ã€‚&lt;/p&gt;
&lt;p&gt;åˆæˆ–è€…ä½¿ç”¨ RSA/ECDSA + ECDHE ç­‰è¿›è¡Œè®¤è¯ç§˜é’¥åå•†ï¼Œç”Ÿæˆå¯¹ç§°ç§˜é’¥ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-c++&#34; data-lang=&#34;c++&#34;&gt;&lt;span class=&#34;c1&#34;&gt;// Bad
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;char&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;g_aes_key&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{...};&lt;/span&gt;

&lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;Foo&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
  &lt;span class=&#34;p&#34;&gt;....&lt;/span&gt;
  &lt;span class=&#34;n&#34;&gt;AES_func&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;g_aes_key&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;input_data&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;output_data&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å¯ä»¥è€ƒè™‘åœ¨çº¿ä¸ºæ¯ä¸ªç”¨æˆ·è·å–ä¸åŒçš„å¯†é’¥ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-c++&#34; data-lang=&#34;c++&#34;&gt;&lt;span class=&#34;c1&#34;&gt;// Good
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;char&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;g_aes_key&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;

&lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;Foo&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
  &lt;span class=&#34;p&#34;&gt;....&lt;/span&gt;
  &lt;span class=&#34;n&#34;&gt;AES_encrypt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;g_aes_key&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;input_data&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;output_data&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

&lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;Init&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
  &lt;span class=&#34;n&#34;&gt;g_aes_key&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;get_key_from_https&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;user_id&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;...);&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å…³è”æ¼æ´:&lt;/p&gt;
&lt;p&gt;&lt;code&gt;ä¸­é£é™©-ä¿¡æ¯æ³„éœ²&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt;&lt;/p&gt;
&lt;h4 id=&#34;å¿…é¡»è¿”å›æ ˆä¸Šå˜é‡çš„åœ°å€&#34;&gt;ã€å¿…é¡»ã€‘è¿”å›æ ˆä¸Šå˜é‡çš„åœ°å€&lt;/h4&gt;
&lt;p&gt;å‡½æ•°ä¸å¯ä»¥è¿”å›æ ˆä¸Šçš„å˜é‡çš„åœ°å€ï¼Œå…¶å†…å®¹åœ¨å‡½æ•°è¿”å›åå°±ä¼šå¤±æ•ˆã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-c++&#34; data-lang=&#34;c++&#34;&gt;&lt;span class=&#34;c1&#34;&gt;// Bad
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;char&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;Foo&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;char&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;sz&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;len&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;){&lt;/span&gt;
  &lt;span class=&#34;kt&#34;&gt;char&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;a&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;300&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;};&lt;/span&gt;
  &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;len&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;100&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;memcpy&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;a&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;sz&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;100&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
  &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
  &lt;span class=&#34;n&#34;&gt;a&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;len&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;sc&#34;&gt;&amp;#39;\0&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
  &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;a&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;  &lt;span class=&#34;c1&#34;&gt;// WRONG
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;è€Œåº”å½“ä½¿ç”¨å †æ¥ä¼ é€’éç®€å•ç±»å‹å˜é‡ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-c++&#34; data-lang=&#34;c++&#34;&gt;&lt;span class=&#34;c1&#34;&gt;// Good
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;char&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;Foo&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;char&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;sz&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;len&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;kt&#34;&gt;char&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;a&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;new&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;char&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;300&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;];&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;len&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;100&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;memcpy&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;a&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;sz&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;100&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;a&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;len&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;sc&#34;&gt;&amp;#39;\0&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;a&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;  &lt;span class=&#34;c1&#34;&gt;// OK
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å¯¹äº C++ ç¨‹åºæ¥è¯´ï¼Œå¼ºçƒˆå»ºè®®è¿”å› &lt;code&gt;string&lt;/code&gt;ã€&lt;code&gt;vector&lt;/code&gt; ç­‰ç±»å‹ï¼Œä¼šè®©ä»£ç æ›´åŠ ç®€å•å’Œå®‰å…¨ã€‚&lt;/p&gt;
&lt;p&gt;å…³è”æ¼æ´:&lt;/p&gt;
&lt;p&gt;&lt;code&gt;é«˜é£é™©-å†…å­˜ç ´å&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt;&lt;/p&gt;
&lt;h4 id=&#34;å¿…é¡»æœ‰é€»è¾‘è”ç³»çš„æ•°ç»„å¿…é¡»ä»”ç»†æ£€æŸ¥&#34;&gt;ã€å¿…é¡»ã€‘æœ‰é€»è¾‘è”ç³»çš„æ•°ç»„å¿…é¡»ä»”ç»†æ£€æŸ¥&lt;/h4&gt;
&lt;p&gt;ä¾‹å¦‚ä¸‹åˆ—ç¨‹åºå°†å­—ç¬¦ä¸²è½¬æ¢ä¸ºweek dayï¼Œä½†æ˜¯ä¸¤ä¸ªæ•°ç»„å¹¶ä¸ä¸€æ ·é•¿ï¼Œå¯¼è‡´ç¨‹åºå¯èƒ½ä¼šè¶Šç•Œè¯»ä¸€ä¸ªintã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-c++&#34; data-lang=&#34;c++&#34;&gt;&lt;span class=&#34;c1&#34;&gt;// Bad
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;nWeekdays&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;3&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;4&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;5&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;6&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;};&lt;/span&gt;
&lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;char&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;sWeekdays&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;Mon&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;Tue&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;Wed&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;Thu&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;Fri&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;Sat&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;Sun&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;};&lt;/span&gt;
&lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;x&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;x&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ARRAY_SIZE&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;sWeekdays&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;x&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;++&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
  &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;strcmp&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;sWeekdays&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;x&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;],&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;input&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;nWeekdays&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;x&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;];&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;åº”å½“ç¡®ä¿æœ‰å…³è”çš„nWeekdayså’ŒsWeekdaysæ•°æ®ç»Ÿä¸€ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-c++&#34; data-lang=&#34;c++&#34;&gt;&lt;span class=&#34;c1&#34;&gt;// Good
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;nWeekdays&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;3&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;4&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;5&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;6&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;7&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;};&lt;/span&gt;
&lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;char&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;sWeekdays&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;Mon&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;Tue&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;Wed&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;Thu&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;Fri&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;Sat&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;Sun&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;};&lt;/span&gt;
&lt;span class=&#34;n&#34;&gt;assert&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ARRAY_SIZE&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;nWeekdays&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ARRAY_SIZE&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;sWeekdays&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;));&lt;/span&gt;
&lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;x&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;x&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ARRAY_SIZE&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;sWeekdays&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;x&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;++&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
  &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;strcmp&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;sWeekdays&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;x&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;],&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;input&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;nWeekdays&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;x&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;];&lt;/span&gt;
  &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å…³è”æ¼æ´:&lt;/p&gt;
&lt;p&gt;&lt;code&gt;é«˜é£é™©-å†…å­˜ç ´å&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt;&lt;/p&gt;
&lt;h4 id=&#34;å¿…é¡»é¿å…å‡½æ•°çš„å£°æ˜å’Œå®ç°ä¸åŒ&#34;&gt;ã€å¿…é¡»ã€‘é¿å…å‡½æ•°çš„å£°æ˜å’Œå®ç°ä¸åŒ&lt;/h4&gt;
&lt;p&gt;åœ¨å¤´æ–‡ä»¶ã€æºä»£ç ã€æ–‡æ¡£ä¸­åˆ—ä¸¾çš„å‡½æ•°å£°æ˜åº”å½“ä¸€è‡´ï¼Œä¸åº”å½“å‡ºç°å®šä¹‰å†…å®¹é”™ä½çš„æƒ…å†µã€‚&lt;/p&gt;
&lt;p&gt;é”™è¯¯ï¼š&lt;/p&gt;
&lt;p&gt;foo.h&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-c++&#34; data-lang=&#34;c++&#34;&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;CalcArea&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;width&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;height&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;foo.cc&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-c++&#34; data-lang=&#34;c++&#34;&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;CalcArea&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;height&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;width&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;  &lt;span class=&#34;c1&#34;&gt;// Different from foo.h
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;  &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;height&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;real_height&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
  &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
  &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;height&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;width&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;æ­£ç¡®ï¼š
foo.h&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-c++&#34; data-lang=&#34;c++&#34;&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;CalcArea&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;height&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;width&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;foo.cc&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-c++&#34; data-lang=&#34;c++&#34;&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;CalcArea&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;height&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;width&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
  &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;height&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;real_height&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
  &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
  &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;height&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;width&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å…³è”æ¼æ´:&lt;/p&gt;
&lt;p&gt;&lt;code&gt;ä¸­é£é™©-é€»è¾‘é—®é¢˜&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt;&lt;/p&gt;
&lt;h4 id=&#34;å¿…é¡»æ£€æŸ¥å¤åˆ¶ç²˜è´´çš„é‡å¤ä»£ç ç›¸åŒä»£ç é€šå¸¸ä»£è¡¨é”™è¯¯&#34;&gt;ã€å¿…é¡»ã€‘æ£€æŸ¥å¤åˆ¶ç²˜è´´çš„é‡å¤ä»£ç ï¼ˆç›¸åŒä»£ç é€šå¸¸ä»£è¡¨é”™è¯¯ï¼‰&lt;/h4&gt;
&lt;p&gt;å½“å¼€å‘ä¸­é‡åˆ°è¾ƒé•¿çš„å¥å­æ—¶ï¼Œå¦‚æœä½ é€‰æ‹©äº†å¤åˆ¶ç²˜è´´è¯­å¥ï¼Œè¯·è®°å¾—æ£€æŸ¥æ¯ä¸€è¡Œä»£ç ï¼Œä¸è¦å‡ºç°ä¸Šä¸‹ä¸¤å¥ä¸€æ¨¡ä¸€æ ·çš„æƒ…å†µï¼Œè¿™é€šå¸¸ä»£è¡¨ä»£ç å“ªé‡Œå‡ºç°äº†é”™è¯¯ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-c++&#34; data-lang=&#34;c++&#34;&gt;&lt;span class=&#34;c1&#34;&gt;// Bad
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;Foobar&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;SomeStruct&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;foobase&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;SomeStruct&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;foo1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;SomeStruct&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;foo2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
  &lt;span class=&#34;n&#34;&gt;foo1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;bar&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;foo1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;bar&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0xffff&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;|&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;foobase&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;base&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0xffff0000&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
  &lt;span class=&#34;n&#34;&gt;foo1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;bar&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;foo1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;bar&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0xffff&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;|&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;foobase&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;base&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0xffff0000&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å¦‚ä¸Šä¾‹ï¼Œé€šå¸¸å¯èƒ½æ˜¯ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-c++&#34; data-lang=&#34;c++&#34;&gt;&lt;span class=&#34;c1&#34;&gt;// Good
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;Foobar&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;SomeStruct&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;foobase&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;SomeStruct&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;foo1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;SomeStruct&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;foo2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
  &lt;span class=&#34;n&#34;&gt;foo1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;bar&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;foo1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;bar&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0xffff&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;|&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;foobase&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;base&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0xffff0000&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
  &lt;span class=&#34;n&#34;&gt;foo2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;bar&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;foo2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;bar&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0xffff&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;|&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;foobase&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;base&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0xffff0000&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;æœ€å¥½æ˜¯æŠŠé‡å¤çš„ä»£ç ç‰‡æ®µæå–æˆå‡½æ•°ï¼Œå¦‚æœå‡½æ•°æ¯”è¾ƒçŸ­ï¼Œå¯ä»¥è€ƒè™‘å®šä¹‰ä¸º &lt;code&gt;inline&lt;/code&gt; å‡½æ•°ï¼Œåœ¨å‡å°‘å†—ä½™çš„åŒæ—¶ä¹Ÿèƒ½ç¡®ä¿ä¸ä¼šå½±å“æ€§èƒ½ã€‚&lt;/p&gt;
&lt;p&gt;å…³è”æ¼æ´:&lt;/p&gt;
&lt;p&gt;&lt;code&gt;ä¸­é£é™©-é€»è¾‘é—®é¢˜&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt;&lt;/p&gt;
&lt;h4 id=&#34;å¿…é¡»å·¦å³ä¸€è‡´çš„é‡å¤åˆ¤æ–­æ°¸è¿œä¸ºçœŸæˆ–å‡çš„åˆ¤æ–­é€šå¸¸ä»£è¡¨é”™è¯¯&#34;&gt;ã€å¿…é¡»ã€‘å·¦å³ä¸€è‡´çš„é‡å¤åˆ¤æ–­/æ°¸è¿œä¸ºçœŸæˆ–å‡çš„åˆ¤æ–­ï¼ˆé€šå¸¸ä»£è¡¨é”™è¯¯ï¼‰&lt;/h4&gt;
&lt;p&gt;è¿™é€šå¸¸æ˜¯ç”±äºè‡ªåŠ¨å®Œæˆæˆ–ä¾‹å¦‚Visual Assistant Xä¹‹ç±»çš„è¡¥å…¨æ’ä»¶å¯¼è‡´çš„é—®é¢˜ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-c++&#34; data-lang=&#34;c++&#34;&gt;&lt;span class=&#34;c1&#34;&gt;// Bad
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;foo1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;bar&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;foo1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;bar&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
  &lt;span class=&#34;err&#34;&gt;â€¦&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å¯èƒ½æ˜¯ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-c++&#34; data-lang=&#34;c++&#34;&gt;&lt;span class=&#34;c1&#34;&gt;// Good
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;foo1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;bar&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;foo2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;bar&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
  &lt;span class=&#34;err&#34;&gt;â€¦&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å…³è”æ¼æ´:&lt;/p&gt;
&lt;p&gt;&lt;code&gt;ä¸­é£é™©-é€»è¾‘é—®é¢˜&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt;&lt;/p&gt;
&lt;h4 id=&#34;å¿…é¡»å‡½æ•°æ¯ä¸ªåˆ†æ”¯éƒ½åº”æœ‰è¿”å›å€¼&#34;&gt;ã€å¿…é¡»ã€‘å‡½æ•°æ¯ä¸ªåˆ†æ”¯éƒ½åº”æœ‰è¿”å›å€¼&lt;/h4&gt;
&lt;p&gt;å‡½æ•°çš„æ¯ä¸ªåˆ†æ”¯éƒ½åº”è¯¥æœ‰è¿”å›å€¼ï¼Œå¦åˆ™å¦‚æœå‡½æ•°èµ°åˆ°æ— è¿”å›å€¼çš„åˆ†æ”¯ï¼Œå…¶ç»“æœæ˜¯æœªçŸ¥çš„ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-c++&#34; data-lang=&#34;c++&#34;&gt;&lt;span class=&#34;c1&#34;&gt;// Bad
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;Foo&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;bar&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
  &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;bar&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;100&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;10&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
  &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;else&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;bar&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;10&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
  &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ä¸Šè¿°ä¾‹å­å½“bar&amp;lt;10æ—¶ï¼Œå…¶ç»“æœæ˜¯æœªçŸ¥çš„å€¼ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-c++&#34; data-lang=&#34;c++&#34;&gt;&lt;span class=&#34;c1&#34;&gt;// Good
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;Foo&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;bar&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
  &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;bar&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;100&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;10&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
  &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;else&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;bar&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;10&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
  &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
  &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å¼€å¯é€‚å½“çº§åˆ«çš„è­¦å‘Šï¼ˆGCC ä¸­ä¸º &lt;code&gt;-Wreturn-type&lt;/code&gt; å¹¶å·²åŒ…å«åœ¨ &lt;code&gt;-Wall&lt;/code&gt; ä¸­ï¼‰å¹¶è®¾ç½®ä¸ºé”™è¯¯ï¼Œå¯ä»¥åœ¨ç¼–è¯‘é˜¶æ®µå‘ç°è¿™ç±»é”™è¯¯ã€‚&lt;/p&gt;
&lt;p&gt;å…³è”æ¼æ´:&lt;/p&gt;
&lt;p&gt;&lt;code&gt;ä¸­é£é™©-é€»è¾‘é—®é¢˜&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;ä¸­é£é™©-ä¿¡æ¯æ³„æ¼&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt;&lt;/p&gt;
&lt;h4 id=&#34;å¿…é¡»ä¸å¾—ä½¿ç”¨æ ˆä¸Šæœªåˆå§‹åŒ–çš„å˜é‡&#34;&gt;ã€å¿…é¡»ã€‘ä¸å¾—ä½¿ç”¨æ ˆä¸Šæœªåˆå§‹åŒ–çš„å˜é‡&lt;/h4&gt;
&lt;p&gt;åœ¨æ ˆä¸Šå£°æ˜çš„å˜é‡è¦æ³¨æ„æ˜¯å¦åœ¨ä½¿ç”¨å®ƒä¹‹å‰å·²ç»åˆå§‹åŒ–äº†&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-c++&#34; data-lang=&#34;c++&#34;&gt;&lt;span class=&#34;c1&#34;&gt;// Bad
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;Foo&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
  &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;foo&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
  &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Bar&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;())&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;foo&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
  &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
  &lt;span class=&#34;n&#34;&gt;Foobar&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;foo&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;// fooå¯èƒ½æ²¡æœ‰åˆå§‹åŒ–
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;æœ€å¥½åœ¨å£°æ˜çš„æ—¶å€™å°±ç«‹åˆ»åˆå§‹åŒ–å˜é‡ï¼Œæˆ–è€…ç¡®ä¿æ¯ä¸ªåˆ†æ”¯éƒ½åˆå§‹åŒ–å®ƒã€‚å¼€å¯ç›¸åº”çš„ç¼–è¯‘å™¨è­¦å‘Šï¼ˆGCC ä¸­ä¸º &lt;code&gt;-Wuninitialized&lt;/code&gt;ï¼‰ï¼Œå¹¶æŠŠè®¾ç½®ä¸ºé”™è¯¯çº§åˆ«ï¼Œå¯ä»¥åœ¨ç¼–è¯‘é˜¶æ®µå‘ç°è¿™ç±»é”™è¯¯ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-c++&#34; data-lang=&#34;c++&#34;&gt;&lt;span class=&#34;c1&#34;&gt;// Good
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;Foo&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
  &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;foo&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
  &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Bar&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;())&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;foo&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
  &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
  &lt;span class=&#34;n&#34;&gt;Foobar&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;foo&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å…³è”æ¼æ´:&lt;/p&gt;
&lt;p&gt;&lt;code&gt;ä¸­é£é™©-é€»è¾‘é—®é¢˜&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;ä¸­é£é™©-ä¿¡æ¯æ³„æ¼&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt;&lt;/p&gt;
&lt;h4 id=&#34;å»ºè®®ä¸å¾—ç›´æ¥ä½¿ç”¨åˆšåˆ†é…çš„æœªåˆå§‹åŒ–çš„å†…å­˜å¦‚realloc&#34;&gt;ã€å»ºè®®ã€‘ä¸å¾—ç›´æ¥ä½¿ç”¨åˆšåˆ†é…çš„æœªåˆå§‹åŒ–çš„å†…å­˜ï¼ˆå¦‚reallocï¼‰&lt;/h4&gt;
&lt;p&gt;ä¸€äº›åˆšç”³è¯·çš„å†…å­˜é€šå¸¸æ˜¯ç›´æ¥ä»å †ä¸Šåˆ†é…çš„ï¼Œå¯èƒ½åŒ…å«æœ‰æ—§æ•°æ®çš„ï¼Œç›´æ¥ä½¿ç”¨å®ƒä»¬è€Œä¸åˆå§‹åŒ–ï¼Œå¯èƒ½ä¼šå¯¼è‡´å®‰å…¨é—®é¢˜ã€‚ä¾‹å¦‚ï¼ŒCVE-2019-13751ã€‚åº”ç¡®ä¿åˆå§‹åŒ–å˜é‡ï¼Œæˆ–è€…ç¡®ä¿æœªåˆå§‹åŒ–çš„å€¼ä¸ä¼šæ³„éœ²ç»™ç”¨æˆ·ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-c++&#34; data-lang=&#34;c++&#34;&gt;&lt;span class=&#34;c1&#34;&gt;// Bad
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;char&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;Foo&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
  &lt;span class=&#34;kt&#34;&gt;char&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;a&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;new&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;char&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;100&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;];&lt;/span&gt;
  &lt;span class=&#34;n&#34;&gt;a&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;99&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;sc&#34;&gt;&amp;#39;\0&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
  &lt;span class=&#34;n&#34;&gt;memcpy&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;a&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;char&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;4&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
  &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;a&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-c++&#34; data-lang=&#34;c++&#34;&gt;&lt;span class=&#34;c1&#34;&gt;// Good
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;char&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;Foo&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
  &lt;span class=&#34;kt&#34;&gt;char&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;a&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;new&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;char&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;100&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;];&lt;/span&gt;
  &lt;span class=&#34;n&#34;&gt;memcpy&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;a&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;char&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;4&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
  &lt;span class=&#34;n&#34;&gt;a&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;4&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;sc&#34;&gt;&amp;#39;\0&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
  &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;a&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;åœ¨ C++ ä¸­ï¼Œå†æ¬¡å¼ºçƒˆæ¨èç”¨ &lt;code&gt;string&lt;/code&gt;ã€&lt;code&gt;vector&lt;/code&gt; ä»£æ›¿æ‰‹åŠ¨å†…å­˜åˆ†é…ã€‚&lt;/p&gt;
&lt;p&gt;å…³è”æ¼æ´:&lt;/p&gt;
&lt;p&gt;&lt;code&gt;ä¸­é£é™©-é€»è¾‘é—®é¢˜&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;ä¸­é£é™©-ä¿¡æ¯æ³„æ¼&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt;&lt;/p&gt;
&lt;h4 id=&#34;å¿…é¡»æ ¡éªŒå†…å­˜ç›¸å…³å‡½æ•°çš„è¿”å›å€¼&#34;&gt;ã€å¿…é¡»ã€‘æ ¡éªŒå†…å­˜ç›¸å…³å‡½æ•°çš„è¿”å›å€¼&lt;/h4&gt;
&lt;p&gt;ä¸å†…å­˜åˆ†é…ç›¸å…³çš„å‡½æ•°éœ€è¦æ£€æŸ¥å…¶è¿”å›å€¼æ˜¯å¦æ­£ç¡®ï¼Œä»¥é˜²å¯¼è‡´ç¨‹åºå´©æºƒæˆ–é€»è¾‘é”™è¯¯ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-c++&#34; data-lang=&#34;c++&#34;&gt;&lt;span class=&#34;c1&#34;&gt;// Bad
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;Foo&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
  &lt;span class=&#34;kt&#34;&gt;char&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;bar&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;mmap&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x800000&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;.....);&lt;/span&gt;
  &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;bar&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x400000&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;sc&#34;&gt;&amp;#39;\x88&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;// Wrong
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å¦‚ä¸Šä¾‹mmapå¦‚æœå¤±è´¥ï¼Œbarçš„å€¼å°†æ˜¯0xffffffff (ffffffff)ï¼Œç¬¬äºŒè¡Œå°†ä¼šå¾€0x3ffffffå†™å…¥å­—ç¬¦ï¼Œå¯¼è‡´è¶Šç•Œå†™ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-c++&#34; data-lang=&#34;c++&#34;&gt;&lt;span class=&#34;c1&#34;&gt;// Good
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;Foo&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
  &lt;span class=&#34;kt&#34;&gt;char&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;bar&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;mmap&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x800000&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;.....);&lt;/span&gt;
  &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;bar&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;MAP_FAILED&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
  &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

  &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;bar&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x400000&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;sc&#34;&gt;&amp;#39;\x88&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å…³è”æ¼æ´:&lt;/p&gt;
&lt;p&gt;&lt;code&gt;ä¸­é£é™©-é€»è¾‘é—®é¢˜&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;é«˜é£é™©-è¶Šç•Œæ“ä½œ&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt;&lt;/p&gt;
&lt;h4 id=&#34;å¿…é¡»ä¸è¦åœ¨ifé‡Œé¢èµ‹å€¼&#34;&gt;ã€å¿…é¡»ã€‘ä¸è¦åœ¨ifé‡Œé¢èµ‹å€¼&lt;/h4&gt;
&lt;p&gt;ifé‡Œèµ‹å€¼é€šå¸¸ä»£è¡¨ä»£ç å­˜åœ¨é”™è¯¯ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-c++&#34; data-lang=&#34;c++&#34;&gt;&lt;span class=&#34;c1&#34;&gt;// Bad
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;Foo&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
  &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;bar&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x99&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;...&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;é€šå¸¸åº”è¯¥æ˜¯ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-c++&#34; data-lang=&#34;c++&#34;&gt;&lt;span class=&#34;c1&#34;&gt;// Good
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;Foo&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
  &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;bar&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x99&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;...&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å»ºè®®åœ¨æ„å»ºç³»ç»Ÿä¸­å¼€å¯è¶³å¤Ÿçš„ç¼–è¯‘å™¨è­¦å‘Šï¼ˆGCC ä¸­ä¸º &lt;code&gt;-Wparentheses&lt;/code&gt; å¹¶å·²åŒ…å«åœ¨ &lt;code&gt;-Wall&lt;/code&gt; ä¸­ï¼‰ï¼Œå¹¶æŠŠè¯¥è­¦å‘Šè®¾ç½®ä¸ºé”™è¯¯ã€‚&lt;/p&gt;
&lt;p&gt;å…³è”æ¼æ´:&lt;/p&gt;
&lt;p&gt;&lt;code&gt;ä¸­é£é™©-é€»è¾‘é—®é¢˜&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt;&lt;/p&gt;
&lt;h4 id=&#34;å»ºè®®ç¡®è®¤ifé‡Œé¢çš„æŒ‰ä½æ“ä½œ&#34;&gt;ã€å»ºè®®ã€‘ç¡®è®¤ifé‡Œé¢çš„æŒ‰ä½æ“ä½œ&lt;/h4&gt;
&lt;p&gt;ifé‡Œï¼Œéboolç±»å‹å’Œéboolç±»å‹çš„æŒ‰ä½æ“ä½œå¯èƒ½ä»£è¡¨ä»£ç å­˜åœ¨é”™è¯¯ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-c++&#34; data-lang=&#34;c++&#34;&gt;&lt;span class=&#34;c1&#34;&gt;// Bad
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;Foo&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
  &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;bar&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;     &lt;span class=&#34;c1&#34;&gt;// binary 01
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;  &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;foobar&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;    &lt;span class=&#34;c1&#34;&gt;// binary 10
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;
  &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;foobar&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;bar&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;     &lt;span class=&#34;c1&#34;&gt;// result = 00, false
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;p&#34;&gt;...&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ä¸Šè¿°ä»£ç å¯èƒ½åº”è¯¥æ˜¯ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-c++&#34; data-lang=&#34;c++&#34;&gt;&lt;span class=&#34;c1&#34;&gt;// Good
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;foo&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
  &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;   &lt;span class=&#34;n&#34;&gt;bar&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
  &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;foobar&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;

  &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;foobar&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;bar&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;  &lt;span class=&#34;c1&#34;&gt;// result : true
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;p&#34;&gt;...&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å…³è”æ¼æ´:&lt;/p&gt;
&lt;p&gt;&lt;code&gt;ä¸­é£é™©-é€»è¾‘é—®é¢˜&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt;&lt;/p&gt;
&lt;h3 id=&#34;å¤šçº¿ç¨‹&#34;&gt;å¤šçº¿ç¨‹&lt;/h3&gt;
&lt;h4 id=&#34;å¿…é¡»å˜é‡åº”ç¡®ä¿çº¿ç¨‹å®‰å…¨æ€§&#34;&gt;ã€å¿…é¡»ã€‘å˜é‡åº”ç¡®ä¿çº¿ç¨‹å®‰å…¨æ€§&lt;/h4&gt;
&lt;p&gt;å½“ä¸€ä¸ªå˜é‡å¯èƒ½è¢«å¤šä¸ªçº¿ç¨‹ä½¿ç”¨æ—¶ï¼Œåº”å½“ä½¿ç”¨åŸå­æ“ä½œæˆ–åŠ é”æ“ä½œã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-c++&#34; data-lang=&#34;c++&#34;&gt;&lt;span class=&#34;c1&#34;&gt;// Bad
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;char&lt;/span&gt;  &lt;span class=&#34;n&#34;&gt;g_somechar&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;foo_thread1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
  &lt;span class=&#34;n&#34;&gt;g_somechar&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;3&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

&lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;foo_thread2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
  &lt;span class=&#34;n&#34;&gt;g_somechar&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å¯¹äºå¯ä»¥ä½¿ç”¨åŸå­æ“ä½œçš„ï¼Œåº”å½“ä½¿ç”¨ä¸€äº›å¯ä»¥ç¡®ä¿å†…å­˜å®‰å…¨çš„æ“ä½œï¼Œå¦‚ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-c++&#34; data-lang=&#34;c++&#34;&gt;&lt;span class=&#34;c1&#34;&gt;// Good
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;volatile&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;char&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;g_somechar&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;foo_thread1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
  &lt;span class=&#34;n&#34;&gt;__sync_fetch_and_add&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;g_somechar&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;3&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

&lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;foo_thread2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
  &lt;span class=&#34;n&#34;&gt;__sync_fetch_and_add&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;g_somechar&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å¯¹äº C ä»£ç ï¼Œ&lt;code&gt;C11&lt;/code&gt; åæ¨èä½¿ç”¨ &lt;a class=&#34;link&#34; href=&#34;https://en.cppreference.com/w/c/atomic&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;atomic&lt;/a&gt; æ ‡å‡†åº“ã€‚
å¯¹äº C++ä»£ç ï¼Œ&lt;code&gt;C++11&lt;/code&gt; åï¼Œæ¨èä½¿ç”¨ &lt;a class=&#34;link&#34; href=&#34;https://zh.cppreference.com/w/cpp/atomic/atomic&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;&lt;code&gt;std::atomic&lt;/code&gt;&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;p&gt;å…³è”æ¼æ´:&lt;/p&gt;
&lt;p&gt;&lt;code&gt;é«˜é£é™©-å†…å­˜ç ´å&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;ä¸­é£é™©-é€»è¾‘é—®é¢˜&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt;&lt;/p&gt;
&lt;h4 id=&#34;å¿…é¡»æ³¨æ„signal-handlerå¯¼è‡´çš„æ¡ä»¶ç«äº‰&#34;&gt;ã€å¿…é¡»ã€‘æ³¨æ„signal handlerå¯¼è‡´çš„æ¡ä»¶ç«äº‰&lt;/h4&gt;
&lt;p&gt;ç«äº‰æ¡ä»¶ç»å¸¸å‡ºç°åœ¨ä¿¡å·å¤„ç†ç¨‹åºä¸­ï¼Œå› ä¸ºä¿¡å·å¤„ç†ç¨‹åºæ”¯æŒå¼‚æ­¥æ“ä½œã€‚æ”»å‡»è€…èƒ½å¤Ÿåˆ©ç”¨ä¿¡å·å¤„ç†ç¨‹åºäº‰ç”¨æ¡ä»¶å¯¼è‡´è½¯ä»¶çŠ¶æ€æŸåï¼Œä»è€Œå¯èƒ½å¯¼è‡´æ‹’ç»æœåŠ¡ç”šè‡³ä»£ç æ‰§è¡Œã€‚&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;å½“ä¿¡å·å¤„ç†ç¨‹åºä¸­å‘ç”Ÿä¸å¯é‡å…¥å‡½æ•°æˆ–çŠ¶æ€æ•æ„Ÿæ“ä½œæ—¶ï¼Œå°±ä¼šå‡ºç°è¿™äº›é—®é¢˜ã€‚å› ä¸ºä¿¡å·å¤„ç†ç¨‹åºä¸­éšæ—¶å¯ä»¥è¢«è°ƒç”¨ã€‚æ¯”å¦‚ï¼Œå½“åœ¨ä¿¡å·å¤„ç†ç¨‹åºä¸­è°ƒç”¨&lt;code&gt;free&lt;/code&gt;æ—¶ï¼Œé€šå¸¸ä¼šå‡ºç°å¦ä¸€ä¸ªä¿¡å·äº‰ç”¨æ¡ä»¶ï¼Œä»è€Œå¯¼è‡´åŒé‡é‡Šæ”¾ã€‚å³ä½¿ç»™å®šæŒ‡é’ˆåœ¨é‡Šæ”¾åè®¾ç½®ä¸º&lt;code&gt;NULL&lt;/code&gt;ï¼Œåœ¨é‡Šæ”¾å†…å­˜å’Œå°†æŒ‡é’ˆè®¾ç½®ä¸º&lt;code&gt;NULL&lt;/code&gt;ä¹‹é—´ä»ç„¶å­˜åœ¨ç«äº‰çš„å¯èƒ½ã€‚&lt;/li&gt;
&lt;li&gt;ä¸ºå¤šä¸ªä¿¡å·è®¾ç½®äº†ç›¸åŒçš„ä¿¡å·å¤„ç†ç¨‹åºï¼Œè¿™å°¤å…¶æœ‰é—®é¢˜â€”â€”å› ä¸ºè¿™æ„å‘³ç€ä¿¡å·å¤„ç†ç¨‹åºæœ¬èº«å¯èƒ½ä¼šé‡æ–°è¿›å…¥ã€‚ä¾‹å¦‚ï¼Œmalloc()å’Œfree()æ˜¯ä¸å¯é‡å…¥çš„ï¼Œå› ä¸ºå®ƒä»¬å¯èƒ½ä½¿ç”¨å…¨å±€æˆ–é™æ€æ•°æ®ç»“æ„æ¥ç®¡ç†å†…å­˜ï¼Œå¹¶ä¸”å®ƒä»¬è¢«syslog()ç­‰çœ‹ä¼¼æ— å®³çš„å‡½æ•°é—´æ¥ä½¿ç”¨ï¼›è¿™äº›å‡½æ•°å¯èƒ½ä¼šå¯¼è‡´å†…å­˜æŸåå’Œä»£ç æ‰§è¡Œã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-c++&#34; data-lang=&#34;c++&#34;&gt;&lt;span class=&#34;c1&#34;&gt;// Bad
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;char&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;log_message&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;

&lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;Handler&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;signum&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
  &lt;span class=&#34;n&#34;&gt;syslog&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;LOG_NOTICE&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;%s&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\n&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;log_m_essage&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
  &lt;span class=&#34;n&#34;&gt;free&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;log_message&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
  &lt;span class=&#34;n&#34;&gt;sleep&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;10&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
  &lt;span class=&#34;n&#34;&gt;exit&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;main&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;argc&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;char&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;argv&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[])&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
  &lt;span class=&#34;n&#34;&gt;log_message&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;strdup&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;argv&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]);&lt;/span&gt;
  &lt;span class=&#34;n&#34;&gt;signal&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;SIGHUP&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Handler&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
  &lt;span class=&#34;n&#34;&gt;signal&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;SIGTERM&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Handler&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
  &lt;span class=&#34;n&#34;&gt;sleep&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;10&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å¯ä»¥å€Ÿç”±ä¸‹åˆ—æ“ä½œè§„é¿é—®é¢˜ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;é¿å…åœ¨å¤šä¸ªå¤„ç†å‡½æ•°ä¸­å…±äº«æŸäº›å˜é‡ã€‚&lt;/li&gt;
&lt;li&gt;åœ¨ä¿¡å·å¤„ç†ç¨‹åºä¸­ä½¿ç”¨åŒæ­¥æ“ä½œã€‚&lt;/li&gt;
&lt;li&gt;å±è”½ä¸ç›¸å…³çš„ä¿¡å·ï¼Œä»è€Œæä¾›åŸå­æ€§ã€‚&lt;/li&gt;
&lt;li&gt;é¿å…åœ¨ä¿¡å·å¤„ç†å‡½æ•°ä¸­è°ƒç”¨ä¸æ»¡è¶³&lt;a class=&#34;link&#34; href=&#34;https://www.man7.org/linux/man-pages/man7/signal-safety.7.html&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;å¼‚æ­¥ä¿¡å·å®‰å…¨&lt;/a&gt;çš„å‡½æ•°ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;å…³è”æ¼æ´:&lt;/p&gt;
&lt;p&gt;&lt;code&gt;é«˜é£é™©-å†…å­˜ç ´å&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;ä¸­é£é™©-é€»è¾‘é—®é¢˜&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt;&lt;/p&gt;
&lt;h4 id=&#34;å»ºè®®æ³¨æ„time-of-check-time-of-use-toctou-æ¡ä»¶ç«äº‰&#34;&gt;ã€å»ºè®®ã€‘æ³¨æ„Time-of-check Time-of-use (TOCTOU) æ¡ä»¶ç«äº‰&lt;/h4&gt;
&lt;p&gt;TOCTOUï¼š è½¯ä»¶åœ¨ä½¿ç”¨æŸä¸ªèµ„æºä¹‹å‰æ£€æŸ¥è¯¥èµ„æºçš„çŠ¶æ€ï¼Œä½†æ˜¯è¯¥èµ„æºçš„çŠ¶æ€å¯ä»¥åœ¨æ£€æŸ¥å’Œä½¿ç”¨ä¹‹é—´æ›´æ”¹ï¼Œä»è€Œä½¿æ£€æŸ¥ç»“æœæ— æ•ˆã€‚å½“èµ„æºå¤„äºè¿™ç§æ„å¤–çŠ¶æ€æ—¶ï¼Œè¿™å¯èƒ½ä¼šå¯¼è‡´è½¯ä»¶æ‰§è¡Œé”™è¯¯æ“ä½œã€‚&lt;/p&gt;
&lt;p&gt;å½“æ”»å‡»è€…å¯ä»¥å½±å“æ£€æŸ¥å’Œä½¿ç”¨ä¹‹é—´çš„èµ„æºçŠ¶æ€æ—¶ï¼Œæ­¤é—®é¢˜å¯èƒ½ä¸å®‰å…¨ç›¸å…³ã€‚è¿™å¯èƒ½å‘ç”Ÿåœ¨å…±äº«èµ„æº(å¦‚&lt;strong&gt;æ–‡ä»¶ã€å†…å­˜&lt;/strong&gt;ï¼Œç”šè‡³å¤šçº¿ç¨‹ç¨‹åºä¸­çš„&lt;strong&gt;å˜é‡&lt;/strong&gt;)ä¸Šã€‚åœ¨ç¼–ç¨‹æ—¶éœ€è¦æ³¨æ„é¿å…å‡ºç°TOCTOUé—®é¢˜ã€‚&lt;/p&gt;
&lt;p&gt;ä¾‹å¦‚ï¼Œä¸‹é¢çš„ä¾‹å­ä¸­ï¼Œè¯¥æ–‡ä»¶å¯èƒ½å·²ç»åœ¨æ£€æŸ¥å’Œlstatä¹‹é—´è¿›è¡Œäº†æ›´æ–°ï¼Œç‰¹åˆ«æ˜¯å› ä¸ºprintfæœ‰å»¶è¿Ÿã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-c++&#34; data-lang=&#34;c++&#34;&gt;&lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;stat&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;st&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;

&lt;span class=&#34;n&#34;&gt;lstat&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;...&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;st&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;

&lt;span class=&#34;n&#34;&gt;printf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;foo&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;

&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;st&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;st_mtimespec&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;...)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
  &lt;span class=&#34;n&#34;&gt;printf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;Now updating things&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\n&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
  &lt;span class=&#34;n&#34;&gt;UpdateThings&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;TOCTOUéš¾ä»¥ä¿®å¤ï¼Œä½†æ˜¯æœ‰ä»¥ä¸‹ç¼“è§£æ–¹æ¡ˆï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;é™åˆ¶å¯¹æ¥è‡ªå¤šä¸ªè¿›ç¨‹çš„æ–‡ä»¶çš„äº¤å‰æ“ä½œã€‚&lt;/li&gt;
&lt;li&gt;å¦‚æœå¿…é¡»åœ¨å¤šä¸ªè¿›ç¨‹æˆ–çº¿ç¨‹ä¹‹é—´å…±äº«å¯¹èµ„æºçš„è®¿é—®ï¼Œé‚£ä¹ˆè¯·å°è¯•é™åˆ¶â€æ£€æŸ¥â€œï¼ˆCHECKï¼‰å’Œâ€ä½¿ç”¨â€œï¼ˆUSEï¼‰èµ„æºä¹‹é—´çš„æ—¶é—´é‡ï¼Œä½¿ä»–ä»¬ç›¸è·å°½é‡ä¸è¦å¤ªè¿œã€‚è¿™ä¸ä¼šä»æ ¹æœ¬ä¸Šè§£å†³é—®é¢˜ï¼Œä½†å¯èƒ½ä¼šä½¿æ”»å‡»æ›´éš¾æˆåŠŸã€‚&lt;/li&gt;
&lt;li&gt;åœ¨Useè°ƒç”¨ä¹‹åé‡æ–°æ£€æŸ¥èµ„æºï¼Œä»¥éªŒè¯æ˜¯å¦æ­£ç¡®æ‰§è¡Œäº†æ“ä½œã€‚&lt;/li&gt;
&lt;li&gt;ç¡®ä¿ä¸€äº›ç¯å¢ƒé”å®šæœºåˆ¶èƒ½å¤Ÿè¢«ç”¨æ¥æœ‰æ•ˆä¿æŠ¤èµ„æºã€‚ä½†è¦ç¡®ä¿é”å®šæ˜¯æ£€æŸ¥ä¹‹å‰è¿›è¡Œçš„ï¼Œè€Œä¸æ˜¯åœ¨æ£€æŸ¥ä¹‹åè¿›è¡Œçš„ï¼Œä»¥ä¾¿æ£€æŸ¥æ—¶çš„èµ„æºä¸ä½¿ç”¨æ—¶çš„èµ„æºç›¸åŒã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;å…³è”æ¼æ´:&lt;/p&gt;
&lt;p&gt;&lt;code&gt;é«˜é£é™©-å†…å­˜ç ´å&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;ä¸­é£é™©-é€»è¾‘é—®é¢˜&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt;&lt;/p&gt;
&lt;h3 id=&#34;åŠ å¯†è§£å¯†&#34;&gt;åŠ å¯†è§£å¯†&lt;/h3&gt;
&lt;p&gt;&lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt;&lt;/p&gt;
&lt;h4 id=&#34;41--å¿…é¡»ä¸å¾—æ˜æ–‡å­˜å‚¨ç”¨æˆ·å¯†ç ç­‰æ•æ„Ÿæ•°æ®&#34;&gt;4.1  ã€å¿…é¡»ã€‘ä¸å¾—æ˜æ–‡å­˜å‚¨ç”¨æˆ·å¯†ç ç­‰æ•æ„Ÿæ•°æ®&lt;/h4&gt;
&lt;p&gt;ç”¨æˆ·å¯†ç åº”è¯¥ä½¿ç”¨ Argon2, scrypt, bcrypt, pbkdf2 ç­‰ç®—æ³•åšå“ˆå¸Œä¹‹åå†å­˜å…¥å­˜å‚¨ç³»ç»Ÿ, &lt;a class=&#34;link&#34; href=&#34;https://password-hashing.net/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://password-hashing.net/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;https://libsodium.gitbook.io/doc/password_hashing/default_phf#example-2-password-storage&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://libsodium.gitbook.io/doc/password_hashing/default_phf#example-2-password-storage&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;ç”¨æˆ·æ•æ„Ÿæ•°æ®ï¼Œåº”è¯¥åšåˆ°ä¼ è¾“è¿‡ç¨‹ä¸­åŠ å¯†ï¼Œå­˜å‚¨çŠ¶æ€ä¸‹åŠ å¯†
ä¼ è¾“è¿‡ç¨‹ä¸­åŠ å¯†ï¼Œå¯ä»¥ä½¿ç”¨ HTTPS ç­‰è®¤è¯åŠ å¯†é€šä¿¡åè®®&lt;/p&gt;
&lt;p&gt;å­˜å‚¨çŠ¶æ€ä¸‹åŠ å¯†ï¼Œå¯ä»¥ä½¿ç”¨ SQLCipher ç­‰ç±»ä¼¼æ–¹æ¡ˆã€‚&lt;/p&gt;
&lt;p&gt;&lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt;&lt;/p&gt;
&lt;h4 id=&#34;42--å¿…é¡»å†…å­˜ä¸­çš„ç”¨æˆ·å¯†ç ç­‰æ•æ„Ÿæ•°æ®åº”è¯¥å®‰å…¨æŠ¹é™¤&#34;&gt;4.2  ã€å¿…é¡»ã€‘å†…å­˜ä¸­çš„ç”¨æˆ·å¯†ç ç­‰æ•æ„Ÿæ•°æ®åº”è¯¥å®‰å…¨æŠ¹é™¤&lt;/h4&gt;
&lt;p&gt;ä¾‹å¦‚ç”¨æˆ·å¯†ç ç­‰ï¼Œå³ä½¿æ˜¯ä¸´æ—¶ä½¿ç”¨ï¼Œä¹Ÿåº”åœ¨ä½¿ç”¨å®Œæˆååº”å½“å°†å†…å®¹å½»åº•æ¸…ç©ºã€‚&lt;/p&gt;
&lt;p&gt;é”™è¯¯ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-c++&#34; data-lang=&#34;c++&#34;&gt;&lt;span class=&#34;cp&#34;&gt;#include&lt;/span&gt; &lt;span class=&#34;cpf&#34;&gt;&amp;lt;openssl/crypto.h&amp;gt;&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;#include&lt;/span&gt; &lt;span class=&#34;cpf&#34;&gt;&amp;lt;unistd.h&amp;gt;&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;p&#34;&gt;...&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;string&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;user_password&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;100&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;sc&#34;&gt;&amp;#39;\0&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;snprintf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;user_password&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;password: %s&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;user_password&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;size&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(),&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;password_from_input&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
        &lt;span class=&#34;p&#34;&gt;...&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;æ­£ç¡®ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-c++&#34; data-lang=&#34;c++&#34;&gt;    &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;p&#34;&gt;...&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;string&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;user_password&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;100&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;sc&#34;&gt;&amp;#39;\0&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;snprintf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;user_password&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;password: %s&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;user_password&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;size&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(),&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;password_from_input&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
        &lt;span class=&#34;p&#34;&gt;...&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;OPENSSL_cleanse&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;user_password&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;],&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;user_password&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;size&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;());&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å…³è”æ¼æ´:&lt;/p&gt;
&lt;p&gt;&lt;code&gt;é«˜é£é™©-æ•æ„Ÿä¿¡æ¯æ³„éœ²&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt;&lt;/p&gt;
&lt;h4 id=&#34;43--å¿…é¡»rand-ç±»å‡½æ•°åº”æ­£ç¡®åˆå§‹åŒ–&#34;&gt;4.3  ã€å¿…é¡»ã€‘rand() ç±»å‡½æ•°åº”æ­£ç¡®åˆå§‹åŒ–&lt;/h4&gt;
&lt;p&gt;randç±»å‡½æ•°çš„éšæœºæ€§å¹¶ä¸é«˜ã€‚è€Œä¸”åœ¨ä½¿ç”¨å‰éœ€è¦ä½¿ç”¨srand()æ¥åˆå§‹åŒ–ã€‚æœªåˆå§‹åŒ–çš„éšæœºæ•°å¯èƒ½å¯¼è‡´æŸäº›å†…å®¹å¯é¢„æµ‹ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-c++&#34; data-lang=&#34;c++&#34;&gt;&lt;span class=&#34;c1&#34;&gt;// Bad
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;main&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
  &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;foo&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;rand&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
  &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ä¸Šè¿°ä»£ç æ‰§è¡Œå®Œæˆåï¼Œfooçš„å€¼æ˜¯å›ºå®šçš„ã€‚å®ƒç­‰æ•ˆäº &lt;code&gt;srand(1); rand();&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-c++&#34; data-lang=&#34;c++&#34;&gt;&lt;span class=&#34;c1&#34;&gt;// Good
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;
&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;main&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
  &lt;span class=&#34;n&#34;&gt;srand&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;time&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;));&lt;/span&gt;
  &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;foo&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;rand&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
  &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å…³è”æ¼æ´:&lt;/p&gt;
&lt;p&gt;&lt;code&gt;é«˜é£é™©-é€»è¾‘æ¼æ´&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt;&lt;/p&gt;
&lt;h4 id=&#34;44--å¿…é¡»åœ¨éœ€è¦é«˜å¼ºåº¦å®‰å…¨åŠ å¯†æ—¶ä¸åº”ä½¿ç”¨å¼±prngå‡½æ•°&#34;&gt;4.4  ã€å¿…é¡»ã€‘åœ¨éœ€è¦é«˜å¼ºåº¦å®‰å…¨åŠ å¯†æ—¶ä¸åº”ä½¿ç”¨å¼±PRNGå‡½æ•°&lt;/h4&gt;
&lt;p&gt;åœ¨éœ€è¦ç”Ÿæˆ AES/SM1/HMAC ç­‰ç®—æ³•çš„å¯†é’¥/IV/Nonceï¼Œ RSA/ECDSA/ECDH ç­‰ç®—æ³•çš„ç§é’¥ï¼Œè¿™ç±»éœ€è¦é«˜å®‰å…¨æ€§çš„ä¸šåŠ¡åœºæ™¯ï¼Œå¿…é¡»ä½¿ç”¨å¯†ç å­¦å®‰å…¨çš„éšæœºæ•°ç”Ÿæˆå™¨ (Cryptographically Secure PseudoRandom Number Generator (CSPRNG) ), ä¸å¾—ä½¿ç”¨ &lt;code&gt;rand()&lt;/code&gt; ç­‰æ— å¯†ç å­¦å®‰å…¨æ€§ä¿è¯çš„æ™®é€šéšæœºæ•°ç”Ÿæˆå™¨ã€‚&lt;/p&gt;
&lt;p&gt;æ¨èä½¿ç”¨çš„ CSPRNG æœ‰ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;OpenSSL ä¸­çš„ &lt;code&gt;RAND_bytes()&lt;/code&gt; å‡½æ•°, &lt;a class=&#34;link&#34; href=&#34;https://www.openssl.org/docs/man1.1.1/man3/RAND_bytes.html&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://www.openssl.org/docs/man1.1.1/man3/RAND_bytes.html&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;libsodium ä¸­çš„ &lt;code&gt;randombytes_buf()&lt;/code&gt; å‡½æ•°&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Linux kernel çš„ &lt;code&gt;getrandom()&lt;/code&gt; ç³»ç»Ÿè°ƒç”¨, &lt;a class=&#34;link&#34; href=&#34;https://man7.org/linux/man-pages/man2/getrandom.2.html&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://man7.org/linux/man-pages/man2/getrandom.2.html&lt;/a&gt; .
æˆ–è€…è¯» /dev/urandom æ–‡ä»¶, æˆ–è€… /dev/random æ–‡ä»¶ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Apple IOS çš„ &lt;code&gt;SecRandomCopyBytes()&lt;/code&gt;, &lt;a class=&#34;link&#34; href=&#34;https://developer.apple.com/documentation/security/1399291-secrandomcopybytes&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://developer.apple.com/documentation/security/1399291-secrandomcopybytes&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Windows ä¸‹çš„ &lt;code&gt;BCryptGenRandom()&lt;/code&gt;, &lt;code&gt;CryptGenRandom()&lt;/code&gt;, &lt;code&gt;RtlGenRandom()&lt;/code&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-c++&#34; data-lang=&#34;c++&#34;&gt;&lt;span class=&#34;cp&#34;&gt;#include&lt;/span&gt; &lt;span class=&#34;cpf&#34;&gt;&amp;lt;openssl/aes.h&amp;gt;&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;#include&lt;/span&gt; &lt;span class=&#34;cpf&#34;&gt;&amp;lt;openssl/crypto.h&amp;gt;&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;#include&lt;/span&gt; &lt;span class=&#34;cpf&#34;&gt;&amp;lt;openssl/rand.h&amp;gt;&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;#include&lt;/span&gt; &lt;span class=&#34;cpf&#34;&gt;&amp;lt;unistd.h&amp;gt;&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;kt&#34;&gt;unsigned&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;char&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;key&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;16&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;];&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;RAND_bytes&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;key&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;],&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;sizeof&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;key&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)))&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;  &lt;span class=&#34;c1&#34;&gt;//... é”™è¯¯å¤„ç†
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;            &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
        &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

        &lt;span class=&#34;n&#34;&gt;AES_KEY&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;aes_key&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;AES_set_encrypt_key&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;key&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;],&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;sizeof&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;key&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;8&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;aes_key&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;))&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
            &lt;span class=&#34;c1&#34;&gt;// ... é”™è¯¯å¤„ç†
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;            &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
        &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

        &lt;span class=&#34;p&#34;&gt;...&lt;/span&gt;

        &lt;span class=&#34;n&#34;&gt;OPENSSL_cleanse&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;key&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;],&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;sizeof&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;key&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;));&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;code&gt;rand()&lt;/code&gt;ç±»å‡½æ•°çš„éšæœºæ€§å¹¶ä¸é«˜ã€‚æ•æ„Ÿæ“ä½œæ—¶ï¼Œå¦‚è®¾è®¡åŠ å¯†ç®—æ³•æ—¶ï¼Œä¸å¾—ä½¿ç”¨rand()æˆ–è€…ç±»ä¼¼çš„ç®€å•çº¿æ€§åŒä½™ä¼ªéšæœºæ•°ç”Ÿæˆå™¨æ¥ä½œä¸ºéšæœºæ•°å‘ç”Ÿå™¨ã€‚ç¬¦åˆè¯¥å®šä¹‰çš„æ¯”ç‰¹åºåˆ—çš„ç‰¹ç‚¹æ˜¯ï¼Œåºåˆ—ä¸­â€œ1â€çš„æ•°é‡çº¦ç­‰äºâ€œ0â€çš„æ•°é‡ï¼›åŒç†ï¼Œâ€œ01â€ã€â€œ00â€ã€â€œ10â€ã€â€œ11â€çš„æ•°é‡å¤§è‡´ç›¸åŒï¼Œä»¥æ­¤ç±»æ¨ã€‚&lt;/p&gt;
&lt;p&gt;ä¾‹å¦‚ C æ ‡å‡†åº“ä¸­çš„ &lt;code&gt;rand()&lt;/code&gt; çš„å®ç°åªæ˜¯ç®€å•çš„&lt;a class=&#34;link&#34; href=&#34;https://sourceware.org/git/?p=glibc.git;a=blob;f=stdlib/random_r.c;hb=glibc-2.28#l353&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;çº¿æ€§åŒä½™ç®—æ³•&lt;/a&gt;ï¼Œç”Ÿæˆçš„ä¼ªéšæœºæ•°å…·æœ‰è¾ƒå¼ºçš„å¯é¢„æµ‹æ€§ã€‚&lt;/p&gt;
&lt;p&gt;å½“éœ€è¦å®ç°é«˜å¼ºåº¦åŠ å¯†ï¼Œä¾‹å¦‚æ¶‰åŠé€šä¿¡å®‰å…¨æ—¶ï¼Œä¸åº”å½“ä½¿ç”¨ &lt;code&gt;rand()&lt;/code&gt; ä½œä¸ºéšæœºæ•°å‘ç”Ÿå™¨ã€‚&lt;/p&gt;
&lt;p&gt;å®é™…åº”ç”¨ä¸­ï¼Œ&lt;a class=&#34;link&#34; href=&#34;https://docs.microsoft.com/en-us/cpp/standard-library/random-device-class?redirectedfrom=MSDN&amp;amp;view=vs-2019#remarks&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt; C++11 æ ‡å‡†æä¾›çš„&lt;code&gt;random_device&lt;/code&gt;ä¿è¯åŠ å¯†çš„å®‰å…¨æ€§å’Œéšæœºæ€§&lt;/a&gt;
ä½†æ˜¯ &lt;a class=&#34;link&#34; href=&#34;https://stackoverflow.com/questions/44867500/is-stdrandom-device-cryptographic-secure&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;C++ æ ‡å‡†å¹¶ä¸ä¿è¯è¿™ä¸€ç‚¹&lt;/a&gt;ã€‚è·¨å¹³å°çš„ä»£ç å¯ä»¥è€ƒè™‘ç”¨ &lt;a class=&#34;link&#34; href=&#34;https://wiki.openssl.org/index.php/Random_Numbers&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;OpenSSL&lt;/a&gt; ç­‰ä¿è¯å¯†ç å­¦å®‰å…¨çš„åº“é‡Œçš„éšæœºæ•°å‘ç”Ÿå™¨ã€‚&lt;/p&gt;
&lt;p&gt;å…³è”æ¼æ´:&lt;/p&gt;
&lt;p&gt;&lt;code&gt;é«˜é£é™©-æ•æ„Ÿæ•°æ®æ³„éœ²&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt;&lt;/p&gt;
&lt;h4 id=&#34;45--å¿…é¡»è‡ªå·±å®ç°çš„randèŒƒå›´ä¸åº”è¿‡å°&#34;&gt;4.5  ã€å¿…é¡»ã€‘è‡ªå·±å®ç°çš„randèŒƒå›´ä¸åº”è¿‡å°&lt;/h4&gt;
&lt;p&gt;å¦‚æœåœ¨å¼±å®‰å…¨åœºæ™¯ç›¸å…³çš„ç®—æ³•ä¸­è‡ªå·±å®ç°äº†PRNGï¼Œè¯·ç¡®ä¿randå‡ºæ¥çš„éšæœºæ•°ä¸ä¼šå¾ˆå°æˆ–å¯é¢„æµ‹ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-c++&#34; data-lang=&#34;c++&#34;&gt;&lt;span class=&#34;c1&#34;&gt;// Bad
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int32_t&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;val&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;((&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;state&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1103515245U&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;12345U&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;999999&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ä¸Šè¿°ä¾‹å­å¯èƒ½æƒ³ç”Ÿæˆ0~999999å…±100ä¸‡ç§å¯èƒ½çš„éšæœºæ•°ï¼Œä½†æ˜¯999999çš„äºŒè¿›åˆ¶æ˜¯11110100001000111111ï¼Œä¸&amp;amp;è¿ç®—åï¼Œ0ä½ä¸€ç›´æ˜¯0ï¼Œæ‰€ä»¥ç”Ÿæˆå‡ºçš„èŒƒå›´æ˜æ˜¾ä¼šå°äº100ä¸‡ç§ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-c++&#34; data-lang=&#34;c++&#34;&gt;&lt;span class=&#34;c1&#34;&gt;// Good
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int32_t&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;val&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;((&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;state&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1103515245U&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;12345U&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;%&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1000000&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;

&lt;span class=&#34;c1&#34;&gt;// Good
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int32_t&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;val&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;((&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;state&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1103515245U&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;12345U&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x7fffffff&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å…³è”æ¼æ´:&lt;/p&gt;
&lt;p&gt;&lt;code&gt;é«˜é£é™©-é€»è¾‘æ¼æ´&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt;&lt;/p&gt;
&lt;h3 id=&#34;æ–‡ä»¶æ“ä½œ&#34;&gt;æ–‡ä»¶æ“ä½œ&lt;/h3&gt;
&lt;h4 id=&#34;å¿…é¡»é¿å…è·¯å¾„ç©¿è¶Šé—®é¢˜&#34;&gt;ã€å¿…é¡»ã€‘é¿å…è·¯å¾„ç©¿è¶Šé—®é¢˜&lt;/h4&gt;
&lt;p&gt;åœ¨è¿›è¡Œæ–‡ä»¶æ“ä½œæ—¶ï¼Œéœ€è¦åˆ¤æ–­å¤–éƒ¨ä¼ å…¥çš„æ–‡ä»¶åæ˜¯å¦åˆæ³•ï¼Œå¦‚æœæ–‡ä»¶åä¸­åŒ…å« &lt;code&gt;../&lt;/code&gt; ç­‰ç‰¹æ®Šå­—ç¬¦ï¼Œåˆ™ä¼šé€ æˆè·¯å¾„ç©¿è¶Šï¼Œå¯¼è‡´ä»»æ„æ–‡ä»¶çš„è¯»å†™ã€‚&lt;/p&gt;
&lt;p&gt;é”™è¯¯ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-c++&#34; data-lang=&#34;c++&#34;&gt;&lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;Foo&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
  &lt;span class=&#34;kt&#34;&gt;char&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;file_path&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;PATH_MAX&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;/home/user/code/&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
  &lt;span class=&#34;c1&#34;&gt;// å¦‚æœä¼ å…¥çš„æ–‡ä»¶ååŒ…å«../å¯å¯¼è‡´è·¯å¾„ç©¿è¶Š
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;  &lt;span class=&#34;c1&#34;&gt;// ä¾‹å¦‚&amp;#34;../file.txt&amp;#34;ï¼Œåˆ™å¯ä»¥è¯»å–åˆ°ä¸Šå±‚ç›®å½•çš„file.txtæ–‡ä»¶
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;  &lt;span class=&#34;kt&#34;&gt;char&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;20&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;../file.txt&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
  &lt;span class=&#34;n&#34;&gt;memcpy&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;file_path&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;strlen&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;file_path&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;),&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;sizeof&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;));&lt;/span&gt;
  &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;fd&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;open&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;file_path&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;O_RDONLY&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
  &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;fd&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;kt&#34;&gt;char&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;data&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;100&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;};&lt;/span&gt;
    &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;num&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;memset&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;data&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;sizeof&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;data&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;));&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;num&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;read&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;fd&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;data&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;sizeof&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;data&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;));&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;num&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
      &lt;span class=&#34;n&#34;&gt;write&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;STDOUT_FILENO&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;data&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;num&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;close&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;fd&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
  &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;æ­£ç¡®ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-c++&#34; data-lang=&#34;c++&#34;&gt;&lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;Foo&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
  &lt;span class=&#34;kt&#34;&gt;char&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;file_path&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;PATH_MAX&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;/home/user/code/&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
  &lt;span class=&#34;kt&#34;&gt;char&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;20&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;../file.txt&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
  &lt;span class=&#34;c1&#34;&gt;// åˆ¤æ–­ä¼ å…¥çš„æ–‡ä»¶åæ˜¯å¦éæ³•ï¼Œä¾‹å¦‚&amp;#34;../file.txt&amp;#34;ä¸­åŒ…å«éæ³•å­—ç¬¦../ï¼Œç›´æ¥è¿”å›
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;  &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;strstr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;..&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;NULL&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;){&lt;/span&gt;
    &lt;span class=&#34;c1&#34;&gt;// åŒ…å«éæ³•å­—ç¬¦
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
  &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
  &lt;span class=&#34;n&#34;&gt;memcpy&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;file_path&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;strlen&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;file_path&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;),&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;sizeof&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;));&lt;/span&gt;
  &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;fd&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;open&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;file_path&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;O_RDONLY&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
  &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;fd&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;kt&#34;&gt;char&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;data&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;100&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;};&lt;/span&gt;
    &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;num&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;memset&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;data&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;sizeof&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;data&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;));&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;num&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;read&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;fd&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;data&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;sizeof&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;data&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;));&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;num&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
      &lt;span class=&#34;n&#34;&gt;write&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;STDOUT_FILENO&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;data&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;num&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;close&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;fd&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
   &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å…³è”æ¼æ´:&lt;/p&gt;
&lt;p&gt;&lt;code&gt;é«˜é£é™©-é€»è¾‘æ¼æ´&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt;&lt;/p&gt;
&lt;h4 id=&#34;å¿…é¡»é¿å…ç›¸å¯¹è·¯å¾„å¯¼è‡´çš„å®‰å…¨é—®é¢˜dllexeåŠ«æŒç­‰é—®é¢˜&#34;&gt;ã€å¿…é¡»ã€‘é¿å…ç›¸å¯¹è·¯å¾„å¯¼è‡´çš„å®‰å…¨é—®é¢˜ï¼ˆDLLã€EXEåŠ«æŒç­‰é—®é¢˜ï¼‰&lt;/h4&gt;
&lt;p&gt;åœ¨ç¨‹åºä¸­ï¼Œä½¿ç”¨ç›¸å¯¹è·¯å¾„å¯èƒ½å¯¼è‡´ä¸€äº›å®‰å…¨é£é™©ï¼Œä¾‹å¦‚DLLã€EXEåŠ«æŒç­‰é—®é¢˜ã€‚&lt;/p&gt;
&lt;p&gt;ä¾‹å¦‚ä»¥ä¸‹ä»£ç ï¼Œå¯èƒ½å­˜åœ¨åŠ«æŒé—®é¢˜ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-c++&#34; data-lang=&#34;c++&#34;&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;Foo&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
  &lt;span class=&#34;c1&#34;&gt;// ä¼ å…¥çš„æ˜¯dllæ–‡ä»¶åï¼Œå¦‚æœå½“å‰ç›®å½•ä¸‹è¢«å†™å…¥äº†æ¶æ„çš„åŒådllï¼Œåˆ™å¯èƒ½å¯¼è‡´dllåŠ«æŒ
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;  &lt;span class=&#34;n&#34;&gt;HINSTANCE&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;hinst&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;LoadLibrary&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;dll_nolib.dll&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
  &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;hinst&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;NULL&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;cout&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;dll loaded!&amp;#34;&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;endl&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
  &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
  &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;é’ˆå¯¹DLLåŠ«æŒçš„å®‰å…¨ç¼–ç çš„è§„èŒƒï¼š&lt;/p&gt;
&lt;p&gt;1ï¼‰è°ƒç”¨LoadLibraryï¼ŒLoadLibraryExï¼ŒCreateProcessï¼ŒShellExecuteç­‰è¿›è¡Œæ¨¡å—åŠ è½½çš„å‡½æ•°æ—¶ï¼ŒæŒ‡æ˜æ¨¡å—çš„å®Œæ•´ï¼ˆå…¨ï¼‰è·¯å¾„ï¼Œç¦æ­¢ä½¿ç”¨ç›¸å¯¹è·¯å¾„ï¼Œè¿™æ ·å°±å¯é¿å…ä»å…¶å®ƒç›®å½•åŠ è½½DLLã€‚
2ï¼‰åœ¨åº”ç”¨ç¨‹åºçš„å¼€å¤´è°ƒç”¨SetDllDirectory(TEXT(&amp;quot;&amp;quot;)); ä»è€Œå°†å½“å‰ç›®å½•ä»DLLçš„æœç´¢åˆ—è¡¨ä¸­åˆ é™¤ã€‚ç»“åˆSetDefaultDllDirectoriesï¼ŒAddDllDirectoryï¼ŒRemoveDllDirectoryè¿™å‡ ä¸ªAPIé…åˆä½¿ç”¨ï¼Œå¯ä»¥æœ‰æ•ˆçš„è§„é¿DLLåŠ«æŒé—®é¢˜ã€‚è¿™äº›APIåªèƒ½åœ¨æ‰“äº†KB2533623è¡¥ä¸çš„Windows7ï¼Œ2008ä¸Šä½¿ç”¨ã€‚&lt;/p&gt;
&lt;p&gt;å…³è”æ¼æ´:&lt;/p&gt;
&lt;p&gt;&lt;code&gt;ä¸­é£é™©-é€»è¾‘æ¼æ´&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt;&lt;/p&gt;
&lt;h4 id=&#34;å¿…é¡»æ–‡ä»¶æƒé™æ§åˆ¶&#34;&gt;ã€å¿…é¡»ã€‘æ–‡ä»¶æƒé™æ§åˆ¶&lt;/h4&gt;
&lt;p&gt;åœ¨åˆ›å»ºæ–‡ä»¶æ—¶ï¼Œéœ€è¦æ ¹æ®æ–‡ä»¶çš„æ•æ„Ÿçº§åˆ«è®¾ç½®ä¸åŒçš„è®¿é—®æƒé™ï¼Œä»¥é˜²æ­¢æ•æ„Ÿæ•°æ®è¢«å…¶ä»–æ¶æ„ç¨‹åºè¯»å–æˆ–å†™å…¥ã€‚&lt;/p&gt;
&lt;p&gt;é”™è¯¯ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-c++&#34; data-lang=&#34;c++&#34;&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;Foo&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
  &lt;span class=&#34;c1&#34;&gt;// ä¸è¦è®¾ç½®ä¸º777æƒé™ï¼Œä»¥é˜²æ­¢è¢«å…¶ä»–æ¶æ„ç¨‹åºæ“ä½œ
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;  &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;creat&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;file.txt&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mo&#34;&gt;0777&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;printf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;æ–‡ä»¶åˆ›å»ºå¤±è´¥ï¼&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\n&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
  &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;else&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;printf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;æ–‡ä»¶åˆ›å»ºæˆåŠŸï¼&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\n&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
  &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
  &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å…³è”æ¼æ´:&lt;/p&gt;
&lt;p&gt;&lt;code&gt;ä¸­é£é™©-é€»è¾‘æ¼æ´&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt;&lt;/p&gt;
&lt;h3 id=&#34;å†…å­˜æ“ä½œ&#34;&gt;å†…å­˜æ“ä½œ&lt;/h3&gt;
&lt;h4 id=&#34;å¿…é¡»é˜²æ­¢å„ç§è¶Šç•Œå†™å‘å‰å‘å&#34;&gt;ã€å¿…é¡»ã€‘é˜²æ­¢å„ç§è¶Šç•Œå†™ï¼ˆå‘å‰/å‘åï¼‰&lt;/h4&gt;
&lt;p&gt;é”™è¯¯1ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-c++&#34; data-lang=&#34;c++&#34;&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;a&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;5&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;];&lt;/span&gt;
&lt;span class=&#34;n&#34;&gt;a&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;5&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;é”™è¯¯2ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-c++&#34; data-lang=&#34;c++&#34;&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;a&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;5&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;];&lt;/span&gt;
&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;b&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;user_controlled_value&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;span class=&#34;n&#34;&gt;a&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;b&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;3&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å…³è”æ¼æ´:&lt;/p&gt;
&lt;p&gt;&lt;code&gt;é«˜é£é™©-å†…å­˜ç ´å&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt;&lt;/p&gt;
&lt;h4 id=&#34;å¿…é¡»é˜²æ­¢ä»»æ„åœ°å€å†™&#34;&gt;ã€å¿…é¡»ã€‘é˜²æ­¢ä»»æ„åœ°å€å†™&lt;/h4&gt;
&lt;p&gt;ä»»æ„åœ°å€å†™ä¼šå¯¼è‡´ä¸¥é‡çš„å®‰å…¨éšæ‚£ï¼Œå¯èƒ½å¯¼è‡´ä»£ç æ‰§è¡Œã€‚å› æ­¤ï¼Œåœ¨ç¼–ç æ—¶å¿…é¡»æ ¡éªŒå†™å…¥çš„åœ°å€ã€‚&lt;/p&gt;
&lt;p&gt;é”™è¯¯ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-c++&#34; data-lang=&#34;c++&#34;&gt;&lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;Write&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;MyStruct&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;dst_struct&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
  &lt;span class=&#34;kt&#34;&gt;char&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;payload&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;10&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;};&lt;/span&gt;
  &lt;span class=&#34;n&#34;&gt;memcpy&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;dst_struct&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;buf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;payload&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;sizeof&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;payload&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;));&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;main&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
  &lt;span class=&#34;n&#34;&gt;MyStruct&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;dst_stuct&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
  &lt;span class=&#34;n&#34;&gt;dst_stuct&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;buf&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;char&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;user_controlled_value&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
  &lt;span class=&#34;n&#34;&gt;Write&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;dst_stuct&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
  &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å…³è”æ¼æ´:&lt;/p&gt;
&lt;p&gt;&lt;code&gt;é«˜é£é™©-å†…å­˜ç ´å&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt;&lt;/p&gt;
&lt;h3 id=&#34;æ•°å­—æ“ä½œ&#34;&gt;æ•°å­—æ“ä½œ&lt;/h3&gt;
&lt;h4 id=&#34;å¿…é¡»é˜²æ­¢æ•´æ•°æº¢å‡º&#34;&gt;ã€å¿…é¡»ã€‘é˜²æ­¢æ•´æ•°æº¢å‡º&lt;/h4&gt;
&lt;p&gt;åœ¨è®¡ç®—æ—¶éœ€è¦è€ƒè™‘æ•´æ•°æº¢å‡ºçš„å¯èƒ½ï¼Œå°¤å…¶åœ¨è¿›è¡Œå†…å­˜æ“ä½œæ—¶ï¼Œéœ€è¦å¯¹åˆ†é…ã€æ‹·è´ç­‰å¤§å°è¿›è¡Œåˆæ³•æ ¡éªŒï¼Œé˜²æ­¢æ•´æ•°æº¢å‡ºå¯¼è‡´çš„æ¼æ´ã€‚&lt;/p&gt;
&lt;p&gt;é”™è¯¯ï¼ˆè¯¥ä¾‹å­åœ¨è®¡ç®—æ—¶äº§ç”Ÿæ•´æ•°æº¢å‡ºï¼‰&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-c++&#34; data-lang=&#34;c++&#34;&gt;&lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;kMicLen&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;4&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;span class=&#34;c1&#34;&gt;// æ•´æ•°æº¢å‡º
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;Foo&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
  &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;len&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
  &lt;span class=&#34;kt&#34;&gt;char&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;payload&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;10&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;};&lt;/span&gt;
  &lt;span class=&#34;kt&#34;&gt;char&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;dst&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;10&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;};&lt;/span&gt;
  &lt;span class=&#34;c1&#34;&gt;// Bad, ç”±äºlenå°äº4å­—èŠ‚ï¼Œå¯¼è‡´è®¡ç®—æ‹·è´é•¿åº¦æ—¶ï¼Œæ•´æ•°æº¢å‡º
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;  &lt;span class=&#34;c1&#34;&gt;// len - MIC_LEN == 0xfffffffd
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;  &lt;span class=&#34;n&#34;&gt;memcpy&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;dst&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;payload&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;len&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;kMicLen&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;æ­£ç¡®ä¾‹å­&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-c++&#34; data-lang=&#34;c++&#34;&gt;&lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;Foo&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
  &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;len&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
  &lt;span class=&#34;kt&#34;&gt;char&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;payload&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;10&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;};&lt;/span&gt;
  &lt;span class=&#34;kt&#34;&gt;char&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;dst&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;10&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;};&lt;/span&gt;
  &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;size&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;len&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;kMicLen&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
  &lt;span class=&#34;c1&#34;&gt;// æ‹·è´å‰å¯¹é•¿åº¦è¿›è¡Œåˆ¤æ–­
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;  &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;size&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;size&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;10&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;memcpy&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;dst&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;payload&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;size&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;printf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;memcpy good&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\n&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
  &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å…³è”æ¼æ´:&lt;/p&gt;
&lt;p&gt;&lt;code&gt;é«˜é£é™©-å†…å­˜ç ´å&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt;&lt;/p&gt;
&lt;h4 id=&#34;å¿…é¡»é˜²æ­¢off-by-one&#34;&gt;ã€å¿…é¡»ã€‘é˜²æ­¢Off-By-One&lt;/h4&gt;
&lt;p&gt;åœ¨è¿›è¡Œè®¡ç®—æˆ–è€…æ“ä½œæ—¶ï¼Œå¦‚æœä½¿ç”¨çš„æœ€å¤§å€¼æˆ–æœ€å°å€¼ä¸æ­£ç¡®ï¼Œä½¿å¾—è¯¥å€¼æ¯”æ­£ç¡®å€¼å¤š1æˆ–å°‘1ï¼Œå¯èƒ½å¯¼è‡´å®‰å…¨é£é™©ã€‚&lt;/p&gt;
&lt;p&gt;é”™è¯¯ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-c++&#34; data-lang=&#34;c++&#34;&gt;&lt;span class=&#34;kt&#34;&gt;char&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;firstname&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;20&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;];&lt;/span&gt;
&lt;span class=&#34;kt&#34;&gt;char&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;lastname&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;20&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;];&lt;/span&gt;
&lt;span class=&#34;kt&#34;&gt;char&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;fullname&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;40&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;];&lt;/span&gt;

&lt;span class=&#34;n&#34;&gt;fullname&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;sc&#34;&gt;&amp;#39;\0&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;

&lt;span class=&#34;n&#34;&gt;strncat&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;fullname&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;firstname&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;20&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;span class=&#34;c1&#34;&gt;// ç¬¬äºŒæ¬¡è°ƒç”¨strncat()å¯èƒ½ä¼šè¿½åŠ å¦å¤–20ä¸ªå­—ç¬¦ã€‚å¦‚æœè¿™20ä¸ªå­—ç¬¦æ²¡æœ‰ç»ˆæ­¢ç©ºå­—ç¬¦ï¼Œåˆ™å­˜åœ¨å®‰å…¨é—®é¢˜
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;strncat&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;fullname&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;lastname&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;20&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;æ­£ç¡®ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-c++&#34; data-lang=&#34;c++&#34;&gt;&lt;span class=&#34;kt&#34;&gt;char&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;firstname&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;20&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;];&lt;/span&gt;
&lt;span class=&#34;kt&#34;&gt;char&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;lastname&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;20&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;];&lt;/span&gt;
&lt;span class=&#34;kt&#34;&gt;char&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;fullname&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;40&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;];&lt;/span&gt;

&lt;span class=&#34;n&#34;&gt;fullname&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;sc&#34;&gt;&amp;#39;\0&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;

&lt;span class=&#34;c1&#34;&gt;// å½“ä½¿ç”¨åƒstrncat()å‡½æ•°æ—¶ï¼Œå¿…é¡»åœ¨ç¼“å†²åŒºçš„æœ«å°¾ä¸ºç»ˆæ­¢ç©ºå­—ç¬¦ç•™ä¸‹ä¸€ä¸ªç©ºå­—èŠ‚ï¼Œé¿å…off-by-one
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;strncat&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;fullname&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;firstname&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;sizeof&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;fullname&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;strlen&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;fullname&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;span class=&#34;n&#34;&gt;strncat&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;fullname&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;lastname&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;sizeof&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;fullname&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;strlen&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;fullname&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å¯¹äº C++ ä»£ç ï¼Œå†æ¬¡å¼ºçƒˆå»ºè®®ä½¿ç”¨ &lt;code&gt;string&lt;/code&gt;ã€&lt;code&gt;vector&lt;/code&gt; ç­‰ç»„ä»¶ä»£æ›¿åŸå§‹æŒ‡é’ˆå’Œæ•°ç»„æ“ä½œã€‚&lt;/p&gt;
&lt;p&gt;å…³è”æ¼æ´:&lt;/p&gt;
&lt;p&gt;&lt;code&gt;é«˜é£é™©-å†…å­˜ç ´å&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt;&lt;/p&gt;
&lt;h4 id=&#34;å¿…é¡»é¿å…å¤§å°ç«¯é”™è¯¯&#34;&gt;ã€å¿…é¡»ã€‘é¿å…å¤§å°ç«¯é”™è¯¯&lt;/h4&gt;
&lt;p&gt;åœ¨ä¸€äº›æ¶‰åŠå¤§å°ç«¯æ•°æ®å¤„ç†çš„åœºæ™¯ï¼Œéœ€è¦è¿›è¡Œå¤§å°ç«¯åˆ¤æ–­ï¼Œä¾‹å¦‚ä»å¤§ç«¯è®¾å¤‡å–å‡ºçš„å€¼ï¼Œè¦ä»¥å¤§ç«¯è¿›è¡Œå¤„ç†ï¼Œé¿å…ç«¯åºé”™è¯¯ä½¿ç”¨ã€‚&lt;/p&gt;
&lt;p&gt;å…³è”æ¼æ´:&lt;/p&gt;
&lt;p&gt;&lt;code&gt;ä¸­é£é™©-é€»è¾‘æ¼æ´&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt;&lt;/p&gt;
&lt;h4 id=&#34;å¿…é¡»æ£€æŸ¥é™¤ä»¥é›¶å¼‚å¸¸&#34;&gt;ã€å¿…é¡»ã€‘æ£€æŸ¥é™¤ä»¥é›¶å¼‚å¸¸&lt;/h4&gt;
&lt;p&gt;åœ¨è¿›è¡Œé™¤æ³•è¿ç®—æ—¶ï¼Œéœ€è¦åˆ¤æ–­è¢«é™¤æ•°æ˜¯å¦ä¸ºé›¶ï¼Œä»¥é˜²å¯¼è‡´ç¨‹åºä¸ç¬¦åˆé¢„æœŸæˆ–è€…å´©æºƒã€‚&lt;/p&gt;
&lt;p&gt;é”™è¯¯ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-c++&#34; data-lang=&#34;c++&#34;&gt;&lt;span class=&#34;kt&#34;&gt;double&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;divide&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;double&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;x&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;double&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;y&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
  &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;x&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;/&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;y&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;divide&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;x&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;y&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
  &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;x&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;/&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;y&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;æ­£ç¡®ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-c++&#34; data-lang=&#34;c++&#34;&gt;&lt;span class=&#34;kt&#34;&gt;double&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;divide&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;double&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;x&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;double&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;y&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
  &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;y&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;throw&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;DivideByZero&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
  &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
  &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;x&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;/&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;y&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å…³è”æ¼æ´:&lt;/p&gt;
&lt;p&gt;&lt;code&gt;ä½é£é™©-æ‹’ç»æœåŠ¡&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt;&lt;/p&gt;
&lt;h4 id=&#34;å¿…é¡»é˜²æ­¢æ•°å­—ç±»å‹çš„é”™è¯¯å¼ºè½¬&#34;&gt;ã€å¿…é¡»ã€‘é˜²æ­¢æ•°å­—ç±»å‹çš„é”™è¯¯å¼ºè½¬&lt;/h4&gt;
&lt;p&gt;åœ¨æœ‰ç¬¦å·å’Œæ— ç¬¦å·æ•°å­—å‚ä¸çš„è¿ç®—ä¸­ï¼Œéœ€è¦æ³¨æ„ç±»å‹å¼ºè½¬å¯èƒ½å¯¼è‡´çš„é€»è¾‘é”™è¯¯ï¼Œå»ºè®®æŒ‡å®šå‚ä¸è®¡ç®—æ—¶æ•°å­—çš„ç±»å‹æˆ–è€…ç»Ÿä¸€ç±»å‹å‚ä¸è®¡ç®—ã€‚&lt;/p&gt;
&lt;p&gt;é”™è¯¯ä¾‹å­&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-c++&#34; data-lang=&#34;c++&#34;&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;Foo&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
  &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;len&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
  &lt;span class=&#34;kt&#34;&gt;unsigned&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;size&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;9&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
  &lt;span class=&#34;c1&#34;&gt;// 1 &amp;lt; 9 - 10 ? ç”±äºè¿ç®—ä¸­æ— ç¬¦å·å’Œæœ‰ç¬¦å·æ··ç”¨ï¼Œå¯¼è‡´è®¡ç®—ç»“æœä»¥æ— ç¬¦å·è®¡ç®—
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;  &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;len&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;size&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;10&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;printf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;Bad&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\n&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
  &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;else&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;printf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;Good&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\n&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
  &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;æ­£ç¡®ä¾‹å­&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-c++&#34; data-lang=&#34;c++&#34;&gt;&lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;Foo&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
  &lt;span class=&#34;c1&#34;&gt;// ç»Ÿä¸€ä¸¤è€…è®¡ç®—ç±»å‹ä¸ºæœ‰ç¬¦å·
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;  &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;len&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
  &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;size&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;9&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
  &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;len&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;size&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;10&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;printf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;Bad&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\n&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
  &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;else&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;printf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;Good&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\n&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
  &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å…³è”æ¼æ´:&lt;/p&gt;
&lt;p&gt;&lt;code&gt;é«˜é£é™©-å†…å­˜ç ´å&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;ä¸­é£é™©-é€»è¾‘æ¼æ´&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt;&lt;/p&gt;
&lt;h4 id=&#34;å¿…é¡»æ¯”è¾ƒæ•°æ®å¤§å°æ—¶åŠ ä¸Šæœ€å°æœ€å¤§å€¼çš„æ ¡éªŒ&#34;&gt;ã€å¿…é¡»ã€‘æ¯”è¾ƒæ•°æ®å¤§å°æ—¶åŠ ä¸Šæœ€å°/æœ€å¤§å€¼çš„æ ¡éªŒ&lt;/h4&gt;
&lt;p&gt;åœ¨è¿›è¡Œæ•°æ®å¤§å°æ¯”è¾ƒæ—¶ï¼Œè¦åˆç†åœ°æ ¡éªŒæ•°æ®çš„åŒºé—´èŒƒå›´ï¼Œå»ºè®®æ ¹æ®æ•°å­—ç±»å‹ï¼Œå¯¹å…¶è¿›è¡Œæœ€å¤§å’Œæœ€å°å€¼çš„åˆ¤æ–­ï¼Œä»¥é˜²æ­¢éé¢„æœŸé”™è¯¯ã€‚&lt;/p&gt;
&lt;p&gt;é”™è¯¯ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-c++&#34; data-lang=&#34;c++&#34;&gt;&lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;Foo&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;index&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
  &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;a&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;30&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;};&lt;/span&gt;
  &lt;span class=&#34;c1&#34;&gt;// æ­¤å¤„indexæ˜¯intå‹ï¼Œåªè€ƒè™‘äº†indexå°äºæ•°ç»„å¤§å°ï¼Œä½†æ˜¯å¹¶æœªåˆ¤æ–­æ˜¯å¦å¤§äº0
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;  &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;index&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;30&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;c1&#34;&gt;// å¦‚æœindexä¸ºè´Ÿæ•°ï¼Œåˆ™è¶Šç•Œ
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;n&#34;&gt;a&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;index&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
  &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;æ­£ç¡®ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-c++&#34; data-lang=&#34;c++&#34;&gt;&lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;Foo&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;index&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
  &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;a&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;30&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;};&lt;/span&gt;
  &lt;span class=&#34;c1&#34;&gt;// åˆ¤æ–­indexçš„æœ€å¤§æœ€å°å€¼
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;  &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;index&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;gt;=&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;index&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;30&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;a&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;index&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
  &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å…³è”æ¼æ´:&lt;/p&gt;
&lt;p&gt;&lt;code&gt;é«˜é£é™©-å†…å­˜ç ´å&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt;&lt;/p&gt;
&lt;h3 id=&#34;æŒ‡é’ˆæ“ä½œ&#34;&gt;æŒ‡é’ˆæ“ä½œ&lt;/h3&gt;
&lt;h4 id=&#34;å»ºè®®æ£€æŸ¥åœ¨pointerä¸Šä½¿ç”¨sizeof&#34;&gt;ã€å»ºè®®ã€‘æ£€æŸ¥åœ¨pointerä¸Šä½¿ç”¨sizeof&lt;/h4&gt;
&lt;p&gt;é™¤äº†æµ‹è¯•å½“å‰æŒ‡é’ˆé•¿åº¦ï¼Œå¦åˆ™ä¸€èˆ¬ä¸ä¼šåœ¨pointerä¸Šä½¿ç”¨sizeofã€‚&lt;/p&gt;
&lt;p&gt;æ­£ç¡®ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-c++&#34; data-lang=&#34;c++&#34;&gt;&lt;span class=&#34;n&#34;&gt;size_t&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;pointer_length&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;sizeof&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å¯èƒ½é”™è¯¯ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-c++&#34; data-lang=&#34;c++&#34;&gt;&lt;span class=&#34;n&#34;&gt;size_t&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;structure_length&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;sizeof&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Foo&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å¯èƒ½æ˜¯ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-c++&#34; data-lang=&#34;c++&#34;&gt;&lt;span class=&#34;n&#34;&gt;size_t&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;structure_length&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;sizeof&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Foo&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å…³è”æ¼æ´:&lt;/p&gt;
&lt;p&gt;&lt;code&gt;ä¸­é£é™©-é€»è¾‘æ¼æ´&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt;&lt;/p&gt;
&lt;h4 id=&#34;å¿…é¡»æ£€æŸ¥ç›´æ¥å°†æ•°ç»„å’Œ0æ¯”è¾ƒçš„ä»£ç &#34;&gt;ã€å¿…é¡»ã€‘æ£€æŸ¥ç›´æ¥å°†æ•°ç»„å’Œ0æ¯”è¾ƒçš„ä»£ç &lt;/h4&gt;
&lt;p&gt;é”™è¯¯ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-c++&#34; data-lang=&#34;c++&#34;&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;a&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;3&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;];&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;...;&lt;/span&gt;

&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;a&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
  &lt;span class=&#34;p&#34;&gt;...;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;è¯¥åˆ¤æ–­æ°¸è¿œä¸ºçœŸï¼Œç­‰ä»·äº:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-c++&#34; data-lang=&#34;c++&#34;&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;a&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;3&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;];&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;...;&lt;/span&gt;

&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;a&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;])&lt;/span&gt;
  &lt;span class=&#34;p&#34;&gt;...;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å¯èƒ½æ˜¯ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-c++&#34; data-lang=&#34;c++&#34;&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;a&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;3&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;];&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;...;&lt;/span&gt;

&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;a&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
  &lt;span class=&#34;p&#34;&gt;...;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å¼€å¯è¶³å¤Ÿçš„ç¼–è¯‘å™¨è­¦å‘Šï¼ˆGCC ä¸­ä¸º &lt;code&gt;-Waddress&lt;/code&gt;ï¼Œå¹¶å·²åŒ…å«åœ¨ &lt;code&gt;-Wall&lt;/code&gt; ä¸­ï¼‰ï¼Œå¹¶è®¾ç½®ä¸ºé”™è¯¯ï¼Œå¯ä»¥åœ¨ç¼–è¯‘æœŸé—´å‘ç°è¯¥é—®é¢˜ã€‚&lt;/p&gt;
&lt;p&gt;å…³è”æ¼æ´:&lt;/p&gt;
&lt;p&gt;&lt;code&gt;ä¸­é£é™©-é€»è¾‘æ¼æ´&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt;&lt;/p&gt;
&lt;h4 id=&#34;å¿…é¡»ä¸åº”å½“å‘æŒ‡é’ˆèµ‹äºˆå†™æ­»çš„åœ°å€&#34;&gt;ã€å¿…é¡»ã€‘ä¸åº”å½“å‘æŒ‡é’ˆèµ‹äºˆå†™æ­»çš„åœ°å€&lt;/h4&gt;
&lt;p&gt;ç‰¹æ®Šæƒ…å†µéœ€è¦ç‰¹æ®Šå¯¹å¾…ï¼ˆæ¯”å¦‚å¼€å‘ç¡¬ä»¶å›ºä»¶æ—¶å¯èƒ½éœ€è¦å†™æ­»ï¼‰&lt;/p&gt;
&lt;p&gt;ä½†æ˜¯å¦‚æœæ˜¯ç³»ç»Ÿé©±åŠ¨å¼€å‘ä¹‹ç±»çš„ï¼Œå†™æ­»å¯èƒ½ä¼šå¯¼è‡´åç»­çš„é—®é¢˜ã€‚&lt;/p&gt;
&lt;p&gt;å…³è”æ¼æ´:&lt;/p&gt;
&lt;p&gt;&lt;code&gt;é«˜é£é™©-å†…å­˜ç ´å&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt;&lt;/p&gt;
&lt;h4 id=&#34;å¿…é¡»æ£€æŸ¥ç©ºæŒ‡é’ˆ&#34;&gt;ã€å¿…é¡»ã€‘æ£€æŸ¥ç©ºæŒ‡é’ˆ&lt;/h4&gt;
&lt;p&gt;é”™è¯¯ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-c++&#34; data-lang=&#34;c++&#34;&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;foo&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;100&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;

&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;!&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;foo&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
  &lt;span class=&#34;n&#34;&gt;ERROR&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;foobar&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;æ­£ç¡®ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-c++&#34; data-lang=&#34;c++&#34;&gt;&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;!&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;foo&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
  &lt;span class=&#34;n&#34;&gt;ERROR&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;foobar&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;foo&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;100&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;é”™è¯¯ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-c++&#34; data-lang=&#34;c++&#34;&gt;&lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;Foo&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;char&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;bar&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
  &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;bar&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;sc&#34;&gt;&amp;#39;\0&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;æ­£ç¡®ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-c++&#34; data-lang=&#34;c++&#34;&gt;&lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;Foo&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;char&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;bar&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
  &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;bar&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;bar&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;sc&#34;&gt;&amp;#39;\0&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
  &lt;span class=&#34;k&#34;&gt;else&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;...;&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å…³è”æ¼æ´:&lt;/p&gt;
&lt;p&gt;&lt;code&gt;ä½é£é™©-æ‹’ç»æœåŠ¡&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt;&lt;/p&gt;
&lt;h4 id=&#34;å¿…é¡»é‡Šæ”¾å®Œåç½®ç©ºæŒ‡é’ˆ&#34;&gt;ã€å¿…é¡»ã€‘é‡Šæ”¾å®Œåç½®ç©ºæŒ‡é’ˆ&lt;/h4&gt;
&lt;p&gt;åœ¨å¯¹æŒ‡é’ˆè¿›è¡Œé‡Šæ”¾åï¼Œéœ€è¦å°†è¯¥æŒ‡é’ˆè®¾ç½®ä¸ºNULLï¼Œä»¥é˜²æ­¢åç»­freeæŒ‡é’ˆçš„è¯¯ç”¨ï¼Œå¯¼è‡´UAFç­‰å…¶ä»–å†…å­˜ç ´åé—®é¢˜ã€‚å°¤å…¶æ˜¯åœ¨ç»“æ„ä½“ã€ç±»é‡Œé¢å­˜å‚¨çš„åŸå§‹æŒ‡é’ˆã€‚&lt;/p&gt;
&lt;p&gt;é”™è¯¯ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-c++&#34; data-lang=&#34;c++&#34;&gt;&lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;foo&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
  &lt;span class=&#34;kt&#34;&gt;char&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;p&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;char&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;malloc&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;100&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
  &lt;span class=&#34;n&#34;&gt;memcpy&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;p&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;hello&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;6&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
  &lt;span class=&#34;c1&#34;&gt;// æ­¤æ—¶pæ‰€æŒ‡å‘çš„å†…å­˜å·²è¢«é‡Šæ”¾ï¼Œä½†æ˜¯pæ‰€æŒ‡çš„åœ°å€ä»ç„¶ä¸å˜
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;  &lt;span class=&#34;n&#34;&gt;printf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;%s&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\n&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;p&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
  &lt;span class=&#34;n&#34;&gt;free&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;p&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
  &lt;span class=&#34;c1&#34;&gt;// æœªè®¾ç½®ä¸ºNULLï¼Œå¯èƒ½å¯¼è‡´UAFç­‰å†…å­˜é”™è¯¯
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;
  &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;p&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;NULL&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;  &lt;span class=&#34;c1&#34;&gt;// æ²¡æœ‰èµ·åˆ°é˜²é”™ä½œç”¨
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;n&#34;&gt;printf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;%s&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\n&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;p&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;// é”™è¯¯ä½¿ç”¨å·²ç»é‡Šæ”¾çš„å†…å­˜
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;  &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;æ­£ç¡®ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-c++&#34; data-lang=&#34;c++&#34;&gt;&lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;foo&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
  &lt;span class=&#34;kt&#34;&gt;char&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;p&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;char&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;malloc&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;100&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
  &lt;span class=&#34;n&#34;&gt;memcpy&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;p&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;hello&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;6&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
  &lt;span class=&#34;c1&#34;&gt;// æ­¤æ—¶pæ‰€æŒ‡å‘çš„å†…å­˜å·²è¢«é‡Šæ”¾ï¼Œä½†æ˜¯pæ‰€æŒ‡çš„åœ°å€ä»ç„¶ä¸å˜
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;  &lt;span class=&#34;n&#34;&gt;printf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;%s&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\n&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;p&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
  &lt;span class=&#34;n&#34;&gt;free&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;p&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
  &lt;span class=&#34;c1&#34;&gt;//é‡Šæ”¾åå°†æŒ‡é’ˆèµ‹å€¼ä¸ºç©º
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;  &lt;span class=&#34;n&#34;&gt;p&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;NULL&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
  &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;p&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;NULL&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;  &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;// æ²¡æœ‰èµ·åˆ°é˜²é”™ä½œç”¨
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;n&#34;&gt;printf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;%s&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\n&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;p&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;// é”™è¯¯ä½¿ç”¨å·²ç»é‡Šæ”¾çš„å†…å­˜
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;  &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å¯¹äº C++ ä»£ç ï¼Œä½¿ç”¨ stringã€vectorã€æ™ºèƒ½æŒ‡é’ˆç­‰ä»£æ›¿åŸå§‹å†…å­˜ç®¡ç†æœºåˆ¶ï¼Œå¯ä»¥å¤§é‡å‡å°‘è¿™ç±»é”™è¯¯ã€‚&lt;/p&gt;
&lt;p&gt;å…³è”æ¼æ´:&lt;/p&gt;
&lt;p&gt;&lt;code&gt;é«˜é£é™©-å†…å­˜ç ´å&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt;&lt;/p&gt;
&lt;h4 id=&#34;å¿…é¡»é˜²æ­¢é”™è¯¯çš„ç±»å‹è½¬æ¢type-confusion&#34;&gt;ã€å¿…é¡»ã€‘é˜²æ­¢é”™è¯¯çš„ç±»å‹è½¬æ¢ï¼ˆtype confusionï¼‰&lt;/h4&gt;
&lt;p&gt;åœ¨å¯¹æŒ‡é’ˆã€å¯¹è±¡æˆ–å˜é‡è¿›è¡Œæ“ä½œæ—¶ï¼Œéœ€è¦èƒ½å¤Ÿæ­£ç¡®åˆ¤æ–­æ‰€æ“ä½œå¯¹è±¡çš„åŸå§‹ç±»å‹ã€‚å¦‚æœä½¿ç”¨äº†ä¸åŸå§‹ç±»å‹ä¸å…¼å®¹çš„ç±»å‹è¿›è¡Œè®¿é—®ï¼Œåˆ™å­˜åœ¨å®‰å…¨éšæ‚£ã€‚&lt;/p&gt;
&lt;p&gt;é”™è¯¯ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-c++&#34; data-lang=&#34;c++&#34;&gt;&lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;NAME_TYPE&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ID_TYPE&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;

&lt;span class=&#34;c1&#34;&gt;// è¯¥ç±»å‹æ ¹æ® msg_type è¿›è¡ŒåŒºåˆ†ï¼Œå¦‚æœåœ¨å¯¹MessageBufferè¿›è¡Œæ“ä½œæ—¶æ²¡æœ‰åˆ¤æ–­ç›®æ ‡å¯¹è±¡ï¼Œåˆ™å­˜åœ¨ç±»å‹æ··æ·†
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;MessageBuffer&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
  &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;msg_type&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
  &lt;span class=&#34;k&#34;&gt;union&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;char&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
    &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;name_id&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
  &lt;span class=&#34;p&#34;&gt;};&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;};&lt;/span&gt;

&lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;Foo&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
  &lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;MessageBuffer&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;buf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
  &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;char&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;default_message&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;Hello World&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
  &lt;span class=&#34;c1&#34;&gt;// è®¾ç½®è¯¥æ¶ˆæ¯ç±»å‹ä¸º NAME_TYPEï¼Œå› æ­¤bufé¢„æœŸçš„ç±»å‹ä¸º msg_type + name
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;  &lt;span class=&#34;n&#34;&gt;buf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;msg_type&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;NAME_TYPE&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
  &lt;span class=&#34;n&#34;&gt;buf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;name&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;default_message&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
  &lt;span class=&#34;n&#34;&gt;printf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;Pointer of buf.name is %p&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\n&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;buf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;

  &lt;span class=&#34;c1&#34;&gt;// æ²¡æœ‰åˆ¤æ–­ç›®æ ‡æ¶ˆæ¯ç±»å‹æ˜¯å¦ä¸ºID_TYPEï¼Œç›´æ¥ä¿®æ”¹nameIDï¼Œå¯¼è‡´ç±»å‹æ··æ·†
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;  &lt;span class=&#34;n&#34;&gt;buf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;name_id&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;user_controlled_value&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;

  &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;buf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;msg_type&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;NAME_TYPE&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;printf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;Pointer of buf.name is now %p&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\n&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;buf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
    &lt;span class=&#34;c1&#34;&gt;// ä»¥NAME_TYPEä½œä¸ºç±»å‹æ“ä½œï¼Œå¯èƒ½å¯¼è‡´éæ³•å†…å­˜è¯»å†™
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;n&#34;&gt;printf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;Message: %s&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\n&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;buf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
  &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;else&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;printf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;Message: Use ID %d&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\n&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;buf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;name_id&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
  &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;æ­£ç¡®ï¼ˆåˆ¤æ–­æ“ä½œçš„ç›®æ ‡æ˜¯å¦æ˜¯é¢„æœŸç±»å‹ï¼‰ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-c++&#34; data-lang=&#34;c++&#34;&gt;&lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;Foo&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
  &lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;MessageBuffer&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;buf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
  &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;char&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;default_message&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;Hello World&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
  &lt;span class=&#34;c1&#34;&gt;// è®¾ç½®è¯¥æ¶ˆæ¯ç±»å‹ä¸º NAME_TYPEï¼Œå› æ­¤bufé¢„æœŸçš„ç±»å‹ä¸º msg_type + name
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;  &lt;span class=&#34;n&#34;&gt;buf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;msg_type&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;NAME_TYPE&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
  &lt;span class=&#34;n&#34;&gt;buf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;name&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;default_msessage&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
  &lt;span class=&#34;n&#34;&gt;printf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;Pointer of buf.name is %p&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\n&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;buf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;

  &lt;span class=&#34;c1&#34;&gt;// åˆ¤æ–­ç›®æ ‡æ¶ˆæ¯ç±»å‹æ˜¯å¦ä¸º ID_TYPEï¼Œä¸æ˜¯é¢„æœŸç±»å‹åˆ™åšå¯¹åº”æ“ä½œ
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;  &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;buf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;msg_type&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ID_TYPE&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;buf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;name_id&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;user_controlled_value&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;

  &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;buf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;msg_type&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;NAME_TYPE&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;printf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;Pointer of buf.name is now %p&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\n&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;buf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;printf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;Message: %s&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\n&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;buf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
  &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;else&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;printf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;Message: Use ID %d&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\n&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;buf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;name_id&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
  &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å…³è”æ¼æ´:&lt;/p&gt;
&lt;p&gt;&lt;code&gt;é«˜é£é™©-å†…å­˜ç ´å&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt;&lt;/p&gt;
&lt;h4 id=&#34;å¿…é¡»æ™ºèƒ½æŒ‡é’ˆä½¿ç”¨å®‰å…¨&#34;&gt;ã€å¿…é¡»ã€‘æ™ºèƒ½æŒ‡é’ˆä½¿ç”¨å®‰å…¨&lt;/h4&gt;
&lt;p&gt;åœ¨ä½¿ç”¨æ™ºèƒ½æŒ‡é’ˆæ—¶ï¼Œé˜²æ­¢å…¶å’ŒåŸå§‹æŒ‡é’ˆçš„æ··ç”¨ï¼Œå¦åˆ™å¯èƒ½å¯¼è‡´å¯¹è±¡ç”Ÿå‘½å‘¨æœŸé—®é¢˜ï¼Œä¾‹å¦‚ UAF ç­‰å®‰å…¨é£é™©ã€‚&lt;/p&gt;
&lt;p&gt;é”™è¯¯ä¾‹å­ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-c++&#34; data-lang=&#34;c++&#34;&gt;&lt;span class=&#34;k&#34;&gt;class&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;Foo&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
 &lt;span class=&#34;k&#34;&gt;public&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;
  &lt;span class=&#34;k&#34;&gt;explicit&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Foo&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;num&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;data_&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;num&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;};&lt;/span&gt;
  &lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;Function&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;printf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;Obj is %p, data = %d&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\n&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;this&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;data_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;};&lt;/span&gt;
 &lt;span class=&#34;k&#34;&gt;private&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;
  &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;data_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;};&lt;/span&gt;

&lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;unique_ptr&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Foo&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;fool_u_ptr&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;nullptr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;span class=&#34;n&#34;&gt;Foo&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;pfool_raw_ptr&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;nullptr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;

&lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;Risk&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
  &lt;span class=&#34;n&#34;&gt;fool_u_ptr&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;make_unique&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Foo&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;

  &lt;span class=&#34;c1&#34;&gt;// ä»ç‹¬å æ™ºèƒ½æŒ‡é’ˆä¸­è·å–åŸå§‹æŒ‡é’ˆ,&amp;lt;Foo&amp;gt;(1)
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;  &lt;span class=&#34;n&#34;&gt;pfool_raw_ptr&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;fool_u_ptr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;get&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
  &lt;span class=&#34;c1&#34;&gt;// è°ƒç”¨&amp;lt;Foo&amp;gt;(1)çš„å‡½æ•°
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;  &lt;span class=&#34;n&#34;&gt;pfool_raw_ptr&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Function&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;

  &lt;span class=&#34;c1&#34;&gt;// ç‹¬å æ™ºèƒ½æŒ‡é’ˆé‡æ–°èµ‹å€¼åä¼šé‡Šæ”¾å†…å­˜
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;  &lt;span class=&#34;n&#34;&gt;fool_u_ptr&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;make_unique&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Foo&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
  &lt;span class=&#34;c1&#34;&gt;// é€šè¿‡åŸå§‹æŒ‡é’ˆæ“ä½œä¼šå¯¼è‡´UAFï¼Œpfool_raw_ptræŒ‡å‘çš„å¯¹è±¡å·²ç»é‡Šæ”¾
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;  &lt;span class=&#34;n&#34;&gt;pfool_raw_ptr&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Function&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;


&lt;span class=&#34;c1&#34;&gt;// è¾“å‡ºï¼š
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// Obj is 0000027943087B80, data = 1
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// Obj is 0000027943087B80, data = -572662307
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;æ­£ç¡®ï¼Œé€šè¿‡æ™ºèƒ½æŒ‡é’ˆæ“ä½œ:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-c++&#34; data-lang=&#34;c++&#34;&gt;&lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;Safe&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
  &lt;span class=&#34;n&#34;&gt;fool_u_ptr&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;make_unique&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Foo&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
  &lt;span class=&#34;c1&#34;&gt;// è°ƒç”¨&amp;lt;Foo&amp;gt;(1)çš„å‡½æ•°
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;  &lt;span class=&#34;n&#34;&gt;fool_u_ptr&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;function&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;

  &lt;span class=&#34;n&#34;&gt;fool_u_ptr&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;make_unique&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Foo&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
  &lt;span class=&#34;c1&#34;&gt;// è°ƒç”¨&amp;lt;Foo&amp;gt;(2)çš„å‡½æ•°
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;  &lt;span class=&#34;n&#34;&gt;fool_u_ptr&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;function&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

&lt;span class=&#34;c1&#34;&gt;// è¾“å‡ºï¼š
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// Obj is 000002C7BB550830, data = 1
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// Obj is 000002C7BB557AF0, data = 2
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å…³è”æ¼æ´:&lt;/p&gt;
&lt;p&gt;&lt;code&gt;é«˜é£é™©-å†…å­˜ç ´å&lt;/code&gt;&lt;/p&gt;
</description>
        </item>
        <item>
        <title>Goå®‰å…¨æŒ‡å—</title>
        <link>https://zcj-git520.github.io/p/go%E5%AE%89%E5%85%A8%E6%8C%87%E5%8D%97/</link>
        <pubDate>Sun, 24 Oct 2021 22:00:08 +0800</pubDate>
        
        <guid>https://zcj-git520.github.io/p/go%E5%AE%89%E5%85%A8%E6%8C%87%E5%8D%97/</guid>
        <description>&lt;img src="https://zcj-git520.github.io/p/go%E5%AE%89%E5%85%A8%E6%8C%87%E5%8D%97/1.jpg" alt="Featured image of post Goå®‰å…¨æŒ‡å—" /&gt;&lt;h2 id=&#34;æ–‡ç« æ¥æº&#34;&gt;æ–‡ç« æ¥æº&lt;/h2&gt;
&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;https://github.com/Tencent/secguide&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;é¹…å‚(è…¾è®¯)ä»£ç å®‰å…¨æŒ‡å—&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&#34;é€šç”¨&#34;&gt;é€šç”¨&lt;/h2&gt;
&lt;h3 id=&#34;å†…å­˜ç®¡ç†&#34;&gt;å†…å­˜ç®¡ç†&lt;/h3&gt;
&lt;h4 id=&#34;å¿…é¡»åˆ‡ç‰‡é•¿åº¦æ ¡éªŒ&#34;&gt;ã€å¿…é¡»ã€‘åˆ‡ç‰‡é•¿åº¦æ ¡éªŒ&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;åœ¨å¯¹sliceè¿›è¡Œæ“ä½œæ—¶ï¼Œå¿…é¡»åˆ¤æ–­é•¿åº¦æ˜¯å¦åˆæ³•ï¼Œé˜²æ­¢ç¨‹åºpanic&lt;/li&gt;
&lt;/ul&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;// bad: æœªåˆ¤æ–­dataçš„é•¿åº¦ï¼Œå¯å¯¼è‡´ index out of range
func decode(data []byte) bool {
	if data[0] == &#39;F&#39; &amp;amp;&amp;amp; data[1] == &#39;U&#39; &amp;amp;&amp;amp; data[2] == &#39;Z&#39; &amp;amp;&amp;amp; data[3] == &#39;Z&#39; &amp;amp;&amp;amp; data[4] == &#39;E&#39; &amp;amp;&amp;amp; data[5] == &#39;R&#39; {
		fmt.Println(&amp;quot;Bad&amp;quot;)
		return true
	}
	return false
}

// bad: slice bounds out of range
func foo() {
	var slice = []int{0, 1, 2, 3, 4, 5, 6}
	fmt.Println(slice[:10])
}

// good: ä½¿ç”¨dataå‰åº”åˆ¤æ–­é•¿åº¦æ˜¯å¦åˆæ³•
func decode(data []byte) bool {
	if len(data) == 6 {
		if data[0] == &#39;F&#39; &amp;amp;&amp;amp; data[1] == &#39;U&#39; &amp;amp;&amp;amp; data[2] == &#39;Z&#39; &amp;amp;&amp;amp; data[3] == &#39;Z&#39; &amp;amp;&amp;amp; data[4] == &#39;E&#39; &amp;amp;&amp;amp; data[5] == &#39;R&#39; {
			fmt.Println(&amp;quot;Good&amp;quot;)
			return true
		}
	}
	return false
}
&lt;/code&gt;&lt;/pre&gt;&lt;h4 id=&#34;å¿…é¡»nilæŒ‡é’ˆåˆ¤æ–­&#34;&gt;ã€å¿…é¡»ã€‘nilæŒ‡é’ˆåˆ¤æ–­&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;è¿›è¡ŒæŒ‡é’ˆæ“ä½œæ—¶ï¼Œå¿…é¡»åˆ¤æ–­è¯¥æŒ‡é’ˆæ˜¯å¦ä¸ºnilï¼Œé˜²æ­¢ç¨‹åºpanicï¼Œå°¤å…¶åœ¨è¿›è¡Œç»“æ„ä½“Unmarshalæ—¶&lt;/li&gt;
&lt;/ul&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;type Packet struct {
	PackeyType    uint8
	PackeyVersion uint8
	Data          *Data
}

type Data struct {
	Stat uint8
	Len  uint8
	Buf  [8]byte
}

func (p *Packet) UnmarshalBinary(b []byte) error {
	if len(b) &amp;lt; 2 {
		return io.EOF
	}

	p.PackeyType = b[0]
	p.PackeyVersion = b[1]

	// è‹¥é•¿åº¦ç­‰äº2ï¼Œé‚£ä¹ˆä¸ä¼šnew Data
	if len(b) &amp;gt; 2 {
		p.Data = new(Data)
	}
	return nil
}

// bad: æœªåˆ¤æ–­æŒ‡é’ˆæ˜¯å¦ä¸ºnil
func main() {
	packet := new(Packet)
	data := make([]byte, 2)
	if err := packet.UnmarshalBinary(data); err != nil {
		fmt.Println(&amp;quot;Failed to unmarshal packet&amp;quot;)
		return
	}

	fmt.Printf(&amp;quot;Stat: %v\n&amp;quot;, packet.Data.Stat)
}

// good: åˆ¤æ–­DataæŒ‡é’ˆæ˜¯å¦ä¸ºnil
func main() {
	packet := new(Packet)
	data := make([]byte, 2)

	if err := packet.UnmarshalBinary(data); err != nil {
		fmt.Println(&amp;quot;Failed to unmarshal packet&amp;quot;)
		return
	}

	if packet.Data == nil {
		return
	}

	fmt.Printf(&amp;quot;Stat: %v\n&amp;quot;, packet.Data.Stat)
}
&lt;/code&gt;&lt;/pre&gt;&lt;h4 id=&#34;å¿…é¡»æ•´æ•°å®‰å…¨&#34;&gt;ã€å¿…é¡»ã€‘æ•´æ•°å®‰å…¨&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;åœ¨è¿›è¡Œæ•°å­—è¿ç®—æ“ä½œæ—¶ï¼Œéœ€è¦åšå¥½é•¿åº¦é™åˆ¶ï¼Œé˜²æ­¢å¤–éƒ¨è¾“å…¥è¿ç®—å¯¼è‡´å¼‚å¸¸ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ç¡®ä¿æ— ç¬¦å·æ•´æ•°è¿ç®—æ—¶ä¸ä¼šåè½¬&lt;/li&gt;
&lt;li&gt;ç¡®ä¿æœ‰ç¬¦å·æ•´æ•°è¿ç®—æ—¶ä¸ä¼šå‡ºç°æº¢å‡º&lt;/li&gt;
&lt;li&gt;ç¡®ä¿æ•´å‹è½¬æ¢æ—¶ä¸ä¼šå‡ºç°æˆªæ–­é”™è¯¯&lt;/li&gt;
&lt;li&gt;ç¡®ä¿æ•´å‹è½¬æ¢æ—¶ä¸ä¼šå‡ºç°ç¬¦å·é”™è¯¯&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ä»¥ä¸‹åœºæ™¯å¿…é¡»ä¸¥æ ¼è¿›è¡Œé•¿åº¦é™åˆ¶ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ä½œä¸ºæ•°ç»„ç´¢å¼•&lt;/li&gt;
&lt;li&gt;ä½œä¸ºå¯¹è±¡çš„é•¿åº¦æˆ–è€…å¤§å°&lt;/li&gt;
&lt;li&gt;ä½œä¸ºæ•°ç»„çš„è¾¹ç•Œï¼ˆå¦‚ä½œä¸ºå¾ªç¯è®¡æ•°å™¨ï¼‰&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;// bad: æœªé™åˆ¶é•¿åº¦ï¼Œå¯¼è‡´æ•´æ•°æº¢å‡º
func overflow(numControlByUser int32) {
	var numInt int32 = 0
	numInt = numControlByUser + 1
	// å¯¹é•¿åº¦é™åˆ¶ä¸å½“ï¼Œå¯¼è‡´æ•´æ•°æº¢å‡º
	fmt.Printf(&amp;quot;%d\n&amp;quot;, numInt)
	// ä½¿ç”¨numIntï¼Œå¯èƒ½å¯¼è‡´å…¶ä»–é”™è¯¯
}

func main() {
	overflow(2147483647)
}

// good
func overflow(numControlByUser int32) {
	var numInt int32 = 0
	numInt = numControlByUser + 1
	if numInt &amp;lt; 0 {
		fmt.Println(&amp;quot;integer overflow&amp;quot;)
		return
	}
	fmt.Println(&amp;quot;integer ok&amp;quot;)
}

func main() {
	overflow(2147483647)
}
&lt;/code&gt;&lt;/pre&gt;&lt;h4 id=&#34;å¿…é¡»makeåˆ†é…é•¿åº¦éªŒè¯&#34;&gt;ã€å¿…é¡»ã€‘makeåˆ†é…é•¿åº¦éªŒè¯&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;åœ¨è¿›è¡Œmakeåˆ†é…å†…å­˜æ—¶ï¼Œéœ€è¦å¯¹å¤–éƒ¨å¯æ§çš„é•¿åº¦è¿›è¡Œæ ¡éªŒï¼Œé˜²æ­¢ç¨‹åºpanicã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;// bad
func parse(lenControlByUser int, data []byte) {
	size := lenControlByUser
	// å¯¹å¤–éƒ¨ä¼ å…¥çš„sizeï¼Œè¿›è¡Œé•¿åº¦åˆ¤æ–­ä»¥å…å¯¼è‡´panic
	buffer := make([]byte, size)
	copy(buffer, data)
}

// good
func parse(lenControlByUser int, data []byte) ([]byte, error) {
	size := lenControlByUser
	// é™åˆ¶å¤–éƒ¨å¯æ§çš„é•¿åº¦å¤§å°èŒƒå›´
	if size &amp;gt; 64*1024*1024 {
		return nil, errors.New(&amp;quot;value too large&amp;quot;)
	}
	buffer := make([]byte, size)
	copy(buffer, data)
	return buffer, nil
}
&lt;/code&gt;&lt;/pre&gt;&lt;h4 id=&#34;å¿…é¡»ç¦æ­¢setfinalizerå’ŒæŒ‡é’ˆå¾ªç¯å¼•ç”¨åŒæ—¶ä½¿ç”¨&#34;&gt;ã€å¿…é¡»ã€‘ç¦æ­¢SetFinalizerå’ŒæŒ‡é’ˆå¾ªç¯å¼•ç”¨åŒæ—¶ä½¿ç”¨&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;å½“ä¸€ä¸ªå¯¹è±¡ä»è¢«GCé€‰ä¸­åˆ°ç§»é™¤å†…å­˜ä¹‹å‰ï¼Œruntime.SetFinalizer()éƒ½ä¸ä¼šæ‰§è¡Œï¼Œå³ä½¿ç¨‹åºæ­£å¸¸ç»“æŸæˆ–è€…å‘ç”Ÿé”™è¯¯ã€‚ç”±æŒ‡é’ˆæ„æˆçš„â€œå¾ªç¯å¼•ç”¨â€è™½ç„¶èƒ½è¢«GCæ­£ç¡®å¤„ç†ï¼Œä½†ç”±äºæ— æ³•ç¡®å®šFinalizerä¾èµ–é¡ºåºï¼Œä»è€Œæ— æ³•è°ƒç”¨runtime.SetFinalizer()ï¼Œå¯¼è‡´ç›®æ ‡å¯¹è±¡æ— æ³•å˜æˆå¯è¾¾çŠ¶æ€ï¼Œä»è€Œé€ æˆå†…å­˜æ— æ³•è¢«å›æ”¶ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;// bad
func foo() {
	var a, b Data
	a.o = &amp;amp;b
	b.o = &amp;amp;a

	// æŒ‡é’ˆå¾ªç¯å¼•ç”¨ï¼ŒSetFinalizer()æ— æ³•æ­£å¸¸è°ƒç”¨
	runtime.SetFinalizer(&amp;amp;a, func(d *Data) {
		fmt.Printf(&amp;quot;a %p final.\n&amp;quot;, d)
	})
	runtime.SetFinalizer(&amp;amp;b, func(d *Data) {
		fmt.Printf(&amp;quot;b %p final.\n&amp;quot;, d)
	})
}

func main() {
	for {
		foo()
		time.Sleep(time.Millisecond)
	}
}

&lt;/code&gt;&lt;/pre&gt;&lt;h4 id=&#34;å¿…é¡»ç¦æ­¢é‡å¤é‡Šæ”¾channel&#34;&gt;ã€å¿…é¡»ã€‘ç¦æ­¢é‡å¤é‡Šæ”¾channel&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;é‡å¤é‡Šæ”¾ä¸€èˆ¬å­˜åœ¨äºå¼‚å¸¸æµç¨‹åˆ¤æ–­ä¸­ï¼Œå¦‚æœæ¶æ„æ”»å‡»è€…æ„é€ å‡ºå¼‚å¸¸æ¡ä»¶ä½¿ç¨‹åºé‡å¤é‡Šæ”¾channelï¼Œåˆ™ä¼šè§¦å‘è¿è¡Œæ—¶panicï¼Œä»è€Œé€ æˆDoSæ”»å‡»ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;// bad
func foo(c chan int) {
	defer close(c)
	err := processBusiness()
	if err != nil {
		c &amp;lt;- 0
		close(c) // é‡å¤é‡Šæ”¾channel
		return
	}
	c &amp;lt;- 1
}

// good
func foo(c chan int) {
	defer close(c) // ä½¿ç”¨deferå»¶è¿Ÿå…³é—­channel
	err := processBusiness()
	if err != nil {
		c &amp;lt;- 0
		return
	}
	c &amp;lt;- 1
}
&lt;/code&gt;&lt;/pre&gt;&lt;h4 id=&#34;å¿…é¡»ç¡®ä¿æ¯ä¸ªåç¨‹éƒ½èƒ½é€€å‡º&#34;&gt;ã€å¿…é¡»ã€‘ç¡®ä¿æ¯ä¸ªåç¨‹éƒ½èƒ½é€€å‡º&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;å¯åŠ¨ä¸€ä¸ªåç¨‹å°±ä¼šåšä¸€ä¸ªå…¥æ ˆæ“ä½œï¼Œåœ¨ç³»ç»Ÿä¸é€€å‡ºçš„æƒ…å†µä¸‹ï¼Œåç¨‹ä¹Ÿæ²¡æœ‰è®¾ç½®é€€å‡ºæ¡ä»¶ï¼Œåˆ™ç›¸å½“äºåç¨‹å¤±å»äº†æ§åˆ¶ï¼Œå®ƒå ç”¨çš„èµ„æºæ— æ³•å›æ”¶ï¼Œå¯èƒ½ä¼šå¯¼è‡´å†…å­˜æ³„éœ²ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;// bad: åç¨‹æ²¡æœ‰è®¾ç½®é€€å‡ºæ¡ä»¶
func doWaiter(name string, second int) {
	for {
		time.Sleep(time.Duration(second) * time.Second)
		fmt.Println(name, &amp;quot; is ready!&amp;quot;)
	}
}
&lt;/code&gt;&lt;/pre&gt;&lt;h4 id=&#34;æ¨èä¸ä½¿ç”¨unsafeåŒ…&#34;&gt;ã€æ¨èã€‘ä¸ä½¿ç”¨unsafeåŒ…&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;ç”±äºunsafeåŒ…ç»•è¿‡äº† Golang çš„å†…å­˜å®‰å…¨åŸåˆ™ï¼Œä¸€èˆ¬æ¥è¯´ä½¿ç”¨è¯¥åº“æ˜¯ä¸å®‰å…¨çš„ï¼Œå¯å¯¼è‡´å†…å­˜ç ´åï¼Œå°½é‡é¿å…ä½¿ç”¨è¯¥åŒ…ã€‚è‹¥å¿…é¡»è¦ä½¿ç”¨unsafeæ“ä½œæŒ‡é’ˆï¼Œå¿…é¡»åšå¥½å®‰å…¨æ ¡éªŒã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;// bad: é€šè¿‡unsafeæ“ä½œåŸå§‹æŒ‡é’ˆ
func unsafePointer() {
	b := make([]byte, 1)
	foo := (*int)(unsafe.Pointer(uintptr(unsafe.Pointer(&amp;amp;b[0])) + uintptr(0xfffffffe)))
	fmt.Print(*foo + 1)
}

// [signal SIGSEGV: segmentation violation code=0x1 addr=0xc100068f55 pc=0x49142b]

&lt;/code&gt;&lt;/pre&gt;&lt;h4 id=&#34;æ¨èä¸ä½¿ç”¨sliceä½œä¸ºå‡½æ•°å…¥å‚&#34;&gt;ã€æ¨èã€‘ä¸ä½¿ç”¨sliceä½œä¸ºå‡½æ•°å…¥å‚&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;sliceæ˜¯å¼•ç”¨ç±»å‹ï¼Œåœ¨ä½œä¸ºå‡½æ•°å…¥å‚æ—¶é‡‡ç”¨çš„æ˜¯åœ°å€ä¼ é€’ï¼Œå¯¹sliceçš„ä¿®æ”¹ä¹Ÿä¼šå½±å“åŸå§‹æ•°æ®&lt;/li&gt;
&lt;/ul&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;// bad: sliceä½œä¸ºå‡½æ•°å…¥å‚æ—¶æ˜¯åœ°å€ä¼ é€’
func modify(array []int) {
	array[0] = 10 // å¯¹å…¥å‚sliceçš„å…ƒç´ ä¿®æ”¹ä¼šå½±å“åŸå§‹æ•°æ®
}

func main() {
	array := []int{1, 2, 3, 4, 5}

	modify(array)
	fmt.Println(array) // outputï¼š[10 2 3 4 5]
}

// good: å‡½æ•°ä½¿ç”¨æ•°ç»„ä½œä¸ºå…¥å‚ï¼Œè€Œä¸æ˜¯slice
func modify(array [5]int) {
	array[0] = 10
}

func main() {
	// ä¼ å…¥æ•°ç»„ï¼Œæ³¨æ„æ•°ç»„ä¸sliceçš„åŒºåˆ«
	array := [5]int{1, 2, 3, 4, 5}

	modify(array)
	fmt.Println(array)
}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt;&lt;/p&gt;
&lt;h3 id=&#34;æ–‡ä»¶æ“ä½œ&#34;&gt;æ–‡ä»¶æ“ä½œ&lt;/h3&gt;
&lt;h4 id=&#34;å¿…é¡»-è·¯å¾„ç©¿è¶Šæ£€æŸ¥&#34;&gt;ã€å¿…é¡»ã€‘ è·¯å¾„ç©¿è¶Šæ£€æŸ¥&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;åœ¨è¿›è¡Œæ–‡ä»¶æ“ä½œæ—¶ï¼Œå¦‚æœå¯¹å¤–éƒ¨ä¼ å…¥çš„æ–‡ä»¶åæœªåšé™åˆ¶ï¼Œå¯èƒ½å¯¼è‡´ä»»æ„æ–‡ä»¶è¯»å–æˆ–è€…ä»»æ„æ–‡ä»¶å†™å…¥ï¼Œä¸¥é‡å¯èƒ½å¯¼è‡´ä»£ç æ‰§è¡Œã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;// bad: ä»»æ„æ–‡ä»¶è¯»å–
func handler(w http.ResponseWriter, r *http.Request) {
	path := r.URL.Query()[&amp;quot;path&amp;quot;][0]

	// æœªè¿‡æ»¤æ–‡ä»¶è·¯å¾„ï¼Œå¯èƒ½å¯¼è‡´ä»»æ„æ–‡ä»¶è¯»å–
	data, _ := ioutil.ReadFile(path)
	w.Write(data)

	// å¯¹å¤–éƒ¨ä¼ å…¥çš„æ–‡ä»¶åå˜é‡ï¼Œè¿˜éœ€è¦éªŒè¯æ˜¯å¦å­˜åœ¨../ç­‰è·¯å¾„ç©¿è¶Šçš„æ–‡ä»¶å
	data, _ = ioutil.ReadFile(filepath.Join(&amp;quot;/home/user/&amp;quot;, path))
	w.Write(data)
}

// bad: ä»»æ„æ–‡ä»¶å†™å…¥
func unzip(f string) {
	r, _ := zip.OpenReader(f)
	for _, f := range r.File {
		p, _ := filepath.Abs(f.Name)
		// æœªéªŒè¯å‹ç¼©æ–‡ä»¶åï¼Œå¯èƒ½å¯¼è‡´../ç­‰è·¯å¾„ç©¿è¶Šï¼Œä»»æ„æ–‡ä»¶è·¯å¾„å†™å…¥
		ioutil.WriteFile(p, []byte(&amp;quot;present&amp;quot;), 0640)
	}
}

// good: æ£€æŸ¥å‹ç¼©çš„æ–‡ä»¶åæ˜¯å¦åŒ…å«..è·¯å¾„ç©¿è¶Šç‰¹å¾å­—ç¬¦ï¼Œé˜²æ­¢ä»»æ„å†™å…¥
func unzipGood(f string) bool {
	r, err := zip.OpenReader(f)
	if err != nil {
		fmt.Println(&amp;quot;read zip file fail&amp;quot;)
		return false
	}
	for _, f := range r.File {
		if !strings.Contains(f.Name, &amp;quot;..&amp;quot;) {
			p, _ := filepath.Abs(f.Name)
			ioutil.WriteFile(p, []byte(&amp;quot;present&amp;quot;), 0640)
		} else {
			return false
		}
	}
	return true
}
&lt;/code&gt;&lt;/pre&gt;&lt;h4 id=&#34;å¿…é¡»-æ–‡ä»¶è®¿é—®æƒé™&#34;&gt;ã€å¿…é¡»ã€‘ æ–‡ä»¶è®¿é—®æƒé™&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;æ ¹æ®åˆ›å»ºæ–‡ä»¶çš„æ•æ„Ÿæ€§è®¾ç½®ä¸åŒçº§åˆ«çš„è®¿é—®æƒé™ï¼Œä»¥é˜²æ­¢æ•æ„Ÿæ•°æ®è¢«ä»»æ„æƒé™ç”¨æˆ·è¯»å–ã€‚ä¾‹å¦‚ï¼Œè®¾ç½®æ–‡ä»¶æƒé™ä¸ºï¼š&lt;code&gt;-rw-r-----&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;ioutil.WriteFile(p, []byte(&amp;quot;present&amp;quot;), 0640)
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt;&lt;/p&gt;
&lt;h3 id=&#34;ç³»ç»Ÿæ¥å£&#34;&gt;ç³»ç»Ÿæ¥å£&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;1.3.1ã€å¿…é¡»ã€‘å‘½ä»¤æ‰§è¡Œæ£€æŸ¥&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ä½¿ç”¨&lt;code&gt;exec.Command&lt;/code&gt;ã€&lt;code&gt;exec.CommandContext&lt;/code&gt;ã€&lt;code&gt;syscall.StartProcess&lt;/code&gt;ã€&lt;code&gt;os.StartProcess&lt;/code&gt;ç­‰å‡½æ•°æ—¶ï¼Œç¬¬ä¸€ä¸ªå‚æ•°ï¼ˆpathï¼‰ç›´æ¥å–å¤–éƒ¨è¾“å…¥å€¼æ—¶ï¼Œåº”ä½¿ç”¨ç™½åå•é™å®šå¯æ‰§è¡Œçš„å‘½ä»¤èŒƒå›´ï¼Œä¸å…è®¸ä¼ å…¥&lt;code&gt;bash&lt;/code&gt;ã€&lt;code&gt;cmd&lt;/code&gt;ã€&lt;code&gt;sh&lt;/code&gt;ç­‰å‘½ä»¤ï¼›&lt;/li&gt;
&lt;li&gt;ä½¿ç”¨&lt;code&gt;exec.Command&lt;/code&gt;ã€&lt;code&gt;exec.CommandContext&lt;/code&gt;ç­‰å‡½æ•°æ—¶ï¼Œé€šè¿‡&lt;code&gt;bash&lt;/code&gt;ã€&lt;code&gt;cmd&lt;/code&gt;ã€&lt;code&gt;sh&lt;/code&gt;ç­‰åˆ›å»ºshellï¼Œ-cåçš„å‚æ•°ï¼ˆargï¼‰æ‹¼æ¥å¤–éƒ¨è¾“å…¥ï¼Œåº”è¿‡æ»¤\n  $  &amp;amp;  ;  |  &#39;  &amp;quot;  ( )  `ç­‰æ½œåœ¨æ¶æ„å­—ç¬¦ï¼›&lt;/li&gt;
&lt;/ul&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;// bad
func foo() {
	userInputedVal := &amp;quot;&amp;amp;&amp;amp; echo &#39;hello&#39;&amp;quot; // å‡è®¾å¤–éƒ¨ä¼ å…¥è¯¥å˜é‡å€¼
	cmdName := &amp;quot;ping &amp;quot; + userInputedVal

	// æœªåˆ¤æ–­å¤–éƒ¨è¾“å…¥æ˜¯å¦å­˜åœ¨å‘½ä»¤æ³¨å…¥å­—ç¬¦ï¼Œç»“åˆshå¯é€ æˆå‘½ä»¤æ³¨å…¥
	cmd := exec.Command(&amp;quot;sh&amp;quot;, &amp;quot;-c&amp;quot;, cmdName)
	output, _ := cmd.CombinedOutput()
	fmt.Println(string(output))

	cmdName := &amp;quot;ls&amp;quot;
	// æœªåˆ¤æ–­å¤–éƒ¨è¾“å…¥æ˜¯å¦æ˜¯é¢„æœŸå‘½ä»¤
	cmd := exec.Command(cmdName)
	output, _ := cmd.CombinedOutput()
	fmt.Println(string(output))
}

// good
func checkIllegal(cmdName string) bool {
	if strings.Contains(cmdName, &amp;quot;&amp;amp;&amp;quot;) || strings.Contains(cmdName, &amp;quot;|&amp;quot;) || strings.Contains(cmdName, &amp;quot;;&amp;quot;) ||
		strings.Contains(cmdName, &amp;quot;$&amp;quot;) || strings.Contains(cmdName, &amp;quot;&#39;&amp;quot;) || strings.Contains(cmdName, &amp;quot;`&amp;quot;) ||
		strings.Contains(cmdName, &amp;quot;(&amp;quot;) || strings.Contains(cmdName, &amp;quot;)&amp;quot;) || strings.Contains(cmdName, &amp;quot;\&amp;quot;&amp;quot;) {
		return true
	}
	return false
}

func main() {
	userInputedVal := &amp;quot;&amp;amp;&amp;amp; echo &#39;hello&#39;&amp;quot;
	cmdName := &amp;quot;ping &amp;quot; + userInputedVal

	if checkIllegal(cmdName) { // æ£€æŸ¥ä¼ ç»™shçš„å‘½ä»¤æ˜¯å¦æœ‰ç‰¹æ®Šå­—ç¬¦
		return // å­˜åœ¨ç‰¹æ®Šå­—ç¬¦ç›´æ¥return
	}

	cmd := exec.Command(&amp;quot;sh&amp;quot;, &amp;quot;-c&amp;quot;, cmdName)
	output, _ := cmd.CombinedOutput()
	fmt.Println(string(output))
}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt;&lt;/p&gt;
&lt;h3 id=&#34;é€šä¿¡å®‰å…¨&#34;&gt;é€šä¿¡å®‰å…¨&lt;/h3&gt;
&lt;h4 id=&#34;å¿…é¡»ç½‘ç»œé€šä¿¡é‡‡ç”¨tlsæ–¹å¼&#34;&gt;ã€å¿…é¡»ã€‘ç½‘ç»œé€šä¿¡é‡‡ç”¨TLSæ–¹å¼&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;æ˜æ–‡ä¼ è¾“çš„é€šä¿¡åè®®ç›®å‰å·²è¢«éªŒè¯å­˜åœ¨è¾ƒå¤§å®‰å…¨é£é™©ï¼Œè¢«ä¸­é—´äººåŠ«æŒåå¯èƒ½å¯¼è‡´è®¸å¤šå®‰å…¨é£é™©ï¼Œå› æ­¤å¿…é¡»é‡‡ç”¨è‡³å°‘TLSçš„å®‰å…¨é€šä¿¡æ–¹å¼ä¿è¯é€šä¿¡å®‰å…¨ï¼Œä¾‹å¦‚gRPC/Websocketéƒ½ä½¿ç”¨TLS1.3ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;// good
func main() {
	http.HandleFunc(&amp;quot;/&amp;quot;, func(w http.ResponseWriter, req *http.Request) {
		w.Header().Add(&amp;quot;Strict-Transport-Security&amp;quot;, &amp;quot;max-age=63072000; includeSubDomains&amp;quot;)
		w.Write([]byte(&amp;quot;This is an example server.\n&amp;quot;))
	})

	// æœåŠ¡å™¨é…ç½®è¯ä¹¦ä¸ç§é’¥
	log.Fatal(http.ListenAndServeTLS(&amp;quot;:443&amp;quot;, &amp;quot;yourCert.pem&amp;quot;, &amp;quot;yourKey.pem&amp;quot;, nil))
}
&lt;/code&gt;&lt;/pre&gt;&lt;h4 id=&#34;æ¨ètlså¯ç”¨è¯ä¹¦éªŒè¯&#34;&gt;ã€æ¨èã€‘TLSå¯ç”¨è¯ä¹¦éªŒè¯&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;TLSè¯ä¹¦åº”å½“æ˜¯æœ‰æ•ˆçš„ã€æœªè¿‡æœŸçš„ï¼Œä¸”é…ç½®æ­£ç¡®çš„åŸŸåï¼Œç”Ÿäº§ç¯å¢ƒçš„æœåŠ¡ç«¯åº”å¯ç”¨è¯ä¹¦éªŒè¯ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;// bad
import (
	&amp;quot;crypto/tls&amp;quot;
	&amp;quot;net/http&amp;quot;
)

func doAuthReq(authReq *http.Request) *http.Response {
	tr := &amp;amp;http.Transport{
		TLSClientConfig: &amp;amp;tls.Config{InsecureSkipVerify: true},
	}
	client := &amp;amp;http.Client{Transport: tr}
	res, _ := client.Do(authReq)
	return res
}

// good
import (
	&amp;quot;crypto/tls&amp;quot;
	&amp;quot;net/http&amp;quot;
)

func doAuthReq(authReq *http.Request) *http.Response {
	tr := &amp;amp;http.Transport{
		TLSClientConfig: &amp;amp;tls.Config{InsecureSkipVerify: false},
	}
	client := &amp;amp;http.Client{Transport: tr}
	res, _ := client.Do(authReq)
	return res
}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt;&lt;/p&gt;
&lt;h3 id=&#34;æ•æ„Ÿæ•°æ®ä¿æŠ¤&#34;&gt;æ•æ„Ÿæ•°æ®ä¿æŠ¤&lt;/h3&gt;
&lt;h4 id=&#34;å¿…é¡»æ•æ„Ÿä¿¡æ¯è®¿é—®&#34;&gt;ã€å¿…é¡»ã€‘æ•æ„Ÿä¿¡æ¯è®¿é—®&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;ç¦æ­¢å°†æ•æ„Ÿä¿¡æ¯ç¡¬ç¼–ç åœ¨ç¨‹åºä¸­ï¼Œæ—¢å¯èƒ½ä¼šå°†æ•æ„Ÿä¿¡æ¯æš´éœ²ç»™æ”»å‡»è€…ï¼Œä¹Ÿä¼šå¢åŠ ä»£ç ç®¡ç†å’Œç»´æŠ¤çš„éš¾åº¦&lt;/li&gt;
&lt;li&gt;ä½¿ç”¨é…ç½®ä¸­å¿ƒç³»ç»Ÿç»Ÿä¸€æ‰˜ç®¡å¯†é’¥ç­‰æ•æ„Ÿä¿¡æ¯&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;å¿…é¡»æ•æ„Ÿæ•°æ®è¾“å‡º&#34;&gt;ã€å¿…é¡»ã€‘æ•æ„Ÿæ•°æ®è¾“å‡º&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;åªè¾“å‡ºå¿…è¦çš„æœ€å°æ•°æ®é›†ï¼Œé¿å…å¤šä½™å­—æ®µæš´éœ²å¼•èµ·æ•æ„Ÿä¿¡æ¯æ³„éœ²&lt;/li&gt;
&lt;li&gt;ä¸èƒ½åœ¨æ—¥å¿—ä¿å­˜å¯†ç ï¼ˆåŒ…æ‹¬æ˜æ–‡å¯†ç å’Œå¯†æ–‡å¯†ç ï¼‰ã€å¯†é’¥å’Œå…¶å®ƒæ•æ„Ÿä¿¡æ¯&lt;/li&gt;
&lt;li&gt;å¯¹äºå¿…é¡»è¾“å‡ºçš„æ•æ„Ÿä¿¡æ¯ï¼Œå¿…é¡»è¿›è¡Œåˆç†è„±æ•å±•ç¤º&lt;/li&gt;
&lt;/ul&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;// bad
func serve() {
	http.HandleFunc(&amp;quot;/register&amp;quot;, func(w http.ResponseWriter, r *http.Request) {
		r.ParseForm()
		user := r.Form.Get(&amp;quot;user&amp;quot;)
		pw := r.Form.Get(&amp;quot;password&amp;quot;)

		log.Printf(&amp;quot;Registering new user %s with password %s.\n&amp;quot;, user, pw)
	})
	http.ListenAndServe(&amp;quot;:80&amp;quot;, nil)
}

// good
func serve1() {
	http.HandleFunc(&amp;quot;/register&amp;quot;, func(w http.ResponseWriter, r *http.Request) {
		r.ParseForm()
		user := r.Form.Get(&amp;quot;user&amp;quot;)
		pw := r.Form.Get(&amp;quot;password&amp;quot;)

		log.Printf(&amp;quot;Registering new user %s.\n&amp;quot;, user)

		// ...
		use(pw)
	})
	http.ListenAndServe(&amp;quot;:80&amp;quot;, nil)
}
&lt;/code&gt;&lt;/pre&gt;&lt;ul&gt;
&lt;li&gt;é¿å…é€šè¿‡GETæ–¹æ³•ã€ä»£ç æ³¨é‡Šã€è‡ªåŠ¨å¡«å……ã€ç¼“å­˜ç­‰æ–¹å¼æ³„éœ²æ•æ„Ÿä¿¡æ¯&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;å¿…é¡»æ•æ„Ÿæ•°æ®å­˜å‚¨&#34;&gt;ã€å¿…é¡»ã€‘æ•æ„Ÿæ•°æ®å­˜å‚¨&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;æ•æ„Ÿæ•°æ®åº”ä½¿ç”¨SHA2ã€RSAç­‰ç®—æ³•è¿›è¡ŒåŠ å¯†å­˜å‚¨&lt;/li&gt;
&lt;li&gt;æ•æ„Ÿæ•°æ®åº”ä½¿ç”¨ç‹¬ç«‹çš„å­˜å‚¨å±‚ï¼Œå¹¶åœ¨è®¿é—®å±‚å¼€å¯è®¿é—®æ§åˆ¶&lt;/li&gt;
&lt;li&gt;åŒ…å«æ•æ„Ÿä¿¡æ¯çš„ä¸´æ—¶æ–‡ä»¶æˆ–ç¼“å­˜ä¸€æ—¦ä¸å†éœ€è¦åº”ç«‹åˆ»åˆ é™¤&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;å¿…é¡»å¼‚å¸¸å¤„ç†å’Œæ—¥å¿—è®°å½•&#34;&gt;ã€å¿…é¡»ã€‘å¼‚å¸¸å¤„ç†å’Œæ—¥å¿—è®°å½•&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;åº”åˆç†ä½¿ç”¨panicã€recoverã€deferå¤„ç†ç³»ç»Ÿå¼‚å¸¸ï¼Œé¿å…å‡ºé”™ä¿¡æ¯è¾“å‡ºåˆ°å‰ç«¯&lt;/li&gt;
&lt;/ul&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;defer func () {
	if r := recover(); r != nil {
		fmt.Println(&amp;quot;Recovered in start()&amp;quot;)
	}
}()
&lt;/code&gt;&lt;/pre&gt;&lt;ul&gt;
&lt;li&gt;å¯¹å¤–ç¯å¢ƒç¦æ­¢å¼€å¯debugæ¨¡å¼ï¼Œæˆ–å°†ç¨‹åºè¿è¡Œæ—¥å¿—è¾“å‡ºåˆ°å‰ç«¯&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;// bad
dlv --listen&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;:2345 --headless&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;true&lt;/span&gt; --api-version&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;2&lt;/span&gt; debug test.go
// good
dlv debug test.go
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt;&lt;/p&gt;
&lt;h3 id=&#34;åŠ å¯†è§£å¯†&#34;&gt;åŠ å¯†è§£å¯†&lt;/h3&gt;
&lt;h4 id=&#34;å¿…é¡»ä¸å¾—ç¡¬ç¼–ç å¯†ç å¯†é’¥&#34;&gt;ã€å¿…é¡»ã€‘ä¸å¾—ç¡¬ç¼–ç å¯†ç /å¯†é’¥&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;åœ¨è¿›è¡Œç”¨æˆ·ç™»é™†ï¼ŒåŠ è§£å¯†ç®—æ³•ç­‰æ“ä½œæ—¶ï¼Œä¸å¾—åœ¨ä»£ç é‡Œç¡¬ç¼–ç å¯†é’¥æˆ–å¯†ç ï¼Œå¯é€šè¿‡å˜æ¢ç®—æ³•æˆ–è€…é…ç½®ç­‰æ–¹å¼è®¾ç½®å¯†ç æˆ–è€…å¯†é’¥ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;// bad
const (
	user     = &amp;quot;dbuser&amp;quot;
	password = &amp;quot;s3cretp4ssword&amp;quot;
)

func connect() *sql.DB {
	connStr := fmt.Sprintf(&amp;quot;postgres://%s:%s@localhost/pqgotest&amp;quot;, user, password)
	db, err := sql.Open(&amp;quot;postgres&amp;quot;, connStr)
	if err != nil {
		return nil
	}
	return db
}

// bad
var (
	commonkey = []byte(&amp;quot;0123456789abcdef&amp;quot;)
)

func AesEncrypt(plaintext string) (string, error) {
	block, err := aes.NewCipher(commonkey)
	if err != nil {
		return &amp;quot;&amp;quot;, err
	}
}
&lt;/code&gt;&lt;/pre&gt;&lt;h4 id=&#34;162å¿…é¡»å¯†é’¥å­˜å‚¨å®‰å…¨&#34;&gt;1.6.2ã€å¿…é¡»ã€‘å¯†é’¥å­˜å‚¨å®‰å…¨&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;åœ¨ä½¿ç”¨å¯¹ç§°å¯†ç ç®—æ³•æ—¶ï¼Œéœ€è¦ä¿æŠ¤å¥½åŠ å¯†å¯†é’¥ã€‚å½“ç®—æ³•æ¶‰åŠæ•æ„Ÿã€ä¸šåŠ¡æ•°æ®æ—¶ï¼Œå¯é€šè¿‡éå¯¹ç§°ç®—æ³•åå•†åŠ å¯†å¯†é’¥ã€‚å…¶ä»–è¾ƒä¸ºä¸æ•æ„Ÿçš„æ•°æ®åŠ å¯†ï¼Œå¯ä»¥é€šè¿‡å˜æ¢ç®—æ³•ç­‰æ–¹å¼ä¿æŠ¤å¯†é’¥ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;163æ¨èä¸ä½¿ç”¨å¼±å¯†ç ç®—æ³•&#34;&gt;1.6.3ã€æ¨èã€‘ä¸ä½¿ç”¨å¼±å¯†ç ç®—æ³•&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;åœ¨ä½¿ç”¨åŠ å¯†ç®—æ³•æ—¶ï¼Œä¸å»ºè®®ä½¿ç”¨åŠ å¯†å¼ºåº¦è¾ƒå¼±çš„ç®—æ³•ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;// bad
crypto/desï¼Œcrypto/md5ï¼Œcrypto/sha1ï¼Œcrypto/rc4ç­‰ã€‚

// good
crypto/rsaï¼Œcrypto/aesç­‰ã€‚
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt;&lt;/p&gt;
&lt;h3 id=&#34;æ­£åˆ™è¡¨è¾¾å¼&#34;&gt;æ­£åˆ™è¡¨è¾¾å¼&lt;/h3&gt;
&lt;h4 id=&#34;æ¨èä½¿ç”¨regexpè¿›è¡Œæ­£åˆ™è¡¨è¾¾å¼åŒ¹é…&#34;&gt;ã€æ¨èã€‘ä½¿ç”¨regexpè¿›è¡Œæ­£åˆ™è¡¨è¾¾å¼åŒ¹é…&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;æ­£åˆ™è¡¨è¾¾å¼ç¼–å†™ä¸æ°å½“å¯è¢«ç”¨äºDoSæ”»å‡»ï¼Œé€ æˆæœåŠ¡ä¸å¯ç”¨ï¼Œæ¨èä½¿ç”¨regexpåŒ…è¿›è¡Œæ­£åˆ™è¡¨è¾¾å¼åŒ¹é…ã€‚regexpä¿è¯äº†çº¿æ€§æ—¶é—´æ€§èƒ½å’Œä¼˜é›…çš„å¤±è´¥ï¼šå¯¹è§£æå™¨ã€ç¼–è¯‘å™¨å’Œæ‰§è¡Œå¼•æ“éƒ½è¿›è¡Œäº†å†…å­˜é™åˆ¶ã€‚ä½†regexpä¸æ”¯æŒä»¥ä¸‹æ­£åˆ™è¡¨è¾¾å¼ç‰¹æ€§ï¼Œå¦‚ä¸šåŠ¡ä¾èµ–è¿™äº›ç‰¹æ€§ï¼Œåˆ™regexpä¸é€‚åˆä½¿ç”¨ã€‚
&lt;ul&gt;
&lt;li&gt;å›æº¯å¼•ç”¨&lt;a class=&#34;link&#34; href=&#34;https://www.regular-expressions.info/backref.html&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Backreferences&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;æŸ¥çœ‹&lt;a class=&#34;link&#34; href=&#34;https://www.regular-expressions.info/lookaround.html&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Lookaround&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;// good
matched, err := regexp.MatchString(`a.b`, &amp;quot;aaxbb&amp;quot;)
fmt.Println(matched) // true
fmt.Println(err)     // nil
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt;&lt;/p&gt;
&lt;h2 id=&#34;åå°&#34;&gt;åå°&lt;/h2&gt;
&lt;h3 id=&#34;è¾“å…¥æ ¡éªŒ&#34;&gt;è¾“å…¥æ ¡éªŒ&lt;/h3&gt;
&lt;h4 id=&#34;å¿…é¡»æŒ‰ç±»å‹è¿›è¡Œæ•°æ®æ ¡éªŒ&#34;&gt;ã€å¿…é¡»ã€‘æŒ‰ç±»å‹è¿›è¡Œæ•°æ®æ ¡éªŒ&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;æ‰€æœ‰å¤–éƒ¨è¾“å…¥çš„å‚æ•°ï¼Œåº”ä½¿ç”¨&lt;code&gt;validator&lt;/code&gt;è¿›è¡Œç™½åå•æ ¡éªŒï¼Œæ ¡éªŒå†…å®¹åŒ…æ‹¬ä½†ä¸é™äºæ•°æ®é•¿åº¦ã€æ•°æ®èŒƒå›´ã€æ•°æ®ç±»å‹ä¸æ ¼å¼ï¼Œæ ¡éªŒä¸é€šè¿‡çš„åº”å½“æ‹’ç»&lt;/li&gt;
&lt;/ul&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;// good
import (
	&amp;quot;fmt&amp;quot;
	&amp;quot;github.com/go-playground/validator/v10&amp;quot;
)

var validate *validator.Validate

func validateVariable() {
	myEmail := &amp;quot;abc@tencent.com&amp;quot;
	errs := validate.Var(myEmail, &amp;quot;required,email&amp;quot;)
	if errs != nil {
		fmt.Println(errs)
		return
		//åœæ­¢æ‰§è¡Œ
	}
	// éªŒè¯é€šè¿‡ï¼Œç»§ç»­æ‰§è¡Œ
	...
}

func main() {
	validate = validator.New()
	validateVariable()
}
&lt;/code&gt;&lt;/pre&gt;&lt;ul&gt;
&lt;li&gt;æ— æ³•é€šè¿‡ç™½åå•æ ¡éªŒçš„åº”ä½¿ç”¨&lt;code&gt;html.EscapeString&lt;/code&gt;ã€&lt;code&gt;text/template&lt;/code&gt;æˆ–&lt;code&gt;bluemonday&lt;/code&gt;å¯¹&lt;code&gt;&amp;lt;, &amp;gt;, &amp;amp;, &#39;,&amp;quot;&lt;/code&gt;ç­‰å­—ç¬¦è¿›è¡Œè¿‡æ»¤æˆ–ç¼–ç &lt;/li&gt;
&lt;/ul&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;import (
	&amp;quot;text/template&amp;quot;
)

// TestHTMLEscapeString HTMLç‰¹æ®Šå­—ç¬¦è½¬ä¹‰
func main(inputValue string) string {
	escapedResult := template.HTMLEscapeString(inputValue)
	return escapedResult
}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt;&lt;/p&gt;
&lt;h3 id=&#34;sqlæ“ä½œ&#34;&gt;SQLæ“ä½œ&lt;/h3&gt;
&lt;h4 id=&#34;å¿…é¡»sqlè¯­å¥é»˜è®¤ä½¿ç”¨é¢„ç¼–è¯‘å¹¶ç»‘å®šå˜é‡&#34;&gt;ã€å¿…é¡»ã€‘SQLè¯­å¥é»˜è®¤ä½¿ç”¨é¢„ç¼–è¯‘å¹¶ç»‘å®šå˜é‡&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;ä½¿ç”¨&lt;code&gt;database/sql&lt;/code&gt;çš„prepareã€Queryæˆ–ä½¿ç”¨GORMç­‰ORMæ‰§è¡ŒSQLæ“ä½œ&lt;/li&gt;
&lt;/ul&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;import (
	&amp;quot;github.com/jinzhu/gorm&amp;quot;
	_ &amp;quot;github.com/jinzhu/gorm/dialects/sqlite&amp;quot;
)

type Product struct {
	gorm.Model
	Code  string
	Price uint
}

...
var product Product
...
db.First(&amp;amp;product, 1)
&lt;/code&gt;&lt;/pre&gt;&lt;ul&gt;
&lt;li&gt;ä½¿ç”¨å‚æ•°åŒ–æŸ¥è¯¢ï¼Œç¦æ­¢æ‹¼æ¥SQLè¯­å¥ï¼Œå¦å¤–å¯¹äºä¼ å…¥å‚æ•°ç”¨äºorder byæˆ–è¡¨åçš„éœ€è¦é€šè¿‡æ ¡éªŒ&lt;/li&gt;
&lt;/ul&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;// bad
import (
	&amp;quot;database/sql&amp;quot;
	&amp;quot;fmt&amp;quot;
	&amp;quot;net/http&amp;quot;
)

func handler(db *sql.DB, req *http.Request) {
	q := fmt.Sprintf(&amp;quot;SELECT ITEM,PRICE FROM PRODUCT WHERE ITEM_CATEGORY=&#39;%s&#39; ORDER BY PRICE&amp;quot;,
		req.URL.Query()[&amp;quot;category&amp;quot;])
	db.Query(q)
}

// good
func handlerGood(db *sql.DB, req *http.Request) {
	// ä½¿ç”¨?å ä½ç¬¦
	q := &amp;quot;SELECT ITEM,PRICE FROM PRODUCT WHERE ITEM_CATEGORY=&#39;?&#39; ORDER BY PRICE&amp;quot;
	db.Query(q, req.URL.Query()[&amp;quot;category&amp;quot;])
}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt;&lt;/p&gt;
&lt;h3 id=&#34;ç½‘ç»œè¯·æ±‚&#34;&gt;ç½‘ç»œè¯·æ±‚&lt;/h3&gt;
&lt;h4 id=&#34;å¿…é¡»èµ„æºè¯·æ±‚è¿‡æ»¤éªŒè¯&#34;&gt;ã€å¿…é¡»ã€‘èµ„æºè¯·æ±‚è¿‡æ»¤éªŒè¯&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;ä½¿ç”¨&lt;code&gt;&amp;quot;net/http&amp;quot;&lt;/code&gt;ä¸‹çš„æ–¹æ³•&lt;code&gt;http.Get(url)&lt;/code&gt;ã€&lt;code&gt;http.Post(url, contentType, body)&lt;/code&gt;ã€&lt;code&gt;http.Head(url)&lt;/code&gt;ã€&lt;code&gt;http.PostForm(url, data)&lt;/code&gt;ã€&lt;code&gt;http.Do(req)&lt;/code&gt;æ—¶ï¼Œå¦‚å˜é‡å€¼å¤–éƒ¨å¯æ§ï¼ˆæŒ‡ä»å‚æ•°ä¸­åŠ¨æ€è·å–ï¼‰ï¼Œåº”å¯¹è¯·æ±‚ç›®æ ‡è¿›è¡Œä¸¥æ ¼çš„å®‰å…¨æ ¡éªŒã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å¦‚è¯·æ±‚èµ„æºåŸŸåå½’å±å›ºå®šçš„èŒƒå›´ï¼Œå¦‚åªå…è®¸&lt;code&gt;a.qq.com&lt;/code&gt;å’Œ&lt;code&gt;b.qq.com&lt;/code&gt;ï¼Œåº”åšç™½åå•é™åˆ¶ã€‚å¦‚ä¸é€‚ç”¨ç™½åå•ï¼Œåˆ™æ¨èçš„æ ¡éªŒé€»è¾‘æ­¥éª¤æ˜¯ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;ç¬¬ 1 æ­¥ã€åªå…è®¸HTTPæˆ–HTTPSåè®®&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ç¬¬ 2 æ­¥ã€è§£æç›®æ ‡URLï¼Œè·å–å…¶HOST&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ç¬¬ 3 æ­¥ã€è§£æHOSTï¼Œè·å–HOSTæŒ‡å‘çš„IPåœ°å€è½¬æ¢æˆLongå‹&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ç¬¬ 4 æ­¥ã€æ£€æŸ¥IPåœ°å€æ˜¯å¦ä¸ºå†…ç½‘IPï¼Œç½‘æ®µæœ‰ï¼š&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;// ä»¥RFCå®šä¹‰çš„ä¸“æœ‰ç½‘ç»œä¸ºä¾‹ï¼Œå¦‚æœ‰è‡ªå®šä¹‰ç§æœ‰ç½‘æ®µäº¦åº”åŠ å…¥ç¦æ­¢è®¿é—®åˆ—è¡¨ã€‚
10.0.0.0/8
172.16.0.0/12
192.168.0.0/16
127.0.0.0/8
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ç¬¬ 5 æ­¥ã€è¯·æ±‚URL&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ç¬¬ 6 æ­¥ã€å¦‚æœ‰è·³è½¬ï¼Œè·³è½¬åæ‰§è¡Œ1ï¼Œå¦åˆ™ç»‘å®šç»æ ¡éªŒçš„ipå’ŒåŸŸåï¼Œå¯¹URLå‘èµ·è¯·æ±‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å®˜æ–¹åº“&lt;code&gt;encoding/xml&lt;/code&gt;ä¸æ”¯æŒå¤–éƒ¨å®ä½“å¼•ç”¨ï¼Œä½¿ç”¨è¯¥åº“å¯é¿å…xxeæ¼æ´&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;import (
	&amp;quot;encoding/xml&amp;quot;
	&amp;quot;fmt&amp;quot;
	&amp;quot;os&amp;quot;
)

func main() {
	type Person struct {
		XMLName  xml.Name `xml:&amp;quot;person&amp;quot;`
		Id       int      `xml:&amp;quot;id,attr&amp;quot;`
		UserName string   `xml:&amp;quot;name&amp;gt;first&amp;quot;`
		Comment  string   `xml:&amp;quot;,comment&amp;quot;`
	}

	v := &amp;amp;Person{Id: 13, UserName: &amp;quot;John&amp;quot;}
	v.Comment = &amp;quot; Need more details. &amp;quot;

	enc := xml.NewEncoder(os.Stdout)
	enc.Indent(&amp;quot;  &amp;quot;, &amp;quot;    &amp;quot;)
	if err := enc.Encode(v); err != nil {
		fmt.Printf(&amp;quot;error: %v\n&amp;quot;, err)
	}

}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt;&lt;/p&gt;
&lt;h3 id=&#34;æœåŠ¡å™¨ç«¯æ¸²æŸ“&#34;&gt;æœåŠ¡å™¨ç«¯æ¸²æŸ“&lt;/h3&gt;
&lt;h4 id=&#34;å¿…é¡»æ¨¡æ¿æ¸²æŸ“è¿‡æ»¤éªŒè¯&#34;&gt;ã€å¿…é¡»ã€‘æ¨¡æ¿æ¸²æŸ“è¿‡æ»¤éªŒè¯&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;ä½¿ç”¨&lt;code&gt;text/template&lt;/code&gt;æˆ–è€…&lt;code&gt;html/template&lt;/code&gt;æ¸²æŸ“æ¨¡æ¿æ—¶ç¦æ­¢å°†å¤–éƒ¨è¾“å…¥å‚æ•°å¼•å…¥æ¨¡æ¿ï¼Œæˆ–ä»…å…è®¸å¼•å…¥ç™½åå•å†…å­—ç¬¦ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;// bad
func handler(w http.ResponseWriter, r *http.Request) {
	r.ParseForm()
	x := r.Form.Get(&amp;quot;name&amp;quot;)

	var tmpl = `&amp;lt;!DOCTYPE html&amp;gt;&amp;lt;html&amp;gt;&amp;lt;body&amp;gt;
    &amp;lt;form action=&amp;quot;/&amp;quot; method=&amp;quot;post&amp;quot;&amp;gt;
        First name:&amp;lt;br&amp;gt;
    &amp;lt;input type=&amp;quot;text&amp;quot; name=&amp;quot;name&amp;quot; value=&amp;quot;&amp;quot;&amp;gt;
    &amp;lt;input type=&amp;quot;submit&amp;quot; value=&amp;quot;Submit&amp;quot;&amp;gt;
    &amp;lt;/form&amp;gt;&amp;lt;p&amp;gt;` + x + ` &amp;lt;/p&amp;gt;&amp;lt;/body&amp;gt;&amp;lt;/html&amp;gt;`

	t := template.New(&amp;quot;main&amp;quot;)
	t, _ = t.Parse(tmpl)
	t.Execute(w, &amp;quot;Hello&amp;quot;)
}

// good
import (
	&amp;quot;fmt&amp;quot;
	&amp;quot;github.com/go-playground/validator/v10&amp;quot;
)

var validate *validator.Validate
validate = validator.New()

func validateVariable(val) {
	errs := validate.Var(val, &amp;quot;gte=1,lte=100&amp;quot;) // é™åˆ¶å¿…é¡»æ˜¯1-100çš„æ­£æ•´æ•°
	if errs != nil {
		fmt.Println(errs)
		return false
	}
	return true
}

func handler(w http.ResponseWriter, r *http.Request) {
	r.ParseForm()
	x := r.Form.Get(&amp;quot;name&amp;quot;)

	if validateVariable(x) {
		var tmpl = `&amp;lt;!DOCTYPE html&amp;gt;&amp;lt;html&amp;gt;&amp;lt;body&amp;gt;
            &amp;lt;form action=&amp;quot;/&amp;quot; method=&amp;quot;post&amp;quot;&amp;gt;
            First name:&amp;lt;br&amp;gt;
            &amp;lt;input type=&amp;quot;text&amp;quot; name=&amp;quot;name&amp;quot; value=&amp;quot;&amp;quot;&amp;gt;
            &amp;lt;input type=&amp;quot;submit&amp;quot; value=&amp;quot;Submit&amp;quot;&amp;gt;
            &amp;lt;/form&amp;gt;&amp;lt;p&amp;gt;` + x + ` &amp;lt;/p&amp;gt;&amp;lt;/body&amp;gt;&amp;lt;/html&amp;gt;`
		t := template.New(&amp;quot;main&amp;quot;)
		t, _ = t.Parse(tmpl)
		t.Execute(w, &amp;quot;Hello&amp;quot;)
	} else {
		// ...
	}
}

&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt;&lt;/p&gt;
&lt;h3 id=&#34;webè·¨åŸŸ&#34;&gt;Webè·¨åŸŸ&lt;/h3&gt;
&lt;h4 id=&#34;å¿…é¡»è·¨åŸŸèµ„æºå…±äº«corsé™åˆ¶è¯·æ±‚æ¥æº&#34;&gt;ã€å¿…é¡»ã€‘è·¨åŸŸèµ„æºå…±äº«CORSé™åˆ¶è¯·æ±‚æ¥æº&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;CORSè¯·æ±‚ä¿æŠ¤ä¸å½“å¯å¯¼è‡´æ•æ„Ÿä¿¡æ¯æ³„æ¼ï¼Œå› æ­¤åº”å½“ä¸¥æ ¼è®¾ç½®Access-Control-Allow-Originä½¿ç”¨åŒæºç­–ç•¥è¿›è¡Œä¿æŠ¤ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;// good
c := cors.New(cors.Options{
	AllowedOrigins:   []string{&amp;quot;http://qq.com&amp;quot;, &amp;quot;https://qq.com&amp;quot;},
	AllowCredentials: true,
	Debug:            false,
})

// å¼•å…¥ä¸­é—´ä»¶
handler = c.Handler(handler)
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt;&lt;/p&gt;
&lt;h3 id=&#34;å“åº”è¾“å‡º&#34;&gt;å“åº”è¾“å‡º&lt;/h3&gt;
&lt;h4 id=&#34;å¿…é¡»è®¾ç½®æ­£ç¡®çš„httpå“åº”åŒ…ç±»å‹&#34;&gt;ã€å¿…é¡»ã€‘è®¾ç½®æ­£ç¡®çš„HTTPå“åº”åŒ…ç±»å‹&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;å“åº”å¤´Content-Typeä¸å®é™…å“åº”å†…å®¹ï¼Œåº”ä¿æŒä¸€è‡´ã€‚å¦‚ï¼šAPIå“åº”æ•°æ®ç±»å‹æ˜¯jsonï¼Œåˆ™å“åº”å¤´ä½¿ç”¨&lt;code&gt;application/json&lt;/code&gt;ï¼›è‹¥ä¸ºxmlï¼Œåˆ™è®¾ç½®ä¸º&lt;code&gt;text/xml&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;å¿…é¡»æ·»åŠ å®‰å…¨å“åº”å¤´&#34;&gt;ã€å¿…é¡»ã€‘æ·»åŠ å®‰å…¨å“åº”å¤´&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;æ‰€æœ‰æ¥å£ã€é¡µé¢ï¼Œæ·»åŠ å“åº”å¤´ &lt;code&gt;X-Content-Type-Options: nosniff&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;æ‰€æœ‰æ¥å£ã€é¡µé¢ï¼Œæ·»åŠ å“åº”å¤´&lt;code&gt;X-Frame-Options &lt;/code&gt;ã€‚æŒ‰éœ€åˆç†è®¾ç½®å…¶å…è®¸èŒƒå›´ï¼ŒåŒ…æ‹¬ï¼š&lt;code&gt;DENY&lt;/code&gt;ã€&lt;code&gt;SAMEORIGIN&lt;/code&gt;ã€&lt;code&gt;ALLOW-FROM origin&lt;/code&gt;ã€‚ç”¨æ³•å‚è€ƒï¼š&lt;a class=&#34;link&#34; href=&#34;https://developer.mozilla.org/zh-CN/docs/Web/HTTP/X-Frame-Options&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;MDNæ–‡æ¡£&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;å¿…é¡»å¤–éƒ¨è¾“å…¥æ‹¼æ¥åˆ°httpå“åº”å¤´ä¸­éœ€è¿›è¡Œè¿‡æ»¤&#34;&gt;ã€å¿…é¡»ã€‘å¤–éƒ¨è¾“å…¥æ‹¼æ¥åˆ°HTTPå“åº”å¤´ä¸­éœ€è¿›è¡Œè¿‡æ»¤&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;åº”å°½é‡é¿å…å¤–éƒ¨å¯æ§å‚æ•°æ‹¼æ¥åˆ°HTTPå“åº”å¤´ä¸­ï¼Œå¦‚ä¸šåŠ¡éœ€è¦åˆ™éœ€è¦è¿‡æ»¤æ‰&lt;code&gt;\r&lt;/code&gt;ã€&lt;code&gt;\n&lt;/code&gt;ç­‰æ¢è¡Œç¬¦ï¼Œæˆ–è€…æ‹’ç»æºå¸¦æ¢è¡Œç¬¦å·çš„å¤–éƒ¨è¾“å…¥ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;å¿…é¡»å¤–éƒ¨è¾“å…¥æ‹¼æ¥åˆ°responseé¡µé¢å‰è¿›è¡Œç¼–ç å¤„ç†&#34;&gt;ã€å¿…é¡»ã€‘å¤–éƒ¨è¾“å…¥æ‹¼æ¥åˆ°responseé¡µé¢å‰è¿›è¡Œç¼–ç å¤„ç†&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;ç›´å‡ºhtmlé¡µé¢æˆ–ä½¿ç”¨æ¨¡æ¿ç”Ÿæˆhtmlé¡µé¢çš„ï¼Œæ¨èä½¿ç”¨&lt;code&gt;text/template&lt;/code&gt;è‡ªåŠ¨ç¼–ç ï¼Œæˆ–è€…ä½¿ç”¨&lt;code&gt;html.EscapeString&lt;/code&gt;æˆ–&lt;code&gt;text/template&lt;/code&gt;å¯¹&lt;code&gt;&amp;lt;, &amp;gt;, &amp;amp;, &#39;,&amp;quot;&lt;/code&gt;ç­‰å­—ç¬¦è¿›è¡Œç¼–ç ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;import (
	&amp;quot;html/template&amp;quot;
)

func outtemplate(w http.ResponseWriter, r *http.Request) {
	param1 := r.URL.Query().Get(&amp;quot;param1&amp;quot;)
	tmpl := template.New(&amp;quot;hello&amp;quot;)
	tmpl, _ = tmpl.Parse(`{{define &amp;quot;T&amp;quot;}}{{.}}{{end}}`)
	tmpl.ExecuteTemplate(w, &amp;quot;T&amp;quot;, param1)
}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt;&lt;/p&gt;
&lt;h3 id=&#34;ä¼šè¯ç®¡ç†&#34;&gt;ä¼šè¯ç®¡ç†&lt;/h3&gt;
&lt;h4 id=&#34;å¿…é¡»å®‰å…¨ç»´æŠ¤sessionä¿¡æ¯&#34;&gt;ã€å¿…é¡»ã€‘å®‰å…¨ç»´æŠ¤sessionä¿¡æ¯&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;ç”¨æˆ·ç™»å½•æ—¶åº”é‡æ–°ç”Ÿæˆsessionï¼Œé€€å‡ºç™»å½•ååº”æ¸…ç†sessionã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;import (
	&amp;quot;github.com/gorilla/handlers&amp;quot;
	&amp;quot;github.com/gorilla/mux&amp;quot;
	&amp;quot;net/http&amp;quot;
)

// åˆ›å»ºcookie
func setToken(res http.ResponseWriter, req *http.Request) {
	expireToken := time.Now().Add(time.Minute * 30).Unix()
	expireCookie := time.Now().Add(time.Minute * 30)

	//...

	cookie := http.Cookie{
		Name:     &amp;quot;Auth&amp;quot;,
		Value:    signedToken,
		Expires:  expireCookie, // è¿‡æœŸå¤±æ•ˆ
		HttpOnly: true,
		Path:     &amp;quot;/&amp;quot;,
		Domain:   &amp;quot;127.0.0.1&amp;quot;,
		Secure:   true,
	}

	http.SetCookie(res, &amp;amp;cookie)
	http.Redirect(res, req, &amp;quot;/profile&amp;quot;, 307)
}

// åˆ é™¤cookie
func logout(res http.ResponseWriter, req *http.Request) {
	deleteCookie := http.Cookie{
		Name:    &amp;quot;Auth&amp;quot;,
		Value:   &amp;quot;none&amp;quot;,
		Expires: time.Now(),
	}
	http.SetCookie(res, &amp;amp;deleteCookie)
	return
}
&lt;/code&gt;&lt;/pre&gt;&lt;h4 id=&#34;å¿…é¡»csrfé˜²æŠ¤&#34;&gt;ã€å¿…é¡»ã€‘CSRFé˜²æŠ¤&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;æ¶‰åŠç³»ç»Ÿæ•æ„Ÿæ“ä½œæˆ–å¯è¯»å–æ•æ„Ÿä¿¡æ¯çš„æ¥å£åº”æ ¡éªŒ&lt;code&gt;Referer&lt;/code&gt;æˆ–æ·»åŠ &lt;code&gt;csrf_token&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;// good
import (
	&amp;quot;github.com/gorilla/csrf&amp;quot;
	&amp;quot;github.com/gorilla/mux&amp;quot;
	&amp;quot;net/http&amp;quot;
)

func main() {
	r := mux.NewRouter()
	r.HandleFunc(&amp;quot;/signup&amp;quot;, ShowSignupForm)
	r.HandleFunc(&amp;quot;/signup/post&amp;quot;, SubmitSignupForm)
	// ä½¿ç”¨csrf_tokenéªŒè¯
	http.ListenAndServe(&amp;quot;:8000&amp;quot;,
		csrf.Protect([]byte(&amp;quot;32-byte-long-auth-key&amp;quot;))(r))
}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt;&lt;/p&gt;
&lt;h3 id=&#34;è®¿é—®æ§åˆ¶&#34;&gt;è®¿é—®æ§åˆ¶&lt;/h3&gt;
&lt;h4 id=&#34;å¿…é¡»é»˜è®¤é‰´æƒ&#34;&gt;ã€å¿…é¡»ã€‘é»˜è®¤é‰´æƒ&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;é™¤éèµ„æºå®Œå…¨å¯å¯¹å¤–å¼€æ”¾ï¼Œå¦åˆ™ç³»ç»Ÿé»˜è®¤è¿›è¡Œèº«ä»½è®¤è¯ï¼Œä½¿ç”¨ç™½åå•çš„æ–¹å¼æ”¾å¼€ä¸éœ€è¦è®¤è¯çš„æ¥å£æˆ–é¡µé¢ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;æ ¹æ®èµ„æºçš„æœºå¯†ç¨‹åº¦å’Œç”¨æˆ·è§’è‰²ï¼Œä»¥æœ€å°æƒé™åŸåˆ™ï¼Œè®¾ç½®ä¸åŒçº§åˆ«çš„æƒé™ï¼Œå¦‚å®Œå…¨å…¬å¼€ã€ç™»å½•å¯è¯»ã€ç™»å½•å¯å†™ã€ç‰¹å®šç”¨æˆ·å¯è¯»ã€ç‰¹å®šç”¨æˆ·å¯å†™ç­‰&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;æ¶‰åŠç”¨æˆ·è‡ªèº«ç›¸å…³çš„æ•°æ®çš„è¯»å†™å¿…é¡»éªŒè¯ç™»å½•æ€ç”¨æˆ·èº«ä»½åŠå…¶æƒé™ï¼Œé¿å…è¶Šæƒæ“ä½œ&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sql&#34; data-lang=&#34;sql&#34;&gt;&lt;span class=&#34;c1&#34;&gt;-- ä¼ªä»£ç 
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;select&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;id&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;from&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;table&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;where&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;id&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;id&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;and&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;userid&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;session&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;userid&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;æ²¡æœ‰ç‹¬ç«‹è´¦å·ä½“ç³»çš„å¤–ç½‘æœåŠ¡ä½¿ç”¨&lt;code&gt;QQ&lt;/code&gt;æˆ–&lt;code&gt;å¾®ä¿¡&lt;/code&gt;ç™»å½•ï¼Œå†…ç½‘æœåŠ¡ä½¿ç”¨&lt;code&gt;ç»Ÿä¸€ç™»å½•æœåŠ¡&lt;/code&gt;ç™»å½•ï¼Œå…¶ä»–ä½¿ç”¨è´¦å·å¯†ç ç™»å½•çš„æœåŠ¡éœ€è¦å¢åŠ éªŒè¯ç ç­‰äºŒæ¬¡éªŒè¯&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt;&lt;/p&gt;
&lt;h3 id=&#34;19-å¹¶å‘ä¿æŠ¤&#34;&gt;1.9 å¹¶å‘ä¿æŠ¤&lt;/h3&gt;
&lt;h4 id=&#34;191å¿…é¡»ç¦æ­¢åœ¨é—­åŒ…ä¸­ç›´æ¥è°ƒç”¨å¾ªç¯å˜é‡&#34;&gt;1.9.1ã€å¿…é¡»ã€‘ç¦æ­¢åœ¨é—­åŒ…ä¸­ç›´æ¥è°ƒç”¨å¾ªç¯å˜é‡&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;åœ¨å¾ªç¯ä¸­å¯åŠ¨åç¨‹ï¼Œå½“åç¨‹ä¸­ä½¿ç”¨åˆ°äº†å¾ªç¯çš„ç´¢å¼•å€¼ï¼Œç”±äºå¤šä¸ªåç¨‹åŒæ—¶ä½¿ç”¨åŒä¸€ä¸ªå˜é‡ä¼šäº§ç”Ÿæ•°æ®ç«äº‰ï¼Œé€ æˆæ‰§è¡Œç»“æœå¼‚å¸¸ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;// bad
func main() {
	runtime.GOMAXPROCS(runtime.NumCPU())
	var group sync.WaitGroup

	for i := 0; i &amp;lt; 5; i++ {
		group.Add(1)
		go func() {
			defer group.Done()
			fmt.Printf(&amp;quot;%-2d&amp;quot;, i) // è¿™é‡Œæ‰“å°çš„iä¸æ˜¯æ‰€æœŸæœ›çš„
		}()
	}
	group.Wait()
}

// good
func main() {
	runtime.GOMAXPROCS(runtime.NumCPU())
	var group sync.WaitGroup

	for i := 0; i &amp;lt; 5; i++ {
		group.Add(1)
		go func(j int) {
			defer func() {
				if r := recover(); r != nil {
					fmt.Println(&amp;quot;Recovered in start()&amp;quot;)
				}
				group.Done()
			}()
			fmt.Printf(&amp;quot;%-2d&amp;quot;, j) // é—­åŒ…å†…éƒ¨ä½¿ç”¨å±€éƒ¨å˜é‡
		}(i) // æŠŠå¾ªç¯å˜é‡æ˜¾å¼åœ°ä¼ ç»™åç¨‹
	}
	group.Wait()
}
&lt;/code&gt;&lt;/pre&gt;&lt;h4 id=&#34;å¿…é¡»ç¦æ­¢å¹¶å‘å†™map&#34;&gt;ã€å¿…é¡»ã€‘ç¦æ­¢å¹¶å‘å†™map&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;å¹¶å‘å†™mapå®¹æ˜“é€ æˆç¨‹åºå´©æºƒå¹¶å¼‚å¸¸é€€å‡ºï¼Œå»ºè®®åŠ é”ä¿æŠ¤&lt;/li&gt;
&lt;/ul&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;// bad
func main() {
	m := make(map[int]int)
	// å¹¶å‘è¯»å†™
	go func() {
		for {
			_ = m[1]
		}
	}()
	go func() {
		for {
			m[2] = 1
		}
	}()
	select {}
}
&lt;/code&gt;&lt;/pre&gt;&lt;h4 id=&#34;å¿…é¡»ç¡®ä¿å¹¶å‘å®‰å…¨&#34;&gt;ã€å¿…é¡»ã€‘ç¡®ä¿å¹¶å‘å®‰å…¨&lt;/h4&gt;
&lt;p&gt;æ•æ„Ÿæ“ä½œå¦‚æœæœªä½œå¹¶å‘å®‰å…¨é™åˆ¶ï¼Œå¯å¯¼è‡´æ•°æ®è¯»å†™å¼‚å¸¸ï¼Œé€ æˆä¸šåŠ¡é€»è¾‘é™åˆ¶è¢«ç»•è¿‡ã€‚å¯é€šè¿‡åŒæ­¥é”æˆ–è€…åŸå­æ“ä½œè¿›è¡Œé˜²æŠ¤ã€‚&lt;/p&gt;
&lt;p&gt;é€šè¿‡åŒæ­¥é”å…±äº«å†…å­˜&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;// good
var count int

func Count(lock *sync.Mutex) {
	lock.Lock() // åŠ å†™é”
	count++
	fmt.Println(count)
	lock.Unlock() // è§£å†™é”ï¼Œä»»ä½•ä¸€ä¸ªLock()æˆ–RLock()å‡éœ€è¦ä¿è¯å¯¹åº”æœ‰Unlock()æˆ–RUnlock()
}

func main() {
	lock := &amp;amp;sync.Mutex{}
	for i := 0; i &amp;lt; 10; i++ {
		go Count(lock) // ä¼ é€’æŒ‡é’ˆæ˜¯ä¸ºäº†é˜²æ­¢å‡½æ•°å†…çš„é”å’Œè°ƒç”¨é”ä¸ä¸€è‡´
	}
	for {
		lock.Lock()
		c := count
		lock.Unlock()
		runtime.Gosched() // äº¤å‡ºæ—¶é—´ç‰‡ç»™åç¨‹
		if c &amp;gt; 10 {
			break
		}
	}
}
&lt;/code&gt;&lt;/pre&gt;&lt;ul&gt;
&lt;li&gt;ä½¿ç”¨&lt;code&gt;sync/atomic&lt;/code&gt;æ‰§è¡ŒåŸå­æ“ä½œ&lt;/li&gt;
&lt;/ul&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;// good
import (
	&amp;quot;sync&amp;quot;
	&amp;quot;sync/atomic&amp;quot;
)

func main() {
	type Map map[string]string
	var m atomic.Value
	m.Store(make(Map))
	var mu sync.Mutex // used only by writers
	read := func(key string) (val string) {
		m1 := m.Load().(Map)
		return m1[key]
	}
	insert := func(key, val string) {
		mu.Lock() // ä¸æ½œåœ¨å†™å…¥åŒæ­¥
		defer mu.Unlock()
		m1 := m.Load().(Map) // å¯¼å…¥structå½“å‰æ•°æ®
		m2 := make(Map)      // åˆ›å»ºæ–°å€¼
		for k, v := range m1 {
			m2[k] = v
		}
		m2[key] = val
		m.Store(m2) // ç”¨æ–°çš„æ›¿ä»£å½“å‰å¯¹è±¡
	}
	_, _ = read, insert
}
&lt;/code&gt;&lt;/pre&gt;</description>
        </item>
        <item>
        <title>Uber go è¯­è¨€ç¼–ç è§„èŒƒ</title>
        <link>https://zcj-git520.github.io/p/uber-go-%E8%AF%AD%E8%A8%80%E7%BC%96%E7%A0%81%E8%A7%84%E8%8C%83/</link>
        <pubDate>Wed, 20 Oct 2021 22:00:08 +0800</pubDate>
        
        <guid>https://zcj-git520.github.io/p/uber-go-%E8%AF%AD%E8%A8%80%E7%BC%96%E7%A0%81%E8%A7%84%E8%8C%83/</guid>
        <description>&lt;img src="https://zcj-git520.github.io/p/uber-go-%E8%AF%AD%E8%A8%80%E7%BC%96%E7%A0%81%E8%A7%84%E8%8C%83/1.jpg" alt="Featured image of post Uber go è¯­è¨€ç¼–ç è§„èŒƒ" /&gt;&lt;!-- raw HTML omitted --&gt;
&lt;!-- raw HTML omitted --&gt;
&lt;!-- raw HTML omitted --&gt;
&lt;!-- raw HTML omitted --&gt;
&lt;h2 id=&#34;uber-goguidehttpsgithubcomuber-goguide-çš„ä¸­æ–‡ç¿»è¯‘&#34;&gt;&lt;a class=&#34;link&#34; href=&#34;https://github.com/uber-go/guide&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;uber-go/guide&lt;/a&gt; çš„ä¸­æ–‡ç¿»è¯‘&lt;/h2&gt;
&lt;h2 id=&#34;englishhttpsgithubcomuber-goguideblobmasterstylemd&#34;&gt;&lt;a class=&#34;link&#34; href=&#34;https://github.com/uber-go/guide/blob/master/style.md&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;English&lt;/a&gt;&lt;/h2&gt;
&lt;h2 id=&#34;uber-go-è¯­è¨€ç¼–ç è§„èŒƒ&#34;&gt;Uber go è¯­è¨€ç¼–ç è§„èŒƒ&lt;/h2&gt;
&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;https://www.uber.com/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Uber&lt;/a&gt; æ˜¯ä¸€å®¶ç¾å›½ç¡…è°·çš„ç§‘æŠ€å…¬å¸ï¼Œä¹Ÿæ˜¯ go è¯­è¨€çš„æ—©æœŸ adopterã€‚å…¶å¼€æºäº†å¾ˆå¤š golang é¡¹ç›®ï¼Œè¯¸å¦‚è¢«
gopher åœˆç†ŸçŸ¥çš„ &lt;a class=&#34;link&#34; href=&#34;https://github.com/uber-go/zap&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;zap&lt;/a&gt;ã€&lt;a class=&#34;link&#34; href=&#34;https://github.com/jaegertracing/jaeger&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;jaeger&lt;/a&gt; ç­‰ã€‚2018 å¹´å¹´æœ« Uber å°†å†…éƒ¨çš„ &lt;a class=&#34;link&#34; href=&#34;https://github.com/uber-go/guide&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;go é£æ ¼è§„èŒƒ&lt;/a&gt; å¼€æºåˆ° GitHubï¼Œç»è¿‡ä¸€å¹´çš„ç§¯ç´¯å’Œæ›´æ–°ï¼Œè¯¥è§„èŒƒå·²ç»åˆå…·è§„æ¨¡ï¼Œå¹¶å—åˆ°å¹¿å¤§ gopher çš„å…³æ³¨ã€‚æœ¬æ–‡æ˜¯è¯¥è§„èŒƒçš„ä¸­æ–‡ç‰ˆæœ¬ã€‚æœ¬ç‰ˆæœ¬ä¼šæ ¹æ®åŸç‰ˆå®æ—¶æ›´æ–°ã€‚&lt;/p&gt;
&lt;h2 id=&#34;ç›®å½•&#34;&gt;ç›®å½•&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;#uber-goguide-%e7%9a%84%e4%b8%ad%e6%96%87%e7%bf%bb%e8%af%91&#34; &gt;uber-
go/guide çš„ä¸­æ–‡ç¿»è¯‘&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;#english&#34; &gt;English&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;#uber-go-%e8%af%ad%e8%a8%80%e7%bc%96%e7%a0%81%e8%a7%84%e8%8c%83&#34; &gt;Uber go è¯­è¨€ç¼–ç è§„èŒƒ&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;#%e7%89%88%e6%9c%ac&#34; &gt;ç‰ˆæœ¬&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;#%e7%9b%ae%e5%bd%95&#34; &gt;ç›®å½•&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;#%e4%bb%8b%e7%bb%8d&#34; &gt;ä»‹ç»&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;#%e6%8c%87%e5%af%bc%e5%8e%9f%e5%88%99&#34; &gt;æŒ‡å¯¼åŸåˆ™&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;#%e6%8c%87%e5%90%91-interface-%e7%9a%84%e6%8c%87%e9%92%88&#34; &gt;æŒ‡å‘ interface çš„æŒ‡é’ˆ&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;#interface-%e5%90%88%e7%90%86%e6%80%a7%e9%aa%8c%e8%af%81&#34; &gt;Interface åˆç†æ€§éªŒè¯&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;#%e6%8e%a5%e6%94%b6%e5%99%a8-receiver-%e4%b8%8e%e6%8e%a5%e5%8f%a3&#34; &gt;æ¥æ”¶å™¨ (receiver) ä¸æ¥å£&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;#%e9%9b%b6%e5%80%bc-mutex-%e6%98%af%e6%9c%89%e6%95%88%e7%9a%84&#34; &gt;é›¶å€¼ Mutex æ˜¯æœ‰æ•ˆçš„&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;#%e5%9c%a8%e8%be%b9%e7%95%8c%e5%a4%84%e6%8b%b7%e8%b4%9d-slices-%e5%92%8c-maps&#34; &gt;åœ¨è¾¹ç•Œå¤„æ‹·è´ Slices å’Œ Maps&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;#%e6%8e%a5%e6%94%b6-slices-%e5%92%8c-maps&#34; &gt;æ¥æ”¶ Slices å’Œ Maps&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;#%e8%bf%94%e5%9b%9e-slices-%e6%88%96-maps&#34; &gt;è¿”å› slices æˆ– maps&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;#%e4%bd%bf%e7%94%a8-defer-%e9%87%8a%e6%94%be%e8%b5%84%e6%ba%90&#34; &gt;ä½¿ç”¨ defer é‡Šæ”¾èµ„æº&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;#channel-%e7%9a%84-size-%e8%a6%81%e4%b9%88%e6%98%af-1%e8%a6%81%e4%b9%88%e6%98%af%e6%97%a0%e7%bc%93%e5%86%b2%e7%9a%84&#34; &gt;Channel çš„ size è¦ä¹ˆæ˜¯ 1ï¼Œè¦ä¹ˆæ˜¯æ— ç¼“å†²çš„&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;#%e6%9e%9a%e4%b8%be%e4%bb%8e-1-%e5%bc%80%e5%a7%8b&#34; &gt;æšä¸¾ä» 1 å¼€å§‹&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;#%e4%bd%bf%e7%94%a8-time-%e5%a4%84%e7%90%86%e6%97%b6%e9%97%b4&#34; &gt;ä½¿ç”¨ time å¤„ç†æ—¶é—´&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;#%e4%bd%bf%e7%94%a8-timetime-%e8%a1%a8%e8%be%be%e7%9e%ac%e6%97%b6%e6%97%b6%e9%97%b4&#34; &gt;ä½¿ç”¨ &lt;code&gt;time.Time&lt;/code&gt; è¡¨è¾¾ç¬æ—¶æ—¶é—´&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;#%e4%bd%bf%e7%94%a8-timeduration-%e8%a1%a8%e8%be%be%e6%97%b6%e9%97%b4%e6%ae%b5&#34; &gt;ä½¿ç”¨ &lt;code&gt;time.Duration&lt;/code&gt; è¡¨è¾¾æ—¶é—´æ®µ&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;#%e5%af%b9%e5%a4%96%e9%83%a8%e7%b3%bb%e7%bb%9f%e4%bd%bf%e7%94%a8-timetime-%e5%92%8c-timeduration&#34; &gt;å¯¹å¤–éƒ¨ç³»ç»Ÿä½¿ç”¨ &lt;code&gt;time.Time&lt;/code&gt; å’Œ &lt;code&gt;time.Duration&lt;/code&gt;&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;#%e9%94%99%e8%af%af%e7%b1%bb%e5%9e%8b&#34; &gt;é”™è¯¯ç±»å‹&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;#%e9%94%99%e8%af%af%e5%8c%85%e8%a3%85-error-wrapping&#34; &gt;é”™è¯¯åŒ…è£… (Error Wrapping)&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;#%e5%a4%84%e7%90%86%e7%b1%bb%e5%9e%8b%e6%96%ad%e8%a8%80%e5%a4%b1%e8%b4%a5&#34; &gt;å¤„ç†ç±»å‹æ–­è¨€å¤±è´¥&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;#%e4%b8%8d%e8%a6%81-panic&#34; &gt;ä¸è¦ panic&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;#%e4%bd%bf%e7%94%a8-gouberorgatomic&#34; &gt;ä½¿ç”¨ go.uber.org/atomic&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;#%e9%81%bf%e5%85%8d%e5%8f%af%e5%8f%98%e5%85%a8%e5%b1%80%e5%8f%98%e9%87%8f&#34; &gt;é¿å…å¯å˜å…¨å±€å˜é‡&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;#%e9%81%bf%e5%85%8d%e5%9c%a8%e5%85%ac%e5%85%b1%e7%bb%93%e6%9e%84%e4%b8%ad%e5%b5%8c%e5%85%a5%e7%b1%bb%e5%9e%8b&#34; &gt;é¿å…åœ¨å…¬å…±ç»“æ„ä¸­åµŒå…¥ç±»å‹&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;#%e9%81%bf%e5%85%8d%e4%bd%bf%e7%94%a8%e5%86%85%e7%bd%ae%e5%90%8d%e7%a7%b0&#34; &gt;é¿å…ä½¿ç”¨å†…ç½®åç§°&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;#%e9%81%bf%e5%85%8d%e4%bd%bf%e7%94%a8-init&#34; &gt;é¿å…ä½¿ç”¨ &lt;code&gt;init()&lt;/code&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;#%e8%bf%bd%e5%8a%a0%e6%97%b6%e4%bc%98%e5%85%88%e6%8c%87%e5%ae%9a%e5%88%87%e7%89%87%e5%ae%b9%e9%87%8f&#34; &gt;è¿½åŠ æ—¶ä¼˜å…ˆæŒ‡å®šåˆ‡ç‰‡å®¹é‡&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;#%e4%b8%bb%e5%87%bd%e6%95%b0%e9%80%80%e5%87%ba%e6%96%b9%e5%bc%8fexit&#34; &gt;ä¸»å‡½æ•°é€€å‡ºæ–¹å¼(Exit)&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;#%e4%b8%80%e6%ac%a1%e6%80%a7%e9%80%80%e5%87%ba&#34; &gt;ä¸€æ¬¡æ€§é€€å‡º&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;#%e6%80%a7%e8%83%bd&#34; &gt;æ€§èƒ½&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;#%e4%bc%98%e5%85%88%e4%bd%bf%e7%94%a8-strconv-%e8%80%8c%e4%b8%8d%e6%98%af-fmt&#34; &gt;ä¼˜å…ˆä½¿ç”¨ strconv è€Œä¸æ˜¯ fmt&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;#%e9%81%bf%e5%85%8d%e5%ad%97%e7%ac%a6%e4%b8%b2%e5%88%b0%e5%ad%97%e8%8a%82%e7%9a%84%e8%bd%ac%e6%8d%a2&#34; &gt;é¿å…å­—ç¬¦ä¸²åˆ°å­—èŠ‚çš„è½¬æ¢&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;#%e6%8c%87%e5%ae%9a%e5%ae%b9%e5%99%a8%e5%ae%b9%e9%87%8f&#34; &gt;æŒ‡å®šå®¹å™¨å®¹é‡&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;#%e6%8c%87%e5%ae%9amap%e5%ae%b9%e9%87%8f%e6%8f%90%e7%a4%ba&#34; &gt;æŒ‡å®šMapå®¹é‡æç¤º&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;#%e6%8c%87%e5%ae%9a%e5%88%87%e7%89%87%e5%ae%b9%e9%87%8f&#34; &gt;æŒ‡å®šåˆ‡ç‰‡å®¹é‡&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;#%e8%a7%84%e8%8c%83&#34; &gt;è§„èŒƒ&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;#%e4%b8%80%e8%87%b4%e6%80%a7&#34; &gt;ä¸€è‡´æ€§&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;#%e7%9b%b8%e4%bc%bc%e7%9a%84%e5%a3%b0%e6%98%8e%e6%94%be%e5%9c%a8%e4%b8%80%e7%bb%84&#34; &gt;ç›¸ä¼¼çš„å£°æ˜æ”¾åœ¨ä¸€ç»„&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;#import-%e5%88%86%e7%bb%84&#34; &gt;import åˆ†ç»„&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;#%e5%8c%85%e5%90%8d&#34; &gt;åŒ…å&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;#%e5%87%bd%e6%95%b0%e5%90%8d&#34; &gt;å‡½æ•°å&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;#%e5%af%bc%e5%85%a5%e5%88%ab%e5%90%8d&#34; &gt;å¯¼å…¥åˆ«å&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;#%e5%87%bd%e6%95%b0%e5%88%86%e7%bb%84%e4%b8%8e%e9%a1%ba%e5%ba%8f&#34; &gt;å‡½æ•°åˆ†ç»„ä¸é¡ºåº&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;#%e5%87%8f%e5%b0%91%e5%b5%8c%e5%a5%97&#34; &gt;å‡å°‘åµŒå¥—&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;#%e4%b8%8d%e5%bf%85%e8%a6%81%e7%9a%84-else&#34; &gt;ä¸å¿…è¦çš„ else&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;#%e9%a1%b6%e5%b1%82%e5%8f%98%e9%87%8f%e5%a3%b0%e6%98%8e&#34; &gt;é¡¶å±‚å˜é‡å£°æ˜&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;#%e5%af%b9%e4%ba%8e%e6%9c%aa%e5%af%bc%e5%87%ba%e7%9a%84%e9%a1%b6%e5%b1%82%e5%b8%b8%e9%87%8f%e5%92%8c%e5%8f%98%e9%87%8f%e4%bd%bf%e7%94%a8_%e4%bd%9c%e4%b8%ba%e5%89%8d%e7%bc%80&#34; &gt;å¯¹äºæœªå¯¼å‡ºçš„é¡¶å±‚å¸¸é‡å’Œå˜é‡ï¼Œä½¿ç”¨_ä½œä¸ºå‰ç¼€&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;#%e7%bb%93%e6%9e%84%e4%bd%93%e4%b8%ad%e7%9a%84%e5%b5%8c%e5%85%a5&#34; &gt;ç»“æ„ä½“ä¸­çš„åµŒå…¥&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;#%e4%bd%bf%e7%94%a8%e5%ad%97%e6%ae%b5%e5%90%8d%e5%88%9d%e5%a7%8b%e5%8c%96%e7%bb%93%e6%9e%84%e4%bd%93&#34; &gt;ä½¿ç”¨å­—æ®µååˆå§‹åŒ–ç»“æ„ä½“&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;#%e6%9c%ac%e5%9c%b0%e5%8f%98%e9%87%8f%e5%a3%b0%e6%98%8e&#34; &gt;æœ¬åœ°å˜é‡å£°æ˜&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;#nil-%e6%98%af%e4%b8%80%e4%b8%aa%e6%9c%89%e6%95%88%e7%9a%84-slice&#34; &gt;nil æ˜¯ä¸€ä¸ªæœ‰æ•ˆçš„ slice&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;#%e7%bc%a9%e5%b0%8f%e5%8f%98%e9%87%8f%e4%bd%9c%e7%94%a8%e5%9f%9f&#34; &gt;ç¼©å°å˜é‡ä½œç”¨åŸŸ&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;#%e9%81%bf%e5%85%8d%e5%8f%82%e6%95%b0%e8%af%ad%e4%b9%89%e4%b8%8d%e6%98%8e%e7%a1%aeavoid-naked-parameters&#34; &gt;é¿å…å‚æ•°è¯­ä¹‰ä¸æ˜ç¡®(Avoid Naked Parameters)&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;#%e4%bd%bf%e7%94%a8%e5%8e%9f%e5%a7%8b%e5%ad%97%e7%ac%a6%e4%b8%b2%e5%ad%97%e9%9d%a2%e5%80%bc%e9%81%bf%e5%85%8d%e8%bd%ac%e4%b9%89&#34; &gt;ä½¿ç”¨åŸå§‹å­—ç¬¦ä¸²å­—é¢å€¼ï¼Œé¿å…è½¬ä¹‰&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;#%e5%88%9d%e5%a7%8b%e5%8c%96%e7%bb%93%e6%9e%84%e4%bd%93&#34; &gt;åˆå§‹åŒ–ç»“æ„ä½“&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;#%e4%bd%bf%e7%94%a8%e5%ad%97%e6%ae%b5%e5%90%8d%e5%88%9d%e5%a7%8b%e5%8c%96%e7%bb%93%e6%9e%84&#34; &gt;ä½¿ç”¨å­—æ®µååˆå§‹åŒ–ç»“æ„&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;#%e7%9c%81%e7%95%a5%e7%bb%93%e6%9e%84%e4%b8%ad%e7%9a%84%e9%9b%b6%e5%80%bc%e5%ad%97%e6%ae%b5&#34; &gt;çœç•¥ç»“æ„ä¸­çš„é›¶å€¼å­—æ®µ&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;#%e5%af%b9%e9%9b%b6%e5%80%bc%e7%bb%93%e6%9e%84%e4%bd%bf%e7%94%a8-var&#34; &gt;å¯¹é›¶å€¼ç»“æ„ä½¿ç”¨ &lt;code&gt;var&lt;/code&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;#%e5%88%9d%e5%a7%8b%e5%8c%96-struct-%e5%bc%95%e7%94%a8&#34; &gt;åˆå§‹åŒ– Struct å¼•ç”¨&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;#%e5%88%9d%e5%a7%8b%e5%8c%96-maps&#34; &gt;åˆå§‹åŒ– Maps&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;#%e5%ad%97%e7%ac%a6%e4%b8%b2-string-format&#34; &gt;å­—ç¬¦ä¸² string format&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;#%e5%91%bd%e5%90%8d-printf-%e6%a0%b7%e5%bc%8f%e7%9a%84%e5%87%bd%e6%95%b0&#34; &gt;å‘½å Printf æ ·å¼çš„å‡½æ•°&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;#%e7%bc%96%e7%a8%8b%e6%a8%a1%e5%bc%8f&#34; &gt;ç¼–ç¨‹æ¨¡å¼&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;#%e8%a1%a8%e9%a9%b1%e5%8a%a8%e6%b5%8b%e8%af%95&#34; &gt;è¡¨é©±åŠ¨æµ‹è¯•&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;#%e5%8a%9f%e8%83%bd%e9%80%89%e9%a1%b9&#34; &gt;åŠŸèƒ½é€‰é¡¹&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;#linting&#34; &gt;Linting&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;#lint-runners&#34; &gt;Lint Runners&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;#stargazers-over-time&#34; &gt;Stargazers over time&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;ä»‹ç»&#34;&gt;ä»‹ç»&lt;/h2&gt;
&lt;p&gt;æ ·å¼ (style) æ˜¯æ”¯é…æˆ‘ä»¬ä»£ç çš„æƒ¯ä¾‹ã€‚æœ¯è¯­&lt;code&gt;æ ·å¼&lt;/code&gt;æœ‰ç‚¹ç”¨è¯ä¸å½“ï¼Œå› ä¸ºè¿™äº›çº¦å®šæ¶µç›–çš„èŒƒå›´ä¸é™äºç”±
gofmt æ›¿æˆ‘ä»¬å¤„ç†çš„æºæ–‡ä»¶æ ¼å¼ã€‚&lt;/p&gt;
&lt;p&gt;æœ¬æŒ‡å—çš„ç›®çš„æ˜¯é€šè¿‡è¯¦ç»†æè¿°åœ¨ Uber ç¼–å†™
go ä»£ç çš„æ³¨æ„äº‹é¡¹æ¥ç®¡ç†è¿™ç§å¤æ‚æ€§ã€‚è¿™äº›è§„åˆ™çš„å­˜åœ¨æ˜¯ä¸ºäº†ä½¿ä»£ç åº“æ˜“äºç®¡ç†ï¼ŒåŒæ—¶ä»ç„¶å…è®¸å·¥ç¨‹å¸ˆæ›´æœ‰æ•ˆåœ°ä½¿ç”¨
go è¯­è¨€åŠŸèƒ½ã€‚&lt;/p&gt;
&lt;p&gt;è¯¥æŒ‡å—æœ€åˆç”± &lt;a class=&#34;link&#34; href=&#34;https://github.com/prashantv&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Prashant Varanasi&lt;/a&gt; å’Œ &lt;a class=&#34;link&#34; href=&#34;https://github.com/nomis52&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Simon Newton&lt;/a&gt; ç¼–å†™ï¼Œç›®çš„æ˜¯ä½¿ä¸€äº›åŒäº‹èƒ½å¿«é€Ÿä½¿ç”¨
goã€‚å¤šå¹´æ¥ï¼Œè¯¥æŒ‡å—å·²æ ¹æ®å…¶ä»–äººçš„åé¦ˆè¿›è¡Œäº†ä¿®æ”¹ã€‚&lt;/p&gt;
&lt;p&gt;æœ¬æ–‡æ¡£è®°å½•äº†æˆ‘ä»¬åœ¨ Uber éµå¾ªçš„
go ä»£ç ä¸­çš„æƒ¯ç”¨çº¦å®šã€‚å…¶ä¸­è®¸å¤šæ˜¯
go çš„é€šç”¨å‡†åˆ™ï¼Œè€Œå…¶ä»–æ‰©å±•å‡†åˆ™ä¾èµ–äºä¸‹é¢å¤–éƒ¨çš„æŒ‡å—ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;[Effective
go](https://
golang.org/doc/effective_
go.html)&lt;/li&gt;
&lt;li&gt;[
go Common Mistakes](&lt;a class=&#34;link&#34; href=&#34;https://github.com/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://github.com/&lt;/a&gt;
golang/
go/wiki/CommonMistakes)&lt;/li&gt;
&lt;li&gt;[
go Code Review Comments](&lt;a class=&#34;link&#34; href=&#34;https://github.com/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://github.com/&lt;/a&gt;
golang/
go/wiki/CodeReviewComments)&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;æ‰€æœ‰ä»£ç éƒ½åº”è¯¥é€šè¿‡&lt;code&gt; golint&lt;/code&gt;å’Œ&lt;code&gt; go vet&lt;/code&gt;çš„æ£€æŸ¥å¹¶æ— é”™è¯¯ã€‚æˆ‘ä»¬å»ºè®®æ‚¨å°†ç¼–è¾‘å™¨è®¾ç½®ä¸ºï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ä¿å­˜æ—¶è¿è¡Œ &lt;code&gt; goimports&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;è¿è¡Œ &lt;code&gt; golint&lt;/code&gt; å’Œ &lt;code&gt; go vet&lt;/code&gt; æ£€æŸ¥é”™è¯¯&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;æ‚¨å¯ä»¥åœ¨ä»¥ä¸‹
go ç¼–è¾‘å™¨å·¥å…·æ”¯æŒé¡µé¢ä¸­æ‰¾åˆ°æ›´ä¸ºè¯¦ç»†çš„ä¿¡æ¯ï¼š
&amp;lt;https://github.com/
golang/
go/wiki/IDEsAndTextEditorPlugins&amp;gt;&lt;/p&gt;
&lt;h2 id=&#34;æŒ‡å¯¼åŸåˆ™&#34;&gt;æŒ‡å¯¼åŸåˆ™&lt;/h2&gt;
&lt;h3 id=&#34;æŒ‡å‘-interface-çš„æŒ‡é’ˆ&#34;&gt;æŒ‡å‘ interface çš„æŒ‡é’ˆ&lt;/h3&gt;
&lt;p&gt;æ‚¨å‡ ä¹ä¸éœ€è¦æŒ‡å‘æ¥å£ç±»å‹çš„æŒ‡é’ˆã€‚æ‚¨åº”è¯¥å°†æ¥å£ä½œä¸ºå€¼è¿›è¡Œä¼ é€’ï¼Œåœ¨è¿™æ ·çš„ä¼ é€’è¿‡ç¨‹ä¸­ï¼Œå®è´¨ä¸Šä¼ é€’çš„åº•å±‚æ•°æ®ä»ç„¶å¯ä»¥æ˜¯æŒ‡é’ˆã€‚&lt;/p&gt;
&lt;p&gt;æ¥å£å®è´¨ä¸Šåœ¨åº•å±‚ç”¨ä¸¤ä¸ªå­—æ®µè¡¨ç¤ºï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;ä¸€ä¸ªæŒ‡å‘æŸäº›ç‰¹å®šç±»å‹ä¿¡æ¯çš„æŒ‡é’ˆã€‚æ‚¨å¯ä»¥å°†å…¶è§†ä¸º&amp;quot;type&amp;quot;ã€‚&lt;/li&gt;
&lt;li&gt;æ•°æ®æŒ‡é’ˆã€‚å¦‚æœå­˜å‚¨çš„æ•°æ®æ˜¯æŒ‡é’ˆï¼Œåˆ™ç›´æ¥å­˜å‚¨ã€‚å¦‚æœå­˜å‚¨çš„æ•°æ®æ˜¯ä¸€ä¸ªå€¼ï¼Œåˆ™å­˜å‚¨æŒ‡å‘è¯¥å€¼çš„æŒ‡é’ˆã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;å¦‚æœå¸Œæœ›æ¥å£æ–¹æ³•ä¿®æ”¹åŸºç¡€æ•°æ®ï¼Œåˆ™å¿…é¡»ä½¿ç”¨æŒ‡é’ˆä¼ é€’(å°†å¯¹è±¡æŒ‡é’ˆèµ‹å€¼ç»™æ¥å£å˜é‡)ã€‚&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;
go
type F interface {
  f()
}

type S1 struct{}

func (s S1) f() {}

type S2 struct{}

func (s *S2) f() {}

// f1.f()æ— æ³•ä¿®æ”¹åº•å±‚æ•°æ®
// f2.f() å¯ä»¥ä¿®æ”¹åº•å±‚æ•°æ®,ç»™æ¥å£å˜é‡f2èµ‹å€¼æ—¶ä½¿ç”¨çš„æ˜¯å¯¹è±¡æŒ‡é’ˆ
var f1 F = S1{}
var f2 F = &amp;amp;S2{}
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&#34;interface-åˆç†æ€§éªŒè¯&#34;&gt;Interface åˆç†æ€§éªŒè¯&lt;/h3&gt;
&lt;p&gt;åœ¨ç¼–è¯‘æ—¶éªŒè¯æ¥å£çš„ç¬¦åˆæ€§ã€‚è¿™åŒ…æ‹¬ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å°†å®ç°ç‰¹å®šæ¥å£çš„å¯¼å‡ºç±»å‹ä½œä¸ºæ¥å£API çš„ä¸€éƒ¨åˆ†è¿›è¡Œæ£€æŸ¥&lt;/li&gt;
&lt;li&gt;å®ç°åŒä¸€æ¥å£çš„(å¯¼å‡ºå’Œéå¯¼å‡º)ç±»å‹å±äºå®ç°ç±»å‹çš„é›†åˆ&lt;/li&gt;
&lt;li&gt;ä»»ä½•è¿åæ¥å£åˆç†æ€§æ£€æŸ¥çš„åœºæ™¯,éƒ½ä¼šç»ˆæ­¢ç¼–è¯‘,å¹¶é€šçŸ¥ç»™ç”¨æˆ·&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;è¡¥å……:ä¸Šé¢3æ¡æ˜¯ç¼–è¯‘å™¨å¯¹æ¥å£çš„æ£€æŸ¥æœºåˆ¶,
å¤§ä½“æ„æ€æ˜¯é”™è¯¯ä½¿ç”¨æ¥å£ä¼šåœ¨ç¼–è¯‘æœŸæŠ¥é”™.
æ‰€ä»¥å¯ä»¥åˆ©ç”¨è¿™ä¸ªæœºåˆ¶è®©éƒ¨åˆ†é—®é¢˜åœ¨ç¼–è¯‘æœŸæš´éœ².&lt;/p&gt;
&lt;!-- raw HTML omitted --&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;go
// å¦‚æœHandleræ²¡æœ‰å®ç°http.Handler,ä¼šåœ¨è¿è¡Œæ—¶æŠ¥é”™
type Handler struct {
  // ...
}
func (h *Handler) ServeHTTP(
  w http.ResponseWriter,
  r *http.Request,
) {
  ...
}
&lt;/code&gt;&lt;/pre&gt;&lt;!-- raw HTML omitted --&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;
go
type Handler struct {
  // ...
}
// ç”¨äºè§¦å‘ç¼–è¯‘æœŸçš„æ¥å£çš„åˆç†æ€§æ£€æŸ¥æœºåˆ¶
// å¦‚æœHandleræ²¡æœ‰å®ç°http.Handler,ä¼šåœ¨ç¼–è¯‘æœŸæŠ¥é”™
var _ http.Handler = (*Handler)(nil)
func (h *Handler) ServeHTTP(
  w http.ResponseWriter,
  r *http.Request,
) {
  // ...
}
&lt;/code&gt;&lt;/pre&gt;&lt;!-- raw HTML omitted --&gt;
&lt;p&gt;å¦‚æœ &lt;code&gt;*Handler&lt;/code&gt; ä¸ &lt;code&gt;http.Handler&lt;/code&gt; çš„æ¥å£ä¸åŒ¹é…,
é‚£ä¹ˆè¯­å¥ &lt;code&gt;var _ http.Handler = (*Handler)(nil)&lt;/code&gt; å°†æ— æ³•ç¼–è¯‘é€šè¿‡.&lt;/p&gt;
&lt;p&gt;èµ‹å€¼çš„å³è¾¹åº”è¯¥æ˜¯æ–­è¨€ç±»å‹çš„é›¶å€¼ã€‚
å¯¹äºæŒ‡é’ˆç±»å‹ï¼ˆå¦‚ &lt;code&gt;*Handler&lt;/code&gt;ï¼‰ã€åˆ‡ç‰‡å’Œæ˜ å°„ï¼Œè¿™æ˜¯ &lt;code&gt;nil&lt;/code&gt;ï¼›
å¯¹äºç»“æ„ç±»å‹ï¼Œè¿™æ˜¯ç©ºç»“æ„ã€‚&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;go
type LogHandler struct {
  h   http.Handler
  log *zap.Logger
}
var _ http.Handler = LogHandler{}
func (h LogHandler) ServeHTTP(
  w http.ResponseWriter,
  r *http.Request,
) {
  // ...
}
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&#34;æ¥æ”¶å™¨-receiver-ä¸æ¥å£&#34;&gt;æ¥æ”¶å™¨ (receiver) ä¸æ¥å£&lt;/h3&gt;
&lt;p&gt;ä½¿ç”¨å€¼æ¥æ”¶å™¨çš„æ–¹æ³•æ—¢å¯ä»¥é€šè¿‡å€¼è°ƒç”¨ï¼Œä¹Ÿå¯ä»¥é€šè¿‡æŒ‡é’ˆè°ƒç”¨ã€‚&lt;/p&gt;
&lt;p&gt;å¸¦æŒ‡é’ˆæ¥æ”¶å™¨çš„æ–¹æ³•åªèƒ½é€šè¿‡æŒ‡é’ˆæˆ– &lt;a class=&#34;link&#34; href=&#34;https://&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;addressable values&lt;/a&gt;è°ƒç”¨.&lt;/p&gt;
&lt;p&gt;golang.org/ref/spec#Method_values&lt;/p&gt;
&lt;p&gt;ä¾‹å¦‚ï¼Œ&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;go
type S struct {
  data string
}

func (s S) Read() string {
  return s.data
}

func (s *S) Write(str string) {
  s.data = str
}

sVals := map[int]S{1: {&amp;quot;A&amp;quot;}}

// ä½ åªèƒ½é€šè¿‡å€¼è°ƒç”¨ Read
sVals[1].Read()

// è¿™ä¸èƒ½ç¼–è¯‘é€šè¿‡ï¼š
//  sVals[1].Write(&amp;quot;test&amp;quot;)

sPtrs := map[int]*S{1: {&amp;quot;A&amp;quot;}}

// é€šè¿‡æŒ‡é’ˆæ—¢å¯ä»¥è°ƒç”¨ Readï¼Œä¹Ÿå¯ä»¥è°ƒç”¨ Write æ–¹æ³•
sPtrs[1].Read()
sPtrs[1].Write(&amp;quot;test&amp;quot;)
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ç±»ä¼¼çš„,å³ä½¿æ–¹æ³•æœ‰äº†å€¼æ¥æ”¶å™¨,ä¹ŸåŒæ ·å¯ä»¥ç”¨æŒ‡é’ˆæ¥æ”¶å™¨æ¥æ»¡è¶³æ¥å£.&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;go
type F interface {
  f()
}

type S1 struct{}

func (s S1) f() {}

type S2 struct{}

func (s *S2) f() {}

s1Val := S1{}
s1Ptr := &amp;amp;S1{}
s2Val := S2{}
s2Ptr := &amp;amp;S2{}

var i F
i = s1Val
i = s1Ptr
i = s2Ptr

//  ä¸‹é¢ä»£ç æ— æ³•é€šè¿‡ç¼–è¯‘ã€‚å› ä¸º s2Val æ˜¯ä¸€ä¸ªå€¼ï¼Œè€Œ S2 çš„ f æ–¹æ³•ä¸­æ²¡æœ‰ä½¿ç”¨å€¼æ¥æ”¶å™¨
//   i = s2Val
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;[Effective
go](https://
golang.org/doc/effective_
go.html) ä¸­æœ‰ä¸€æ®µå…³äº [pointers vs. values](https://
golang.org/doc/effective_
go.html#pointers_vs_values) çš„ç²¾å½©è®²è§£ã€‚&lt;/p&gt;
&lt;p&gt;è¡¥å……:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ä¸€ä¸ªç±»å‹å¯ä»¥æœ‰å€¼æ¥æ”¶å™¨æ–¹æ³•é›†å’ŒæŒ‡é’ˆæ¥æ”¶å™¨æ–¹æ³•é›†
&lt;ul&gt;
&lt;li&gt;å€¼æ¥æ”¶å™¨æ–¹æ³•é›†æ˜¯æŒ‡é’ˆæ¥æ”¶å™¨æ–¹æ³•é›†çš„å­é›†,åä¹‹ä¸æ˜¯&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;è§„åˆ™
&lt;ul&gt;
&lt;li&gt;å€¼å¯¹è±¡åªå¯ä»¥ä½¿ç”¨å€¼æ¥æ”¶å™¨æ–¹æ³•é›†&lt;/li&gt;
&lt;li&gt;æŒ‡é’ˆå¯¹è±¡å¯ä»¥ä½¿ç”¨ å€¼æ¥æ”¶å™¨æ–¹æ³•é›† + æŒ‡é’ˆæ¥æ”¶å™¨æ–¹æ³•é›†&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;æ¥å£çš„åŒ¹é…(æˆ–è€…å«å®ç°)
&lt;ul&gt;
&lt;li&gt;ç±»å‹å®ç°äº†æ¥å£çš„æ‰€æœ‰æ–¹æ³•,å«åŒ¹é…&lt;/li&gt;
&lt;li&gt;å…·ä½“çš„è®²,è¦ä¹ˆæ˜¯ç±»å‹çš„å€¼æ–¹æ³•é›†åŒ¹é…æ¥å£,è¦ä¹ˆæ˜¯æŒ‡é’ˆæ–¹æ³•é›†åŒ¹é…æ¥å£&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å…·ä½“çš„åŒ¹é…åˆ†ä¸¤ç§:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å€¼æ–¹æ³•é›†å’Œæ¥å£åŒ¹é…
&lt;ul&gt;
&lt;li&gt;ç»™æ¥å£å˜é‡èµ‹å€¼çš„ä¸ç®¡æ˜¯å€¼è¿˜æ˜¯æŒ‡é’ˆå¯¹è±¡,éƒ½ok,å› ä¸ºéƒ½åŒ…å«å€¼æ–¹æ³•é›†&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;æŒ‡é’ˆæ–¹æ³•é›†å’Œæ¥å£åŒ¹é…
&lt;ul&gt;
&lt;li&gt;åªèƒ½å°†æŒ‡é’ˆå¯¹è±¡èµ‹å€¼ç»™æ¥å£å˜é‡,å› ä¸ºåªæœ‰æŒ‡é’ˆæ–¹æ³•é›†å’Œæ¥å£åŒ¹é…&lt;/li&gt;
&lt;li&gt;å¦‚æœå°†å€¼å¯¹è±¡èµ‹å€¼ç»™æ¥å£å˜é‡,ä¼šåœ¨ç¼–è¯‘æœŸæŠ¥é”™(ä¼šè§¦å‘æ¥å£åˆç†æ€§æ£€æŸ¥æœºåˆ¶)&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ä¸ºå•¥ i = s2Val ä¼šæŠ¥é”™,å› ä¸ºå€¼æ–¹æ³•é›†å’Œæ¥å£ä¸åŒ¹é….&lt;/p&gt;
&lt;h3 id=&#34;é›¶å€¼-mutex-æ˜¯æœ‰æ•ˆçš„&#34;&gt;é›¶å€¼ Mutex æ˜¯æœ‰æ•ˆçš„&lt;/h3&gt;
&lt;p&gt;é›¶å€¼ &lt;code&gt;sync.Mutex&lt;/code&gt; å’Œ &lt;code&gt;sync.RWMutex&lt;/code&gt; æ˜¯æœ‰æ•ˆçš„ã€‚æ‰€ä»¥æŒ‡å‘ mutex çš„æŒ‡é’ˆåŸºæœ¬æ˜¯ä¸å¿…è¦çš„ã€‚&lt;/p&gt;
&lt;!-- raw HTML omitted --&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;go
mu := new(sync.Mutex)
mu.Lock()
&lt;/code&gt;&lt;/pre&gt;&lt;!-- raw HTML omitted --&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;go
var mu sync.Mutex
mu.Lock()
&lt;/code&gt;&lt;/pre&gt;&lt;!-- raw HTML omitted --&gt;
&lt;p&gt;å¦‚æœä½ ä½¿ç”¨ç»“æ„ä½“æŒ‡é’ˆï¼Œmutex å¯ä»¥éæŒ‡é’ˆå½¢å¼ä½œä¸ºç»“æ„ä½“çš„ç»„æˆå­—æ®µï¼Œæˆ–è€…æ›´å¥½çš„æ–¹å¼æ˜¯ç›´æ¥åµŒå…¥åˆ°ç»“æ„ä½“ä¸­ã€‚
å¦‚æœæ˜¯ç§æœ‰ç»“æ„ä½“ç±»å‹æˆ–æ˜¯è¦å®ç° Mutex æ¥å£çš„ç±»å‹ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨åµŒå…¥ mutex çš„æ–¹æ³•ï¼š&lt;/p&gt;
&lt;!-- raw HTML omitted --&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;go
type smap struct {
  sync.Mutex // only for unexported typesï¼ˆä»…é€‚ç”¨äºéå¯¼å‡ºç±»å‹ï¼‰

  data map[string]string
}

func newSMap() *smap {
  return &amp;amp;smap{
    data: make(map[string]string),
  }
}

func (m *smap) Get(k string) string {
  m.Lock()
  defer m.Unlock()

  return m.data[k]
}
&lt;/code&gt;&lt;/pre&gt;&lt;!-- raw HTML omitted --&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;go
type SMap struct {
  mu sync.Mutex // å¯¹äºå¯¼å‡ºç±»å‹ï¼Œè¯·ä½¿ç”¨ç§æœ‰é”

  data map[string]string
}

func NewSMap() *SMap {
  return &amp;amp;SMap{
    data: make(map[string]string),
  }
}

func (m *SMap) Get(k string) string {
  m.mu.Lock()
  defer m.mu.Unlock()

  return m.data[k]
}
&lt;/code&gt;&lt;/pre&gt;&lt;!-- raw HTML omitted --&gt;
&lt;!-- raw HTML omitted --&gt;
&lt;h3 id=&#34;åœ¨è¾¹ç•Œå¤„æ‹·è´-slices-å’Œ-maps&#34;&gt;åœ¨è¾¹ç•Œå¤„æ‹·è´ Slices å’Œ Maps&lt;/h3&gt;
&lt;p&gt;slices å’Œ maps åŒ…å«äº†æŒ‡å‘åº•å±‚æ•°æ®çš„æŒ‡é’ˆï¼Œå› æ­¤åœ¨éœ€è¦å¤åˆ¶å®ƒä»¬æ—¶è¦ç‰¹åˆ«æ³¨æ„ã€‚&lt;/p&gt;
&lt;h4 id=&#34;æ¥æ”¶-slices-å’Œ-maps&#34;&gt;æ¥æ”¶ Slices å’Œ Maps&lt;/h4&gt;
&lt;p&gt;è¯·è®°ä½ï¼Œå½“ map æˆ– slice ä½œä¸ºå‡½æ•°å‚æ•°ä¼ å…¥æ—¶ï¼Œå¦‚æœæ‚¨å­˜å‚¨äº†å¯¹å®ƒä»¬çš„å¼•ç”¨ï¼Œåˆ™ç”¨æˆ·å¯ä»¥å¯¹å…¶è¿›è¡Œä¿®æ”¹ã€‚&lt;/p&gt;
&lt;!-- raw HTML omitted --&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;go
func (d *Driver) SetTrips(trips []Trip) {
  d.trips = trips
}

trips := ...
d1.SetTrips(trips)

// ä½ æ˜¯è¦ä¿®æ”¹ d1.trips å—ï¼Ÿ
trips[0] = ...
&lt;/code&gt;&lt;/pre&gt;&lt;!-- raw HTML omitted --&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;go
func (d *Driver) SetTrips(trips []Trip) {
  d.trips = make([]Trip, len(trips))
  copy(d.trips, trips)
}

trips := ...
d1.SetTrips(trips)

// è¿™é‡Œæˆ‘ä»¬ä¿®æ”¹ trips[0]ï¼Œä½†ä¸ä¼šå½±å“åˆ° d1.trips
trips[0] = ...
&lt;/code&gt;&lt;/pre&gt;&lt;!-- raw HTML omitted --&gt;
&lt;!-- raw HTML omitted --&gt;
&lt;h4 id=&#34;è¿”å›-slices-æˆ–-maps&#34;&gt;è¿”å› slices æˆ– maps&lt;/h4&gt;
&lt;p&gt;åŒæ ·ï¼Œè¯·æ³¨æ„ç”¨æˆ·å¯¹æš´éœ²å†…éƒ¨çŠ¶æ€çš„ map æˆ– slice çš„ä¿®æ”¹ã€‚&lt;/p&gt;
&lt;!-- raw HTML omitted --&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;go
type Stats struct {
  mu sync.Mutex

  counters map[string]int
}

// Snapshot è¿”å›å½“å‰çŠ¶æ€ã€‚
func (s *Stats) Snapshot() map[string]int {
  s.mu.Lock()
  defer s.mu.Unlock()

  return s.counters
}

// snapshot ä¸å†å—äº’æ–¥é”ä¿æŠ¤
// å› æ­¤å¯¹ snapshot çš„ä»»ä½•è®¿é—®éƒ½å°†å—åˆ°æ•°æ®ç«äº‰çš„å½±å“
// å½±å“ stats.counters
snapshot := stats.Snapshot()
&lt;/code&gt;&lt;/pre&gt;&lt;!-- raw HTML omitted --&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;go
type Stats struct {
  mu sync.Mutex

  counters map[string]int
}

func (s *Stats) Snapshot() map[string]int {
  s.mu.Lock()
  defer s.mu.Unlock()

  result := make(map[string]int, len(s.counters))
  for k, v := range s.counters {
    result[k] = v
  }
  return result
}

// snapshot ç°åœ¨æ˜¯ä¸€ä¸ªæ‹·è´
snapshot := stats.Snapshot()
&lt;/code&gt;&lt;/pre&gt;&lt;!-- raw HTML omitted --&gt;
&lt;h3 id=&#34;ä½¿ç”¨-defer-é‡Šæ”¾èµ„æº&#34;&gt;ä½¿ç”¨ defer é‡Šæ”¾èµ„æº&lt;/h3&gt;
&lt;p&gt;ä½¿ç”¨ defer é‡Šæ”¾èµ„æºï¼Œè¯¸å¦‚æ–‡ä»¶å’Œé”ã€‚&lt;/p&gt;
&lt;!-- raw HTML omitted --&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;go
p.Lock()
if p.count &amp;lt; 10 {
  p.Unlock()
  return p.count
}

p.count++
newCount := p.count
p.Unlock()

return newCount

// å½“æœ‰å¤šä¸ª return åˆ†æ”¯æ—¶ï¼Œå¾ˆå®¹æ˜“é—å¿˜ unlock
&lt;/code&gt;&lt;/pre&gt;&lt;!-- raw HTML omitted --&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;go
p.Lock()
defer p.Unlock()

if p.count &amp;lt; 10 {
  return p.count
}

p.count++
return p.count

// æ›´å¯è¯»
&lt;/code&gt;&lt;/pre&gt;&lt;!-- raw HTML omitted --&gt;
&lt;p&gt;Defer çš„å¼€é”€éå¸¸å°ï¼Œåªæœ‰åœ¨æ‚¨å¯ä»¥è¯æ˜å‡½æ•°æ‰§è¡Œæ—¶é—´å¤„äºçº³ç§’çº§çš„ç¨‹åº¦æ—¶ï¼Œæ‰åº”é¿å…è¿™æ ·åšã€‚ä½¿ç”¨ defer æå‡å¯è¯»æ€§æ˜¯å€¼å¾—çš„ï¼Œå› ä¸ºä½¿ç”¨å®ƒä»¬çš„æˆæœ¬å¾®ä¸è¶³é“ã€‚å°¤å…¶é€‚ç”¨äºé‚£äº›ä¸ä»…ä»…æ˜¯ç®€å•å†…å­˜è®¿é—®çš„è¾ƒå¤§çš„æ–¹æ³•ï¼Œåœ¨è¿™äº›æ–¹æ³•ä¸­å…¶ä»–è®¡ç®—çš„èµ„æºæ¶ˆè€—è¿œè¶…è¿‡ &lt;code&gt;defer&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;h3 id=&#34;channel-çš„-size-è¦ä¹ˆæ˜¯-1è¦ä¹ˆæ˜¯æ— ç¼“å†²çš„&#34;&gt;Channel çš„ size è¦ä¹ˆæ˜¯ 1ï¼Œè¦ä¹ˆæ˜¯æ— ç¼“å†²çš„&lt;/h3&gt;
&lt;p&gt;channel é€šå¸¸ size åº”ä¸º 1 æˆ–æ˜¯æ— ç¼“å†²çš„ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œchannel æ˜¯æ— ç¼“å†²çš„ï¼Œå…¶ size ä¸ºé›¶ã€‚ä»»ä½•å…¶ä»–å°ºå¯¸éƒ½å¿…é¡»ç»è¿‡ä¸¥æ ¼çš„å®¡æŸ¥ã€‚æˆ‘ä»¬éœ€è¦è€ƒè™‘å¦‚ä½•ç¡®å®šå¤§å°ï¼Œè€ƒè™‘æ˜¯ä»€ä¹ˆé˜»æ­¢äº† channel åœ¨é«˜è´Ÿè½½ä¸‹å’Œé˜»å¡å†™æ—¶çš„å†™å…¥ï¼Œä»¥åŠå½“è¿™ç§æƒ…å†µå‘ç”Ÿæ—¶ç³»ç»Ÿé€»è¾‘æœ‰å“ªäº›å˜åŒ–ã€‚(ç¿»è¯‘è§£é‡Šï¼šæŒ‰ç…§åŸæ–‡æ„æ€æ˜¯éœ€è¦ç•Œå®šé€šé“è¾¹ç•Œï¼Œç«æ€æ¡ä»¶ï¼Œä»¥åŠé€»è¾‘ä¸Šä¸‹æ–‡æ¢³ç†)&lt;/p&gt;
&lt;!-- raw HTML omitted --&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;go
// åº”è¯¥è¶³ä»¥æ»¡è¶³ä»»ä½•æƒ…å†µï¼
c := make(chan int, 64)
&lt;/code&gt;&lt;/pre&gt;&lt;!-- raw HTML omitted --&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;go
// å¤§å°ï¼š1
c := make(chan int, 1) // æˆ–è€…
// æ— ç¼“å†² channelï¼Œå¤§å°ä¸º 0
c := make(chan int)
&lt;/code&gt;&lt;/pre&gt;&lt;!-- raw HTML omitted --&gt;
&lt;h3 id=&#34;æšä¸¾ä»-1-å¼€å§‹&#34;&gt;æšä¸¾ä» 1 å¼€å§‹&lt;/h3&gt;
&lt;p&gt;åœ¨
go ä¸­å¼•å…¥æšä¸¾çš„æ ‡å‡†æ–¹æ³•æ˜¯å£°æ˜ä¸€ä¸ªè‡ªå®šä¹‰ç±»å‹å’Œä¸€ä¸ªä½¿ç”¨äº† iota çš„ const ç»„ã€‚ç”±äºå˜é‡çš„é»˜è®¤å€¼ä¸º 0ï¼Œå› æ­¤é€šå¸¸åº”ä»¥éé›¶å€¼å¼€å¤´æšä¸¾ã€‚&lt;/p&gt;
&lt;!-- raw HTML omitted --&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;go
type Operation int

const (
  Add Operation = iota
  Subtract
  Multiply
)

// Add=0, Subtract=1, Multiply=2
&lt;/code&gt;&lt;/pre&gt;&lt;!-- raw HTML omitted --&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;go
type Operation int

const (
  Add Operation = iota + 1
  Subtract
  Multiply
)

// Add=1, Subtract=2, Multiply=3
&lt;/code&gt;&lt;/pre&gt;&lt;!-- raw HTML omitted --&gt;
&lt;p&gt;åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œä½¿ç”¨é›¶å€¼æ˜¯æœ‰æ„ä¹‰çš„ï¼ˆæšä¸¾ä»é›¶å¼€å§‹ï¼‰ï¼Œä¾‹å¦‚ï¼Œå½“é›¶å€¼æ˜¯ç†æƒ³çš„é»˜è®¤è¡Œä¸ºæ—¶ã€‚&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;go
type Lo
goutput int

const (
  LogToStdout Lo
goutput = iota
  LogToFile
  LogToRemote
)

// LogToStdout=0, LogToFile=1, LogToRemote=2
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&#34;ä½¿ç”¨-time-å¤„ç†æ—¶é—´&#34;&gt;ä½¿ç”¨ time å¤„ç†æ—¶é—´&lt;/h3&gt;
&lt;p&gt;æ—¶é—´å¤„ç†å¾ˆå¤æ‚ã€‚å…³äºæ—¶é—´çš„é”™è¯¯å‡è®¾é€šå¸¸åŒ…æ‹¬ä»¥ä¸‹å‡ ç‚¹ã€‚&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;ä¸€å¤©æœ‰ 24 å°æ—¶&lt;/li&gt;
&lt;li&gt;ä¸€å°æ—¶æœ‰ 60 åˆ†é’Ÿ&lt;/li&gt;
&lt;li&gt;ä¸€å‘¨æœ‰ä¸ƒå¤©&lt;/li&gt;
&lt;li&gt;ä¸€å¹´ 365 å¤©&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://infiniteundo.com/post/25326999628/falsehoods-programmers-believe-about-time&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;è¿˜æœ‰æ›´å¤š&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;ä¾‹å¦‚ï¼Œ&lt;em&gt;1&lt;/em&gt; è¡¨ç¤ºåœ¨ä¸€ä¸ªæ—¶é—´ç‚¹ä¸ŠåŠ ä¸Š 24 å°æ—¶å¹¶ä¸æ€»æ˜¯äº§ç”Ÿä¸€ä¸ªæ–°çš„æ—¥å†æ—¥ã€‚&lt;/p&gt;
&lt;p&gt;å› æ­¤ï¼Œåœ¨å¤„ç†æ—¶é—´æ—¶å§‹ç»ˆä½¿ç”¨ &lt;a class=&#34;link&#34; href=&#34;https://&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;&lt;code&gt;&amp;quot;time&amp;quot;&lt;/code&gt;&lt;/a&gt; åŒ…ï¼Œå› ä¸ºå®ƒæœ‰åŠ©äºä»¥æ›´å®‰å…¨ã€æ›´å‡†ç¡®çš„æ–¹å¼å¤„ç†è¿™äº›ä¸æ­£ç¡®çš„å‡è®¾ã€‚&lt;/p&gt;
&lt;p&gt;golang.org/pkg/time/&lt;/p&gt;
&lt;h4 id=&#34;ä½¿ç”¨-timetime-è¡¨è¾¾ç¬æ—¶æ—¶é—´&#34;&gt;ä½¿ç”¨ &lt;code&gt;time.Time&lt;/code&gt; è¡¨è¾¾ç¬æ—¶æ—¶é—´&lt;/h4&gt;
&lt;p&gt;åœ¨å¤„ç†æ—¶é—´çš„ç¬é—´æ—¶ä½¿ç”¨ &lt;a class=&#34;link&#34; href=&#34;https://&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;&lt;code&gt;time.Time&lt;/code&gt;&lt;/a&gt;ï¼Œåœ¨æ¯”è¾ƒã€æ·»åŠ æˆ–å‡å»æ—¶é—´æ—¶ä½¿ç”¨ &lt;code&gt;time.Time&lt;/code&gt; ä¸­çš„æ–¹æ³•ã€‚&lt;/p&gt;
&lt;p&gt;golang.org/pkg/time/#Time&lt;/p&gt;
&lt;!-- raw HTML omitted --&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;go
func isActive(now, start, stop int) bool {
  return start &amp;lt;= now &amp;amp;&amp;amp; now &amp;lt; stop
}
&lt;/code&gt;&lt;/pre&gt;&lt;!-- raw HTML omitted --&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;go
func isActive(now, start, stop time.Time) bool {
  return (start.Before(now) || start.Equal(now)) &amp;amp;&amp;amp; now.Before(stop)
}
&lt;/code&gt;&lt;/pre&gt;&lt;!-- raw HTML omitted --&gt;
&lt;h4 id=&#34;ä½¿ç”¨-timeduration-è¡¨è¾¾æ—¶é—´æ®µ&#34;&gt;ä½¿ç”¨ &lt;code&gt;time.Duration&lt;/code&gt; è¡¨è¾¾æ—¶é—´æ®µ&lt;/h4&gt;
&lt;p&gt;åœ¨å¤„ç†æ—¶é—´æ®µæ—¶ä½¿ç”¨ &lt;a class=&#34;link&#34; href=&#34;https://&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;&lt;code&gt;time.Duration&lt;/code&gt;&lt;/a&gt; .&lt;/p&gt;
&lt;p&gt;golang.org/pkg/time/#Duration&lt;/p&gt;
&lt;!-- raw HTML omitted --&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;go
func poll(delay int) {
  for {
    // ...
    time.Sleep(time.Duration(delay) * time.Millisecond)
  }
}
poll(10) // æ˜¯å‡ ç§’é’Ÿè¿˜æ˜¯å‡ æ¯«ç§’?
&lt;/code&gt;&lt;/pre&gt;&lt;!-- raw HTML omitted --&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;go
func poll(delay time.Duration) {
  for {
    // ...
    time.Sleep(delay)
  }
}
poll(10*time.Second)
&lt;/code&gt;&lt;/pre&gt;&lt;!-- raw HTML omitted --&gt;
&lt;p&gt;å›åˆ°ç¬¬ä¸€ä¸ªä¾‹å­ï¼Œåœ¨ä¸€ä¸ªæ—¶é—´ç¬é—´åŠ ä¸Š 24 å°æ—¶ï¼Œæˆ‘ä»¬ç”¨äºæ·»åŠ æ—¶é—´çš„æ–¹æ³•å–å†³äºæ„å›¾ã€‚å¦‚æœæˆ‘ä»¬æƒ³è¦ä¸‹ä¸€ä¸ªæ—¥å†æ—¥(å½“å‰å¤©çš„ä¸‹ä¸€å¤©)çš„åŒä¸€ä¸ªæ—¶é—´ç‚¹ï¼Œæˆ‘ä»¬åº”è¯¥ä½¿ç”¨ &lt;a class=&#34;link&#34; href=&#34;https://&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;&lt;code&gt;Time.AddDate&lt;/code&gt;&lt;/a&gt;ã€‚ä½†æ˜¯ï¼Œå¦‚æœæˆ‘ä»¬æƒ³ä¿è¯æŸä¸€æ—¶åˆ»æ¯”å‰ä¸€æ—¶åˆ»æ™š 24 å°æ—¶ï¼Œæˆ‘ä»¬åº”è¯¥ä½¿ç”¨ [&lt;code&gt;Time.Add&lt;/code&gt;]ã€‚&lt;/p&gt;
&lt;p&gt;golang.org/pkg/time/#Time.AddDate
[&lt;code&gt;Time.Add&lt;/code&gt;]: https://
golang.org/pkg/time/#Time.Add&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;go
newDay := t.AddDate(0 /* years */, 0 /* months */, 1 /* days */)
maybeNewDay := t.Add(24 * time.Hour)
&lt;/code&gt;&lt;/pre&gt;&lt;h4 id=&#34;å¯¹å¤–éƒ¨ç³»ç»Ÿä½¿ç”¨-timetime-å’Œ-timeduration&#34;&gt;å¯¹å¤–éƒ¨ç³»ç»Ÿä½¿ç”¨ &lt;code&gt;time.Time&lt;/code&gt; å’Œ &lt;code&gt;time.Duration&lt;/code&gt;&lt;/h4&gt;
&lt;p&gt;å°½å¯èƒ½åœ¨ä¸å¤–éƒ¨ç³»ç»Ÿçš„äº¤äº’ä¸­ä½¿ç”¨ &lt;code&gt;time.Duration&lt;/code&gt; å’Œ &lt;code&gt;time.Time&lt;/code&gt; ä¾‹å¦‚ :&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Command-line æ ‡å¿—: &lt;a class=&#34;link&#34; href=&#34;https://&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;&lt;code&gt;flag&lt;/code&gt;&lt;/a&gt; é€šè¿‡ [&lt;code&gt;time.ParseDuration&lt;/code&gt;] æ”¯æŒ &lt;code&gt;time.Duration&lt;/code&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;JSON: [&lt;code&gt;encoding/json&lt;/code&gt;] é€šè¿‡å…¶ [&lt;code&gt;UnmarshalJSON&lt;/code&gt; method] æ–¹æ³•æ”¯æŒå°† &lt;code&gt;time.Time&lt;/code&gt; ç¼–ç ä¸º [RFC 3339] å­—ç¬¦ä¸²&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;SQL: [&lt;code&gt;database/sql&lt;/code&gt;] æ”¯æŒå°† &lt;code&gt;DATETIME&lt;/code&gt; æˆ– &lt;code&gt;TIMESTAMP&lt;/code&gt; åˆ—è½¬æ¢ä¸º &lt;code&gt;time.Time&lt;/code&gt;ï¼Œå¦‚æœåº•å±‚é©±åŠ¨ç¨‹åºæ”¯æŒåˆ™è¿”å›&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;YAML: [&lt;code&gt; gopkg.in/yaml.v2&lt;/code&gt;] æ”¯æŒå°† &lt;code&gt;time.Time&lt;/code&gt; ä½œä¸º [RFC 3339] å­—ç¬¦ä¸²ï¼Œå¹¶é€šè¿‡ [&lt;code&gt;time.ParseDuration&lt;/code&gt;] æ”¯æŒ &lt;code&gt;time.Duration&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;p&gt;golang.org/pkg/flag/
[&lt;code&gt;time.ParseDuration&lt;/code&gt;]: https://
golang.org/pkg/time/#ParseDuration
[&lt;code&gt;encoding/json&lt;/code&gt;]: https://
golang.org/pkg/encoding/json/
[RFC 3339]: &lt;a class=&#34;link&#34; href=&#34;https://tools.ietf.org/html/rfc3339&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://tools.ietf.org/html/rfc3339&lt;/a&gt;
[&lt;code&gt;UnmarshalJSON&lt;/code&gt; method]: https://
golang.org/pkg/time/#Time.UnmarshalJSON
[&lt;code&gt;database/sql&lt;/code&gt;]: https://
golang.org/pkg/database/sql/
[&lt;code&gt; gopkg.in/yaml.v2&lt;/code&gt;]: https://
godoc.org/
gopkg.in/yaml.v2&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å½“ä¸èƒ½åœ¨è¿™äº›äº¤äº’ä¸­ä½¿ç”¨ &lt;code&gt;time.Duration&lt;/code&gt; æ—¶ï¼Œè¯·ä½¿ç”¨ &lt;code&gt;int&lt;/code&gt; æˆ– &lt;code&gt;float64&lt;/code&gt;ï¼Œå¹¶åœ¨å­—æ®µåç§°ä¸­åŒ…å«å•ä½ã€‚&lt;/p&gt;
&lt;p&gt;ä¾‹å¦‚ï¼Œç”±äº &lt;code&gt;encoding/json&lt;/code&gt; ä¸æ”¯æŒ &lt;code&gt;time.Duration&lt;/code&gt;ï¼Œå› æ­¤è¯¥å•ä½åŒ…å«åœ¨å­—æ®µçš„åç§°ä¸­ã€‚&lt;/p&gt;
&lt;!-- raw HTML omitted --&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;go
// {&amp;quot;interval&amp;quot;: 2}
type Config struct {
  Interval int `json:&amp;quot;interval&amp;quot;`
}
&lt;/code&gt;&lt;/pre&gt;&lt;!-- raw HTML omitted --&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;go
// {&amp;quot;intervalMillis&amp;quot;: 2000}
type Config struct {
  IntervalMillis int `json:&amp;quot;intervalMillis&amp;quot;`
}
&lt;/code&gt;&lt;/pre&gt;&lt;!-- raw HTML omitted --&gt;
&lt;p&gt;å½“åœ¨è¿™äº›äº¤äº’ä¸­ä¸èƒ½ä½¿ç”¨ &lt;code&gt;time.Time&lt;/code&gt; æ—¶ï¼Œé™¤éè¾¾æˆä¸€è‡´ï¼Œå¦åˆ™ä½¿ç”¨ &lt;code&gt;string&lt;/code&gt; å’Œ [RFC 3339] ä¸­å®šä¹‰çš„æ ¼å¼æ—¶é—´æˆ³ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œ&lt;a class=&#34;link&#34; href=&#34;https://&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;&lt;code&gt;Time.UnmarshalText&lt;/code&gt;&lt;/a&gt; ä½¿ç”¨æ­¤æ ¼å¼ï¼Œå¹¶å¯é€šè¿‡ [&lt;code&gt;time.RFC3339&lt;/code&gt;] åœ¨ &lt;code&gt;Time.Format&lt;/code&gt; å’Œ &lt;code&gt;time.Parse&lt;/code&gt; ä¸­ä½¿ç”¨ã€‚&lt;/p&gt;
&lt;p&gt;golang.org/pkg/time/#Time.UnmarshalText
[&lt;code&gt;time.RFC3339&lt;/code&gt;]: https://
golang.org/pkg/time/#RFC3339&lt;/p&gt;
&lt;p&gt;å°½ç®¡è¿™åœ¨å®è·µä¸­å¹¶ä¸æˆé—®é¢˜ï¼Œä½†è¯·è®°ä½ï¼Œ&lt;code&gt;&amp;quot;time&amp;quot;&lt;/code&gt; åŒ…ä¸æ”¯æŒè§£æé—°ç§’æ—¶é—´æˆ³ï¼ˆ&lt;a class=&#34;link&#34; href=&#34;https://github.com/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;8728&lt;/a&gt;ï¼‰ï¼Œä¹Ÿä¸åœ¨è®¡ç®—ä¸­è€ƒè™‘é—°ç§’ï¼ˆ[15190]ï¼‰ã€‚å¦‚æœæ‚¨æ¯”è¾ƒä¸¤ä¸ªæ—¶é—´ç¬é—´ï¼Œåˆ™å·®å¼‚å°†ä¸åŒ…æ‹¬è¿™ä¸¤ä¸ªç¬é—´ä¹‹é—´å¯èƒ½å‘ç”Ÿçš„é—°ç§’ã€‚&lt;/p&gt;
&lt;p&gt;golang/
go/issues/8728
[15190]: &lt;a class=&#34;link&#34; href=&#34;https://github.com/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://github.com/&lt;/a&gt;
golang/
go/issues/15190&lt;/p&gt;
&lt;!-- raw HTML omitted --&gt;
&lt;h3 id=&#34;é”™è¯¯ç±»å‹&#34;&gt;é”™è¯¯ç±»å‹&lt;/h3&gt;
&lt;p&gt;go ä¸­æœ‰å¤šç§å£°æ˜é”™è¯¯ï¼ˆError) çš„é€‰é¡¹ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;&lt;code&gt;errors.New&lt;/code&gt;&lt;/a&gt; å¯¹äºç®€å•é™æ€å­—ç¬¦ä¸²çš„é”™è¯¯&lt;/li&gt;
&lt;li&gt;[&lt;code&gt;fmt.Errorf&lt;/code&gt;] ç”¨äºæ ¼å¼åŒ–çš„é”™è¯¯å­—ç¬¦ä¸²&lt;/li&gt;
&lt;li&gt;å®ç° &lt;code&gt;Error()&lt;/code&gt; æ–¹æ³•çš„è‡ªå®šä¹‰ç±»å‹&lt;/li&gt;
&lt;li&gt;ç”¨ [&lt;code&gt;&amp;quot;pkg/errors&amp;quot;.Wrap&lt;/code&gt;] çš„ Wrapped errors&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;è¿”å›é”™è¯¯æ—¶ï¼Œè¯·è€ƒè™‘ä»¥ä¸‹å› ç´ ä»¥ç¡®å®šæœ€ä½³é€‰æ‹©ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;è¿™æ˜¯ä¸€ä¸ªä¸éœ€è¦é¢å¤–ä¿¡æ¯çš„ç®€å•é”™è¯¯å—ï¼Ÿå¦‚æœæ˜¯è¿™æ ·ï¼Œ&lt;a class=&#34;link&#34; href=&#34;https://&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;&lt;code&gt;errors.New&lt;/code&gt;&lt;/a&gt; è¶³å¤Ÿäº†ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å®¢æˆ·éœ€è¦æ£€æµ‹å¹¶å¤„ç†æ­¤é”™è¯¯å—ï¼Ÿå¦‚æœæ˜¯è¿™æ ·ï¼Œåˆ™åº”ä½¿ç”¨è‡ªå®šä¹‰ç±»å‹å¹¶å®ç°è¯¥ &lt;code&gt;Error()&lt;/code&gt; æ–¹æ³•ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;æ‚¨æ˜¯å¦æ­£åœ¨ä¼ æ’­ä¸‹æ¸¸å‡½æ•°è¿”å›çš„é”™è¯¯ï¼Ÿå¦‚æœæ˜¯è¿™æ ·ï¼Œè¯·æŸ¥çœ‹æœ¬æ–‡åé¢æœ‰å…³é”™è¯¯åŒ…è£… &lt;a class=&#34;link&#34; href=&#34;#%e9%94%99%e8%af%af%e5%8c%85%e8%a3%85&#34;  title=&#34;Error-Wrapping&#34;
    &gt;section on error wrapping&lt;/a&gt; éƒ¨åˆ†çš„å†…å®¹ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å¦åˆ™ [&lt;code&gt;fmt.Errorf&lt;/code&gt;] å°±å¯ä»¥äº†ã€‚&lt;/p&gt;
&lt;p&gt;golang.org/pkg/errors/#New
[&lt;code&gt;fmt.Errorf&lt;/code&gt;]: https://
golang.org/pkg/fmt/#Errorf
[&lt;code&gt;&amp;quot;pkg/errors&amp;quot;.Wrap&lt;/code&gt;]: https://
godoc.org/github.com/pkg/errors#Wrap&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¦‚æœå®¢æˆ·ç«¯éœ€è¦æ£€æµ‹é”™è¯¯ï¼Œå¹¶ä¸”æ‚¨å·²ä½¿ç”¨åˆ›å»ºäº†ä¸€ä¸ªç®€å•çš„é”™è¯¯ &lt;a class=&#34;link&#34; href=&#34;https://&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;&lt;code&gt;errors.New&lt;/code&gt;&lt;/a&gt;ï¼Œè¯·ä½¿ç”¨ä¸€ä¸ªé”™è¯¯å˜é‡ã€‚&lt;/p&gt;
&lt;!-- raw HTML omitted --&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;go
// package foo

func Open() error {
  return errors.New(&amp;quot;could not open&amp;quot;)
}

// package bar

func use() {
  if err := foo.Open(); err != nil {
    if err.Error() == &amp;quot;could not open&amp;quot; {
      // handle
    } else {
      panic(&amp;quot;unknown error&amp;quot;)
    }
  }
}
&lt;/code&gt;&lt;/pre&gt;&lt;!-- raw HTML omitted --&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;go
// package foo

var ErrCouldNotOpen = errors.New(&amp;quot;could not open&amp;quot;)

func Open() error {
  return ErrCouldNotOpen
}

// package bar

if err := foo.Open(); err != nil {
  if errors.Is(err, foo.ErrCouldNotOpen) {
    // handle
  } else {
    panic(&amp;quot;unknown error&amp;quot;)
  }
}
&lt;/code&gt;&lt;/pre&gt;&lt;!-- raw HTML omitted --&gt;
&lt;p&gt;å¦‚æœæ‚¨æœ‰å¯èƒ½éœ€è¦å®¢æˆ·ç«¯æ£€æµ‹çš„é”™è¯¯ï¼Œå¹¶ä¸”æƒ³å‘å…¶ä¸­æ·»åŠ æ›´å¤šä¿¡æ¯ï¼ˆä¾‹å¦‚ï¼Œå®ƒä¸æ˜¯é™æ€å­—ç¬¦ä¸²ï¼‰ï¼Œåˆ™åº”ä½¿ç”¨è‡ªå®šä¹‰ç±»å‹ã€‚&lt;/p&gt;
&lt;!-- raw HTML omitted --&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;go
func open(file string) error {
  return fmt.Errorf(&amp;quot;file %q not found&amp;quot;, file)
}

func use() {
  if err := open(&amp;quot;testfile.txt&amp;quot;); err != nil {
    if strings.Contains(err.Error(), &amp;quot;not found&amp;quot;) {
      // handle
    } else {
      panic(&amp;quot;unknown error&amp;quot;)
    }
  }
}
&lt;/code&gt;&lt;/pre&gt;&lt;!-- raw HTML omitted --&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;go
type errNotFound struct {
  file string
}

func (e errNotFound) Error() string {
  return fmt.Sprintf(&amp;quot;file %q not found&amp;quot;, e.file)
}

func open(file string) error {
  return errNotFound{file: file}
}

func use() {
  if err := open(&amp;quot;testfile.txt&amp;quot;); err != nil {
    if _, ok := err.(errNotFound); ok {
      // handle
    } else {
      panic(&amp;quot;unknown error&amp;quot;)
    }
  }
}
&lt;/code&gt;&lt;/pre&gt;&lt;!-- raw HTML omitted --&gt;
&lt;p&gt;ç›´æ¥å¯¼å‡ºè‡ªå®šä¹‰é”™è¯¯ç±»å‹æ—¶è¦å°å¿ƒï¼Œå› ä¸ºå®ƒä»¬å·²æˆä¸ºç¨‹åºåŒ…å…¬å…± API çš„ä¸€éƒ¨åˆ†ã€‚æœ€å¥½å…¬å¼€åŒ¹é…å™¨åŠŸèƒ½ä»¥æ£€æŸ¥é”™è¯¯ã€‚&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;go
// package foo

type errNotFound struct {
  file string
}

func (e errNotFound) Error() string {
  return fmt.Sprintf(&amp;quot;file %q not found&amp;quot;, e.file)
}

func IsNotFoundError(err error) bool {
  _, ok := err.(errNotFound)
  return ok
}

func Open(file string) error {
  return errNotFound{file: file}
}

// package bar

if err := foo.Open(&amp;quot;foo&amp;quot;); err != nil {
  if foo.IsNotFoundError(err) {
    // handle
  } else {
    panic(&amp;quot;unknown error&amp;quot;)
  }
}
&lt;/code&gt;&lt;/pre&gt;&lt;!-- raw HTML omitted --&gt;
&lt;h3 id=&#34;é”™è¯¯åŒ…è£…-error-wrapping&#34;&gt;é”™è¯¯åŒ…è£… (Error Wrapping)&lt;/h3&gt;
&lt;p&gt;ä¸€ä¸ªï¼ˆå‡½æ•°/æ–¹æ³•ï¼‰è°ƒç”¨å¤±è´¥æ—¶ï¼Œæœ‰ä¸‰ç§ä¸»è¦çš„é”™è¯¯ä¼ æ’­æ–¹å¼ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å¦‚æœæ²¡æœ‰è¦æ·»åŠ çš„å…¶ä»–ä¸Šä¸‹æ–‡ï¼Œå¹¶ä¸”æ‚¨æƒ³è¦ç»´æŠ¤åŸå§‹é”™è¯¯ç±»å‹ï¼Œåˆ™è¿”å›åŸå§‹é”™è¯¯ã€‚&lt;/li&gt;
&lt;li&gt;æ·»åŠ ä¸Šä¸‹æ–‡ï¼Œä½¿ç”¨ [&lt;code&gt;&amp;quot;pkg/errors&amp;quot;.Wrap&lt;/code&gt;] ä»¥ä¾¿é”™è¯¯æ¶ˆæ¯æä¾›æ›´å¤šä¸Šä¸‹æ–‡ ,&lt;a class=&#34;link&#34; href=&#34;https://&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;&lt;code&gt;&amp;quot;pkg/errors&amp;quot;.Cause&lt;/code&gt;&lt;/a&gt; å¯ç”¨äºæå–åŸå§‹é”™è¯¯ã€‚&lt;/li&gt;
&lt;li&gt;å¦‚æœè°ƒç”¨è€…ä¸éœ€è¦æ£€æµ‹æˆ–å¤„ç†çš„ç‰¹å®šé”™è¯¯æƒ…å†µï¼Œä½¿ç”¨ [&lt;code&gt;fmt.Errorf&lt;/code&gt;]ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å»ºè®®åœ¨å¯èƒ½çš„åœ°æ–¹æ·»åŠ ä¸Šä¸‹æ–‡ï¼Œä»¥ä½¿æ‚¨è·å¾—è¯¸å¦‚â€œè°ƒç”¨æœåŠ¡ fooï¼šè¿æ¥è¢«æ‹’ç»â€ä¹‹ç±»çš„æ›´æœ‰ç”¨çš„é”™è¯¯ï¼Œè€Œä¸æ˜¯è¯¸å¦‚â€œè¿æ¥è¢«æ‹’ç»â€ä¹‹ç±»çš„æ¨¡ç³Šé”™è¯¯ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨å°†ä¸Šä¸‹æ–‡æ·»åŠ åˆ°è¿”å›çš„é”™è¯¯æ—¶ï¼Œè¯·é¿å…ä½¿ç”¨â€œfailed toâ€ä¹‹ç±»çš„çŸ­è¯­ä»¥ä¿æŒä¸Šä¸‹æ–‡ç®€æ´ï¼Œè¿™äº›çŸ­è¯­ä¼šé™ˆè¿°æ˜æ˜¾çš„å†…å®¹ï¼Œå¹¶éšç€é”™è¯¯åœ¨å †æ ˆä¸­çš„æ¸—é€è€Œé€æ¸å †ç§¯ï¼š&lt;/p&gt;
&lt;!-- raw HTML omitted --&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;go
s, err := store.New()
if err != nil {
    return fmt.Errorf(
        &amp;quot;failed to create new store: %v&amp;quot;, err)
}
&lt;/code&gt;&lt;/pre&gt;&lt;!-- raw HTML omitted --&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;go
s, err := store.New()
if err != nil {
    return fmt.Errorf(
        &amp;quot;new store: %v&amp;quot;, err)
}
&lt;/code&gt;&lt;/pre&gt;&lt;!-- raw HTML omitted --&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;failed to x: failed to y: failed to create new store: the error
&lt;/code&gt;&lt;/pre&gt;&lt;!-- raw HTML omitted --&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;x: y: new store: the error
&lt;/code&gt;&lt;/pre&gt;&lt;!-- raw HTML omitted --&gt;
&lt;p&gt;ä½†æ˜¯ï¼Œä¸€æ—¦å°†é”™è¯¯å‘é€åˆ°å¦ä¸€ä¸ªç³»ç»Ÿï¼Œå°±åº”è¯¥æ˜ç¡®æ¶ˆæ¯æ˜¯é”™è¯¯æ¶ˆæ¯ï¼ˆä¾‹å¦‚ä½¿ç”¨&lt;code&gt;err&lt;/code&gt;æ ‡è®°ï¼Œæˆ–åœ¨æ—¥å¿—ä¸­ä»¥â€Failedâ€ä¸ºå‰ç¼€ï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;å¦è¯·å‚è§ [Don&amp;rsquo;t just check errors, handle them gracefully]. ä¸è¦åªæ˜¯æ£€æŸ¥é”™è¯¯ï¼Œè¦ä¼˜é›…åœ°å¤„ç†é”™è¯¯&lt;/p&gt;
&lt;p&gt;godoc.org/github.com/pkg/errors#Cause
[Don&amp;rsquo;t just check errors, handle them gracefully]: &lt;a class=&#34;link&#34; href=&#34;https://dave.cheney.net/2016/04/27/dont-just-check-errors-handle-them-gracefully&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://dave.cheney.net/2016/04/27/dont-just-check-errors-handle-them-gracefully&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&#34;å¤„ç†ç±»å‹æ–­è¨€å¤±è´¥&#34;&gt;å¤„ç†ç±»å‹æ–­è¨€å¤±è´¥&lt;/h3&gt;
&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;https://&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;type assertion&lt;/a&gt; çš„å•ä¸ªè¿”å›å€¼å½¢å¼é’ˆå¯¹ä¸æ­£ç¡®çš„ç±»å‹å°†äº§ç”Ÿ panicã€‚å› æ­¤ï¼Œè¯·å§‹ç»ˆä½¿ç”¨â€œcomma okâ€çš„æƒ¯ç”¨æ³•ã€‚&lt;/p&gt;
&lt;p&gt;golang.org/ref/spec#Type_assertions&lt;/p&gt;
&lt;!-- raw HTML omitted --&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;go
t := i.(string)
&lt;/code&gt;&lt;/pre&gt;&lt;!-- raw HTML omitted --&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;go
t, ok := i.(string)
if !ok {
  // ä¼˜é›…åœ°å¤„ç†é”™è¯¯
}
&lt;/code&gt;&lt;/pre&gt;&lt;!-- raw HTML omitted --&gt;
&lt;!-- raw HTML omitted --&gt;
&lt;!-- raw HTML omitted --&gt;
&lt;h3 id=&#34;ä¸è¦-panic&#34;&gt;ä¸è¦ panic&lt;/h3&gt;
&lt;p&gt;åœ¨ç”Ÿäº§ç¯å¢ƒä¸­è¿è¡Œçš„ä»£ç å¿…é¡»é¿å…å‡ºç° panicã€‚panic æ˜¯ &lt;a class=&#34;link&#34; href=&#34;https://en.wikipedia.org/wiki/Cascading_failure&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;cascading failures&lt;/a&gt; çº§è”å¤±è´¥çš„ä¸»è¦æ ¹æº ã€‚å¦‚æœå‘ç”Ÿé”™è¯¯ï¼Œè¯¥å‡½æ•°å¿…é¡»è¿”å›é”™è¯¯ï¼Œå¹¶å…è®¸è°ƒç”¨æ–¹å†³å®šå¦‚ä½•å¤„ç†å®ƒã€‚&lt;/p&gt;
&lt;!-- raw HTML omitted --&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;go
func run(args []string) {
  if len(args) == 0 {
    panic(&amp;quot;an argument is required&amp;quot;)
  }
  // ...
}

func main() {
  run(os.Args[1:])
}
&lt;/code&gt;&lt;/pre&gt;&lt;!-- raw HTML omitted --&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;go
func run(args []string) error {
  if len(args) == 0 {
    return errors.New(&amp;quot;an argument is required&amp;quot;)
  }
  // ...
  return nil
}

func main() {
  if err := run(os.Args[1:]); err != nil {
    fmt.Fprintln(os.Stderr, err)
    os.Exit(1)
  }
}
&lt;/code&gt;&lt;/pre&gt;&lt;!-- raw HTML omitted --&gt;
&lt;p&gt;panic/recover ä¸æ˜¯é”™è¯¯å¤„ç†ç­–ç•¥ã€‚ä»…å½“å‘ç”Ÿä¸å¯æ¢å¤çš„äº‹æƒ…ï¼ˆä¾‹å¦‚ï¼šnil å¼•ç”¨ï¼‰æ—¶ï¼Œç¨‹åºæ‰å¿…é¡» panicã€‚ç¨‹åºåˆå§‹åŒ–æ˜¯ä¸€ä¸ªä¾‹å¤–ï¼šç¨‹åºå¯åŠ¨æ—¶åº”ä½¿ç¨‹åºä¸­æ­¢çš„ä¸è‰¯æƒ…å†µå¯èƒ½ä¼šå¼•èµ· panicã€‚&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;go
var _statusTemplate = template.Must(template.New(&amp;quot;name&amp;quot;).Parse(&amp;quot;_statusHTML&amp;quot;))
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;å³ä½¿åœ¨æµ‹è¯•ä»£ç ä¸­ï¼Œä¹Ÿä¼˜å…ˆä½¿ç”¨&lt;code&gt;t.Fatal&lt;/code&gt;æˆ–è€…&lt;code&gt;t.FailNow&lt;/code&gt;è€Œä¸æ˜¯ panic æ¥ç¡®ä¿å¤±è´¥è¢«æ ‡è®°ã€‚&lt;/p&gt;
&lt;!-- raw HTML omitted --&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;go
// func TestFoo(t *testing.T)

f, err := ioutil.TempFile(&amp;quot;&amp;quot;, &amp;quot;test&amp;quot;)
if err != nil {
  panic(&amp;quot;failed to set up test&amp;quot;)
}
&lt;/code&gt;&lt;/pre&gt;&lt;!-- raw HTML omitted --&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;go
// func TestFoo(t *testing.T)

f, err := ioutil.TempFile(&amp;quot;&amp;quot;, &amp;quot;test&amp;quot;)
if err != nil {
  t.Fatal(&amp;quot;failed to set up test&amp;quot;)
}
&lt;/code&gt;&lt;/pre&gt;&lt;!-- raw HTML omitted --&gt;
&lt;!-- raw HTML omitted --&gt;
&lt;h3 id=&#34;ä½¿ç”¨&#34;&gt;ä½¿ç”¨&lt;/h3&gt;
&lt;p&gt;go.uber.org/atomic&lt;/p&gt;
&lt;p&gt;ä½¿ç”¨ [sync/atomic] åŒ…çš„åŸå­æ“ä½œå¯¹åŸå§‹ç±»å‹ (&lt;code&gt;int32&lt;/code&gt;, &lt;code&gt;int64&lt;/code&gt;ç­‰ï¼‰è¿›è¡Œæ“ä½œï¼Œå› ä¸ºå¾ˆå®¹æ˜“å¿˜è®°ä½¿ç”¨åŸå­æ“ä½œæ¥è¯»å–æˆ–ä¿®æ”¹å˜é‡ã€‚&lt;/p&gt;
&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;https://&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;
go.uber.org/atomic&lt;/a&gt; é€šè¿‡éšè—åŸºç¡€ç±»å‹ä¸ºè¿™äº›æ“ä½œå¢åŠ äº†ç±»å‹å®‰å…¨æ€§ã€‚æ­¤å¤–ï¼Œå®ƒåŒ…æ‹¬ä¸€ä¸ªæ–¹ä¾¿çš„&lt;code&gt;atomic.Bool&lt;/code&gt;ç±»å‹ã€‚&lt;/p&gt;
&lt;p&gt;godoc.org/
go.uber.org/atomic
[sync/atomic]: https://
golang.org/pkg/sync/atomic/&lt;/p&gt;
&lt;!-- raw HTML omitted --&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;go
type foo struct {
  running int32  // atomic
}

func (f* foo) start() {
  if atomic.SwapInt32(&amp;amp;f.running, 1) == 1 {
     // already runningâ€¦
     return
  }
  // start the Foo
}

func (f *foo) isRunning() bool {
  return f.running == 1  // race!
}
&lt;/code&gt;&lt;/pre&gt;&lt;!-- raw HTML omitted --&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;go
type foo struct {
  running atomic.Bool
}

func (f *foo) start() {
  if f.running.Swap(true) {
     // already runningâ€¦
     return
  }
  // start the Foo
}

func (f *foo) isRunning() bool {
  return f.running.Load()
}
&lt;/code&gt;&lt;/pre&gt;&lt;!-- raw HTML omitted --&gt;
&lt;h3 id=&#34;é¿å…å¯å˜å…¨å±€å˜é‡&#34;&gt;é¿å…å¯å˜å…¨å±€å˜é‡&lt;/h3&gt;
&lt;p&gt;ä½¿ç”¨é€‰æ‹©ä¾èµ–æ³¨å…¥æ–¹å¼é¿å…æ”¹å˜å…¨å±€å˜é‡ã€‚
æ—¢é€‚ç”¨äºå‡½æ•°æŒ‡é’ˆåˆé€‚ç”¨äºå…¶ä»–å€¼ç±»å‹&lt;/p&gt;
&lt;!-- raw HTML omitted --&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;go
// sign.
go
var _timeNow = time.Now
func sign(msg string) string {
  now := _timeNow()
  return signWithTime(msg, now)
}
&lt;/code&gt;&lt;/pre&gt;&lt;!-- raw HTML omitted --&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;go
// sign.
go
type signer struct {
  now func() time.Time
}
func newSigner() *signer {
  return &amp;amp;signer{
    now: time.Now,
  }
}
func (s *signer) Sign(msg string) string {
  now := s.now()
  return signWithTime(msg, now)
}
&lt;/code&gt;&lt;/pre&gt;&lt;!-- raw HTML omitted --&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;go
// sign_test.
go
func TestSign(t *testing.T) {
  oldTimeNow := _timeNow
  _timeNow = func() time.Time {
    return someFixedTime
  }
  defer func() { _timeNow = oldTimeNow }()
  assert.Equal(t, want, sign(give))
}
&lt;/code&gt;&lt;/pre&gt;&lt;!-- raw HTML omitted --&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;go
// sign_test.
go
func TestSigner(t *testing.T) {
  s := newSigner()
  s.now = func() time.Time {
    return someFixedTime
  }
  assert.Equal(t, want, s.Sign(give))
}
&lt;/code&gt;&lt;/pre&gt;&lt;!-- raw HTML omitted --&gt;
&lt;h3 id=&#34;é¿å…åœ¨å…¬å…±ç»“æ„ä¸­åµŒå…¥ç±»å‹&#34;&gt;é¿å…åœ¨å…¬å…±ç»“æ„ä¸­åµŒå…¥ç±»å‹&lt;/h3&gt;
&lt;p&gt;è¿™äº›åµŒå…¥çš„ç±»å‹æ³„æ¼å®ç°ç»†èŠ‚ã€ç¦æ­¢ç±»å‹æ¼”åŒ–å’Œæ¨¡ç³Šçš„æ–‡æ¡£ã€‚&lt;/p&gt;
&lt;p&gt;å‡è®¾æ‚¨ä½¿ç”¨å…±äº«çš„ &lt;code&gt;AbstractList&lt;/code&gt; å®ç°äº†å¤šç§åˆ—è¡¨ç±»å‹ï¼Œè¯·é¿å…åœ¨å…·ä½“çš„åˆ—è¡¨å®ç°ä¸­åµŒå…¥ &lt;code&gt;AbstractList&lt;/code&gt;ã€‚
ç›¸åï¼Œåªéœ€æ‰‹åŠ¨å°†æ–¹æ³•å†™å…¥å…·ä½“çš„åˆ—è¡¨ï¼Œè¯¥åˆ—è¡¨å°†å§”æ‰˜ç»™æŠ½è±¡åˆ—è¡¨ã€‚&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;go
type AbstractList struct {}
// æ·»åŠ å°†å®ä½“æ·»åŠ åˆ°åˆ—è¡¨ä¸­ã€‚
func (l *AbstractList) Add(e Entity) {
  // ...
}
// ç§»é™¤ä»åˆ—è¡¨ä¸­ç§»é™¤å®ä½“ã€‚
func (l *AbstractList) Remove(e Entity) {
  // ...
}
&lt;/code&gt;&lt;/pre&gt;&lt;!-- raw HTML omitted --&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;go
// ConcreteList æ˜¯ä¸€ä¸ªå®ä½“åˆ—è¡¨ã€‚
type ConcreteList struct {
  *AbstractList
}
&lt;/code&gt;&lt;/pre&gt;&lt;!-- raw HTML omitted --&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;go
// ConcreteList æ˜¯ä¸€ä¸ªå®ä½“åˆ—è¡¨ã€‚
type ConcreteList struct {
  list *AbstractList
}
// æ·»åŠ å°†å®ä½“æ·»åŠ åˆ°åˆ—è¡¨ä¸­ã€‚
func (l *ConcreteList) Add(e Entity) {
  l.list.Add(e)
}
// ç§»é™¤ä»åˆ—è¡¨ä¸­ç§»é™¤å®ä½“ã€‚
func (l *ConcreteList) Remove(e Entity) {
  l.list.Remove(e)
}
&lt;/code&gt;&lt;/pre&gt;&lt;!-- raw HTML omitted --&gt;
&lt;p&gt;go å…è®¸ &lt;a class=&#34;link&#34; href=&#34;https://&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;ç±»å‹åµŒå…¥&lt;/a&gt; ä½œä¸ºç»§æ‰¿å’Œç»„åˆä¹‹é—´çš„æŠ˜è¡·ã€‚
å¤–éƒ¨ç±»å‹è·å–åµŒå…¥ç±»å‹çš„æ–¹æ³•çš„éšå¼å‰¯æœ¬ã€‚
é»˜è®¤æƒ…å†µä¸‹ï¼Œè¿™äº›æ–¹æ³•å§”æ‰˜ç»™åµŒå…¥å®ä¾‹çš„åŒä¸€æ–¹æ³•ã€‚&lt;/p&gt;
&lt;p&gt;golang.org/doc/effective_
go.html#embedding&lt;/p&gt;
&lt;p&gt;ç»“æ„è¿˜è·å¾—ä¸ç±»å‹åŒåçš„å­—æ®µã€‚
æ‰€ä»¥ï¼Œå¦‚æœåµŒå…¥çš„ç±»å‹æ˜¯ publicï¼Œé‚£ä¹ˆå­—æ®µæ˜¯ publicã€‚ä¸ºäº†ä¿æŒå‘åå…¼å®¹æ€§ï¼Œå¤–éƒ¨ç±»å‹çš„æ¯ä¸ªæœªæ¥ç‰ˆæœ¬éƒ½å¿…é¡»ä¿ç•™åµŒå…¥ç±»å‹ã€‚&lt;/p&gt;
&lt;p&gt;å¾ˆå°‘éœ€è¦åµŒå…¥ç±»å‹ã€‚
è¿™æ˜¯ä¸€ç§æ–¹ä¾¿ï¼Œå¯ä»¥å¸®åŠ©æ‚¨é¿å…ç¼–å†™å†—é•¿çš„å§”æ‰˜æ–¹æ³•ã€‚&lt;/p&gt;
&lt;p&gt;å³ä½¿åµŒå…¥å…¼å®¹çš„æŠ½è±¡åˆ—è¡¨ &lt;em&gt;interface&lt;/em&gt;ï¼Œè€Œä¸æ˜¯ç»“æ„ä½“ï¼Œè¿™å°†ä¸ºå¼€å‘äººå‘˜æä¾›æ›´å¤§çš„çµæ´»æ€§æ¥æ”¹å˜æœªæ¥ï¼Œä½†ä»ç„¶æ³„éœ²äº†å…·ä½“åˆ—è¡¨ä½¿ç”¨æŠ½è±¡å®ç°çš„ç»†èŠ‚ã€‚&lt;/p&gt;
&lt;!-- raw HTML omitted --&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;go
// AbstractList æ˜¯å„ç§å®ä½“åˆ—è¡¨çš„é€šç”¨å®ç°ã€‚
type AbstractList interface {
  Add(Entity)
  Remove(Entity)
}
// ConcreteList æ˜¯ä¸€ä¸ªå®ä½“åˆ—è¡¨ã€‚
type ConcreteList struct {
  AbstractList
}
&lt;/code&gt;&lt;/pre&gt;&lt;!-- raw HTML omitted --&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;go
// ConcreteList æ˜¯ä¸€ä¸ªå®ä½“åˆ—è¡¨ã€‚
type ConcreteList struct {
  list AbstractList
}
// æ·»åŠ å°†å®ä½“æ·»åŠ åˆ°åˆ—è¡¨ä¸­ã€‚
func (l *ConcreteList) Add(e Entity) {
  l.list.Add(e)
}
// ç§»é™¤ä»åˆ—è¡¨ä¸­ç§»é™¤å®ä½“ã€‚
func (l *ConcreteList) Remove(e Entity) {
  l.list.Remove(e)
}
&lt;/code&gt;&lt;/pre&gt;&lt;!-- raw HTML omitted --&gt;
&lt;p&gt;æ— è®ºæ˜¯ä½¿ç”¨åµŒå…¥å¼ç»“æ„è¿˜æ˜¯ä½¿ç”¨åµŒå…¥å¼æ¥å£ï¼ŒåµŒå…¥å¼ç±»å‹éƒ½ä¼šé™åˆ¶ç±»å‹çš„æ¼”åŒ–.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å‘åµŒå…¥å¼æ¥å£æ·»åŠ æ–¹æ³•æ˜¯ä¸€ä¸ªç ´åæ€§çš„æ”¹å˜ã€‚&lt;/li&gt;
&lt;li&gt;åˆ é™¤åµŒå…¥ç±»å‹æ˜¯ä¸€ä¸ªç ´åæ€§çš„æ”¹å˜ã€‚&lt;/li&gt;
&lt;li&gt;å³ä½¿ä½¿ç”¨æ»¡è¶³ç›¸åŒæ¥å£çš„æ›¿ä»£æ–¹æ³•æ›¿æ¢åµŒå…¥ç±»å‹ï¼Œä¹Ÿæ˜¯ä¸€ä¸ªç ´åæ€§çš„æ”¹å˜ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å°½ç®¡ç¼–å†™è¿™äº›å§”æ‰˜æ–¹æ³•æ˜¯ä¹å‘³çš„ï¼Œä½†æ˜¯é¢å¤–çš„å·¥ä½œéšè—äº†å®ç°ç»†èŠ‚ï¼Œç•™ä¸‹äº†æ›´å¤šçš„æ›´æ”¹æœºä¼šï¼Œè¿˜æ¶ˆé™¤äº†åœ¨æ–‡æ¡£ä¸­å‘ç°å®Œæ•´åˆ—è¡¨æ¥å£çš„é—´æ¥æ€§æ“ä½œã€‚&lt;/p&gt;
&lt;h3 id=&#34;é¿å…ä½¿ç”¨å†…ç½®åç§°&#34;&gt;é¿å…ä½¿ç”¨å†…ç½®åç§°&lt;/h3&gt;
&lt;p&gt;goè¯­è¨€è§„èŒƒ&lt;a class=&#34;link&#34; href=&#34;https://&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;language specification&lt;/a&gt; æ¦‚è¿°äº†å‡ ä¸ªå†…ç½®çš„ï¼Œ
ä¸åº”åœ¨
goé¡¹ç›®ä¸­ä½¿ç”¨çš„åç§°æ ‡è¯†[predeclared identifiers]ã€‚&lt;/p&gt;
&lt;p&gt;æ ¹æ®ä¸Šä¸‹æ–‡çš„ä¸åŒï¼Œå°†è¿™äº›æ ‡è¯†ç¬¦ä½œä¸ºåç§°é‡å¤ä½¿ç”¨ï¼Œ
å°†åœ¨å½“å‰ä½œç”¨åŸŸï¼ˆæˆ–ä»»ä½•åµŒå¥—ä½œç”¨åŸŸï¼‰ä¸­éšè—åŸå§‹æ ‡è¯†ç¬¦ï¼Œæˆ–è€…æ··æ·†ä»£ç ã€‚
åœ¨æœ€å¥½çš„æƒ…å†µä¸‹ï¼Œç¼–è¯‘å™¨ä¼šæŠ¥é”™ï¼›åœ¨æœ€åçš„æƒ…å†µä¸‹ï¼Œè¿™æ ·çš„ä»£ç å¯èƒ½ä¼šå¼•å…¥æ½œåœ¨çš„ã€éš¾ä»¥æ¢å¤çš„é”™è¯¯ã€‚&lt;/p&gt;
&lt;p&gt;golang.org/ref/spec
[predeclared identifiers]: https://
golang.org/ref/spec#Predeclared_identifiers&lt;/p&gt;
&lt;!-- raw HTML omitted --&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;go
var error string
// `error` ä½œç”¨åŸŸéšå¼è¦†ç›–

// or

func handleErrorMessage(error string) {
    // `error` ä½œç”¨åŸŸéšå¼è¦†ç›–
}
&lt;/code&gt;&lt;/pre&gt;&lt;!-- raw HTML omitted --&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;go
var errorMessage string
// `error` æŒ‡å‘å†…ç½®çš„éè¦†ç›–

// or

func handleErrorMessage(msg string) {
    // `error` æŒ‡å‘å†…ç½®çš„éè¦†ç›–
}
&lt;/code&gt;&lt;/pre&gt;&lt;!-- raw HTML omitted --&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;go
type Foo struct {
    // è™½ç„¶è¿™äº›å­—æ®µåœ¨æŠ€æœ¯ä¸Šä¸æ„æˆé˜´å½±ï¼Œä½†`error`æˆ–`string`å­—ç¬¦ä¸²çš„é‡æ˜ å°„ç°åœ¨æ˜¯ä¸æ˜ç¡®çš„ã€‚
    error  error
    string string
}

func (f Foo) Error() error {
    // `error` å’Œ `f.error` åœ¨è§†è§‰ä¸Šæ˜¯ç›¸ä¼¼çš„
    return f.error
}

func (f Foo) String() string {
    // `string` and `f.string` åœ¨è§†è§‰ä¸Šæ˜¯ç›¸ä¼¼çš„
    return f.string
}
&lt;/code&gt;&lt;/pre&gt;&lt;!-- raw HTML omitted --&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;go
type Foo struct {
    // `error` and `string` ç°åœ¨æ˜¯æ˜ç¡®çš„ã€‚
    err error
    str string
}

func (f Foo) Error() error {
    return f.err
}

func (f Foo) String() string {
    return f.str
}
&lt;/code&gt;&lt;/pre&gt;&lt;!-- raw HTML omitted --&gt;
&lt;p&gt;æ³¨æ„ï¼Œç¼–è¯‘å™¨åœ¨ä½¿ç”¨é¢„å…ˆåˆ†éš”çš„æ ‡è¯†ç¬¦æ—¶ä¸ä¼šç”Ÿæˆé”™è¯¯ï¼Œ
ä½†æ˜¯è¯¸å¦‚&lt;code&gt; go vet&lt;/code&gt;ä¹‹ç±»çš„å·¥å…·ä¼šæ­£ç¡®åœ°æŒ‡å‡ºè¿™äº›å’Œå…¶ä»–æƒ…å†µä¸‹çš„éšå¼é—®é¢˜ã€‚&lt;/p&gt;
&lt;h3 id=&#34;é¿å…ä½¿ç”¨-init&#34;&gt;é¿å…ä½¿ç”¨ &lt;code&gt;init()&lt;/code&gt;&lt;/h3&gt;
&lt;p&gt;å°½å¯èƒ½é¿å…ä½¿ç”¨&lt;code&gt;init()&lt;/code&gt;ã€‚å½“&lt;code&gt;init()&lt;/code&gt;æ˜¯ä¸å¯é¿å…æˆ–å¯å–çš„ï¼Œä»£ç åº”å…ˆå°è¯•ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;æ— è®ºç¨‹åºç¯å¢ƒæˆ–è°ƒç”¨å¦‚ä½•ï¼Œéƒ½è¦å®Œå…¨ç¡®å®šã€‚&lt;/li&gt;
&lt;li&gt;é¿å…ä¾èµ–äºå…¶ä»–&lt;code&gt;init()&lt;/code&gt;å‡½æ•°çš„é¡ºåºæˆ–å‰¯ä½œç”¨ã€‚è™½ç„¶&lt;code&gt;init()&lt;/code&gt;é¡ºåºæ˜¯æ˜ç¡®çš„ï¼Œä½†ä»£ç å¯ä»¥æ›´æ”¹ï¼Œ
å› æ­¤&lt;code&gt;init()&lt;/code&gt;å‡½æ•°ä¹‹é—´çš„å…³ç³»å¯èƒ½ä¼šä½¿ä»£ç å˜å¾—è„†å¼±å’Œå®¹æ˜“å‡ºé”™ã€‚&lt;/li&gt;
&lt;li&gt;é¿å…è®¿é—®æˆ–æ“ä½œå…¨å±€æˆ–ç¯å¢ƒçŠ¶æ€ï¼Œå¦‚æœºå™¨ä¿¡æ¯ã€ç¯å¢ƒå˜é‡ã€å·¥ä½œç›®å½•ã€ç¨‹åºå‚æ•°/è¾“å…¥ç­‰ã€‚&lt;/li&gt;
&lt;li&gt;é¿å…&lt;code&gt;I/O&lt;/code&gt;ï¼ŒåŒ…æ‹¬æ–‡ä»¶ç³»ç»Ÿã€ç½‘ç»œå’Œç³»ç»Ÿè°ƒç”¨ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;ä¸èƒ½æ»¡è¶³è¿™äº›è¦æ±‚çš„ä»£ç å¯èƒ½å±äºè¦ä½œä¸º&lt;code&gt;main()&lt;/code&gt;è°ƒç”¨çš„ä¸€éƒ¨åˆ†ï¼ˆæˆ–ç¨‹åºç”Ÿå‘½å‘¨æœŸä¸­çš„å…¶ä»–åœ°æ–¹ï¼‰ï¼Œ
æˆ–è€…ä½œä¸º&lt;code&gt;main()&lt;/code&gt;æœ¬èº«çš„ä¸€éƒ¨åˆ†å†™å…¥ã€‚ç‰¹åˆ«æ˜¯ï¼Œæ‰“ç®—ç”±å…¶ä»–ç¨‹åºä½¿ç”¨çš„åº“åº”è¯¥ç‰¹åˆ«æ³¨æ„å®Œå…¨ç¡®å®šæ€§ï¼Œ
è€Œä¸æ˜¯æ‰§è¡Œâ€œinit magicâ€&lt;/p&gt;
&lt;!-- raw HTML omitted --&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;go
type Foo struct {
    // ...
}
var _defaultFoo Foo
func init() {
    _defaultFoo = Foo{
        // ...
    }
}
&lt;/code&gt;&lt;/pre&gt;&lt;!-- raw HTML omitted --&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;go
var _defaultFoo = Foo{
    // ...
}
// or, ä¸ºäº†æ›´å¥½çš„å¯æµ‹è¯•æ€§:
var _defaultFoo = defaultFoo()
func defaultFoo() Foo {
    return Foo{
        // ...
    }
}
&lt;/code&gt;&lt;/pre&gt;&lt;!-- raw HTML omitted --&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;go
type Config struct {
    // ...
}
var _config Config
func init() {
    // Bad: åŸºäºå½“å‰ç›®å½•
    cwd, _ := os.Getwd()
    // Bad: I/O
    raw, _ := ioutil.ReadFile(
        path.Join(cwd, &amp;quot;config&amp;quot;, &amp;quot;config.yaml&amp;quot;),
    )
    yaml.Unmarshal(raw, &amp;amp;_config)
}
&lt;/code&gt;&lt;/pre&gt;&lt;!-- raw HTML omitted --&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;go
type Config struct {
    // ...
}
func loadConfig() Config {
    cwd, err := os.Getwd()
    // handle err
    raw, err := ioutil.ReadFile(
        path.Join(cwd, &amp;quot;config&amp;quot;, &amp;quot;config.yaml&amp;quot;),
    )
    // handle err
    var config Config
    yaml.Unmarshal(raw, &amp;amp;config)
    return config
}
&lt;/code&gt;&lt;/pre&gt;&lt;!-- raw HTML omitted --&gt;
&lt;p&gt;è€ƒè™‘åˆ°ä¸Šè¿°æƒ…å†µï¼Œåœ¨æŸäº›æƒ…å†µä¸‹ï¼Œ&lt;code&gt;init()&lt;/code&gt;å¯èƒ½æ›´å¯å–æˆ–æ˜¯å¿…è¦çš„ï¼Œå¯èƒ½åŒ…æ‹¬ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;ä¸èƒ½è¡¨ç¤ºä¸ºå•ä¸ªèµ‹å€¼çš„å¤æ‚è¡¨è¾¾å¼ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å¯æ’å…¥çš„é’©å­ï¼Œå¦‚&lt;code&gt;database/sql&lt;/code&gt;ã€ç¼–ç ç±»å‹æ³¨å†Œè¡¨ç­‰ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å¯¹&lt;a class=&#34;link&#34; href=&#34;https://cloud.&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;
google Cloud Functions&lt;/a&gt;å’Œå…¶ä»–å½¢å¼çš„ç¡®å®šæ€§é¢„è®¡ç®—çš„ä¼˜åŒ–ã€‚&lt;/p&gt;
&lt;p&gt;google.com/functions/docs/bestpractices/tips#use_global_variables_to_reuse_objects_in_future_invocations&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;è¿½åŠ æ—¶ä¼˜å…ˆæŒ‡å®šåˆ‡ç‰‡å®¹é‡&#34;&gt;è¿½åŠ æ—¶ä¼˜å…ˆæŒ‡å®šåˆ‡ç‰‡å®¹é‡&lt;/h3&gt;
&lt;p&gt;è¿½åŠ æ—¶ä¼˜å…ˆæŒ‡å®šåˆ‡ç‰‡å®¹é‡&lt;/p&gt;
&lt;p&gt;åœ¨å°½å¯èƒ½çš„æƒ…å†µä¸‹ï¼Œåœ¨åˆå§‹åŒ–è¦è¿½åŠ çš„åˆ‡ç‰‡æ—¶ä¸º&lt;code&gt;make()&lt;/code&gt;æä¾›ä¸€ä¸ªå®¹é‡å€¼ã€‚&lt;/p&gt;
&lt;!-- raw HTML omitted --&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;go
for n := 0; n &amp;lt; b.N; n++ {
  data := make([]int, 0)
  for k := 0; k &amp;lt; size; k++{
    data = append(data, k)
  }
}
&lt;/code&gt;&lt;/pre&gt;&lt;!-- raw HTML omitted --&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;go
for n := 0; n &amp;lt; b.N; n++ {
  data := make([]int, 0, size)
  for k := 0; k &amp;lt; size; k++{
    data = append(data, k)
  }
}
&lt;/code&gt;&lt;/pre&gt;&lt;!-- raw HTML omitted --&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;BenchmarkBad-4    100000000    2.48s
&lt;/code&gt;&lt;/pre&gt;&lt;!-- raw HTML omitted --&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;Benchmark
good-4   100000000    0.21s
&lt;/code&gt;&lt;/pre&gt;&lt;!-- raw HTML omitted --&gt;
&lt;h3 id=&#34;ä¸»å‡½æ•°é€€å‡ºæ–¹å¼exit&#34;&gt;ä¸»å‡½æ•°é€€å‡ºæ–¹å¼(Exit)&lt;/h3&gt;
&lt;p&gt;goç¨‹åºä½¿ç”¨&lt;a class=&#34;link&#34; href=&#34;https://&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;&lt;code&gt;os.Exit&lt;/code&gt;&lt;/a&gt; æˆ–è€… [&lt;code&gt;log.Fatal*&lt;/code&gt;] ç«‹å³é€€å‡º (ä½¿ç”¨&lt;code&gt;panic&lt;/code&gt;ä¸æ˜¯é€€å‡ºç¨‹åºçš„å¥½æ–¹æ³•ï¼Œè¯· &lt;a class=&#34;link&#34; href=&#34;#%e4%b8%8d%e8%a6%81-panic&#34; &gt;don&amp;rsquo;t panic&lt;/a&gt;.)&lt;/p&gt;
&lt;p&gt;golang.org/pkg/os/#Exit
[&lt;code&gt;log.Fatal*&lt;/code&gt;]: https://
golang.org/pkg/log/#Fatal&lt;/p&gt;
&lt;p&gt;**ä»…åœ¨&lt;code&gt;mainï¼ˆï¼‰&lt;/code&gt;**ä¸­è°ƒç”¨å…¶ä¸­ä¸€ä¸ª &lt;code&gt;os.Exit&lt;/code&gt; æˆ–è€… &lt;code&gt;log.Fatal*&lt;/code&gt;ã€‚æ‰€æœ‰å…¶ä»–å‡½æ•°åº”å°†é”™è¯¯è¿”å›åˆ°ä¿¡å·å¤±è´¥ä¸­ã€‚&lt;/p&gt;
&lt;!-- raw HTML omitted --&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;go
func main() {
  body := readFile(path)
  fmt.Println(body)
}
func readFile(path string) string {
  f, err := os.Open(path)
  if err != nil {
    log.Fatal(err)
  }
  b, err := ioutil.ReadAll(f)
  if err != nil {
    log.Fatal(err)
  }
  return string(b)
}
&lt;/code&gt;&lt;/pre&gt;&lt;!-- raw HTML omitted --&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;go
func main() {
  body, err := readFile(path)
  if err != nil {
    log.Fatal(err)
  }
  fmt.Println(body)
}
func readFile(path string) (string, error) {
  f, err := os.Open(path)
  if err != nil {
    return &amp;quot;&amp;quot;, err
  }
  b, err := ioutil.ReadAll(f)
  if err != nil {
    return &amp;quot;&amp;quot;, err
  }
  return string(b), nil
}
&lt;/code&gt;&lt;/pre&gt;&lt;!-- raw HTML omitted --&gt;
&lt;p&gt;åŸåˆ™ä¸Šï¼šé€€å‡ºçš„å…·æœ‰å¤šç§åŠŸèƒ½çš„ç¨‹åºå­˜åœ¨ä¸€äº›é—®é¢˜ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ä¸æ˜æ˜¾çš„æ§åˆ¶æµï¼šä»»ä½•å‡½æ•°éƒ½å¯ä»¥é€€å‡ºç¨‹åºï¼Œå› æ­¤å¾ˆéš¾å¯¹æ§åˆ¶æµè¿›è¡Œæ¨ç†ã€‚&lt;/li&gt;
&lt;li&gt;éš¾ä»¥æµ‹è¯•ï¼šé€€å‡ºç¨‹åºçš„å‡½æ•°ä¹Ÿå°†é€€å‡ºè°ƒç”¨å®ƒçš„æµ‹è¯•ã€‚è¿™ä½¿å¾—å‡½æ•°å¾ˆéš¾æµ‹è¯•ï¼Œå¹¶å¼•å…¥äº†è·³è¿‡ &lt;code&gt; go test&lt;/code&gt; å°šæœªè¿è¡Œçš„å…¶ä»–æµ‹è¯•çš„é£é™©ã€‚&lt;/li&gt;
&lt;li&gt;è·³è¿‡æ¸…ç†ï¼šå½“å‡½æ•°é€€å‡ºç¨‹åºæ—¶ï¼Œä¼šè·³è¿‡å·²ç»è¿›å…¥&lt;code&gt;defer&lt;/code&gt;é˜Ÿåˆ—é‡Œçš„å‡½æ•°è°ƒç”¨ã€‚è¿™å¢åŠ äº†è·³è¿‡é‡è¦æ¸…ç†ä»»åŠ¡çš„é£é™©ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;ä¸€æ¬¡æ€§é€€å‡º&#34;&gt;ä¸€æ¬¡æ€§é€€å‡º&lt;/h4&gt;
&lt;p&gt;å¦‚æœå¯èƒ½çš„è¯ï¼Œä½ çš„&lt;code&gt;mainï¼ˆï¼‰&lt;/code&gt;å‡½æ•°ä¸­&lt;strong&gt;æœ€å¤šä¸€æ¬¡&lt;/strong&gt; è°ƒç”¨ &lt;code&gt;os.Exit&lt;/code&gt;æˆ–è€…&lt;code&gt;log.Fatal&lt;/code&gt;ã€‚å¦‚æœæœ‰å¤šä¸ªé”™è¯¯åœºæ™¯åœæ­¢ç¨‹åºæ‰§è¡Œï¼Œè¯·å°†è¯¥é€»è¾‘æ”¾åœ¨å•ç‹¬çš„å‡½æ•°ä¸‹å¹¶ä»ä¸­è¿”å›é”™è¯¯ã€‚
è¿™ä¼šç¼©çŸ­ &lt;code&gt;main()&lt;/code&gt;å‡½æ•°ï¼Œå¹¶å°†æ‰€æœ‰å…³é”®ä¸šåŠ¡é€»è¾‘æ”¾å…¥ä¸€ä¸ªå•ç‹¬çš„ã€å¯æµ‹è¯•çš„å‡½æ•°ä¸­ã€‚&lt;/p&gt;
&lt;!-- raw HTML omitted --&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;go
package main
func main() {
  args := os.Args[1:]
  if len(args) != 1 {
    log.Fatal(&amp;quot;missing file&amp;quot;)
  }
  name := args[0]
  f, err := os.Open(name)
  if err != nil {
    log.Fatal(err)
  }
  defer f.Close()
  // å¦‚æœæˆ‘ä»¬è°ƒç”¨log.Fatal åœ¨è¿™æ¡çº¿ä¹‹å
  // f.Close å°†ä¼šè¢«æ‰§è¡Œ.
  b, err := ioutil.ReadAll(f)
  if err != nil {
    log.Fatal(err)
  }
  // ...
}
&lt;/code&gt;&lt;/pre&gt;&lt;!-- raw HTML omitted --&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;go
package main
func main() {
  if err := run(); err != nil {
    log.Fatal(err)
  }
}
func run() error {
  args := os.Args[1:]
  if len(args) != 1 {
    return errors.New(&amp;quot;missing file&amp;quot;)
  }
  name := args[0]
  f, err := os.Open(name)
  if err != nil {
    return err
  }
  defer f.Close()
  b, err := ioutil.ReadAll(f)
  if err != nil {
    return err
  }
  // ...
}
&lt;/code&gt;&lt;/pre&gt;&lt;!-- raw HTML omitted --&gt;
&lt;h2 id=&#34;æ€§èƒ½&#34;&gt;æ€§èƒ½&lt;/h2&gt;
&lt;p&gt;æ€§èƒ½æ–¹é¢çš„ç‰¹å®šå‡†åˆ™åªé€‚ç”¨äºé«˜é¢‘åœºæ™¯ã€‚&lt;/p&gt;
&lt;h3 id=&#34;ä¼˜å…ˆä½¿ç”¨-strconv-è€Œä¸æ˜¯-fmt&#34;&gt;ä¼˜å…ˆä½¿ç”¨ strconv è€Œä¸æ˜¯ fmt&lt;/h3&gt;
&lt;p&gt;å°†åŸè¯­è½¬æ¢ä¸ºå­—ç¬¦ä¸²æˆ–ä»å­—ç¬¦ä¸²è½¬æ¢æ—¶ï¼Œ&lt;code&gt;strconv&lt;/code&gt;é€Ÿåº¦æ¯”&lt;code&gt;fmt&lt;/code&gt;å¿«ã€‚&lt;/p&gt;
&lt;!-- raw HTML omitted --&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;go
for i := 0; i &amp;lt; b.N; i++ {
  s := fmt.Sprint(rand.Int())
}
&lt;/code&gt;&lt;/pre&gt;&lt;!-- raw HTML omitted --&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;go
for i := 0; i &amp;lt; b.N; i++ {
  s := strconv.Itoa(rand.Int())
}
&lt;/code&gt;&lt;/pre&gt;&lt;!-- raw HTML omitted --&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;BenchmarkFmtSprint-4    143 ns/op    2 allocs/op
&lt;/code&gt;&lt;/pre&gt;&lt;!-- raw HTML omitted --&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;BenchmarkStrconv-4    64.2 ns/op    1 allocs/op
&lt;/code&gt;&lt;/pre&gt;&lt;!-- raw HTML omitted --&gt;
&lt;h3 id=&#34;é¿å…å­—ç¬¦ä¸²åˆ°å­—èŠ‚çš„è½¬æ¢&#34;&gt;é¿å…å­—ç¬¦ä¸²åˆ°å­—èŠ‚çš„è½¬æ¢&lt;/h3&gt;
&lt;p&gt;ä¸è¦åå¤ä»å›ºå®šå­—ç¬¦ä¸²åˆ›å»ºå­—èŠ‚ sliceã€‚ç›¸åï¼Œè¯·æ‰§è¡Œä¸€æ¬¡è½¬æ¢å¹¶æ•è·ç»“æœã€‚&lt;/p&gt;
&lt;!-- raw HTML omitted --&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;go
for i := 0; i &amp;lt; b.N; i++ {
  w.Write([]byte(&amp;quot;Hello world&amp;quot;))
}
&lt;/code&gt;&lt;/pre&gt;&lt;!-- raw HTML omitted --&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;go
data := []byte(&amp;quot;Hello world&amp;quot;)
for i := 0; i &amp;lt; b.N; i++ {
  w.Write(data)
}
&lt;/code&gt;&lt;/pre&gt;&lt;!-- raw HTML omitted --&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;BenchmarkBad-4   50000000   22.2 ns/op
&lt;/code&gt;&lt;/pre&gt;&lt;!-- raw HTML omitted --&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;Benchmark
good-4  500000000   3.25 ns/op
&lt;/code&gt;&lt;/pre&gt;&lt;!-- raw HTML omitted --&gt;
&lt;h3 id=&#34;æŒ‡å®šå®¹å™¨å®¹é‡&#34;&gt;æŒ‡å®šå®¹å™¨å®¹é‡&lt;/h3&gt;
&lt;p&gt;å°½å¯èƒ½æŒ‡å®šå®¹å™¨å®¹é‡ï¼Œä»¥ä¾¿ä¸ºå®¹å™¨é¢„å…ˆåˆ†é…å†…å­˜ã€‚è¿™å°†åœ¨æ·»åŠ å…ƒç´ æ—¶æœ€å°åŒ–åç»­åˆ†é…ï¼ˆé€šè¿‡å¤åˆ¶å’Œè°ƒæ•´å®¹å™¨å¤§å°ï¼‰ã€‚&lt;/p&gt;
&lt;h4 id=&#34;æŒ‡å®šmapå®¹é‡æç¤º&#34;&gt;æŒ‡å®šMapå®¹é‡æç¤º&lt;/h4&gt;
&lt;p&gt;åœ¨å°½å¯èƒ½çš„æƒ…å†µä¸‹ï¼Œåœ¨ä½¿ç”¨ &lt;code&gt;make()&lt;/code&gt; åˆå§‹åŒ–çš„æ—¶å€™æä¾›å®¹é‡ä¿¡æ¯&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;go
make(map[T1]T2, hint)
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;å‘&lt;code&gt;make()&lt;/code&gt;æä¾›å®¹é‡æç¤ºä¼šåœ¨åˆå§‹åŒ–æ—¶å°è¯•è°ƒæ•´mapçš„å¤§å°ï¼Œè¿™å°†å‡å°‘åœ¨å°†å…ƒç´ æ·»åŠ åˆ°mapæ—¶ä¸ºmapé‡æ–°åˆ†é…å†…å­˜ã€‚&lt;/p&gt;
&lt;p&gt;æ³¨æ„ï¼Œä¸slicesä¸åŒã€‚map capacityæç¤ºå¹¶ä¸ä¿è¯å®Œå…¨çš„æŠ¢å å¼åˆ†é…ï¼Œè€Œæ˜¯ç”¨äºä¼°è®¡æ‰€éœ€çš„hashmap bucketçš„æ•°é‡ã€‚
å› æ­¤ï¼Œåœ¨å°†å…ƒç´ æ·»åŠ åˆ°mapæ—¶ï¼Œç”šè‡³åœ¨æŒ‡å®šmapå®¹é‡æ—¶ï¼Œä»å¯èƒ½å‘ç”Ÿåˆ†é…ã€‚&lt;/p&gt;
&lt;!-- raw HTML omitted --&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;go
m := make(map[string]os.FileInfo)

files, _ := ioutil.ReadDir(&amp;quot;./files&amp;quot;)
for _, f := range files {
    m[f.Name()] = f
}
&lt;/code&gt;&lt;/pre&gt;&lt;!-- raw HTML omitted --&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;go

files, _ := ioutil.ReadDir(&amp;quot;./files&amp;quot;)

m := make(map[string]os.FileInfo, len(files))
for _, f := range files {
    m[f.Name()] = f
}
&lt;/code&gt;&lt;/pre&gt;&lt;!-- raw HTML omitted --&gt;
&lt;p&gt;&lt;code&gt;m&lt;/code&gt; æ˜¯åœ¨æ²¡æœ‰å¤§å°æç¤ºçš„æƒ…å†µä¸‹åˆ›å»ºçš„ï¼› åœ¨è¿è¡Œæ—¶å¯èƒ½ä¼šæœ‰æ›´å¤šåˆ†é…ã€‚&lt;/p&gt;
&lt;!-- raw HTML omitted --&gt;
&lt;p&gt;&lt;code&gt;m&lt;/code&gt; æ˜¯æœ‰å¤§å°æç¤ºåˆ›å»ºçš„ï¼›åœ¨è¿è¡Œæ—¶å¯èƒ½ä¼šæœ‰æ›´å°‘çš„åˆ†é…ã€‚&lt;/p&gt;
&lt;!-- raw HTML omitted --&gt;
&lt;h4 id=&#34;æŒ‡å®šåˆ‡ç‰‡å®¹é‡&#34;&gt;æŒ‡å®šåˆ‡ç‰‡å®¹é‡&lt;/h4&gt;
&lt;p&gt;åœ¨å°½å¯èƒ½çš„æƒ…å†µä¸‹ï¼Œåœ¨ä½¿ç”¨&lt;code&gt;make()&lt;/code&gt;åˆå§‹åŒ–åˆ‡ç‰‡æ—¶æä¾›å®¹é‡ä¿¡æ¯ï¼Œç‰¹åˆ«æ˜¯åœ¨è¿½åŠ åˆ‡ç‰‡æ—¶ã€‚&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;go
make([]T, length, capacity)
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ä¸mapsä¸åŒï¼Œslice capacityä¸æ˜¯ä¸€ä¸ªæç¤ºï¼šç¼–è¯‘å™¨å°†ä¸ºæä¾›ç»™&lt;code&gt;make()&lt;/code&gt;çš„sliceçš„å®¹é‡åˆ†é…è¶³å¤Ÿçš„å†…å­˜ï¼Œ
è¿™æ„å‘³ç€åç»­çš„append()`æ“ä½œå°†å¯¼è‡´é›¶åˆ†é…ï¼ˆç›´åˆ°sliceçš„é•¿åº¦ä¸å®¹é‡åŒ¹é…ï¼Œåœ¨æ­¤ä¹‹åï¼Œä»»ä½•appendéƒ½å¯èƒ½è°ƒæ•´å¤§å°ä»¥å®¹çº³å…¶ä»–å…ƒç´ ï¼‰ã€‚&lt;/p&gt;
&lt;!-- raw HTML omitted --&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;go
for n := 0; n &amp;lt; b.N; n++ {
  data := make([]int, 0)
  for k := 0; k &amp;lt; size; k++{
    data = append(data, k)
  }
}
&lt;/code&gt;&lt;/pre&gt;&lt;!-- raw HTML omitted --&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;go
for n := 0; n &amp;lt; b.N; n++ {
  data := make([]int, 0, size)
  for k := 0; k &amp;lt; size; k++{
    data = append(data, k)
  }
}
&lt;/code&gt;&lt;/pre&gt;&lt;!-- raw HTML omitted --&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;BenchmarkBad-4    100000000    2.48s
&lt;/code&gt;&lt;/pre&gt;&lt;!-- raw HTML omitted --&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;Benchmark
good-4   100000000    0.21s
&lt;/code&gt;&lt;/pre&gt;&lt;!-- raw HTML omitted --&gt;
&lt;h2 id=&#34;è§„èŒƒ&#34;&gt;è§„èŒƒ&lt;/h2&gt;
&lt;h3 id=&#34;ä¸€è‡´æ€§&#34;&gt;ä¸€è‡´æ€§&lt;/h3&gt;
&lt;p&gt;æœ¬æ–‡ä¸­æ¦‚è¿°çš„ä¸€äº›æ ‡å‡†éƒ½æ˜¯å®¢è§‚æ€§çš„è¯„ä¼°ï¼Œæ˜¯æ ¹æ®åœºæ™¯ã€ä¸Šä¸‹æ–‡ã€æˆ–è€…ä¸»è§‚æ€§çš„åˆ¤æ–­ï¼›&lt;/p&gt;
&lt;p&gt;ä½†æ˜¯æœ€é‡è¦çš„æ˜¯ï¼Œ&lt;strong&gt;ä¿æŒä¸€è‡´&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;ä¸€è‡´æ€§çš„ä»£ç æ›´å®¹æ˜“ç»´æŠ¤ã€æ˜¯æ›´åˆç†çš„ã€éœ€è¦æ›´å°‘çš„å­¦ä¹ æˆæœ¬ã€å¹¶ä¸”éšç€æ–°çš„çº¦å®šå‡ºç°æˆ–è€…å‡ºç°é”™è¯¯åæ›´å®¹æ˜“è¿ç§»ã€æ›´æ–°ã€ä¿®å¤ bug&lt;/p&gt;
&lt;p&gt;ç›¸åï¼Œåœ¨ä¸€ä¸ªä»£ç åº“ä¸­åŒ…å«å¤šä¸ªå®Œå…¨ä¸åŒæˆ–å†²çªçš„ä»£ç é£æ ¼ä¼šå¯¼è‡´ç»´æŠ¤æˆæœ¬å¼€é”€ã€ä¸ç¡®å®šæ€§å’Œè®¤çŸ¥åå·®ã€‚æ‰€æœ‰è¿™äº›éƒ½ä¼šç›´æ¥å¯¼è‡´é€Ÿåº¦é™ä½ã€ä»£ç å®¡æŸ¥ç—›è‹¦ã€è€Œä¸”å¢åŠ  bug æ•°é‡ã€‚&lt;/p&gt;
&lt;p&gt;å°†è¿™äº›æ ‡å‡†åº”ç”¨äºä»£ç åº“æ—¶ï¼Œå»ºè®®åœ¨ packageï¼ˆæˆ–æ›´å¤§ï¼‰çº§åˆ«è¿›è¡Œæ›´æ”¹ï¼Œå­åŒ…çº§åˆ«çš„åº”ç”¨ç¨‹åºé€šè¿‡å°†å¤šä¸ªæ ·å¼å¼•å…¥åˆ°åŒä¸€ä»£ç ä¸­ï¼Œè¿åäº†ä¸Šè¿°å…³æ³¨ç‚¹ã€‚&lt;/p&gt;
&lt;h3 id=&#34;ç›¸ä¼¼çš„å£°æ˜æ”¾åœ¨ä¸€ç»„&#34;&gt;ç›¸ä¼¼çš„å£°æ˜æ”¾åœ¨ä¸€ç»„&lt;/h3&gt;
&lt;p&gt;go è¯­è¨€æ”¯æŒå°†ç›¸ä¼¼çš„å£°æ˜æ”¾åœ¨ä¸€ä¸ªç»„å†…ã€‚&lt;/p&gt;
&lt;!-- raw HTML omitted --&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;go
import &amp;quot;a&amp;quot;
import &amp;quot;b&amp;quot;
&lt;/code&gt;&lt;/pre&gt;&lt;!-- raw HTML omitted --&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;go
import (
  &amp;quot;a&amp;quot;
  &amp;quot;b&amp;quot;
)
&lt;/code&gt;&lt;/pre&gt;&lt;!-- raw HTML omitted --&gt;
&lt;p&gt;è¿™åŒæ ·é€‚ç”¨äºå¸¸é‡ã€å˜é‡å’Œç±»å‹å£°æ˜ï¼š&lt;/p&gt;
&lt;!-- raw HTML omitted --&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;go

const a = 1
const b = 2

var a = 1
var b = 2

type Area float64
type Volume float64
&lt;/code&gt;&lt;/pre&gt;&lt;!-- raw HTML omitted --&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;go
const (
  a = 1
  b = 2
)

var (
  a = 1
  b = 2
)

type (
  Area float64
  Volume float64
)
&lt;/code&gt;&lt;/pre&gt;&lt;!-- raw HTML omitted --&gt;
&lt;p&gt;ä»…å°†ç›¸å…³çš„å£°æ˜æ”¾åœ¨ä¸€ç»„ã€‚ä¸è¦å°†ä¸ç›¸å…³çš„å£°æ˜æ”¾åœ¨ä¸€ç»„ã€‚&lt;/p&gt;
&lt;!-- raw HTML omitted --&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;go
type Operation int

const (
  Add Operation = iota + 1
  Subtract
  Multiply
  EnvVar = &amp;quot;MY_ENV&amp;quot;
)
&lt;/code&gt;&lt;/pre&gt;&lt;!-- raw HTML omitted --&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;go
type Operation int

const (
  Add Operation = iota + 1
  Subtract
  Multiply
)

const EnvVar = &amp;quot;MY_ENV&amp;quot;
&lt;/code&gt;&lt;/pre&gt;&lt;!-- raw HTML omitted --&gt;
&lt;p&gt;åˆ†ç»„ä½¿ç”¨çš„ä½ç½®æ²¡æœ‰é™åˆ¶ï¼Œä¾‹å¦‚ï¼šä½ å¯ä»¥åœ¨å‡½æ•°å†…éƒ¨ä½¿ç”¨å®ƒä»¬ï¼š&lt;/p&gt;
&lt;!-- raw HTML omitted --&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;go
func f() string {
  var red = color.New(0xff0000)
  var green = color.New(0x00ff00)
  var blue = color.New(0x0000ff)

  ...
}
&lt;/code&gt;&lt;/pre&gt;&lt;!-- raw HTML omitted --&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;go
func f() string {
  var (
    red   = color.New(0xff0000)
    green = color.New(0x00ff00)
    blue  = color.New(0x0000ff)
  )

  ...
}
&lt;/code&gt;&lt;/pre&gt;&lt;!-- raw HTML omitted --&gt;
&lt;h3 id=&#34;import-åˆ†ç»„&#34;&gt;import åˆ†ç»„&lt;/h3&gt;
&lt;p&gt;å¯¼å…¥åº”è¯¥åˆ†ä¸ºä¸¤ç»„ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æ ‡å‡†åº“&lt;/li&gt;
&lt;li&gt;å…¶ä»–åº“&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;é»˜è®¤æƒ…å†µä¸‹ï¼Œè¿™æ˜¯
goimports åº”ç”¨çš„åˆ†ç»„ã€‚&lt;/p&gt;
&lt;!-- raw HTML omitted --&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;go
import (
  &amp;quot;fmt&amp;quot;
  &amp;quot;os&amp;quot;
  &amp;quot;
go.uber.org/atomic&amp;quot;
  &amp;quot;
golang.org/x/sync/errgroup&amp;quot;
)
&lt;/code&gt;&lt;/pre&gt;&lt;!-- raw HTML omitted --&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;go
import (
  &amp;quot;fmt&amp;quot;
  &amp;quot;os&amp;quot;

  &amp;quot;
go.uber.org/atomic&amp;quot;
  &amp;quot;
golang.org/x/sync/errgroup&amp;quot;
)
&lt;/code&gt;&lt;/pre&gt;&lt;!-- raw HTML omitted --&gt;
&lt;h3 id=&#34;åŒ…å&#34;&gt;åŒ…å&lt;/h3&gt;
&lt;p&gt;å½“å‘½ååŒ…æ—¶ï¼Œè¯·æŒ‰ä¸‹é¢è§„åˆ™é€‰æ‹©ä¸€ä¸ªåç§°ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å…¨éƒ¨å°å†™ã€‚æ²¡æœ‰å¤§å†™æˆ–ä¸‹åˆ’çº¿ã€‚&lt;/li&gt;
&lt;li&gt;å¤§å¤šæ•°ä½¿ç”¨å‘½åå¯¼å…¥çš„æƒ…å†µä¸‹ï¼Œä¸éœ€è¦é‡å‘½åã€‚&lt;/li&gt;
&lt;li&gt;ç®€çŸ­è€Œç®€æ´ã€‚è¯·è®°ä½ï¼Œåœ¨æ¯ä¸ªä½¿ç”¨çš„åœ°æ–¹éƒ½å®Œæ•´æ ‡è¯†äº†è¯¥åç§°ã€‚&lt;/li&gt;
&lt;li&gt;ä¸ç”¨å¤æ•°ã€‚ä¾‹å¦‚&lt;code&gt;net/url&lt;/code&gt;ï¼Œè€Œä¸æ˜¯&lt;code&gt;net/urls&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;ä¸è¦ç”¨â€œcommonâ€ï¼Œâ€œutilâ€ï¼Œâ€œsharedâ€æˆ–â€œlibâ€ã€‚è¿™äº›æ˜¯ä¸å¥½çš„ï¼Œä¿¡æ¯é‡ä¸è¶³çš„åç§°ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¦è¯·å‚é˜… &lt;a class=&#34;link&#34; href=&#34;https://blog.&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Package Names&lt;/a&gt; å’Œ [
go åŒ…æ ·å¼æŒ‡å—].&lt;/p&gt;
&lt;p&gt;golang.org/package-names
[
go åŒ…æ ·å¼æŒ‡å—]: &lt;a class=&#34;link&#34; href=&#34;https://rakyll.org/style-packages/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://rakyll.org/style-packages/&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&#34;å‡½æ•°å&#34;&gt;å‡½æ•°å&lt;/h3&gt;
&lt;p&gt;æˆ‘ä»¬éµå¾ª
go ç¤¾åŒºå…³äºä½¿ç”¨ &lt;a class=&#34;link&#34; href=&#34;https://&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;MixedCaps ä½œä¸ºå‡½æ•°å&lt;/a&gt; çš„çº¦å®šã€‚æœ‰ä¸€ä¸ªä¾‹å¤–ï¼Œä¸ºäº†å¯¹ç›¸å…³çš„æµ‹è¯•ç”¨ä¾‹è¿›è¡Œåˆ†ç»„ï¼Œå‡½æ•°åå¯èƒ½åŒ…å«ä¸‹åˆ’çº¿ï¼Œå¦‚ï¼š&lt;code&gt;TestMyFunction_WhatIsBeingTested&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;golang.org/doc/effective_
go.html#mixed-caps&lt;/p&gt;
&lt;h3 id=&#34;å¯¼å…¥åˆ«å&#34;&gt;å¯¼å…¥åˆ«å&lt;/h3&gt;
&lt;p&gt;å¦‚æœç¨‹åºåŒ…åç§°ä¸å¯¼å…¥è·¯å¾„çš„æœ€åä¸€ä¸ªå…ƒç´ ä¸åŒ¹é…ï¼Œåˆ™å¿…é¡»ä½¿ç”¨å¯¼å…¥åˆ«åã€‚&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;go
import (
  &amp;quot;net/http&amp;quot;

  client &amp;quot;example.com/client-
go&amp;quot;
  trace &amp;quot;example.com/trace/v2&amp;quot;
)
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;åœ¨æ‰€æœ‰å…¶ä»–æƒ…å†µä¸‹ï¼Œé™¤éå¯¼å…¥ä¹‹é—´æœ‰ç›´æ¥å†²çªï¼Œå¦åˆ™åº”é¿å…å¯¼å…¥åˆ«åã€‚&lt;/p&gt;
&lt;!-- raw HTML omitted --&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;go
import (
  &amp;quot;fmt&amp;quot;
  &amp;quot;os&amp;quot;

  nettrace &amp;quot;
golang.net/x/trace&amp;quot;
)
&lt;/code&gt;&lt;/pre&gt;&lt;!-- raw HTML omitted --&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;go
import (
  &amp;quot;fmt&amp;quot;
  &amp;quot;os&amp;quot;
  &amp;quot;runtime/trace&amp;quot;

  nettrace &amp;quot;
golang.net/x/trace&amp;quot;
)
&lt;/code&gt;&lt;/pre&gt;&lt;!-- raw HTML omitted --&gt;
&lt;h3 id=&#34;å‡½æ•°åˆ†ç»„ä¸é¡ºåº&#34;&gt;å‡½æ•°åˆ†ç»„ä¸é¡ºåº&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;å‡½æ•°åº”æŒ‰ç²—ç•¥çš„è°ƒç”¨é¡ºåºæ’åºã€‚&lt;/li&gt;
&lt;li&gt;åŒä¸€æ–‡ä»¶ä¸­çš„å‡½æ•°åº”æŒ‰æ¥æ”¶è€…åˆ†ç»„ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å› æ­¤ï¼Œå¯¼å‡ºçš„å‡½æ•°åº”å…ˆå‡ºç°åœ¨æ–‡ä»¶ä¸­ï¼Œæ”¾åœ¨&lt;code&gt;struct&lt;/code&gt;, &lt;code&gt;const&lt;/code&gt;, &lt;code&gt;var&lt;/code&gt;å®šä¹‰çš„åé¢ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨å®šä¹‰ç±»å‹ä¹‹åï¼Œä½†åœ¨æ¥æ”¶è€…çš„å…¶ä½™æ–¹æ³•ä¹‹å‰ï¼Œå¯èƒ½ä¼šå‡ºç°ä¸€ä¸ª &lt;code&gt;newXYZ()&lt;/code&gt;/&lt;code&gt;NewXYZ()&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;ç”±äºå‡½æ•°æ˜¯æŒ‰æ¥æ”¶è€…åˆ†ç»„çš„ï¼Œå› æ­¤æ™®é€šå·¥å…·å‡½æ•°åº”åœ¨æ–‡ä»¶æœ«å°¾å‡ºç°ã€‚&lt;/p&gt;
&lt;!-- raw HTML omitted --&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;go
func (s *something) Cost() {
  return calcCost(s.weights)
}

type something struct{ ... }

func calcCost(n []int) int {...}

func (s *something) Stop() {...}

func newSomething() *something {
    return &amp;amp;something{}
}
&lt;/code&gt;&lt;/pre&gt;&lt;!-- raw HTML omitted --&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;go
type something struct{ ... }

func newSomething() *something {
    return &amp;amp;something{}
}

func (s *something) Cost() {
  return calcCost(s.weights)
}

func (s *something) Stop() {...}

func calcCost(n []int) int {...}
&lt;/code&gt;&lt;/pre&gt;&lt;!-- raw HTML omitted --&gt;
&lt;h3 id=&#34;å‡å°‘åµŒå¥—&#34;&gt;å‡å°‘åµŒå¥—&lt;/h3&gt;
&lt;p&gt;ä»£ç åº”é€šè¿‡å°½å¯èƒ½å…ˆå¤„ç†é”™è¯¯æƒ…å†µ/ç‰¹æ®Šæƒ…å†µå¹¶å°½æ—©è¿”å›æˆ–ç»§ç»­å¾ªç¯æ¥å‡å°‘åµŒå¥—ã€‚å‡å°‘åµŒå¥—å¤šä¸ªçº§åˆ«çš„ä»£ç çš„ä»£ç é‡ã€‚&lt;/p&gt;
&lt;!-- raw HTML omitted --&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;go
for _, v := range data {
  if v.F1 == 1 {
    v = process(v)
    if err := v.Call(); err == nil {
      v.Send()
    } else {
      return err
    }
  } else {
    log.Printf(&amp;quot;Invalid v: %v&amp;quot;, v)
  }
}
&lt;/code&gt;&lt;/pre&gt;&lt;!-- raw HTML omitted --&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;go
for _, v := range data {
  if v.F1 != 1 {
    log.Printf(&amp;quot;Invalid v: %v&amp;quot;, v)
    continue
  }

  v = process(v)
  if err := v.Call(); err != nil {
    return err
  }
  v.Send()
}
&lt;/code&gt;&lt;/pre&gt;&lt;!-- raw HTML omitted --&gt;
&lt;h3 id=&#34;ä¸å¿…è¦çš„-else&#34;&gt;ä¸å¿…è¦çš„ else&lt;/h3&gt;
&lt;p&gt;å¦‚æœåœ¨ if çš„ä¸¤ä¸ªåˆ†æ”¯ä¸­éƒ½è®¾ç½®äº†å˜é‡ï¼Œåˆ™å¯ä»¥å°†å…¶æ›¿æ¢ä¸ºå•ä¸ª ifã€‚&lt;/p&gt;
&lt;!-- raw HTML omitted --&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;go
var a int
if b {
  a = 100
} else {
  a = 10
}
&lt;/code&gt;&lt;/pre&gt;&lt;!-- raw HTML omitted --&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;go
a := 10
if b {
  a = 100
}
&lt;/code&gt;&lt;/pre&gt;&lt;!-- raw HTML omitted --&gt;
&lt;h3 id=&#34;é¡¶å±‚å˜é‡å£°æ˜&#34;&gt;é¡¶å±‚å˜é‡å£°æ˜&lt;/h3&gt;
&lt;p&gt;åœ¨é¡¶å±‚ï¼Œä½¿ç”¨æ ‡å‡†&lt;code&gt;var&lt;/code&gt;å…³é”®å­—ã€‚è¯·å‹¿æŒ‡å®šç±»å‹ï¼Œé™¤éå®ƒä¸è¡¨è¾¾å¼çš„ç±»å‹ä¸åŒã€‚&lt;/p&gt;
&lt;!-- raw HTML omitted --&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;go
var _s string = F()

func F() string { return &amp;quot;A&amp;quot; }
&lt;/code&gt;&lt;/pre&gt;&lt;!-- raw HTML omitted --&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;go
var _s = F()
// ç”±äº F å·²ç»æ˜ç¡®äº†è¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²ç±»å‹ï¼Œå› æ­¤æˆ‘ä»¬æ²¡æœ‰å¿…è¦æ˜¾å¼æŒ‡å®š_s çš„ç±»å‹
// è¿˜æ˜¯é‚£ç§ç±»å‹

func F() string { return &amp;quot;A&amp;quot; }
&lt;/code&gt;&lt;/pre&gt;&lt;!-- raw HTML omitted --&gt;
&lt;p&gt;å¦‚æœè¡¨è¾¾å¼çš„ç±»å‹ä¸æ‰€éœ€çš„ç±»å‹ä¸å®Œå…¨åŒ¹é…ï¼Œè¯·æŒ‡å®šç±»å‹ã€‚&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;go
type myError struct{}

func (myError) Error() string { return &amp;quot;error&amp;quot; }

func F() myError { return myError{} }

var _e error = F()
// F è¿”å›ä¸€ä¸ª myError ç±»å‹çš„å®ä¾‹ï¼Œä½†æ˜¯æˆ‘ä»¬è¦ error ç±»å‹
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&#34;å¯¹äºæœªå¯¼å‡ºçš„é¡¶å±‚å¸¸é‡å’Œå˜é‡ä½¿ç”¨_ä½œä¸ºå‰ç¼€&#34;&gt;å¯¹äºæœªå¯¼å‡ºçš„é¡¶å±‚å¸¸é‡å’Œå˜é‡ï¼Œä½¿ç”¨_ä½œä¸ºå‰ç¼€&lt;/h3&gt;
&lt;p&gt;åœ¨æœªå¯¼å‡ºçš„é¡¶çº§&lt;code&gt;vars&lt;/code&gt;å’Œ&lt;code&gt;consts&lt;/code&gt;ï¼Œ å‰é¢åŠ ä¸Šå‰ç¼€_ï¼Œä»¥ä½¿å®ƒä»¬åœ¨ä½¿ç”¨æ—¶æ˜ç¡®è¡¨ç¤ºå®ƒä»¬æ˜¯å…¨å±€ç¬¦å·ã€‚&lt;/p&gt;
&lt;p&gt;ä¾‹å¤–ï¼šæœªå¯¼å‡ºçš„é”™è¯¯å€¼ï¼Œåº”ä»¥&lt;code&gt;err&lt;/code&gt;å¼€å¤´ã€‚&lt;/p&gt;
&lt;p&gt;åŸºæœ¬ä¾æ®ï¼šé¡¶çº§å˜é‡å’Œå¸¸é‡å…·æœ‰åŒ…èŒƒå›´ä½œç”¨åŸŸã€‚ä½¿ç”¨é€šç”¨åç§°å¯èƒ½å¾ˆå®¹æ˜“åœ¨å…¶ä»–æ–‡ä»¶ä¸­æ„å¤–ä½¿ç”¨é”™è¯¯çš„å€¼ã€‚&lt;/p&gt;
&lt;!-- raw HTML omitted --&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;go
// foo.
go

const (
  defaultPort = 8080
  defaultUser = &amp;quot;user&amp;quot;
)

// bar.
go

func Bar() {
  defaultPort := 9090
  ...
  fmt.Println(&amp;quot;Default port&amp;quot;, defaultPort)

  // We will not see a compile error if the first line of
  // Bar() is deleted.
}
&lt;/code&gt;&lt;/pre&gt;&lt;!-- raw HTML omitted --&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;go
// foo.
go

const (
  _defaultPort = 8080
  _defaultUser = &amp;quot;user&amp;quot;
)
&lt;/code&gt;&lt;/pre&gt;&lt;!-- raw HTML omitted --&gt;
&lt;h3 id=&#34;ç»“æ„ä½“ä¸­çš„åµŒå…¥&#34;&gt;ç»“æ„ä½“ä¸­çš„åµŒå…¥&lt;/h3&gt;
&lt;p&gt;åµŒå…¥å¼ç±»å‹ï¼ˆä¾‹å¦‚ mutexï¼‰åº”ä½äºç»“æ„ä½“å†…çš„å­—æ®µåˆ—è¡¨çš„é¡¶éƒ¨ï¼Œå¹¶ä¸”å¿…é¡»æœ‰ä¸€ä¸ªç©ºè¡Œå°†åµŒå…¥å¼å­—æ®µä¸å¸¸è§„å­—æ®µåˆ†éš”å¼€ã€‚&lt;/p&gt;
&lt;!-- raw HTML omitted --&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;go
type Client struct {
  version int
  http.Client
}
&lt;/code&gt;&lt;/pre&gt;&lt;!-- raw HTML omitted --&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;go
type Client struct {
  http.Client

  version int
}
&lt;/code&gt;&lt;/pre&gt;&lt;!-- raw HTML omitted --&gt;
&lt;p&gt;å†…åµŒåº”è¯¥æä¾›åˆ‡å®çš„å¥½å¤„ï¼Œæ¯”å¦‚ä»¥è¯­ä¹‰ä¸Šåˆé€‚çš„æ–¹å¼æ·»åŠ æˆ–å¢å¼ºåŠŸèƒ½ã€‚
å®ƒåº”è¯¥åœ¨å¯¹ç”¨æˆ·ä¸åˆ©å½±å“çš„æƒ…å†µä¸‹å®Œæˆè¿™é¡¹å·¥ä½œï¼ˆå¦è¯·å‚è§ï¼š&lt;code&gt;é¿å…åœ¨å…¬å…±ç»“æ„ä¸­åµŒå…¥ç±»å‹&lt;/code&gt;&lt;a class=&#34;link&#34; href=&#34;#avoid-embedding-types-in-public-structs&#34; &gt;Avoid Embedding Types in Public Structs&lt;/a&gt;ï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;åµŒå…¥ &lt;strong&gt;ä¸åº”è¯¥&lt;/strong&gt;:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;çº¯ç²¹æ˜¯ä¸ºäº†ç¾è§‚æˆ–æ–¹ä¾¿ã€‚&lt;/li&gt;
&lt;li&gt;ä½¿å¤–éƒ¨ç±»å‹æ›´éš¾æ„é€ æˆ–ä½¿ç”¨ã€‚&lt;/li&gt;
&lt;li&gt;å½±å“å¤–éƒ¨ç±»å‹çš„é›¶å€¼ã€‚å¦‚æœå¤–éƒ¨ç±»å‹æœ‰ä¸€ä¸ªæœ‰ç”¨çš„é›¶å€¼ï¼Œåˆ™åœ¨åµŒå…¥å†…éƒ¨ç±»å‹ä¹‹ååº”è¯¥ä»ç„¶æœ‰ä¸€ä¸ªæœ‰ç”¨çš„é›¶å€¼ã€‚&lt;/li&gt;
&lt;li&gt;ä½œä¸ºåµŒå…¥å†…éƒ¨ç±»å‹çš„å‰¯ä½œç”¨ï¼Œä»å¤–éƒ¨ç±»å‹å…¬å¼€ä¸ç›¸å…³çš„å‡½æ•°æˆ–å­—æ®µã€‚&lt;/li&gt;
&lt;li&gt;å…¬å¼€æœªå¯¼å‡ºçš„ç±»å‹ã€‚&lt;/li&gt;
&lt;li&gt;å½±å“å¤–éƒ¨ç±»å‹çš„å¤åˆ¶å½¢å¼ã€‚&lt;/li&gt;
&lt;li&gt;æ›´æ”¹å¤–éƒ¨ç±»å‹çš„APIæˆ–ç±»å‹è¯­ä¹‰ã€‚&lt;/li&gt;
&lt;li&gt;åµŒå…¥å†…éƒ¨ç±»å‹çš„éè§„èŒƒå½¢å¼ã€‚&lt;/li&gt;
&lt;li&gt;å…¬å¼€å¤–éƒ¨ç±»å‹çš„å®ç°è¯¦ç»†ä¿¡æ¯ã€‚&lt;/li&gt;
&lt;li&gt;å…è®¸ç”¨æˆ·è§‚å¯Ÿæˆ–æ§åˆ¶ç±»å‹å†…éƒ¨ã€‚&lt;/li&gt;
&lt;li&gt;é€šè¿‡åŒ…è£…çš„æ–¹å¼æ”¹å˜å†…éƒ¨å‡½æ•°çš„ä¸€èˆ¬è¡Œä¸ºï¼Œè¿™ç§åŒ…è£…æ–¹å¼ä¼šç»™ç”¨æˆ·å¸¦æ¥ä¸€äº›æ„æ–™ä¹‹å¤–æƒ…å†µã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ç®€å•åœ°è¯´ï¼Œæœ‰æ„è¯†åœ°å’Œæœ‰ç›®çš„åœ°åµŒå…¥ã€‚ä¸€ç§å¾ˆå¥½çš„æµ‹è¯•ä½“éªŒæ˜¯ï¼Œ
&amp;ldquo;æ˜¯å¦æ‰€æœ‰è¿™äº›å¯¼å‡ºçš„å†…éƒ¨æ–¹æ³•/å­—æ®µéƒ½å°†ç›´æ¥æ·»åŠ åˆ°å¤–éƒ¨ç±»å‹&amp;rdquo;
å¦‚æœç­”æ¡ˆæ˜¯&lt;code&gt;some&lt;/code&gt;æˆ–&lt;code&gt;no&lt;/code&gt;ï¼Œä¸è¦åµŒå…¥å†…éƒ¨ç±»å‹-è€Œæ˜¯ä½¿ç”¨å­—æ®µã€‚&lt;/p&gt;
&lt;!-- raw HTML omitted --&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;go
type A struct {
    // Bad: A.Lock() and A.Unlock() ç°åœ¨å¯ç”¨
    // ä¸æä¾›ä»»ä½•åŠŸèƒ½æ€§å¥½å¤„ï¼Œå¹¶å…è®¸ç”¨æˆ·æ§åˆ¶æœ‰å…³Açš„å†…éƒ¨ç»†èŠ‚ã€‚
    sync.Mutex
}
&lt;/code&gt;&lt;/pre&gt;&lt;!-- raw HTML omitted --&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;go
type countingWriteCloser struct {
    // 
good: Write() åœ¨å¤–å±‚æä¾›ç”¨äºç‰¹å®šç›®çš„ï¼Œ
    // å¹¶ä¸”å§”æ‰˜å·¥ä½œåˆ°å†…éƒ¨ç±»å‹çš„Write()ä¸­ã€‚
    io.WriteCloser
    count int
}
func (w *countingWriteCloser) Write(bs []byte) (int, error) {
    w.count += len(bs)
    return w.WriteCloser.Write(bs)
}
&lt;/code&gt;&lt;/pre&gt;&lt;!-- raw HTML omitted --&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;go
type Book struct {
    // Bad: æŒ‡é’ˆæ›´æ”¹é›¶å€¼çš„æœ‰ç”¨æ€§
    io.ReadWriter
    // other fields
}
// later
var b Book
b.Read(...)  // panic: nil pointer
b.String()   // panic: nil pointer
b.Write(...) // panic: nil pointer
&lt;/code&gt;&lt;/pre&gt;&lt;!-- raw HTML omitted --&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;go
type Book struct {
    // 
good: æœ‰ç”¨çš„é›¶å€¼
    bytes.Buffer
    // other fields
}
// later
var b Book
b.Read(...)  // ok
b.String()   // ok
b.Write(...) // ok
&lt;/code&gt;&lt;/pre&gt;&lt;!-- raw HTML omitted --&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;go
type Client struct {
    sync.Mutex
    sync.WaitGroup
    bytes.Buffer
    url.URL
}
&lt;/code&gt;&lt;/pre&gt;&lt;!-- raw HTML omitted --&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;go
type Client struct {
    mtx sync.Mutex
    wg  sync.WaitGroup
    buf bytes.Buffer
    url url.URL
}
&lt;/code&gt;&lt;/pre&gt;&lt;!-- raw HTML omitted --&gt;
&lt;h3 id=&#34;ä½¿ç”¨å­—æ®µååˆå§‹åŒ–ç»“æ„ä½“&#34;&gt;ä½¿ç”¨å­—æ®µååˆå§‹åŒ–ç»“æ„ä½“&lt;/h3&gt;
&lt;p&gt;åˆå§‹åŒ–ç»“æ„ä½“æ—¶ï¼Œåº”è¯¥æŒ‡å®šå­—æ®µåç§°ã€‚ç°åœ¨ç”± &lt;a class=&#34;link&#34; href=&#34;https://&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;&lt;code&gt; go vet&lt;/code&gt;&lt;/a&gt; å¼ºåˆ¶æ‰§è¡Œã€‚&lt;/p&gt;
&lt;p&gt;golang.org/cmd/vet/&lt;/p&gt;
&lt;!-- raw HTML omitted --&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;go
k := User{&amp;quot;John&amp;quot;, &amp;quot;Doe&amp;quot;, true}
&lt;/code&gt;&lt;/pre&gt;&lt;!-- raw HTML omitted --&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;go
k := User{
    FirstName: &amp;quot;John&amp;quot;,
    LastName: &amp;quot;Doe&amp;quot;,
    Admin: true,
}
&lt;/code&gt;&lt;/pre&gt;&lt;!-- raw HTML omitted --&gt;
&lt;p&gt;ä¾‹å¤–ï¼šå¦‚æœæœ‰ 3 ä¸ªæˆ–æ›´å°‘çš„å­—æ®µï¼Œåˆ™å¯ä»¥åœ¨æµ‹è¯•è¡¨ä¸­çœç•¥å­—æ®µåç§°ã€‚&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;go
tests := []struct{
  op Operation
  want string
}{
  {Add, &amp;quot;add&amp;quot;},
  {Subtract, &amp;quot;subtract&amp;quot;},
}
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&#34;æœ¬åœ°å˜é‡å£°æ˜&#34;&gt;æœ¬åœ°å˜é‡å£°æ˜&lt;/h3&gt;
&lt;p&gt;å¦‚æœå°†å˜é‡æ˜ç¡®è®¾ç½®ä¸ºæŸä¸ªå€¼ï¼Œåˆ™åº”ä½¿ç”¨çŸ­å˜é‡å£°æ˜å½¢å¼ (&lt;code&gt;:=&lt;/code&gt;)ã€‚&lt;/p&gt;
&lt;!-- raw HTML omitted --&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;go
var s = &amp;quot;foo&amp;quot;
&lt;/code&gt;&lt;/pre&gt;&lt;!-- raw HTML omitted --&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;go
s := &amp;quot;foo&amp;quot;
&lt;/code&gt;&lt;/pre&gt;&lt;!-- raw HTML omitted --&gt;
&lt;p&gt;ä½†æ˜¯ï¼Œåœ¨æŸäº›æƒ…å†µä¸‹ï¼Œ&lt;code&gt;var&lt;/code&gt; ä½¿ç”¨å…³é”®å­—æ—¶é»˜è®¤å€¼ä¼šæ›´æ¸…æ™°ã€‚ä¾‹å¦‚ï¼Œå£°æ˜ç©ºåˆ‡ç‰‡ã€‚&lt;/p&gt;
&lt;p&gt;golang/
go/wiki/CodeReviewComments#declaring-empty-slices&lt;/p&gt;
&lt;!-- raw HTML omitted --&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;go
func f(list []int) {
  filtered := []int{}
  for _, v := range list {
    if v &amp;gt; 10 {
      filtered = append(filtered, v)
    }
  }
}
&lt;/code&gt;&lt;/pre&gt;&lt;!-- raw HTML omitted --&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;go
func f(list []int) {
  var filtered []int
  for _, v := range list {
    if v &amp;gt; 10 {
      filtered = append(filtered, v)
    }
  }
}
&lt;/code&gt;&lt;/pre&gt;&lt;!-- raw HTML omitted --&gt;
&lt;h3 id=&#34;nil-æ˜¯ä¸€ä¸ªæœ‰æ•ˆçš„-slice&#34;&gt;nil æ˜¯ä¸€ä¸ªæœ‰æ•ˆçš„ slice&lt;/h3&gt;
&lt;p&gt;&lt;code&gt;nil&lt;/code&gt; æ˜¯ä¸€ä¸ªæœ‰æ•ˆçš„é•¿åº¦ä¸º 0 çš„ sliceï¼Œè¿™æ„å‘³ç€ï¼Œ&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;æ‚¨ä¸åº”æ˜ç¡®è¿”å›é•¿åº¦ä¸ºé›¶çš„åˆ‡ç‰‡ã€‚åº”è¯¥è¿”å›&lt;code&gt;nil&lt;/code&gt; æ¥ä»£æ›¿ã€‚&lt;/p&gt;
&lt;!-- raw HTML omitted --&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;good&lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt;&lt;/p&gt;
&lt;!-- raw HTML omitted --&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;go
if x == &amp;quot;&amp;quot; {
  return []int{}
}
&lt;/code&gt;&lt;/pre&gt;&lt;!-- raw HTML omitted --&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;go
if x == &amp;quot;&amp;quot; {
  return nil
}
&lt;/code&gt;&lt;/pre&gt;&lt;!-- raw HTML omitted --&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;è¦æ£€æŸ¥åˆ‡ç‰‡æ˜¯å¦ä¸ºç©ºï¼Œè¯·å§‹ç»ˆä½¿ç”¨&lt;code&gt;len(s) == 0&lt;/code&gt;ã€‚è€Œé &lt;code&gt;nil&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;!-- raw HTML omitted --&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;good&lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt;&lt;/p&gt;
&lt;!-- raw HTML omitted --&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;go
func isEmpty(s []string) bool {
  return s == nil
}
&lt;/code&gt;&lt;/pre&gt;&lt;!-- raw HTML omitted --&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;go
func isEmpty(s []string) bool {
  return len(s) == 0
}
&lt;/code&gt;&lt;/pre&gt;&lt;!-- raw HTML omitted --&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;é›¶å€¼åˆ‡ç‰‡ï¼ˆç”¨&lt;code&gt;var&lt;/code&gt;å£°æ˜çš„åˆ‡ç‰‡ï¼‰å¯ç«‹å³ä½¿ç”¨ï¼Œæ— éœ€è°ƒç”¨&lt;code&gt;make()&lt;/code&gt;åˆ›å»ºã€‚&lt;/p&gt;
&lt;!-- raw HTML omitted --&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;good&lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt;&lt;/p&gt;
&lt;!-- raw HTML omitted --&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;go
nums := []int{}
// or, nums := make([]int)

if add1 {
  nums = append(nums, 1)
}

if add2 {
  nums = append(nums, 2)
}
&lt;/code&gt;&lt;/pre&gt;&lt;!-- raw HTML omitted --&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;go
var nums []int

if add1 {
  nums = append(nums, 1)
}

if add2 {
  nums = append(nums, 2)
}
&lt;/code&gt;&lt;/pre&gt;&lt;!-- raw HTML omitted --&gt;
&lt;p&gt;è®°ä½ï¼Œè™½ç„¶nilåˆ‡ç‰‡æ˜¯æœ‰æ•ˆçš„åˆ‡ç‰‡ï¼Œä½†å®ƒä¸ç­‰äºé•¿åº¦ä¸º0çš„åˆ‡ç‰‡ï¼ˆä¸€ä¸ªä¸ºnilï¼Œå¦ä¸€ä¸ªä¸æ˜¯ï¼‰ï¼Œå¹¶ä¸”åœ¨ä¸åŒçš„æƒ…å†µä¸‹ï¼ˆä¾‹å¦‚åºåˆ—åŒ–ï¼‰ï¼Œè¿™ä¸¤ä¸ªåˆ‡ç‰‡çš„å¤„ç†æ–¹å¼å¯èƒ½ä¸åŒã€‚&lt;/p&gt;
&lt;h3 id=&#34;ç¼©å°å˜é‡ä½œç”¨åŸŸ&#34;&gt;ç¼©å°å˜é‡ä½œç”¨åŸŸ&lt;/h3&gt;
&lt;p&gt;å¦‚æœæœ‰å¯èƒ½ï¼Œå°½é‡ç¼©å°å˜é‡ä½œç”¨èŒƒå›´ã€‚é™¤éå®ƒä¸ &lt;a class=&#34;link&#34; href=&#34;#%e5%87%8f%e5%b0%91%e5%b5%8c%e5%a5%97&#34; &gt;å‡å°‘åµŒå¥—&lt;/a&gt;çš„è§„åˆ™å†²çªã€‚&lt;/p&gt;
&lt;!-- raw HTML omitted --&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;go
err := ioutil.WriteFile(name, data, 0644)
if err != nil {
 return err
}
&lt;/code&gt;&lt;/pre&gt;&lt;!-- raw HTML omitted --&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;go
if err := ioutil.WriteFile(name, data, 0644); err != nil {
 return err
}
&lt;/code&gt;&lt;/pre&gt;&lt;!-- raw HTML omitted --&gt;
&lt;p&gt;å¦‚æœéœ€è¦åœ¨ if ä¹‹å¤–ä½¿ç”¨å‡½æ•°è°ƒç”¨çš„ç»“æœï¼Œåˆ™ä¸åº”å°è¯•ç¼©å°èŒƒå›´ã€‚&lt;/p&gt;
&lt;!-- raw HTML omitted --&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;go
if data, err := ioutil.ReadFile(name); err == nil {
  err = cfg.Decode(data)
  if err != nil {
    return err
  }

  fmt.Println(cfg)
  return nil
} else {
  return err
}
&lt;/code&gt;&lt;/pre&gt;&lt;!-- raw HTML omitted --&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;go
data, err := ioutil.ReadFile(name)
if err != nil {
   return err
}

if err := cfg.Decode(data); err != nil {
  return err
}

fmt.Println(cfg)
return nil
&lt;/code&gt;&lt;/pre&gt;&lt;!-- raw HTML omitted --&gt;
&lt;h3 id=&#34;é¿å…å‚æ•°è¯­ä¹‰ä¸æ˜ç¡®avoid-naked-parameters&#34;&gt;é¿å…å‚æ•°è¯­ä¹‰ä¸æ˜ç¡®(Avoid Naked Parameters)&lt;/h3&gt;
&lt;p&gt;å‡½æ•°è°ƒç”¨ä¸­çš„&lt;code&gt;æ„ä¹‰ä¸æ˜ç¡®çš„å‚æ•°&lt;/code&gt;å¯èƒ½ä¼šæŸå®³å¯è¯»æ€§ã€‚å½“å‚æ•°åç§°çš„å«ä¹‰ä¸æ˜æ˜¾æ—¶ï¼Œè¯·ä¸ºå‚æ•°æ·»åŠ  C æ ·å¼æ³¨é‡Š (&lt;code&gt;/* ... */&lt;/code&gt;)&lt;/p&gt;
&lt;!-- raw HTML omitted --&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;go
// func printInfo(name string, isLocal, done bool)

printInfo(&amp;quot;foo&amp;quot;, true, true)
&lt;/code&gt;&lt;/pre&gt;&lt;!-- raw HTML omitted --&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;go
// func printInfo(name string, isLocal, done bool)

printInfo(&amp;quot;foo&amp;quot;, true /* isLocal */, true /* done */)
&lt;/code&gt;&lt;/pre&gt;&lt;!-- raw HTML omitted --&gt;
&lt;p&gt;å¯¹äºä¸Šé¢çš„ç¤ºä¾‹ä»£ç ï¼Œè¿˜æœ‰ä¸€ç§æ›´å¥½çš„å¤„ç†æ–¹å¼æ˜¯å°†ä¸Šé¢çš„ &lt;code&gt;bool&lt;/code&gt; ç±»å‹æ¢æˆè‡ªå®šä¹‰ç±»å‹ã€‚å°†æ¥ï¼Œè¯¥å‚æ•°å¯ä»¥æ”¯æŒä¸ä»…ä»…å±€é™äºä¸¤ä¸ªçŠ¶æ€ï¼ˆtrue/falseï¼‰ã€‚&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;go
type Region int

const (
  UnknownRegion Region = iota
  Local
)

type Status int

const (
  StatusReady Status= iota + 1
  StatusDone
  // Maybe we will have a StatusInProgress in the future.
)

func printInfo(name string, region Region, status Status)
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&#34;ä½¿ç”¨åŸå§‹å­—ç¬¦ä¸²å­—é¢å€¼é¿å…è½¬ä¹‰&#34;&gt;ä½¿ç”¨åŸå§‹å­—ç¬¦ä¸²å­—é¢å€¼ï¼Œé¿å…è½¬ä¹‰&lt;/h3&gt;
&lt;p&gt;go æ”¯æŒä½¿ç”¨ [åŸå§‹å­—ç¬¦ä¸²å­—é¢å€¼](https://
golang.org/ref/spec#raw_string_lit)ï¼Œä¹Ÿå°±æ˜¯ &amp;quot; ` &amp;quot; æ¥è¡¨ç¤ºåŸç”Ÿå­—ç¬¦ä¸²ï¼Œåœ¨éœ€è¦è½¬ä¹‰çš„åœºæ™¯ä¸‹ï¼Œæˆ‘ä»¬åº”è¯¥å°½é‡ä½¿ç”¨è¿™ç§æ–¹æ¡ˆæ¥æ›¿æ¢ã€‚&lt;/p&gt;
&lt;p&gt;å¯ä»¥è·¨è¶Šå¤šè¡Œå¹¶åŒ…å«å¼•å·ã€‚ä½¿ç”¨è¿™äº›å­—ç¬¦ä¸²å¯ä»¥é¿å…æ›´éš¾é˜…è¯»çš„æ‰‹å·¥è½¬ä¹‰çš„å­—ç¬¦ä¸²ã€‚&lt;/p&gt;
&lt;!-- raw HTML omitted --&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;go
wantError := &amp;quot;unknown name:\&amp;quot;test\&amp;quot;&amp;quot;
&lt;/code&gt;&lt;/pre&gt;&lt;!-- raw HTML omitted --&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;go
wantError := `unknown error:&amp;quot;test&amp;quot;`
&lt;/code&gt;&lt;/pre&gt;&lt;!-- raw HTML omitted --&gt;
&lt;h3 id=&#34;åˆå§‹åŒ–ç»“æ„ä½“&#34;&gt;åˆå§‹åŒ–ç»“æ„ä½“&lt;/h3&gt;
&lt;h4 id=&#34;ä½¿ç”¨å­—æ®µååˆå§‹åŒ–ç»“æ„&#34;&gt;ä½¿ç”¨å­—æ®µååˆå§‹åŒ–ç»“æ„&lt;/h4&gt;
&lt;p&gt;åˆå§‹åŒ–ç»“æ„æ—¶ï¼Œå‡ ä¹åº”è¯¥å§‹ç»ˆæŒ‡å®šå­—æ®µåã€‚ç›®å‰ç”±&lt;a class=&#34;link&#34; href=&#34;https://&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;&lt;code&gt; go vet&lt;/code&gt;&lt;/a&gt;å¼ºåˆ¶æ‰§è¡Œã€‚&lt;/p&gt;
&lt;p&gt;golang.org/cmd/vet/&lt;/p&gt;
&lt;!-- raw HTML omitted --&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;go
k := User{&amp;quot;John&amp;quot;, &amp;quot;Doe&amp;quot;, true}
&lt;/code&gt;&lt;/pre&gt;&lt;!-- raw HTML omitted --&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;go
k := User{
    FirstName: &amp;quot;John&amp;quot;,
    LastName: &amp;quot;Doe&amp;quot;,
    Admin: true,
}
&lt;/code&gt;&lt;/pre&gt;&lt;!-- raw HTML omitted --&gt;
&lt;p&gt;ä¾‹å¤–ï¼šå½“æœ‰3ä¸ªæˆ–æ›´å°‘çš„å­—æ®µæ—¶ï¼Œæµ‹è¯•è¡¨ä¸­çš„å­—æ®µå&lt;em&gt;may&lt;/em&gt;å¯ä»¥çœç•¥ã€‚&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;go
tests := []struct{
  op Operation
  want string
}{
  {Add, &amp;quot;add&amp;quot;},
  {Subtract, &amp;quot;subtract&amp;quot;},
}
&lt;/code&gt;&lt;/pre&gt;&lt;h4 id=&#34;çœç•¥ç»“æ„ä¸­çš„é›¶å€¼å­—æ®µ&#34;&gt;çœç•¥ç»“æ„ä¸­çš„é›¶å€¼å­—æ®µ&lt;/h4&gt;
&lt;p&gt;åˆå§‹åŒ–å…·æœ‰å­—æ®µåçš„ç»“æ„æ—¶ï¼Œé™¤éæä¾›æœ‰æ„ä¹‰çš„ä¸Šä¸‹æ–‡ï¼Œå¦åˆ™å¿½ç•¥å€¼ä¸ºé›¶çš„å­—æ®µã€‚
ä¹Ÿå°±æ˜¯ï¼Œè®©æˆ‘ä»¬è‡ªåŠ¨å°†è¿™äº›è®¾ç½®ä¸ºé›¶å€¼&lt;/p&gt;
&lt;!-- raw HTML omitted --&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;go
user := User{
  FirstName: &amp;quot;John&amp;quot;,
  LastName: &amp;quot;Doe&amp;quot;,
  MiddleName: &amp;quot;&amp;quot;,
  Admin: false,
}
&lt;/code&gt;&lt;/pre&gt;&lt;!-- raw HTML omitted --&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;go
user := User{
  FirstName: &amp;quot;John&amp;quot;,
  LastName: &amp;quot;Doe&amp;quot;,
}
&lt;/code&gt;&lt;/pre&gt;&lt;!-- raw HTML omitted --&gt;
&lt;p&gt;è¿™æœ‰åŠ©äºé€šè¿‡çœç•¥è¯¥ä¸Šä¸‹æ–‡ä¸­çš„é»˜è®¤å€¼æ¥å‡å°‘é˜…è¯»çš„éšœç¢ã€‚åªæŒ‡å®šæœ‰æ„ä¹‰çš„å€¼ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨å­—æ®µåæä¾›æœ‰æ„ä¹‰ä¸Šä¸‹æ–‡çš„åœ°æ–¹åŒ…å«é›¶å€¼ã€‚ä¾‹å¦‚ï¼Œ&lt;a class=&#34;link&#34; href=&#34;#%e8%a1%a8%e9%a9%b1%e5%8a%a8%e6%b5%8b%e8%af%95&#34; &gt;è¡¨é©±åŠ¨æµ‹è¯•&lt;/a&gt; ä¸­çš„æµ‹è¯•ç”¨ä¾‹å¯ä»¥å—ç›Šäºå­—æ®µçš„åç§°ï¼Œå³ä½¿å®ƒä»¬æ˜¯é›¶å€¼çš„ã€‚&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;go
tests := []struct{
  give string
  want int
}{
  {give: &amp;quot;0&amp;quot;, want: 0},
  // ...
}
&lt;/code&gt;&lt;/pre&gt;&lt;h4 id=&#34;å¯¹é›¶å€¼ç»“æ„ä½¿ç”¨-var&#34;&gt;å¯¹é›¶å€¼ç»“æ„ä½¿ç”¨ &lt;code&gt;var&lt;/code&gt;&lt;/h4&gt;
&lt;p&gt;å¦‚æœåœ¨å£°æ˜ä¸­çœç•¥äº†ç»“æ„çš„æ‰€æœ‰å­—æ®µï¼Œè¯·ä½¿ç”¨ &lt;code&gt;var&lt;/code&gt; å£°æ˜ç»“æ„ã€‚&lt;/p&gt;
&lt;!-- raw HTML omitted --&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;go
user := User{}
&lt;/code&gt;&lt;/pre&gt;&lt;!-- raw HTML omitted --&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;go
var user User
&lt;/code&gt;&lt;/pre&gt;&lt;!-- raw HTML omitted --&gt;
&lt;p&gt;è¿™å°†é›¶å€¼ç»“æ„ä¸é‚£äº›å…·æœ‰ç±»ä¼¼äºä¸º[åˆå§‹åŒ– Maps]åˆ›å»ºçš„,åŒºåˆ«äºéé›¶å€¼å­—æ®µçš„ç»“æ„åŒºåˆ†å¼€æ¥ï¼Œ
å¹¶ä¸æˆ‘ä»¬æ›´å–œæ¬¢çš„&lt;a class=&#34;link&#34; href=&#34;https://github.com/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;declare empty slices&lt;/a&gt;æ–¹å¼ç›¸åŒ¹é…ã€‚&lt;/p&gt;
&lt;h4 id=&#34;åˆå§‹åŒ–-struct-å¼•ç”¨&#34;&gt;åˆå§‹åŒ– Struct å¼•ç”¨&lt;/h4&gt;
&lt;p&gt;åœ¨åˆå§‹åŒ–ç»“æ„å¼•ç”¨æ—¶ï¼Œè¯·ä½¿ç”¨&lt;code&gt;&amp;amp;T{}&lt;/code&gt;ä»£æ›¿&lt;code&gt;new(T)&lt;/code&gt;ï¼Œä»¥ä½¿å…¶ä¸ç»“æ„ä½“åˆå§‹åŒ–ä¸€è‡´ã€‚&lt;/p&gt;
&lt;!-- raw HTML omitted --&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;go
sval := T{Name: &amp;quot;foo&amp;quot;}

// inconsistent
sptr := new(T)
sptr.Name = &amp;quot;bar&amp;quot;
&lt;/code&gt;&lt;/pre&gt;&lt;!-- raw HTML omitted --&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;go
sval := T{Name: &amp;quot;foo&amp;quot;}

sptr := &amp;amp;T{Name: &amp;quot;bar&amp;quot;}
&lt;/code&gt;&lt;/pre&gt;&lt;!-- raw HTML omitted --&gt;
&lt;h3 id=&#34;åˆå§‹åŒ–-maps&#34;&gt;åˆå§‹åŒ– Maps&lt;/h3&gt;
&lt;p&gt;å¯¹äºç©º map è¯·ä½¿ç”¨ &lt;code&gt;make(..)&lt;/code&gt; åˆå§‹åŒ–ï¼Œ å¹¶ä¸” map æ˜¯é€šè¿‡ç¼–ç¨‹æ–¹å¼å¡«å……çš„ã€‚
è¿™ä½¿å¾— map åˆå§‹åŒ–åœ¨è¡¨ç°ä¸Šä¸åŒäºå£°æ˜ï¼Œå¹¶ä¸”å®ƒè¿˜å¯ä»¥æ–¹ä¾¿åœ°åœ¨ make åæ·»åŠ å¤§å°æç¤ºã€‚&lt;/p&gt;
&lt;!-- raw HTML omitted --&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;go
var (
  // m1 è¯»å†™å®‰å…¨;
  // m2 åœ¨å†™å…¥æ—¶ä¼š panic
  m1 = map[T1]T2{}
  m2 map[T1]T2
)
&lt;/code&gt;&lt;/pre&gt;&lt;!-- raw HTML omitted --&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;go
var (
  // m1 è¯»å†™å®‰å…¨;
  // m2 åœ¨å†™å…¥æ—¶ä¼š panic
  m1 = make(map[T1]T2)
  m2 map[T1]T2
)
&lt;/code&gt;&lt;/pre&gt;&lt;!-- raw HTML omitted --&gt;
&lt;p&gt;å£°æ˜å’Œåˆå§‹åŒ–çœ‹èµ·æ¥éå¸¸ç›¸ä¼¼çš„ã€‚&lt;/p&gt;
&lt;!-- raw HTML omitted --&gt;
&lt;p&gt;å£°æ˜å’Œåˆå§‹åŒ–çœ‹èµ·æ¥å·®åˆ«éå¸¸å¤§ã€‚&lt;/p&gt;
&lt;!-- raw HTML omitted --&gt;
&lt;p&gt;åœ¨å°½å¯èƒ½çš„æƒ…å†µä¸‹ï¼Œè¯·åœ¨åˆå§‹åŒ–æ—¶æä¾› map å®¹é‡å¤§å°ï¼Œè¯¦ç»†è¯·çœ‹ &lt;a class=&#34;link&#34; href=&#34;#%e6%8c%87%e5%ae%9aMap%e5%ae%b9%e9%87%8f%e6%8f%90%e7%a4%ba&#34; &gt;æŒ‡å®šMapå®¹é‡æç¤º&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;p&gt;å¦å¤–ï¼Œå¦‚æœ map åŒ…å«å›ºå®šçš„å…ƒç´ åˆ—è¡¨ï¼Œåˆ™ä½¿ç”¨ map literals(map åˆå§‹åŒ–åˆ—è¡¨) åˆå§‹åŒ–æ˜ å°„ã€‚&lt;/p&gt;
&lt;!-- raw HTML omitted --&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;go
m := make(map[T1]T2, 3)
m[k1] = v1
m[k2] = v2
m[k3] = v3
&lt;/code&gt;&lt;/pre&gt;&lt;!-- raw HTML omitted --&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;go
m := map[T1]T2{
  k1: v1,
  k2: v2,
  k3: v3,
}
&lt;/code&gt;&lt;/pre&gt;&lt;!-- raw HTML omitted --&gt;
&lt;p&gt;åŸºæœ¬å‡†åˆ™æ˜¯ï¼šåœ¨åˆå§‹åŒ–æ—¶ä½¿ç”¨ map åˆå§‹åŒ–åˆ—è¡¨ æ¥æ·»åŠ ä¸€ç»„å›ºå®šçš„å…ƒç´ ã€‚å¦åˆ™ä½¿ç”¨ &lt;code&gt;make&lt;/code&gt; (å¦‚æœå¯ä»¥ï¼Œè¯·å°½é‡æŒ‡å®š map å®¹é‡)ã€‚&lt;/p&gt;
&lt;h3 id=&#34;å­—ç¬¦ä¸²-string-format&#34;&gt;å­—ç¬¦ä¸² string format&lt;/h3&gt;
&lt;p&gt;å¦‚æœä½ åœ¨å‡½æ•°å¤–å£°æ˜&lt;code&gt;Printf&lt;/code&gt;-style å‡½æ•°çš„æ ¼å¼å­—ç¬¦ä¸²ï¼Œè¯·å°†å…¶è®¾ç½®ä¸º&lt;code&gt;const&lt;/code&gt;å¸¸é‡ã€‚&lt;/p&gt;
&lt;p&gt;è¿™æœ‰åŠ©äº&lt;code&gt; go vet&lt;/code&gt;å¯¹æ ¼å¼å­—ç¬¦ä¸²æ‰§è¡Œé™æ€åˆ†æã€‚&lt;/p&gt;
&lt;!-- raw HTML omitted --&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;go
msg := &amp;quot;unexpected values %v, %v\n&amp;quot;
fmt.Printf(msg, 1, 2)
&lt;/code&gt;&lt;/pre&gt;&lt;!-- raw HTML omitted --&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;go
const msg = &amp;quot;unexpected values %v, %v\n&amp;quot;
fmt.Printf(msg, 1, 2)
&lt;/code&gt;&lt;/pre&gt;&lt;!-- raw HTML omitted --&gt;
&lt;h3 id=&#34;å‘½å-printf-æ ·å¼çš„å‡½æ•°&#34;&gt;å‘½å Printf æ ·å¼çš„å‡½æ•°&lt;/h3&gt;
&lt;p&gt;å£°æ˜&lt;code&gt;Printf&lt;/code&gt;-style å‡½æ•°æ—¶ï¼Œè¯·ç¡®ä¿&lt;code&gt; go vet&lt;/code&gt;å¯ä»¥æ£€æµ‹åˆ°å®ƒå¹¶æ£€æŸ¥æ ¼å¼å­—ç¬¦ä¸²ã€‚&lt;/p&gt;
&lt;p&gt;è¿™æ„å‘³ç€æ‚¨åº”å°½å¯èƒ½ä½¿ç”¨é¢„å®šä¹‰çš„&lt;code&gt;Printf&lt;/code&gt;-style å‡½æ•°åç§°ã€‚&lt;code&gt; go vet&lt;/code&gt;å°†é»˜è®¤æ£€æŸ¥è¿™äº›ã€‚æœ‰å…³æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚è§ &lt;a class=&#34;link&#34; href=&#34;https://&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Printf ç³»åˆ—&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;p&gt;golang.org/cmd/vet/#hdr-Printf_family&lt;/p&gt;
&lt;p&gt;å¦‚æœä¸èƒ½ä½¿ç”¨é¢„å®šä¹‰çš„åç§°ï¼Œè¯·ä»¥ f ç»“æŸé€‰æ‹©çš„åç§°ï¼š&lt;code&gt;Wrapf&lt;/code&gt;ï¼Œè€Œä¸æ˜¯&lt;code&gt;Wrap&lt;/code&gt;ã€‚&lt;code&gt; go vet&lt;/code&gt;å¯ä»¥è¦æ±‚æ£€æŸ¥ç‰¹å®šçš„ Printf æ ·å¼åç§°ï¼Œä½†åç§°å¿…é¡»ä»¥&lt;code&gt;f&lt;/code&gt;ç»“å°¾ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;$ 
go vet -printfuncs&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;wrapf,statusf
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å¦è¯·å‚é˜… &lt;a class=&#34;link&#34; href=&#34;https://kuzminva.wordpress.com/2017/11/07/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;
go vet: Printf family check&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;go-vet-printf-family-check/&lt;/p&gt;
&lt;h2 id=&#34;ç¼–ç¨‹æ¨¡å¼&#34;&gt;ç¼–ç¨‹æ¨¡å¼&lt;/h2&gt;
&lt;h3 id=&#34;è¡¨é©±åŠ¨æµ‹è¯•&#34;&gt;è¡¨é©±åŠ¨æµ‹è¯•&lt;/h3&gt;
&lt;p&gt;å½“æµ‹è¯•é€»è¾‘æ˜¯é‡å¤çš„æ—¶å€™ï¼Œé€šè¿‡  &lt;a class=&#34;link&#34; href=&#34;https://blog.&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;subtests&lt;/a&gt; ä½¿ç”¨ table é©±åŠ¨çš„æ–¹å¼ç¼–å†™ case ä»£ç çœ‹ä¸Šå»ä¼šæ›´ç®€æ´ã€‚&lt;/p&gt;
&lt;p&gt;golang.org/subtests&lt;/p&gt;
&lt;!-- raw HTML omitted --&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;go
// func TestSplitHostPort(t *testing.T)

host, port, err := net.SplitHostPort(&amp;quot;192.0.2.0:8000&amp;quot;)
require.NoError(t, err)
assert.Equal(t, &amp;quot;192.0.2.0&amp;quot;, host)
assert.Equal(t, &amp;quot;8000&amp;quot;, port)

host, port, err = net.SplitHostPort(&amp;quot;192.0.2.0:http&amp;quot;)
require.NoError(t, err)
assert.Equal(t, &amp;quot;192.0.2.0&amp;quot;, host)
assert.Equal(t, &amp;quot;http&amp;quot;, port)

host, port, err = net.SplitHostPort(&amp;quot;:8000&amp;quot;)
require.NoError(t, err)
assert.Equal(t, &amp;quot;&amp;quot;, host)
assert.Equal(t, &amp;quot;8000&amp;quot;, port)

host, port, err = net.SplitHostPort(&amp;quot;1:8&amp;quot;)
require.NoError(t, err)
assert.Equal(t, &amp;quot;1&amp;quot;, host)
assert.Equal(t, &amp;quot;8&amp;quot;, port)
&lt;/code&gt;&lt;/pre&gt;&lt;!-- raw HTML omitted --&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;go
// func TestSplitHostPort(t *testing.T)

tests := []struct{
  give     string
  wantHost string
  wantPort string
}{
  {
    give:     &amp;quot;192.0.2.0:8000&amp;quot;,
    wantHost: &amp;quot;192.0.2.0&amp;quot;,
    wantPort: &amp;quot;8000&amp;quot;,
  },
  {
    give:     &amp;quot;192.0.2.0:http&amp;quot;,
    wantHost: &amp;quot;192.0.2.0&amp;quot;,
    wantPort: &amp;quot;http&amp;quot;,
  },
  {
    give:     &amp;quot;:8000&amp;quot;,
    wantHost: &amp;quot;&amp;quot;,
    wantPort: &amp;quot;8000&amp;quot;,
  },
  {
    give:     &amp;quot;1:8&amp;quot;,
    wantHost: &amp;quot;1&amp;quot;,
    wantPort: &amp;quot;8&amp;quot;,
  },
}

for _, tt := range tests {
  t.Run(tt.give, func(t *testing.T) {
    host, port, err := net.SplitHostPort(tt.give)
    require.NoError(t, err)
    assert.Equal(t, tt.wantHost, host)
    assert.Equal(t, tt.wantPort, port)
  })
}
&lt;/code&gt;&lt;/pre&gt;&lt;!-- raw HTML omitted --&gt;
&lt;p&gt;å¾ˆæ˜æ˜¾ï¼Œä½¿ç”¨ test table çš„æ–¹å¼åœ¨ä»£ç é€»è¾‘æ‰©å±•çš„æ—¶å€™ï¼Œæ¯”å¦‚æ–°å¢ test caseï¼Œéƒ½ä¼šæ˜¾å¾—æ›´åŠ çš„æ¸…æ™°ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬éµå¾ªè¿™æ ·çš„çº¦å®šï¼šå°†ç»“æ„ä½“åˆ‡ç‰‡ç§°ä¸º&lt;code&gt;tests&lt;/code&gt;ã€‚ æ¯ä¸ªæµ‹è¯•ç”¨ä¾‹ç§°ä¸º&lt;code&gt;tt&lt;/code&gt;ã€‚æ­¤å¤–ï¼Œæˆ‘ä»¬é¼“åŠ±ä½¿ç”¨&lt;code&gt;give&lt;/code&gt;å’Œ&lt;code&gt;want&lt;/code&gt;å‰ç¼€è¯´æ˜æ¯ä¸ªæµ‹è¯•ç”¨ä¾‹çš„è¾“å…¥å’Œè¾“å‡ºå€¼ã€‚&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;go
tests := []struct{
  give     string
  wantHost string
  wantPort string
}{
  // ...
}

for _, tt := range tests {
  // ...
}
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&#34;åŠŸèƒ½é€‰é¡¹&#34;&gt;åŠŸèƒ½é€‰é¡¹&lt;/h3&gt;
&lt;p&gt;åŠŸèƒ½é€‰é¡¹æ˜¯ä¸€ç§æ¨¡å¼ï¼Œæ‚¨å¯ä»¥åœ¨å…¶ä¸­å£°æ˜ä¸€ä¸ªä¸é€æ˜ Option ç±»å‹ï¼Œè¯¥ç±»å‹åœ¨æŸäº›å†…éƒ¨ç»“æ„ä¸­è®°å½•ä¿¡æ¯ã€‚æ‚¨æ¥å—è¿™äº›é€‰é¡¹çš„å¯å˜ç¼–å·ï¼Œå¹¶æ ¹æ®å†…éƒ¨ç»“æ„ä¸Šçš„é€‰é¡¹è®°å½•çš„å…¨éƒ¨ä¿¡æ¯é‡‡å–è¡ŒåŠ¨ã€‚&lt;/p&gt;
&lt;p&gt;å°†æ­¤æ¨¡å¼ç”¨äºæ‚¨éœ€è¦æ‰©å±•çš„æ„é€ å‡½æ•°å’Œå…¶ä»–å…¬å…± API ä¸­çš„å¯é€‰å‚æ•°ï¼Œå°¤å…¶æ˜¯åœ¨è¿™äº›åŠŸèƒ½ä¸Šå·²ç»å…·æœ‰ä¸‰ä¸ªæˆ–æ›´å¤šå‚æ•°çš„æƒ…å†µä¸‹ã€‚&lt;/p&gt;
&lt;!-- raw HTML omitted --&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;go
// package db

func Open(
  addr string,
  cache bool,
  logger *zap.Logger
) (*Connection, error) {
  // ...
}
&lt;/code&gt;&lt;/pre&gt;&lt;!-- raw HTML omitted --&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;go
// package db

type Option interface {
  // ...
}

func WithCache(c bool) Option {
  // ...
}

func WithLogger(log *zap.Logger) Option {
  // ...
}

// Open creates a connection.
func Open(
  addr string,
  opts ...Option,
) (*Connection, error) {
  // ...
}
&lt;/code&gt;&lt;/pre&gt;&lt;!-- raw HTML omitted --&gt;
&lt;p&gt;å¿…é¡»å§‹ç»ˆæä¾›ç¼“å­˜å’Œè®°å½•å™¨å‚æ•°ï¼Œå³ä½¿ç”¨æˆ·å¸Œæœ›ä½¿ç”¨é»˜è®¤å€¼ã€‚&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;go
db.Open(addr, db.DefaultCache, zap.NewNop())
db.Open(addr, db.DefaultCache, log)
db.Open(addr, false /* cache */, zap.NewNop())
db.Open(addr, false /* cache */, log)
&lt;/code&gt;&lt;/pre&gt;&lt;!-- raw HTML omitted --&gt;
&lt;p&gt;åªæœ‰åœ¨éœ€è¦æ—¶æ‰æä¾›é€‰é¡¹ã€‚&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;go
db.Open(addr)
db.Open(addr, db.WithLogger(log))
db.Open(addr, db.WithCache(false))
db.Open(
  addr,
  db.WithCache(false),
  db.WithLogger(log),
)
&lt;/code&gt;&lt;/pre&gt;&lt;!-- raw HTML omitted --&gt;
&lt;p&gt;Our suggested way of implementing this pattern is with an &lt;code&gt;Option&lt;/code&gt; interface
that holds an unexported method, recording options on an unexported &lt;code&gt;options&lt;/code&gt;
struct.&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬å»ºè®®å®ç°æ­¤æ¨¡å¼çš„æ–¹æ³•æ˜¯ä½¿ç”¨ä¸€ä¸ª &lt;code&gt;Option&lt;/code&gt; æ¥å£ï¼Œè¯¥æ¥å£ä¿å­˜ä¸€ä¸ªæœªå¯¼å‡ºçš„æ–¹æ³•ï¼Œåœ¨ä¸€ä¸ªæœªå¯¼å‡ºçš„ &lt;code&gt;options&lt;/code&gt; ç»“æ„ä¸Šè®°å½•é€‰é¡¹ã€‚&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;go
type options struct {
  cache  bool
  logger *zap.Logger
}

type Option interface {
  apply(*options)
}

type cacheOption bool

func (c cacheOption) apply(opts *options) {
  opts.cache = bool(c)
}

func WithCache(c bool) Option {
  return cacheOption(c)
}

type loggerOption struct {
  Log *zap.Logger
}

func (l loggerOption) apply(opts *options) {
  opts.logger = l.Log
}

func WithLogger(log *zap.Logger) Option {
  return loggerOption{Log: log}
}

// Open creates a connection.
func Open(
  addr string,
  opts ...Option,
) (*Connection, error) {
  options := options{
    cache:  defaultCache,
    logger: zap.NewNop(),
  }

  for _, o := range opts {
    o.apply(&amp;amp;options)
  }

  // ...
}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;æ³¨æ„: è¿˜æœ‰ä¸€ç§ä½¿ç”¨é—­åŒ…å®ç°è¿™ä¸ªæ¨¡å¼çš„æ–¹æ³•ï¼Œä½†æ˜¯æˆ‘ä»¬ç›¸ä¿¡ä¸Šé¢çš„æ¨¡å¼ä¸ºä½œè€…æä¾›äº†æ›´å¤šçš„çµæ´»æ€§ï¼Œå¹¶ä¸”æ›´å®¹æ˜“å¯¹ç”¨æˆ·è¿›è¡Œè°ƒè¯•å’Œæµ‹è¯•ã€‚ç‰¹åˆ«æ˜¯ï¼Œåœ¨ä¸å¯èƒ½è¿›è¡Œæ¯”è¾ƒçš„æƒ…å†µä¸‹å®ƒå…è®¸åœ¨æµ‹è¯•å’Œæ¨¡æ‹Ÿä¸­å¯¹é€‰é¡¹è¿›è¡Œæ¯”è¾ƒã€‚æ­¤å¤–ï¼Œå®ƒè¿˜å…è®¸é€‰é¡¹å®ç°å…¶ä»–æ¥å£ï¼ŒåŒ…æ‹¬ &lt;code&gt;fmt.Stringer&lt;/code&gt;ï¼Œå…è®¸ç”¨æˆ·è¯»å–é€‰é¡¹çš„å­—ç¬¦ä¸²è¡¨ç¤ºå½¢å¼ã€‚&lt;/p&gt;
&lt;p&gt;è¿˜å¯ä»¥å‚è€ƒä¸‹é¢èµ„æ–™ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;https://commandcenter.blogspot.com/2014/01/self-referential-functions-and-design.html&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Self-referential functions and the design of options&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;https://dave.cheney.net/2014/10/17/functional-options-for-friendly-apis&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Functional options for friendly APIs&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;!-- raw HTML omitted --&gt;
&lt;!-- raw HTML omitted --&gt;
&lt;h2 id=&#34;linting&#34;&gt;Linting&lt;/h2&gt;
&lt;p&gt;æ¯”ä»»ä½• &amp;ldquo;blessed&amp;rdquo; linter é›†æ›´é‡è¦çš„æ˜¯ï¼Œlintåœ¨ä¸€ä¸ªä»£ç åº“ä¸­å§‹ç»ˆä¿æŒä¸€è‡´ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬å»ºè®®è‡³å°‘ä½¿ç”¨ä»¥ä¸‹lintersï¼Œå› ä¸ºæˆ‘è®¤ä¸ºå®ƒä»¬æœ‰åŠ©äºå‘ç°æœ€å¸¸è§çš„é—®é¢˜ï¼Œå¹¶åœ¨ä¸éœ€è¦è§„å®šçš„æƒ…å†µä¸‹ä¸ºä»£ç è´¨é‡å»ºç«‹ä¸€ä¸ªé«˜æ ‡å‡†ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;https://github.com/kisielk/errcheck&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;errcheck&lt;/a&gt; ä»¥ç¡®ä¿é”™è¯¯å¾—åˆ°å¤„ç†&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;https://&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;
goimports&lt;/a&gt; æ ¼å¼åŒ–ä»£ç å’Œç®¡ç† imports&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;[
golint] æŒ‡å‡ºå¸¸è§çš„æ–‡ä½“é”™è¯¯&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;[
govet] åˆ†æä»£ç ä¸­çš„å¸¸è§é”™è¯¯&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;[staticcheck] å„ç§é™æ€åˆ†ææ£€æŸ¥&lt;/p&gt;
&lt;p&gt;godoc.org/
golang.org/x/tools/cmd/
goimports
[
golint]: &lt;a class=&#34;link&#34; href=&#34;https://github.com/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://github.com/&lt;/a&gt;
golang/lint
[
govet]: https://
golang.org/cmd/vet/
[staticcheck]: &lt;a class=&#34;link&#34; href=&#34;https://staticcheck.io/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://staticcheck.io/&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;lint-runners&#34;&gt;Lint Runners&lt;/h3&gt;
&lt;p&gt;æˆ‘ä»¬æ¨è &lt;a class=&#34;link&#34; href=&#34;https://github.com/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;
golangci-lint&lt;/a&gt; ä½œä¸º
go-to lintçš„è¿è¡Œç¨‹åºï¼Œè¿™ä¸»è¦æ˜¯å› ä¸ºå®ƒåœ¨è¾ƒå¤§çš„ä»£ç åº“ä¸­çš„æ€§èƒ½ä»¥åŠèƒ½å¤ŸåŒæ—¶é…ç½®å’Œä½¿ç”¨è®¸å¤šè§„èŒƒã€‚è¿™ä¸ªrepoæœ‰ä¸€ä¸ªç¤ºä¾‹é…ç½®æ–‡ä»¶[.
golangci.yml]å’Œæ¨èçš„linterè®¾ç½®ã€‚&lt;/p&gt;
&lt;p&gt;golangci-lint æœ‰[various-linters]å¯ä¾›ä½¿ç”¨ã€‚å»ºè®®å°†ä¸Šè¿°lintersä½œä¸ºåŸºæœ¬setï¼Œæˆ‘ä»¬é¼“åŠ±å›¢é˜Ÿæ·»åŠ å¯¹ä»–ä»¬çš„é¡¹ç›®æœ‰æ„ä¹‰çš„ä»»ä½•é™„åŠ lintersã€‚&lt;/p&gt;
&lt;p&gt;golangci/
golangci-lint
[.
golangci.yml]: &lt;a class=&#34;link&#34; href=&#34;https://github.com/uber-&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://github.com/uber-&lt;/a&gt;
go/guide/blob/master/.
golangci.yml
[various-linters]: https://
golangci-lint.run/usage/linters/&lt;/p&gt;
&lt;h2 id=&#34;stargazers-over-time&#34;&gt;Stargazers over time&lt;/h2&gt;
&lt;p&gt;[![Stargazers over time](https://starchart.cc/xxjwxc/uber_
go_guide_cn.svg)](&lt;a class=&#34;link&#34; href=&#34;https://starchart.cc/xxjwxc/uber_&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://starchart.cc/xxjwxc/uber_&lt;/a&gt;
go_guide_cn)&lt;/p&gt;
</description>
        </item>
        <item>
        <title>å†…å­˜ç®¡ç†</title>
        <link>https://zcj-git520.github.io/p/%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86/</link>
        <pubDate>Mon, 18 Oct 2021 22:00:38 +0800</pubDate>
        
        <guid>https://zcj-git520.github.io/p/%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86/</guid>
        <description>&lt;img src="https://zcj-git520.github.io/p/%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86/6.png" alt="Featured image of post å†…å­˜ç®¡ç†" /&gt;&lt;h2 id=&#34;è™šæ‹Ÿåœ°å€ç©ºé—´å¸ƒå±€&#34;&gt;è™šæ‹Ÿåœ°å€ç©ºé—´å¸ƒå±€&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;ç¨‹åºé€šè¿‡ç¼–è¯‘æˆä¸ºä¸€å †çš„æœºå™¨æŒ‡ä»¤å†™å…¥å¯æ‰§è¡Œæ–‡ä»¶ï¼Œç¨‹åºåœ¨è¿è¡Œæ˜¯ä¼šå°†å¯æ‰§è¡Œæ–‡ä»¶åŠ è½½åœ¨è®¡ç®—æœºçš„å†…å­˜ä¸­
åœ¨è™šæ‹Ÿåœ°å€ç©ºé—´åˆ†å¸ƒä¸­å¤„äºä»£ç æ®µã€‚&lt;/li&gt;
&lt;li&gt;ç¨‹åºä¸­çš„å±€éƒ¨å˜é‡ã€å‡½æ•°çš„å‚æ•°ã€å‡½æ•°çš„è¿”å›å€¼ç­‰æ•°æ®ä¼šä¿å­˜åœ¨è™šæ‹Ÿåœ°å€çš„æ ˆä¸­(æ ˆæ˜¯å…ˆè¿›åå‡ºçš„æ•°æ®ç»“æ„)
æ ˆç©ºé—´çš„ç¼–è¯‘å™¨åˆ†é…å’Œé‡Šæ”¾ã€‚&lt;/li&gt;
&lt;li&gt;ç¨‹åºçš„å…¨å±€å˜é‡å’Œé™æ€å˜é‡ä¼šä¿å­˜åœ¨è™šæ‹Ÿåœ°å€çš„æ•°æ®æ®µ&lt;/li&gt;
&lt;li&gt;åŠ¨æ€åˆ†é…å†…å­˜çš„åœ°å€ä¼šä¿å­˜åœ¨è™šæ‹Ÿåœ°å€ç©ºé—´çš„å †ä¸Šã€‚å †ç©ºé—´æ˜¯åŠ¨æ€å¼€è¾Ÿçš„å†…å­˜ç©ºé—´ï¼Œéœ€è¦ä¸»åŠ¨å¼€è¾Ÿå’Œé‡Šæ”¾ã€‚æˆ–è€…
è°ƒç”¨GCé‡Šæ”¾  &lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 68; 
			flex-basis: 165px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86/1.png&#34; data-size=&#34;547x795&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86/1.png&#34;
			width=&#34;547&#34;
			height=&#34;795&#34;
			srcset=&#34;https://zcj-git520.github.io/p/%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86/1_hu86f620222550b5f6f6b08ef9da75c8f9_105109_480x0_resize_box_3.png 480w, https://zcj-git520.github.io/p/%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86/1_hu86f620222550b5f6f6b08ef9da75c8f9_105109_1024x0_resize_box_3.png 1024w&#34;
			loading=&#34;lazy&#34;
			&gt;
	&lt;/a&gt;
	
&lt;/figure&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;å †å†…å­˜ç®¡ç†&#34;&gt;å †å†…å­˜ç®¡ç†&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;å †å†…å­˜ç©ºé—´ä¸æ˜¯ç¼–è¯‘å™¨åˆ†é…ï¼Œè€Œæ˜¯æœ‰ç¨‹åºåŠ¨æ€åˆ†é…çš„å†…å­˜ç©ºé—´ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;æ‰‹åŠ¨åƒåœ¾å›æ”¶&#34;&gt;æ‰‹åŠ¨åƒåœ¾å›æ”¶&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;éœ€è¦ç¨‹åºä¸»åŠ¨é‡Šæ”¾æ²¡æœ‰ç”¨çš„æ•°æ®æ‰€åœ¨çš„å †ç©ºé—´ã€‚å¦‚ï¼šc++ä¸­è°ƒç”¨new()å‡½æ•°å‘è®¡ç®—æœºç”³è¯·å¼€è¾Ÿå†…å­˜ç©ºé—´åï¼Œä½¿ç”¨deleteæˆ–delete[]é‡Šæ”¾ä¸éœ€è¦çš„
å †å†…å­˜ç©ºé—´ã€‚è¿™ä¸€ç±»æ˜¯æ‰‹åŠ¨å†…å­˜åˆ†é…å’Œé‡Šæ”¾ã€‚æ‰‹åŠ¨å†…å­˜åˆ†é…ä½¿ç”¨ä¸æ°å½“ä¹Ÿä¼šé€ æˆï¼šå†…å­˜æ³„éœ²
æ‚¬æŒ‚æŒ‡é’ˆçš„é—®é¢˜&lt;/li&gt;
&lt;/ul&gt;
&lt;ol&gt;
&lt;li&gt;è¿‡æ—©é‡Šæ”¾ä¼šé€ æˆæ‚¬æŒ‚æŒ‡é’ˆï¼ˆé‡æŒ‡é’ˆï¼‰ï¼šæå‰é‡Šæ”¾äº†åŠ¨æ€çš„å †å†…å­˜çš„ç©ºé—´ï¼Œå½“ç¨‹åºè®¿é—®è¿™æ®µåœ°å€æ—¶ä¼šæŠ¥é”™ã€‚å› ä¸ºè¿™æ®µæå‰é‡Šæ”¾çš„å†…å­˜ç©ºé—´è¢«æ¸…ç©ºã€
é‡æ–°åˆ†é…æˆ–è€…è¢«æ“ä½œç³»ç»Ÿå›æ”¶ã€‚é‡Šæ”¾æŒ‡é’ˆæ—¶å°†æŒ‡é’ˆèµ‹å€¼ä¸ºNULLï¼Œåœ¨è®¿é—®æ—¶å¯¹æŒ‡é’ˆè¿›è¡Œåˆ¤æ–­æ˜¯å¦ä¸ºNULL&lt;/li&gt;
&lt;li&gt;ä¸é‡Šæ”¾å†…å­˜ä¼šé€ æˆå†…å­˜æ³„æ¼ï¼šå †å†…å­˜éœ€è¦æ‰‹åŠ¨é‡Šæ”¾ï¼Œå½“ç¨‹åºè¿è¡Œç»“æŸä¸é‡Šæ”¾ï¼Œè¿™æ®µå†…å­˜å°±ä¼šè¢«ä¸€ç›´å ç”¨ã€‚å¦‚æœ
ä¸€ç›´åœ¨åˆ†é…ä¸é‡Šæ”¾ä¼šä¸€ç›´å ç”¨è®¡ç®—æœºçš„å†…å­˜ï¼Œç›´åˆ°å†…å­˜è¢«å å®Œã€‚å°†newä¸deleteé…å¥—ä½¿ç”¨ï¼Œä½¿ç”¨å·¥å…·æ£€æµ‹æˆ–è€…æ‰“å°å‡ºå †ä¿¡æ¯&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;è‡ªåŠ¨åƒåœ¾å›æ”¶gc&#34;&gt;è‡ªåŠ¨åƒåœ¾å›æ”¶ï¼ˆGCï¼‰&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;åœ¨ç¨‹åºè¿è¡Œè¿‡ç¨‹ä¸­è‡ªåŠ¨é‡Šæ”¾æ²¡æœ‰ç”¨çš„æ•°æ®æ‰€åœ¨çš„å †ç©ºé—´ï¼ˆåƒåœ¾å›æ”¶).åœ¨è™šæ‹Ÿå†…å­˜ç©ºé—´ä¸­èƒ½ä»æ ˆæˆ–è€…æ•°æ®æ®µçš„æ ¹èŠ‚ç‚¹è¿½è¸ªä¸åˆ°çš„æ•°æ®ä¸ºæ²¡ç”¨çš„æ•°æ®
ï¼ˆå†…å­˜åƒåœ¾ï¼‰ï¼Œå¸¸ç”¨çš„ç®—æ³•ï¼šæ ‡è®°æ³•, è®¡æ•°æ³•&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;æ ‡è®°æ³•å›æ”¶&#34;&gt;æ ‡è®°æ³•å›æ”¶&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;æ ‡è®°æ³•ï¼šå°†æ ˆæˆ–è€…æ•°æ®æ®µä½œä¸ºæ ¹ï¼ˆrootï¼‰è¿›è¡Œè¿½è¸ª,å°†èƒ½è¿½è¸ªå¾—çš„æ•°æ®ï¼ˆå †ç©ºé—´ï¼‰è¿›è¡Œæ ‡è®°ã€‚æ²¡æœ‰è¢«æ ‡è®°çš„æ•°æ®
ï¼ˆå †ç©ºé—´ï¼‰å°±æ˜¯åƒåœ¾ï¼Œå°†è¿™éƒ¨åˆ†åƒåœ¾è¿›è¡Œå›æ”¶ã€‚ä¸‰è‰²æŠ½è±¡ï¼š&lt;/li&gt;
&lt;/ul&gt;
&lt;ol&gt;
&lt;li&gt;åƒåœ¾å›æ”¶å¼€å§‹æ—¶ï¼Œå°†æ‰€æœ‰æ•°æ®ä¸ºç™½è‰²&lt;/li&gt;
&lt;li&gt;åƒåœ¾å›æ”¶å¼€å§‹æ—¶ï¼Œå°†æ‰€æœ‰çš„æ ˆæˆ–è€…æ•°æ®æ®µçš„æ ¹èŠ‚ç‚¹è®¾ç½®ä¸ºç°è‰²&lt;/li&gt;
&lt;li&gt;åœ¨æ ¹æ®æ ¹èŠ‚ç‚¹è¿›è¡Œè¿½è¸ªï¼Œç›´åˆ°æ‰€æœ‰çš„æ•°æ®èŠ‚ç‚¹è¿½è¸ªç»“æŸåå°†æ ¹èŠ‚ç‚¹ç½®ä¸ºé»‘è‰²ï¼Œåœ¨å°†æ ¹èŠ‚ç‚¹çš„ä¸‹ä¸€èŠ‚ç‚¹ä½œä¸ºæ ¹èŠ‚ç‚¹è¿›è¡Œè¿½è¸ª&lt;/li&gt;
&lt;li&gt;æ‰€æœ‰çš„æ•°æ®èŠ‚ç‚¹éƒ½è¿½è¸ªå®Œåï¼Œä¼šå‰©ä¸‹é»‘è‰²å’Œç™½è‰²çš„æ•°æ®èŠ‚ç‚¹ã€‚é»‘è‰²è¡¨ç¤ºæœ‰ç”¨çš„æ•°æ®ã€‚ç™½è‰²ä¸ºæ— ç”¨çš„æ•°æ®ã€‚å°†ç™½è‰²çš„æ•°æ®è¿›è¡Œå›æ”¶ï¼ˆå †ç©ºé—´çš„é‡Šæ”¾ï¼‰
&lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 106; 
			flex-basis: 256px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86/2.png&#34; data-size=&#34;739x692&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86/2.png&#34;
			width=&#34;739&#34;
			height=&#34;692&#34;
			srcset=&#34;https://zcj-git520.github.io/p/%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86/2_hue8f862e9d9f89ba7caf7892b05f14474_215690_480x0_resize_box_3.png 480w, https://zcj-git520.github.io/p/%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86/2_hue8f862e9d9f89ba7caf7892b05f14474_215690_1024x0_resize_box_3.png 1024w&#34;
			loading=&#34;lazy&#34;
			&gt;
	&lt;/a&gt;
	
&lt;/figure&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;ul&gt;
&lt;li&gt;æ ‡è®°æ³•å®ç°ç®€å•ï¼Œä½†æ˜¯ä¼šé€ æˆå†…å­˜çš„ç¢ç‰‡åŒ–(å†…å­˜å—ä¸­æ˜¯å¯ä½¿ç”¨å°å†…å­˜å—ï¼Œé€ æˆå¤§å†…å­˜å—ä¸èƒ½ä½¿ç”¨è¿™å—å†…å­˜ï¼Œè¿™äº›å°å°å†…å­˜å—ä¹Ÿä¸èƒ½ä½¿ç”¨)&lt;/li&gt;
&lt;li&gt;å› ä¸ºå†…å­˜ç¢ç‰‡åŒ–çš„é—®é¢˜è¯ç”Ÿäº†&lt;/li&gt;
&lt;/ul&gt;
&lt;ol&gt;
&lt;li&gt;æ ‡è®°æ•´ç†æ³•ï¼Œå°±æ˜¯æ ‡è®°æ³•ä¹‹åï¼Œå°†æœ‰ç”¨çš„æ•°æ®å †å†…å­˜ç©ºé—´ç§»åŠ¨åœ¨ä¸€èµ·ï¼Œé‡Šæ”¾æ›´å¤šè¿ç»­çš„å †ç©ºé—´,ä½†æ˜¯è¿™ç§åšæ³•å¸¦æ¥
å¾ˆå¤§çš„å¼€é”€ï¼Œå› ä¸ºéœ€è¦ä¸æ–­çš„æ‰«æå†…å­˜å’Œç§»åŠ¨å†…å­˜&lt;/li&gt;
&lt;li&gt;å¤åˆ¶å›æ”¶æ³•ã€‚å°†å †å†…å­˜åˆ†ä¸ºfromå’ŒToä¸¤ä¸ªç›¸åŒçš„å †å†…å­˜ç©ºé—´ã€‚ç¨‹åºæ‰§è¡Œæ—¶ï¼Œä½¿ç”¨fromçš„å †ç©ºé—´ã€‚åƒåœ¾å›æ”¶æ—¶ä¼šæ‰«æfrom
çš„å †å†…å­˜ç©ºé—´ï¼Œå°†æœ‰ç”¨çš„æ•°æ®å¤åˆ¶åˆ°Toçš„å †ç©ºé—´ä¸Šã€‚åƒåœ¾å›æ”¶ç»“æŸæ—¶ï¼Œå°†Toå †ç©ºé—´è®¾ç½®ä¸ºFromå †ç©ºé—´ã€‚å°†åŸæ¥çš„from
å †ç©ºé—´å…¨éƒ¨å›æ”¶åç½®ä¸ºTonå †ç©ºé—´ã€‚ä½†æ˜¯å¤åˆ¶å›æ”¶æ³•åªä¼šä½¿ç”¨ä¸€èˆ¬çš„å †å†…å­˜ç©ºé—´ï¼Œé€ æˆå †å†…å­˜ç©ºé—´åˆ©ç”¨ç‡ä¸é«˜  &lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 190; 
			flex-basis: 456px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86/3.png&#34; data-size=&#34;746x392&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86/3.png&#34;
			width=&#34;746&#34;
			height=&#34;392&#34;
			srcset=&#34;https://zcj-git520.github.io/p/%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86/3_hu871100705c5f0bb9545d50108b3adbcf_40782_480x0_resize_box_3.png 480w, https://zcj-git520.github.io/p/%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86/3_hu871100705c5f0bb9545d50108b3adbcf_40782_1024x0_resize_box_3.png 1024w&#34;
			loading=&#34;lazy&#34;
			&gt;
	&lt;/a&gt;
	
&lt;/figure&gt;&lt;/li&gt;
&lt;li&gt;åˆ†ä»£æ³•å›æ”¶ï¼šå¤§éƒ¨åˆ†å¯¹è±¡éƒ½ä¼šåœ¨å¹´è½»æ—¶å€™æ­»äº¡ï¼ˆå¼±åˆ†ä»£å‡è¯´ï¼‰æŠŠæ–°å»ºçš„å¯¹è±¡ç§°ä¹‹ä¸ºæ–°ç”Ÿä»£å¯¹è±¡ã€‚ç»è¿‡ç‰¹å®šæ¬¡æ•°çš„GC(åƒåœ¾å›æ”¶)æ•°æ®ä¾ç„¶æœ‰ç”¨çš„å¯¹è±¡ç§°ä¸º
è€å¹´ä»£å¯¹è±¡ã€‚è€Œå¤§éƒ¨åˆ†ä¼šåœ¨æ–°ç”Ÿä»£å¯¹è±¡å°±ä¼šåƒåœ¾å›æ”¶äº†ï¼Œåœ¨ç»“åˆå¤åˆ¶å›æ”¶æ³•ä½¿ç”¨  &lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 165; 
			flex-basis: 397px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86/4.png&#34; data-size=&#34;1202x725&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86/4.png&#34;
			width=&#34;1202&#34;
			height=&#34;725&#34;
			srcset=&#34;https://zcj-git520.github.io/p/%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86/4_hude966255b53ebc705801aec78916c5d7_175139_480x0_resize_box_3.png 480w, https://zcj-git520.github.io/p/%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86/4_hude966255b53ebc705801aec78916c5d7_175139_1024x0_resize_box_3.png 1024w&#34;
			loading=&#34;lazy&#34;
			&gt;
	&lt;/a&gt;
	
&lt;/figure&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;h4 id=&#34;è®¡æ•°æ³•å›æ”¶&#34;&gt;è®¡æ•°æ³•å›æ”¶&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;å¼•ç”¨è®¡æ•°æŒ‡çš„æ˜¯å¯¹è±¡è¢«å¼•ç”¨çš„æ¬¡æ•°ï¼Œç¨‹åºåœ¨è¿è¡Œè¿‡ç¨‹ä¸­ä¼šæ›´æ–°å¼•ç”¨æ¬¡æ•°ã€‚å¯¹è±¡å¼•ç”¨è¶Šå¤šï¼Œè®¡æ•°è¶Šå¤§ï¼Œå½“è®¡æ•°ä¸º0æ—¶ï¼Œå›æ”¶è¯¥å¯¹è±¡ï¼ˆå †å†…å­˜ç©ºé—´ï¼‰
å¼•ç”¨è®¡æ•°æ³•å¯ä»¥åœ¨è¿è¡Œä¸­æ›´æ–°å¯¹è±¡çš„è®¡æ•°ï¼Œå¯ä»¥åŠæ—¶åˆ¤æ–­è®¡æ•°ä¸º 0çš„å¯¹è±¡ï¼Œç„¶åå¯¹å…¶åŠæ—¶å›æ”¶ï¼Œ ä½†æ˜¯é¢‘ç¹çš„æ›´æ–°å¼•ç”¨è®¡æ•°ä¹Ÿä¼šå¸¦æ¥èµ„æºæ¶ˆè€—  &lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 103; 
			flex-basis: 248px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86/5.png&#34; data-size=&#34;712x688&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86/5.png&#34;
			width=&#34;712&#34;
			height=&#34;688&#34;
			srcset=&#34;https://zcj-git520.github.io/p/%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86/5_hu5f49777c171d0884056300bcd3c13161_71471_480x0_resize_box_3.png 480w, https://zcj-git520.github.io/p/%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86/5_hu5f49777c171d0884056300bcd3c13161_71471_1024x0_resize_box_3.png 1024w&#34;
			loading=&#34;lazy&#34;
			&gt;
	&lt;/a&gt;
	
&lt;/figure&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;åƒåœ¾å›æ”¶æ¨¡å¼&#34;&gt;åƒåœ¾å›æ”¶æ¨¡å¼&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;å¢é‡å¼çš„åƒåœ¾å›æ”¶æ¨¡å¼ï¼šSWTæ˜¯ç”¨æˆ·æ‰¿ç¨‹åºåœä¸‹å·¥ä½œå¤„ç†åƒåœ¾å›æ”¶ï¼Œä½†æ˜¯ä¸ºäº†æé«˜cpuæ‰§è¡Œæ•ˆç‡ï¼Œä¼šå‡å°‘SWTçš„æ—¶é—´ï¼Œç»åƒåœ¾å›æ”¶å·¥ä½œåˆ†å¤šæ¬¡è¿›è¡Œï¼ˆç”¨æˆ·ç¨‹åºä¸åƒåœ¾å›æ”¶äº¤æ›¿æ‰§è¡Œï¼‰&lt;/li&gt;
&lt;li&gt;ä¸‰è‰²ä¸å˜å¼ï¼šåœ¨å¢é‡å¼åƒåœ¾å›æ”¶æ¨¡å¼åœ¨è¿›è¡Œåƒåœ¾å›æ”¶æ—¶ï¼Œä¼šé€ æˆç”¨æˆ·ç¨‹åºå¯¹æ ‡è‰²çš„æ•°æ®è¿›è¡Œæ›´æ”¹ï¼Œå½“åœ¨æ¬¡æ‰§è¡Œåƒåœ¾å›æ”¶æ—¶ï¼Œå¯èƒ½ä¼šå°†æœ‰ç”¨çš„æ•°æ®å½“ä½œåƒåœ¾å›æ”¶äº†ï¼Œåœ¨æ ‡è‰²æ³•ä¸­ï¼Œå½“é»‘è‰²æ•°æ®èŠ‚ç‚¹å¯ä»¥å¼•ç”¨ç™½è‰²çš„æ•°æ®èŠ‚ç‚¹ï¼Œä½†æ˜¯æ²¡æœ‰ç°è‰²èŠ‚ç‚¹èƒ½å¼•ç”¨è¿™ä¸ªç™½è‰²èŠ‚ç‚¹ï¼Œç™½è‰²æ•°æ®èŠ‚ç‚¹å°±è¢«å½“ä½œåƒåœ¾è¢«å›æ”¶
é¿å…è¿™æ ·çš„å‘ç”Ÿï¼Œåœ¨åƒåœ¾å›æ”¶æ—¶å»ºç«‹è¯»å†™å±éšœã€‚åœ¨ä¸‰è‰²ä¸­ç¡®ä¿é»‘è‰²çš„æ•°æ®èŠ‚ç‚¹ä¸å¼•ç”¨ç™½è‰²çš„æ•°æ®èŠ‚ç‚¹ï¼Œå°±ä¸ä¼šè¯¯åˆ¤æœ‰ç”¨çš„æ•°æ®å½“ä½œåƒåœ¾å›æ”¶äº†ï¼Œè¿™ç§å«åšï¼šå¼ºä¸‰è‰²ä¸å˜å¼
å¦‚æœå½“é»‘è‰²çš„æ•°æ®èŠ‚ç‚¹èƒ½å¼•ç”¨ç™½è‰²æ•°æ®èŠ‚ç‚¹ï¼ŒåŒæ—¶ç¡®ä¿å›æ”¶èŠ‚ç‚¹ä¹Ÿèƒ½å¼•ç”¨ç™½è‰²èŠ‚ç‚¹ï¼Œä¹Ÿèƒ½é¿å…æœ‰ç”¨çš„æ•°æ®è¢«å½“ä½œåƒåœ¾å›æ”¶ï¼Œè¿™å«ï¼šå¼±ä¸‰è‰²ä¸å˜å¼  &lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 177; 
			flex-basis: 425px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86/6.png&#34; data-size=&#34;1302x734&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86/6.png&#34;
			width=&#34;1302&#34;
			height=&#34;734&#34;
			srcset=&#34;https://zcj-git520.github.io/p/%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86/6_hu61bd622d583377d86db238f2ea3bdaa9_262966_480x0_resize_box_3.png 480w, https://zcj-git520.github.io/p/%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86/6_hu61bd622d583377d86db238f2ea3bdaa9_262966_1024x0_resize_box_3.png 1024w&#34;
			loading=&#34;lazy&#34;
			&gt;
	&lt;/a&gt;
	
&lt;/figure&gt;&lt;/li&gt;
&lt;li&gt;å¹¶è¡Œåƒåœ¾å›æ”¶ï¼šåœ¨å¤šæ ¸ä¸‹ï¼Œä½¿ç”¨å¤šçº¿ç¨‹å¯¹åƒåœ¾å›æ”¶ï¼Œéœ€è¦åšå¥½çš„è´Ÿè½½å‡è¡¡å’Œè§„é¿æ•°é‡å¤å¤„ç†å¸¦æ¥çš„é—®é¢˜ï¼Œå¦‚åœ¨å¤åˆ¶å›æ”¶ä¸­ï¼Œå¯èƒ½å°†åŒæ ·çš„æ•°æ®ä»fromå¤åˆ¶åˆ°to&lt;/li&gt;
&lt;li&gt;å¹¶å‘åƒåœ¾å›æ”¶ï¼šåƒåœ¾å›æ”¶ä¸ç”¨æˆ·ç¨‹åºå¹¶å‘æ‰§è¡Œï¼Œå¯èƒ½ä¼šé€ æˆåƒåœ¾å›æ”¶ä¸ç”¨æˆ·ç¨‹åºçš„èµ„æºç«äº‰ç­‰é—®é¢˜ç­‰&lt;/li&gt;
&lt;li&gt;ä¸»ä½“å¹¶å‘å›æ”¶ï¼šåœ¨æ—¶åˆ»ä½¿ç”¨swtå›æ”¶ï¼Œåœ¨è«æ—¶åˆ»åˆä½¿ç”¨å¹¶å‘åƒåœ¾å›æ”¶&lt;/li&gt;
&lt;li&gt;ä¸»ä½“å¹¶å‘å¢é‡å¼å›æ”¶: æ˜¯èåˆäº†å¢é‡å¼çš„åƒåœ¾å›æ”¶æ¨¡å¼å’Œä¸»ä½“å¹¶å‘å›æ”¶æ¨¡å¼  &lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 67; 
			flex-basis: 161px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86/7.png&#34; data-size=&#34;549x817&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86/7.png&#34;
			width=&#34;549&#34;
			height=&#34;817&#34;
			srcset=&#34;https://zcj-git520.github.io/p/%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86/7_hu9a89830b3bbfb2c96296aa9cbf536ee0_141902_480x0_resize_box_3.png 480w, https://zcj-git520.github.io/p/%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86/7_hu9a89830b3bbfb2c96296aa9cbf536ee0_141902_1024x0_resize_box_3.png 1024w&#34;
			loading=&#34;lazy&#34;
			&gt;
	&lt;/a&gt;
	
&lt;/figure&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;å†…å­˜é€ƒé€¸&#34;&gt;å†…å­˜é€ƒé€¸&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;æ‚¬æŒ‚æŒ‡é’ˆï¼šå› å†…å­˜å›æ”¶é”™è¯¯å¯¼è‡´
&lt;ul&gt;
&lt;li&gt;ä¾‹å¦‚ï¼šint *suspend_pointer{int i= 2; return &amp;amp;i;}&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;å†…å­˜é€ƒé€¸åˆ†æï¼šç¨‹åºåœ¨ç¼–è¯‘é˜¶æ®µæ ¹æ®ä»£ç ä¸­çš„æ•°æ®æµï¼Œå¯¹ä»£ç ä¸­çš„é‚£äº›å˜é‡éœ€è¦åœ¨æ ˆä¸­åˆ†é…
é‚£äº›åœ¨å †ä¸Šåˆ†é…è¿›è¡Œé™æ€åˆ†é…çš„æ–¹æ³•&lt;/li&gt;
&lt;li&gt;é€ƒé€¸åˆ†æçš„ä¸¤ä¸ªåŸåˆ™ï¼š
&lt;ul&gt;
&lt;li&gt;æŒ‡å‘æ ˆå¯¹è±¡çš„æŒ‡é’ˆä¸èƒ½å­˜æ´»åœ¨å †ä¸­&lt;/li&gt;
&lt;li&gt;æŒ‡å‘æ ˆå¯¹è±¡çš„æŒ‡é’ˆä¸èƒ½åœ¨æ ˆå¯¹è±¡å›æ”¶åå­˜æ´»&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;å‚è€ƒæ–‡çŒ®&#34;&gt;å‚è€ƒæ–‡çŒ®&lt;/h2&gt;
&lt;p&gt;1.&lt;a class=&#34;link&#34; href=&#34;https://www.zhihu.com/people/kylin-lab&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://www.zhihu.com/people/kylin-lab&lt;/a&gt;&lt;/p&gt;
</description>
        </item>
        <item>
        <title>Go Channelçš„æ·±å…¥ç†è§£</title>
        <link>https://zcj-git520.github.io/p/go-channel%E7%9A%84%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3/</link>
        <pubDate>Fri, 15 Oct 2021 22:00:38 +0800</pubDate>
        
        <guid>https://zcj-git520.github.io/p/go-channel%E7%9A%84%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3/</guid>
        <description>&lt;img src="https://zcj-git520.github.io/p/go-channel%E7%9A%84%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3/3.png" alt="Featured image of post Go Channelçš„æ·±å…¥ç†è§£" /&gt;&lt;h1 id=&#34;go-channel&#34;&gt;go Channel&lt;/h1&gt;
&lt;ul&gt;
&lt;li&gt;ï¼ˆ&lt;strong&gt;Do not communicate by sharing memory; instead, share memory by communicating&lt;/strong&gt;ï¼‰&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;cspå¹¶å‘æ¨¡å‹&#34;&gt;CSPå¹¶å‘æ¨¡å‹&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;CSP&lt;/strong&gt; å³&lt;strong&gt;é€šä¿¡é¡ºåºè¿›ç¨‹&lt;/strong&gt;ã€&lt;strong&gt;äº¤è°ˆå¾ªåºç¨‹åº&lt;/strong&gt;ï¼Œåˆè¢«è¯‘ä¸º&lt;strong&gt;äº¤æ¢æ¶ˆæ¯çš„å¾ªåºç¨‹åº&lt;/strong&gt;(communicating sequential processes)ï¼Œå®ƒæ˜¯ä¸€ç§ç”¨æ¥æè¿°å¹¶å‘æ€§ç³»ç»Ÿä¹‹é—´è¿›è¡Œäº¤äº’çš„æ¨¡å‹ã€‚&lt;/li&gt;
&lt;li&gt;go  Channeæ˜¯ä¸€ç§ç‰¹æ®Šçš„ç±»å‹ï¼Œæ˜¯æœ‰ç‰¹å®šç±»å‹çš„é˜Ÿåˆ—ã€‚æ˜¯é“¾æ¥goroutine(åç¨‹)çš„é€šä¿¡æœºåˆ¶ï¼Œé€šè¿‡é€šä¿¡å…±äº«å†…å­˜è€Œä¸æ˜¯é€šè¿‡å…±äº«å†…å­˜è€Œå®ç°é€šä¿¡.&lt;/li&gt;
&lt;li&gt;Channel æ”¶å‘æ“ä½œå‡éµå¾ªäº†å…ˆè¿›å…ˆå‡ºçš„è®¾è®¡ï¼Œå…·ä½“è§„åˆ™å¦‚ä¸‹ï¼š
&lt;ol&gt;
&lt;li&gt;å…ˆä» Channel è¯»å–æ•°æ®çš„ Goroutine ä¼šå…ˆæ¥æ”¶åˆ°æ•°æ®ï¼›&lt;/li&gt;
&lt;li&gt;å…ˆå‘ Channel å‘é€æ•°æ®çš„ Goroutine ä¼šå¾—åˆ°å…ˆå‘é€æ•°æ®çš„æƒåˆ©ï¼›&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 324; 
			flex-basis: 779px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/go-channel%E7%9A%84%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3/1.png&#34; data-size=&#34;646x199&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/go-channel%E7%9A%84%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3/1.png&#34;
			width=&#34;646&#34;
			height=&#34;199&#34;
			srcset=&#34;https://zcj-git520.github.io/p/go-channel%E7%9A%84%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3/1_hu9f71752e01ad0714d9e001d394dc9e2e_27512_480x0_resize_box_3.png 480w, https://zcj-git520.github.io/p/go-channel%E7%9A%84%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3/1_hu9f71752e01ad0714d9e001d394dc9e2e_27512_1024x0_resize_box_3.png 1024w&#34;
			loading=&#34;lazy&#34;
			&gt;
	&lt;/a&gt;
	
&lt;/figure&gt;&lt;/p&gt;
&lt;h2 id=&#34;channel-æ•°æ®ç»“æ„å®šä¹‰&#34;&gt;channel æ•°æ®ç»“æ„å®šä¹‰ï¼š&lt;/h2&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;type hchan struct {
	// é˜Ÿåˆ—ä¸­å­˜å‚¨çš„æ•°é‡
	qcount   uint           // total data in the queue
	//ç¯å½¢é˜Ÿåˆ—çš„å¤§å°(æœ€å¤§å­˜å‚¨æ•°é‡ )
	dataqsiz uint           // size of the circular queue
	// å­˜æ”¾ç¯å½¢é˜Ÿåˆ—çš„æ•°æ®ï¼Œæ•°ç»„
	buf      unsafe.Pointer // points to an array of dataqsiz elements
	// å…ƒç´ çš„å¤§å°
	elemsize uint16
	// æ˜¯å¦å…³é—­çš„æ ‡è¯†
	closed   uint32
	// å…ƒç´ çš„ç±»å‹(æŒ‡å‘ç±»å‹çš„å…ƒæ•°æ® )
	elemtype *_type // element type
	// å½“å‰å‘é€æ•°æ®åœ¨ç¯å½¢é˜Ÿåˆ—çš„ç´¢å¼•
	sendx    uint   // send index
	// å½“å‰æ¥å—æ•°æ®åœ¨ç¯å½¢é˜Ÿåˆ—çš„ç´¢å¼• 
	recvx    uint   // receive index
	// æ¥æ”¶è€…ç­‰å¾…é˜Ÿåˆ—ï¼ˆ&amp;lt;-chï¼‰é˜»å¡åœ¨channelçš„åç¨‹é˜Ÿåˆ—
	recvq    waitq  // list of recv waiters
	// å‘é€è€…ç­‰å¾…é˜Ÿåˆ—ï¼ˆch&amp;lt;- dataï¼‰é˜»å¡åœ¨channelçš„åç¨‹é˜Ÿåˆ—
	sendq    waitq  // list of send waiters
	//é”ä¿æŠ¤hchanä¸­çš„æ‰€æœ‰å­—æ®µï¼Œä»¥åŠå‡ ä¸ª
	//åœ¨è¿™ä¸ªé€šé“ä¸Šé˜»å¡sudogsä¸­çš„å­—æ®µ
	//ä¿æŒè¿™ä¸ªé”æ—¶ä¸è¦æ”¹å˜å¦ä¸€ä¸ªGçš„çŠ¶æ€
	//(ç‰¹åˆ«æ˜¯ï¼Œä¸è¦å‡†å¤‡ä¸€ä¸ªG)ï¼Œå› ä¸ºè¿™å¯èƒ½ä¼šæ­»é”
	//æ ˆæ”¶ç¼©ã€‚
	lock mutex  // ä¿æŠ¤hchanä¸­çš„æ‰€æœ‰å­—æ®µï¼Œä¿æŒåç¨‹çš„çŠ¶æ€ä¸è¢«æ›´æ”¹ï¼Œé¿å…é€ æˆæ ˆæ”¶ç¼©å¼•èµ·çš„æ­»é”ï¼Œä½¿ç”¨äº’æ–¥é”è§£å†³ç¨‹åºä¸­å¯èƒ½å­˜åœ¨çš„çº¿ç¨‹ç«äº‰é—®é¢˜æ˜¯å¾ˆå¸¸è§çš„
}
&lt;/code&gt;&lt;/pre&gt;&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;å‘é€è€…/æ¥æ”¶è€…ç­‰å¾…é˜Ÿåˆ—çš„ç»“æ„ï¼šä¸€ä¸ªåŒå‘é“¾è¡¨
type waitq struct {
	first *sudog
	last  *sudog
}
&lt;/code&gt;&lt;/pre&gt;&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;channel  sudog(ç­‰å¾…é˜Ÿåˆ—)ç»“æ„å¦‚ä¸‹
type sudog struct {
	// The following fields are protected by the hchan.lock of the
	// channel this sudog is blocking on. shrinkstack depends on
	// this for sudogs involved in channel ops.
	//ä»¥ä¸‹å­—æ®µå—hchanä¿æŠ¤ã€‚é”çš„
  	//è¿™ä¸ªsudogæ­£åœ¨é˜»å¡ã€‚shrinkstackå–å†³äº
	//è¿™æ˜¯ä¸ºæ¶‰åŠé€šé“æ“ä½œçš„sudogsã€‚

	g *g  // ç­‰å¾…çš„åç¨‹åç¨‹
	next *sudog
	prev *sudog
	// æ•°æ®å…ƒç´ (å¯ä»¥æŒ‡å‘å †æ ˆ)ï¼Œç­‰å¾…å‘é€/æ¥æ”¶çš„æ•°æ®
	elem unsafe.Pointer // data element (may point to stack)

	// The following fields are never accessed concurrently.
	// For channels, waitlink is only accessed by g.
	// For semaphores, all fields (including the ones above)
	// are only accessed when holding a semaRoot lock.
	//ä¸‹é¢çš„å­—æ®µæ°¸è¿œä¸ä¼šå¹¶å‘è®¿é—®ã€‚
   	//å¯¹äºé€šé“ï¼Œwaitlinkåªè¢«gè®¿é—®ã€‚
	//å¯¹äºä¿¡å·é‡ï¼Œæ‰€æœ‰çš„å­—æ®µ(åŒ…æ‹¬ä¸Šé¢çš„å­—æ®µ)
	//åªåœ¨æŒæœ‰semaRooté”æ—¶è®¿é—®ã€‚
	acquiretime int64
	releasetime int64
	ticket      uint32

	// isSelect indicates g is participating in a select, so
	// g.selectDone must be CAS&#39;d to win the wake-up race.
	// è¡¨ç¤ºgè¢«é€‰æ‹©
	isSelect bool

	// success indicates whether communication over channel c
	// succeeded. It is true if the goroutine was awoken because a
	// value was delivered over channel c, and false if awoken
	// because c was closed.
	//æˆåŠŸè¡¨ç¤ºæ˜¯å¦é€šè¿‡é€šé“cé€šä¿¡
	// æˆåŠŸäº†ã€‚ å¦‚æœ goroutine è¢«å”¤é†’æ˜¯å› ä¸ºä¸€ä¸ª
	// å€¼é€šè¿‡é€šé“ c ä¼ é€’ï¼Œå¦‚æœè¢«å”¤é†’åˆ™è¿”å› false
	// å› ä¸º c è¢«å…³é—­äº†
	success bool  // c å› å…³é—­è€Œå”¤é†’

	parent   *sudog // semaRoot binary tree
	waitlink *sudog // g.waiting list or semaRoot
	waittail *sudog // semaRoot
    // ç­‰å¾…çš„channelè¢«å”¤é†’
	c        *hchan // channel
}
&lt;/code&gt;&lt;/pre&gt;&lt;ul&gt;
&lt;li&gt;ç»“æ„å¦‚å›¾æ‰€ç¤º
&lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 188; 
			flex-basis: 451px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/go-channel%E7%9A%84%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3/3.png&#34; data-size=&#34;1618x860&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/go-channel%E7%9A%84%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3/3.png&#34;
			width=&#34;1618&#34;
			height=&#34;860&#34;
			srcset=&#34;https://zcj-git520.github.io/p/go-channel%E7%9A%84%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3/3_huc32f323c0433538c753e80bb5a9a01bb_276268_480x0_resize_box_3.png 480w, https://zcj-git520.github.io/p/go-channel%E7%9A%84%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3/3_huc32f323c0433538c753e80bb5a9a01bb_276268_1024x0_resize_box_3.png 1024w&#34;
			loading=&#34;lazy&#34;
			&gt;
	&lt;/a&gt;
	
&lt;/figure&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;channel-åˆ›å»º&#34;&gt;channel åˆ›å»º&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;channel å’Œ åˆ‡ç‰‡ã€mapä¸€æ ·ï¼Œéœ€è¦ä½¿ç”¨make(chan type, int )æ‰èƒ½ä½¿ç”¨,åº”ä¸ºmake()ä¼šè°ƒç”¨makeChan()åˆå§‹åŒ–&lt;/li&gt;
&lt;/ul&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;makechå‡½æ•°æºç å¦‚ä¸‹:
// å‚æ•°ç±»å‹ï¼šåˆ›å»ºchançš„ç±»å‹å’Œç¯å‹ç¼“å†²åŒºçš„æ•°é‡
func makechan(t *chantype, size int) *hchan {
	elem := t.elem

	// compiler checks this but be safe.
	if elem.size &amp;gt;= 1&amp;lt;&amp;lt;16 {
		throw(&amp;quot;makechan: invalid channel element type&amp;quot;)
	}
	if hchanSize%maxAlign != 0 || elem.align &amp;gt; maxAlign {
		throw(&amp;quot;makechan: bad alignment&amp;quot;)
	}
	//åˆ¤æ–­ç¯å‹ç¼“å†²åŒºæ˜¯å¦æº¢å‡º
	mem, overflow := math.MulUintptr(elem.size, uintptr(size))
	if overflow || mem &amp;gt; maxAlloc-hchanSize || size &amp;lt; 0 {
		panic(plainError(&amp;quot;makechan: size out of range&amp;quot;))
	}

	// Hchan does not contain pointers interesting for GC when elements stored in buf do not contain pointers.
	// buf points into the same allocation, elemtype is persistent.
	// SudoG&#39;s are referenced from their owning thread so they can&#39;t be collected.
	// TODO(dvyukov,rlh): Rethink when collector can move allocated objects.
	var c *hchan
	switch {
	case mem == 0:
		// Queue or element size is zero.
		// å½“é˜Ÿåˆ—æˆ–è€…å…ƒç´ å¤§å°ä¸º0æ—¶ï¼Œå®šä¹‰æ— ç¼“å†²chanï¼ˆåŒæ­¥chanï¼‰
		c = (*hchan)(mallocgc(hchanSize, nil, true))
		// Race detector uses this location for synchronization.
        // Race ç«äº‰æ£€æŸ¥åˆ©ç”¨è¿™ä¸ªåœ°å€æ¥è¿›è¡ŒåŒæ­¥æ“ä½œ
		c.buf = c.raceaddr()
	case elem.ptrdata == 0:
		// Elements do not contain pointers.
		// Allocate hchan and buf in one call.
        // å…ƒç´ ä¸åŒ…å«æŒ‡é’ˆæ—¶ã€‚ä¸€æ¬¡åˆ†é… hchan å’Œ buf çš„å†…å­˜ã€‚
		c = (*hchan)(mallocgc(hchanSize+mem, nil, true))
		c.buf = add(unsafe.Pointer(c), hchanSize)
	default:
		// Elements contain pointers.
        // å®šä¹‰å¸¦ç¼“å­˜çš„chanæˆ–è€…å¼‚æ­¥çš„chan
		c = new(hchan)
		c.buf = mallocgc(mem, elem, true)
	}

	c.elemsize = uint16(elem.size)  // chanå…ƒç´ çš„å¤§å°
	c.elemtype = elem               // chanå…ƒç´ çš„ç±»å‹
	c.dataqsiz = uint(size)        //  chanç¼“å­˜åŒºå¤§å°
	lockInit(&amp;amp;c.lock, lockRankHchan)  //åˆå§‹åŒ–äº’æ–¥é”

	if debugChan {
		print(&amp;quot;makechan: chan=&amp;quot;, c, &amp;quot;; elemsize=&amp;quot;, elem.size, &amp;quot;; dataqsiz=&amp;quot;, size, &amp;quot;\n&amp;quot;)
	}
	return c
}
&lt;/code&gt;&lt;/pre&gt;&lt;ul&gt;
&lt;li&gt;channelåˆ›å»ºè¿‡ç¨‹ï¼š&lt;/li&gt;
&lt;/ul&gt;
&lt;ol&gt;
&lt;li&gt;ç¼–è¯‘æ£€æŸ¥ã€ç¼“å†²åŒºå¤§å°æ£€æŸ¥ï¼Œåˆ¤æ–­æ˜¯å¦æº¢å‡º&lt;/li&gt;
&lt;li&gt;åˆ¤æ–­chançš„ç±»å‹&lt;br&gt;
1ã€å½“åˆ›å»ºæ— ç¼“å†²chanæ—¶,è°ƒç”¨mallocgc()åœ¨å †ä¸Šä¸ºchanå¼€è¾ŸhchanSizeçš„bufç¼“å­˜å†…å­˜ç©ºé—´&lt;br&gt;
2ã€åˆ›å»ºå¸¦ç¼“å†²çš„chanæ—¶,åˆ¤æ–­å…ƒç´ çš„ç±»å‹æ˜¯å¦ä¸ºæŒ‡é’ˆç±»å‹ï¼Œè‹¥ä¸æ˜¯ï¼Œåˆ™mallocgc()åœ¨å †ä¸Šä¸ºchanå’Œbufç¼“å†²åŒºæ•°ç»„å¼€è¾Ÿä¸€æ®µå¤§å°ä¸º hchanSize+memè¿ç»­çš„å†…å­˜ç©ºé—´ã€‚è‹¥æ˜¯åˆ™è°ƒç”¨mallocgc()åœ¨å †ä¸Šåˆ†åˆ«ä¸ºchanå’Œbufç¼“å†²åŒºåˆ†é…è¿ç»­å†…å­˜ç©ºé—´ã€‚
&lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 187; 
			flex-basis: 450px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/go-channel%E7%9A%84%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3/4.png&#34; data-size=&#34;1601x852&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/go-channel%E7%9A%84%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3/4.png&#34;
			width=&#34;1601&#34;
			height=&#34;852&#34;
			srcset=&#34;https://zcj-git520.github.io/p/go-channel%E7%9A%84%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3/4_hua8215d19cb3bccd8709e0a6c6f7245c2_228324_480x0_resize_box_3.png 480w, https://zcj-git520.github.io/p/go-channel%E7%9A%84%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3/4_hua8215d19cb3bccd8709e0a6c6f7245c2_228324_1024x0_resize_box_3.png 1024w&#34;
			loading=&#34;lazy&#34;
			&gt;
	&lt;/a&gt;
	
&lt;/figure&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&#34;channel-å‘é€æ•°æ®ä¸æ¥æ”¶æ•°æ®&#34;&gt;channel å‘é€æ•°æ®ä¸æ¥æ”¶æ•°æ®&lt;/h2&gt;
&lt;h3 id=&#34;channel-å‘é€æ•°æ®&#34;&gt;channel å‘é€æ•°æ®&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;chan &amp;lt;- data&lt;/li&gt;
&lt;/ul&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;chanå‘é€æ•°æ®æºç å¦‚ä¸‹:
func chansend(c *hchan, ep unsafe.Pointer, block bool, callerpc uintptr) bool {
    // åˆ¤æ–­chanæ˜¯å¦è¢«åˆå§‹åŒ–ï¼Œå‘chanä¸ºnilçš„chanå‘é€æ•°æ®å°†ä¼šæ°¸ä¹…é˜»å¡
	if c == nil {
		if !block {
			return false
		}
        // ä½¿å½“å‰çš„groutineä¼‘çœ 
		gopark(nil, nil, waitReasonChanSendNilChan, traceEvGoStop, 2)
		throw(&amp;quot;unreachable&amp;quot;)
	}

	if debugChan {
		print(&amp;quot;chansend: chan=&amp;quot;, c, &amp;quot;\n&amp;quot;)
	}
     // æ£€æŸ¥åœ¨æ²¡æœ‰è·å–é”çš„æƒ…å†µä¸‹ä¼šå¯¼è‡´å‘é€å¤±è´¥çš„éé˜»å¡æ“ä½œ
	if raceenabled {
		racereadpc(c.raceaddr(), callerpc, funcPC(chansend))
	}

	// Fast path: check for failed non-blocking operation without acquiring the lock.
	//
	// After observing that the channel is not closed, we observe that the channel is
	// not ready for sending. Each of these observations is a single word-sized read
	// (first c.closed and second full()).
	// Because a closed channel cannot transition from &#39;ready for sending&#39; to
	// &#39;not ready for sending&#39;, even if the channel is closed between the two observations,
	// they imply a moment between the two when the channel was both not yet closed
	// and not ready for sending. We behave as if we observed the channel at that moment,
	// and report that the send cannot proceed.
	//
	// It is okay if the reads are reordered here: if we observe that the channel is not
	// ready for sending and then observe that it is not closed, that implies that the
	// channel wasn&#39;t closed during the first observation. However, nothing here
	// guarantees forward progress. We rely on the side effects of lock release in
	// chanrecv() and closechan() to update this thread&#39;s view of c.closed and full().
	if !block &amp;amp;&amp;amp; c.closed == 0 &amp;amp;&amp;amp; full(c) {
		return false
	}

	var t0 int64
	if blockprofilerate &amp;gt; 0 {
		t0 = cputicks()
	}
    // è·å¾—åŒæ­¥é”
	lock(&amp;amp;c.lock)
    // å½“chanå…³é—­æ—¶,é‡Šæ”¾é”ï¼Œå¹¶panic
    // å‘ä¹Ÿå…³é—­çš„chanå‘é€æ¶ˆæ¯,ä¼šå¼•å‘panic
	if c.closed != 0 {
		unlock(&amp;amp;c.lock)
		panic(plainError(&amp;quot;send on closed channel&amp;quot;))
	}
    // å¦‚æœæ¥æ”¶é˜Ÿåˆ—ä¸­æœ‰ç­‰å¾…çš„æ¥æ”¶è€…ï¼Œç›´æ¥å‘é€ç»™æ¥æ”¶è€…ï¼ˆæœ‰ç¼“å­˜åŒºæ—¶ï¼Œä¼šç»•è¿‡ç¼“å­˜åŒºï¼‰
	if sg := c.recvq.dequeue(); sg != nil {
		// Found a waiting receiver. We pass the value we want to send
		// directly to the receiver, bypassing the channel buffer (if any).
		send(c, sg, ep, func() { unlock(&amp;amp;c.lock) }, 3)
		return true
	}

	if c.qcount &amp;lt; c.dataqsiz {
        // æ²¡æœ‰æ¥æ”¶è€…ï¼Œå½“æœ‰ç¼“å­˜åŒºæ—¶ï¼Œå°†è¦å‘é€çš„å…ƒç´ æ”¾å…¥é˜Ÿåˆ—ä¸­
		// Space is available in the channel buffer. Enqueue the element to send.
		qp := chanbuf(c, c.sendx)  // è·å–ç¼“å­˜åœ°å€
		if raceenabled {
			racenotify(c, c.sendx, nil)
		}
		typedmemmove(c.elemtype, qp, ep)
		c.sendx++ // æŒ‡å‘ä¸‹ä¸€ä¸ªå­˜å‚¨çš„ä½ç½®
		if c.sendx == c.dataqsiz {
			c.sendx = 0
		}
		c.qcount++ // ç¼“å­˜æ•°é‡ç›¸åŠ 
		unlock(&amp;amp;c.lock)
		return true
	}

	if !block {
		unlock(&amp;amp;c.lock)
		return false
	}
    // ç¼“å­˜åŒºæ»¡äº†ï¼Œå°†å½“å‰å‘é€åç¨‹åŠ å…¥åˆ°ç­‰å¾…sendé˜Ÿåˆ—
	// Block on the channel. Some receiver will complete our operation for us.
	gp := getg() // è·å–å½“å‰çš„gå‘é€åç¨‹
	mysg := acquireSudog()// åˆ›å»ºsudogç­‰å¾…é˜Ÿåˆ—
	mysg.releasetime = 0
	if t0 != 0 {
		mysg.releasetime = -1
	}
	// No stack splits between assigning elem and enqueuing mysg
	// on gp.waiting where copystack can find it.
	mysg.elem = ep
	mysg.waitlink = nil
    // æŠŠå½“å‰çš„å‘é€åç¨‹ä¸ç­‰å¾…é˜Ÿåˆ—ç»‘å®š
	mysg.g = gp 
	mysg.isSelect = false
	mysg.c = c
	gp.waiting = mysg
	gp.param = nil
    // åŠ å…¥åˆ°å‘é€ç­‰å¾…é˜Ÿåˆ—ä¸­
	c.sendq.enqueue(mysg)
	// Signal to anyone trying to shrink our stack that we&#39;re about
	// to park on a channel. The window between when this G&#39;s status
	// changes and when we set gp.activeStackChans is not safe for
	// stack shrinking.
	atomic.Store8(&amp;amp;gp.parkingOnChan, 1)
	gopark(chanparkcommit, unsafe.Pointer(&amp;amp;c.lock), waitReasonChanSend, traceEvGoBlockSend, 2)
	// Ensure the value being sent is kept alive until the
	// receiver copies it out. The sudog has a pointer to the
	// stack object, but sudogs aren&#39;t considered as roots of the
	// stack tracer.
	KeepAlive(ep)

	// someone woke us up.
    // å‘é€åç¨‹è¢«å”¤é†’ï¼Œè§£é™¤ç­‰å¾…é˜Ÿåˆ—çš„é˜»å¡çŠ¶æ€
    // åˆ¤æ–­çš„ç­‰å¾…é˜Ÿåˆ—æ˜¯å¦åœ¨ä¼‘çœ 
	if mysg != gp.waiting {
		throw(&amp;quot;G waiting list is corrupted&amp;quot;)
	}
	gp.waiting = nil
	gp.activeStackChans = false
	closed := !mysg.success
	gp.param = nil
	if mysg.releasetime &amp;gt; 0 {
		blockevent(mysg.releasetime-t0, 2)
	}
	mysg.c = nil
	releaseSudog(mysg) // é‡Šæ”¾ç­‰å¾…é˜Ÿåˆ—
	if closed {
		if c.closed == 0 {
			throw(&amp;quot;chansend: spurious wakeup&amp;quot;)
		}
		panic(plainError(&amp;quot;send on closed channel&amp;quot;))
	}
	return true
}
&lt;/code&gt;&lt;/pre&gt;&lt;ul&gt;
&lt;li&gt;channel å‘é€æ•°æ®æ€»ç»“&lt;/li&gt;
&lt;/ul&gt;
&lt;ol&gt;
&lt;li&gt;åˆ¤æ–­chanæ˜¯å¦è¢«åˆå§‹åŒ–ï¼Œå‘chanä¸ºnilçš„chanå‘é€æ•°æ®å°†ä¼šæ°¸ä¹…é˜»å¡&lt;/li&gt;
&lt;li&gt;æ£€æŸ¥åœ¨æ²¡æœ‰è·å–é”ï¼Œ åœ¨æ²¡æœ‰è·å–é”çš„æƒ…å†µä¸‹ä¼šå¯¼è‡´å‘é€å¤±è´¥çš„éé˜»å¡æ“ä½œ&lt;/li&gt;
&lt;li&gt;æ£€æŸ¥chanæ˜¯å¦å…³é—­ï¼Œå‘ä¹Ÿå…³é—­çš„chanå‘é€æ¶ˆæ¯,ä¼šå¼•å‘panic&lt;/li&gt;
&lt;li&gt;å¦‚æœæ¥æ”¶é˜Ÿåˆ—ä¸­æœ‰ç­‰å¾…çš„æ¥æ”¶è€…ï¼Œç›´æ¥å‘é€ç»™æ¥æ”¶è€…ï¼ˆæœ‰ç¼“å­˜åŒºæ—¶ï¼Œä¼šç»•è¿‡ç¼“å­˜åŒºï¼‰&lt;/li&gt;
&lt;li&gt;æ²¡æœ‰æ¥æ”¶è€…ï¼Œå½“æœ‰ç¼“å­˜åŒºæ—¶ï¼Œå°†è¦å‘é€çš„å…ƒç´ æ”¾å…¥é˜Ÿåˆ—ä¸­&lt;/li&gt;
&lt;li&gt;ç¼“å­˜åŒºæ»¡äº†ï¼Œå°†å½“å‰åç¨‹åŠ å…¥åˆ°sendç­‰å¾…é˜Ÿåˆ—ï¼Œå¹¶é˜»å¡&lt;/li&gt;
&lt;li&gt;å½“å‘é€åç¨‹è¢«å”¤é†’ï¼Œè§£é™¤ç­‰å¾…é˜Ÿåˆ—çš„é˜»å¡çŠ¶æ€ï¼Œé‡Šæ”¾ç­‰å¾…é˜Ÿåˆ—
&lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 163; 
			flex-basis: 392px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/go-channel%E7%9A%84%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3/5.png&#34; data-size=&#34;1338x819&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/go-channel%E7%9A%84%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3/5.png&#34;
			width=&#34;1338&#34;
			height=&#34;819&#34;
			srcset=&#34;https://zcj-git520.github.io/p/go-channel%E7%9A%84%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3/5_huac78e02842841011bb19217a58ea5d43_197926_480x0_resize_box_3.png 480w, https://zcj-git520.github.io/p/go-channel%E7%9A%84%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3/5_huac78e02842841011bb19217a58ea5d43_197926_1024x0_resize_box_3.png 1024w&#34;
			loading=&#34;lazy&#34;
			&gt;
	&lt;/a&gt;
	
&lt;/figure&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;channel-æ¥æ”¶æ•°æ®&#34;&gt;channel æ¥æ”¶æ•°æ®&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&amp;lt;- data&lt;/li&gt;
&lt;/ul&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;chan æ¥æ”¶æ•°æ®æºç å¦‚ä¸‹:
func chanrecv(c *hchan, ep unsafe.Pointer, block bool) (selected, received bool) {
	// raceenabled: don&#39;t need to check ep, as it is always on the stack
	// or is new memory allocated by reflect.

	if debugChan {
		print(&amp;quot;chanrecv: chan=&amp;quot;, c, &amp;quot;\n&amp;quot;)
	}
    // åˆ¤æ–­chanæ˜¯å¦åˆå§‹åŒ–ï¼Œè‹¥æ²¡æœ‰åˆå§‹åŒ–ï¼Œæ¥æ”¶channelæ•°æ®å°†é˜»å¡
	if c == nil {
		if !block {
			return
		}
		gopark(nil, nil, waitReasonChanReceiveNilChan, traceEvGoStop, 2)
		throw(&amp;quot;unreachable&amp;quot;)
	}
    // æ£€æŸ¥chanæ˜¯å¦ä¸ºç©ºï¼Œæ˜¯å¦å…³é—­
	// Fast path: check for failed non-blocking operation without acquiring the lock.
	if !block &amp;amp;&amp;amp; empty(c) {
		// After observing that the channel is not ready for receiving, we observe whether the
		// channel is closed.
		//
		// Reordering of these checks could lead to incorrect behavior when racing with a close.
		// For example, if the channel was open and not empty, was closed, and then drained,
		// reordered reads could incorrectly indicate &amp;quot;open and empty&amp;quot;. To prevent reordering,
		// we use atomic loads for both checks, and rely on emptying and closing to happen in
		// separate critical sections under the same lock.  This assumption fails when closing
		// an unbuffered channel with a blocked send, but that is an error condition anyway.
		if atomic.Load(&amp;amp;c.closed) == 0 {  // chanå…³é—­ï¼Œå°±è¿”å›
			// Because a channel cannot be reopened, the later observation of the channel
			// being not closed implies that it was also not closed at the moment of the
			// first observation. We behave as if we observed the channel at that moment
			// and report that the receive cannot proceed.
			return
		}
		// The channel is irreversibly closed. Re-check whether the channel has any pending data
		// to receive, which could have arrived between the empty and closed checks above.
		// Sequential consistency is also required here, when racing with such a send.
		if empty(c) { // å¦‚æœchanä¸ºç©º
			// The channel is irreversibly closed and empty.
            // // channel ä¸å¯é€†çš„å…³é—­äº†ä¸”ä¸ºç©º
			if raceenabled {
				raceacquire(c.raceaddr())
			}
			if ep != nil {
				typedmemclr(c.elemtype, ep)
			}
			return true, false
		}
	}

	var t0 int64
	if blockprofilerate &amp;gt; 0 {
		t0 = cputicks()
	}

	lock(&amp;amp;c.lock)
    // chan å…³é—­äº†ï¼Œæ¸…ç†ç¼“å†²åŒº
	if c.closed != 0 &amp;amp;&amp;amp; c.qcount == 0 {
		if raceenabled {
			raceacquire(c.raceaddr())
		}
		unlock(&amp;amp;c.lock)
		if ep != nil {
			typedmemclr(c.elemtype, ep)
		}
		return true, false
	}
    //  æ‰¾åˆ°ä¸€ä¸ªç­‰å¾…çš„å‘ä»¶äººã€‚å¦‚æœç¼“å†²åŒºå¤§å°ä¸º 0ï¼Œåˆ™ç›´æ¥ä»å‘é€æ–¹æ¥æ”¶å€¼ã€‚å¦åˆ™ï¼Œä»é˜Ÿåˆ—çš„å¤´éƒ¨æ¥æ”¶ 
    // å¹¶å°†å‘é€è€…çš„å€¼æ·»åŠ åˆ°é˜Ÿåˆ—çš„å°¾éƒ¨ï¼ˆä¸¤è€…éƒ½æ˜ å°„åˆ° 
    // ç›¸åŒçš„ç¼“å†²åŒºæ§½ï¼Œå› ä¸ºé˜Ÿåˆ—å·²æ»¡ï¼‰
      // å¦‚æœæ˜¯æ— ç¼“å†²é˜Ÿåˆ—ï¼Œç›´æ¥ä»å‘é€æ–¹å–å€¼
      // å¦‚æœæ˜¯å¾…ç¼“å†²çš„åŒºï¼Œå°±ä»ç¼“å†²åŒºå¤´éƒ¨è·å–å€¼ï¼Œå¹¶å°†å‘é€ç€çš„å€¼ä¿å­˜åœ¨ç¼“å†²åŒºå
	if sg := c.sendq.dequeue(); sg != nil {
		// Found a waiting sender. If buffer is size 0, receive value
		// directly from sender. Otherwise, receive from head of queue
		// and add sender&#39;s value to the tail of the queue (both map to
		// the same buffer slot because the queue is full).
		recv(c, sg, ep, func() { unlock(&amp;amp;c.lock) }, 3)
		return true, true
	}
    // æ²¡æœ‰å‘é€çš„åç¨‹ï¼Œä½†æ˜¯ç¼“å†²åŒºæœ‰å…ƒç´ ï¼Œç›´æ¥è·å–ç¼“å†²åŒºå¤´éƒ¨çš„å€¼
	if c.qcount &amp;gt; 0 {
		// Receive directly from queue
		qp := chanbuf(c, c.recvx)
		if raceenabled {
			racenotify(c, c.recvx, nil)
		}
		if ep != nil {
			typedmemmove(c.elemtype, ep, qp)
		}
		typedmemclr(c.elemtype, qp)
		c.recvx++
		if c.recvx == c.dataqsiz {
			c.recvx = 0
		}
		c.qcount--
		unlock(&amp;amp;c.lock)
		return true, true
	}

	if !block {
		unlock(&amp;amp;c.lock)
		return false, false
	}
    // å½“æ²¡æœ‰å‘é€æ•°æ®çš„çš„åç¨‹ï¼Œä¸”ç¼“å†²åŒºå€¼ï¼Œå°±å°†æ¥æ”¶çš„åç¨‹æ”¾å…¥ç­‰å¾…é˜Ÿåˆ—ä¸­
	// no sender available: block on this channel.
	gp := getg()  // è·å–å½“å‰æ¥æ”¶åç¨‹
	mysg := acquireSudog() // åˆ›å»ºç­‰å¾…é˜Ÿåˆ—
	mysg.releasetime = 0
	if t0 != 0 {
		mysg.releasetime = -1
	}
	// No stack splits between assigning elem and enqueuing mysg
	// on gp.waiting where copystack can find it.
	mysg.elem = ep
	mysg.waitlink = nil
	gp.waiting = mysg 
    // å°†æ¥é€å†™åç¨‹ä¸ç­‰å¾…é˜Ÿåˆ—ç»‘å®š
	mysg.g = gp
	mysg.isSelect = false
	mysg.c = c
	gp.param = nil
    // æ”¾å…¥åœ¨åç¨‹çš„ç­‰å¾…é˜Ÿåˆ—ä¸­
	c.recvq.enqueue(mysg)
	// Signal to anyone trying to shrink our stack that we&#39;re about
	// to park on a channel. The window between when this G&#39;s status
	// changes and when we set gp.activeStackChans is not safe for
	// stack shrinking.
	atomic.Store8(&amp;amp;gp.parkingOnChan, 1)
	gopark(chanparkcommit, unsafe.Pointer(&amp;amp;c.lock), waitReasonChanReceive, traceEvGoBlockRecv, 2)
    //å½“æ¥æ”¶åç¨‹è¢«å”¤é†’æ—¶ï¼Œè§£é™¤é˜»å¡çŠ¶æ€
	// someone woke us up
	if mysg != gp.waiting {
		throw(&amp;quot;G waiting list is corrupted&amp;quot;)
	}
	gp.waiting = nil
	gp.activeStackChans = false
	if mysg.releasetime &amp;gt; 0 {
		blockevent(mysg.releasetime-t0, 2)
	}
	success := mysg.success
	gp.param = nil
	mysg.c = nil
	releaseSudog(mysg) // é‡Šæ”¾ç­‰å¾…é˜Ÿåˆ—å†…å­˜
	return true, success
}

&lt;/code&gt;&lt;/pre&gt;&lt;ul&gt;
&lt;li&gt;channel å‘é€æ•°æ®æ€»ç»“&lt;/li&gt;
&lt;/ul&gt;
&lt;ol&gt;
&lt;li&gt;åˆ¤æ–­chanæ˜¯å¦åˆå§‹åŒ–ï¼Œè‹¥æ²¡æœ‰åˆå§‹åŒ–ï¼Œæ¥æ”¶channelæ•°æ®å°†é˜»å¡&lt;/li&gt;
&lt;li&gt;æ£€æŸ¥chanæ˜¯å¦ä¸ºç©ºï¼Œæ˜¯å¦å…³é—­&lt;/li&gt;
&lt;li&gt;å½“æœ‰å‘é€åç¨‹ï¼Œå¦‚æœæ˜¯æ— ç¼“å†²é˜Ÿåˆ—ï¼Œç›´æ¥ä»å‘é€æ–¹å–å€¼,å¦‚æœæ˜¯å¾…ç¼“å†²çš„åŒºï¼Œå°±ä»ç¼“å†²åŒºå¤´éƒ¨è·å–å€¼ï¼Œå¹¶å°†å‘é€ç€çš„å€¼ä¿å­˜åœ¨ç¼“å†²åŒºå&lt;/li&gt;
&lt;li&gt;å½“æ²¡æœ‰å‘é€åç¨‹ï¼Œä½†æ˜¯æœ‰ç¼“å†²åŒºæœ‰å…ƒç´ ï¼Œç›´æ¥è·å–ç¼“å†²åŒºå¤´éƒ¨çš„å€¼&lt;/li&gt;
&lt;li&gt;å½“æ²¡æœ‰å‘é€æ•°æ®çš„çš„åç¨‹ï¼Œä¸”ç¼“å†²åŒºå€¼ï¼Œå°±å°†æ¥æ”¶çš„åç¨‹æ”¾å…¥ç­‰å¾…é˜Ÿåˆ—ä¸­&lt;/li&gt;
&lt;li&gt;å½“æ¥æ”¶åç¨‹è¢«å”¤é†’æ—¶ï¼Œè§£é™¤é˜»å¡çŠ¶æ€ï¼Œé‡Šæ”¾ç­‰å¾…é˜Ÿåˆ—å†…å­˜
&lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 177; 
			flex-basis: 426px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/go-channel%E7%9A%84%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3/6.png&#34; data-size=&#34;1488x837&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/go-channel%E7%9A%84%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3/6.png&#34;
			width=&#34;1488&#34;
			height=&#34;837&#34;
			srcset=&#34;https://zcj-git520.github.io/p/go-channel%E7%9A%84%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3/6_hudbd79ce6f9ecebda132de055b60a9928_209658_480x0_resize_box_3.png 480w, https://zcj-git520.github.io/p/go-channel%E7%9A%84%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3/6_hudbd79ce6f9ecebda132de055b60a9928_209658_1024x0_resize_box_3.png 1024w&#34;
			loading=&#34;lazy&#34;
			&gt;
	&lt;/a&gt;
	
&lt;/figure&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&#34;channel-å…³é—­&#34;&gt;channel å…³é—­&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;close(chan)&lt;/li&gt;
&lt;/ul&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;chan å…³é—­æºç å¦‚ä¸‹:
    func closechan(c *hchan) {
        // åˆ¤æ–­chanæ˜¯å¦åˆå§‹åŒ–ï¼Œæ²¡æœ‰åˆå§‹åŒ–ï¼Œå…³é—­æ²¡æœ‰åˆå§‹åŒ–çš„chan,ç›´æ¥panic
    	if c == nil {
    		panic(plainError(&amp;quot;close of nil channel&amp;quot;))
    	}
        // åˆ¤æ–­chanæ˜¯å¦ä¹Ÿè¢«å…³é—­ï¼Œå…³é—­ä¹Ÿå…³é—­çš„chan,ä¹Ÿä¼šå‘é€panic
    	lock(&amp;amp;c.lock)
    	if c.closed != 0 {
    		unlock(&amp;amp;c.lock)
    		panic(plainError(&amp;quot;close of closed channel&amp;quot;))
    	}
    
    	if raceenabled {
    		callerpc := getcallerpc()
    		racewritepc(c.raceaddr(), callerpc, funcPC(closechan))
    		racerelease(c.raceaddr())
    	}
    
    	c.closed = 1
    
    	var glist gList
        // é‡Šæ”¾æ‰€æœ‰çš„æ¥æ”¶chanï¼Œå¹¶å°†æ‰€æœ‰çš„æ¥æ”¶é˜Ÿåˆ—åŠ å…¥åˆ°å¾…æ¸…é™¤é˜Ÿåˆ— glist ä¸­
    	// release all readers
    	for {
    		sg := c.recvq.dequeue()
    		if sg == nil {
    			break
    		}
    		if sg.elem != nil {
    			typedmemclr(c.elemtype, sg.elem)
    			sg.elem = nil
    		}
    		if sg.releasetime != 0 {
    			sg.releasetime = cputicks()
    		}
    		gp := sg.g
    		gp.param = unsafe.Pointer(sg)
    		sg.success = false
    		if raceenabled {
    			raceacquireg(gp, c.raceaddr())
    		}
    		glist.push(gp)
    	}
        // é‡Šæ”¾æ‰€æœ‰çš„å‘é€chan,å‘é€è€…çš„ç­‰å¾…é˜Ÿåˆ— sendq ä¸­çš„ sudog æ”¾å…¥å¾…æ¸…é™¤é˜Ÿåˆ— glist ä¸­
    	// release all writers (they will panic)
    	for {
    		sg := c.sendq.dequeue()
    		if sg == nil {
    			break
    		}
    		sg.elem = nil
    		if sg.releasetime != 0 {
    			sg.releasetime = cputicks()
    		}
    		gp := sg.g
    		gp.param = unsafe.Pointer(sg)
    		sg.success = false
    		if raceenabled {
    			raceacquireg(gp, c.raceaddr())
    		}
    		glist.push(gp)
    	}
    	unlock(&amp;amp;c.lock)
    æœ€åä¼šä¸ºæ‰€æœ‰è¢«é˜»å¡çš„ goroutine è°ƒç”¨ goready è§¦å‘è°ƒåº¦ã€‚å°†æ‰€æœ‰ glist ä¸­çš„ 
    goroutine çŠ¶æ€ä» _Gwaiting è®¾ç½®ä¸º _Grunnable çŠ¶æ€ï¼Œç­‰å¾…è°ƒåº¦å™¨çš„è°ƒåº¦ã€‚
    	// Ready all Gs now that we&#39;ve dropped the channel lock.
    	for !glist.empty() {
    		gp := glist.pop()
    		gp.schedlink = 0
    		goready(gp, 3)
    	}
    }
&lt;/code&gt;&lt;/pre&gt;&lt;ul&gt;
&lt;li&gt;channel å…³é—­æ€»ç»“&lt;/li&gt;
&lt;/ul&gt;
&lt;ol&gt;
&lt;li&gt;åˆ¤æ–­chanæ˜¯å¦åˆå§‹åŒ–ï¼Œæ²¡æœ‰åˆå§‹åŒ–ï¼Œå…³é—­æ²¡æœ‰åˆå§‹åŒ–çš„chan,ç›´æ¥panic&lt;/li&gt;
&lt;li&gt;åˆ¤æ–­chanæ˜¯å¦ä¹Ÿè¢«å…³é—­ï¼Œå…³é—­ä¹Ÿå…³é—­çš„chan,ä¹Ÿä¼šå‘é€panic&lt;/li&gt;
&lt;li&gt;å…ˆé‡Šæ”¾æ‰€æœ‰çš„æ¥æ”¶chanï¼Œå¹¶å°†æ‰€æœ‰çš„æ¥æ”¶é˜Ÿåˆ—åŠ å…¥åˆ°å¾…æ¸…é™¤é˜Ÿåˆ— glist ä¸­&lt;/li&gt;
&lt;li&gt;é‡Šæ”¾æ‰€æœ‰çš„å‘é€chan,å‘é€è€…çš„ç­‰å¾…é˜Ÿåˆ— sendq ä¸­çš„ sudog æ”¾å…¥å¾…æ¸…é™¤é˜Ÿåˆ— glist ä¸­&lt;/li&gt;
&lt;li&gt;æœ€åä¼šä¸ºæ‰€æœ‰è¢«é˜»å¡çš„ goroutine è°ƒç”¨ goready è§¦å‘è°ƒåº¦ã€‚å°†æ‰€æœ‰ glist ä¸­çš„goroutine çŠ¶æ€ä» _Gwaiting è®¾ç½®ä¸º _Grunnable çŠ¶æ€ï¼Œç­‰å¾…è°ƒåº¦å™¨çš„è°ƒåº¦ã€‚&lt;/li&gt;
&lt;/ol&gt;
</description>
        </item>
        <item>
        <title>go errorç±»å‹è½¬json</title>
        <link>https://zcj-git520.github.io/p/golang/</link>
        <pubDate>Sat, 09 Oct 2021 22:00:38 +0800</pubDate>
        
        <guid>https://zcj-git520.github.io/p/golang/</guid>
        <description>&lt;img src="https://zcj-git520.github.io/p/golang/2.png" alt="Featured image of post go errorç±»å‹è½¬json" /&gt;&lt;h2 id=&#34;é—®é¢˜&#34;&gt;é—®é¢˜&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;åœ¨æ”¶é›†æœåŠ¡çš„è®¿é—®è®°å½•æ—¶ï¼Œéœ€è¦å°†è®¿é—®è®°å½•ä¿å­˜ï¼Œå®šä¹‰ç»“æ„ä½“å¦‚ä¸‹&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;/blockquote&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;type accessData struct {
	RemoteAddr string    // è¿œç¨‹è®¿é—®ä¸»æœºåœ°å€
	RequestURI string    //è®¿é—®çš„è·¯ç”±
	ServerName string    // è®¿é—®çš„æœåŠ¡åç§°
	AccessDate string    //è®¿é—®çš„æ—¶é—´
	RunStatus bool       //æœåŠ¡æ˜¯å¦æ­£å¸¸è¿è¡Œ
	RunError error       //è¿è¡ŒæŠ¥é”™ï¼šæŠ¥é”™ä¿¡æ¯.
	ServerParam interface{} // è®¿é—®æœåŠ¡çš„å‚æ•°
}
&lt;/code&gt;&lt;/pre&gt;&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;é€šè¿‡ç»“æ„ä½“è½¬jsonï¼ŒåŒæ—¶é€šè¿‡getè¯·æ±‚å¾—åˆ°å›¾ä¸‹ç»“æœ
&lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 135; 
			flex-basis: 325px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/golang/1.png&#34; data-size=&#34;630x464&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/golang/1.png&#34;
			width=&#34;630&#34;
			height=&#34;464&#34;
			srcset=&#34;https://zcj-git520.github.io/p/golang/1_hu0cd8407e48b8e284b5fa50d7a8dedae6_33030_480x0_resize_box_3.png 480w, https://zcj-git520.github.io/p/golang/1_hu0cd8407e48b8e284b5fa50d7a8dedae6_33030_1024x0_resize_box_3.png 1024w&#34;
			loading=&#34;lazy&#34;
			&gt;
	&lt;/a&gt;
	
&lt;/figure&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&amp;ldquo;RunError&amp;rdquo;: {},è¢«jsonè½¬ä¸º{}çš„å­—ç¬¦ï¼Œ æ‰“å°ç»“æ„ä½“ï¼Œå‘ç°é”™è¯¯ä¿¡æ¯æ˜¯æœ‰çš„ï¼š{192.168.1.101:53364 /v1/alarms/out/d GetOutAlarms 2021-10-12 10:09:42 false æ²¡æœ‰è¿™ä¸ªæŠ¥è­¦ğŸ†”id &lt;!-- raw HTML omitted --&gt;},è¯´æ˜æ˜¯error è½¬jsoné—®é¢˜&lt;/p&gt;
&lt;h2 id=&#34;é—®é¢˜åˆ†æä¸è§£å†³&#34;&gt;é—®é¢˜åˆ†æä¸è§£å†³&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;é—®é¢˜åˆ†ææŸ¥çœ‹errorç±»å‹å®šä¹‰å‘ç°ï¼šerrorç±»å‹åªæ˜¯ä¸€ä¸ªæ¥å£ã€‚å®ƒå¯ä»¥åŒ…å«ä»»ä½•å®ç°å®ƒçš„å…·ä½“ç±»å‹çš„å€¼&lt;/li&gt;
&lt;li&gt;è§£å†³ï¼šå°†ç»“æ„ä½“ä¸­é”™è¯¯è½¬åŒ–ä¸ºå­—ç¬¦ä¸²ç±»å‹ï¼ŒåŒæ—¶ç”¨err.Error()è¿”å›æ˜¯é”™è¯¯çš„å­—ç¬¦ä¸²&lt;/li&gt;
&lt;/ul&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;type accessData struct {
  RemoteAddr string    // è¿œç¨‹è®¿é—®ä¸»æœºåœ°å€
  RequestURI string    //è®¿é—®çš„è·¯ç”±
  ServerName string    // è®¿é—®çš„æœåŠ¡åç§°
  AccessDate string    //è®¿é—®çš„æ—¶é—´
  RunStatus bool       //æœåŠ¡æ˜¯å¦æ­£å¸¸è¿è¡Œ
  RunError string       //è¿è¡ŒæŠ¥é”™ï¼šæŠ¥é”™ä¿¡æ¯.
  ServerParam interface{} // è®¿é—®æœåŠ¡çš„å‚æ•°
  }
  type error interface {
  Error() string
  }
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ç»“æœå¦‚å›¾&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 88; 
			flex-basis: 212px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/golang/2.png&#34; data-size=&#34;492x556&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/golang/2.png&#34;
			width=&#34;492&#34;
			height=&#34;556&#34;
			srcset=&#34;https://zcj-git520.github.io/p/golang/2_hu3607656af67f333528ae9e7b0ed06a62_30106_480x0_resize_box_3.png 480w, https://zcj-git520.github.io/p/golang/2_hu3607656af67f333528ae9e7b0ed06a62_30106_1024x0_resize_box_3.png 1024w&#34;
			loading=&#34;lazy&#34;
			&gt;
	&lt;/a&gt;
	
&lt;/figure&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
</description>
        </item>
        <item>
        <title>go goroutineä¸gmpæ¨¡å‹çš„æ·±å…¥ç†è§£</title>
        <link>https://zcj-git520.github.io/p/go-goroutine%E4%B8%8Egmp%E6%A8%A1%E5%9E%8B%E7%9A%84%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3/</link>
        <pubDate>Wed, 06 Oct 2021 22:00:38 +0800</pubDate>
        
        <guid>https://zcj-git520.github.io/p/go-goroutine%E4%B8%8Egmp%E6%A8%A1%E5%9E%8B%E7%9A%84%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3/</guid>
        <description>&lt;img src="https://zcj-git520.github.io/p/go-goroutine%E4%B8%8Egmp%E6%A8%A1%E5%9E%8B%E7%9A%84%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3/1.png" alt="Featured image of post go goroutineä¸gmpæ¨¡å‹çš„æ·±å…¥ç†è§£" /&gt;&lt;h2 id=&#34;go-åç¨‹goroutine&#34;&gt;go åç¨‹goroutine&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;åç¨‹æ˜¯ç”¨æˆ·çº§çš„çº¿ç¨‹ï¼Œæœ‰ç”¨æˆ·è‡ªå·±è°ƒåº¦ï¼Œä½¿ç”¨åç¨‹ä½¿å¾—ç¨‹åºè°ƒåº¦æ›´åŠ çµæ´»ã€‚åŒæ—¶æ¯”çº¿ç¨‹æ›´è½»é‡ï¼Œå ç”¨çš„æ ˆå†…å­˜æ›´å°‘ã€‚goè¯­è¨€å¤©ç”Ÿæ”¯æŒé«˜å¹¶å‘ï¼Œgoä½¿ç”¨åç¨‹goroutineçš„è°ƒåº¦å™¨ã€‚goroutine çš„æ ˆå†…å­˜æœ€å°å€¼ä¸º2kb(_StackMin = 2048),å®ƒä¸æ˜¯å›ºå®šä¸å˜çš„ï¼Œå¯ä»¥éšéœ€æ±‚å¢å¤§å’Œç¼©å°ã€‚goroutine ç»´æŠ¤ç€å¾ˆå¤§çš„å†…å­˜ï¼Œæ— éœ€é¢‘ç¹å¼€è¾Ÿå†…å­˜ï¼Œgoroutineæ˜¯ä½¿ç”¨M:næ¨¡å‹ï¼Œåœ¨ç”¨æˆ·æ€åˆ‡æ¢åç¨‹ï¼ŒåŠ ä¸Šåˆ›å»ºåç¨‹ä»£ä»·ä½ï¼Œä½¿å¾—cpuçš„åˆ©ç”¨ç‡å¤§å¤§æå‡ï¼Œcupçš„æ€§èƒ½å¤§å¹…åº¦çš„è¢«åˆ©ç”¨ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;goroutine-è°ƒåº¦å™¨gpmæ¨¡å‹&#34;&gt;goroutine è°ƒåº¦å™¨GPMæ¨¡å‹&lt;/h2&gt;
&lt;h3 id=&#34;g&#34;&gt;G&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;G å°±æ˜¯goroutineåç¨‹&lt;/li&gt;
&lt;/ul&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;type g struct {
	// Stack parameters.
	// stack describes the actual stack memory: [stack.lo, stack.hi).
	// stackguard0 is the stack pointer compared in the Go stack growth prologue.
	// It is stack.lo+StackGuard normally, but can be StackPreempt to trigger a preemption.
	// stackguard1 is the stack pointer compared in the C stack growth prologue.
	// It is stack.lo+StackGuard on g0 and gsignal stacks.
	// It is ~0 on other goroutine stacks, to trigger a call to morestackc (and crash).
	// è®°å½•è¯¥goroutineä½¿ç”¨çš„æ ˆ
    stack       stack   // offset known to runtime/cgo
    
	//ä¸‹é¢ä¸¤ä¸ªæˆå‘˜ç”¨äºæ ˆæº¢å‡ºæ£€æŸ¥ï¼Œå®ç°æ ˆçš„è‡ªåŠ¨ä¼¸ç¼©ï¼ŒæŠ¢å è°ƒåº¦ä¹Ÿä¼šç”¨åˆ°stackguard0
    stackguard0 uintptr // offset known to liblink
	stackguard1 uintptr // offset known to liblink

	_panic         *_panic // innermost panic - offset known to liblink
	_defer         *_defer // innermost defer
    
    // æ­¤goroutineæ­£åœ¨è¢«å“ªä¸ªå·¥ä½œçº¿ç¨‹æ‰§è¡Œ
	m              *m      // current m; offset known to arm liblink
    //è¿™ä¸ªå­—æ®µè·Ÿè°ƒåº¦åˆ‡æ¢æœ‰å…³ï¼ŒGåˆ‡æ¢æ—¶ç”¨æ¥ä¿å­˜ä¸Šä¸‹æ–‡ï¼Œä¿å­˜ä»€ä¹ˆï¼Œçœ‹ä¸‹é¢gobufç»“æ„ä½“
	sched          gobuf
	syscallsp      uintptr        // if status==Gsyscall, syscallsp = sched.sp to use during gc
	syscallpc      uintptr        // if status==Gsyscall, syscallpc = sched.pc to use during gc
	stktopsp       uintptr        // expected sp at top of stack, to check in traceback
	param          unsafe.Pointer // passed parameter on wakeupï¼Œwakeupå”¤é†’æ—¶ä¼ é€’çš„å‚æ•°
	// çŠ¶æ€Gidle,Grunnable,Grunning,Gsyscall,Gwaiting,Gdead
    atomicstatus   uint32
	stackLock      uint32 // sigprof/scang lock; TODO: fold in to atomicstatus
	goid           int64
    
    //schedlinkå­—æ®µæŒ‡å‘å…¨å±€è¿è¡Œé˜Ÿåˆ—ä¸­çš„ä¸‹ä¸€ä¸ªgï¼Œ
    //æ‰€æœ‰ä½äºå…¨å±€è¿è¡Œé˜Ÿåˆ—ä¸­çš„gå½¢æˆä¸€ä¸ªé“¾è¡¨
	schedlink      guintptr
	waitsince      int64      // approx time when the g become blocked
	waitreason     waitReason // if status==Gwaitingï¼Œgè¢«é˜»å¡çš„åŸå› 
    //æŠ¢å ä¿¡å·ï¼Œstackguard0 = stackpreemptï¼Œå¦‚æœéœ€è¦æŠ¢å è°ƒåº¦ï¼Œè®¾ç½®preemptä¸ºtrue
	preempt        bool       // preemption signal, duplicates stackguard0 = stackpreempt
	paniconfault   bool       // panic (instead of crash) on unexpected fault address
	preemptscan    bool       // preempted g does scan for gc
	gcscandone     bool       // g has scanned stack; protected by _Gscan bit in status
	gcscanvalid    bool       // false at start of gc cycle, true if G has not run since last scan; TODO: remove?
	throwsplit     bool       // must not split stack
	raceignore     int8       // ignore race detection events
	sysblocktraced bool       // StartTrace has emitted EvGoInSyscall about this goroutine
	sysexitticks   int64      // cputicks when syscall has returned (for tracing)
	traceseq       uint64     // trace event sequencer
	tracelastp     puintptr   // last P emitted an event for this goroutine
	// å¦‚æœè°ƒç”¨äº† LockOsThreadï¼Œé‚£ä¹ˆè¿™ä¸ª g ä¼šç»‘å®šåˆ°æŸä¸ª m ä¸Š
    lockedm        muintptr
	sig            uint32
	writebuf       []byte
	sigcode0       uintptr
	sigcode1       uintptr
	sigpc          uintptr
    // åˆ›å»ºè¿™ä¸ªgoroutineçš„goè¡¨è¾¾å¼çš„pc
	gopc           uintptr         // pc of go statement that created this goroutine
	ancestors      *[]ancestorInfo // ancestor information goroutine(s) that created this goroutine (only used if debug.tracebackancestors)
	startpc        uintptr         // pc of goroutine function
	racectx        uintptr
	waiting        *sudog         // sudog structures this g is waiting on (that have a valid elem ptr); in lock order
	cgoCtxt        []uintptr      // cgo traceback context
	labels         unsafe.Pointer // profiler labels
	timer          *timer         // cached timer for time.Sleep,ä¸º time.Sleep ç¼“å­˜çš„è®¡æ—¶å™¨
	selectDone     uint32         // are we participating in a select and did someone win the race?

	// Per-G GC state

	// gcAssistBytes is this G&#39;s GC assist credit in terms of
	// bytes allocated. If this is positive, then the G has credit
	// to allocate gcAssistBytes bytes without assisting. If this
	// is negative, then the G must correct this by performing
	// scan work. We track this in bytes to make it fast to update
	// and check for debt in the malloc hot path. The assist ratio
	// determines how this corresponds to scan work debt.
	gcAssistBytes int64
}
&lt;/code&gt;&lt;/pre&gt;&lt;ul&gt;
&lt;li&gt;ä¿å­˜ç€goroutineæ‰€æœ‰ä¿¡æ¯ä»¥åŠæ ˆä¿¡æ¯ï¼Œgobufç»“æ„ä½“ï¼šcpué‡Œçš„å¯„å­˜å™¨ä¿¡æ¯&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;p-processorå¤„ç†å™¨&#34;&gt;P processorå¤„ç†å™¨&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;è°ƒåº¦åç¨‹Gå’Œçº¿ç¨‹Mçš„å…³è”&lt;/li&gt;
&lt;/ul&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;P çš„ç»“æ„ä½“å¦‚ä¸‹ï¼š
type p struct {
    //allpä¸­çš„ç´¢å¼•
	id          int32
    //pçš„çŠ¶æ€
	status      uint32 // one of pidle/prunning/...
	link        puintptr
	schedtick   uint32     // incremented on every scheduler call-&amp;gt;æ¯æ¬¡schedulerè°ƒç”¨+1
	syscalltick uint32     // incremented on every system call-&amp;gt;æ¯æ¬¡ç³»ç»Ÿè°ƒç”¨+1
	sysmontick  sysmontick // last tick observed by sysmon
    //æŒ‡å‘ç»‘å®šçš„ mï¼Œå¦‚æœ p æ˜¯ idle çš„è¯ï¼Œé‚£è¿™ä¸ªæŒ‡é’ˆæ˜¯ nil
	m           muintptr   // back-link to associated m (nil if idle)
	mcache      *mcache
	raceprocctx uintptr

    //ä¸åŒå¤§å°å¯ç”¨deferç»“æ„æ± 
	deferpool    [5][]*_defer // pool of available defer structs of different sizes (see panic.go)
	deferpoolbuf [5][32]*_defer

	// Cache of goroutine ids, amortizes accesses to runtimeÂ·sched.goidgen.
	goidcache    uint64
	goidcacheend uint64

    //æœ¬åœ°è¿è¡Œé˜Ÿåˆ—ï¼Œå¯ä»¥æ— é”è®¿é—®
	// Queue of runnable goroutines. Accessed without lock.
	runqhead uint32  //é˜Ÿåˆ—å¤´
	runqtail uint32   //é˜Ÿåˆ—å°¾
    //æ•°ç»„å®ç°çš„å¾ªç¯é˜Ÿåˆ—
	runq     [256]guintptr
    
	// runnext, if non-nil, is a runnable G that was ready&#39;d by
	// the current G and should be run next instead of what&#39;s in
	// runq if there&#39;s time remaining in the running G&#39;s time
	// slice. It will inherit the time left in the current time
	// slice. If a set of goroutines is locked in a
	// communicate-and-wait pattern, this schedules that set as a
	// unit and eliminates the (potentially large) scheduling
	// latency that otherwise arises from adding the ready&#39;d
	// goroutines to the end of the run queue.
    // runnext éç©ºæ—¶ï¼Œä»£è¡¨çš„æ˜¯ä¸€ä¸ª runnable çŠ¶æ€çš„ Gï¼Œ
    //è¿™ä¸ª G è¢« å½“å‰ G ä¿®æ”¹ä¸º ready çŠ¶æ€ï¼Œç›¸æ¯” runq ä¸­çš„ G æœ‰æ›´é«˜çš„ä¼˜å…ˆçº§ã€‚
    //å¦‚æœå½“å‰ G è¿˜æœ‰å‰©ä½™çš„å¯ç”¨æ—¶é—´ï¼Œé‚£ä¹ˆå°±åº”è¯¥è¿è¡Œè¿™ä¸ª G
    //è¿è¡Œä¹‹åï¼Œè¯¥ G ä¼šç»§æ‰¿å½“å‰ G çš„å‰©ä½™æ—¶é—´
	runnext guintptr

	// Available G&#39;s (status == Gdead)
    //ç©ºé—²çš„g
	gFree struct {
		gList
		n int32
	}

	sudogcache []*sudog
	sudogbuf   [128]*sudog

	tracebuf traceBufPtr

	// traceSweep indicates the sweep events should be traced.
	// This is used to defer the sweep start event until a span
	// has actually been swept.
	traceSweep bool
	// traceSwept and traceReclaimed track the number of bytes
	// swept and reclaimed by sweeping in the current sweep loop.
	traceSwept, traceReclaimed uintptr

	palloc persistentAlloc // per-P to avoid mutex

	_ uint32 // Alignment for atomic fields below

	// Per-P GC state
	gcAssistTime         int64    // Nanoseconds in assistAlloc
	gcFractionalMarkTime int64    // Nanoseconds in fractional mark worker (atomic)
	gcBgMarkWorker       guintptr // (atomic)
	gcMarkWorkerMode     gcMarkWorkerMode

	// gcMarkWorkerStartTime is the nanotime() at which this mark
	// worker started.
	gcMarkWorkerStartTime int64

	// gcw is this P&#39;s GC work buffer cache. The work buffer is
	// filled by write barriers, drained by mutator assists, and
	// disposed on certain GC state transitions.
	gcw gcWork

	// wbBuf is this P&#39;s GC write barrier buffer.
	//
	// TODO: Consider caching this in the running G.
	wbBuf wbBuf

	runSafePointFn uint32 // if 1, run sched.safePointFn at next safe point

	pad cpu.CacheLinePad
}
&lt;/code&gt;&lt;/pre&gt;&lt;ul&gt;
&lt;li&gt;è®°å½•ç€Pçš„ä¿¡æ¯ï¼Œä»¥åŠGçš„çŠ¶æ€ç­‰ã€‚åŒæ—¶Pæ˜¯æœ‰ç€æœ¬åœ°é˜Ÿåˆ—ï¼Œå­˜æ”¾ç€å¸¦å¾…è¿è¡Œçš„G,æœ¬åœ°é˜Ÿåˆ—ä¸èƒ½è¶…è¿‡256ä¸ªã€‚&lt;/li&gt;
&lt;li&gt;Pçš„æ•°é‡ï¼šæ˜¯ç”±ç¯å¢ƒå˜é‡ $GOMAXPROCS æˆ–è€…æ˜¯ç”± runtime çš„æ–¹æ³• GOMAXPROCS() å†³å®šã€‚åœ¨ç¨‹åºå¯åŠ¨å¼åˆ›å»ºï¼Œå¹¶ä¿å­˜åœ¨æ•°ç»„ä¸­ï¼Œæœ€å¤šæœ‰ GOMAXPROCS(å¯é…ç½®) ä¸ª&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;m-æ˜¯å†…æ ¸æ€çº¿ç¨‹çš„æŠ½è±¡&#34;&gt;M æ˜¯å†…æ ¸æ€çº¿ç¨‹çš„æŠ½è±¡&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;ä¸»è¦çš„å·¥ä½œæ‰§è¡Œåç¨‹Gæˆ–è€…åœ¨è°ƒåº¦Gåˆ°Pä¸­&lt;/li&gt;
&lt;/ul&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;Mçš„ç»“æ„ä½“å¦‚ä¸‹ï¼š
type m struct {
    // ç³»ç»Ÿç®¡ç†çš„ä¸€ä¸ªgï¼Œæ‰§è¡Œè°ƒåº¦ä»£ç æ—¶ä½¿ç”¨çš„ã€‚æ¯”å¦‚æ‰§è¡Œç”¨æˆ·çš„goroutineæ—¶ï¼Œå°±éœ€è¦æŠŠæŠŠç”¨æˆ·
    // çš„æ ˆä¿¡æ¯æ¢åˆ°å†…æ ¸çº¿ç¨‹çš„æ ˆï¼Œä»¥ä¾¿èƒ½å¤Ÿæ‰§è¡Œç”¨æˆ·goroutine
	g0      *g     // goroutine with scheduling stack
	morebuf gobuf  // gobuf arg to morestack
	divmod  uint32 // div/mod denominator for arm - known to liblink

	// Fields not known to debuggers.
	procid        uint64       // for debuggers, but offset not hard-coded
    //å¤„ç†signalçš„ g
	gsignal       *g           // signal-handling g
	goSigStack    gsignalStack // Go-allocated signal handling stack
	sigmask       sigset       // storage for saved signal mask
    //çº¿ç¨‹çš„æœ¬åœ°å­˜å‚¨TLSï¼Œè¿™é‡Œå°±æ˜¯ä¸ºä»€ä¹ˆOSçº¿ç¨‹èƒ½è¿è¡ŒMå…³é”®åœ°æ–¹
	tls           [6]uintptr   // thread-local storage (for x86 extern register)
	//go å…³é”®å­—è¿è¡Œçš„å‡½æ•°
    mstartfn      func()
    //å½“å‰è¿è¡Œçš„ç”¨æˆ·goroutineçš„gç»“æ„ä½“å¯¹è±¡
	curg          *g       // current running goroutine
	caughtsig     guintptr // goroutine running during fatal signal
    
    //å½“å‰å·¥ä½œçº¿ç¨‹ç»‘å®šçš„Pï¼Œå¦‚æœæ²¡æœ‰å°±ä¸ºnil
	p             puintptr // attached p for executing go code (nil if not executing go code)
	//æš‚å­˜ä¸å½“å‰Mæ½œåœ¨å…³è”çš„P
    nextp         puintptr
    //Mä¹‹å‰è°ƒç”¨çš„P
	oldp          puintptr // the p that was attached before executing a syscall
	id            int64
	mallocing     int32
	throwing      int32
    //å½“å‰Mæ˜¯å¦å…³é—­æŠ¢å å¼è°ƒåº¦
	preemptoff    string // if != &amp;quot;&amp;quot;, keep curg running on this m
	locks         int32
	dying         int32
	profilehz     int32
    //Mçš„è‡ªæ—‹çŠ¶æ€ï¼Œä¸ºtrueæ—¶Må¤„äºè‡ªæ—‹çŠ¶æ€ï¼Œæ­£åœ¨ä»å…¶ä»–çº¿ç¨‹å·G; ä¸ºfalseï¼Œä¼‘çœ çŠ¶æ€
	spinning      bool // m is out of work and is actively looking for work
	blocked       bool // m is blocked on a note
	newSigstack   bool // minit on C thread called sigaltstack
	printlock     int8
	incgo         bool   // m is executing a cgo call
	freeWait      uint32 // if == 0, safe to free g0 and delete m (atomic)
	fastrand      [2]uint32
	needextram    bool
	traceback     uint8
	ncgocall      uint64      // number of cgo calls in total
	ncgo          int32       // number of cgo calls currently in progress
	cgoCallersUse uint32      // if non-zero, cgoCallers in use temporarily
	cgoCallers    *cgoCallers // cgo traceback if crashing in cgo call
	//æ²¡æœ‰goroutineè¿è¡Œæ—¶ï¼Œå·¥ä½œçº¿ç¨‹ç¡çœ 
    //é€šè¿‡è¿™ä¸ªæ¥å”¤é†’å·¥ä½œçº¿ç¨‹
    park          note // ä¼‘çœ é”
    //è®°å½•æ‰€æœ‰å·¥ä½œçº¿ç¨‹çš„é“¾è¡¨
	alllink       *m // on allm
	schedlink     muintptr
    //å½“å‰çº¿ç¨‹å†…å­˜åˆ†é…çš„æœ¬åœ°ç¼“å­˜
	mcache        *mcache
    //å½“å‰Mé”å®šçš„Gï¼Œ
	lockedg       guintptr
	createstack   [32]uintptr // stack that created this thread.
	lockedExt     uint32      // tracking for external LockOSThread
	lockedInt     uint32      // tracking for internal lockOSThread
	nextwaitm     muintptr    // next m waiting for lock
	waitunlockf   func(*g, unsafe.Pointer) bool
	waitlock      unsafe.Pointer
	waittraceev   byte
	waittraceskip int
	startingtrace bool
	syscalltick   uint32
    //æ“ä½œç³»ç»Ÿçº¿ç¨‹id
	thread        uintptr // thread handle
	freelink      *m      // on sched.freem

	// these are here because they are too large to be on the stack
	// of low-level NOSPLIT functions.
	libcall   libcall
	libcallpc uintptr // for cpu profiler
	libcallsp uintptr
	libcallg  guintptr
	syscall   libcall // stores syscall parameters on windows

	vdsoSP uintptr // SP for traceback while in VDSO call (0 if not in call)
	vdsoPC uintptr // PC for traceback while in VDSO call

	dlogPerM

	mOS
}
&lt;/code&gt;&lt;/pre&gt;&lt;ul&gt;
&lt;li&gt;è®°å½•ç€Mçš„çº¿ç¨‹çš„ä¿¡æ¯ï¼ŒåŒ…æ‹¬ä¸€äº›P,Gä»¥åŠä¿¡å·å’Œè‡ªæ—‹é”ç­‰ä¿¡æ¯&lt;/li&gt;
&lt;li&gt;m æ•°é‡ï¼šå¯ä»¥é€šè¿‡SetMaxThreadså‡½æ•°ï¼Œè®¾ç½® M çš„æœ€å¤§æ•°é‡ï¼Œé»˜è®¤ä¸º10000(sched.maxmcount = 10000)ï¼Œå’ŒPä¸€æ ·åœ¨ç¨‹åºå¯åŠ¨æ—¶åˆ›å»ºã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;å…¨å±€é˜Ÿåˆ—gqueue&#34;&gt;å…¨å±€é˜Ÿåˆ—ï¼ˆgQueueï¼‰&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Pçš„æœ¬åœ°é˜Ÿåˆ—å¯ä»¥å­˜æ”¾ç€ä¸è¶…è¿‡256ä¸ªå¾…æ‰§è¡Œçš„G,Pæ˜¯æœ‰é™çš„ï¼Œå½“Gè¿‡å¤šæ—¶ï¼Œå³å½“Pæœ¬åœ°é˜Ÿåˆ—å­˜æ”¾ä¸ä¸‹æ—¶ï¼Œå°±éœ€è¦å°†Gå­˜æ”¾åœ¨å…¨å±€é˜Ÿåˆ—ä¸­ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;å…¨å±€é˜Ÿåˆ—ç»“æ„å¦‚ä¸‹ï¼š
type gQueue struct {
	head guintptr //é˜Ÿåˆ—å¤´
	tail guintptr //é˜Ÿåˆ—å°¾
}
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&#34;gpmgqueueå…³ç³»&#34;&gt;Gã€Pã€Mã€gQueueå…³ç³»&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Pä¸Mæ²¡æœ‰æ•°é‡å…³ç³»ï¼Œå½“ä¸€ä¸ªMå¤„äºé˜»å¡æ—¶ï¼ŒPå…ˆæ‰¾ç©ºé—²M,æ²¡æœ‰ç©ºé—²çš„Må°±åˆ›å»ºæ–°çš„M&lt;/li&gt;
&lt;li&gt;Gä¼˜å…ˆå­˜æ”¾åœ¨Pæœ¬åœ°é˜Ÿåˆ—ä¸­ï¼Œå½“Pä¸­Gæ»¡æ—¶ï¼Œä¼šå°†Pä¸­å‰ä¸€åŠGå­˜æ”¾åœ¨å…¨å±€ä¸­ã€‚å½“Pç©ºé—²æ—¶æ—¶ï¼Œä¼šä»å…¨å±€ä¸­æ‹¿å–Gæ”¾åœ¨æœ¬åœ°é˜Ÿåˆ—ã€‚å…¨å±€æ²¡æœ‰Gæ—¶ï¼Œä¼šä»å…¶Pçš„æœ¬åœ°é˜Ÿåˆ—ä¸­æ‹¿å–ä¸€åŠåˆ°æœ¬åœ°é˜Ÿåˆ—ã€‚&lt;/li&gt;
&lt;li&gt;å…³ç³»å¦‚å›¾æ‰€ç¤ºï¼š&lt;br&gt;
&lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 90; 
			flex-basis: 218px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/go-goroutine%E4%B8%8Egmp%E6%A8%A1%E5%9E%8B%E7%9A%84%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3/1.png&#34; data-size=&#34;662x728&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/go-goroutine%E4%B8%8Egmp%E6%A8%A1%E5%9E%8B%E7%9A%84%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3/1.png&#34;
			width=&#34;662&#34;
			height=&#34;728&#34;
			srcset=&#34;https://zcj-git520.github.io/p/go-goroutine%E4%B8%8Egmp%E6%A8%A1%E5%9E%8B%E7%9A%84%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3/1_huda718813a1636432ee91da972c85e460_240629_480x0_resize_box_3.png 480w, https://zcj-git520.github.io/p/go-goroutine%E4%B8%8Egmp%E6%A8%A1%E5%9E%8B%E7%9A%84%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3/1_huda718813a1636432ee91da972c85e460_240629_1024x0_resize_box_3.png 1024w&#34;
			loading=&#34;lazy&#34;
			&gt;
	&lt;/a&gt;
	
&lt;/figure&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;åˆ›å»ºgoroutine&#34;&gt;åˆ›å»ºgoroutine&lt;/h2&gt;
&lt;h3 id=&#34;newprocå‡½æ•°&#34;&gt;newproc()å‡½æ•°&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;goroutine æ˜¯ç”±å‡½æ•°newprocå‡½æ•°è¿›è¡Œåˆ›å»ºçš„ï¼Œnewprocæºç å¦‚ä¸‹&lt;/li&gt;
&lt;/ul&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;// å‚æ•°ï¼šåç¨‹å‡½æ•°çš„å‚æ•°å çš„å­—èŠ‚æ•°å’Œåç¨‹å…¥å£å‡½æ•°çš„funcvalæŒ‡é’ˆ
func newproc(siz int32, fn *funcval) {
    // è·å¾—åç¨‹å‚æ•°çš„åœ°å€= fnå‡½æ•°åœ°å€+åç§»å€¼
	argp := add(unsafe.Pointer(&amp;amp;fn), sys.PtrSize)
	gp := getg() // è·å¾—å½“å‰Gçš„æŒ‡é’ˆ
    //è°ƒç”¨è€…çš„pcï¼Œä¹Ÿå°±æ˜¯æ‰§è¡Œå®Œæ­¤å‡½æ•°è¿”å›è°ƒç”¨è€…æ—¶çš„ä¸‹ä¸€æ¡æŒ‡ä»¤åœ°å€
	pc := getcallerpc() 
    // åˆ‡æ¢åˆ°ï¼ˆç³»ç»Ÿæ ˆï¼‰g0æ ˆä¸­
	systemstack(func() {
    //æ‰§è¡Œè°ƒç”¨newproc1()å‡½æ•°æ‰§è¡Œåˆ›å»ºåç¨‹
		newg := newproc1(fn, argp, siz, gp, pc)
		_p_ := getg().m.p.ptr()
        // æŠŠå½“å‰çš„Gå­˜æ”¾åœ¨runqé˜Ÿåˆ—ä¸­
		runqput(_p_, newg, true) 
        // å¦‚æœå½“å‰ç”±ç©ºé—²çš„P,æ²¡æœ‰ç¡çœ çš„M,ä¸»åç¨‹å¼€å§‹è¿è¡Œæ—¶
		if mainStarted {
			wakep() // åˆ›å»ºm,å¹¶è®¾ç½®ä¸ºæ´»è·ƒçŠ¶æ€
		}
	})
}
&lt;/code&gt;&lt;/pre&gt;&lt;ul&gt;
&lt;li&gt;åœ¨newprocå‡½æ•°ä¸­ä¸ºä»€ä¹ˆè¦åˆ‡æ¢åœ¨g0æ ˆä¸­æ‰§è¡Œå‘¢ï¼Ÿæ˜¯å› ä¸ºnewproc1()å‡½æ•°ä¸æ”¯æŒæ ˆå¢é•¿ï¼Œåç¨‹çš„æ ˆç©ºé—´å°(å‡ KB)ï¼Œä¸ºäº†é˜²æ­¢è¿è¡Œåç¨‹å‡½æ•°æ—¶æ ˆæº¢å‡ºï¼Œéœ€è¦åœ¨g0çš„æ ˆä¸Šè¿è¡Œï¼Œg0æ˜¯åˆ†é…åœ¨çº¿ç¨‹çš„æ ˆç©ºé—´(4MB)ä¸Šã€‚g0çš„æ ˆç©ºé—´å¾ˆå¤§ï¼Œè¿è¡Œåç¨‹å‡½æ•°æ—¶æ ˆä¸æº¢å‡ºã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;newproc1å‡½æ•°&#34;&gt;newproc1()å‡½æ•°&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;newproc1()æ˜¯åˆ›å»ºåç¨‹ æºç å¦‚ä¸‹ï¼š&lt;/li&gt;
&lt;/ul&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;å‚æ•°ï¼šåç¨‹å…¥å£ã€å‚æ•°é¦–åœ°å€ã€å‚æ•°å¤§å°ã€çˆ¶åç¨‹æŒ‡é’ˆã€è¿”å›åœ°å€
func newproc1(fn *funcval, argp unsafe.Pointer, narg int32, callergp *g, callerpc uintptr) *g {
	_g_ := getg()  // è·å¾—å½“å‰çš„G

	if fn == nil {
		_g_.m.throwing = -1 // do not dump full stacks
		throw(&amp;quot;go of nil func value&amp;quot;)
	}
     // ä¸ºäº†ä¿è¯æ•°æ®ä¸€è‡´æ€§ä¼šç¦æ­¢å½“å‰mè¢«æŠ¢å 
	acquirem() // disable preemption because it can be holding p in a local var
	siz := narg
	siz = (siz + 7) &amp;amp;^ 7

	// We could allocate a larger initial stack if necessary.
	// Not worth it: this is almost always an error.
	// 4*sizeof(uintreg): extra space added below
	// sizeof(uintreg): caller&#39;s LR (arm) or return address (x86, in gostartcall).
	if siz &amp;gt;= _StackMin-4*sys.RegSize-sys.RegSize {
		throw(&amp;quot;newproc: function arguments too large for new goroutine&amp;quot;)
	}

	_p_ := _g_.m.p.ptr()
    // å°è¯•è·å–ä¸€ä¸ªç©ºé—²çš„G,å¦‚æœæ²¡æœ‰ç©ºé—²çš„G,å°±ä¼šåˆ›å»ºæ–°çš„G,åˆ†é…æ ˆç©ºé—´,å¹¶æ·»åŠ åˆ°å…¨å±€allgsä¸­
	newg := gfget(_p_)
    // å¦‚æœæ²¡æœ‰ç©ºé—²çš„G
	if newg == nil {
    // å°±ä¼šåˆ›å»ºæ–°çš„G,åˆ†é…æ ˆç©ºé—´å¤§å°ä¸ºæœ€å°çš„2KB
		newg = malg(_StackMin)
        // è®¾ç½®çŠ¶æ€ä¸ºç­‰å¾…
		casgstatus(newg, _Gidle, _Gdead)
        //å¹¶æ·»åŠ åˆ°å…¨å±€allgsä¸­
		allgadd(newg) // publishes with a g-&amp;gt;status of Gdead so GC scanner doesn&#39;t look at uninitialized stack.
	}
	if newg.stack.hi == 0 {
		throw(&amp;quot;newproc1: newg missing stack&amp;quot;)
	}

	if readgstatus(newg) != _Gdead {
		throw(&amp;quot;newproc1: new g is not Gdead&amp;quot;)
	}

	totalSize := 4*sys.RegSize + uintptr(siz) + sys.MinFrameSize // extra space in case of reads slightly beyond frame
	totalSize += -totalSize &amp;amp; (sys.SpAlign - 1)                  // align to spAlign
	sp := newg.stack.hi - totalSize
	spArg := sp
	if usesLR {
		// caller&#39;s LR
		*(*uintptr)(unsafe.Pointer(sp)) = 0
		prepGoExitFrame(sp)
		spArg += sys.MinFrameSize
	}
	if narg &amp;gt; 0 {
        // å¦‚æœåç¨‹å…¥å£å‡½æ•°ç”±å‚æ•°ï¼Œä¼šå°†å‚æ•°ç§»åŠ¨åœ¨åç¨‹æ ˆä¸­ 
		memmove(unsafe.Pointer(spArg), argp, uintptr(narg))
		// This is a stack-to-stack copy. If write barriers
		// are enabled and the source stack is grey (the
		// destination is always black), then perform a
		// barrier copy. We do this *after* the memmove
		// because the destination stack may have garbage on
		// it.
		if writeBarrier.needed &amp;amp;&amp;amp; !_g_.m.curg.gcscandone {
			f := findfunc(fn.fn)
			stkmap := (*stackmap)(funcdata(f, _FUNCDATA_ArgsPointerMaps))
			if stkmap.nbit &amp;gt; 0 {
				// We&#39;re in the prologue, so it&#39;s always stack map index 0.
				bv := stackmapdata(stkmap, 0)
				bulkBarrierBitmap(spArg, spArg, uintptr(bv.n)*sys.PtrSize, 0, bv.bytedata)
			}
		}
	}
    // åˆå§‹åŒ–newg.schedè°ƒåº¦ç›¸å…³çš„ä¿¡æ¯
	memclrNoHeapPointers(unsafe.Pointer(&amp;amp;newg.sched), unsafe.Sizeof(newg.sched))
	newg.sched.sp = sp //è®¾ç½®ä¸ºåç¨‹æ ˆæŒ‡é’ˆ
	newg.stktopsp = sp
    // è®¾ç½®ä¸ºæŒ‡å‘åç¨‹å…¥å£å‡½æ•°çš„å…¥å£ï¼Œå½“åç¨‹è°ƒåº¦æ‰§è¡Œæ—¶ï¼Œè¿è¡Œåç¨‹å‡½æ•°
	newg.sched.pc = funcPC(goexit) + sys.PCQuantum // +PCQuantum so that previous instruction is in same function
	newg.sched.g = guintptr(unsafe.Pointer(newg))
	gostartcallfn(&amp;amp;newg.sched, fn)
    // è®¾ç½®ä¸ºçˆ¶åç¨‹è°ƒç”¨newprocå‡½æ•°ç»“æŸåçš„è¿”å›åœ°å€
	newg.gopc = callerpc
	newg.ancestors = saveAncestors(callergp)
    // è®¾ç½®startpcä¸ºåç¨‹å…¥å­”å‡½æ•°çš„èµ·å§‹åœ°å€
	newg.startpc = fn.fn 
	if _g_.m.curg != nil {
		newg.labels = _g_.m.curg.labels
	}
	if isSystemGoroutine(newg, false) {
		atomic.Xadd(&amp;amp;sched.ngsys, +1)
	}
    // è®¾ç½®åç¨‹ä¸ºè¿è¡ŒçŠ¶æ€
	casgstatus(newg, _Gdead, _Grunnable)

	if _p_.goidcache == _p_.goidcacheend {
		// Sched.goidgen is the last allocated id,
		// this batch must be [sched.goidgen+1, sched.goidgen+GoidCacheBatch].
		// At startup sched.goidgen=0, so main goroutine receives goid=1.
		_p_.goidcache = atomic.Xadd64(&amp;amp;sched.goidgen, _GoidCacheBatch)
		_p_.goidcache -= _GoidCacheBatch - 1
		_p_.goidcacheend = _p_.goidcache + _GoidCacheBatch
	}
    // ç»™åç¨‹èµ‹äºˆä¸€ä¸ªå”¯ä¸€çš„goid
	newg.goid = int64(_p_.goidcache)
	_p_.goidcache++
	if raceenabled {
		newg.racectx = racegostart(callerpc)
	}
	if trace.enabled {
		traceGoCreate(newg, newg.startpc)
	}
    // å…è®¸å½“å‰mè¢«æŠ¢å 
	releasem(_g_.m)

	return newg
}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;å›¾ç¤ºå¦‚ä¸‹&lt;br&gt;
&lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 214; 
			flex-basis: 514px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/go-goroutine%E4%B8%8Egmp%E6%A8%A1%E5%9E%8B%E7%9A%84%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3/2.png&#34; data-size=&#34;1903x887&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/go-goroutine%E4%B8%8Egmp%E6%A8%A1%E5%9E%8B%E7%9A%84%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3/2.png&#34;
			width=&#34;1903&#34;
			height=&#34;887&#34;
			srcset=&#34;https://zcj-git520.github.io/p/go-goroutine%E4%B8%8Egmp%E6%A8%A1%E5%9E%8B%E7%9A%84%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3/2_hu005dba7d92ca61057a969757b05a2c3b_575926_480x0_resize_box_3.png 480w, https://zcj-git520.github.io/p/go-goroutine%E4%B8%8Egmp%E6%A8%A1%E5%9E%8B%E7%9A%84%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3/2_hu005dba7d92ca61057a969757b05a2c3b_575926_1024x0_resize_box_3.png 1024w&#34;
			loading=&#34;lazy&#34;
			&gt;
	&lt;/a&gt;
	
&lt;/figure&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æ€»ç»“goroutineåˆ›å»ºè¿‡ç¨‹&lt;/li&gt;
&lt;/ul&gt;
&lt;ol&gt;
&lt;li&gt;ä¸ºäº†ä¿è¯æ•°æ®ä¸€è‡´æ€§ä¼šç¦æ­¢å½“å‰mè¢«æŠ¢å &lt;/li&gt;
&lt;li&gt;å°è¯•è·å–ä¸€ä¸ªç©ºé—²çš„G,å¦‚æœæ²¡æœ‰ç©ºé—²çš„G,å°±ä¼šåˆ›å»ºæ–°çš„G,åˆ†é…æ ˆç©ºé—´,çŠ¶æ€ä¸ºç­‰å¾…å¹¶æ·»åŠ åˆ°å…¨å±€allgsä¸­&lt;/li&gt;
&lt;li&gt;å¦‚æœåç¨‹å…¥å£å‡½æ•°ç”±å‚æ•°ï¼Œä¼šå°†å‚æ•°ç§»åŠ¨åœ¨åç¨‹æ ˆä¸­&lt;/li&gt;
&lt;li&gt;åˆå§‹åŒ–newg.schedè°ƒåº¦ç›¸å…³çš„ä¿¡æ¯ï¼Œè®¾ç½®çŠ¶æ€è¿è¡Œ&lt;/li&gt;
&lt;li&gt;å¾—åˆ°å”¯ä¸€çš„goid, å¹¶æ·»åŠ åˆ°runqé˜Ÿåˆ—ä¸­&lt;/li&gt;
&lt;li&gt;å¦‚æœå½“å‰æœ‰ç©ºé—²çš„P,æ²¡æœ‰ç¡çœ çš„M,å¹¶ä¸”ä¸»åç¨‹å¼€å§‹è¿è¡Œæ—¶ï¼Œå°±ä¼šåˆ›å»ºæ–°çš„æ´»è·ƒçš„M&lt;/li&gt;
&lt;li&gt;å½“gè¿è¡Œç»“æŸåï¼Œè®¾ç½®å…è®¸å½“å‰mè¢«æŠ¢å &lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&#34;goroutineçš„è®©å‡ºä¸æ¢å¤è°ƒåº¦æŠ¢å ç›‘æ§&#34;&gt;goroutineçš„è®©å‡ºä¸æ¢å¤ã€è°ƒåº¦ã€æŠ¢å ã€ç›‘æ§&lt;/h2&gt;
&lt;h3 id=&#34;goroutine-è®©å‡ºä¸æ¢å¤&#34;&gt;goroutine è®©å‡ºä¸æ¢å¤&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;åç¨‹çš„è®©å‡ºæ˜¯ç”±å‡½æ•°gopark()æ‰§è¡Œçš„&lt;/li&gt;
&lt;/ul&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;æºç å¦‚ä¸‹ï¼š
func gopark(unlockf func(*g, unsafe.Pointer) bool, lock unsafe.Pointer, reason waitReason, traceEv byte, traceskip int) {
	if reason != waitReasonSleep {
		checkTimeouts() // timeouts may expire while two goroutines keep the scheduler busy
	}
    // ç¦æ­¢å½“å‰mè¢«æŠ¢å 
	mp := acquirem()
	gp := mp.curg
	status := readgstatus(gp)
    // åˆ¤æ–­åç¨‹çš„æ˜¯å¦åœ¨è¿è¡ŒçŠ¶æ€
	if status != _Grunning &amp;amp;&amp;amp; status != _Gscanrunning {
		throw(&amp;quot;gopark: bad g status&amp;quot;)
	}
	mp.waitlock = lock
	mp.waitunlockf = unlockf
	gp.waitreason = reason
	mp.waittraceev = traceEv
	mp.waittraceskip = traceskip
    // è§£é™¤å¯¹mçš„æŠ¢å 
	releasem(mp)
	// can&#39;t do anything that might move the G between Ms here.
    // ä¸èƒ½åšä»»ä½•å¯èƒ½åœ¨ Ms ä¹‹é—´ç§»åŠ¨ G çš„äº‹æƒ…ã€‚
    // ä¿å­˜åç¨‹ï¼Œåˆ‡æ¢åœ¨go
	mcall(park_m)
}
func park_m(gp *g) {
	_g_ := getg()

	if trace.enabled {
		traceGoPark(_g_.m.waittraceev, _g_.m.waittraceskip)
	}
    //æ›´æ”¹åç¨‹ç”±è¿è¡ŒçŠ¶æ€åˆ°ç­‰å¾…çŠ¶æ€
	casgstatus(gp, _Grunning, _Gwaiting)
	dropg()
    &amp;quot;&amp;quot;&amp;quot;
    func dropg() {
    	_g_ := getg()
        // æŠŠmå½“å‰æ‰§è¡Œçš„ç½®ä¸ºnil(mä¸åœ¨è¿è¡Œè¿™ä¸ªå½“å‰å†™åç¨‹ï¼Œåç¨‹å°±æŒ‚èµ·äº†)
    	setMNoWB(&amp;amp;_g_.m.curg.m, nil)
    	setGNoWB(&amp;amp;_g_.m.curg, nil)
    }
    &amp;quot;&amp;quot;&amp;quot;

	if fn := _g_.m.waitunlockf; fn != nil {
		ok := fn(gp, _g_.m.waitlock)
		_g_.m.waitunlockf = nil
		_g_.m.waitlock = nil
		if !ok {
			if trace.enabled {
				traceGoUnpark(gp, 2)
			}
			casgstatus(gp, _Gwaiting, _Grunnable)
			execute(gp, true) // Schedule it back, never returns.
		}
	}
	schedule() // å¯»æ‰¾ä¸‹ä¸€ä¸ªG
}
//åœ¨Gä¸­ç”±å®šæ—¶è°ƒç”¨å›è°ƒå‡½æ•°f 
type timer struct {
	// If this timer is on a heap, which P&#39;s heap it is on.
	// puintptr rather than *p to match uintptr in the versions
	// of this struct defined in other packages.
	pp puintptr

	// Timer wakes up at when, and then at when+period, ... (period &amp;gt; 0 only)
	// each time calling f(arg, now) in the timer goroutine, so f must be
	// a well-behaved function and not block.
	//
	// when must be positive on an active timer.
	when   int64
	period int64
	f      func(interface{}, uintptr)
	arg    interface{}
	seq    uintptr

	// What to set the when field to in timerModifiedXX status.
	nextwhen int64

	// The status field holds one of the values below.
	status uint32
}
// Mark gp ready to run.
// å°†ç­‰å¾…åç¨‹çŠ¶æ€ç½®ä¸ºè¿è¡Œçš„çŠ¶æ€
func ready(gp *g, traceskip int, next bool) {
	if trace.enabled {
		traceGoUnpark(gp, traceskip)
	}

	status := readgstatus(gp)

	// Mark runnable.
	_g_ := getg()
    //// ç¦æ­¢å½“å‰mè¢«æŠ¢å 
	mp := acquirem() // disable preemption because it can be holding p in a local var
	if status&amp;amp;^_Gscan != _Gwaiting {
		dumpgstatus(gp)
		throw(&amp;quot;bad g-&amp;gt;status in ready&amp;quot;)
	}

	// status is Gwaiting or Gscanwaiting, make Grunnable and put on runq
	casgstatus(gp, _Gwaiting, _Grunnable) // æŠŠåç¨‹ç­‰å¾…çš„è½¬æ€ç½®ä¸ºå¯è¿è¡ŒçŠ¶æ€
	runqput(_g_.m.p.ptr(), gp, next)  // æ·»åŠ åœ¨è¿è¡Œé˜Ÿåˆ—ä¸­
	wakep()// å¦‚æœæ²¡æœ‰å¯æ‰§è¡Œçš„M,å°±åˆ›å»ºæ–°çš„m
	releasem(mp)  // é‡Šæ”¾å½“å‰çš„m
}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;å¦‚å›¾æ‰€ç¤º  &lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 93; 
			flex-basis: 224px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/go-goroutine%E4%B8%8Egmp%E6%A8%A1%E5%9E%8B%E7%9A%84%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3/4.png&#34; data-size=&#34;616x659&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/go-goroutine%E4%B8%8Egmp%E6%A8%A1%E5%9E%8B%E7%9A%84%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3/4.png&#34;
			width=&#34;616&#34;
			height=&#34;659&#34;
			srcset=&#34;https://zcj-git520.github.io/p/go-goroutine%E4%B8%8Egmp%E6%A8%A1%E5%9E%8B%E7%9A%84%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3/4_hu5613a8da5b016601d36fb944722fdf94_151142_480x0_resize_box_3.png 480w, https://zcj-git520.github.io/p/go-goroutine%E4%B8%8Egmp%E6%A8%A1%E5%9E%8B%E7%9A%84%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3/4_hu5613a8da5b016601d36fb944722fdf94_151142_1024x0_resize_box_3.png 1024w&#34;
			loading=&#34;lazy&#34;
			&gt;
	&lt;/a&gt;
	
&lt;/figure&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æ€»ç»“&lt;/li&gt;
&lt;/ul&gt;
&lt;ol&gt;
&lt;li&gt;gopark()æ˜¯è®©å‡ºå‡½æ•°ï¼Œç¦æ­¢å½“å‰mè¢«æŠ¢å ï¼Œåˆ¤æ–­å½“å‰çš„åç¨‹çŠ¶æ€æ˜¯å¦ä¸ºè¿è¡ŒçŠ¶æ€ã€‚&lt;/li&gt;
&lt;li&gt;dropg()è®©å½“å‰çš„mä¸åœ¨æ‰§è¡Œå½“å‰çš„G,ä¿®æ”¹å½“å‰gçš„çŠ¶æ€ä¸ºç­‰å¾…(åç¨‹æŒ‚èµ·)ï¼Œè°ƒç”¨schedule() å¯»æ‰¾ä¸‹ä¸€ä¸ªå¯æ‰§è¡ŒG&lt;/li&gt;
&lt;li&gt;timers ç­‰å¾…çš„gä¸­æ•°æ®ç»“æ„ï¼Œå®šæ—¶è°ƒç”¨å›è°ƒå‡½æ•°fï¼Œå°†gç½®ä¸ºäº†è¿è¡ŒçŠ¶æ€&lt;/li&gt;
&lt;li&gt;ready()å‡½æ•°æ˜¯å°†å”¤é†’ç­‰å¾…G,å°†Gçš„çŠ¶æ€æ›´æ”¹ä¸ºå¯è¿è¡ŒçŠ¶æ€ï¼Œå¹¶æ·»åŠ åœ¨è¿è¡Œçš„é˜Ÿåˆ—ä¸­mï¼Œå¦‚æœæ²¡æœ‰å¯æ‰§è¡Œçš„M,å°±åˆ›å»ºæ–°çš„m&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;goroutine-ç›‘æ§&#34;&gt;goroutine ç›‘æ§&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;ä½¿ç”¨checkTimers()æ£€æŸ¥åˆ°æ—¶é—´è¿è¡Œçš„å”¤é†’g&lt;/li&gt;
&lt;/ul&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;æºç å¦‚ä¸‹
checkTimers(pp *p, now int64) (rnow, pollUntil int64, ran bool) {
  	// If it&#39;s not yet time for the first timer, or the first adjusted
  	// timer, then there is nothing to do.
  	next := int64(atomic.Load64(&amp;amp;pp.timer0When))
  	nextAdj := int64(atomic.Load64(&amp;amp;pp.timerModifiedEarliest))
  	if next == 0 || (nextAdj != 0 &amp;amp;&amp;amp; nextAdj &amp;lt; next) {
  		next = nextAdj
  	}
  
  	if next == 0 {
  		// No timers to run or adjust.
  		return now, 0, false
  	}
  
  	if now == 0 {
  		now = nanotime()
  	}
  	if now &amp;lt; next {
  		// Next timer is not ready to run, but keep going
  		// if we would clear deleted timers.
  		// This corresponds to the condition below where
  		// we decide whether to call clearDeletedTimers.
  		if pp != getg().m.p.ptr() || int(atomic.Load(&amp;amp;pp.deletedTimers)) &amp;lt;= int(atomic.Load(&amp;amp;pp.numTimers)/4) {
  			return now, next, false
  		}
  	}
  
  	lock(&amp;amp;pp.timersLock)
  
  	if len(pp.timers) &amp;gt; 0 {
  		adjusttimers(pp, now)
  		for len(pp.timers) &amp;gt; 0 {
  			// Note that runtimer may temporarily unlock
  			// pp.timersLock.
  			if tw := runtimer(pp, now); tw != 0 {
  				if tw &amp;gt; 0 {
  					pollUntil = tw
  				}
  				break
  			}
  			ran = true
  		}
  	}
  
  	// If this is the local P, and there are a lot of deleted timers,
  	// clear them out. We only do this for the local P to reduce
  	// lock contention on timersLock.
  	if pp == getg().m.p.ptr() &amp;amp;&amp;amp; int(atomic.Load(&amp;amp;pp.deletedTimers)) &amp;gt; len(pp.timers)/4 {
  		clearDeletedTimers(pp)
  	}
  
  	unlock(&amp;amp;pp.timersLock)
  
  	return now, pollUntil, ran
  }
&lt;/code&gt;&lt;/pre&gt;&lt;ul&gt;
&lt;li&gt;åç¨‹çš„ç›‘æ§æ˜¯ç”±ä¸“é—¨çš„ç›‘æ§åç¨‹ç¨‹æ¥è¿è¡Œï¼Œç›‘æ§åç¨‹æ˜¯ç”±ä¸»åç¨‹åˆ›å»ºè€Œæ¥
ï¼Œç›‘æ§åç¨‹ä¸gpmä¸­çš„åç¨‹ä¸ä¸€æ ·ï¼Œå®ƒä¸æ˜¯ç”±gpmè¿›è¡Œè°ƒåº¦ï¼Œå½“ç„¶äº†ä¹Ÿä¸éœ€è¦P,
ç›‘æ§timerï¼Œå¹¶æŒ‰éœ€è°ƒæ•´gçš„ä¼‘çœ æ—¶é—´ï¼Œå¦‚æœæ²¡æœ‰å¯æ‰§è¡Œçš„M,å°±åˆ›å»ºæ–°çš„mæ‰§è¡Œè¢«å”¤é†’çš„G,
ç¡®ä¿è¢«å”¤é†’gè¢«æ‰§è¡Œã€‚
å¦‚å›¾  &lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 153; 
			flex-basis: 368px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/go-goroutine%E4%B8%8Egmp%E6%A8%A1%E5%9E%8B%E7%9A%84%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3/5.png&#34; data-size=&#34;1256x819&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/go-goroutine%E4%B8%8Egmp%E6%A8%A1%E5%9E%8B%E7%9A%84%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3/5.png&#34;
			width=&#34;1256&#34;
			height=&#34;819&#34;
			srcset=&#34;https://zcj-git520.github.io/p/go-goroutine%E4%B8%8Egmp%E6%A8%A1%E5%9E%8B%E7%9A%84%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3/5_hu682cbf00a0aebc2341d65e28e3999df2_184463_480x0_resize_box_3.png 480w, https://zcj-git520.github.io/p/go-goroutine%E4%B8%8Egmp%E6%A8%A1%E5%9E%8B%E7%9A%84%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3/5_hu682cbf00a0aebc2341d65e28e3999df2_184463_1024x0_resize_box_3.png 1024w&#34;
			loading=&#34;lazy&#34;
			&gt;
	&lt;/a&gt;
	
&lt;/figure&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;goroutine-æŠ¢å &#34;&gt;goroutine æŠ¢å &lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;å¯¹è¿è¡Œè¿‡é•¿çš„gè¿›è¡ŒæŠ¢å ï¼Œå³å½“gè¿è¡Œæ—¶é—´è¶…è¿‡è¿è¡Œé˜ˆå€¼çš„gå¼ºåˆ¶è®©å‡ºm
è¿è¡Œæ—¶é—´æ˜¯ç”±Pçš„ç»“æ„syscalltickã€schedtickã€timer0Whenç­‰è®°å½•ã€‚&lt;/li&gt;
&lt;li&gt;é€šè¿‡æ ˆå¢é•¿æ—¶ï¼šå½“stackguard = stackPreempt,ä¸æ‰§è¡Œæ ˆå¢é•¿ï¼Œè€Œæ˜¯æ‰§è¡Œåç¨‹è°ƒåº¦,
è¿™æ ·å°±è®©åç¨‹è®©å‡ºæ ˆã€‚&lt;/li&gt;
&lt;li&gt;è¿™ç§æŠ¢å ä¾èµ–æ ˆå¢é•¿ï¼Œæœ‰ç¼ºé™·ã€‚æ‰€ä»¥æœ‰asyncPreempté€šè¿‡ä¿¡å·æ–¹å¼è¿›è¡Œå¼‚æ­¥æŠ¢å &lt;br&gt;
å¦‚å›¾æ‰€ç¤º  &lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 135; 
			flex-basis: 325px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/go-goroutine%E4%B8%8Egmp%E6%A8%A1%E5%9E%8B%E7%9A%84%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3/6.png&#34; data-size=&#34;1157x853&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/go-goroutine%E4%B8%8Egmp%E6%A8%A1%E5%9E%8B%E7%9A%84%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3/6.png&#34;
			width=&#34;1157&#34;
			height=&#34;853&#34;
			srcset=&#34;https://zcj-git520.github.io/p/go-goroutine%E4%B8%8Egmp%E6%A8%A1%E5%9E%8B%E7%9A%84%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3/6_huc14b31ec4abc9db0f402c5310d9f9d21_373269_480x0_resize_box_3.png 480w, https://zcj-git520.github.io/p/go-goroutine%E4%B8%8Egmp%E6%A8%A1%E5%9E%8B%E7%9A%84%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3/6_huc14b31ec4abc9db0f402c5310d9f9d21_373269_1024x0_resize_box_3.png 1024w&#34;
			loading=&#34;lazy&#34;
			&gt;
	&lt;/a&gt;
	
&lt;/figure&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;goroutine-è°ƒåº¦&#34;&gt;goroutine è°ƒåº¦&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;è°ƒç”¨schedule()å‡½æ•°è¿›è¡Œåç¨‹çš„è°ƒåº¦&lt;/li&gt;
&lt;/ul&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;æºç å¦‚ä¸‹ï¼š
func schedule() {
	_g_ := getg() // è·å¾—å½“å‰çš„G

	if _g_.m.locks != 0 {
		throw(&amp;quot;schedule: holding locks&amp;quot;)
	}
    // åˆ¤æ–­å½“å‰çš„Må’Œå½“å‰çš„Gæ˜¯å¦ç»‘å®š
	if _g_.m.lockedg != 0 {
        // å¦‚æœå½“å‰çš„Mç»‘å®šG,å°±é˜»å¡m(ä¼‘çœ M)
		stoplockedm()
		execute(_g_.m.lockedg.ptr(), false) // Never returns.
	}

	// We should not schedule away from a g that is executing a cgo call,
	// since the cgo call is using the m&#39;s g0 stack.
	if _g_.m.incgo {
		throw(&amp;quot;schedule: in cgo&amp;quot;)
	}

top:
	pp := _g_.m.p.ptr()
	pp.preempt = false
    // åˆ¤æ–­Gcæ˜¯å¦åœ¨ç­‰å¾…æ‰§è¡Œ
	if sched.gcwaiting != 0 {
        //æ˜¯åœ¨ç­‰å¾…æ‰§è¡Œï¼Œå…ˆæ‰§è¡Œgcï¼Œæ‰§è¡Œå®Œåœ¨æ‰§è¡Œåç»­æ“ä½œ
		gcstopm() 
		goto top
	}
	if pp.runSafePointFn != 0 {
		runSafePointFn()
	}

	// Sanity check: if we are spinning, the run queue should be empty.
	// Check this before calling checkTimers, as that might call
	// goready to put a ready goroutine on the local run queue.
	if _g_.m.spinning &amp;amp;&amp;amp; (pp.runnext != 0 || pp.runqhead != pp.runqtail) {
		throw(&amp;quot;schedule: spinning with local work&amp;quot;)
	}
    //æ£€æŸ¥æ˜¯å¦æœ‰è¦è¢«æ‰§è¡Œçš„Timer
	checkTimers(pp, 0)

	var gp *g
	var inheritTime bool

	// Normal goroutines will check for need to wakeP in ready,
	// but GCworkers and tracereaders will not, so the check must
	// be done here instead.
    // æ™®é€šçš„ goroutine ä¼šæ£€æŸ¥æ˜¯å¦éœ€è¦åœ¨å‡†å¤‡å¥½æ—¶å”¤é†’ï¼Œ 
    // ä½† GCworkers å’Œè·Ÿè¸ªè¯»å–å™¨ä¸ä¼šï¼Œæ‰€ä»¥æ£€æŸ¥å¿…é¡» 
    // åœ¨è¿™é‡Œå®Œæˆã€‚
	tryWakeP := false
	if trace.enabled || trace.shutdown {
		gp = traceReader()
		if gp != nil {
			casgstatus(gp, _Gwaiting, _Grunnable)
			traceGoUnpark(gp, 0)
			tryWakeP = true
		}
	}
	if gp == nil &amp;amp;&amp;amp; gcBlackenEnabled != 0 {
		gp = gcController.findRunnableGCWorker(_g_.m.p.ptr())
		tryWakeP = tryWakeP || gp != nil
	}
	if gp == nil {
		// Check the global runnable queue once in a while to ensure fairness.
		// Otherwise two goroutines can completely occupy the local runqueue
		// by constantly respawning each other.
        / æ¯éš”ä¸€æ®µæ—¶é—´æ£€æŸ¥ä¸€ä¸‹å…¨å±€å¯è¿è¡Œé˜Ÿåˆ—ä»¥ç¡®ä¿å…¬å¹³ã€‚ 
        // å¦åˆ™ä¸¤ä¸ª goroutine å¯ä»¥å®Œå…¨å ç”¨æœ¬åœ°è¿è¡Œé˜Ÿåˆ—
        // é€šè¿‡ä¸æ–­ç›¸äº’é‡ç”Ÿã€‚
        // æœ‰%61çš„æ¦‚ç‡æŠŠGä»å…¨å±€è¿è¡Œé˜Ÿåˆ—ä¸­æ¬ç§»åˆ°æœ¬åœ°å¯è¿è¡Œé˜Ÿåˆ—ï¼Œä¿éšœæœ¬åœ°å¯è¿è¡Œé˜Ÿåˆ—
            æœ‰Gè¿è¡Œï¼Œå…¨å±€é˜Ÿåˆ—ä¹Ÿèƒ½æ”¾åœ¨æœ¬éƒ½é˜Ÿåˆ—ä¸­
		if _g_.m.p.ptr().schedtick%61 == 0 &amp;amp;&amp;amp; sched.runqsize &amp;gt; 0 {
			lock(&amp;amp;sched.lock)
			gp = globrunqget(_g_.m.p.ptr(), 1)
			unlock(&amp;amp;sched.lock)
		}
	}
	if gp == nil {
        // æ²¡æœ‰å¾…è¿è¡Œçš„G å°±ç°åœ¨æœ¬åœ°å¯è¿è¡Œé˜Ÿåˆ—æŸ¥æ‰¾
		gp, inheritTime = runqget(_g_.m.p.ptr())
		// We can see gp != nil here even if the M is spinning,
		// if checkTimers added a local goroutine via goready.
	}
	if gp == nil {
        // æœ¬åœ°é˜Ÿåˆ—æ²¡æœ‰ï¼Œå°±è°ƒç”¨findrunnable()ï¼Œç›´åˆ°æœ‰å¾…æ‰§è¡Œçš„gæ‰è¿”å›(å…ˆåœ¨æœ¬åœ°
            è¿è¡Œé˜Ÿåˆ—ï¼Œå…¨å±€é˜Ÿåˆ—ã€ç­‰å¾…çš„io, å…¶ä»–çš„P)
		gp, inheritTime = findrunnable() // blocks until work is available
	}

	// This thread is going to run a goroutine and is not spinning anymore,
	// so if it was marked as spinning we need to reset it now and potentially
	// start a new spinning M.
	if _g_.m.spinning {
		resetspinning()
	}

	if sched.disable.user &amp;amp;&amp;amp; !schedEnabled(gp) {
		// Scheduling of this goroutine is disabled. Put it on
		// the list of pending runnable goroutines for when we
		// re-enable user scheduling and look again.
		lock(&amp;amp;sched.lock)
		if schedEnabled(gp) {
			// Something re-enabled scheduling while we
			// were acquiring the lock.
			unlock(&amp;amp;sched.lock)
		} else {
			sched.disable.runnable.pushBack(gp)
			sched.disable.n++
			unlock(&amp;amp;sched.lock)
			goto top
		}
	}

	// If about to schedule a not-normal goroutine (a GCworker or tracereader),
	// wake a P if there is one.
	if tryWakeP {
		wakep()
	}
    // åˆ¤æ–­è·å¾—çš„Gæœ‰æ²¡æœ‰ç»‘å®šçš„M,æœ‰å°±é˜»å¡g, å†æ¬¡è¿›è¡Œè°ƒåº¦
	if gp.lockedm != 0 {
		// Hands off own p to the locked m,
		// then blocks waiting for a new p.
		startlockedm(gp)
		goto top
	}
    // ä½¿ç”¨executeå‡½æ•°è®©mæ‰§è¡Œg
	execute(gp, inheritTime)
}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;å¦‚å›¾æ‰€ç¤º  &lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 103; 
			flex-basis: 248px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/go-goroutine%E4%B8%8Egmp%E6%A8%A1%E5%9E%8B%E7%9A%84%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3/7.png&#34; data-size=&#34;896x865&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/go-goroutine%E4%B8%8Egmp%E6%A8%A1%E5%9E%8B%E7%9A%84%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3/7.png&#34;
			width=&#34;896&#34;
			height=&#34;865&#34;
			srcset=&#34;https://zcj-git520.github.io/p/go-goroutine%E4%B8%8Egmp%E6%A8%A1%E5%9E%8B%E7%9A%84%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3/7_huebf4099418eefb5d5e40ab8835dd1ae1_193577_480x0_resize_box_3.png 480w, https://zcj-git520.github.io/p/go-goroutine%E4%B8%8Egmp%E6%A8%A1%E5%9E%8B%E7%9A%84%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3/7_huebf4099418eefb5d5e40ab8835dd1ae1_193577_1024x0_resize_box_3.png 1024w&#34;
			loading=&#34;lazy&#34;
			&gt;
	&lt;/a&gt;
	
&lt;/figure&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æ€»ç»“&lt;/li&gt;
&lt;/ul&gt;
&lt;ol&gt;
&lt;li&gt;åˆ¤æ–­å½“å‰çš„Må’Œå½“å‰çš„Gæ˜¯å¦ç»‘å®šï¼Œå¦‚æœå½“å‰çš„Mç»‘å®šG,å°±é˜»å¡m(ä¼‘çœ M)&lt;/li&gt;
&lt;li&gt;åˆ¤æ–­Gcæ˜¯å¦åœ¨ç­‰å¾…æ‰§è¡Œï¼Œæ˜¯åœ¨ç­‰å¾…æ‰§è¡Œï¼Œå…ˆæ‰§è¡Œgcï¼Œæ‰§è¡Œå®Œåœ¨æ‰§è¡Œåç»­æ“ä½œ&lt;/li&gt;
&lt;li&gt;æ£€æŸ¥æ˜¯å¦æœ‰è¦è¢«æ‰§è¡Œçš„Timer&lt;/li&gt;
&lt;li&gt;æ™®é€šçš„ goroutine ä¼šæ£€æŸ¥æ˜¯å¦éœ€è¦åœ¨å‡†å¤‡å¥½æ—¶å”¤é†’ï¼Œä½† GCworkers å’Œè·Ÿè¸ªè¯»å–å™¨ä¸ä¼šï¼Œæ‰€ä»¥æ£€æŸ¥å¿…é¡»&lt;/li&gt;
&lt;li&gt;æœ‰%61çš„æ¦‚ç‡æŠŠGä»å…¨å±€è¿è¡Œé˜Ÿåˆ—ä¸­æ¬ç§»åˆ°æœ¬åœ°å¯è¿è¡Œé˜Ÿåˆ—ï¼Œä¿éšœæœ¬åœ°å¯è¿è¡Œé˜Ÿåˆ—æœ‰Gè¿è¡Œï¼Œå…¨å±€é˜Ÿåˆ—ä¹Ÿèƒ½æ”¾åœ¨æœ¬éƒ½é˜Ÿåˆ—ä¸­&lt;/li&gt;
&lt;li&gt;æ²¡æœ‰å¾…è¿è¡Œçš„Gå°±ç°åœ¨æœ¬åœ°å¯è¿è¡Œé˜Ÿåˆ—æŸ¥æ‰¾ï¼Œæœ¬åœ°é˜Ÿåˆ—æ²¡æœ‰ï¼Œå°±è°ƒç”¨findrunnable()ï¼Œç›´åˆ°æœ‰å¾…æ‰§è¡Œçš„gæ‰è¿”å›(å…ˆåœ¨æœ¬åœ°
è¿è¡Œé˜Ÿåˆ—ï¼Œå…¨å±€é˜Ÿåˆ—ã€ç­‰å¾…çš„io, å…¶ä»–çš„Pä¸­åˆ†é…G)&lt;/li&gt;
&lt;li&gt;åˆ¤æ–­è·å¾—çš„Gæœ‰æ²¡æœ‰ç»‘å®šçš„M,æœ‰å°±é˜»å¡g, å†æ¬¡è¿›è¡Œè°ƒåº¦&lt;/li&gt;
&lt;li&gt;ä½¿ç”¨executeå‡½æ•°è®©mæ‰§è¡Œg,å¾…è¿è¡Œgç»‘å®šm,è°ƒç”¨gogo(&amp;amp;gp.sched)åç¨‹çš„ç°åœºæ¢å¤ç­‰&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&#34;è°ƒåº¦å™¨çš„è®¾è®¡ç­–ç•¥&#34;&gt;è°ƒåº¦å™¨çš„è®¾è®¡ç­–ç•¥&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;å‡å°‘çº¿ç¨‹çš„åˆ›å»ºä¸é”€æ¯cupçš„å¼€é”€ï¼ŒGPMæ˜¯çº¿ç¨‹çš„å¤ç”¨ã€‚å³å½“æ²¡æœ‰ å¯è¿è¡Œçš„Gæ—¶ï¼Œå°†Mä¼‘çœ ,Pç©ºé—²ã€‚å½“æœ‰å¯æ‰§è¡ŒGæ˜¯æ‰¾ç©ºé—²çš„Pï¼Œåœ¨å°†Må”¤é†’ï¼Œæ‰§è¡ŒGï¼Œç›´åˆ° main.main é€€å‡ºï¼Œruntime.main æ‰§è¡Œ Defer å’Œ Panic å¤„ç†ï¼Œæˆ–è°ƒç”¨ runtime.exit é€€å‡ºç¨‹åº&lt;/li&gt;
&lt;li&gt;work stealing æœºåˆ¶ï¼šå½“æœ¬çº¿ç¨‹æ— å¯è¿è¡Œçš„ G æ—¶ï¼Œå°è¯•ä»å…¶ä»–çº¿ç¨‹ç»‘å®šçš„ P å·å– Gï¼Œè€Œä¸æ˜¯é”€æ¯çº¿ç¨‹ã€‚&lt;/li&gt;
&lt;li&gt;hand off æœºåˆ¶ï¼š&lt;br&gt;
1.å½“æœ¬çº¿ç¨‹å› ä¸º G è¿›è¡Œç³»ç»Ÿè°ƒç”¨é˜»å¡æ—¶ï¼Œçº¿ç¨‹é‡Šæ”¾ç»‘å®šçš„ Pï¼ŒæŠŠ P è½¬ç§»ç»™å…¶ä»–ç©ºé—²çš„çº¿ç¨‹æ‰§è¡Œã€‚&lt;br&gt;
2.åˆ©ç”¨å¹¶è¡Œï¼šGOMAXPROCS è®¾ç½® P çš„æ•°é‡ï¼Œæœ€å¤šæœ‰ GOMAXPROCS ä¸ªçº¿ç¨‹åˆ†å¸ƒåœ¨å¤šä¸ª CPU ä¸ŠåŒæ—¶è¿è¡Œã€‚GOMAXPROCS ä¹Ÿé™åˆ¶äº†å¹¶å‘çš„ç¨‹åº¦ï¼Œæ¯”å¦‚ GOMAXPROCS = æ ¸æ•°/2ï¼Œåˆ™æœ€å¤šåˆ©ç”¨äº†ä¸€åŠçš„ CPU æ ¸è¿›è¡Œå¹¶è¡Œã€‚ &lt;br&gt;
3.æŠ¢å ï¼šåœ¨ coroutine ä¸­è¦ç­‰å¾…ä¸€ä¸ªåç¨‹ä¸»åŠ¨è®©å‡º CPU æ‰æ‰§è¡Œä¸‹ä¸€ä¸ªåç¨‹ï¼Œåœ¨ Go ä¸­ï¼Œä¸€ä¸ª goroutine æœ€å¤šå ç”¨ CPU 10msï¼Œé˜²æ­¢å…¶ä»– goroutine è¢«é¥¿æ­»ï¼Œè¿™å°±æ˜¯ goroutine ä¸åŒäº coroutine çš„ä¸€ä¸ªåœ°æ–¹ã€‚&lt;br&gt;
4.å…¨å±€ G é˜Ÿåˆ—ï¼šåœ¨æ–°çš„è°ƒåº¦å™¨ä¸­ä¾ç„¶æœ‰å…¨å±€ G é˜Ÿåˆ—ï¼Œä½†åŠŸèƒ½å·²ç»è¢«å¼±åŒ–äº†ï¼Œå½“ M æ‰§è¡Œ work stealing ä»å…¶ä»– P å·ä¸åˆ° G æ—¶ï¼Œå®ƒå¯ä»¥ä»å…¨å±€ G é˜Ÿåˆ—è·å– Gã€‚&lt;/li&gt;
&lt;li&gt;è°ƒåº¦å¦‚å›¾æ‰€ç¤º&lt;br&gt;
&lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 179; 
			flex-basis: 431px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/go-goroutine%E4%B8%8Egmp%E6%A8%A1%E5%9E%8B%E7%9A%84%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3/3.png&#34; data-size=&#34;970x540&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/go-goroutine%E4%B8%8Egmp%E6%A8%A1%E5%9E%8B%E7%9A%84%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3/3.png&#34;
			width=&#34;970&#34;
			height=&#34;540&#34;
			srcset=&#34;https://zcj-git520.github.io/p/go-goroutine%E4%B8%8Egmp%E6%A8%A1%E5%9E%8B%E7%9A%84%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3/3_hu6b3ed4c0e6c5dd3549ade2aca3a75bc3_223170_480x0_resize_box_3.png 480w, https://zcj-git520.github.io/p/go-goroutine%E4%B8%8Egmp%E6%A8%A1%E5%9E%8B%E7%9A%84%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3/3_hu6b3ed4c0e6c5dd3549ade2aca3a75bc3_223170_1024x0_resize_box_3.png 1024w&#34;
			loading=&#34;lazy&#34;
			&gt;
	&lt;/a&gt;
	
&lt;/figure&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;å‚è€ƒæ–‡çŒ®&#34;&gt;å‚è€ƒæ–‡çŒ®&lt;/h2&gt;
&lt;p&gt;1ã€&lt;a class=&#34;link&#34; href=&#34;https://www.jianshu.com/p/fa696563c38a&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://www.jianshu.com/p/fa696563c38a&lt;/a&gt;
2.&lt;a class=&#34;link&#34; href=&#34;https://www.zhihu.com/people/kylin-lab&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://www.zhihu.com/people/kylin-lab&lt;/a&gt;&lt;/p&gt;
</description>
        </item>
        <item>
        <title>è¿›ç¨‹ã€çº¿ç¨‹ã€åç¨‹</title>
        <link>https://zcj-git520.github.io/p/c/c-/</link>
        <pubDate>Tue, 28 Sep 2021 22:00:38 +0800</pubDate>
        
        <guid>https://zcj-git520.github.io/p/c/c-/</guid>
        <description>&lt;img src="https://zcj-git520.github.io/p/c/c/10.png" alt="Featured image of post è¿›ç¨‹ã€çº¿ç¨‹ã€åç¨‹" /&gt;&lt;h2 id=&#34;ç†è§£è¿›ç¨‹ä¸çº¿ç¨‹&#34;&gt;ç†è§£è¿›ç¨‹ä¸çº¿ç¨‹&lt;/h2&gt;
&lt;h3 id=&#34;è¿›ç¨‹&#34;&gt;è¿›ç¨‹&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;è¿›ç¨‹æ˜¯ç¨‹åºä¸€æ¬¡åŠ¨æ€æ‰§è¡Œè¿‡ç¨‹ã€è¿›ç¨‹æ˜¯æ“ä½œç³»ç»Ÿåˆ†é…èµ„æº(å†…å­˜ã€ioèµ„æºã€cpuç­‰)å’Œèµ„æºè°ƒåº¦çš„åŸºæœ¬å•ä½ã€‚ç¨‹åºæ˜¯æŒ‡ä»¤ã€æ•°æ®åŠå…¶ç»„ç»‡å½¢å¼çš„æè¿°ï¼Œè¿›ç¨‹æ˜¯ç¨‹åºçš„å®ä½“ã€‚&lt;/li&gt;
&lt;li&gt;è¿›ç¨‹æ˜¯ç”± è¿›ç¨‹æ§åˆ¶å—PCBã€ç›¸å…³ç¨‹åºæ®µå’Œè¯¥ç¨‹åºæ®µè¿›è¡Œæ“ä½œçš„æ•°æ®ç»“æ„é›†ä¸‰ä¸ªéƒ¨åˆ†ç»„æˆã€‚&lt;/li&gt;
&lt;li&gt;è¿›ç¨‹çš„äº”ä¸­çŠ¶æ€ï¼šåˆ›å»ºã€å°±ç»ªã€è¿è¡Œã€é˜»å¡ã€ç»ˆæ­¢&lt;/li&gt;
&lt;li&gt;äº”ç§çŠ¶æ€è½¬æ¢å¦‚å›¾æ‰€ç¤ºï¼š
&lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 396; 
			flex-basis: 950px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/c/c/1.png&#34; data-size=&#34;697x176&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/c/c/1.png&#34;
			width=&#34;697&#34;
			height=&#34;176&#34;
			srcset=&#34;https://zcj-git520.github.io/p/c/c/1_hu867c95a79e12df8701fb93f07d38202e_22636_480x0_resize_box_3.png 480w, https://zcj-git520.github.io/p/c/c/1_hu867c95a79e12df8701fb93f07d38202e_22636_1024x0_resize_box_3.png 1024w&#34;
			loading=&#34;lazy&#34;
			&gt;
	&lt;/a&gt;
	
&lt;/figure&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;çº¿ç¨‹&#34;&gt;çº¿ç¨‹&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;çº¿ç¨‹æ˜¯cupè°ƒåº¦å’Œåˆ†é…çš„åŸºæœ¬å•ä½ä¹Ÿæ˜¯cupæ‰§è¡Œçš„æœ€å°å•ä½, æœ‰ç‹¬ç«‹çš„æ ˆç©ºé—´ï¼Œå…±äº«å †ç©ºé—´ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;è¿›ç¨‹ä¸çº¿ç¨‹çš„å…³ç³»&#34;&gt;è¿›ç¨‹ä¸çº¿ç¨‹çš„å…³ç³»&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;ä¸€ä¸ªè¿›ç¨‹å¯ä»¥åˆ›å»ºå’Œæ’¤é”€å¤šä¸ªçº¿ç¨‹ï¼Œ ä¸€ä¸ªè¿›ç¨‹å¿…é¡»æœ‰ä¸€ä¸ªçº¿ç¨‹(ä¸»çº¿ç¨‹), çº¿ç¨‹å…±äº«è¿›ç¨‹æ‰€æœ‰èµ„æºï¼Œè¿›ç¨‹æ˜¯çº¿ç¨‹çš„å®¹å™¨ï¼Œå…³ç³»å¦‚å›¾æ‰€ç¤ºï¼š&lt;br&gt;
&lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 282; 
			flex-basis: 677px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/c/c/2.png&#34; data-size=&#34;491x174&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/c/c/2.png&#34;
			width=&#34;491&#34;
			height=&#34;174&#34;
			srcset=&#34;https://zcj-git520.github.io/p/c/c/2_hu53069a5ffbb3f88620ec70a2a20f56ba_161705_480x0_resize_box_3.png 480w, https://zcj-git520.github.io/p/c/c/2_hu53069a5ffbb3f88620ec70a2a20f56ba_161705_1024x0_resize_box_3.png 1024w&#34;
			loading=&#34;lazy&#34;
			&gt;
	&lt;/a&gt;
	
&lt;/figure&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;å¹¶å‘ä¸å¹¶è¡Œ&#34;&gt;å¹¶å‘ä¸å¹¶è¡Œ&lt;/h2&gt;
&lt;h3 id=&#34;å¹¶å‘&#34;&gt;å¹¶å‘&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;å¹¶å‘ï¼šå¤šè¿›ç¨‹(çº¿ç¨‹)ç¨‹åºåœ¨ä¸€ä¸ªæ ¸cupä¸²è¡Œè¿è¡Œï¼Œå½“ä¸€ä¸ªè¿›ç¨‹(çº¿ç¨‹)é˜»å¡çš„æ—¶å€™ï¼Œåˆ‡æ¢åˆ°å¦å¤–ç­‰å¾…æ‰§è¡Œçš„è¿›ç¨‹(çº¿ç¨‹) å¦‚å›¾&lt;br&gt;
&lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 176; 
			flex-basis: 424px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/c/c/3.png&#34; data-size=&#34;470x266&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/c/c/3.png&#34;
			width=&#34;470&#34;
			height=&#34;266&#34;
			srcset=&#34;https://zcj-git520.github.io/p/c/c/3_huf7020f04dcb48d893cde63f717a76dfc_28449_480x0_resize_box_3.png 480w, https://zcj-git520.github.io/p/c/c/3_huf7020f04dcb48d893cde63f717a76dfc_28449_1024x0_resize_box_3.png 1024w&#34;
			loading=&#34;lazy&#34;
			&gt;
	&lt;/a&gt;
	
&lt;/figure&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;å¹¶è¡Œ&#34;&gt;å¹¶è¡Œ&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;å¹¶è¡Œï¼šå¤šçº¿ç¨‹ç¨‹åºåœ¨å¤šæ ¸cupå¹¶è¡Œè¿è¡Œï¼Œå¦‚å›¾&lt;br&gt;
&lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 193; 
			flex-basis: 463px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/c/c/4.png&#34; data-size=&#34;535x277&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/c/c/4.png&#34;
			width=&#34;535&#34;
			height=&#34;277&#34;
			srcset=&#34;https://zcj-git520.github.io/p/c/c/4_hu785964094345562635a27d3f581c929f_23668_480x0_resize_box_3.png 480w, https://zcj-git520.github.io/p/c/c/4_hu785964094345562635a27d3f581c929f_23668_1024x0_resize_box_3.png 1024w&#34;
			loading=&#34;lazy&#34;
			&gt;
	&lt;/a&gt;
	
&lt;/figure&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;ç”¨æˆ·æ€å’Œå†…æ ¸æ€ç”¨æˆ·ç©ºé—´å’Œå†…æ ¸ç©ºé—´&#34;&gt;ç”¨æˆ·æ€å’Œå†…æ ¸æ€(ç”¨æˆ·ç©ºé—´å’Œå†…æ ¸ç©ºé—´)&lt;/h2&gt;
&lt;h3 id=&#34;ç‰¹æƒçº§åˆ’åˆ†&#34;&gt;ç‰¹æƒçº§åˆ’åˆ†&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;cpuä¸€å…±æœ‰0ï½4å››ä¸ªç‰¹æƒçº§ï¼ŒR0çº§æœ€é«˜ï¼ŒR3çº§æœ€ä½ã€‚ç”¨æˆ·æ€æŒ‡çš„æ˜¯ï¼šç¨‹åºè¿è¡Œåœ¨R3çº§ä»¥ä¸Šï¼Œé€šå¸¸åœ¨åº”ç”¨ç¨‹åºä¸­è¿è¡Œï¼Œå†…æ ¸æ€æ˜¯æŒ‡ï¼šç¨‹åºè¿è¡Œåœ¨R0çº§ä»¥ä¸Šï¼Œé€šå¸¸åœ¨å†…æ ¸ä¸­è¿è¡Œã€‚ä¸€èˆ¬æ¥è¯´ï¼Œæˆ‘ä»¬å†™çš„åº”ç”¨ç¨‹åºå°±æ˜¯è¿è¡Œåœ¨R3çº§è¡£ä»¥ä¸Šã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;3ä¸­ç§ç”¨æˆ·æ€ä¸å†…æ ¸æ€çš„åˆ‡æ¢&#34;&gt;3ä¸­ç§ç”¨æˆ·æ€ä¸å†…æ ¸æ€çš„åˆ‡æ¢&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;ç³»ç»Ÿè°ƒç”¨ï¼šç”¨æˆ·æ€è¿›ç¨‹é€šè¿‡ç³»ç»Ÿè°ƒç”¨ç”³è¯·ä½¿ç”¨æ“ä½œç³»ç»Ÿæä¾›çš„æœåŠ¡ç¨‹åºå®Œæˆå·¥ä½œï¼Œæ¯”å¦‚å‰ä¾‹ä¸­fork()å®é™…ä¸Šå°±æ˜¯æ‰§è¡Œäº†ä¸€ä¸ªåˆ›å»ºæ–°è¿›ç¨‹çš„ç³»ç»Ÿè°ƒç”¨ã€‚è€Œç³»ç»Ÿè°ƒç”¨çš„æœºåˆ¶å…¶æ ¸å¿ƒè¿˜æ˜¯ä½¿ç”¨äº†æ“ä½œç³»ç»Ÿä¸ºç”¨æˆ·ç‰¹åˆ«å¼€æ”¾çš„ä¸€ä¸ªä¸­æ–­æ¥å®ç°ï¼Œä¾‹å¦‚Linuxçš„int 80hä¸­æ–­ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å¼‚å¸¸ï¼šå½“CPUåœ¨æ‰§è¡Œè¿è¡Œåœ¨ç”¨æˆ·æ€ä¸‹çš„ç¨‹åºæ—¶ï¼Œå‘ç”Ÿäº†æŸäº›äº‹å…ˆä¸å¯çŸ¥çš„å¼‚å¸¸ï¼Œè¿™æ—¶ä¼šè§¦å‘ç”±å½“å‰è¿è¡Œè¿›ç¨‹åˆ‡æ¢åˆ°å¤„ç†æ­¤å¼‚å¸¸çš„å†…æ ¸ç›¸å…³ç¨‹åºä¸­ï¼Œä¹Ÿå°±è½¬åˆ°äº†å†…æ ¸æ€ï¼Œæ¯”å¦‚ç¼ºé¡µå¼‚å¸¸ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å¤–å›´è®¾å¤‡çš„ä¸­æ–­ï¼š å½“å¤–å›´è®¾å¤‡å®Œæˆç”¨æˆ·è¯·æ±‚çš„æ“ä½œåï¼Œä¼šå‘CPUå‘å‡ºç›¸åº”çš„ä¸­æ–­ä¿¡å·ï¼Œè¿™æ—¶CPUä¼šæš‚åœæ‰§è¡Œä¸‹ä¸€æ¡å³å°†è¦æ‰§è¡Œçš„æŒ‡ä»¤è½¬è€Œå»æ‰§è¡Œä¸ä¸­æ–­ä¿¡å·å¯¹åº”çš„å¤„ç†ç¨‹åºï¼Œå¦‚æœå…ˆå‰æ‰§è¡Œçš„æŒ‡ä»¤æ˜¯ç”¨æˆ·æ€ä¸‹çš„ç¨‹åºï¼Œé‚£ä¹ˆè¿™ä¸ªè½¬æ¢çš„è¿‡ç¨‹è‡ªç„¶ä¹Ÿå°±å‘ç”Ÿäº†ç”±ç”¨æˆ·æ€åˆ°å†…æ ¸æ€çš„åˆ‡æ¢ã€‚æ¯”å¦‚ç¡¬ç›˜è¯»å†™æ“ä½œçš„å®Œæˆï¼Œç³»ç»Ÿä¼šåˆ‡æ¢åˆ°ç¡¬ç›˜è¯»å†™çš„ä¸­æ–­å¤„ç†ç¨‹åºä¸­æ‰§è¡Œåç»­æ“ä½œç­‰ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ç”¨æˆ·æ€ä¸å†…æ ¸æ€ç»“æ„å¦‚å›¾ï¼š&lt;br&gt;
&lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 121; 
			flex-basis: 291px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/c/c/5.png&#34; data-size=&#34;638x526&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/c/c/5.png&#34;
			width=&#34;638&#34;
			height=&#34;526&#34;
			srcset=&#34;https://zcj-git520.github.io/p/c/c/5_hua341d62eb4441aa20e3670f5a5321e7c_124841_480x0_resize_box_3.png 480w, https://zcj-git520.github.io/p/c/c/5_hua341d62eb4441aa20e3670f5a5321e7c_124841_1024x0_resize_box_3.png 1024w&#34;
			loading=&#34;lazy&#34;
			&gt;
	&lt;/a&gt;
	
&lt;/figure&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ç”¨æˆ·æ€ä¸å†…æ ¸æ€çš„åˆ‡æ¢æ˜¯éœ€è¦å¼€é”€&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;æ¥æºï¼šlinuxç”¨æˆ·æ€å’Œå†…æ ¸æ€ç†è§£(&lt;a class=&#34;link&#34; href=&#34;https://www.cnblogs.com/weifeng1463/p/11660260.html&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://www.cnblogs.com/weifeng1463/p/11660260.html&lt;/a&gt;)&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;è¿›ç¨‹ä¸çº¿ç¨‹ç”¨æˆ·æ€åˆ°å†…æ ¸æ€çš„å¼€é”€&#34;&gt;è¿›ç¨‹ä¸çº¿ç¨‹ç”¨æˆ·æ€åˆ°å†…æ ¸æ€çš„å¼€é”€&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;å¤šè¿›ç¨‹(çº¿ç¨‹)å¯ä»¥æé«˜cpuçš„åˆ©ç”¨ç‡ï¼Œå‡å°‘ç¨‹åºé˜»å¡å¸¦æ¥cpué—²ç½®çš„æƒ…å†µï¼Œä¹Ÿå°±æ˜¯æå‡cpuçš„è¿è¡Œæ—¶é—´ç‰‡ï¼Œä½†æ˜¯è¿‡å¤šçš„åˆ›å»ºè¿›ç¨‹(çº¿ç¨‹)ä¹Ÿä¼šèŠ±è´¹é¢å¤–çš„cpuæ—¶é—´ç‰‡è¿›è¡Œè¿›ç¨‹(çº¿ç¨‹)çš„èŠ±é”€ã€‚è¿›ç¨‹çš„åˆ›å»ºã€å°±ç»ªã€è¿è¡Œã€é˜»å¡ã€ç»ˆæ­¢ï¼Œè¿™äº›éƒ½ä¼šå¸¦æ¥cupèŠ±é”€ã€‚ä¾‹å¦‚åœ¨32ä½çš„æ“ä½œç³»ç»Ÿä¸­åˆ›å»ºä¸€ä¸ªè¿›ç¨‹éœ€è¦å¼€è¾Ÿ4GBçš„è™šæ‹Ÿå†…å­˜ç©ºé—´ï¼Œåˆ›å»ºä¸€ä¸ªçº¿ç¨‹éœ€è¦å ç”¨çº¦4MBçš„å†…å­˜ã€‚&lt;br&gt;
&lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 172; 
			flex-basis: 413px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/c/c/6.png&#34; data-size=&#34;1002x582&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/c/c/6.png&#34;
			width=&#34;1002&#34;
			height=&#34;582&#34;
			srcset=&#34;https://zcj-git520.github.io/p/c/c/6_hud198df65b05650e861fc5dc9032c3d5f_195182_480x0_resize_box_3.png 480w, https://zcj-git520.github.io/p/c/c/6_hud198df65b05650e861fc5dc9032c3d5f_195182_1024x0_resize_box_3.png 1024w&#34;
			loading=&#34;lazy&#34;
			&gt;
	&lt;/a&gt;
	
&lt;/figure&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;è¿›ç¨‹(çº¿ç¨‹)çš„è°ƒåº¦ä¹Ÿä¼šå¸¦æ¥cupçš„èŠ±é”€ã€‚cupè¿›ç¨‹(çº¿ç¨‹)çš„è°ƒåº¦å°±æ˜¯è¿›ç¨‹(çº¿ç¨‹)åˆ‡æ¢ï¼Œè¿›ç¨‹(çº¿ç¨‹)çš„åˆ‡æ¢å°±ä¼šè¿›è¡Œçº¿ç¨‹åœ¨å†…æ ¸æ€çš„è°ƒåº¦ã€‚cupåˆ‡æ¢çš„å†…æ ¸æ€çš„çº¿ç¨‹ï¼Œä¸æ“ä½œç”¨æˆ·æ€çš„çº¿ç¨‹ï¼Œç”¨æˆ·æ€çº¿ç¨‹é€šè¿‡ç³»ç»Ÿè°ƒç”¨è§¦å‘å†…æ ¸çº¿ç¨‹ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ä¸ºå‡å°‘cpuå†…æ ¸æ€çº¿ç¨‹ä¹‹é—´çš„åˆ‡æ¢ï¼Œæ“ä½œç³»ç»Ÿä¸­ä½¿ç”¨(ç”¨æˆ·æ€è¿›ç¨‹(çº¿ç¨‹):å†…æ ¸æ€è¿›ç¨‹(çº¿ç¨‹))1:1ï¼Œç”¨æˆ·æ€ç›´æ¥é€šè¿‡ç³»ç»Ÿï¼Œç›´æ¥ä¸å†…æ ¸æ€çš„çº¿ç¨‹ä¸€ä¸€å¯¹åº”ã€‚å¦‚å›¾&lt;br&gt;
&lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 87; 
			flex-basis: 209px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/c/c/7.png&#34; data-size=&#34;649x742&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/c/c/7.png&#34;
			width=&#34;649&#34;
			height=&#34;742&#34;
			srcset=&#34;https://zcj-git520.github.io/p/c/c/7_hub3d98815bced38b8bc21c868cdbcca3f_129141_480x0_resize_box_3.png 480w, https://zcj-git520.github.io/p/c/c/7_hub3d98815bced38b8bc21c868cdbcca3f_129141_1024x0_resize_box_3.png 1024w&#34;
			loading=&#34;lazy&#34;
			&gt;
	&lt;/a&gt;
	
&lt;/figure&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ç”¨æˆ·æ€ä¸€ä¸ªè¿›ç¨‹(çº¿ç¨‹)å¯¹åº”ä¸€ä¸ªå†…æ ¸æ€çš„è¿›ç¨‹(çº¿ç¨‹)æ˜¯å‡å°‘äº†å†…æ ¸æ€ä¸­è¿›ç¨‹(çº¿ç¨‹)åˆ‡æ¢çš„èŠ±é”€ï¼Œä½†æ˜¯ä¹Ÿå¢åŠ äº†å†…æ ¸æ€ä¸­è¿›ç¨‹(çº¿ç¨‹)åˆ›å»ºçš„å¼€é”€ã€‚å‡å°‘å†…æ ¸æ€ä¸­è¿›ç¨‹(çº¿ç¨‹)åˆ‡æ¢ä¸åˆ›å»ºå¸¦æ¥çš„å¼€é”€ï¼Œæ“ä½œç³»ç»Ÿä¸­ä½¿ç”¨(ç”¨æˆ·æ€è¿›ç¨‹(çº¿ç¨‹):å†…æ ¸æ€è¿›ç¨‹(çº¿ç¨‹))N:1ï¼Œå‡å°‘å†…æ ¸æ€ä¸­è¿›ç¨‹(çº¿ç¨‹)çš„åˆ›å»ºï¼ŒåŒæ—¶åœ¨ç”¨æˆ·æ€è¿›è¡Œçº¿ç¨‹çš„ä¹‹é—´çš„åˆ‡æ¢ï¼Œä¸ç‰µè¿å†…æ ¸æ€çº¿ç¨‹çš„åˆ‡æ¢ï¼Œå‡å°‘cupçš„èŠ±é”€ã€‚
&lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 129; 
			flex-basis: 310px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/c/c/8.png&#34; data-size=&#34;947x733&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/c/c/8.png&#34;
			width=&#34;947&#34;
			height=&#34;733&#34;
			srcset=&#34;https://zcj-git520.github.io/p/c/c/8_huc6701a49375d06381df34c24cc00a698_215784_480x0_resize_box_3.png 480w, https://zcj-git520.github.io/p/c/c/8_huc6701a49375d06381df34c24cc00a698_215784_1024x0_resize_box_3.png 1024w&#34;
			loading=&#34;lazy&#34;
			&gt;
	&lt;/a&gt;
	
&lt;/figure&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;è™½ç„¶N:1å‡å°‘å†…æ ¸æ€ä¸­è¿›ç¨‹(çº¿ç¨‹)åˆ‡æ¢ä¸åˆ›å»ºå¸¦æ¥çš„å¼€é”€ï¼Œä½†æ˜¯å½“ç”¨æˆ·æ€çš„è¿›ç¨‹(çº¿ç¨‹)é˜»å¡æ—¶ï¼Œå…¶ä»–è¿›ç¨‹(çº¿ç¨‹)å°±åªèƒ½ç­‰å¾…ï¼Œè¿™é€ æˆä¸å•çº¿ç¨‹ä¸€æ ·çš„é—®é¢˜ã€‚æ“ä½œç³»ç»Ÿç»“åˆ1:1å’Œn:1æ¨¡å‹çš„æœ‰ç‚¹å½¢æˆn:mæ¨¡å‹ï¼Œå†…æ ¸æ€ä¸­è¿›ç¨‹(çº¿ç¨‹)è¿›å…¥é˜»å¡çŠ¶æ€æ—¶ï¼Œ ç”¨æˆ·æ€çš„è¿›ç¨‹(çº¿ç¨‹)åˆ‡æ¢å¦ä¸€ä¸ªå†…æ ¸æ€ä¸­çš„çº¿ç¨‹ã€‚&lt;br&gt;
&lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 124; 
			flex-basis: 298px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/c/c/9.png&#34; data-size=&#34;832x670&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/c/c/9.png&#34;
			width=&#34;832&#34;
			height=&#34;670&#34;
			srcset=&#34;https://zcj-git520.github.io/p/c/c/9_hud3b7e360612e399d72998f5a6843f71d_181995_480x0_resize_box_3.png 480w, https://zcj-git520.github.io/p/c/c/9_hud3b7e360612e399d72998f5a6843f71d_181995_1024x0_resize_box_3.png 1024w&#34;
			loading=&#34;lazy&#34;
			&gt;
	&lt;/a&gt;
	
&lt;/figure&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;åç¨‹&#34;&gt;åç¨‹&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;åç¨‹å’Œçº¿ç¨‹ä¸€æ ·æœ‰ç‹¬ç«‹çš„æ ˆç©ºé—´ï¼Œå…±äº«å †ç©ºé—´ï¼Œæ˜¯ç”¨æˆ·çº§çš„çº¿ç¨‹ï¼Œæ˜¯æœ‰ç”¨æˆ·è‡ªå·±è°ƒåº¦ã€‚ä¸€ä¸ªçº¿ç¨‹å¯ä»¥åˆ›å»ºå¤šä¸ªåç¨‹ï¼Œåç¨‹æ˜¯è½»é‡çº§çš„çº¿ç¨‹ã€‚åˆ›å»ºä¸€ä¸ªåç¨‹åªéœ€è¦å ç”¨4~5kBçš„è™šæ‹Ÿå†…å­˜ï¼Œåˆ›å»ºåç¨‹çš„å¼€é”€ç›¸æ¯”è¿›ç¨‹ä¸çº¿ç¨‹ä½å¤ªå¤šäº†ã€‚&lt;br&gt;
&lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 231; 
			flex-basis: 555px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/c/c/10.png&#34; data-size=&#34;808x349&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/c/c/10.png&#34;
			width=&#34;808&#34;
			height=&#34;349&#34;
			srcset=&#34;https://zcj-git520.github.io/p/c/c/10_hu5bb3a4baa791897c79c1df91e792ef0e_243913_480x0_resize_box_3.png 480w, https://zcj-git520.github.io/p/c/c/10_hu5bb3a4baa791897c79c1df91e792ef0e_243913_1024x0_resize_box_3.png 1024w&#34;
			loading=&#34;lazy&#34;
			&gt;
	&lt;/a&gt;
	
&lt;/figure&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;å‚è€ƒæ–‡çŒ®&#34;&gt;å‚è€ƒæ–‡çŒ®&lt;/h2&gt;
&lt;p&gt;1ã€&lt;a class=&#34;link&#34; href=&#34;https://zhuanlan.zhihu.com/p/337978321&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://zhuanlan.zhihu.com/p/337978321&lt;/a&gt;
2ã€&lt;a class=&#34;link&#34; href=&#34;https://www.jianshu.com/p/fa696563c38a&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://www.jianshu.com/p/fa696563c38a&lt;/a&gt;&lt;/p&gt;
</description>
        </item>
        <item>
        <title>go mapçš„æ·±å…¥ç†è§£</title>
        <link>https://zcj-git520.github.io/p/go-map%E7%9A%84%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3/</link>
        <pubDate>Mon, 20 Sep 2021 22:00:38 +0800</pubDate>
        
        <guid>https://zcj-git520.github.io/p/go-map%E7%9A%84%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3/</guid>
        <description>&lt;img src="https://zcj-git520.github.io/p/go-map%E7%9A%84%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3/3.png" alt="Featured image of post go mapçš„æ·±å…¥ç†è§£" /&gt;&lt;h1 id=&#34;goland-åŸºç¡€ä¹‹map&#34;&gt;goland åŸºç¡€ä¹‹map&lt;/h1&gt;
&lt;h2 id=&#34;mapçš„å†…éƒ¨ç»“æ„&#34;&gt;mapçš„å†…éƒ¨ç»“æ„&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;go mapæ˜¯ä½¿ç”¨çš„å“ˆå¸Œè¡¨æ„å»ºçš„&lt;/li&gt;
&lt;li&gt;mapçš„ç»“æ„å¯åˆ†ä¸ºï¼šhmapçš„ç»“æ„ä½“å’Œbmap(æ¡¶)ï¼Œhmapç»“æ„ä½“è®°å½•è¿™mapçš„åŸºç¡€ä¿¡æ¯(åŒ…æ‹¬mapå­˜å‚¨ä¸ªæ•°ï¼Œ
æ¡¶çš„ä¸ªæ•°ï¼Œhashç§å­ï¼Œæ¡¶çš„æ•°æ®ï¼Œæ‰©å®¹æ—¶æ—§æ¡¶çš„æ•°æ®ä»¥åŠè¿ç§»ä¸ªæ•°ï¼ˆmapæ‰©å®¹ä¸æ˜¯ä¸€æ¬¡æ€§è¿ç§»å®Œï¼‰)&lt;/li&gt;
&lt;li&gt;æºç å¦‚ä¸‹&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;/blockquote&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;å®šä¹‰hmapçš„ç»“æ„ï¼š
type hmap struct {
	// Note: the format of the hmap is also encoded in cmd/compile/internal/gc/reflect.go.
	// Make sure this stays in sync with the compiler&#39;s definition.
    // map å­˜å‚¨å…ƒç´ çš„è®¡æ•°
	count     int // # live cells == size of map.  Must be first (used by len() builtin)
    flags     uint8 // mapçš„çŠ¶æ€æ ‡è¯†ï¼Œæ¡¶æ˜¯å¦åœ¨å¢æ”¹ï¼Œæ‰©å®¹æˆ–è€…ç¼©å®¹
    //æ¡¶çš„ä¸ªæ•°/é‡‡ç”¨çš„ä¸è¿ç®—æ³•è®¡ç®—æ¡¶çš„ä¸ªæ•°ï¼Œæ¡¶çš„ä¸ªæ•°ä¸º2çš„æ•´æ•°æ¬¡å¹‚
	B         uint8  // log_2 of # of buckets (can hold up to loadFactor * 2^B items)
	//æº¢å‡ºçš„æ¡¶çš„æ•°é‡çš„è¿‘ä¼¼å€¼
    noverflow uint16 // approximate number of overflow buckets; see incrnoverflow for details
	hash0     uint32 // hash seed
    //æŒ‡å‘æ¡¶æ•°æ®çš„æŒ‡é’ˆ
	buckets    unsafe.Pointer // array of 2^B Buckets. may be nil if count==0.
	// æŒ‡å‘æ—§æ¡¶æ•°æ®çš„æŒ‡é’ˆ
    oldbuckets unsafe.Pointer // previous bucket array of half the size, non-nil only when growing
	//æ‰©å®¹è®¡æ•°
    nevacuate  uintptr        // progress counter for evacuation (buckets less than this have been evacuated)
    // ä¿å­˜æº¢å‡ºæ¡¶çš„é“¾è¡¨å’Œæœªä½¿ç”¨çš„æº¢å‡ºæ¡¶æ•°ç»„çš„é¦–åœ°å€
	extra *mapextra // optional fields
}
// æ¡¶çš„å®ç°ç»“æ„
type bmap struct {
	// å½“å‰ç‰ˆæœ¬bucketCntçš„å€¼æ˜¯8ï¼Œä¸€ä¸ªæ¡¶æœ€å¤šå­˜å‚¨8ä¸ªkey-valueå¯¹
	tophash [bucketCnt]uint8
}

&lt;/code&gt;&lt;/pre&gt;&lt;ul&gt;
&lt;li&gt;bmapå­˜å‚¨ç»“æ„å¦‚å›¾æ‰€ç¤º&lt;br&gt;
&lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 142; 
			flex-basis: 341px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/go-map%E7%9A%84%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3/1.png&#34; data-size=&#34;631x444&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/go-map%E7%9A%84%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3/1.png&#34;
			width=&#34;631&#34;
			height=&#34;444&#34;
			srcset=&#34;https://zcj-git520.github.io/p/go-map%E7%9A%84%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3/1_hu1600ca2579a18bcbdc1f1a6cd5b9810d_76803_480x0_resize_box_3.png 480w, https://zcj-git520.github.io/p/go-map%E7%9A%84%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3/1_hu1600ca2579a18bcbdc1f1a6cd5b9810d_76803_1024x0_resize_box_3.png 1024w&#34;
			loading=&#34;lazy&#34;
			&gt;
	&lt;/a&gt;
	
&lt;/figure&gt;&lt;/li&gt;
&lt;li&gt;å‰8ä¸ªæ˜¯hashå€¼ï¼Œ8ä¸ªkeyå’Œ8ä¸ªvalueã€åé¢æ˜¯æº¢å‡ºæ¡¶çš„æŒ‡é’ˆ&lt;/li&gt;
&lt;li&gt;æº¢å‡ºæ¡¶æ˜¯å‡å°‘mapæ‰©å®¹æ¬¡æ•°ï¼Œæº¢å‡ºæ¡¶çš„ç»“æ„ä¸bmapæ¡¶çš„ç»“æ„ä¸€æ ·çš„&lt;/li&gt;
&lt;li&gt;æº¢å‡ºæ¡¶çš„åŸºç¡€ç»“æ„ï¼š&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;/blockquote&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code class=&#34;language-//&#34; data-lang=&#34;//&#34;&gt;  type mapextra struct {
  	// If both key and elem do not contain pointers and are inline, then we mark bucket
  	// type as containing no pointers. This avoids scanning such maps.
  	// However, bmap.overflow is a pointer. In order to keep overflow buckets
  	// alive, we store pointers to all overflow buckets in hmap.extra.overflow and hmap.extra.oldoverflow.
  	// overflow and oldoverflow are only used if key and elem do not contain pointers.
  	// overflow contains overflow buckets for hmap.buckets.
  	// oldoverflow contains overflow buckets for hmap.oldbuckets.
  	// The indirection allows to store a pointer to the slice in hiter.
  	overflow    *[]*bmap  //è®°å½•å·²ç»è¢«ä½¿ç”¨çš„æº¢å‡ºæ¡¶
  	oldoverflow *[]*bmap  // æ‰©å®¹é˜¶æ®µæ—§çš„æº¢å‡ºæ¡¶
  
  	// nextOverflow holds a pointer to a free overflow bucket.
  	nextOverflow *bmap   //æŒ‡å‘ä¸‹ä¸€ä¸ªç©ºé—²çš„æº¢å‡ºæ¡¶
  }
&lt;/code&gt;&lt;/pre&gt;&lt;ul&gt;
&lt;li&gt;å½“æ¡¶çš„ä¸ªæ•°å¤§äº2çš„4æ¬¡æ–¹æ—¶å°±ä¼šä½¿ç”¨æº¢å‡ºæ¡¶æºç å¦‚ä¸‹&lt;/li&gt;
&lt;/ul&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;func makeBucketArray(t *maptype, b uint8, dirtyalloc unsafe.Pointer) (buckets unsafe.Pointer, nextOverflow *bmap) {
	// æ¡¶çš„ä¸ªæ•°
    base := bucketShift(b)
	nbuckets := base
	// For small b, overflow buckets are unlikely.
	// Avoid the overhead of the calculation.
	if b &amp;gt;= 4 {
        // ä½¿ç”¨æº¢å‡ºæ¡¶
		// Add on the estimated number of overflow buckets
		// required to insert the median number of elements
		// used with this value of b.
		nbuckets += bucketShift(b - 4)//è®¡ç®—æº¢å‡ºæ¡¶çš„æ•°é‡å’Œä¸æ˜¯æº¢å‡ºæ¡¶çš„æ•°é‡çš„å’Œ
		sz := t.bucket.size * nbuckets
		up := roundupsize(sz)
		if up != sz {
			nbuckets = up / t.bucket.size //å¾—å‡ºæ¡¶çš„æ•°é‡
		}
	}

	if dirtyalloc == nil {
        // æ²¡æœ‰è¢«åˆ›å»ºæ¡¶ï¼Œç”³è¯·åˆ›å»ºæ¡¶çš„ï¼Œè¿”å›æ¡¶çš„é¦–åœ°å€
		buckets = newarray(t.bucket, int(nbuckets))
	} else {
		// dirtyalloc was previously generated by
		// the above newarray(t.bucket, int(nbuckets))
		// but may not be empty.
		buckets = dirtyalloc
		size := t.bucket.size * nbuckets
		if t.bucket.ptrdata != 0 {
			memclrHasPointers(buckets, size)
		} else {
			memclrNoHeapPointers(buckets, size)
		}
	}

	if base != nbuckets {
		// We preallocated some overflow buckets.
		// To keep the overhead of tracking these overflow buckets to a minimum,
		// we use the convention that if a preallocated overflow bucket&#39;s overflow
		// pointer is nil, then there are more available by bumping the pointer.
		// We need a safe non-nil pointer for the last overflow bucket; just use buckets.
		//ç©ºé—²æ¡¶çš„åœ°å€
        nextOverflow = (*bmap)(add(buckets, base*uintptr(t.bucketsize)))
		last := (*bmap)(add(buckets, (nbuckets-1)*uintptr(t.bucketsize)))
		last.setoverflow(t, (*bmap)(buckets))
	}
	return buckets, nextOverflow
}
&lt;/code&gt;&lt;/pre&gt;&lt;ul&gt;
&lt;li&gt;å¦‚å›¾æ‰€ç¤º&lt;br&gt;
&lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 184; 
			flex-basis: 441px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/go-map%E7%9A%84%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3/2.png&#34; data-size=&#34;1636x889&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/go-map%E7%9A%84%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3/2.png&#34;
			width=&#34;1636&#34;
			height=&#34;889&#34;
			srcset=&#34;https://zcj-git520.github.io/p/go-map%E7%9A%84%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3/2_hu425c8a15ea5dff908d9430989255e351_318909_480x0_resize_box_3.png 480w, https://zcj-git520.github.io/p/go-map%E7%9A%84%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3/2_hu425c8a15ea5dff908d9430989255e351_318909_1024x0_resize_box_3.png 1024w&#34;
			loading=&#34;lazy&#34;
			&gt;
	&lt;/a&gt;
	
&lt;/figure&gt;&lt;/li&gt;
&lt;li&gt;ä½¿ç”¨mapæ—¶éœ€è¦make(map[type]type,len,cap)æ‰èƒ½ä½¿ç”¨ã€‚&lt;/li&gt;
&lt;li&gt;make æºç å¦‚ä¸‹ï¼š&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;/blockquote&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;func makemap(t *maptype, hint int, h *hmap) *hmap {
    // åˆ¤æ–­æ˜¯å¦è¶…è¿‡å†…å­˜çš„é™åˆ¶
	mem, overflow := math.MulUintptr(uintptr(hint), t.bucket.size)
	if overflow || mem &amp;gt; maxAlloc {
		hint = 0
	}

	// initialize Hmap
	if h == nil {
		h = new(hmap)
	}
	h.hash0 = fastrand()// è·å–éšæœºçš„hashå€¼

	// Find the size parameter B which will hold the requested # of elements.
	// For hint &amp;lt; 0 overLoadFactor returns false since hint &amp;lt; bucketCnt.
	B := uint8(0)
	for overLoadFactor(hint, B) {
		B++
	}
	h.B = B

	// allocate initial hash table
	// if B == 0, the buckets field is allocated lazily later (in mapassign)
	// If hint is large zeroing this memory could take a while.
	if h.B != 0 {
		var nextOverflow *bmap
        // åˆ›å»ºmapçš„å­˜å‚¨æ•°æ®ï¼Œè¿”å›çš„æ¡¶çš„æ•°æ®çš„åœ°å€ï¼Œä¸‹ä¸€ä¸ªæº¢å‡ºæ¡¶çš„åœ°å€
		h.buckets, nextOverflow = makeBucketArray(t, h.B, nil)
		if nextOverflow != nil {
			h.extra = new(mapextra)
			h.extra.nextOverflow = nextOverflow
		}
	}

	return h
}
&lt;/code&gt;&lt;/pre&gt;&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;mapçš„å®Œæ•´ç»“æ„å¦‚å›¾ï¼š
&lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 259; 
			flex-basis: 623px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/go-map%E7%9A%84%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3/3.png&#34; data-size=&#34;1503x579&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/go-map%E7%9A%84%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3/3.png&#34;
			width=&#34;1503&#34;
			height=&#34;579&#34;
			srcset=&#34;https://zcj-git520.github.io/p/go-map%E7%9A%84%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3/3_hu50c7ad8b87ebb1655f26b2166388bb8a_150234_480x0_resize_box_3.png 480w, https://zcj-git520.github.io/p/go-map%E7%9A%84%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3/3_hu50c7ad8b87ebb1655f26b2166388bb8a_150234_1024x0_resize_box_3.png 1024w&#34;
			loading=&#34;lazy&#34;
			&gt;
	&lt;/a&gt;
	
&lt;/figure&gt;&lt;/p&gt;
&lt;h2 id=&#34;mapæ‰©å®¹&#34;&gt;mapæ‰©å®¹&lt;/h2&gt;
&lt;h3 id=&#34;æ‰©å®¹æ¡ä»¶&#34;&gt;æ‰©å®¹æ¡ä»¶&lt;/h3&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;å½“è´Ÿè½½å› å­(loadFactorNum*(bucketShift(B)/loadFactorDen&amp;gt;6.5  -&amp;gt; ç¿»å€æ‰©å®¹&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å½“è´Ÿè½½å› å­å°äº6.5ï¼Œä½†æ˜¯æº¢å‡ºæ¡¶çš„æ•°é‡å¤§äº2çš„15æ¬¡æ–¹  -&amp;gt; ç­‰é‡æ‰©å®¹&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;æºä»£ç å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;blockquote&gt;
&lt;/blockquote&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;// overLoadFactor reports whether count items placed in 1&amp;lt;&amp;lt;B buckets is over loadFactor.
// è´Ÿè½½å› å­å¤§äº6.5
func overLoadFactor(count int, B uint8) bool {
	return count &amp;gt; bucketCnt &amp;amp;&amp;amp; uintptr(count) &amp;gt; loadFactorNum*(bucketShift(B)/loadFactorDen)
}
// æº¢å‡ºæ¡¶è¿‡å¤šæ—¶
func tooManyOverflowBuckets(noverflow uint16, B uint8) bool {
	// If the threshold is too low, we do extraneous work.
	// If the threshold is too high, maps that grow and shrink can hold on to lots of unused memory.
	// &amp;quot;too many&amp;quot; means (approximately) as many overflow buckets as regular buckets.
	// See incrnoverflow for more details.
	if B &amp;gt; 15 {
		B = 15
	}
	// The compiler doesn&#39;t see here that B &amp;lt; 16; mask B to generate shorter shift code.
	return noverflow &amp;gt;= uint16(1)&amp;lt;&amp;lt;(B&amp;amp;15)
}
// æ‰©å®¹æºç 

func hashGrow(t *maptype, h *hmap) {
	// If we&#39;ve hit the load factor, get bigger.
	// Otherwise, there are too many overflow buckets,
	// so keep the same number of buckets and &amp;quot;grow&amp;quot; laterally.
	bigger := uint8(1)
	if !overLoadFactor(h.count+1, h.B) {
        //ç­‰é‡æ‰©å®¹
		bigger = 0
		h.flags |= sameSizeGrow
	}
	oldbuckets := h.buckets
	newbuckets, nextOverflow := makeBucketArray(t, h.B+bigger, nil)// ä»æ–°åˆ†é…æ•°æ®åœ°å€

	flags := h.flags &amp;amp;^ (iterator | oldIterator)
	if h.flags&amp;amp;iterator != 0 {
        // è¿­ä»£çš„æ—¶å€™æ¬è¿æ—§æ¡¶
		flags |= oldIterator
	}
	// commit the grow (atomic wrt gc)
	h.B += bigger  // æ¡¶çš„ä¸ªæ•°
	h.flags = flags
	h.oldbuckets = oldbuckets
	h.buckets = newbuckets
	h.nevacuate = 0
	h.noverflow = 0
    // æº¢å‡ºæ¡¶é’»ä¾¿ä¸ºæ—§æº¢å‡ºæ¡¶
	if h.extra != nil &amp;amp;&amp;amp; h.extra.overflow != nil {
		// Promote current overflow buckets to the old generation.
		if h.extra.oldoverflow != nil {
			throw(&amp;quot;oldoverflow is not nil&amp;quot;)
		}
		h.extra.oldoverflow = h.extra.overflow
		h.extra.overflow = nil
	}
	if nextOverflow != nil {
		if h.extra == nil {
			h.extra = new(mapextra)
		}
		h.extra.nextOverflow = nextOverflow
	}

	// the actual copying of the hash table data is done incrementally
	// by growWork() and evacuate().
}
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&#34;å‚è€ƒæ–‡çŒ®&#34;&gt;å‚è€ƒæ–‡çŒ®&lt;/h2&gt;
&lt;p&gt;1.&lt;a class=&#34;link&#34; href=&#34;https://www.zhihu.com/people/kylin-lab&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://www.zhihu.com/people/kylin-lab&lt;/a&gt;&lt;/p&gt;
</description>
        </item>
        <item>
        <title>syslogæ—¥å¿—è½¬å‘é…ç½®</title>
        <link>https://zcj-git520.github.io/p/syslog%E6%97%A5%E5%BF%97%E8%BD%AC%E5%8F%91%E9%85%8D%E7%BD%AE/</link>
        <pubDate>Mon, 20 Sep 2021 22:00:38 +0800</pubDate>
        
        <guid>https://zcj-git520.github.io/p/syslog%E6%97%A5%E5%BF%97%E8%BD%AC%E5%8F%91%E9%85%8D%E7%BD%AE/</guid>
        <description>&lt;img src="https://zcj-git520.github.io/p/syslog%E6%97%A5%E5%BF%97%E8%BD%AC%E5%8F%91%E9%85%8D%E7%BD%AE/8.png" alt="Featured image of post syslogæ—¥å¿—è½¬å‘é…ç½®" /&gt;&lt;h2 id=&#34;æœåŠ¡å™¨é…ç½®æœåŠ¡å™¨å¹³å°x86&#34;&gt;æœåŠ¡å™¨é…ç½®(æœåŠ¡å™¨å¹³å°ï¼šx86)&lt;/h2&gt;
&lt;h3 id=&#34;rsyslogç®€ä»‹&#34;&gt;Rsyslogç®€ä»‹&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Rsyslogæ˜¯ä¸€ä¸ª syslogd çš„å¤šçº¿ç¨‹å¢å¼ºç‰ˆï¼Œåœ¨syslogçš„åŸºç¡€ä¸Šæ‰©å±•äº†å¾ˆå¤šå…¶ä»–åŠŸèƒ½ï¼Œå¦‚æ•°æ®åº“æ”¯æŒ(MySQL, PostgreSQLã€Oracleç­‰)ã€æ—¥å¿—å†…å®¹ç­›é€‰ã€å®šä¹‰æ—¥å¿—æ ¼å¼æ¨¡æ¿ç­‰ã€‚é™¤äº†é»˜è®¤çš„udpåè®®å¤–ï¼Œrsyslogè¿˜æ”¯æŒtcpåè®®æ¥æ¥æ”¶æ—¥å¿—ã€‚&lt;/li&gt;
&lt;li&gt;ç›®å‰çš„linuxçš„å‘è¡Œç‰ˆéƒ½åˆ‡æ¢ä¸ºrsyslog&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;å®‰è£…rsyslog&#34;&gt;å®‰è£…Rsyslog&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Linuxçš„å‘è¡Œç‰ˆä¸­é¢„å…ˆå®‰è£…äº†Rsyslog,æ— éœ€å®‰è£…ï¼Œrsyslogd â€“v æŸ¥çœ‹ç‰ˆæœ¬&lt;/li&gt;
&lt;li&gt;è‹¥æœªå®‰è£…ï¼Œä»¥ä¸‹æ˜¯å®‰è£…æ­¥éª¤ï¼š
1.ubuntuï¼šsudo apt install rsyslog
2.CentOSï¼šyum install rsyslog&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;rsyslogconfé…ç½®æ–‡ä»¶è¯¦è§£&#34;&gt;Rsyslog.confé…ç½®æ–‡ä»¶è¯¦è§£&lt;/h3&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;é…ç½®æ–‡ä»¶ä½ç½®ï¼š/etc/rsyslog.conf
#### MODULES ####               #å®šä¹‰æ—¥å¿—çš„æ¨¡å—ã€‚
$ModLoad imuxsock             #imuxsockä¸ºæ¨¡å—åï¼Œæ”¯æŒæœ¬åœ°ç³»ç»Ÿæ—¥å¿—çš„æ¨¡å—ã€‚
$ModLoad imjournal            #imjournalä¸ºæ¨¡å—åï¼Œæ”¯æŒå¯¹ç³»ç»Ÿæ—¥å¿—çš„è®¿é—®ã€‚
#$ModLoad imklog               #imklogä¸ºæ¨¡å—åï¼Œæ”¯æŒå†…æ ¸æ—¥å¿—çš„æ¨¡å—ã€‚
#$ModLoad immark               #immarkä¸ºæ¨¡å—åï¼Œæ”¯æŒæ—¥å¿—æ ‡è®°ã€‚
# Provides UDP syslog reception   #æä¾›udp syslogçš„æ¥æ”¶ã€‚
#$ModLoad imudp               #imudpä¸ºæ¨¡å—åï¼Œæ”¯æŒudpåè®®ã€‚
#$UDPServerRun 514               #å…è®¸514ç«¯å£æ¥æ”¶ä½¿ç”¨udpå’Œtcpè½¬å‘æ¥çš„æ—¥å¿—ã€‚
# Provides TCP syslog reception       #æä¾›tcp syslogçš„æ¥æ”¶ã€‚
#$ModLoad imtcp              #imtcpä¸ºæ¨¡å—åï¼Œæ”¯æŒtcpåè®®ã€‚
#$InputTCPServerRun 514

#### GLOBAL DIRECTIVES ####    #å®šä¹‰å…¨å±€æ—¥å¿—æ ¼å¼çš„æŒ‡ä»¤ã€‚
# Where to place auxiliary files
$WorkDirectory /var/lib/rsyslog       #å·¥ä½œç›®å½•ã€‚
# Use default timestamp format
$ActionFileDefaultTemplate RSYSLOG_TraditionalFileFormat  #å®šä¹‰æ—¥å¿—æ ¼å¼é»˜è®¤æ¨¡æ¿ã€‚
$IncludeConfig /etc/rsyslog.d/*.conf                     #æ‰€æœ‰é…ç½®æ–‡ä»¶è·¯å¾„ã€‚
$OmitLocalLogging on                                      #çœç•¥æœ¬åœ°ç™»å½•ã€‚
# File to store the position in the journal
$IMJournalStateFile imjournal.state

#### RULES ####
#kern.*                                  /dev/console
#è®°å½•æ‰€æœ‰æ—¥å¿—ç±»å‹çš„infoçº§åˆ«ä»¥åŠå¤§äºinfoçº§åˆ«çš„ä¿¡æ¯åˆ°messagesæ–‡ä»¶ï¼Œä½†æ˜¯mailé‚®ä»¶ä¿¡æ¯ï¼ŒauthprivéªŒè¯æ–¹é¢çš„ä¿¡æ¯å’Œcornæ—¶é—´å’Œä»»åŠ¡ç›¸å…³ä¿¡æ¯é™¤å¤–ã€‚
*.info;mail.none;authpriv.none;cron.none      /var/log/messages

# authprivéªŒè¯ç›¸å…³çš„æ‰€æœ‰ä¿¡æ¯å­˜æ”¾åœ¨/var/log/secureã€‚
authpriv.*                                /var/log/secure

#é‚®ä»¶çš„æ‰€æœ‰ä¿¡æ¯å­˜åœ¨/var/log/maillogï¼›è¿™é‡Œæœ‰ä¸€ä¸ªâ€œ-â€ç¬¦å·è¡¨ç¤ºæ˜¯ä½¿ç”¨å¼‚æ­¥çš„æ–¹å¼è®°å½•
mail.*                                   -/var/log/maillog

#ä»»åŠ¡è®¡åˆ’æœ‰å…³çš„ä¿¡æ¯å­˜æ”¾åœ¨/var/log/cronã€‚
cron.*                                   /var/log/cron

#è®°å½•æ‰€æœ‰çš„â‰¥emergçº§åˆ«ä¿¡æ¯ï¼Œå‘é€ç»™æ¯ä¸ªç™»å½•åˆ°ç³»ç»Ÿçš„æ—¥å¿—ã€‚
*.emerg                                 :omusrmsg:*

#è®°å½•uucpï¼Œnews.critç­‰å­˜æ”¾åœ¨/var/log/spooler
uucp,news.crit                            /var/log/spooler

#æœ¬åœ°æœåŠ¡å™¨çš„å¯åŠ¨çš„æ‰€æœ‰æ—¥å¿—å­˜æ”¾åœ¨/var/log/boot.log
local7.*                                  /var/log/boot.log

ä»¥ä¸‹ä¸ºï¼šrsyslog å®¢æœç«¯çš„é…ç½®
#å‘é€æ—¥å¿—ï¼Œ@è¡¨ç¤ºä¼ è¾“åè®®ï¼ˆ@è¡¨ç¤ºudpï¼Œ@@è¡¨ç¤ºtcpï¼‰ï¼Œåé¢æ˜¯ipå’Œç«¯å£ã€‚
#*.* @@remote-host:514
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&#34;é…ç½®æœåŠ¡å™¨&#34;&gt;é…ç½®æœåŠ¡å™¨&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;ä½¿ç”¨sudo vi /etc/rsyslog.conf æ‰“å¼€é…ç½®æ–‡ä»¶&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;é€‰æ‹©ä¼ è¾“çš„åè®®&#34;&gt;é€‰æ‹©ä¼ è¾“çš„åè®®&lt;/h4&gt;
&lt;p&gt;1.ä½¿ç”¨udpä¼ è¾“æ—¥å¿—ï¼Œé…ç½®æ—¶å°†å‰é¢çš„#å»æ‰å³å¯&lt;br&gt;
$ModLoad imudp&lt;br&gt;
$UDPServerRun 514&lt;br&gt;
2.ä½¿ç”¨tcpä¼ è¾“åè®®, å°†#å»ç‚¹å³å¯&lt;br&gt;
$ModLoad imtcp&lt;br&gt;
$InputTCPServerRun 514&lt;br&gt;
é…ç½®å¦‚å›¾ï¼š&lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 359; 
			flex-basis: 863px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/syslog%E6%97%A5%E5%BF%97%E8%BD%AC%E5%8F%91%E9%85%8D%E7%BD%AE/1.png&#34; data-size=&#34;554x154&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/syslog%E6%97%A5%E5%BF%97%E8%BD%AC%E5%8F%91%E9%85%8D%E7%BD%AE/1.png&#34;
			width=&#34;554&#34;
			height=&#34;154&#34;
			srcset=&#34;https://zcj-git520.github.io/p/syslog%E6%97%A5%E5%BF%97%E8%BD%AC%E5%8F%91%E9%85%8D%E7%BD%AE/1_hu77084371b4080a34a3de211f1d39cdb3_32949_480x0_resize_box_3.png 480w, https://zcj-git520.github.io/p/syslog%E6%97%A5%E5%BF%97%E8%BD%AC%E5%8F%91%E9%85%8D%E7%BD%AE/1_hu77084371b4080a34a3de211f1d39cdb3_32949_1024x0_resize_box_3.png 1024w&#34;
			loading=&#34;lazy&#34;
			&gt;
	&lt;/a&gt;
	
&lt;/figure&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æ³¨æ˜ï¼š&lt;br&gt;
514/5014ç«¯å£å·å¯ä»¥è‡ªå·±é…ç½®ï¼Œé»˜è®¤ä¸º514.&lt;br&gt;
rsyslogåå°è¿›ç¨‹æ˜¯å¯ä»¥åŒæ—¶ç›‘å¬TCP/UDPè¿æ¥çš„&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;é…ç½®æ¥æ”¶æ—¥å¿—æ¨¡æ¿&#34;&gt;é…ç½®æ¥æ”¶æ—¥å¿—æ¨¡æ¿&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;åœ¨GLOBAL DIRECTIVESå†…å®¹å—çš„å‰é¢å¢åŠ æ¥æ”¶æ—¥å¿—æ¨¡æ¿
æ¨¡æ¿å¦‚ä¸‹ï¼š&lt;br&gt;
$template RemoteLogs,&amp;quot;/var/log/%HOSTNAME%/%PROGRAMNAME%.log&amp;quot;&lt;br&gt;
*.* ?RemoteLogs&lt;br&gt;
&amp;amp; ~&lt;/li&gt;
&lt;li&gt;æ³¨æ˜ï¼š&lt;br&gt;
1ã€$template RemoteLogsæŒ‡ä»¤ï¼ˆâ€œRemoteLogsâ€ å¯ä»¥ä¸ºå…¶å®ƒçš„æè¿°çš„åå­—ï¼‰è¿«ä½¿rsyslogåå°è¿›ç¨‹éš”å¼€æœ¬åœ°/var/log/ä¸‹æ–‡ä»¶å»å†™æ—¥å¿—ä¿¡æ¯ã€‚è€Œæ—¥å¿—æ–‡ä»¶ååˆ™ä¾æ®å‘é€è¿œç¨‹æ—¥å¿—çš„æœºå™¨ååŠåº”ç”¨ç¨‹åºåæ¥å®šä¹‰ã€‚&lt;br&gt;
2ã€*.*  ?RemoteLogsï¼‰æš—å«è¿è¡Œç”¨æ¨¡æ¿RemoteLogsäºæ‰€æœ‰çš„æ¥æ”¶æ—¥å¿—ã€‚&lt;br&gt;
3ã€&amp;amp; ~åˆ™å‘Šè¯‰rsyslogåå°è¿›ç¨‹åœæ­¢è¿›ä¸€æ­¥çš„å»å¤„ç†æ—¥å¿—ä¿¡æ¯,å³ä¸å¯¹å®ƒä»¬è¿›è¡Œæœ¬åœ°åŒ–å†™å…¥ï¼Œå®ƒæ˜¯ä»£è¡¨ä¸€ä¸ªé‡å®šå‘è§„åˆ™ã€‚å¦‚æœæ²¡æœ‰è¿™ä¸€è¡Œï¼Œåˆ™æ„å‘³ç€æ¥æ”¶åˆ°çš„æ—¥å¿—ä¼šå†™å…¥ä¸¤æ¬¡ï¼Œä¸€æ¬¡å¦‚å‰ä¸¤è¡Œå†™çš„æ–¹å¼å†™ï¼Œç¬¬äºŒæ¬¡åˆ™ä»¥æœ¬åœ°æ—¥å¿—è®°å½•çš„æ–¹å¼å†™å…¥ã€‚è¿è¡Œè¿™ä¸ªè§„åˆ™çš„å¦ä¸€ä¸ªç»“è®ºåˆ™æ˜¯æ—¥å¿—æœåŠ¡å™¨è‡ªå·±çš„æ—¥å¿—ä¿¡æ¯åªä¼šå†™å…¥åˆ°ä¾ç…§æœºå™¨ä¸»æœºåå‘½åçš„æ–‡ä»¶ä¸­ã€‚
&lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 426; 
			flex-basis: 1022px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/syslog%E6%97%A5%E5%BF%97%E8%BD%AC%E5%8F%91%E9%85%8D%E7%BD%AE/2.png&#34; data-size=&#34;554x130&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/syslog%E6%97%A5%E5%BF%97%E8%BD%AC%E5%8F%91%E9%85%8D%E7%BD%AE/2.png&#34;
			width=&#34;554&#34;
			height=&#34;130&#34;
			srcset=&#34;https://zcj-git520.github.io/p/syslog%E6%97%A5%E5%BF%97%E8%BD%AC%E5%8F%91%E9%85%8D%E7%BD%AE/2_hu3baee738422c39b2b8b3a15300ae6fe7_26443_480x0_resize_box_3.png 480w, https://zcj-git520.github.io/p/syslog%E6%97%A5%E5%BF%97%E8%BD%AC%E5%8F%91%E9%85%8D%E7%BD%AE/2_hu3baee738422c39b2b8b3a15300ae6fe7_26443_1024x0_resize_box_3.png 1024w&#34;
			loading=&#34;lazy&#34;
			&gt;
	&lt;/a&gt;
	
&lt;/figure&gt;&lt;/li&gt;
&lt;li&gt;è®¾ç½®åï¼Œä¼šæŒ‰ç…§æ¨¡æ¿æ ¼å¼ä¿å­˜æ—¥å¿—
&lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 1065; 
			flex-basis: 2556px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/syslog%E6%97%A5%E5%BF%97%E8%BD%AC%E5%8F%91%E9%85%8D%E7%BD%AE/3.png&#34; data-size=&#34;554x52&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/syslog%E6%97%A5%E5%BF%97%E8%BD%AC%E5%8F%91%E9%85%8D%E7%BD%AE/3.png&#34;
			width=&#34;554&#34;
			height=&#34;52&#34;
			srcset=&#34;https://zcj-git520.github.io/p/syslog%E6%97%A5%E5%BF%97%E8%BD%AC%E5%8F%91%E9%85%8D%E7%BD%AE/3_hu8eaabc720939b9f1b459055b1ef23fcf_21246_480x0_resize_box_3.png 480w, https://zcj-git520.github.io/p/syslog%E6%97%A5%E5%BF%97%E8%BD%AC%E5%8F%91%E9%85%8D%E7%BD%AE/3_hu8eaabc720939b9f1b459055b1ef23fcf_21246_1024x0_resize_box_3.png 1024w&#34;
			loading=&#34;lazy&#34;
			&gt;
	&lt;/a&gt;
	
&lt;/figure&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;è®¾ç½®å®Œæˆä¿å­˜&#34;&gt;è®¾ç½®å®Œæˆï¼Œä¿å­˜&lt;/h4&gt;
&lt;h3 id=&#34;æ£€æŸ¥rsyslogé…ç½®&#34;&gt;æ£€æŸ¥Rsyslogé…ç½®&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;ä½¿ç”¨å‘½ä»¤ï¼šrsyslogd -f /etc/rsyslog.conf -N1&lt;/li&gt;
&lt;li&gt;é…ç½®ä¿¡æ¯æ­£ç¡®æœ‰å¦‚ä¸‹æç¤º:
&lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 1259; 
			flex-basis: 3021px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/syslog%E6%97%A5%E5%BF%97%E8%BD%AC%E5%8F%91%E9%85%8D%E7%BD%AE/4.png&#34; data-size=&#34;554x44&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/syslog%E6%97%A5%E5%BF%97%E8%BD%AC%E5%8F%91%E9%85%8D%E7%BD%AE/4.png&#34;
			width=&#34;554&#34;
			height=&#34;44&#34;
			srcset=&#34;https://zcj-git520.github.io/p/syslog%E6%97%A5%E5%BF%97%E8%BD%AC%E5%8F%91%E9%85%8D%E7%BD%AE/4_hu7b39900913f27882a0ae7c07277316b2_23299_480x0_resize_box_3.png 480w, https://zcj-git520.github.io/p/syslog%E6%97%A5%E5%BF%97%E8%BD%AC%E5%8F%91%E9%85%8D%E7%BD%AE/4_hu7b39900913f27882a0ae7c07277316b2_23299_1024x0_resize_box_3.png 1024w&#34;
			loading=&#34;lazy&#34;
			&gt;
	&lt;/a&gt;
	
&lt;/figure&gt;&lt;/li&gt;
&lt;li&gt;è‹¥é…ç½®ä¿¡æ¯æœ‰è¯¯ï¼Œåˆ™éœ€è¦åœ¨æ›´æ”¹é…ç½®æ–‡ä»¶&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;é‡å¯rsyslogæœåŠ¡&#34;&gt;é‡å¯RSyslogæœåŠ¡&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Debian,Ubuntuæˆ–CentOS/RHEL 6ä½¿ç”¨:sudo service rsyslog restart&lt;/li&gt;
&lt;li&gt;Fedora æˆ– CentOS/RHEL 7ä½¿ç”¨ï¼šsudo systemctl restart rsyslog&lt;/li&gt;
&lt;li&gt;ä½¿ç”¨ï¼šsudo lsof -i :[ç«¯å£å·]ï¼ŒæŸ¥çœ‹æœåŠ¡æ˜¯å¦å¼€å¯å’Œtcp/udpè¿æ¥æƒ…å†µ
&lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 548; 
			flex-basis: 1316px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/syslog%E6%97%A5%E5%BF%97%E8%BD%AC%E5%8F%91%E9%85%8D%E7%BD%AE/5.png&#34; data-size=&#34;554x101&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/syslog%E6%97%A5%E5%BF%97%E8%BD%AC%E5%8F%91%E9%85%8D%E7%BD%AE/5.png&#34;
			width=&#34;554&#34;
			height=&#34;101&#34;
			srcset=&#34;https://zcj-git520.github.io/p/syslog%E6%97%A5%E5%BF%97%E8%BD%AC%E5%8F%91%E9%85%8D%E7%BD%AE/5_hub384d36617421245c9364162c8094a34_49314_480x0_resize_box_3.png 480w, https://zcj-git520.github.io/p/syslog%E6%97%A5%E5%BF%97%E8%BD%AC%E5%8F%91%E9%85%8D%E7%BD%AE/5_hub384d36617421245c9364162c8094a34_49314_1024x0_resize_box_3.png 1024w&#34;
			loading=&#34;lazy&#34;
			&gt;
	&lt;/a&gt;
	
&lt;/figure&gt;&lt;/li&gt;
&lt;li&gt;æˆ–ä½¿ç”¨sudo netstat -pantu | grep rsyslog
&lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 748; 
			flex-basis: 1796px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/syslog%E6%97%A5%E5%BF%97%E8%BD%AC%E5%8F%91%E9%85%8D%E7%BD%AE/6.png&#34; data-size=&#34;554x74&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/syslog%E6%97%A5%E5%BF%97%E8%BD%AC%E5%8F%91%E9%85%8D%E7%BD%AE/6.png&#34;
			width=&#34;554&#34;
			height=&#34;74&#34;
			srcset=&#34;https://zcj-git520.github.io/p/syslog%E6%97%A5%E5%BF%97%E8%BD%AC%E5%8F%91%E9%85%8D%E7%BD%AE/6_hud96afeb39ab29624ebbfb8d879fa92f8_35198_480x0_resize_box_3.png 480w, https://zcj-git520.github.io/p/syslog%E6%97%A5%E5%BF%97%E8%BD%AC%E5%8F%91%E9%85%8D%E7%BD%AE/6_hud96afeb39ab29624ebbfb8d879fa92f8_35198_1024x0_resize_box_3.png 1024w&#34;
			loading=&#34;lazy&#34;
			&gt;
	&lt;/a&gt;
	
&lt;/figure&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;æŸ¥çœ‹æ—¥å¿—&#34;&gt;æŸ¥çœ‹æ—¥å¿—&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;å¯åŠ¨å®¢æˆ·ç«¯ï¼Œè¿›å…¥é…ç½®æ–‡ä»¶æ¨¡æ¿ä¸­æ—¥å¿—ä¿å­˜çš„ä½ç½®ï¼š&lt;br&gt;
&lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 971; 
			flex-basis: 2332px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/syslog%E6%97%A5%E5%BF%97%E8%BD%AC%E5%8F%91%E9%85%8D%E7%BD%AE/7.png&#34; data-size=&#34;554x57&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/syslog%E6%97%A5%E5%BF%97%E8%BD%AC%E5%8F%91%E9%85%8D%E7%BD%AE/7.png&#34;
			width=&#34;554&#34;
			height=&#34;57&#34;
			srcset=&#34;https://zcj-git520.github.io/p/syslog%E6%97%A5%E5%BF%97%E8%BD%AC%E5%8F%91%E9%85%8D%E7%BD%AE/7_hu31450327525b5e8e578d50ab58e1813e_22403_480x0_resize_box_3.png 480w, https://zcj-git520.github.io/p/syslog%E6%97%A5%E5%BF%97%E8%BD%AC%E5%8F%91%E9%85%8D%E7%BD%AE/7_hu31450327525b5e8e578d50ab58e1813e_22403_1024x0_resize_box_3.png 1024w&#34;
			loading=&#34;lazy&#34;
			&gt;
	&lt;/a&gt;
	
&lt;/figure&gt;&lt;br&gt;
&lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 371; 
			flex-basis: 892px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/syslog%E6%97%A5%E5%BF%97%E8%BD%AC%E5%8F%91%E9%85%8D%E7%BD%AE/8.png&#34; data-size=&#34;554x149&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/syslog%E6%97%A5%E5%BF%97%E8%BD%AC%E5%8F%91%E9%85%8D%E7%BD%AE/8.png&#34;
			width=&#34;554&#34;
			height=&#34;149&#34;
			srcset=&#34;https://zcj-git520.github.io/p/syslog%E6%97%A5%E5%BF%97%E8%BD%AC%E5%8F%91%E9%85%8D%E7%BD%AE/8_hu442c80cfdca83249146ebd0d5822289f_88346_480x0_resize_box_3.png 480w, https://zcj-git520.github.io/p/syslog%E6%97%A5%E5%BF%97%E8%BD%AC%E5%8F%91%E9%85%8D%E7%BD%AE/8_hu442c80cfdca83249146ebd0d5822289f_88346_1024x0_resize_box_3.png 1024w&#34;
			loading=&#34;lazy&#34;
			&gt;
	&lt;/a&gt;
	
&lt;/figure&gt;&lt;/li&gt;
&lt;li&gt;è‹¥æ²¡æœ‰ç”Ÿæˆæ—¥å¿—æ–‡ä»¶ï¼Œéœ€è¦ä½¿ç”¨ï¼šsudo tcpdump host å®¢æˆ·ç«¯ip æŸ¥çœ‹æ˜¯å¦è½¬å‘æ—¥å¿—ï¼Œæœ‰åˆ™æ˜¯ä¿å­˜æ¨¡æ¿å‡ºé—®é¢˜ï¼Œæ²¡æœ‰å¯èƒ½çš„æœåŠ¡ç«¯é…ç½®æˆ–è€…å®¢æˆ·ç«¯é…ç½®å‡ºé—®é¢˜&lt;br&gt;
&lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 415; 
			flex-basis: 997px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/syslog%E6%97%A5%E5%BF%97%E8%BD%AC%E5%8F%91%E9%85%8D%E7%BD%AE/9.png&#34; data-size=&#34;553x133&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/syslog%E6%97%A5%E5%BF%97%E8%BD%AC%E5%8F%91%E9%85%8D%E7%BD%AE/9.png&#34;
			width=&#34;553&#34;
			height=&#34;133&#34;
			srcset=&#34;https://zcj-git520.github.io/p/syslog%E6%97%A5%E5%BF%97%E8%BD%AC%E5%8F%91%E9%85%8D%E7%BD%AE/9_hud06aeafa785a175b3e704d37bde11243_109835_480x0_resize_box_3.png 480w, https://zcj-git520.github.io/p/syslog%E6%97%A5%E5%BF%97%E8%BD%AC%E5%8F%91%E9%85%8D%E7%BD%AE/9_hud06aeafa785a175b3e704d37bde11243_109835_1024x0_resize_box_3.png 1024w&#34;
			loading=&#34;lazy&#34;
			&gt;
	&lt;/a&gt;
	
&lt;/figure&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;å®¢æˆ·ç«¯é…ç½®&#34;&gt;å®¢æˆ·ç«¯é…ç½®&lt;/h2&gt;
&lt;h3 id=&#34;å¹³å°x86&#34;&gt;å¹³å°ï¼šx86&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;å¹³å°æ˜¯ä½¿ç”¨çš„rsyslog&lt;/li&gt;
&lt;li&gt;ä½¿ç”¨sudo vi /etc/rsyslog.conf æ‰“å¼€é…ç½®æ–‡ä»¶&lt;/li&gt;
&lt;li&gt;é…ç½®ï¼š&lt;br&gt;
å‘é€æ—¥å¿—ï¼Œ@è¡¨ç¤ºä¼ è¾“åè®®ï¼ˆ@è¡¨ç¤ºudpï¼Œ@@è¡¨ç¤ºtcpï¼‰ï¼Œåé¢æ˜¯ipå’Œç«¯å£ã€‚&lt;br&gt;
*.* @@remote-host:514&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 769; 
			flex-basis: 1846px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/syslog%E6%97%A5%E5%BF%97%E8%BD%AC%E5%8F%91%E9%85%8D%E7%BD%AE/10.png&#34; data-size=&#34;554x72&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/syslog%E6%97%A5%E5%BF%97%E8%BD%AC%E5%8F%91%E9%85%8D%E7%BD%AE/10.png&#34;
			width=&#34;554&#34;
			height=&#34;72&#34;
			srcset=&#34;https://zcj-git520.github.io/p/syslog%E6%97%A5%E5%BF%97%E8%BD%AC%E5%8F%91%E9%85%8D%E7%BD%AE/10_hu121ce9beda989ac489d36785534a4c07_11404_480x0_resize_box_3.png 480w, https://zcj-git520.github.io/p/syslog%E6%97%A5%E5%BF%97%E8%BD%AC%E5%8F%91%E9%85%8D%E7%BD%AE/10_hu121ce9beda989ac489d36785534a4c07_11404_1024x0_resize_box_3.png 1024w&#34;
			loading=&#34;lazy&#34;
			&gt;
	&lt;/a&gt;
	
&lt;/figure&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æ£€æŸ¥ä¸é‡å¯æœåŠ¡å’Œx86æœåŠ¡å™¨å¹³å°ä¸€æ ·&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;å¹³å°å¼€å‘æ¿&#34;&gt;å¹³å°å¼€å‘æ¿&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;æ¿å­æ˜¯ä½¿ç”¨çš„syslog ä½¿ç”¨å‘½ä»¤ï¼špsè¿›è¡ŒæŸ¥çœ‹è¿›ç¨‹&lt;br&gt;
&lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 266; 
			flex-basis: 639px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/syslog%E6%97%A5%E5%BF%97%E8%BD%AC%E5%8F%91%E9%85%8D%E7%BD%AE/11.png&#34; data-size=&#34;554x208&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/syslog%E6%97%A5%E5%BF%97%E8%BD%AC%E5%8F%91%E9%85%8D%E7%BD%AE/11.png&#34;
			width=&#34;554&#34;
			height=&#34;208&#34;
			srcset=&#34;https://zcj-git520.github.io/p/syslog%E6%97%A5%E5%BF%97%E8%BD%AC%E5%8F%91%E9%85%8D%E7%BD%AE/11_hu4e6e3e2c799b4a539a43c7ac3ef0cfea_64168_480x0_resize_box_3.png 480w, https://zcj-git520.github.io/p/syslog%E6%97%A5%E5%BF%97%E8%BD%AC%E5%8F%91%E9%85%8D%E7%BD%AE/11_hu4e6e3e2c799b4a539a43c7ac3ef0cfea_64168_1024x0_resize_box_3.png 1024w&#34;
			loading=&#34;lazy&#34;
			&gt;
	&lt;/a&gt;
	
&lt;/figure&gt;&lt;/li&gt;
&lt;li&gt;æ‰¾åˆ°syslogdæœåŠ¡ï¼Œè‹¥æœªæ‰¾åˆ°ï¼Œå¯èƒ½ä¸æ”¯æŒsyslogæœåŠ¡
ä½¿ç”¨å‘½ä»¤ï¼šsyslogd â€“h æŸ¥çœ‹syslogdæ”¯æŒçš„æœåŠ¡&lt;br&gt;
&lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 271; 
			flex-basis: 651px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/syslog%E6%97%A5%E5%BF%97%E8%BD%AC%E5%8F%91%E9%85%8D%E7%BD%AE/12.png&#34; data-size=&#34;554x204&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/syslog%E6%97%A5%E5%BF%97%E8%BD%AC%E5%8F%91%E9%85%8D%E7%BD%AE/12.png&#34;
			width=&#34;554&#34;
			height=&#34;204&#34;
			srcset=&#34;https://zcj-git520.github.io/p/syslog%E6%97%A5%E5%BF%97%E8%BD%AC%E5%8F%91%E9%85%8D%E7%BD%AE/12_hu303331932f04e72e99ec8f8ee7478f8d_60851_480x0_resize_box_3.png 480w, https://zcj-git520.github.io/p/syslog%E6%97%A5%E5%BF%97%E8%BD%AC%E5%8F%91%E9%85%8D%E7%BD%AE/12_hu303331932f04e72e99ec8f8ee7478f8d_60851_1024x0_resize_box_3.png 1024w&#34;
			loading=&#34;lazy&#34;
			&gt;
	&lt;/a&gt;
	
&lt;/figure&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;é…ç½®å®¢æˆ·ç«¯&#34;&gt;é…ç½®å®¢æˆ·ç«¯&lt;/h3&gt;
&lt;p&gt;1.ç»“æŸä¹‹å‰çš„syslogdæœåŠ¡ï¼Œé€šè¿‡ä½¿ç”¨kill è¿›ç¨‹å· ç»“æŸè¿›ç¨‹&lt;br&gt;
&lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 537; 
			flex-basis: 1290px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/syslog%E6%97%A5%E5%BF%97%E8%BD%AC%E5%8F%91%E9%85%8D%E7%BD%AE/13.png&#34; data-size=&#34;554x103&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/syslog%E6%97%A5%E5%BF%97%E8%BD%AC%E5%8F%91%E9%85%8D%E7%BD%AE/13.png&#34;
			width=&#34;554&#34;
			height=&#34;103&#34;
			srcset=&#34;https://zcj-git520.github.io/p/syslog%E6%97%A5%E5%BF%97%E8%BD%AC%E5%8F%91%E9%85%8D%E7%BD%AE/13_hu9fb7ecb2769d8f203208712c5df5625e_31804_480x0_resize_box_3.png 480w, https://zcj-git520.github.io/p/syslog%E6%97%A5%E5%BF%97%E8%BD%AC%E5%8F%91%E9%85%8D%E7%BD%AE/13_hu9fb7ecb2769d8f203208712c5df5625e_31804_1024x0_resize_box_3.png 1024w&#34;
			loading=&#34;lazy&#34;
			&gt;
	&lt;/a&gt;
	
&lt;/figure&gt;
2.é€šè¿‡syslogdæä¾›çš„æœåŠ¡æ˜¯é€šè¿‡ -L  â€“R æœåŠ¡å™¨çš„ip:port&lt;br&gt;
æ³¨æ˜ï¼šé»˜è®¤ç«¯å£ä¸ºï¼š514,ç«¯å£å·åº”è¯¥ä¸æœåŠ¡å™¨é…ç½®çš„ç«¯å£å·ä¸€è‡´&lt;br&gt;
3.å¯åŠ¨syslogdæœåŠ¡ï¼š/sbin/syslogd -f /etc/syslog.conf -L -R 172.16.193.204:514
4.é€šè¿‡tcpdump host 172.16.193.204 æŸ¥çœ‹æ—¥å¿—æ˜¯å¦è¢«è½¬å‘åˆ°æœåŠ¡å™¨&lt;br&gt;
&lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 537; 
			flex-basis: 1290px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/syslog%E6%97%A5%E5%BF%97%E8%BD%AC%E5%8F%91%E9%85%8D%E7%BD%AE/13.png&#34; data-size=&#34;554x103&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/syslog%E6%97%A5%E5%BF%97%E8%BD%AC%E5%8F%91%E9%85%8D%E7%BD%AE/13.png&#34;
			width=&#34;554&#34;
			height=&#34;103&#34;
			srcset=&#34;https://zcj-git520.github.io/p/syslog%E6%97%A5%E5%BF%97%E8%BD%AC%E5%8F%91%E9%85%8D%E7%BD%AE/13_hu9fb7ecb2769d8f203208712c5df5625e_31804_480x0_resize_box_3.png 480w, https://zcj-git520.github.io/p/syslog%E6%97%A5%E5%BF%97%E8%BD%AC%E5%8F%91%E9%85%8D%E7%BD%AE/13_hu9fb7ecb2769d8f203208712c5df5625e_31804_1024x0_resize_box_3.png 1024w&#34;
			loading=&#34;lazy&#34;
			&gt;
	&lt;/a&gt;
	
&lt;/figure&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æ³¨æ˜ï¼šå¼€å‘æ¿çš„syslogæ”¯æŒUDPä¼ è¾“ï¼Œéœ€è¦å¼€å‘æ¿çš„æ—¥å¿—æ–‡ä»¶éœ€è¦åœ¨æœåŠ¡å™¨æ‰“å¼€UDP&lt;/li&gt;
&lt;/ul&gt;
</description>
        </item>
        <item>
        <title>go åˆ‡ç‰‡çš„æ·±å…¥ç†è§£</title>
        <link>https://zcj-git520.github.io/p/go-%E5%88%87%E7%89%87%E7%9A%84%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3/</link>
        <pubDate>Wed, 15 Sep 2021 22:00:38 +0800</pubDate>
        
        <guid>https://zcj-git520.github.io/p/go-%E5%88%87%E7%89%87%E7%9A%84%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3/</guid>
        <description>&lt;img src="https://zcj-git520.github.io/p/go-%E5%88%87%E7%89%87%E7%9A%84%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3/s4.png" alt="Featured image of post go åˆ‡ç‰‡çš„æ·±å…¥ç†è§£" /&gt;&lt;h2 id=&#34;åˆ‡ç‰‡çš„å†…éƒ¨ç»“æ„&#34;&gt;åˆ‡ç‰‡çš„å†…éƒ¨ç»“æ„&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;åˆ‡ç‰‡çš„ç»“æ„å¯åˆ†ä¸ºï¼šæ•°ç»„ï¼Œæ•°æ®ï¼ˆå…ƒç´ ï¼‰çš„åœ°å€&amp;amp;dataã€ä¹Ÿå­˜å…ƒç´ ä¸ªæ•°lenã€å¯ä»¥å­˜å‚¨å¤šå°‘å…ƒç´ cap&lt;/li&gt;
&lt;li&gt;æºç å¦‚ä¸‹&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;/blockquote&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;å®šä¹‰åˆ‡ç‰‡çš„ç»“æ„ï¼š
type slice struct {
	array unsafe.Pointer   
	len   int
	cap   int
}
&lt;/code&gt;&lt;/pre&gt;&lt;ul&gt;
&lt;li&gt;å¦‚å›¾æ‰€ç¤º&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 447; 
			flex-basis: 1075px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/go-%E5%88%87%E7%89%87%E7%9A%84%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3/s1.png&#34; data-size=&#34;327x73&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/go-%E5%88%87%E7%89%87%E7%9A%84%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3/s1.png&#34;
			width=&#34;327&#34;
			height=&#34;73&#34;
			srcset=&#34;https://zcj-git520.github.io/p/go-%E5%88%87%E7%89%87%E7%9A%84%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3/s1_hufa230f30ea970ac155f1510029c77fa1_16064_480x0_resize_box_3.png 480w, https://zcj-git520.github.io/p/go-%E5%88%87%E7%89%87%E7%9A%84%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3/s1_hufa230f30ea970ac155f1510029c77fa1_16064_1024x0_resize_box_3.png 1024w&#34;
			loading=&#34;lazy&#34;
			alt=&#34;avatar&#34;&gt;
	&lt;/a&gt;
	
	&lt;figcaption&gt;avatar&lt;/figcaption&gt;
	
&lt;/figure&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;var data [] int å£°æ˜ä¸€ä¸ªåˆ‡ç‰‡ï¼Œç›¸å½“äºç”Ÿæˆåˆ‡ç‰‡çš„ç»“æ„ï¼Œdataåœ°å€æŒ‡é’ˆä¸ºnil, lenå’Œcapéƒ½ä¸º0ã€‚è¿™å°±å¾ˆæ¸…æ¥šä¸ºä»€ä¹ˆï¼Œnilåˆ‡ç‰‡ä¸å¯ä»¥ç›´æ¥ä½¿ç”¨äº†ğŸ˜„ ç»“æ„å¦‚å›¾&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 425; 
			flex-basis: 1020px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/go-%E5%88%87%E7%89%87%E7%9A%84%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3/s2.png&#34; data-size=&#34;357x84&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/go-%E5%88%87%E7%89%87%E7%9A%84%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3/s2.png&#34;
			width=&#34;357&#34;
			height=&#34;84&#34;
			srcset=&#34;https://zcj-git520.github.io/p/go-%E5%88%87%E7%89%87%E7%9A%84%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3/s2_hu3ecbacb1008bd2eb98e4b57b029321b8_19806_480x0_resize_box_3.png 480w, https://zcj-git520.github.io/p/go-%E5%88%87%E7%89%87%E7%9A%84%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3/s2_hu3ecbacb1008bd2eb98e4b57b029321b8_19806_1024x0_resize_box_3.png 1024w&#34;
			loading=&#34;lazy&#34;
			alt=&#34;avatar&#34;&gt;
	&lt;/a&gt;
	
	&lt;figcaption&gt;avatar&lt;/figcaption&gt;
	
&lt;/figure&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ä½¿ç”¨åˆ‡ç‰‡æ—¶éœ€è¦make([]type,len,cap)æˆ–è€…åˆå§‹åŒ–[]type{}æ‰èƒ½ä½¿ç”¨ï¼Œè¿™æ˜¯å› ä¸ºåœ¨åœ¨ç”Ÿæˆåˆ‡ç‰‡çš„ç»“æ„æ—¶ï¼ŒåŒæ—¶ä¹Ÿå¼€è¾Ÿäº†ä¸€æ®µæ–°çš„å†…å­˜ï¼Œç±»å‹ä¸ºtype, ç»“æ„é•¿åº¦ä¸ºcap,åŒæ—¶å€¼è¿›è¡Œåˆå§‹åŒ–ã€‚&lt;/li&gt;
&lt;li&gt;make æºç å¦‚ä¸‹ï¼š&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;/blockquote&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;func makeslice(et *_type, len, cap int) unsafe.Pointer {
	mem, overflow := math.MulUintptr(et.size, uintptr(cap))    // åˆ¤æ–­æ˜¯å¦è¶Šç•Œ
	if overflow || mem &amp;gt; maxAlloc || len &amp;lt; 0 || len &amp;gt; cap {
		// NOTE: Produce a &#39;len out of range&#39; error instead of a
		// &#39;cap out of range&#39; error when someone does make([]T, bignumber).
		// &#39;cap out of range&#39; is true too, but since the cap is only being
		// supplied implicitly, saying len is clearer.
		// See golang.org/issue/4085.
		mem, overflow := math.MulUintptr(et.size, uintptr(len))
		if overflow || mem &amp;gt; maxAlloc || len &amp;lt; 0 {
			panicmakeslicelen()       // è¶Šç•Œç›´æ¥ panic
		}
		panicmakeslicecap()    // è¶Šç•Œç›´æ¥ panic
	}

	return mallocgc(mem, et, true)  //å¼€è¾Ÿå†…å­˜
}
&lt;/code&gt;&lt;/pre&gt;&lt;blockquote&gt;
&lt;p&gt;&lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 318; 
			flex-basis: 763px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/go-%E5%88%87%E7%89%87%E7%9A%84%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3/s3.png&#34; data-size=&#34;525x165&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/go-%E5%88%87%E7%89%87%E7%9A%84%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3/s3.png&#34;
			width=&#34;525&#34;
			height=&#34;165&#34;
			srcset=&#34;https://zcj-git520.github.io/p/go-%E5%88%87%E7%89%87%E7%9A%84%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3/s3_hu288b58219022501a33ccafd08b91cbd7_40298_480x0_resize_box_3.png 480w, https://zcj-git520.github.io/p/go-%E5%88%87%E7%89%87%E7%9A%84%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3/s3_hu288b58219022501a33ccafd08b91cbd7_40298_1024x0_resize_box_3.png 1024w&#34;
			loading=&#34;lazy&#34;
			alt=&#34;avatar&#34;&gt;
	&lt;/a&gt;
	
	&lt;figcaption&gt;avatar&lt;/figcaption&gt;
	
&lt;/figure&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;ä¹Ÿå¯ä»¥é€šè¿‡åº•å±‚æ•°ç»„åˆå§‹åŒ–ï¼Œåˆ‡ç‰‡çš„dataæŒ‡é’ˆæŒ‡å‘å°±æ˜¯ç›¸åŒç±»å‹çš„åº•å±‚æ•°ç»„ï¼›é€šè¿‡slince := array[n:m],è¡¨ç¤ºå®šä¹‰äº†ä¸€ä¸ªç±»å‹å’Œarrayç›¸åŒï¼Œlenä¸ºm-n,capé»˜è®¤ä¸ºarrayçš„é•¿åº¦çš„åˆ‡ç‰‡ã€‚åˆ‡ç‰‡å’Œæ•°ç»„éƒ½æŒ‡å‘äº†ç›¸åŒçš„åœ°å€ã€‚å¤šä¸ªåˆ‡ç‰‡å¯ä»¥å…±ç”¨åŒä¸€ä¸ªåº•å±‚æ•°ç»„ã€‚
&lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 195; 
			flex-basis: 468px&#34;
	&gt;
	&lt;a href=&#34;https://zcj-git520.github.io/p/go-%E5%88%87%E7%89%87%E7%9A%84%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3/s4.png&#34; data-size=&#34;531x272&#34;&gt;
		&lt;img src=&#34;https://zcj-git520.github.io/p/go-%E5%88%87%E7%89%87%E7%9A%84%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3/s4.png&#34;
			width=&#34;531&#34;
			height=&#34;272&#34;
			srcset=&#34;https://zcj-git520.github.io/p/go-%E5%88%87%E7%89%87%E7%9A%84%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3/s4_hu1fce009c184102799b4a69d72efc8ec2_68940_480x0_resize_box_3.png 480w, https://zcj-git520.github.io/p/go-%E5%88%87%E7%89%87%E7%9A%84%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3/s4_hu1fce009c184102799b4a69d72efc8ec2_68940_1024x0_resize_box_3.png 1024w&#34;
			loading=&#34;lazy&#34;
			alt=&#34;avatar&#34;&gt;
	&lt;/a&gt;
	
	&lt;figcaption&gt;avatar&lt;/figcaption&gt;
	
&lt;/figure&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;é€šè¿‡append å‡½æ•°å‘åˆ‡ç‰‡å¢åŠ åˆ‡ç‰‡çš„å…ƒç´ ï¼Œå¢åŠ äº†len, cap ä¸å˜ã€‚&lt;/p&gt;
&lt;h2 id=&#34;åˆ‡ç‰‡æ‰©å®¹&#34;&gt;åˆ‡ç‰‡æ‰©å®¹&lt;/h2&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;åœ¨èµ„æºå……è£•çš„æ¡ä»¶ä¸‹ï¼Œåˆ‡ç‰‡æ˜¯å¯ä»¥é€šè¿‡appendä¸æ–­å¢åŠ å…ƒç´ ï¼Œå½“lenä¸ªæ•°å¢åŠ åˆ°capä¸€æ ·æ—¶ï¼Œåœ¨å¢åŠ å…ƒç´ æ—¶ï¼Œå°±éœ€è¦å¢åŠ åˆ‡ç‰‡çš„å®¹é‡capï¼Œé‚£é—®é¢˜æ¥äº†ï¼Œåˆ‡ç‰‡æ˜¯æ€ä¹ˆæ‰©å®¹çš„å‘¢ï¼Ÿ&lt;/p&gt;
&lt;h3 id=&#34;æ‰©å®¹è§„åˆ™é¢„ä¼°è§„åˆ™&#34;&gt;æ‰©å®¹è§„åˆ™ï¼ˆé¢„ä¼°è§„åˆ™ï¼‰&lt;/h3&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;å½“éœ€è¦æ‰©å®¹çš„æ•°é‡æ¯”ä¹‹å‰capçš„ä¸¤å€éƒ½å¤§ï¼Œåˆ™æ‰©å®¹ä¸ºéœ€è¦æ‰©å®¹çš„æ•°é‡&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å½“éœ€è¦æ‰©å®¹çš„æ•°é‡æ¯”ä¹‹å‰capçš„ä¸¤å€éƒ½å¤§å°ï¼Œä¹‹å‰çš„capå°äº1024 ç›´æ¥æ‰©å¤§ä¹‹å‰çš„2å€&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å½“éœ€è¦æ‰©å®¹çš„æ•°é‡æ¯”ä¹‹å‰capçš„ä¸¤å€éƒ½å¤§å°ï¼Œä¹‹å‰çš„capå¤§äº1024 ç›´æ¥æ‰©å¤§ä¹‹å‰çš„1.25å€&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ä¼ªä»£ç å¦‚ä¸‹&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;if oldcap&lt;em&gt;2  &amp;lt; newcap æ—¶ï¼Œ æ‰©å®¹ä¸ºnewcap
else{ if oldcap &amp;lt; 1024     newcap = 2&lt;/em&gt;oldcap     ;  else           newcap = 1.25*oldcap }&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;æºä»£ç å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;blockquote&gt;
&lt;/blockquote&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;newcap := old.cap
	doublecap := newcap + newcap     //ä¸¤å€çš„oldcap
	if cap &amp;gt; doublecap {
//å½“éœ€è¦æ‰©å®¹çš„æ•°é‡æ¯”ä¹‹å‰capçš„ä¸¤å€éƒ½å¤§ï¼Œåˆ™æ‰©å®¹ä¸ºéœ€è¦æ‰©å®¹çš„æ•°é‡
		newcap = cap   
	} else {
//å½“éœ€è¦æ‰©å®¹çš„æ•°é‡æ¯”ä¹‹å‰capçš„ä¸¤å€éƒ½å¤§å°ï¼Œä¹‹å‰çš„capå°äº1024 ç›´æ¥æ‰©å¤§ä¹‹å‰çš„2å€
		if old.cap &amp;lt; 1024 {   
			newcap = doublecap
		} else {
			// Check 0 &amp;lt; newcap to detect overflow
			// and prevent an infinite loop.
å½“éœ€è¦æ‰©å®¹çš„æ•°é‡æ¯”ä¹‹å‰capçš„ä¸¤å€éƒ½å¤§å°ï¼Œä¹‹å‰çš„capå¤§äº1024 ç›´æ¥æ‰©å¤§ä¹‹å‰çš„1.25å€
			for 0 &amp;lt; newcap &amp;amp;&amp;amp; newcap &amp;lt; cap {
				newcap += newcap / 4
			}
			// Set newcap to the requested cap when
			// the newcap calculation overflowed.
			if newcap &amp;lt;= 0 {
				newcap = cap
			}
		}
	}
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&#34;æ‰©å®¹è°ƒæ•´&#34;&gt;æ‰©å®¹è°ƒæ•´&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;åœ¨é¢„ä¼°æ‰©å®¹åï¼Œä¼šæ ¹æ®å†…å­˜å¯¹é½ï¼ˆå‡å°‘å†…å­˜æµªè´¹ï¼‰åœ¨è¿›è¡Œè°ƒæ•´ï¼Œä»£ç ï¼šcapmem := roundupsize(uintptr(newcap) * uintptr(et.size))newcapå°±æ˜¯å‰æ–‡ä¸­è®¡ç®—å‡ºçš„newcapï¼Œet.sizeä»£è¡¨sliceä¸­ä¸€ä¸ªå…ƒç´ çš„å¤§å°ï¼Œcapmemè®¡ç®—å‡ºæ¥çš„å°±æ˜¯æ­¤æ¬¡æ‰©å®¹éœ€è¦ç”³è¯·çš„å†…å­˜å¤§å°ã€‚roundupsizeå‡½æ•°å°±æ˜¯å¤„ç†å†…å­˜å¯¹é½çš„å‡½æ•°&lt;/li&gt;
&lt;li&gt;æºç å¦‚ä¸‹&lt;/li&gt;
&lt;/ul&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt; var overflow bool
 	var lenmem, newlenmem, capmem uintptr
 	switch {
 	case et.size == 1:    //ä¾‹å¦‚byte å¤§å°ä¸º1ï¼Œ æ‰©å®¹çš„å¤§å°ä¸ºå‘ä¸Šå–æ•´çš„æ•°å€¼
 		lenmem = uintptr(old.len)
 		newlenmem = uintptr(cap)
 		capmem = roundupsize(uintptr(newcap)) 
 		overflow = uintptr(newcap) &amp;gt; maxAlloc
 		newcap = int(capmem)
 	case et.size == sys.PtrSize:
 		lenmem = uintptr(old.len) * sys.PtrSize
 		newlenmem = uintptr(cap) * sys.PtrSize
 		capmem = roundupsize(uintptr(newcap) * sys.PtrSize)
 		overflow = uintptr(newcap) &amp;gt; maxAlloc/sys.PtrSize
 		newcap = int(capmem / sys.PtrSize)
 	case isPowerOfTwo(et.size):  //å¤„ç†2çš„å€æ•°
 		var shift uintptr
 		if sys.PtrSize == 8 {
 			// Mask shift for better code generation.
 			shift = uintptr(sys.Ctz64(uint64(et.size))) &amp;amp; 63
 		} else {
 			shift = uintptr(sys.Ctz32(uint32(et.size))) &amp;amp; 31
 		}
 		lenmem = uintptr(old.len) &amp;lt;&amp;lt; shift
 		newlenmem = uintptr(cap) &amp;lt;&amp;lt; shift
 		capmem = roundupsize(uintptr(newcap) &amp;lt;&amp;lt; shift)
 		overflow = uintptr(newcap) &amp;gt; (maxAlloc &amp;gt;&amp;gt; shift)
 		newcap = int(capmem &amp;gt;&amp;gt; shift)
 	default:
 		lenmem = uintptr(old.len) * et.size
 		newlenmem = uintptr(cap) * et.size
 		capmem, overflow = math.MulUintptr(et.size, uintptr(newcap))
 		capmem = roundupsize(capmem)
 		newcap = int(capmem / et.size)
 	}
 
 	// The check of overflow in addition to capmem &amp;gt; maxAlloc is needed
 	// to prevent an overflow which can be used to trigger a segfault
 	// on 32bit architectures with this example program:
 	//
 	// type T [1&amp;lt;&amp;lt;27 + 1]int64
 	//
 	// var d T
 	// var s []T
 	//
 	// func main() {
 	//   s = append(s, d, d, d, d)
 	//   print(len(s), &amp;quot;\n&amp;quot;)
 	// }
 	if overflow || capmem &amp;gt; maxAlloc {
 		panic(errorString(&amp;quot;growslice: cap out of range&amp;quot;))
 	}

### æ‰©å®¹åå†…å­˜åˆ†é…

* åˆ†é… å¤§äºcapçš„å†…å­˜ï¼Œæ²¡æœ‰æ•°æ®æŒ‡é’ˆï¼ŒmemclrNoHeapPointersåˆ›å»º
* æºç å¦‚ä¸‹ï¼š
  &amp;gt; 
	var p unsafe.Pointer
	if et.ptrdata == 0 {
		p = mallocgc(capmem, nil, false)
		// The append() that calls growslice is going to overwrite from old.len to cap (which will be the new length).
		// Only clear the part that will not be overwritten.
		memclrNoHeapPointers(add(p, newlenmem), capmem-newlenmem)
	} else {
		// Note: can&#39;t use rawmem (which avoids zeroing of memory), because then GC can scan uninitialized memory.
		p = mallocgc(capmem, et, true)  //åˆ†é…å†…å­˜åœ°å€
		if lenmem &amp;gt; 0 &amp;amp;&amp;amp; writeBarrier.enabled {
			// Only shade the pointers in old.array since we know the destination slice p
			// only contains nil pointers because it has been cleared during alloc.
			bulkBarrierPreWriteSrcOnly(uintptr(p), uintptr(old.array), lenmem-et.size+et.ptrdata)
		}
	}
	memmove(p, old.array, lenmem)  //æ•°æ®è¿ç§»

	return slice{p, old.len, newcap}  
}
&lt;/code&gt;&lt;/pre&gt;</description>
        </item>
        <item>
        <title>æˆ‘çš„ç¬¬ä¸€ä»½åšå®¢</title>
        <link>https://zcj-git520.github.io/p/%E6%88%91%E7%9A%84%E7%AC%AC%E4%B8%80%E4%BB%BD%E5%8D%9A%E5%AE%A2/</link>
        <pubDate>Sat, 04 Sep 2021 10:05:40 +0800</pubDate>
        
        <guid>https://zcj-git520.github.io/p/%E6%88%91%E7%9A%84%E7%AC%AC%E4%B8%80%E4%BB%BD%E5%8D%9A%E5%AE%A2/</guid>
        <description>&lt;h3 id=&#34;ä¸ºä»€ä¹ˆå†™åšå®¢&#34;&gt;ä¸ºä»€ä¹ˆå†™åšå®¢&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;æ€»ç»“å¼€å‘ä¸­é‡åˆ°çš„é—®é¢˜ã€‚å·¥ä½œè¿‡åå‘ç°è‡ªå·±å¹¶ä¸æ“…é•¿å¯¹çŸ¥è¯†ç‚¹çš„æ€»ç»“ï¼Œå¯¼è‡´æ€»æ˜¯é‡åˆ°ç›¸åŒçš„é—®é¢˜ï¼Œè¿‡æ®µæ—¶é—´éœ€è¦é‡æ–°æŸ¥æ‰¾è§£å†³æ–¹æ¡ˆ&lt;/li&gt;
&lt;li&gt;è®°å½•å­¦ä¹ çš„çŸ¥è¯†ï¼Œä¸æ–­çš„æ¸©ä¹ ã€‚å­¦çš„ä¸œè¥¿è¿‡äºç¢ç‰‡åŒ–ï¼Œå¯¼è‡´çŸ¥è¯†ä¸æˆä½“ç³»ã€‚æ—¶é—´é•¿äº†ï¼Œç¢ç‰‡çš„çŸ¥è¯†ä¹Ÿå¿˜è®°äº†&lt;/li&gt;
&lt;li&gt;æå‡è‡ªå·±çš„ä¸“ä¸šæŠ€èƒ½ã€‚é€šè¿‡å†™åšå®¢æå‡è‡ªå·±çš„èƒ½åŠ›&lt;/li&gt;
&lt;li&gt;å½¢æˆè‡ªå·±çš„æŠ€æœ¯æ ˆï¼Œé‡åˆ°çš„å¿—åŒé“åˆçš„æœ‹å‹&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;ä¸ºä»€ä¹ˆé€‰æ‹©hugoæ¥æ­å»ºè‡ªå·±çš„åšå®¢&#34;&gt;ä¸ºä»€ä¹ˆé€‰æ‹©hugoæ¥æ­å»ºè‡ªå·±çš„åšå®¢&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Hugoæ˜¯ç”±Goè¯­è¨€å®ç°çš„é™æ€ç½‘ç«™ç”Ÿæˆå™¨ã€‚ç®€å•ã€æ˜“ç”¨ã€é«˜æ•ˆã€æ˜“æ‰©å±•ã€å¿«é€Ÿéƒ¨ç½²ã€‚&lt;/li&gt;
&lt;li&gt;æ“ä½œç®€å•ï¼Œä½¿ç”¨Markdownç›´æ¥ç”Ÿæˆé™æ€ç½‘é¡µ&lt;/li&gt;
&lt;li&gt;å…è´¹ä¸”ä»¥ç»´æŠ¤, åœ¨githubä¸Šå°±å¯ä¾›ä»–äººè®¿é—®ï¼Œæ— éœ€è´­ä¹°æœåŠ¡å™¨ï¼Œç»´æŠ¤ç®€å•&lt;/li&gt;
&lt;li&gt;å‘è¡¨æ–‡ç« ç›´æ¥pushåˆ°è‡ªå·±ä»“åº“å³å¯&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;ä¸‹è½½hogoçš„æºç &#34;&gt;ä¸‹è½½hogoçš„æºç &lt;/h3&gt;
&lt;blockquote&gt;
&lt;p&gt;git clone  &lt;a class=&#34;link&#34; href=&#34;https://github.com/gohugoio/hugo.git&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://github.com/gohugoio/hugo.git&lt;/a&gt;&lt;br&gt;
git branch æŸ¥çœ‹å•å‰ä»£ç çš„åˆ†æ”¯&lt;br&gt;
git branch -a æŸ¥çœ‹å…¨éƒ¨åˆ†æ”¯&lt;br&gt;
git checkout branch åˆ‡æ¢åˆ†æ”¯&lt;br&gt;
git branch åˆ†æ”¯å  åˆ›å»ºè‡ªå·±çš„æœ¬åœ°åˆ†å­&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&#34;ç¼–è¯‘æºç &#34;&gt;ç¼–è¯‘æºç &lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;åœ¨masteråˆ†æ”¯ä¸‹ï¼Œåœ¨main.go çš„ç›®å½•ä¸‹ä½¿ç”¨å‘½ä»¤: go build  åœ¨ç›®å½•ä¸‹ç”Ÿæˆhugo.exe&lt;/li&gt;
&lt;li&gt;åœ¨cmdä¸‹ä½¿ç”¨hugo æŸ¥çœ‹æ˜¯å¦ç¼–è¯‘æˆåŠŸ ç¼–è¯‘æˆåŠŸ ä¼šæ‰“å°hugoçš„ç‰ˆæœ¬&lt;/li&gt;
&lt;li&gt;å®‰è£…æˆåŠŸ&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;ç”Ÿæˆç«™ç‚¹&#34;&gt;ç”Ÿæˆç«™ç‚¹&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;ä½¿ç”¨å‘½ä»¤ï¼šhugo new site /ç›®å½•&lt;/li&gt;
&lt;li&gt;cd /ç›®å½• æŸ¥çœ‹åˆ°&lt;/li&gt;
&lt;li&gt;
&lt;pre&gt;&lt;code&gt;            â–¸ archetypes/  
            â–¸ content/  
            â–¸ layouts/  
            â–¸ static/  
            config.toml
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;li&gt;åˆ›å»ºç«™ç‚¹æˆåŠŸ&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;åˆ›å»ºmdæ–‡ç« &#34;&gt;åˆ›å»ºmdæ–‡ç« &lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;ä½¿ç”¨å‘½ä»¤: hugo  new æ–‡ç« å.md  åœ¨content/ ä¸‹ç”Ÿæˆè¯¥mdæ–‡ä»¶&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;é€‰æ‹©åšå®¢ä¸»é¢˜æ¨¡æ¿&#34;&gt;é€‰æ‹©åšå®¢ä¸»é¢˜æ¨¡æ¿&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;hugo æä¾›å¾ˆå¤šçš„ä¸»é¢˜åšå®¢æ¨¡æ¿ï¼šhttps://themes.gohugo.io/&lt;/li&gt;
&lt;li&gt;åˆ›å»ºthemeæ–‡ä»¶å¤¹ï¼Œå°†ä¸»é¢˜æ¨¡æ¿æ”¾åœ¨é‡Œé¢ ï¼šmkdir themes&lt;/li&gt;
&lt;li&gt;è¿›å…¥è¯¥æ–‡ä»¶å¤¹ï¼šcd themes&lt;/li&gt;
&lt;li&gt;ä¸‹è½½ä¸»é¢˜ï¼Œä½¿ç”¨git clone ä¸»é¢˜æ¨¡æ¿ ï¼šgit clone &lt;a class=&#34;link&#34; href=&#34;https://github.com/spf13/hyde.git&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://github.com/spf13/hyde.git&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;é…ç½®configtomlæ–‡ä»¶&#34;&gt;é…ç½®config.tomlæ–‡ä»¶&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;config.toul æ–‡ä»¶hugo çš„é…ç½®æ–‡ä»¶ï¼Œå¯ä»¥é…ç½®ä¸»é¢˜æ¨¡æ¿ï¼Œä¸ªäººä¿¡æ¯ç­‰(ä¸»é¢˜æ¨¡æ¿ä¸­ç›¸åº”çš„é…ç½®æ–‡ä»¶)å¦‚&lt;/li&gt;
&lt;li&gt;
&lt;pre&gt;&lt;code&gt; baseurl = &amp;quot;http://****.com/&amp;quot;  //å‘å¸ƒçš„ç½‘ç«™
 languageCode = &amp;quot;ja&amp;quot;           //ä½¿ç”¨çš„è¯­è¨€
 title = &amp;quot;xxxx.COM&amp;quot;      //ç½‘ç«™åç§°ç­‰
  [Params]
  subtitle = &amp;quot;I would like to be a layer 3 switch.&amp;quot;
  facebook = &amp;quot;https://facebook.com/foobar&amp;quot;
  twitter = &amp;quot;https://twitter.com/foobar&amp;quot;
  github = &amp;quot;https://github.com/foobar&amp;quot;
  profile = &amp;quot;/images/profile.png&amp;quot;
  copyright = &amp;quot;Written by Asuka Suzuki&amp;quot;
  analytics = &amp;quot;UA-XXXXXXXX-X&amp;quot;
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;è¿è¡Œ&#34;&gt;è¿è¡Œ&lt;/h3&gt;
&lt;h4 id=&#34;æœ¬åœ°è¿è¡Œ&#34;&gt;æœ¬åœ°è¿è¡Œ&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;ä½¿ç”¨å‘½ä»¤ï¼šhugo server &amp;ndash;buildDrafts é…ç½®æ­£ç¡®åˆ™ä¼šå‡ºç°ï¼š http://localhost:1313/ (bind address 127.0.0.1) ç‚¹å‡»åœ¨æµè§ˆå™¨ä¸­è¿è¡Œ&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;æ¨é€åˆ°gitgub&#34;&gt;æ¨é€åˆ°gitgub&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;é¦–å…ˆåœ¨GitHubä¸Šåˆ›å»ºä¸€ä¸ªRepositoryï¼Œå‘½åä¸ºï¼šgithubç”¨æˆ·å.github.io&lt;/li&gt;
&lt;li&gt;ä¿®æ”¹config.toml é…ç½®æ–‡ä»¶ï¼šå°†baseurl = &amp;ldquo;http://githubç”¨æˆ·å.github.io&amp;rdquo;&lt;/li&gt;
&lt;li&gt;ä½¿ç”¨å‘½ä»¤ï¼šhugo  &amp;ndash;buildDrafts åœ¨æœ¬åœ°ç”Ÿæˆpublicçš„æ–‡ä»¶å¤¹&lt;/li&gt;
&lt;li&gt;&amp;ndash;buildDrafts å‚æ•°çš„ä¸»ç”¨æ˜¯å°†ä½ çš„æ–‡ç« åœ¨ä¸»é¢˜ä¸­å‡ºç°&lt;/li&gt;
&lt;li&gt;
&lt;pre&gt;&lt;code&gt;  cd public è¿›å…¥åˆ°publicæ–‡ä»¶å¤¹
  $ git init  åˆå§‹åŒ–æœ¬åœ°ä»“åº“
  $ git remote add origin https://github.com/githubç”¨æˆ·å/githubç”¨æˆ·å.github.io //æ·»åŠ åŸåˆ›ä»“åº“
 æˆ–è€…ç›´æ¥ git clone 
  $ git add -A
  $ git commit -m &amp;quot;first commit&amp;quot;
  $ git push -u origin master  //æ¨åˆ°è¿œç«¯
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;li&gt;ä½¿ç”¨ &amp;ldquo;http://githubç”¨æˆ·å.github.io&amp;quot;å°±å¯è®¿é—®&lt;/li&gt;
&lt;/ul&gt;
</description>
        </item>
        
    </channel>
</rss>
